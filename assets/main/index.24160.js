window.__require=function t(e,o,i){function n(a,s){if(!o[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var h=o[a]={exports:{}};e[a][0].call(h.exports,function(t){return n(e[a][1][t]||t)},h,h.exports,t,e,o,i)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<i.length;a++)n(i[a]);return n}({AddHomeBtn:[function(t,e,o){"use strict";cc._RF.push(e,"ceb71XE/U1Ls4IFHKqkFnL7","AddHomeBtn");var i=t("./TipManager"),n=t("./ShuShuConst"),r=cc._decorator,a=r.ccclass,s=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.start=function(){if(this.node.active=!1,window.tt){var t=this,e=window.tt;if(!e.checkShortcut)return console.error("## \u5b57\u8282\u7528\u6237\u7248\u672c\u8fc7\u4f4e\uff0c\u6ca1\u6709\u6dfb\u52a0\u684c\u9762\u529f\u80fd");e.checkShortcut({success:function(e){console.log("## \u68c0\u67e5\u5feb\u6377\u65b9\u5f0f  res.status\uff1a ",JSON.stringify(e.status)),0!=e.status.exist&&1!=e.status.needUpdate||(t.node.active=!0)},fail:function(t){console.log("## \u68c0\u67e5\u5feb\u6377\u65b9\u5f0f\u5931\u8d25",JSON.stringify(t.errMsg))}})}},e.prototype.btnClick_addHome=function(){cc.game.emit("gamelog_Thinking",n.ShuShuConst.btn,{id:"011"});var t=this;window.tt.addShortcut({success:function(){t.node.active=!1,console.log("## \u6dfb\u52a0\u684c\u9762\u6210\u529f"),i.Tip.show("\u6dfb\u52a0\u684c\u9762\u6210\u529f")},fail:function(t){console.log("## \u6dfb\u52a0\u684c\u9762\u5931\u8d25",JSON.stringify(t.errMsg))}})},__decorate([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{"./ShuShuConst":"ShuShuConst","./TipManager":"TipManager"}],AdjustEventSystem:[function(t,e,o){"use strict";cc._RF.push(e,"23762rcb5dEMbWtpU90whEn","AdjustEventSystem");var i=t("./UserConst"),n=t("./LocalStorageConst"),r=t("./LocalStorageManager"),a=t("./PlatformManager"),s=t("./UserManager"),c=new(function(){function t(){this.loginDaysTimes=1}return t.prototype.init=function(){if(this.loginDaysTimes=s.User.get(i.UserData.loginDaysTimes)||1,1==this.loginDaysTimes){var t=r.default.get(n.default.todayPlayTime)||0;setInterval(function(){t+=5,r.default.set(n.default.todayPlayTime,t);var e={300:"x3cnsd",900:"lmz49o",1200:"elxnda",1500:"dtpl38",1800:"cksi73"};e[""+t]&&(console.log("%c [adjustEvent] \u9996\u65e5\u6e38\u620f\u65f6\u957f: "+t+" ","color:#F500FF"),a.Platform.adjustEvent(e[""+t]))},5e3)}},t.prototype.todayPassTimes=function(){if(1==this.loginDaysTimes){var t=(r.default.get(n.default.todayPassTimes)||0)+1;r.default.set(n.default.todayPassTimes,t);var e={2:"ubnrq3",3:"5h5ad7",5:"iacn55",7:"gec2aj"};e[""+t]&&(console.log("%c [adjustEvent] \u9996\u65e5\u6210\u529f\u901a\u5173-\u57cb\u70b9: "+t+" ","color:#F500FF"),a.Platform.adjustEvent(e[""+t]))}},t.prototype.todayRewardTimes=function(){if(1==this.loginDaysTimes){var t=(r.default.get(n.default.todayRewardTimes)||0)+1;r.default.set(n.default.todayRewardTimes,t);var e={3:"jex8bx",5:"1a2gc8",8:"52qh6z",10:"a2cf8q",15:"9l9hd5",20:"y81ddi"};e[""+t]&&(console.log("%c [adjustEvent] \u9996\u65e5\u6fc0\u52b1\u6b21\u6570-\u57cb\u70b9: "+t+" ","color:#F500FF"),a.Platform.adjustEvent(e[""+t]))}},t.prototype.todayPay=function(t){if(1==this.loginDaysTimes){var e=r.default.get(n.default.todayPay)||0,o=r.default.get(n.default.todayPayEvent)||[],i=e+t;r.default.set(n.default.todayPay,i);var s={1:"q1nzj6",2:"b07t2h",4:"h4xjwq",8:"xolts1",10:"a2cf8q",20:"k49yek"};for(var c in s)i>=Number(c)&&!o.includes(Number(c))&&(o.push(Number(c)),r.default.set(n.default.todayPayEvent,o),console.log("%c [adjustEvent] \u9996\u65e5\u4ed8\u8d39-\u57cb\u70b9: "+c+" ","color:#F500FF"),a.Platform.adjustEvent(s[""+c]))}},t}());window.AdjustEventSys=c,o.default=c,cc._RF.pop()},{"./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./PlatformManager":"PlatformManager","./UserConst":"UserConst","./UserManager":"UserManager"}],AgeTip:[function(t,e,o){"use strict";cc._RF.push(e,"80238wgshFJbp6+kf1BaEPu","AgeTip");var i=t("./BaseUI"),n=t("./PlatformConst"),r=t("./PlatformManager"),a=t("./PopupManager"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){if(t.prototype.onLoad.call(this),this.addBtnOn("defineBtn",this.clickDefine,this),r.Platform.getConfig().ageTipType==n.AgeTipType.AGE_12){var e=this.dict.text.getComponent(cc.Label).string.replace("16\u5468\u5c81","12\u5468\u5c81");this.dict.text.getComponent(cc.Label).string=e}},e.prototype.clickDefine=function(){a.default.hide()},__decorate([c],e)}(i.default));o.default=l,cc._RF.pop()},{"./BaseUI":"BaseUI","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager"}],AndroidOPPO:[function(t,e,o){"use strict";cc._RF.push(e,"127b3B8bHdBgbAqnSy7lNOF","AndroidOPPO");var i,n=t("./BmsManager"),r=t("./Android");i=window.jsb&&jsb.reflection?jsb.reflection.callStaticMethod:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]};var a="org/cocos2dx/javascript/SdkBridge",s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._canReward=!1,e.onRewardSucFunc=null,e.onRewardFaiFunc=function(){},e.onInterstitialFeedSucFunc=function(){},e.onInterstitialFeedFaiFunc=function(){},e.isRewardVideo=!1,e.isGetReward=!1,e}return __extends(e,t),e.prototype.javaCall=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.apply(void 0,__spreadArrays([a],t))},e.prototype.bindEvents=function(){var t=this,e={onRewardVideoComplete:function(){console.log("== [AndroidOppo] \u6fc0\u52b1\u89c6\u9891\u64ad\u653e\u5b8c\u6210 =="),t._canReward=!0,cc.audioEngine.resumeAll(),setTimeout(function(){t.onRewardAdCallBack("adCompleted")},200)},onRewardVideoClose:function(){console.log("== [AndroidOppo] \u6fc0\u52b1\u89c6\u9891\u5173\u95ed \u662f\u5426\u53d1\u653e\u5956\u52b1: "+t._canReward+" =="),t._canReward=!1},onRewardVideoShow:function(){console.log("== [AndroidOppo] \u6fc0\u52b1\u89c6\u9891\u5c55\u793a =="),t.onRewardAdCallBack("rewardVideoSuccess"),t._canReward=!1,cc.audioEngine.pauseAll()},onRewardVideoFailed:function(){console.log("== [AndroidOppo] \u6fc0\u52b1\u89c6\u9891\u64ad\u653e\u5931\u8d25 =="),t._canReward=!1,t.onRewardAdCallBack("adsVideoFail")},onInterstitialVideoShow:function(){console.log("== [AndroidOppo] \u63d2\u5c4f\u5c55\u793a =="),cc.audioEngine.pauseAll()},onInterstitialVideoClose:function(){console.log("== [AndroidOppo] \u63d2\u5c4f\u8df3\u8fc7 =="),cc.audioEngine.resumeAll()},onInterstitialVideoShowFailed:function(){},onFeedShow:function(){},onFeedShowFailed:function(){},onFeedClose:function(){},onBannerShow:function(){},onBannerShowFailed:function(){},onBannerRemove:function(){},onBannerFeedShow:function(){},onBannerFeedShowFailed:function(){},onBannerFeedRemove:function(){},onInterstitialFeedShow:function(){console.log("[\u539f\u751f\u63d2\u5c4f\u5c55\u793a]"),cc.game.emit("onInterstitialFeedShow")},onInterstitialFeedShowFailed:function(){console.log("[\u539f\u751f\u63d2\u5c4f\u5c55\u793a\u5931\u8d25]"),cc.game.emit("onInterstitialFeedShowFailed")},onInterstitialFeedRemove:function(){console.log("[\u539f\u751f\u63d2\u5c4f\u79fb\u9664]")},onLargeFeedShow:function(){},onLargeFeedShowFailed:function(){},onLargeFeedRemove:function(){},onInterstitialFeedClick:function(){},onInterstitialClick:function(){console.log("[\u63d2\u5c4f\u70b9\u51fb]")},onUserCloseBannerFeed:function(){console.log("[\u7528\u6237\u4e3b\u52a8\u5173\u95ed\u539f\u751fbanner]")},onUserCloseLargeFeed:function(){console.log("[\u7528\u6237\u4e3b\u52a8\u5173\u95ed\u539f\u751f\u5927\u56fe]")},onUserCloseInterstitialFeed:function(){console.log("[\u7528\u6237\u4e3b\u52a8\u5173\u95ed\u539f\u751f\u63d2\u5c4f]"),cc.game.emit("onInterstitialFeedRemove")}};window.oppoAdCallback=e;var o={onForeground:function(){t.showSplash()},onBackground:function(){}};window.appStatusCallback=o},e.prototype.onRewardAdCallBack=function(t){var e=this;setTimeout(function(){"adCompleted"==t?(console.log("[this] --\x3e \u89c6\u9891\u89c2\u770b\u5b8c\u6bd5"),cc.audioEngine.resumeAll(),e.onRewardSucFunc&&e.onRewardSucFunc(0),window.iOSSendMsg=function(){}):"adSkipped"==t?(console.log("[this] --\x3e \u4e2d\u9014\u5173\u95ed\u5e7f\u544a"),cc.audioEngine.resumeAll(),window.iOSSendMsg=function(){},e.onRewardSucFunc&&e.onRewardSucFunc(1)):"adsVideoFail"==t?(console.log("[this] --\x3e \u89c6\u9891\u6b63\u5728\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e"),console.log("[AndroidAdCtrler] --\x3e [adsVideoFail]"),e.onRewardSucFunc&&e.onRewardSucFunc(-1),window.iOSSendMsg=function(){}):"rewardVideoSuccess"==t&&(console.log("[AndroidAdCtrler] --\x3e [rewardVideoSuccess]"),cc.audioEngine.pauseAll())},100)},e.prototype.setNativeAdId=function(t){i(a,"saveNativeAdPosId","(Ljava/lang/String;)V",t)},e.prototype.showRewardAds=function(t){this.isRewardVideo=!0,i(a,"showVideo","(Ljava/lang/String;)V",""),this.onRewardSucFunc=t,window.iOSSendMsg=this.onRewardAdCallBack.bind(this)},e.prototype.showInsert=function(){this.javaCall("showFullVideo","()V"),window.iOSSendMsg=this.onFullAdCallBack.bind(this)},e.prototype.onFullAdCallBack=function(t){"adCompleted"==t?(console.log("[AndroidAdCtrler][insertCallBack][adCompleted]"),window.iOSSendMsg=function(){}):"adSkipped"==t?(console.log("[AndroidAdCtrler][insertCallBack][adSkipped]"),console.log("\u4e2d\u9014\u64ad\u653e")):"adsVideoFail"==t?(console.log("[AndroidAdCtrler][insertCallBack][adsVideoFail]"),window.iOSSendMsg=function(){}):"insetVideoSuccess"==t&&console.log("[AndroidAdCtrler][insertCallBack][insetVideoSuccess]")},e.prototype.showBanner=function(){i(a,"showBanner","()V")},e.prototype.showBannerFeed2=function(t){i(a,"showBannerFeed","(Ljava/lang/String;IIII)V",t.posID,2,0,0,t.ratio,1)},e.prototype.showLargeFeed=function(t,e){void 0===t&&(t=""),void 0===e&&(e=0),jsb.reflection.callStaticMethod(a,"showLargeFeed","(Ljava/lang/String;III)V",t,0,0,e)},e.prototype.removeLargePicFeed=function(t){void 0===t&&(t=""),jsb.reflection.callStaticMethod(a,"removeLargePicFeed","(Ljava/lang/String;)V",t)},e.prototype.showInterstitialFeed=function(t,e,o,i){void 0===t&&(t=""),void 0===e&&(e=3),void 0===o&&(o=0),void 0===i&&(i=0),jsb.reflection.callStaticMethod(a,"showInterstitialFeed","(Ljava/lang/String;IIIII)V",t,e,0,0,o,i)},e.prototype.removeInterstitialFeed=function(t){void 0===t&&(t=""),jsb.reflection.callStaticMethod(a,"removeInterstitialFeed","(Ljava/lang/String;)V",t)},e.prototype.hideBanner=function(){i(a,"removeBannerFeed","()V"),i(a,"removeBanner","()V")},e.prototype.showSplash=function(){var t=n.BMS.getKey("isCheck");console.log("[isCheck-showSplash]",t),t||n.BMS.getKey("openkp")&&i(a,"showSplash","()V")},e}(r.Android);o.default=s,cc._RF.pop()},{"./Android":"Android","./BmsManager":"BmsManager"}],AndroidVIVO:[function(t,e,o){"use strict";cc._RF.push(e,"6fdf6GtxzFCJIVJDPn7n3kv","AndroidVIVO");var i,n=t("./Android");i=window.jsb&&jsb.reflection?jsb.reflection.callStaticMethod:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]};var r="org/cocos2dx/javascript/SdkBridge",a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._canReward=!1,e.onRewardSucFunc=null,e.onRewardFaiFunc=function(){},e.onInterstitialFeedSucFunc=function(){},e.onInterstitialFeedFaiFunc=function(){},e.isRewardVideo=!1,e.isGetReward=!1,e}return __extends(e,t),e.prototype.javaCall=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.apply(void 0,__spreadArrays([r],t))},e.prototype.bindEvents=function(){var t=this,e={onRewardVideoComplete:function(){console.log("== [AndroidVIVO] \u6fc0\u52b1\u89c6\u9891\u64ad\u653e\u5b8c\u6210 =="),t._canReward=!0,cc.audioEngine.resumeAll(),setTimeout(function(){t.onRewardAdCallBack("adCompleted")},200)},onRewardVideoClose:function(){console.log("== [AndroidVIVO] \u6fc0\u52b1\u89c6\u9891\u5173\u95ed \u662f\u5426\u53d1\u653e\u5956\u52b1: "+t._canReward+" =="),t._canReward=!1},onRewardVideoShow:function(){console.log("== [AndroidVIVO] \u6fc0\u52b1\u89c6\u9891\u5c55\u793a =="),t.onRewardAdCallBack("rewardVideoSuccess"),t._canReward=!1,cc.audioEngine.pauseAll()},onRewardVideoFailed:function(){console.log("== [AndroidVIVO] \u6fc0\u52b1\u89c6\u9891\u64ad\u653e\u5931\u8d25 =="),t._canReward=!1,t.onRewardAdCallBack("adsVideoFail")},onInterstitialVideoShow:function(){console.log("== [AndroidVIVO] \u63d2\u5c4f\u5c55\u793a =="),cc.audioEngine.pauseAll()},onInterstitialVideoClose:function(){console.log("== [AndroidVIVO] \u63d2\u5c4f\u8df3\u8fc7 =="),cc.audioEngine.resumeAll()},onInterstitialVideoShowFailed:function(){},onFeedShow:function(){},onFeedShowFailed:function(){},onFeedClose:function(){},onBannerShow:function(){},onBannerShowFailed:function(){},onBannerRemove:function(){},onBannerFeedShow:function(){},onBannerFeedShowFailed:function(){},onBannerFeedRemove:function(){},onInterstitialFeedShow:function(){console.log("[\u539f\u751f\u63d2\u5c4f\u5c55\u793a]"),cc.game.emit("onInterstitialFeedShow")},onInterstitialFeedShowFailed:function(){console.log("[\u539f\u751f\u63d2\u5c4f\u5c55\u793a\u5931\u8d25]"),cc.game.emit("onInterstitialFeedShowFailed")},onInterstitialFeedRemove:function(){console.log("[\u539f\u751f\u63d2\u5c4f\u79fb\u9664]")},onLargeFeedShow:function(){},onLargeFeedShowFailed:function(){},onLargeFeedRemove:function(){},onInterstitialFeedClick:function(){},onInterstitialClick:function(){console.log("[\u63d2\u5c4f\u70b9\u51fb]")},onUserCloseBannerFeed:function(){console.log("[\u7528\u6237\u4e3b\u52a8\u5173\u95ed\u539f\u751fbanner]")},onUserCloseLargeFeed:function(){console.log("[\u7528\u6237\u4e3b\u52a8\u5173\u95ed\u539f\u751f\u5927\u56fe]")},onUserCloseInterstitialFeed:function(){console.log("[\u7528\u6237\u4e3b\u52a8\u5173\u95ed\u539f\u751f\u63d2\u5c4f]"),cc.game.emit("onInterstitialFeedRemove")}};window.vivoAdCallback=e},e.prototype.onRewardAdCallBack=function(t){var e=this;setTimeout(function(){"adCompleted"==t?(console.log("[this] --\x3e \u89c6\u9891\u89c2\u770b\u5b8c\u6bd5"),cc.audioEngine.resumeAll(),e.onRewardSucFunc&&e.onRewardSucFunc(0),window.iOSSendMsg=function(){}):"adSkipped"==t?(console.log("[this] --\x3e \u4e2d\u9014\u5173\u95ed\u5e7f\u544a"),cc.audioEngine.resumeAll(),window.iOSSendMsg=function(){},e.onRewardSucFunc&&e.onRewardSucFunc(1)):"adsVideoFail"==t?(console.log("[this] --\x3e \u89c6\u9891\u6b63\u5728\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e"),console.log("[AndroidAdCtrler] --\x3e [adsVideoFail]"),e.onRewardSucFunc&&e.onRewardSucFunc(-1),window.iOSSendMsg=function(){}):"rewardVideoSuccess"==t&&(console.log("[AndroidAdCtrler] --\x3e [rewardVideoSuccess]"),cc.audioEngine.pauseAll())},100)},e.prototype.setNativeAdId=function(t){i(r,"saveNativeAdPosId","(Ljava/lang/String;)V",t)},e.prototype.showRewardAds=function(t){this.isRewardVideo=!0,i(r,"showVideo","(Ljava/lang/String;)V",""),this.onRewardSucFunc=t,window.iOSSendMsg=this.onRewardAdCallBack.bind(this)},e.prototype.showInsert=function(){this.javaCall("showFullVideo","()V"),window.iOSSendMsg=this.onFullAdCallBack.bind(this)},e.prototype.onFullAdCallBack=function(t){"adCompleted"==t?(console.log("[AndroidAdCtrler][insertCallBack][adCompleted]"),window.iOSSendMsg=function(){}):"adSkipped"==t?(console.log("[AndroidAdCtrler][insertCallBack][adSkipped]"),console.log("\u4e2d\u9014\u64ad\u653e")):"adsVideoFail"==t?(console.log("[AndroidAdCtrler][insertCallBack][adsVideoFail]"),window.iOSSendMsg=function(){}):"insetVideoSuccess"==t&&console.log("[AndroidAdCtrler][insertCallBack][insetVideoSuccess]")},e.prototype.showBanner=function(){i(r,"showBanner","()V")},e.prototype.showBannerFeed=function(t){i(r,"showBannerFeed","(IIII)V",2,0,0,t.ratio)},e.prototype.showLargeFeed=function(t,e){void 0===t&&(t=""),void 0===e&&(e=0),jsb.reflection.callStaticMethod(r,"showLargeFeed","(Ljava/lang/String;III)V",t,0,0,e)},e.prototype.removeLargePicFeed=function(t){void 0===t&&(t=""),jsb.reflection.callStaticMethod("com/wonder/xiaomi/XiaomiSdk","removeLargePicFeed","(Ljava/lang/String;)V",t)},e.prototype.showInterstitialFeed=function(t,e,o,i){void 0===t&&(t=""),void 0===e&&(e=3),void 0===o&&(o=0),void 0===i&&(i=0),jsb.reflection.callStaticMethod(r,"showInterstitialFeed","(Ljava/lang/String;IIIII)V",t,e,0,0,o,i)},e.prototype.hideBanner=function(){i(r,"removeBannerFeed","()V"),i(r,"removeBanner","()V")},e}(n.Android);o.default=a,cc._RF.pop()},{"./Android":"Android"}],AndroidXiaoMi:[function(t,e,o){"use strict";cc._RF.push(e,"19ec4L6AdNPkZspkCQE0E/f","AndroidXiaoMi");var i,n=t("./Android");i=window.jsb&&jsb.reflection?jsb.reflection.callStaticMethod:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]};var r="org/cocos2dx/javascript/SdkBridge",a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._canReward=!1,e.onRewardSucFunc=null,e.onRewardFaiFunc=function(){},e.onInterstitialFeedSucFunc=function(){},e.onInterstitialFeedFaiFunc=function(){},e.isRewardVideo=!1,e.isGetReward=!1,e.canShowInsertAd=!0,e}return __extends(e,t),e.prototype.javaCall=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.apply(void 0,__spreadArrays([r],t))},e.prototype.bindEvents=function(){var t=this,e={onRewardVideoComplete:function(){console.log("== [AndroidXiaoMi] \u6fc0\u52b1\u89c6\u9891\u64ad\u653e\u5b8c\u6210 =="),t._canReward=!0},onRewardVideoClose:function(){console.log("== [AndroidXiaoMi] \u6fc0\u52b1\u89c6\u9891\u5173\u95ed \u662f\u5426\u53d1\u653e\u5956\u52b1: "+t._canReward+" =="),cc.audioEngine.resumeAll(),t._canReward?setTimeout(function(){t.onRewardAdCallBack("adCompleted")},200):t.onRewardAdCallBack("adSkipped"),t._canReward=!1},onRewardVideoShow:function(){console.log("== [AndroidXiaoMi] \u6fc0\u52b1\u89c6\u9891\u5c55\u793a =="),t.onRewardAdCallBack("rewardVideoSuccess"),t._canReward=!1,cc.audioEngine.pauseAll(),t.intercept()},onRewardVideoFail:function(){console.log("== [AndroidXiaoMi] \u6fc0\u52b1\u89c6\u9891\u64ad\u653e\u5931\u8d25 =="),t._canReward=!1,t.onRewardAdCallBack("adsVideoFail")},onInterstitialShow:function(){console.log("== [AndroidXiaoMi] \u63d2\u5c4f\u5c55\u793a =="),cc.audioEngine.pauseAll()},onInterstitialClose:function(){console.log("== [AndroidXiaoMi] \u63d2\u5c4f\u8df3\u8fc7 =="),cc.audioEngine.resumeAll()},onInterstitialShowFail:function(){},onFeedShow:function(){},onFeedShowFail:function(){},onFeedClose:function(){},onBannerShow:function(){},onBannerShowFailed:function(){},onBannerRemove:function(){},onBannerFeedShow:function(){},onBannerFeedShowFailed:function(){},onBannerFeedRemove:function(){},onInterstitialFeedShow:function(){console.log("[\u539f\u751f\u63d2\u5c4f\u5c55\u793a]"),cc.game.emit("onInterstitialFeedShow")},onInterstitialFeedShowFailed:function(){console.log("[\u539f\u751f\u63d2\u5c4f\u5c55\u793a\u5931\u8d25]"),cc.game.emit("onInterstitialFeedShowFailed")},onInterstitialFeedRemove:function(){console.log("[\u539f\u751f\u63d2\u5c4f\u79fb\u9664]"),t.intercept()},onLargeFeedShow:function(){},onLargeFeedShowFailed:function(){},onLargeFeedRemove:function(){},onInterstitialFeedClick:function(){},onInterstitialClick:function(){console.log("[\u63d2\u5c4f\u70b9\u51fb]")},onUserCloseBannerFeed:function(){console.log("[\u7528\u6237\u4e3b\u52a8\u5173\u95ed\u539f\u751fbanner]")},onUserCloseLargeFeed:function(){console.log("[\u7528\u6237\u4e3b\u52a8\u5173\u95ed\u539f\u751f\u5927\u56fe]")},onUserCloseInterstitialFeed:function(){console.log("[\u7528\u6237\u4e3b\u52a8\u5173\u95ed\u539f\u751f\u63d2\u5c4f]"),cc.game.emit("onInterstitialFeedRemove"),t.intercept()}};window.xiaomiAdCallback=e;var o={onForeground:function(){cc.game.emit("onForeground")},onBackground:function(){}};window.appStatusCallback=o},e.prototype.intercept=function(){var t=this;this.canShowInsertAd=!1,setTimeout(function(){t.canShowInsertAd=!0},2e3)},e.prototype.onRewardAdCallBack=function(t){var e=this;setTimeout(function(){"adCompleted"==t?(console.log("[this] --\x3e \u89c6\u9891\u89c2\u770b\u5b8c\u6bd5"),cc.audioEngine.resumeAll(),e.onRewardSucFunc&&e.onRewardSucFunc(0),window.iOSSendMsg=function(){}):"adSkipped"==t?(console.log("[this] --\x3e \u4e2d\u9014\u5173\u95ed\u5e7f\u544a"),cc.audioEngine.resumeAll(),window.iOSSendMsg=function(){},e.onRewardSucFunc&&e.onRewardSucFunc(1)):"adsVideoFail"==t?(console.log("[this] --\x3e \u89c6\u9891\u6b63\u5728\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e"),console.log("[AndroidAdCtrler] --\x3e [adsVideoFail]"),e.onRewardSucFunc&&e.onRewardSucFunc(-1),window.iOSSendMsg=function(){}):"rewardVideoSuccess"==t&&(console.log("[AndroidAdCtrler] --\x3e [rewardVideoSuccess]"),cc.audioEngine.pauseAll())},100)},e.prototype.setNativeAdId=function(t){i(r,"saveNativeAdPosId","(Ljava/lang/String;)V",t)},e.prototype.showRewardAds=function(t){this.isRewardVideo=!0,i(r,"showVideo","(Ljava/lang/String;)V",""),this.onRewardSucFunc=t,window.iOSSendMsg=this.onRewardAdCallBack.bind(this)},e.prototype.showInsert=function(){this.javaCall("showFullVideo","()V"),window.iOSSendMsg=this.onFullAdCallBack.bind(this)},e.prototype.onFullAdCallBack=function(t){"adCompleted"==t?(console.log("[AndroidAdCtrler][insertCallBack][adCompleted]"),window.iOSSendMsg=function(){}):"adSkipped"==t?(console.log("[AndroidAdCtrler][insertCallBack][adSkipped]"),console.log("\u4e2d\u9014\u64ad\u653e")):"adsVideoFail"==t?(console.log("[AndroidAdCtrler][insertCallBack][adsVideoFail]"),window.iOSSendMsg=function(){}):"insetVideoSuccess"==t&&console.log("[AndroidAdCtrler][insertCallBack][insetVideoSuccess]")},e.prototype.showBanner=function(){console.log("\u5c55\u793abanner"),i(r,"showBanner","()V")},e.prototype.showBannerFeed=function(t){console.log("\u5c55\u793a\u539f\u751fbanner"),i(r,"showBannerFeed","(IIII)V",2,0,0,t.ratio)},e.prototype.showLargeFeed=function(t,e){void 0===t&&(t=""),void 0===e&&(e=0),jsb.reflection.callStaticMethod(r,"showLargeFeed","(Ljava/lang/String;III)V",t,0,0,e)},e.prototype.removeLargePicFeed=function(t){void 0===t&&(t=""),jsb.reflection.callStaticMethod("com/wonder/xiaomi/XiaomiSdk","removeLargePicFeed","(Ljava/lang/String;)V",t)},e.prototype.showInterstitialFeed=function(t,e,o,i){void 0===t&&(t=""),void 0===e&&(e=3),void 0===o&&(o=0),void 0===i&&(i=0),this.canShowInsertAd&&jsb.reflection.callStaticMethod(r,"showInterstitialFeed","(Ljava/lang/String;IIIII)V",t,e,0,0,o,i)},e.prototype.hideBanner=function(){i(r,"removeBannerFeed","()V"),i(r,"removeBanner","()V")},e.prototype.removeBannerFeed=function(){i(r,"removeBannerFeed","()V")},e}(n.Android);o.default=a,cc._RF.pop()},{"./Android":"Android"}],Android:[function(t,e,o){"use strict";cc._RF.push(e,"f27edY2HIxOF6zY0Ckxtlsy","Android"),o.Android=void 0;var i,n=t("./BasePlatform"),r=t("./ConfigManager");i=window.jsb&&jsb.reflection?jsb.reflection.callStaticMethod:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]};var a=function(t){function e(){var e=t.call(this)||this;return e._rewardAdsCb=null,e._isGetReward=!1,e.insertCallBack=null,e.rewardCallBack=null,e.nativeAdvanceBigBannerCallBack=null,e.nativeInsertBannerImgCallBack=null,e.nativeAdvanceBigBannerTotal=0,e.nativeInsertBannerImgTotal=0,e.defaultClass="org/cocos2dx/javascript/AppActivity",console.log("\u5b89\u5353"),e.bindEvents(),e}return __extends(e,t),e.prototype.getInstance=function(){return this},e.prototype.showRewardAds=function(t){console.log("[platform] [AndroidPlatform] showRewardAds"),window.iOSSendMsg=this.rewardCallBack,this._rewardAdsCb=null,this._rewardAdsCb=t,window.jsb&&window.jsb.reflection&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showVideo","(Ljava/lang/String;)V",this._config.rewardID)},e.prototype.showBanner=function(){console.log("[platform] [AndroidPlatform] showBanner"),window.jsb&&window.jsb.reflection&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","addBanner","(Ljava/lang/String;)V",this._config.bannerID)},e.prototype.hideBanner=function(){console.log("[platform] [AndroidPlatform] hideBanner"),window.jsb&&window.jsb.reflection&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","hideBanner","()V")},e.prototype.showNativeAdvanceBigBanner=function(t,e){if(void 0===e&&(e=!1),this.nativeAdvanceBigBannerTotal>0)return t&&t();this.nativeAdvanceBigBannerTotal++,console.log("[platform] [AndroidPlatform] showNativeAdvanceBigBanner"),window.jsb&&window.jsb.reflection&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showNativeAdvanceBigBanner","(Z)V",e),this.nativeAdvanceBigBannerCallBack=t},e.prototype.showAdDebugger=function(){console.log("\u8c03\u7528debug"),this.javaCall("showAdDebugger","()V")},e.prototype.hideNativeAdvanceBigBanner=function(){console.log("[platform] [AndroidPlatform] hideNativeAdvanceBigBanner"),window.jsb&&window.jsb.reflection&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","hideNativeAdvanceBigBanner","()V"),this.nativeAdvanceBigBannerTotal--,this.nativeAdvanceBigBannerTotal<=0&&(this.nativeAdvanceBigBannerTotal=0)},e.prototype.showInsertBannerImg=function(t,e){if(void 0===e&&(e=!1),this.nativeInsertBannerImgTotal>0)return t&&t(0);this.nativeInsertBannerImgTotal++,console.log("[platform] [AndroidPlatform] showInsertBannerImg"),window.jsb&&window.jsb.reflection&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showInsertBannerImg","(Z)V",e),this.nativeInsertBannerImgCallBack=t},e.prototype.hideInsertBannerImg=function(){console.log("[platform] [AndroidPlatform] hideInsertBannerImg"),window.jsb&&window.jsb.reflection&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","hideInsertBannerImg","()V"),this.nativeInsertBannerImgTotal--,this.nativeInsertBannerImgTotal<=0&&(this.nativeInsertBannerImgTotal=0)},e.prototype.showInsert=function(){console.log("[platform] [AndroidPlatform] showInsert"),cc.game.emit("insetVideoAsk"),window.iOSSendMsg=this.insertCallBack,window.jsb&&window.jsb.reflection&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","showInsertBanner","(Ljava/lang/String;)V",this._config.insertID)},e.prototype.vibrate=function(t){void 0===t&&(t=30),window.jsb&&window.jsb.reflection&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","vibrate","(I)V",t)},e.prototype.showPrivacyPolicy=function(){console.log("[platform] [AndroidPlatform] showPrivacyPolicy"),window.jsb&&window.jsb.reflection&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","lookPrivacyPolicy","()V")},e.prototype.bindEvents=function(){var t=this;window.bannerShow=function(){console.log("[platform] [AndroidPlatform] bannerShow")},window.bannerShow_err=function(){console.log("[platform] [AndroidPlatform] bannerShow_err")},window.clickBanner=function(){console.log("[platform] [AndroidPlatform] clickBanner")},window.videoUnfinish=function(){console.log("[platform] [AndroidPlatform] videoUnfinish"),setTimeout(function(){t._rewardAdsCb&&t._rewardAdsCb(1),t._rewardAdsCb=null},200)},window.videoFinish=function(){console.log("[platform] [AndroidPlatform] videoFinish"),setTimeout(function(){t._rewardAdsCb&&t._rewardAdsCb(0),t._rewardAdsCb=null,window.AdjustEventSys.todayRewardTimes()},200)},window.videoError=function(){console.log("[platform] [AndroidPlatform] videoError"),cc.game.emit("adNotReady"),setTimeout(function(){t._rewardAdsCb&&t._rewardAdsCb(-1),t._rewardAdsCb=null},200)},window.insetVideoSuccess=function(){console.log("[platform] [AndroidPlatform] insetVideoSuccess")},window.rewardVideoSuccess=function(){console.log("[platform] [AndroidPlatform] rewardVideoSuccess")};var e={onRequestPermissionsSuccess:function(){console.log("[platform] [AndroidPlatform] \u6743\u9650\u83b7\u53d6\u6210\u529f")},onRequestPermissionsFail:function(){console.log("[platform] [AndroidPlatform] \u6743\u9650\u83b7\u53d6\u5931\u8d25")},onRequestFailAndNeverAsk:function(){console.log("[platform] [AndroidPlatform] \u6743\u9650\u83b7\u53d6\u5931\u8d25\u4e14\u7528\u6237\u70b9\u9009\u4e0d\u518d\u8be2\u95ee")},onPrivacyAccept:function(){console.log("[platform] [AndroidPlatform] \u540c\u610f\u9690\u79c1\u534f\u8bae")},onPrivacyReject:function(){console.log("[platform] [AndroidPlatform] \u62d2\u7edd\u9690\u79c1\u534f\u8bae")},onRewardVideoShow:function(){console.log("[platform] [AndroidPlatform] \u6fc0\u52b1\u89c6\u9891\u5c55\u793a"),cc.audioEngine.pauseAll(),window.rewardVideoSuccess(),t._isGetReward=!1},onRewardVideoComplete:function(){console.log("[platform] [AndroidPlatform] \u6fc0\u52b1\u89c6\u9891\u64ad\u653e\u5b8c\u6210"),t._isGetReward=!0},onRewardVideoClose:function(){console.log("[platform] [AndroidPlatform] \u6fc0\u52b1\u89c6\u9891\u5173\u95ed \u662f\u5426\u53d1\u653e\u5956\u52b1:",t._isGetReward),cc.audioEngine.resumeAll(),t._isGetReward?setTimeout(function(){window.videoFinish()},200):window.videoUnfinish(),t._isGetReward=!1},onRewardVideoFail:function(){console.log("[platform] [AndroidPlatform] \u6fc0\u52b1\u89c6\u9891\u64ad\u653e\u5931\u8d25"),window.videoError(),t._isGetReward=!1},onInterstitialShow:function(){console.log("[platform] [AndroidPlatform] \u63d2\u5c4f\u5c55\u793a"),window.insetVideoSuccess(),cc.audioEngine.pauseAll()},onInterstitialClose:function(){console.log("[platform] [AndroidPlatform] \u63d2\u5c4f\u8df3\u8fc7"),cc.audioEngine.resumeAll()},onFeedRenderSuccess:function(){console.log("[platform] [AndroidPlatform] \u4fe1\u606f\u6d41\u6e32\u67d3\u6210\u529f")},onFeedRenderFail:function(){console.log("[platform] [AndroidPlatform] \u4fe1\u606f\u6d41\u6e32\u67d3\u5931\u8d25")},onSplashShow:function(){console.log("[platform] [AndroidPlatform] onSplashShow")},onSplashClose:function(){console.log("[platform] [AndroidPlatform] onSplashClose")},onUnionSdkInitSuccess:function(){console.log("[platform] [AndroidPlatform] \u805a\u5408sdk\u521d\u59cb\u5316\u6210\u529f")},onNativeAdvanceBigBannerShow:function(){console.log("[platform] [AndroidPlatform] \u539f\u751f\u5927\u56fe\u6210\u529f\u5c55\u793a"),t.nativeAdvanceBigBannerCallBack&&t.nativeAdvanceBigBannerCallBack(),t.nativeAdvanceBigBannerCallBack=null},onInsertBannerImgClose:function(){console.log("[platform] [AndroidPlatform] \u63d2\u5c4f\u56fe\u7247\u5173\u95ed\u5c55\u793a"),t.nativeInsertBannerImgCallBack&&t.nativeInsertBannerImgCallBack(0),t.nativeInsertBannerImgCallBack=null,t.nativeInsertBannerImgTotal--,t.nativeInsertBannerImgTotal<=0&&(t.nativeInsertBannerImgTotal=0)},onBannerShow:function(){},onBannerRemoved:function(){console.log("onBannerRemoved"),cc.game.emit("onBannerRemoved")}};window.unionSdkCallback=e,this.insertCallBack=function(t){"adCompleted"==t?console.log("[AndroidAdCtrler][insertCallBack][adCompleted]"):"adSkipped"==t?(console.log("[AndroidAdCtrler][insertCallBack][adSkipped]"),cc.game.emit("adSkipped"),console.log("\u4e2d\u9014\u64ad\u653e")):"adsVideoFail"==t?(console.log("[AndroidAdCtrler][insertCallBack][adsVideoFail]"),cc.game.emit("adsVideoFail"),window.iOSSendMsg=function(){}):"insetVideoSuccess"==t&&(cc.game.emit("insetVideoSuccess"),console.log("[AndroidAdCtrler][insertCallBack][insetVideoSuccess]"))},this.rewardCallBack=function(e){"adCompleted"==e?(console.log("[AndroidAdCtrler][rewardCallBack][videoFinish] \u770b\u5b8c\u5e7f\u544a"),window.iOSSendMsg=function(){},t._rewardAdsCb&&t._rewardAdsCb(0),t._rewardAdsCb=null,cc.audioEngine.resumeAll()):"adSkipped"==e?(console.log("[AndroidAdCtrler][rewardCallBack][videoUnfinish] \u4e2d\u9014\u5e7f\u544a"),cc.audioEngine.resumeAll(),window.iOSSendMsg=function(){},t._rewardAdsCb&&t._rewardAdsCb(1),t._rewardAdsCb=null):"adsVideoFail"==e?(console.log("[AndroidAdCtrler][rewardCallBack][adsVideoFail]"),window.iOSSendMsg=function(){},t._rewardAdsCb&&t._rewardAdsCb(1),t._rewardAdsCb=null,cc.audioEngine.resumeAll()):"rewardVideoSuccess"==e&&(console.log("[AndroidAdCtrler][rewardCallBack][rewardVideoSuccess]"),cc.audioEngine.pauseAll())},window.androidSignInClose=function(){setTimeout(function(){cc.game.emit("androidSignInClose")},0)},window.androidSignInSuc=function(){setTimeout(function(){cc.game.emit("androidSignInSuc")},0)},window.insetVideoSkip=function(){cc.game.emit("interad_close")},window.insetVideoClose=function(){cc.game.emit("interad_close")},window.adNotReady=function(){cc.game.emit("adNotReady")},window.shareSuc=function(){cc.game.emit("shareSuc_")},window.shareFail=function(){cc.game.emit("shareFail_")};var o=[];r.Config.get("config/Purchase").then(function(t){for(var e=0;e<t.length;e++){var i=t[e];o.push(i.goodsID)}o.forEach(function(t){window[t+"_suc"]=function(e){void 0===e&&(e=1),cc.game.emit(t+"_suc",e)},window[t+"_fail"]=function(){cc.game.emit(t+"_fail")}})})},e.prototype.report=function(t,e){"number"==typeof e&&(e=e.toString()),this.javaCall("sendMsg","(Ljava/lang/String;Ljava/lang/String;)V",t,e)},e.prototype.adjustEvent=function(t){this.javaCall("adjustEvent","(Ljava/lang/String;)V",t)},e.prototype.javaCall=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.apply(void 0,__spreadArrays([this.defaultClass],t))},e.prototype.showMoreGame=function(){this.javaCall("jumpLeisureSubject","()V")},e.prototype.signIn=function(){console.log("\u8c03\u7528\u767b\u5f55"),this.javaCall("signIn","()V")},e.prototype.gameComment=function(){this.javaCall("onCommentBtn","()V")},e.prototype.purchase=function(t){this.javaCall("purchase","(Ljava/lang/String;)V",t)},e.prototype.subscribe=function(t){this.javaCall("subscribe","(Ljava/lang/String;)V",t)},e.prototype.share=function(){this.javaCall("share","()V")},e}(n.BasePlatform);o.Android=a,cc._RF.pop()},{"./BasePlatform":"BasePlatform","./ConfigManager":"ConfigManager"}],Api:[function(t,e,o){"use strict";cc._RF.push(e,"9c193marbdExb2qZAnPEXpF","Api"),o.serverTime=o.getOpenid=o.report=o.click=void 0;var i=t("./Request"),n=t("./config"),r=t("./md5");o.click=function(t,e,o,r){void 0===e&&(e=function(){}),void 0===o&&(o=function(){}),void 0===r&&(r=function(){}),i.default.post({url:n.DOMAIN+"/common/app-track/click",data:t,dataType:"json",success:e,fail:o,complete:r})},o.report=function(t,e,o,a){void 0===e&&(e=function(){}),void 0===o&&(o=function(){}),void 0===a&&(a=function(){}),i.default.post({url:n.DOMAIN+"/common/user-op/op-merge-report?trace_id="+r.md5((Math.round(Date.now()/1e3)+1e3*Math.random()).toString()),data:t,dataType:"json",success:e,fail:o,complete:a})},o.getOpenid=function(t,e,o,r){void 0===e&&(e=function(){}),void 0===o&&(o=function(){}),void 0===r&&(r=function(){}),i.default.post({url:n.DOMAIN+"/common/tt/session/sign_in",data:t,dataType:"json",success:e,fail:o,complete:r})},o.serverTime=function(t,e,o){void 0===t&&(t=function(){}),void 0===e&&(e=function(){}),void 0===o&&(o=function(){}),i.default.get({url:n.DOMAIN+"/common/common/time",dataType:"json",success:t,fail:e,complete:o})},cc._RF.pop()},{"./Request":"Request","./config":"config","./md5":"md5"}],App:[function(t,e,o){"use strict";cc._RF.push(e,"5952891SnBNaZF4y1ZkrNHW","App");var i=t("./HttpUtils"),n=t("./ConfigConst"),r=t("./EventConst"),a=t("./PlatformConst"),s=t("./UserConst"),c=t("./LocalStorageConst"),l=t("./TimeManager"),h=t("./AudioManager"),d=t("./BmsManager"),u=t("./ConfigManager"),p=t("./EventManager"),f=t("./LanguageManager"),g=(f=t("./LanguageManager"),t("./PlatformManager")),m=t("./ReportManager"),v=t("./TipManager"),y=t("./UserManager"),_=t("./ChallengeSystem"),C=t("./PaymentSystem"),b=t("./VIPSystem"),S=t("./ChallengeHttp"),w=t("./CopyRightDialog"),A=t("./OPPOAndroidAdUtils"),k=t("./XMADUtils"),P=t("./LocalStorageManager"),T=t("./SceneManager"),B=t("./SceneConst"),M=(t("./Utils"),{zh:0,en:0,ja:1,tw:2}),I=cc._decorator,R=I.ccclass,L=I.property,D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadingPrefab=null,e.plantAtlas=null,e.fonts=[],e.fullAdCounter=0,e.internalDefaultBMS={isAuditing:0,isAuditingLevelMap:1,configSuffix:"",TiLi:60,WuxianTiLi:1,BuchongTiLi:20,fullAdsType:0,fullScreenAd:"no",AdIntervals:0,bannerAdIntervals:0,startWinFullScreenAd:3,spaceWinFullScreenAd:3,spaceWinFullScreenAdND:3,startLevelWinFullScreenAds:11,spaceLevelWinFullScreenAd:3,GM:0,ugc:0,ugcad:0,newmodead:1,evaluatelv:[1200,2500,5e3],evaluatebtndelay:2,evaluatestar:5,keyVideo:7,AllThemeUnlock:0,UnlockThemeMainLv:[10,10],UnlockThemeSubLv:[5,10],UnlockThemeList:[1,6,7,4,3,2,5]},e.externalDefaultBMS={isAuditing:0,isAuditingLevelMap:1,configSuffix:"",TiLi:0,WuxianTiLi:0,BuchongTiLi:20,fullAdsType:0,fullScreenAd:"all",AdIntervals:0,bannerAdIntervals:0,startWinFullScreenAd:3,spaceWinFullScreenAd:1,spaceWinFullScreenAdND:1,startLevelWinFullScreenAds:11,spaceLevelWinFullScreenAd:1,GM:0,ugc:0,ugcad:0,newmodead:1,evaluatelv:[1200,2500,5e3],evaluatebtndelay:2,evaluatestar:5,keyVideo:7,AllThemeUnlock:0,UnlockThemeMainLv:[10,10],UnlockThemeSubLv:[5,10],UnlockThemeList:[1,6,7,4,3,2,5]},e.isEnterMain=!1,e.abBunds={},e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.initMgr(),this.initEvent(),(new w.default).init(),this.schedule(function(){t.fullAdCounter++},1),this.loadLevelSub()},e.prototype.loadLevelSub=function(){this.scheduleOnce(function(){if(cc.sys.isBrowser)return console.log("\u6d4f\u89c8\u5668\u73af\u5883"),void(window.levelSub=!0);console.log("\u52a0\u8f7d\u5173\u5361\u5b50\u5305......"),cc.assetManager.loadBundle("script",function(t){if(t)return console.log("[ResMgr]:Load AssetsBundle Error: script");console.log("\u52a0\u8f7d\u5b8c\u6210","script"),window.levelSub=!0})},0)},e.prototype.startOppo=function(){cc.game.on("onBannerRemoved",this.onBannerRemoved,this)},e.prototype.cardAmount=function(t){console.log("\u4fdd\u5b58\u670d\u52a1\u5668[cardAmount]",t),this.saveServerData(c.default.cardAmount,t)},e.prototype.saveServerData=function(t,e){e=e.toString(),d.BMS.saveServerData(g.Platform.getConfig().flag,y.User.get("googleID")||y.User.get("uuid"),t,e).then(function(){console.log("\u4fdd\u5b58"+t+"\u6210\u529f:"+e)})},e.prototype.onBannerRemoved=function(){console.log("bannerAdCounter",0),g.Platform.bannerAdCounter=0},e.prototype.showInterstitialFeedTimer=function(){var t=this,e=d.BMS.getKey("timeTC");this.scheduleOnce(function(){console.log("\u957f\u65f6\u95f4\u6ca1\u64cd\u4f5c,\u81ea\u52a8\u5f39\u51fa\u63d2\u5c4f"),A.OPPOAndroidAd.showInterstitialFeed(),t.showInterstitialFeedTimer2()},e)},e.prototype.showInterstitialFeedTimer2=function(){var t=this;this.scheduleOnce(function(){A.OPPOAndroidAd.removeInterstitialFeed()},30),this.scheduleOnce(function(){A.OPPOAndroidAd.showInterstitialFeed(),t.showInterstitialFeedTimer2()},31)},e.prototype.initMgr=function(){g.Platform.startInit();var t=f.default.instance;t.init(),t.setFont(this.fonts[M[t.lan]]),T.default.init(this.loadingPrefab),h.Audio.init(),m.Report.init(),this.initStopDebug(),P.default.init({backTimes:0,isReceiveVIP:0,todayClickShip:0,todayShipExpire:0,shipStartTime:0,openShip:0,todayClickPlan:0,todayClickChallenge:0,todayReceiveCard:0,todaySignIn:0,todayOpenSignIn:0,todaySignInVideo:0}),this.initBMS()},e.prototype.initStopDebug=function(){cc.sys.isMobile&&cc.view.enableAutoFullScreen(!1)},e.prototype.initEvent=function(){cc.game.on("adNotReady",this.adNotReady,this),cc.game.on("iosApplicationDidBecomeActive",this.iosApplicationDidBecomeActive,this),cc.game.on("onForeground",this.onForeground,this),cc.game.on("localStorage_cardAmount",this.cardAmount,this),cc.game.on("checkFullAd_noResult",this.checkFullAd_noResult,this),cc.game.on("showNoAD",this.showNoAD,this),p.Event.on(r.default.checkFullAd,this.checkFullAd,this),p.Event.on(r.default.checkFullAd_result,this.checkFullAd_result,this)},e.prototype.checkFullAd=function(){var t=(new Date).getTime();if(window.lastVideoAdTime&&(t-window.lastVideoAdTime)/1e3<60)console.log("== \u63d2\u5c4f\u68c0\u6d4b\uff0c\u89c6\u9891\u5e7f\u544a\u95f4\u9694\u5c0f\u4e8e60\u79d2\uff0c\u4e0d\u5c55\u793a\u63d2\u5c4f");else{window.isResultInsert=!1;var e=d.BMS.getKey("AdIntervals");if(console.log("== \u63d2\u5c4f\u68c0\u6d4b cd\u95f4\u9694\u4e0d\u5c55\u793a\u63d2\u5c4f\uff0ccd\u8ba1\u65f6: "+this.fullAdCounter+"\uff0ccd\u95f4\u9694"+e),this.fullAdCounter<e)return console.log("== \u63d2\u5c4fcd\u4e2d\uff0c\u65e0\u6cd5\u89e6\u53d1");"no"!=d.BMS.getKey("fullScreenAd")&&(g.Platform.showInsert(),this.fullAdCounter=0)}},e.prototype.showNoAD=function(){window.hideIsNeedInsert=!0},e.prototype.checkFullAd_noResult=function(t){var e=(new Date).getTime();if(window.lastVideoAdTime&&(e-window.lastVideoAdTime)/1e3<60)console.log("== \u63d2\u5c4f\u68c0\u6d4b\uff0c\u89c6\u9891\u5e7f\u544a\u95f4\u9694\u5c0f\u4e8e60\u79d2\uff0c\u4e0d\u5c55\u793a\u63d2\u5c4f");else{window.isResultInsert=!1;var o=d.BMS.getKey("AdIntervals");if(console.log("== \u63d2\u5c4f\u68c0\u6d4b cd\u95f4\u9694\u4e0d\u5c55\u793a\u63d2\u5c4f\uff0ccd\u8ba1\u65f6: "+this.fullAdCounter+"\uff0ccd\u95f4\u9694"+o),this.fullAdCounter<o)return console.log("== \u63d2\u5c4fcd\u4e2d\uff0c\u65e0\u6cd5\u89e6\u53d1");if("no"!=d.BMS.getKey("fullScreenAd")){var i=d.BMS.getKey("ReplayStartScreenAd");(0==i||t>=i)&&(console.log("== \u63d2\u5c4fcheckFullAd_noResult"),g.Platform.showInsert(),this.fullAdCounter=0)}}},e.prototype.checkFullAd_result=function(){var t=this,e=(new Date).getTime();if(window.lastVideoAdTime&&(e-window.lastVideoAdTime)/1e3<60)console.log("== \u63d2\u5c4f\u68c0\u6d4b\uff0c\u89c6\u9891\u5e7f\u544a\u95f4\u9694\u5c0f\u4e8e60\u79d2\uff0c\u4e0d\u5c55\u793a\u63d2\u5c4f");else{var o=d.BMS.getKey("AdIntervals");if(console.log("== \u63d2\u5c4f\u68c0\u6d4b cd\u95f4\u9694\u4e0d\u5c55\u793a\u63d2\u5c4f\uff0ccd\u8ba1\u65f6: "+this.fullAdCounter+"\uff0ccd\u95f4\u9694"+o),this.fullAdCounter<o)return console.log("== \u63d2\u5c4fcd\u4e2d\uff0c\u65e0\u6cd5\u89e6\u53d1");var i=y.User.getTempData(s.TempData.CURRENT_LEVEL),n=d.BMS.getKey("startWinFullScreenAd"),r=d.BMS.getKey("fullScreenAd"),a=d.BMS.checkKey("fullScreenAd"),c=d.BMS.getKey("startLevelWinFullScreenAds"),l=d.BMS.getKey("spaceLevelWinFullScreenAd"),h=d.BMS.getKey("spaceWinFullScreenAd"),u=d.BMS.getKey("spaceWinFullScreenAdND");if(i>=n&&("number"==typeof r&&r||"string"==typeof r&&a)){var p=(new Date).getDate(),f=y.User.get(s.UserData.FIRST_DAY_DATE);i>=c?i%l==0&&(console.log("\u63d2\u5c4f1"),setTimeout(function(){window.isResultInsert=!0,g.Platform.showInsert(),t.fullAdCounter=0},500)):Math.abs(p-f)>0?i%u==0&&(console.log("\u63d2\u5c4f2"),setTimeout(function(){window.isResultInsert=!0,g.Platform.showInsert(),t.fullAdCounter=0},500)):i%h==0&&(console.log("\u63d2\u5c4f3"),setTimeout(function(){window.isResultInsert=!0,g.Platform.showInsert(),t.fullAdCounter=0},500))}}},e.prototype.onForeground=function(){k.XMAD.onForeground()},e.prototype.iosApplicationDidBecomeActive=function(){var t=d.BMS.getKey("splash");if(t){var e=y.User.get(s.UserData.loginDaysTimes);console.log("\u767b\u9646\u5929\u6570",e,"splash",t),e>=t&&(console.log("\u6253\u5f00\u5f00\u5c4f"),g.Platform.showOpenAd())}},e.prototype.adNotReady=function(){v.Tip.show(f.default.formatStr("\u6682\u65e0\u5e7f\u544a"))},e.prototype.initBMS=function(){var t=this,e=g.Platform.getConfig().version,o=cc.sys,i=o.platform;i!=o.IPHONE&&i!=o.IPAD||(e=jsb.reflection.callStaticMethod("AppController","gainIOSBMSVersion"),console.log("\u83b7\u5f97\u7248\u672c\u53f7",e),window.haiwai?d.BMS.setDefaultData(this.externalDefaultBMS):d.BMS.setDefaultData(this.internalDefaultBMS)),"wlgczhwapk"==g.Platform.getConfig().flag?d.BMS.setDefaultData({isStore:[]}):d.BMS.setDefaultData({isStore:["US","GB","CA","DE","AU","JP","TW","FR","HK"]});var n=g.Platform.getConfig().flag,r=g.Platform.getConfig().version;-1==n.indexOf("oppo")&&r.indexOf("oppo"),-1==n.indexOf("ios")&&r.indexOf("ios"),this.scheduleOnce(function(){console.log("\u4e24\u79d2\u6ca1\u8df3\u8f6c\u76f4\u63a5\u8fdb\u5165"),t.sucEnterMain()},3)},e.prototype.updateSkin=function(){var t=y.User.get(s.UserData.skinList)||{0:[0],1:[0],2:[9],3:[0],4:[0],5:[0]};y.User.set(s.UserData.skinList,t);var e=y.User.get(s.UserData.useSkinIDList)||{0:0,1:0,2:9,3:0,4:0,5:0};y.User.set(s.UserData.useSkinIDList,e);var o=y.User.get(s.UserData.getLockSkinList)||{0:[],1:[],2:[],3:[],4:[],5:[]};y.User.set(s.UserData.getLockSkinList,o)},e.prototype.sucEnterMain=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,r,h,p,f,m,v,w,A,k,M,I,R=this;return __generator(this,function(L){switch(L.label){case 0:return this.isEnterMain?[2]:(this.isEnterMain=!0,game.plateAtlas=this.plantAtlas,t=y.User.get("uuid")||this.guid(),y.User.set("uuid",t),console.log("uuid",t),g.Platform.taInit(t),e=y.User.get(s.UserData.OpenNum)||1,o=y.User.get(s.UserData.PlayDays)||1,1==e?cc.game.emit("gamelog_Thinking","user_Login",{IsNew:!0,OpenNum:1,PlayDays:1}):(y.User.set(s.UserData.OpenNum,e+1),cc.game.emit("gamelog_Thinking","user_Login",{IsNew:!1,OpenNum:e+1,PlayDays:o})),this.updateSkin(),[4,i.default.getTime()]);case 1:return(r=L.sent())?[4,l.default.init(r.data.time)]:[3,3];case 2:L.sent(),L.label=3;case 3:return b.default.init(),C.default.init(),_.default.init(),P.default.get(c.default.CityListCompatible),h=P.default.get(c.default.CityList)||[],[4,u.Config.get(n.ConfigConst.City)];case 4:return p=L.sent(),(f=y.User.get("levelListLoopTimes")||{})[0]||(f[0]=0),(m=y.User.get(s.UserData.LEVEL_LIST)||{})[0]||(m[0]=1),[4,u.Config.get(n.ConfigConst.THEME+0+g.Platform.getConfig().configSuffix)];case 5:if(v=L.sent(),w=m[0]+f[0]*v.length,p.sort(function(t,e){return t.sort-e.sort}),console.log("diji",w),w&&w>2)for(A=0;A<w-2;A++)k=p[A].id,h.includes(k)||h.push(k);if(P.default.set(c.default.CityList,h),g.Platform.is(a.EPlatform.ANDROID_GOOGLE)&&d.BMS.getServerData(g.Platform.getConfig().flag,y.User.get("googleID")||t,s.UserData.boreTimes+","+s.UserData.tipTimes+","+s.UserData.screwBoxTimes+","+c.default.cardAmount).then(function(t){var e,o,i,n;console.log("getServerData",t),e=null==t[s.UserData.boreTimes]||Number(t[s.UserData.boreTimes])<=0?0:Number(t[s.UserData.boreTimes]),o=null==t[s.UserData.tipTimes]||Number(t[s.UserData.tipTimes])<=0?0:Number(t[s.UserData.tipTimes]),i=null==t[s.UserData.screwBoxTimes]||Number(t[s.UserData.screwBoxTimes])<=0?0:Number(t[s.UserData.screwBoxTimes]),y.User.set(s.UserData.boreTimes,e),y.User.set(s.UserData.tipTimes,o),y.User.set(s.UserData.screwBoxTimes,i),n=null==t[c.default.cardAmount]||Number(t[c.default.cardAmount])<=0?0:Number(t[c.default.cardAmount]),P.default.set(c.default.cardAmount,n)}),this.startOppo(),"haiwai"==g.Platform.getConfig().rank){if(I=y.User.get("nation"),M=d.BMS.getKey("isStore"),console.log("province",I),console.log("isStore",M),!I)return S.challengeHttp.getCountry(!0).then(function(t){console.log("\u56fd\u5bb6",t),y.User.set("nation",t),R.gotoGame(),"CN"==t&&(g.Platform.getConfig().hasShare=0),0==M.length?(console.log("\u5f53\u524d\u5730\u533a\u6709\u5185\u8d2d0",t),g.Platform.getConfig().hasPurchase=1,cc.game.emit("hasPurchase")):M.includes(t)?(console.log("\u5f53\u524d\u5730\u533a\u6709\u5185\u8d2d1",t),g.Platform.getConfig().hasPurchase=1,cc.game.emit("hasPurchase")):(console.log("\u5f53\u524d\u5730\u533a\u6ca1\u6709\u5185\u8d2d1",t),g.Platform.getConfig().hasPurchase=0)}),[2];0==M.length?(g.Platform.getConfig().hasPurchase=1,cc.game.emit("hasPurchase")):M.includes(I)?(console.log("\u5f53\u524d\u5730\u533a\u6709\u5185\u8d2d2",I),g.Platform.getConfig().hasPurchase=1):(console.log("\u5f53\u524d\u5730\u533a\u6ca1\u6709\u5185\u8d2d2",I),g.Platform.getConfig().hasPurchase=0),"CN"==I&&(g.Platform.getConfig().hasShare=0)}else if(!(I=y.User.get("province")))return S.challengeHttp.getCountry().then(function(t){console.log("\u7701\u4efd",t),y.User.set("province",t),y.User.setTempData(s.TempData.isFirst,!0),R.gotoGame()}),[2];return this.scheduleOnce(function(){console.log("\u8fdb\u5165"),T.default.loadScene(B.SceneConst.Home),g.Platform.is(a.EPlatform.ANDROID_GOOGLE)&&(g.Platform.showBanner(),R.schedule(function(){g.Platform.hideBanner(),R.scheduleOnce(function(){g.Platform.showBanner()},.1)},25))},g.Platform.getConfig().loadingDelay),[2]}})})},e.prototype.gotoGame=function(){y.User.setTempData(s.TempData.CURRENT_MODE,0),y.User.setTempData(s.TempData.CURRENT_LEVEL,1),T.default.loadScene(B.SceneConst.GAME)},e.prototype.judgeMainMode=function(t){var e,o=y.User.get(s.UserData.mode0LevelList_stage1ID)||[],i=y.User.get(s.UserData.mode0LevelList_stage2ID)||[],r=[],c=[];0==t&&u.Config.get(n.ConfigConst.THEME+0+g.Platform.getConfig().configSuffix).then(function(t){if(g.Platform.is(a.EPlatform.WEB)){for(var n=0;n<t.length;n++){var l=t[n];r.push(l.stage1ID),c.push(l.stage2ID)}y.User.set(s.UserData.mode0LevelList_stage1ID,r),y.User.set(s.UserData.mode0LevelList_stage2ID,c)}else if(t.length>o.length&&0!=o.length){for(n=0;n<t.length;n++)l=t[n],n>o.length-1&&(r.push(l.stage1ID),c.push(l.stage2ID));r.sort(function(){return.5-Math.random()}),c.sort(function(){return.5-Math.random()}),r=o.concat(r),c=i.concat(c),console.log("\u6709\u65b0\u589e\u5173\u5361"),y.User.set(s.UserData.mode0LevelList_stage1ID,r),y.User.set(s.UserData.mode0LevelList_stage2ID,c)}else if(0==o.length){var h=[],u=[],p=[],f=[],m=[],v=[],_=[],C=[];for(n=0;n<t.length;n++)l=t[n],0==n&&(e=l.stage1ID),n<5?(h.push(l.stage1ID),u.push(l.stage2ID)):n<10?(p.push(l.stage1ID),f.push(l.stage2ID)):n<50?(m.push(l.stage1ID),v.push(l.stage2ID)):(_.push(l.stage1ID),C.push(l.stage2ID));if(r=h.concat(p).concat(m).concat(_),c=u.concat(f).concat(v).concat(C),d.BMS.getKey("mainModeID"))r=p.concat(h).concat(m),c=f.concat(u).concat(v);else{var b=r.indexOf(e),S=r[0];r[0]=e,r[b]=S}console.log("\u6ca1\u6709\u65b0\u589e\u5173\u5361\u4e14\u662f\u65b0\u7528\u6237"),y.User.set(s.UserData.mode0LevelList_stage1ID,r),y.User.set(s.UserData.mode0LevelList_stage2ID,c)}})},e.prototype.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},e.prototype.loadAssetsBundle=function(t,e){var o=this;cc.assetManager.loadBundle(t,function(i,n){null!==i?(console.log("[ResMgr]:Load AssetsBundle Error: "+t),o.abBunds[t]=null):(console.log("[ResMgr]:Load AssetsBundle Success: "+t),o.abBunds[t]=n),e&&e()})},__decorate([L(cc.Prefab)],e.prototype,"loadingPrefab",void 0),__decorate([L(cc.SpriteAtlas)],e.prototype,"plantAtlas",void 0),__decorate([L([cc.TTFFont])],e.prototype,"fonts",void 0),__decorate([R],e)}(cc.Component);o.default=D,cc._RF.pop()},{"./AudioManager":"AudioManager","./BmsManager":"BmsManager","./ChallengeHttp":"ChallengeHttp","./ChallengeSystem":"ChallengeSystem","./ConfigConst":"ConfigConst","./ConfigManager":"ConfigManager","./CopyRightDialog":"CopyRightDialog","./EventConst":"EventConst","./EventManager":"EventManager","./HttpUtils":"HttpUtils","./LanguageManager":"LanguageManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./OPPOAndroidAdUtils":"OPPOAndroidAdUtils","./PaymentSystem":"PaymentSystem","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./ReportManager":"ReportManager","./SceneConst":"SceneConst","./SceneManager":"SceneManager","./TimeManager":"TimeManager","./TipManager":"TipManager","./UserConst":"UserConst","./UserManager":"UserManager","./Utils":"Utils","./VIPSystem":"VIPSystem","./XMADUtils":"XMADUtils"}],AssetConst:[function(t,e,o){"use strict";var i;cc._RF.push(e,"23ec67WJ8xIYZ0NJP403bzk","AssetConst"),o.AssetConst=void 0,(i=o.AssetConst||(o.AssetConst={})).Prefab="prefab",i.Audio="audio",i.Config="config",i.Texture="texture",cc._RF.pop()},{}],AssetManager:[function(t,e,o){"use strict";cc._RF.push(e,"cf531ZkQGNLg5ZSaolqWple","AssetManager");var i=new(function(){function t(){}return t.prototype.getRes=function(t,e,o){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){switch(n.label){case 0:return[4,this.loadBundle(t)];case 1:return(i=n.sent())?[4,this.load(i,e,o)]:[2];case 2:return[2,n.sent()]}})})},t.prototype.getScene=function(t,e){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadBundle(t)];case 1:return(o=i.sent())?[4,this.loadScene(o,e)]:[2];case 2:return[2,i.sent()]}})})},t.prototype.releaseAsset=function(t){cc.assetManager.releaseAsset(t)},t.prototype.releaseAll=function(t){var e=cc.assetManager.getBundle(t);e&&(e.releaseAll(),cc.assetManager.removeBundle(e))},t.prototype.loadBundle=function(t){return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(e,o){var i=cc.assetManager.getBundle(t);if(i)return e(i);cc.assetManager.loadBundle(t,function(t,i){if(t)return cc.error(t),o(null);e(i)})})]})})},t.prototype.load=function(t,e,o){return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(i,n){var r=t.get(e);if(r)return i(r);t.load(""+e,o,function(t,e){if(t)return cc.error(t),n(t);i(e)})})]})})},t.prototype.loadScene=function(t,e){return new Promise(function(o,i){t.loadScene(e,function(t,e){if(t)return cc.error(t),i(null);o(e)})})},t}());o.default=i,cc._RF.pop()},{}],AudioConst:[function(t,e,o){"use strict";var i;cc._RF.push(e,"17e98iahj5KEZASiyBT+WGN","AudioConst"),o.AudioConst=void 0,(i=o.AudioConst||(o.AudioConst={})).CLICK="audio/click",i.BGM_MAIN="audio/bgmMain",i.BGM_GAME="audio/bgmGame",i.DOWN="audio/down",i.timeEnd="audio/timeEnd",i.woodCollision="audio/woodCollision",i.woodRemove="audio/woodRemove",i.star="audio/star",i.pull="audio/pull",i.getProp="audio/getProp",i.difficulty="audio/difficulty",i.win="audio/win",i.lose="audio/lose",i.getCoin="audio/getCoin",i.coinClick="audio/coinClick",cc._RF.pop()},{}],AudioManager:[function(t,e,o){"use strict";cc._RF.push(e,"c843dkp+89EnK8NseHJe9h5","AudioManager"),o.Audio=void 0;var i=t("./AudioConst"),n=function(){function t(){this.node=null,this.musicMute=0,this.effectMute=0,this.zhenDongMute=0,this.effectVolume=1,this.musicVolume=1,this.musicAs=null,this.effectAs=[],this.curAs=0,this.pathPrefix="audio/",this.currentBgm=null}return t.prototype.readLocalAudio=function(){var t=cc.sys.localStorage.getItem("musicMute");t=t?parseInt(t):0,this.musicMute=t;var e=cc.sys.localStorage.getItem("effectMute");e=e?parseInt(e):0,this.effectMute=e;var o=cc.sys.localStorage.getItem("zhenDongMute");o=o?parseInt(o):0,this.zhenDongMute=o,cc.sys.localStorage.setItem("musicMute",this.musicMute),cc.sys.localStorage.setItem("effectMute",this.effectMute),cc.sys.localStorage.setItem("zhenDongMute",this.zhenDongMute),window.musicMute=this.musicMute,window.effectMute=this.effectMute,window.zhenDongMute=this.zhenDongMute},t.prototype.init=function(){this.readLocalAudio(),this.node=cc.find("Canvas"),this.musicAs=this.node.addComponent(cc.AudioSource),this.musicAs.volume=this.musicVolume,1===this.musicMute&&(this.musicAs.volume=0);for(var t=0;t<8;t++){var e=this.node.addComponent(cc.AudioSource);this.effectAs.push(e),e.volume=this.effectVolume,1===this.effectMute&&(e.volume=0)}this.curAs=0,cc.game.on("playClickAudio",this.playClickAudio,this),cc.game.on("set_music_mute",this.setMusicMute,this),cc.game.on("set_effect_mute",this.setEffectMute,this),cc.game.on("set_zhendong_mute",this.setZhenDongMute,this)},t.prototype.playClickAudio=function(){this.playEffect(i.AudioConst.CLICK)},t.prototype.getMusicVolume=function(){return this.musicVolume},t.prototype.setMusicVolume=function(t){this.musicVolume=t,this.musicAs.volume=t,cc.sys.localStorage.setItem("musicVolume",t)},t.prototype.getMusicMute=function(){return this.musicMute},t.prototype.setMusicMute=function(t){var e;e=t?1:0,this.musicMute!=e&&(this.musicMute=e,1===this.musicMute?this.musicAs.volume=0:this.musicAs.volume=this.musicVolume,cc.sys.localStorage.setItem("musicMute",e),window.musicMute=this.musicMute)},t.prototype.getEffectVolume=function(){return this.effectVolume},t.prototype.setEffectVolume=function(t){for(var e=0;e<this.effectAs.length;e++)this.effectAs[e].volume=t;this.effectVolume=t,cc.sys.localStorage.setItem("effectVolume",t)},t.prototype.getEffectMute=function(){return this.effectMute},t.prototype.setEffectMute=function(t){var e;if(e=t?1:0,this.effectMute!=e){this.effectMute=e;for(var o=0;o<this.effectAs.length;o++)1===this.effectMute?this.effectAs[o].volume=0:this.effectAs[o].volume=this.effectVolume;cc.sys.localStorage.setItem("effectMute",e),window.effectMute=this.effectMute}},t.prototype.getZhenDongMute=function(){return this.zhenDongMute},t.prototype.setZhenDongMute=function(t){var e;e=t?1:0,this.zhenDongMute!=e&&(this.zhenDongMute=e,cc.sys.localStorage.setItem("zhenDongMute",e),window.zhenDongMute=this.zhenDongMute)},t.prototype.playMusic=function(t,e){return void 0===t&&(t="bgm"),void 0===e&&(e=!0),__awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(i){switch(i.label){case 0:return this.stopMusic(),this.currentBgm=t,e=!!e,this.musicAs.loop=e,o=this.musicAs,[4,this.load(t)];case 1:return o.clip=i.sent(),this.musicAs.clip?this.musicAs.play():cc.error("music audio clip null: ",t),[2]}})})},t.prototype.load=function(t){return new Promise(function(e,o){cc.resources.load(t,function(t,i){return t?(cc.error(t),o()):e(i)})})},t.prototype.stopMusic=function(){this.musicAs.stop()},t.prototype.playEffect=function(t){return __awaiter(this,void 0,void 0,function(){var e,o;return __generator(this,function(n){switch(n.label){case 0:return e=this.effectAs[this.curAs],this.curAs++,this.curAs>=8&&(this.curAs=0),o=e,[4,this.load(t)];case 1:return o.clip=n.sent(),e.clip?i.AudioConst.DOWN==t?setTimeout(function(){e.play()},300):e.play():cc.error("effect audio clip null: ",t),[2]}})})},t}();o.Audio=new n,cc._RF.pop()},{"./AudioConst":"AudioConst"}],AudioSwitch:[function(t,e,o){"use strict";cc._RF.push(e,"82609iuVnlJgrfh978tkuTD","AudioSwitch");var i=t("./AudioManager"),n=cc._decorator,r=n.ccclass,a=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=0,e}return __extends(e,t),e.prototype.onLoad=function(){0===this.type?(this.musicMute=i.Audio.getMusicMute(),this.musicMute?(console.log("\u9759\u97f3"),this.node.getChildByName("off").active=!0,this.node.getChildByName("on").active=!1):(console.log("\u6709\u97f3"),this.node.getChildByName("off").active=!1,this.node.getChildByName("on").active=!0)):1===this.type?(this.effectMute=i.Audio.getEffectMute(),this.effectMute?(this.node.getChildByName("off").active=!0,this.node.getChildByName("on").active=!1):(this.node.getChildByName("off").active=!1,this.node.getChildByName("on").active=!0)):(this.zhendongMute=i.Audio.getZhenDongMute(),this.zhendongMute?(this.node.getChildByName("off").active=!0,this.node.getChildByName("on").active=!1):(this.node.getChildByName("off").active=!1,this.node.getChildByName("on").active=!0))},e.prototype.switchHandle=function(){var t;0===this.type?(t=i.Audio.getMusicMute()?0:1,console.log("\u6d4b\u8bd5",this.musicMute,t),cc.game.emit("set_music_mute",t)):1===this.type?(console.log("this.effectMute",this.effectMute),t=i.Audio.getEffectMute()?0:1,cc.game.emit("set_effect_mute",t)):(console.log("this.effectMute",this.zhendongMute),t=i.Audio.getZhenDongMute()?0:1,cc.game.emit("set_zhendong_mute",t)),0==this.type&&console.log("b_mute",this.type,t),t?(this.node.getChildByName("off").active=!0,this.node.getChildByName("on").active=!1):(this.node.getChildByName("off").active=!1,this.node.getChildByName("on").active=!0)},__decorate([a],e.prototype,"type",void 0),__decorate([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./AudioManager":"AudioManager"}],BasePlatform:[function(t,e,o){"use strict";cc._RF.push(e,"e11e6AeupRLB6UmCWyKBjp9","BasePlatform"),o.BasePlatform=void 0;var i=function(){function t(){}return t.prototype.setConfig=function(t){this._config=t},t.prototype.showRewardAds=function(t){return console.log("web\u89c6\u9891\u6210\u529f"),window.AdjustEventSys&&window.AdjustEventSys.todayRewardTimes(),t(0)},t.prototype.showAdDebugger=function(){},t.prototype.login=function(){return new Promise(function(t){t(null)})},t.prototype.vibrate=function(t){void 0===t&&(t=30)},t.prototype.signIn=function(){},t.prototype.getNetworkType=function(t){t({networkType:"none"})},t.prototype.shareRecordCap=function(t){return t(0)},t.prototype.startRecordCap=function(){console.log("startRecordCap")},t.prototype.stopRecordCap=function(){console.log("stopRecordCap")},t.prototype.pauseRecord=function(){console.log("pauseRecord")},t.prototype.resumeRecord=function(){console.log("resumeRecord")},t.prototype.showBanner=function(t){void 0===t&&(t={id:""})},t.prototype.hideBanner=function(){},t.prototype.hideBanner_2=function(){},t.prototype.clickAdJump=function(){},t.prototype.share=function(t){cc.game.emit("shareSuc_"),t&&t(0),cc.game.emit("shareSuc")},t.prototype.showInsert=function(){},t.prototype.destroyInsert=function(){},t.prototype.showOpenAd=function(){},t.prototype.gainIOSBMSVersion=function(){},t.prototype.showInsertImg=function(){},t.prototype.showNativeAdvanceBigBanner=function(t,e){void 0===e&&(e=!1)},t.prototype.showSplashAd=function(){},t.prototype.showNativeAdvanceBannerType=function(){},t.prototype.hideNativeAdvanceBigBanner=function(){},t.prototype.saveNativeAdPosId=function(){},t.prototype.getWxScene=function(){return 0},t.prototype.showBlockAds=function(){},t.prototype.hideBlockAds=function(){},t.prototype.gameLog=function(){},t.prototype.gameTimePageLog=function(){},t.prototype.gameLevelLog=function(){},t.prototype.showPrivacyPolicy=function(){},t.prototype.report=function(){},t.prototype.adjustEvent=function(){},t.prototype.showMoreGame=function(){},t.prototype.showBannerFeed=function(){},t.prototype.showBannerFeed2=function(){},t.prototype.showSplash=function(){},t.prototype.removeBannerFeed=function(){},t.prototype.gameComment=function(){console.log("\u8df3\u8f6c\u5230\u8bc4\u5206")},t.prototype.purchase=function(){console.log("\u975e\u8ba2\u9605\u5185\u8d2d\u8c03\u8d77\u65b9\u6cd5")},t.prototype.subscribe=function(){console.log("\u8ba2\u9605\u8c03\u8d77\u65b9\u6cd5")},t.prototype.showInterstitialFeed=function(t,e,o,i){void 0===t&&(t=""),void 0===e&&(e=3),void 0===o&&(o=0),void 0===i&&(i=0)},t.prototype.removeLargePicFeed=function(){},t.prototype.removeInterstitialFeed=function(){},t.prototype.showLargeFeed=function(t,e){void 0===e&&(e=0)},t.prototype.getShareStatus=function(){return null},t.prototype.showNativeAds=function(){},t.prototype.hideNativeAds=function(){},t.prototype.showAppBoxAds=function(){},t.prototype.hideAppBoxAds=function(){},t.prototype.changeBlockAdsPos=function(){},t.prototype.showInsertBannerImg=function(t,e){void 0===e&&(e=!1)},t.prototype.hideInsertBannerImg=function(){},t.prototype.hideCustomAd1=function(){},t.prototype.hideCustomAd2=function(){},t.prototype.showCustomAd1=function(){},t.prototype.showCustomAd2=function(){},t.prototype.showCustomAd=function(){},t.prototype.hideCustomAd=function(){},t.prototype.showCustomAd_1=function(){},t.prototype.showCustomAd_2=function(){},t.prototype.hideCustomAd_1=function(){},t.prototype.hideCustomAd_2=function(){},t.prototype.taInit=function(){},t.prototype.follow=function(t){t(0)},t.prototype.sendRankData=function(){},t.prototype.showRankList=function(){},t}();o.BasePlatform=i,cc._RF.pop()},{}],BaseUICtrl:[function(t,e,o){"use strict";var i;cc._RF.push(e,"1263bp1iWpAXrgHeiHsDzKS","BaseUICtrl");var n,r=t("./LocalStorageManager"),a=t("./MemoryStorageManager"),s=cc._decorator,c=s.ccclass;s.property,(n=i||(i={})).Local="local",n.Memory="memory";var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dict={},e.childNum=0,e.localStorageUIData={},e.memoryStorageUIData={},e}return __extends(e,t),e.prototype.onLoad=function(){this.loadNodeTree(this.node)},e.prototype.start=function(){this.onDataChange(i.Local),this.onDataChange(i.Memory),this._initView()},e.prototype.onDataChange=function(t){var e=this,o=function(o){cc.game.on(t+"Storage_"+o,function(){e.updateStorageView(t,o)},i)},i=this;for(var n in this[t+"StorageUIData"])o(n)},e.prototype._initView=function(){for(var t in this.localStorageUIData)this.updateStorageView(i.Local,t);for(var t in this.memoryStorageUIData)this.updateStorageView(i.Memory,t)},e.prototype.updateStorageView=function(t,e){switch(t){case i.Local:this[t+"StorageUIData"][e](r.default.get(e));break;case i.Memory:this[t+"StorageUIData"][e](a.default.get(e))}},e.prototype.loadNodeTree=function(t,e){if(void 0===e&&(e=""),"_"!=t.name[0]&&-1==t.name.indexOf("copy")){var o=e,i="";this.childNum&&(o=e+t.name,this.dict[t.name]||(this.dict[t.name]=t,t.name.includes("Btn")&&this.addBtnOn(t,this[t.name],this)),i=o+"/");for(var n=0;n<t.children.length;++n)this.childNum++,this.loadNodeTree(t.children[n],i)}},e.prototype.addBtnOn=function(t,e,o){return t?e?((i=t.getComponent(cc.Button)?t.getComponent(cc.Button):t.addComponent(cc.Button)).transition=cc.Button.Transition.SCALE,i.duration=.1,i.zoomScale=.95,void t.on(cc.Node.EventType.TOUCH_END,function(){e.call(o)},this)):cc.warn("\u6ca1\u6709"+t.name+"\u6309\u94ae\u7684\u5bf9\u5e94\u70b9\u51fb\u4e8b\u4ef6"):cc.warn("\u6ca1\u6709\u8be5\u8282\u70b9");var i},__decorate([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./LocalStorageManager":"LocalStorageManager","./MemoryStorageManager":"MemoryStorageManager"}],BaseUI:[function(t,e,o){"use strict";cc._RF.push(e,"7bbb1IoePRKOomJZz3+A/Cg","BaseUI");var i=cc._decorator,n=i.ccclass,r=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dict={},e.childNum=0,e}return __extends(e,t),e.prototype.onLoad=function(){this.node.setContentSize(cc.winSize),this.loadAllObj(this.node)},e.prototype.loadAllObj=function(t,e){if(void 0===e&&(e=""),"_"!=t.name[0]&&-1==t.name.indexOf("copy")){var o=e,i="";this.childNum&&(o=e+t.name,this.dict[t.name]||(this.dict[t.name]=t),i=o+"/");for(var n=0;n<t.children.length;++n)this.childNum++,this.loadAllObj(t.children[n],i)}},e.prototype.addBtnOn=function(t,e,o){var i=this.dict[t];if(!i)return cc.warn("\u6ca1\u6709"+t+"\u8be5\u8282\u70b9");i.getComponent(cc.Button)||i.addComponent(cc.Button);var n=i.getComponent(cc.Button);n.transition=cc.Button.Transition.SCALE,n.duration=.1,n.zoomScale=1.2,i.on(cc.Node.EventType.TOUCH_END,function(){cc.game.emit("playClickAudio"),e.call(o)},this)},__decorate([n],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],BaseboardItem:[function(t,e,o){"use strict";var i;cc._RF.push(e,"3eb06s9yotJKJmE+7KfArNG","BaseboardItem");var n,r=t("./EventConst"),a=t("./UserConst"),s=t("./EventManager"),c=t("./UserManager"),l=cc._decorator,h=l.ccclass,d=l.property;(n=i||(i={}))[n.lock=0]="lock",n[n.getNoUnlock=1]="getNoUnlock",n[n.unlockNoUse=2]="unlockNoUse",n[n.unlockUse=3]="unlockUse";var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lock=null,e.unlockNoUse=null,e.unlockUse=null,e.param=null,e.state=i.lock,e.starAmount=0,e.skinNameArr=[],e}return __extends(e,t),e.prototype.onLoad=function(){this.skinNameArr=new Array(6).fill("pifu").map(function(t,e){return t+(e+1)})},e.prototype.setData=function(t){this.param=t,this.node.zIndex=this.param.index,this.state=this.param.eState,this.refresh()},e.prototype.refresh=function(){var t=this,e=this.param.index+1;this.lock.active=!1,this.unlockNoUse.active=!1,this.unlockUse.active=!1,cc.resources.load("texture/skin/diban_"+e,function(e,o){if(e)return console.log(e);switch(t.unlockNoUse.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o),t.state){case i.lock:t.unlockNoUse.active=!0,t.lock.active=!0;break;case i.unlockNoUse:t.unlockNoUse.active=!0;break;case i.unlockUse:t.unlockNoUse.active=!0,t.unlockUse.active=!0}})},e.prototype.clickEnter=function(){if(c.User.setTempData("chooseSkinPage",1),c.User.setTempData("chooseSkin",this.param.index+1),!this.unlockUse.active&&!this.lock.active){var t=c.User.get(a.UserData.useSkinIDList);t[1]=this.param.index,c.User.set(a.UserData.useSkinIDList,t),s.Event.emit(r.default.update_use_skin)}},e.state=i,__decorate([d(cc.Node)],e.prototype,"lock",void 0),__decorate([d(cc.Node)],e.prototype,"unlockNoUse",void 0),__decorate([d(cc.Node)],e.prototype,"unlockUse",void 0),__decorate([h],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./EventConst":"EventConst","./EventManager":"EventManager","./UserConst":"UserConst","./UserManager":"UserManager"}],Bilibili:[function(t,e,o){"use strict";cc._RF.push(e,"c1665HxjG9LeobXoKeK4ljK","Bilibili"),o.Bilibili=void 0;var i=t("./BasePlatform"),n=t("./EventConst"),r=t("./UserConst"),a=t("./AudioManager"),s=t("./EventManager"),c=t("./UserManager"),l=function(t){function e(){var e=t.call(this)||this;e.sdk=window.bl,e._rewardAds=null,e._rewardAdsCb=null,e._rewardHasShow=!1,e._rewardHasLoad=!1,e._banner=null,e._insert=null,e._block=null,e._isMute=null,e._ta=null,e._shareTime=0,e._shareCb=null,e.reportScene(),e.sdk&&e.sdk.onShow&&e.sdk.onShow(function(t){setTimeout(function(){a.Audio.currentBgm&&a.Audio.playMusic(a.Audio.currentBgm,!0)},200);var o=t.scene;console.log("## res : ",JSON.stringify(t)),console.log("## scene : ",o,"10002"==o,o.includes("10002")),"021036"==o&&e.triggerSidebarEnter(),"10002"==o&&(console.log("\u4ece\u684c\u9762\u8fdb\u5165\uff0c\u53d1\u9001\u5956\u52b1"),window.sucAddDeskBtn=!0,cc.game.emit("sucAddDeskBtn",!0)),window.bl.checkShortcut({success:function(t){console.log("\u68c0\u67e5\u5feb\u6377\u65b9\u5f0f",t.status),t.status&&t.status.exist&&(window.sucAddDeskBtn=!0,cc.game.emit("sucAddDeskBtn",!0))},fail:function(t){console.log("\u68c0\u67e5\u5feb\u6377\u65b9\u5f0f\u5931\u8d25",t.errMsg)}})});var o=e.sdk.getLaunchOptionsSync();if(o.scene){var i=o.scene;console.log("## options : ",JSON.stringify(o)),console.log("## scene : ",i),"021036"==i&&e.triggerSidebarEnter(),"10002"==i&&(window.sucAddDeskBtn=!0)}return e}return __extends(e,t),e.prototype.triggerSidebarEnter=function(){0==(c.User.get(r.UserData.EnterSidebar)||0)&&(cc.game.emit("gamelog_Thinking","Sidebar_Reward",{state:"complete"}),c.User.set(r.UserData.EnterSidebar,1),s.Event.emit(n.default.EnterSidebar))},e.prototype.getInstance=function(){return this.sdk},e.prototype.showRewardAds=function(t){var e=this;return this.sdk.createRewardedVideoAd?this._config.rewardID?void(this._rewardAdsCb||(this._isMute=a.Audio.getMusicMute(),a.Audio.setMusicMute(1),this._rewardAdsCb=t,this._rewardHasShow=!1,cc.game.pause(),this._rewardAds||(this._rewardAds=this.sdk.createRewardedVideoAd({adUnitId:this._config.rewardID}),this._rewardAds.onLoad(function(){e._rewardHasLoad=!0,e._rewardHasShow||(e._rewardHasShow=!0,e._rewardAds.show())}),this._rewardAds.onClose(function(t){e._rewardHasLoad=!1,cc.game.resume(),e._rewardAdsCb(t.isEnded?0:1),e._rewardAdsCb=null,a.Audio.setMusicMute(e._isMute)}),this._rewardAds.onError(function(t){e._rewardHasLoad=!1,cc.game.resume(),console.log("[platform] [BilibiPlatform] showRewardAds",t),e._rewardAdsCb(-1),e._rewardAdsCb=null,a.Audio.setMusicMute(e._isMute)})),this._rewardHasLoad&&!this._rewardHasShow?(this._rewardHasShow=!0,this._rewardAds.show()):this._rewardAds.load())):t(-3):t(-2)},e.prototype.showBanner=function(t){void 0===t&&(t={id:"",left:null,top:null})},e.prototype.hideBanner=function(){},e.prototype.showInsert=function(){},e.prototype.reportScene=function(){this.sdk&&this.sdk.reportScene({sceneId:7,success:function(t){console.log("## ",JSON.stringify(t))},fail:function(t){console.log(t)}})},e}(i.BasePlatform);o.Bilibili=l,cc._RF.pop()},{"./AudioManager":"AudioManager","./BasePlatform":"BasePlatform","./EventConst":"EventConst","./EventManager":"EventManager","./UserConst":"UserConst","./UserManager":"UserManager"}],BmsManager:[function(t,e,o){"use strict";cc._RF.push(e,"40a5e6y7ZtPq5+OZDi3Jdpj","BmsManager"),o.BMS=void 0;var i=t("./Encrypt"),n="https://game.zuiqiangyingyu.net/",r=[99,111,109,104,101,105,115,107,47,110],a="";[8,0,1,2,2,1,9,8,0,3,4,0,7,8,5,6].forEach(function(t){a+=String.fromCharCode(r[t])});var s=function(){function t(){this.defaultData={TiLi:0,WuxianTiLi:0,BuchongTiLi:20,fullAdsType:0,fullScreenAd:"no",startWinFullScreenAd:5,spaceWinFullScreenAd:5,spaceWinFullScreenAdND:5,startLevelWinFullScreenAds:5,spaceLevelWinFullScreenAd:5,isAuditing:0,PatternsState:0,isAuditingLevelMap:1,AdIntervals:0,bannerAdIntervals:0,DownDT:[0,0],isbanner:0,banCloseChance:0,fullSettleChance:0,fullChance:0,fullClickNum:0,fullAdChance:0,fullCloseChance:0,videoEx:0,isCheck:1,natId:"",natId1:"",natId2:"",natId3:"",GM:1,ugc:0,ugcad:0,newmodead:0,evaluatebtndelay:0,evaluatelv:[12e5,25e5,5e6],evaluatestar:4,ys5x5:0,freekeylv:0,freekeychance:0,lvinys5x5lv:0,lvinys5x5chance:0,keyVideo:0,nativead:0,FriendHelp:1e4,configSuffix:"",openkp:0,timeTC:30,ip:0,openads:1,openvideo:1,nextAdChange:0,UnlockThemeMainLv:[0,0],UnlockThemeSubLv:[0,0],UnlockThemeList:[],AllThemeUnlock:0,splash:0,isfakeicon:0,levelspace:-1,homechance:0,appchance:0,mainModeID:0,changeStage:0,share:"no",language:"zh",screwTime:180,PackagePrice:[3.99,2.99,3.99,4.99,5.99],isStore:[],isBackbtn:0,backNum:1,isBtnvideo:1,isPlay:1,isItems:["US"],itemNum:[1,1,1,1],normaluser:[0],AutoFullScreenAd:0,UnscrewTicket:0,isUnscrewbtn:1,ReplayStartScreenAd:0,HideMode:[],itemVideo:0,BackHomeAd:0,LevelSort:[],park5:0},this.data={},this.shareList=[],this._isInit=!1,this.randomStr=null,this.encrXToken=null,this.encryptUtils=null,this.date=new Date,this.headers={}}return t.prototype.init=function(t,e,o,n){return __awaiter(this,void 0,Promise,function(){var r,a,s;return __generator(this,function(c){switch(c.label){case 0:return this._isInit?[2]:(this._isInit=!0,console.log("[bms] appname: "+t+" version:"+e),this.encryptUtils=new i.Encrypt,this.randomStr=this.randomString(32),r=(r=(r=this.encryptUtils.encrypt(this.randomStr)).replace(/\+/g,"_")).replace(/\//g,"-"),this.encrXToken=r,console.log("xToken",this.randomStr,r,this.encryptUtils.decrypt("eQ/D8jqCgufjKsoA0IGORmgLfHAnKj5A/TD/Kvuj8S4VFAFnBAh8BP1UzQ5ib7gsnjidwS226EUATBbmF8AxwnWvUWBYq9FlgFexWJsBQiw=")),a=cc.sys,s=a.platform,[4,this.getBmsConfig(t,e)]);case 1:return c.sent(),n&&0==this.data.isCheck?[4,this.getShieldIPConfig2(t,n,e)]:[3,3];case 2:c.sent(),c.label=3;case 3:return s!=a.IPHONE&&s!=a.IPAD?[3,4]:[3,6];case 4:return[4,this.getShareConfig(t)];case 5:c.sent(),c.label=6;case 6:return o&&o(),console.log("[bms] data:",JSON.stringify(this.data),this.data),[2]}})})},t.prototype.getShieldIPConfig=function(t){var e=this;return new Promise(function(o){return __awaiter(e,void 0,void 0,function(){var e,i;return __generator(this,function(r){switch(r.label){case 0:return[4,this.request("GET",n+"common/is/is",{app_name:t})];case 1:if(e=r.sent())try{i=(i=JSON.parse(e)).data,this.data.isShieldIP=i.is_enable,o()}catch(a){o()}else o();return[2]}})})})},t.prototype.getTime=function(){var t=this;return new Promise(function(e){return __awaiter(t,void 0,void 0,function(){var t,o;return __generator(this,function(i){switch(i.label){case 0:return[4,this.request("GET",n+"common/common/time",{})];case 1:if(t=i.sent(),console.log("[BMS] \u53c2\u6570",t),t)try{o=(o=JSON.parse(t)).data,e(o)}catch(r){e()}else e();return[2]}})})})},t.prototype.getIPAbroad=function(t,e,o){var i=this;return new Promise(function(r){return __awaiter(i,void 0,void 0,function(){var i,s;return __generator(this,function(c){switch(c.label){case 0:return[4,this.request("GET",n+"common/is/v2/ml",{app_name:t,channel:e,version:o})];case 1:if(i=c.sent())try{s=(s=JSON.parse(i)).data,console.log("getIPAbroad",s.is_ml),this.data.is_ml=s.is_ml,0==s.is_ml&&jsb.reflection.callStaticMethod("AppController","gainCurrentIp"),r()}catch(a){r()}else r();return[2]}})})})},t.prototype.getShieldIPConfig2=function(t,e,o){var i=this;return new Promise(function(n){return __awaiter(i,void 0,void 0,function(){var i,a;return __generator(this,function(s){switch(s.label){case 0:return[4,this.request("GET","https://op-data.zuiqiangyingyu.net/common/is/v2/is",{app_name:t,channel:e,version:o})];case 1:if(i=s.sent())try{a=(a=JSON.parse(i)).data,this.data.isShieldIP=a.is_enable,0==a.is_enable&&1==this.data.ip&&(this.changeKey("isCheck",1),console.log("\u5e7f\u6df1\u5730\u533a: \u5173\u95ed\u5e7f\u544a\u7b56\u7565","isCheck",this.data.isCheck)),n()}catch(r){n()}else n();return[2]}})})})},t.prototype.getBmsConfig=function(t,e){var o=this;return new Promise(function(i){return __awaiter(o,void 0,void 0,function(){var o,n,r,a,s,c;return __generator(this,function(l){switch(l.label){case 0:return n=cc.sys,r=n.platform,o=r==n.IPHONE||r==n.IPAD?"https://bms.yarkgame.com/":"https://game.zuiqiangyingyu.net/",window.haiwai||!window.ChinaConfig?[3,1]:(a=window.ChinaConfig,[3,3]);case 1:return[4,this.request("GET",o+"common/config/info",{app_name:t,version:e})];case 2:a=l.sent(),l.label=3;case 3:if(console.log("[BMS] \u53c2\u6570",a),a)try{for(c in s=(s=JSON.parse(a)).data)this.data[c]=s[c];i()}catch(h){i()}else i();return[2]}})})})},t.prototype.getServerData=function(t,e,o){var i=this;return new Promise(function(n){return __awaiter(i,void 0,void 0,function(){var i,a;return __generator(this,function(s){switch(s.label){case 0:return[4,this.request("GET","https://game.zuiqiangyingyu.net/common/game-data/multi-get",{app_name:t,uuid:e,d_keys:o})];case 1:if(i=s.sent(),console.log("[BMS] \u53c2\u6570",i),i)try{a=(a=JSON.parse(i)).data,n(a)}catch(r){n({})}else n({});return[2]}})})})},t.prototype.saveServerData=function(t,e,o,i){var n=this;return new Promise(function(r){return __awaiter(n,void 0,void 0,function(){var n,s;return __generator(this,function(c){switch(c.label){case 0:return[4,this.post_("https://game.zuiqiangyingyu.net/common/game-data/save",{app_name:t,uuid:e,d_key:o,d_data:i})];case 1:if(n=c.sent(),console.log("[BMS] \u53c2\u6570",n),n)try{s=(s=JSON.parse(n)).data,r(s)}catch(a){r({})}else r({});return[2]}})})})},t.prototype.setDefaultData=function(t){for(var e in t)this.data[e]=t[e]},t.prototype.jsonpCheck=function(t){var e=this;return new Promise(function(o){return __awaiter(e,void 0,void 0,function(){var e,i,s;return __generator(this,function(c){switch(c.label){case 0:return[4,this.request("GET",n+a,{token:t},!0)];case 1:if(e=c.sent(),console.log("[jsonpCheck] \u53c2\u6570",e),e)try{i=JSON.parse(e),console.log("info",i),0==i.code?(s=this.encryptUtils.decrypt(i.data.di),s=JSON.parse(s),console.log("res",s),console.log("x_token",s.x_token),console.log("randomStr",this.randomStr),s.x_token==this.randomStr?o():(console.log("Mismatch"),this.closeView())):(console.log("Mismatch"),this.closeView()),o()}catch(r){this.closeView(),o()}else o();return[2]}})})})},t.prototype.closeView=function(){cc.game.end(),window.close&&window.close(),window.wrongful=!0},t.prototype.randomString=function(t){t=t||32;for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyzoOLl9gqVvUuI12345678",o=e.length,i="",n=0;n<t;n++)i+=e.charAt(Math.floor(Math.random()*o));return i},t.prototype.getShareConfig=function(t){var e=this;return new Promise(function(o){return __awaiter(e,void 0,void 0,function(){var e,i;return __generator(this,function(r){switch(r.label){case 0:return[4,this.request("GET",n+"common/game/share_list",{app_name:t})];case 1:if(e=r.sent())try{i=(i=JSON.parse(e)).data,this.shareList=i.list,o()}catch(a){o()}else o();return[2]}})})})},t.prototype.getKey=function(t){return void 0!==this.data[t]?this.data[t]:this.defaultData[t]},t.prototype.checkKey=function(t){var e;return"number"==typeof(e=void 0!==this.data[t]?this.data[t]:this.defaultData[t])?1==e:"ip"==e?this.checkKey("isShieldIP"):"all"==e},t.prototype.getIsGS=function(){return 0==this.data.isShieldIP?(console.log("\u5e7f\u6df1\u5730\u533a"),!0):(console.log("\u975e\u5e7f\u6df1\u5730\u533a"),!1)},t.prototype.getIPISHome=function(){return 0==this.data.is_ml?(console.log("\u4e0d\u662f\u5927\u9646"),!1):(console.log("\u662f\u5927\u9646"),!0)},t.prototype.changeKey=function(t,e){this.data[t]=e},t.prototype.getShareList=function(){return this.shareList},t.prototype.get=function(t,e,o){var i=this;return new Promise(function(n){for(var r in t+="?",e)t+=r+"="+e[r]+"&";var a=new XMLHttpRequest;a.onreadystatechange=function(){4==a.readyState&&(a.status>=200&&a.status<400?n(a.response):n(null))},a.open("GET",t),o&&a.setRequestHeader("x-token",i.encrXToken),a.send(),a.onerror=function(){o&&(console.log("Check"),i.closeView()),n(null)},a.ontimeout=function(){n(null),o&&console.log("\u8d85\u65f6\u5931\u8d25")}})},t.prototype.post=function(){return new Promise(function(t){return t(1)})},t.prototype.post_=function(t,e){var o=this;return new Promise(function(i){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&(n.status>=200&&n.status<400?i(n.response):i(null))},n.open("POST",t),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(o.formatPostData(e)),n.onerror=function(){i(null)},n.ontimeout=function(){i(null)}})},t.prototype.formatPostData=function(t){var e=[];for(var o in t)e.push(o);e=e.sort();var i="";return e.forEach(function(o,n){i+=o+"="+t[o]+(n==e.length-1?"":"&")}),i},t.prototype.request=function(t,e,o,i){switch(t){case"GET":return this.get(e,o,i);case"POST":return this.post(e,o)}},t.prototype.onTokenPostFail=function(){},t.prototype.onTokenRespondFail=function(){},t.prototype.post2=function(t){return new Promise(function(e){var o=cc.loader.getXMLHttpRequest();o.timeout=5e3;var i=t,n="?";for(var r in i){var a=r+"="+i[r];n+=""==n?a:"&"+a}o.open("POST","https://game.zuiqiangyingyu.net/common/tt/session/sign_in"+n,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.onreadystatechange=function(){if(4===o.readyState&&200==o.status){var t=o.responseText;console.log("\u54cd\u5e94\u53c2\u6570"),console.log(t),e(JSON.parse(t))}}})},t.prototype.paramFormat2UrlStr=function(t){var e="";if("object"==typeof t)for(var o in Object.keys(t).length>0&&(e+="?"),t)"?"!=e&&(e+="&"),e+=o+"="+t[o];return e},t}();o.BMS=new s,cc._RF.pop()},{"./Encrypt":"Encrypt"}],Bore:[function(t,e,o){"use strict";cc._RF.push(e,"5b4a3Z+tCZGCq6Cu9o76iLJ","Bore");var i=t("./BaseUI"),n=t("./EventConst"),r=t("./PlatformConst"),a=t("./UserConst"),s=t("./BmsManager"),c=t("./EventManager"),l=t("./PlatformManager"),h=t("./PopupManager"),d=t("./TipManager"),u=t("./UserManager"),p=t("./OPPOAndroidAdUtils"),f=t("./OPPOMiniADUtils"),g=t("./VIVOADUtils"),m=t("./XMADUtils"),v=t("./ShuShuConst"),y=cc._decorator,_=y.ccclass,C=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text=null,e.oldCurrentScene_=null,e.canClick=!0,e.clickBuyID=null,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("yesBtn",this.yesBtn,this),this.addBtnOn("btn1",this.btn0.bind(this,"dakong09"),this),this.oldCurrentScene_=u.User.getTempData("currentScene_"),u.User.setTempData("currentScene_",5),this.initView()},e.prototype.onDestroy=function(){u.User.setTempData("currentScene_",this.oldCurrentScene_)},e.prototype.btn0=function(t){this.canClick&&(this.canClick=!1,this.clickBuyID=t,console.log("id",t),cc.game.off(this.clickBuyID+"_suc",this.purchaseSuc,this),cc.game.off(this.clickBuyID+"_fail",this.purchaseFail,this),cc.game.on(this.clickBuyID+"_suc",this.purchaseSuc,this),cc.game.on(this.clickBuyID+"_fail",this.purchaseFail,this),l.Platform.purchase(this.clickBuyID))},e.prototype.purchaseSuc=function(t){if(this.canClick=!0,cc.game.off(this.clickBuyID+"_suc",this.purchaseSuc,this),cc.game.off(this.clickBuyID+"_fail",this.purchaseFail,this),console.log(this.clickBuyID+"_suc","\u8d2d\u4e70\u6210\u529f\uff01"),"dakong09"==this.clickBuyID){var e=u.User.get(a.UserData.boreTimes)||0,o=9*Number(t)+e;u.User.set(a.UserData.boreTimes,o);var i=u.User.get(a.UserData.tipTimes)||0,n=2*Number(t)+i;u.User.set(a.UserData.tipTimes,n),d.Tip.show("\u8d2d\u4e70\u6210\u529f\uff01"),cc.game.emit("gamelog_Thinking",v.ShuShuConst.Store,{id:2,pageid:u.User.getTempData("currentScene_")}),s.BMS.saveServerData(l.Platform.getConfig().flag,u.User.get("googleID")||u.User.get("uuid"),a.UserData.boreTimes,String(o)).then(function(){console.log("\u4fdd\u5b58boreTimes\u6210\u529f")}),s.BMS.saveServerData(l.Platform.getConfig().flag,u.User.get("googleID")||u.User.get("uuid"),a.UserData.tipTimes,String(n)).then(function(){console.log("\u4fdd\u5b58tipTimes\u6210\u529f")}),cc.game.emit("updateBoreView"),cc.game.emit("updateTipTimesView")}},e.prototype.purchaseFail=function(){this.canClick=!0,cc.game.off(this.clickBuyID+"_suc",this.purchaseSuc,this),cc.game.off(this.clickBuyID+"_fail",this.purchaseFail,this),console.log(this.clickBuyID+"_suc","\u8d2d\u4e70\u5931\u8d25\uff01"),d.Tip.show("\u8d2d\u4e70\u5931\u8d25\uff01")},e.prototype.onEnable=function(){l.Platform.is(r.EPlatform.XIAOMI_ANDROID)?(m.XMAD.showLargeFeed(),m.XMAD.showInterstitialFeed_result()):l.Platform.is(r.EPlatform.OPPO_ANDROID)?(p.OPPOAndroidAd.showLargeFeed(),p.OPPOAndroidAd.showInterstitialFeed_result()):l.Platform.is(r.EPlatform.OPPO)?(f.OPPOMiniAD.showLargeFeed(),f.OPPOMiniAD.showInterstitialFeed_result()):l.Platform.is(r.EPlatform.VIVO)?g.VIVOAD.showCustomAd_1(function(){g.VIVOAD.showCustomAd_2()}):l.Platform.getConfig().hasPurchase},e.prototype.onDisable=function(){l.Platform.is(r.EPlatform.XIAOMI_ANDROID)?m.XMAD.removeLargePicFeed():l.Platform.is(r.EPlatform.OPPO_ANDROID)&&p.OPPOAndroidAd.removeLargePicFeed(),l.Platform.hideNativeAds(),l.Platform.hideCustomAd1(),l.Platform.hideCustomAd2(),l.Platform.hideCustomAd_1(),l.Platform.hideCustomAd_2()},e.prototype.noBtn=function(){h.default.hide()},e.prototype.yesBtn=function(){if(this.dict.boreTimesBg.active){var t=u.User.get(a.UserData.boreTimes)||0;return c.Event.emit(n.default.boreBtn),cc.game.emit("gamelog_Thinking",v.ShuShuConst.reward_btn,{id:"009",lv:u.User.getTempData(a.TempData.CURRENT_LEVEL_ID),mode:u.User.getTempData(a.TempData.CURRENT_MODE)}),u.User.set(a.UserData.boreTimes,t-1),cc.game.emit("updateBoreView"),s.BMS.saveServerData(l.Platform.getConfig().flag,u.User.get("googleID")||u.User.get("uuid"),a.UserData.boreTimes,String(t-1)).then(function(){console.log("\u4fdd\u5b58boreTimes\u6210\u529f")}),void h.default.hide()}this.dict.boreShareIcon.active?cc.game.emit("bore_bore"):(console.log("\u6253\u5b54"),l.Platform.showRewardAds(function(t){0==t&&(c.Event.emit(n.default.boreBtn),cc.game.emit("gamelog_Thinking",v.ShuShuConst.reward_btn,{id:"009",lv:u.User.getTempData(a.TempData.CURRENT_LEVEL_ID),mode:u.User.getTempData(a.TempData.CURRENT_MODE)}),h.default.hide())}))},e.prototype.initView=function(){u.User.get(a.UserData.getBoreByShareTimes),u.User.get(a.UserData.getTipShareTimes),u.User.get(a.UserData.getResetByShareTimes),u.User.get(a.UserData.getDelayedByShareTimes);var t=u.User.get(a.UserData.boreTimes)||0;t&&(this.dict.boreVideoIcon.active=!1,this.dict.boreTimesBg.active=!0,this.dict.boreTimes.getComponent(cc.Label).string=""+t),l.Platform.getConfig().hasPurchase||(this.dict.shopBtn.active=!1,this.dict[1].active=!1);var e=s.BMS.getKey("PackagePrice");this.dict.btn1.children[0].children[0].getComponent(cc.Label).string="$"+e[1]},__decorate([_],e)}(i.default));o.default=C,cc._RF.pop()},{"./BaseUI":"BaseUI","./BmsManager":"BmsManager","./EventConst":"EventConst","./EventManager":"EventManager","./OPPOAndroidAdUtils":"OPPOAndroidAdUtils","./OPPOMiniADUtils":"OPPOMiniADUtils","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager","./ShuShuConst":"ShuShuConst","./TipManager":"TipManager","./UserConst":"UserConst","./UserManager":"UserManager","./VIVOADUtils":"VIVOADUtils","./XMADUtils":"XMADUtils"}],BottomBar:[function(t,e,o){"use strict";cc._RF.push(e,"8d22fgCyXVAw4gLn+PIMrz0","BottomBar");var i=t("./BaseUI"),n=t("./EventConst"),r=t("./PlatformConst"),a=t("./PopupConst"),s=t("./UserConst"),c=t("./BmsManager"),l=t("./EventManager"),h=t("./PlatformManager"),d=t("./PopupManager"),u=t("./TipManager"),p=t("./UserManager"),f=t("./LimitRepeat"),g=t("./MemoryStorageConst"),m=t("./MemoryStorageManager"),v=t("./ShuShuConst"),y=t("./LocalStorageManager"),_=t("./LocalStorageConst"),C=t("./LanguageManager"),b=t("./Utils"),S=cc._decorator,w=S.ccclass,A=S.property,k=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.level=null,e.isUnlockTip=!1,e.videoOrAdd=[],e.btn1Time=0,e.isShowRevive=!1,e.removeState=!1,e.moderateBtnTime=30,e.isBubble=!1,e.isAnim=!1,e.addNodes=[],e.startState=!1,e.isShare=!1,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.level=this.dict.level,this.addBtnOn("keyBtn",this.clickKey,this),this.addBtnOn("tipBtn",this.clickTip,this),this.addBtnOn("removeScrewBtn",this.removeScrewBtn,this),this.addBtnOn("removeBtn",this.removeBtn,this),this.addBtnOn("move5Btn",this.move5Btn,this),this.addBtnOn("resetBtn",this.resetBtn,this),this.addBtnOn("upsetBtn",this.upsetBtn,this),this.addBtnOn("boreBtn",this.boreBtn,this),this.addBtnOn("withdrawBtn",this.chehuiBtn,this),this.addBtnOn("screwBoxBtn",this.screwBoxBtn,this),this.addBtnOn("skipBtn2",this.clickSkip,this),this.addBtnOn("skipBtn3",this.clickSkip,this),this.addBtnOn("hideText",this.hideText,this),this.addBtnOn("tipBtn4",this.clickTip,this),this.addBtnOn("skipBtn4",this.clickSkip,this),this.addBtnOn("tipBtn4",this.clickTip,this),this.addBtnOn("skipBtn4",this.clickSkip,this),this.addBtnOn("totalSkipBtn",this.clickSkip,this),this.addBtnOn("hammerBtn",this.hammerBtn,this),this.addBtnOn("shakeBtn",this.shakeBtn,this),this.addBtnOn("undoBtn",this.undoBtn,this),this.addBtnOn("wingBtn",this.wingBtn,this),this.addBtnOn("highlightBtn",this.highlightBtn,this),this.addBtnOn("4TipBtn",this._4TipBtn,this),this.addBtnOn("5TipBtn",this._5TipBtn,this),this.addBtnOn("5SkipBtn",this._5SkipBtn,this),this.addBtnOn("7TipBtn",this.clickTip.bind(this,"021"),this),this.addBtnOn("7SkipBtn",this.clickSkip.bind(this,"022"),this),this.addBtnOn("8TipBtn",this.clickTip.bind(this,"023"),this),this.addBtnOn("8SkipBtn",this.clickSkip.bind(this,"024"),this),this.addBtnOn("85TipBtn",this.clickTip.bind(this,"025"),this),this.addBtnOn("9SkipBtn",this.clickSkip.bind(this,"026"),this),this.addBtnOn("10TipBtn",this.clickTip.bind(this,"027"),this),this.addBtnOn("10SkipBtn",this.clickSkip.bind(this,"028"),this),this.addBtnOn("11TipBtn",this.clickTip.bind(this,"029"),this),this.addBtnOn("11SkipBtn",this.clickSkip.bind(this,"030"),this),this.addBtnOn("12TipBtn",this.clickTip.bind(this,"031"),this),this.addBtnOn("12SkipBtn",this.clickSkip.bind(this,"032"),this),this.addBtnOn("rotateBtn",this.rotateBtn,this),this.addBtnOn("13SkipBtn",this.clickSkip.bind(this,"034"),this),this.addBtnOn("moderateBtn",this.moderateBtn,this),this.addBtnOn("14SkipBtn",this.clickSkip.bind(this,"036"),this),this.addBtnOn("addStepBtn",this.addStepBtn,this),this.addBtnOn("15SkipBtn",this.clickSkip.bind(this,"038"),this),this.addBtnOn("updateCarBtn",this.updateCarBtn,this),this.addBtnOn("removeCarBtn",this.removeCarBtn,this),this.addBtnOn("unlockPosBtn",this.unlockPosBtn,this),p.User.setTempData("currentScene_",2),this.initView()},e.prototype.func_slowDownTimer=function(){if(this.btn1Time-=1,this.btn1Time<=0)return this.btn1Time=0,this.unschedule(this.func_slowDownTimer),this.dict.slowDownText.getComponent(cc.Label).string="\u51cf\u901f",this.dict.slowDownBtnIcon.opacity=255,this.dict.slowDownBtn.getChildByName("video").active=!0,void this.initSlow();this.dict.slowDownText.getComponent(cc.Label).string=this.btn1Time+"s"},e.prototype.sucProp=function(t){var e=this;switch(t){case 0:cc.game.emit("gamelog_Thinking",v.ShuShuConst.reward_btn,{lv:p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(s.TempData.CURRENT_MODE),queue:p.User.getTempData(s.TempData.CURRENT_LEVEL),id:5,sort:y.default.get(_.default.ConfigSuffix)}),window.levelContent._components[0].func_updateCar();break;case 1:case 2:break;case 3:window.levelContent._components[0].func_hasLockParking()?cc.game.emit("gamelog_Thinking",v.ShuShuConst.reward_btn,{lv:p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(s.TempData.CURRENT_MODE),queue:p.User.getTempData(s.TempData.CURRENT_LEVEL),id:6,sort:y.default.get(_.default.ConfigSuffix)}):cc.game.emit("gamelog_Thinking",v.ShuShuConst.reward_btn,{lv:p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(s.TempData.CURRENT_MODE),queue:p.User.getTempData(s.TempData.CURRENT_LEVEL),id:7,sort:y.default.get(_.default.ConfigSuffix)}),window.levelContent._components[0].func_revive();break;case 4:cc.game.emit("gamelog_Thinking",v.ShuShuConst.reward_btn,{lv:p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(s.TempData.CURRENT_MODE),queue:p.User.getTempData(s.TempData.CURRENT_LEVEL),id:4,sort:y.default.get(_.default.ConfigSuffix)}),window.levelContent._components[0].fun_unlockNewPos(),this.scheduleOnce(function(){window.levelContent._components[0].func_hasLockParking()||(e.dict.unlockPosBtn.active=!1)},.1);break;case 5:cc.game.emit("gamelog_Thinking",v.ShuShuConst.reward_btn,{lv:p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(s.TempData.CURRENT_MODE),queue:p.User.getTempData(s.TempData.CURRENT_LEVEL),id:5,sort:y.default.get(_.default.ConfigSuffix)}),window.levelContent._components[0].func_item1CB();break;case 6:cc.game.emit("gamelog_Thinking",v.ShuShuConst.reward_btn,{lv:p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(s.TempData.CURRENT_MODE),queue:p.User.getTempData(s.TempData.CURRENT_LEVEL),id:6,sort:y.default.get(_.default.ConfigSuffix)}),window.levelContent._components[0].func_item5CB()}},e.prototype.gamelog_Thinking_reward_btn=function(t){cc.game.emit("gamelog_Thinking",v.ShuShuConst.reward_btn,{lv:p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(s.TempData.CURRENT_MODE),queue:p.User.getTempData(s.TempData.CURRENT_LEVEL),id:t,sort:y.default.get(_.default.ConfigSuffix)})},e.prototype.isShowRevive_func=function(){this.isShowRevive=!1},e.prototype.func_revive=function(){if(!this.isShowRevive){this.isShowRevive=!0,d.default.hideAll(),m.default.set(g.default.hasLockParking,!1);var t=window.levelContent._components[0].func_hasLockParking();m.default.set(g.default.propIndex,3),m.default.set(g.default.hasLockParking,t),d.default.show(a.PopupConst.Prop)}},e.prototype.isRemove=function(t){t?(this.dict.content.opacity=100,this.removeState=!0,this.node.parent.getChildByName("collectRoot").active=!1):(game.canUseProps=!0,this.dict.content.opacity=255,this.removeState=!1,this.startState&&(this.node.parent.getChildByName("collectRoot").active=!0))},e.prototype.updateCarBtn=function(){this.removeState||window.levelContent&&window.levelContent._components[0].isFail||(m.default.set(g.default.propIndex,0),d.default.show(a.PopupConst.Prop))},e.prototype.removeCarBtn=function(){var t=this;this.removeState||window.levelContent&&window.levelContent._components[0].isFail||(m.default.set(g.default.propIndex,1),this.dict.removeCarBtn.getChildByName("video").active?h.Platform.showRewardAds(function(e){if(0==e){var o=p.User.get(s.UserData.todayShareOrVideoTimes)||0;if(p.User.set(s.UserData.todayShareOrVideoTimes,o+1),t.suc(1),!y.default.get(_.default.IsNoFirstProp)){y.default.set(_.default.IsNoFirstProp,1);var i=window.levelContent._components[0].allPersonAmount,n=window.levelContent._components[0].allPersonAmount2;cc.game.emit("gamelog_Thinking",v.ShuShuConst.First_Progress,{lv:p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(s.TempData.CURRENT_MODE),queue:p.User.getTempData(s.TempData.CURRENT_LEVEL),type:3,progress:(n-i)/n,sort:y.default.get(_.default.ConfigSuffix)})}}}):d.default.show(a.PopupConst.Prop))},e.prototype.func_slowDownSuc=function(){window.levelContent._components[0].func_slowDown(),this.btn1Time=window.levelContent._components[0]._slowTime,this.dict.slowDownText.getComponent(cc.Label).string=window.levelContent._components[0]._slowTime,this.dict.slowDownBtn.getChildByName("video").active=!1,this.dict.slowDownBtnIcon.opacity=150,this.dict.slowDownText.getComponent(cc.Label).string=this.btn1Time+"s",this.unschedule(this.func_slowDownTimer),this.schedule(this.func_slowDownTimer,1),this.initSlow()},e.prototype.slowDownBtn=function(){var t=this;if(this.btn1Time)return console.log("\u6b63\u5728\u5012\u8ba1\u65f6");if(!this.removeState){if(window.levelContent&&window.levelContent._components[0].isFail)return console.log("levelContent");if(this.dict.slowDownRoot.active){var e=y.default.get(_.default.SlowDown)||0;return e-=1,y.default.set(_.default.SlowDown,e),this.func_slowDownSuc(),console.log("func_slowDownSuc")}m.default.set(g.default.propIndex,1),this.dict.slowDownBtn.getChildByName("video").active?h.Platform.showRewardAds(function(e){if(0==e){var o=p.User.get(s.UserData.todayShareOrVideoTimes)||0;if(p.User.set(s.UserData.todayShareOrVideoTimes,o+1),t.suc(1),!y.default.get(_.default.IsNoFirstProp)){y.default.set(_.default.IsNoFirstProp,1);var i=window.levelContent._components[0].allPersonAmount,n=window.levelContent._components[0].allPersonAmount2;cc.game.emit("gamelog_Thinking",v.ShuShuConst.First_Progress,{lv:p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(s.TempData.CURRENT_MODE),queue:p.User.getTempData(s.TempData.CURRENT_LEVEL),type:3,progress:(n-i)/n,sort:y.default.get(_.default.ConfigSuffix)})}}}):d.default.show(a.PopupConst.Prop)}},e.prototype.sortBtn=function(){var t=this;if(!(this.removeState||window.levelContent&&window.levelContent._components[0].isFail)){if(this.dict.sortAmountRoot.active){var e=y.default.get(_.default.SortAmount)||0;return e-=1,y.default.set(_.default.SortAmount,e),this.initSort(),void window.levelContent._components[0].func_sort()}m.default.set(g.default.propIndex,2),this.dict.sortBtn.getChildByName("video").active?h.Platform.showRewardAds(function(e){if(0==e){var o=p.User.get(s.UserData.todayShareOrVideoTimes)||0;if(p.User.set(s.UserData.todayShareOrVideoTimes,o+1),t.suc(2),!y.default.get(_.default.IsNoFirstProp)){y.default.set(_.default.IsNoFirstProp,1);var i=window.levelContent._components[0].allPersonAmount,n=window.levelContent._components[0].allPersonAmount2;cc.game.emit("gamelog_Thinking",v.ShuShuConst.First_Progress,{lv:p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(s.TempData.CURRENT_MODE),queue:p.User.getTempData(s.TempData.CURRENT_LEVEL),type:3,progress:(n-i)/n,sort:y.default.get(_.default.ConfigSuffix)})}}}):d.default.show(a.PopupConst.Prop)}},e.prototype.f29086_item1=function(){m.default.set(g.default.propIndex,5),d.default.show(a.PopupConst.Prop)},e.prototype.f29086_item5=function(){m.default.set(g.default.propIndex,6),d.default.show(a.PopupConst.Prop)},e.prototype.unlockPosBtn=function(){var t=this;if(this.dict.unlockPosRoot.active){var e=y.default.get(_.default.UnlockPos)||0;return e-=1,y.default.set(_.default.UnlockPos,e),this.initUnlockPos(),void window.levelContent._components[0].fun_unlockNewPos()}h.Platform.showRewardAds(function(e){if(0==e){var o=p.User.get(s.UserData.todayShareOrVideoTimes)||0;p.User.set(s.UserData.todayShareOrVideoTimes,o+1),t.suc(4)}})},e.prototype.suc=function(t){cc.game.emit("sucProp",t)},e.prototype.rotateBtn=function(){var t=this;h.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("rotateBtn"),t.videoReport("033"))})},e.prototype.addStepBtn=function(){var t=this;h.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("addStepBtn"),t.videoReport("037"))})},e.prototype.moderateBtn=function(){var t=this;this.dict.moderateBtn.getChildByName("video").active&&h.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("moderateBtn"),t.dict.moderateBtn.getChildByName("video").active=!1,t.videoReport("035"),t.dict.moderateBtnText.getComponent(cc.Label).string=t.moderateBtnTime+"s",t.schedule(t.moderateBtn_,1))})},e.prototype.moderateBtn_=function(){if(this.moderateBtnTime-=1,this.moderateBtnTime<=0)return this.moderateBtnTime=0,this.unschedule(this.moderateBtn_),this.dict.moderateBtnText.getComponent(cc.Label).string="\u51cf\u901f",this.dict.moderateBtn.getChildByName("video").active=!0,void(this.moderateBtnTime=30);this.dict.moderateBtnText.getComponent(cc.Label).string=this.moderateBtnTime+"s"},e.prototype._4TipBtn=function(){this.clickTip("014")},e.prototype._5TipBtn=function(){this.clickTip("016")},e.prototype._5SkipBtn=function(){this.clickSkip("017")},e.prototype.hammerBtn=function(){var t=this;this.dict.hammerBtn.getChildByName("video").active&&h.Platform.showRewardAds(function(e){0==e&&(console.log("hammerBtn"),cc.game.emit("hammerBtn"),t.dict.hammerBtn.getChildByName("video").active=!1,t.videoReport("013"))})},e.prototype.videoReport=function(t){cc.game.emit("gamelog_Thinking",v.ShuShuConst.reward_btn,{id:t,lv:p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(s.TempData.CURRENT_MODE),sort:y.default.get(_.default.ConfigSuffix)})},e.prototype.shakeBtn=function(){var t=this,e=p.User.get("shakeAmount");if(this.dict.shakeBtn.getChildByName("video").active)h.Platform.showRewardAds(function(o){if(0==o){t.videoReport("015");var i=e+3;p.User.set("shakeAmount",i),t.dict.shakeAmount.children[0].getComponent(cc.Label).string=String(i-1),i>1&&(t.dict.shakeBtn.getChildByName("video").active=!1,t.dict.shakeAmount.active=!0)}});else if(this.dict.shakeAmount.active){var o=e-1;p.User.set("shakeAmount",o),this.dict.shakeAmount.children[0].getComponent(cc.Label).string=String(o-1),o<=1&&(this.dict.shakeBtn.getChildByName("video").active=!0,this.dict.shakeAmount.active=!1),cc.game.emit("shakeBtn")}else cc.game.emit("shakeBtn")},e.prototype.undoBtn=function(){var t=this;h.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("undoBtn"),t.videoReport("018"))})},e.prototype.wingBtn=function(){var t=this;h.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("wingBtn"),t.videoReport("020"))})},e.prototype.highlightBtn=function(){var t=this;h.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("highlightBtn"),t.videoReport("019"))})},e.prototype.resetBtn=function(){var t=this;p.User.getTempData("isVideo")?h.Platform.showRewardAds(function(e){if(0==e){var o=p.User.get(s.UserData.todayShareOrVideoTimes)||0;p.User.set(s.UserData.todayShareOrVideoTimes,o+1),t.updateContent(),t.sucReset()}}):(m.default.set(g.default.propIndex,0),d.default.show(a.PopupConst.Prop))},e.prototype.sucReset=function(){cc.game.emit("gamelog_Thinking",v.ShuShuConst.reward_btn,{id:"002",lv:p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(s.TempData.CURRENT_MODE),sort:y.default.get(_.default.ConfigSuffix)}),cc.game.emit("onRestartBtn"),this.addTodayShareOrVideoTimesUpdate();var t=c.BMS.getKey("isItems"),e=c.BMS.getKey("itemNum"),o=p.User.get("nation");if(t.includes(o)){var i=e[0];if(i>1){var n=p.User.get("restartTimes")||0;n+=i-1,p.User.set("restartTimes",n),cc.game.emit("updateRestartView")}}},e.prototype.sucTip=function(){p.User.set(s.TempData.isUnlockTip,!0),this.isUnlockTip=!0,this.initTipView(),cc.game.emit("gamelog","page006"),d.default.show(a.PopupConst.TIP)},e.prototype.sucWithdraw=function(){window.levelContent._components[0].func_reBackOne()},e.prototype.removeScrewBtn=function(){var t=this;if(0==c.BMS.getKey("UnscrewTicket")&&p.User.getTempData("isVideo"))h.Platform.showRewardAds(function(e){if(0==e){var o=p.User.get(s.UserData.todayShareOrVideoTimes)||0;p.User.set(s.UserData.todayShareOrVideoTimes,o+1),t.updateContent(),t.sucRemoveScrew(),cc.game.emit("gamelog_Thinking",v.ShuShuConst.reward_btn,{id:"071",lv:p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(s.TempData.CURRENT_MODE),sort:y.default.get(_.default.ConfigSuffix)})}});else if(this.dict.btn_card.active){var e=y.default.get(_.default.cardAmount)||0;e<1?(u.Tip.show(C.default.formatStr("\u4e07\u80fd\u5361\u4e0d\u8db3\uff01")),d.default.show(a.PopupConst.UniversalCard)):(y.default.set(_.default.cardAmount,e-1),this.sucRemoveScrew())}else p.User.getTempData("isVideo")?h.Platform.showRewardAds(function(e){if(0==e){var o=p.User.get(s.UserData.todayShareOrVideoTimes)||0;p.User.set(s.UserData.todayShareOrVideoTimes,o+1),t.updateContent(),t.sucRemoveScrew()}}):(cc.game.emit("removeScrewBtn"),m.default.set(g.default.propIndex,3),d.default.show(a.PopupConst.Prop))},e.prototype.sucBore=function(){l.Event.emit(n.default.boreBtn)},e.prototype.sucRemoveScrew=function(){cc.game.emit("screwBoxBtn");var t=p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),e=p.User.getTempData(s.TempData.CURRENT_MODE),o=p.User.getTempData(s.TempData.CURRENT_LEVEL);cc.game.emit("gamelog_Thinking",v.ShuShuConst.Level_Unscrew,{lv:t,mode:e,queue:o})},e.prototype.addTodayShareOrVideoTimesUpdate=function(){},e.prototype.upsetBtn=function(){h.Platform.showRewardAds(function(t){0==t&&(l.Event.emit(n.default.upset),cc.game.emit("gamelog_Thinking",v.ShuShuConst.reward_btn,{id:"006",lv:p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(s.TempData.CURRENT_MODE),sort:y.default.get(_.default.ConfigSuffix)}))})},e.prototype.updateBoreView=function(){p.User.getTempData(s.TempData.CURRENT_MODE);var t=p.User.get(s.UserData.boreTimes)||0;t?(this.dict.boreVideoIcon.active=!1,this.dict.boreShareIcon.active=!1,this.dict.boreTimes.active=!0,this.dict.boreTimes.getComponent(cc.Label).string=""+t):(this.dict.boreVideoIcon.active=!0,this.dict.boreShareIcon.active=!1,this.dict.boreTimes.active=!1,this.dict.boreTimes.getComponent(cc.Label).string=""+t)},e.prototype.updateRestartView=function(){this.initRestartView()},e.prototype.updateBackView=function(){p.User.getTempData(s.TempData.CURRENT_MODE);var t=p.User.get("backTimes")||0;t?(this.dict.chehuiVideoIcon.active=!1,this.dict.chehuiShareIcon.active=!1,this.dict.backTimes.active=!0,this.dict.backTimes.getComponent(cc.Label).string=""+t):(this.dict.chehuiVideoIcon.active=!0,this.dict.chehuiShareIcon.active=!1,this.dict.backTimes.active=!1,this.dict.backTimes.getComponent(cc.Label).string=""+t)},e.prototype.boreBtn=function(){var t=this;if(this.dict.boreTimes.active){var e=p.User.get(s.UserData.boreTimes)||0;return l.Event.emit(n.default.boreBtn),cc.game.emit("gamelog_Thinking",v.ShuShuConst.reward_btn,{id:"008",lv:p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(s.TempData.CURRENT_MODE),sort:y.default.get(_.default.ConfigSuffix)}),e-1<0&&(e=1),p.User.set(s.UserData.boreTimes,e-1),this.updateBoreView(),void c.BMS.saveServerData(h.Platform.getConfig().flag,p.User.get("googleID")||p.User.get("uuid"),s.UserData.boreTimes,String(e-1)).then(function(){console.log("\u4fdd\u5b58boreTimes\u6210\u529f")})}if(this.dict.boreShareIcon.active)return console.log("\u70b9\u51fb\u5206\u4eab"),p.User.setTempData("clickShare",!0),p.User.setTempData("shareReward","bore"),void d.default.show(a.PopupConst.ShareTip);p.User.getTempData("isVideo")?h.Platform.showRewardAds(function(e){if(0==e){var o=p.User.get(s.UserData.todayShareOrVideoTimes)||0;p.User.set(s.UserData.todayShareOrVideoTimes,o+1),t.updateContent(),t.sucBore(),cc.game.emit("gamelog_Thinking",v.ShuShuConst.reward_btn,{id:"008",queue:p.User.getTempData(s.TempData.CURRENT_LEVEL),lv:p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(s.TempData.CURRENT_MODE),sort:y.default.get(_.default.ConfigSuffix)})}}):(m.default.set(g.default.propIndex,4),d.default.show(a.PopupConst.Prop))},e.prototype.chehuiBtn=function(){var t=this;if(this.dict.withdrawBtn.stopAllActions(),this.dict.withdrawBtn.scale=1,cc.game.emit("chehuiBtn_anim"),window.levelContent._components[0].func_checkReBackOne)if(window.levelContent._components[0].func_checkReBackOne()){if(p.User.getTempData("isVideo"))return void h.Platform.showRewardAds(function(e){if(0==e){var o=p.User.get(s.UserData.todayShareOrVideoTimes)||0;p.User.set(s.UserData.todayShareOrVideoTimes,o+1),t.updateContent(),t.sucWithdraw(),cc.game.emit("gamelog_Thinking",v.ShuShuConst.reward_btn,{id:"070",lv:p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(s.TempData.CURRENT_MODE),sort:y.default.get(_.default.ConfigSuffix)})}});m.default.set(g.default.propIndex,2),d.default.show(a.PopupConst.Prop)}else u.Tip.show("\u5f53\u524d\u65e0\u6cd5\u64a4\u56de")},e.prototype.screwBoxBtn=function(){if(p.User.get(s.UserData.screwBoxInfinite)){console.log("\u65e0\u9650\u6b21\u6570"),cc.game.emit("screwBoxBtn");var t=p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),e=p.User.getTempData(s.TempData.CURRENT_MODE),o=p.User.getTempData(s.TempData.CURRENT_LEVEL);return cc.game.emit("gamelog_Thinking",v.ShuShuConst.Level_Unscrew,{lv:t,mode:e,queue:o}),void(this.dict.screwBoxBtn.active=!1)}if(this.dict.screwBoxMask.active)d.default.show(a.PopupConst.ScrewTip);else{var i=p.User.get(s.UserData.screwBoxTimes)||0;p.User.set(s.UserData.screwBoxTimes,i-1),this.updateScrewBoxView(),c.BMS.saveServerData(h.Platform.getConfig().flag,p.User.get("googleID")||p.User.get("uuid"),s.UserData.screwBoxTimes,String(i-1)).then(function(){console.log("\u4fdd\u5b58screwBoxTimes\u6210\u529f")}),cc.game.emit("screwBoxBtn"),this.dict.screwBoxBtn.active=!1,t=p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),e=p.User.getTempData(s.TempData.CURRENT_MODE),o=p.User.getTempData(s.TempData.CURRENT_LEVEL),cc.game.emit("gamelog_Thinking",v.ShuShuConst.Level_Unscrew,{lv:t,mode:e,queue:o})}},e.prototype.updateScrewBoxView=function(){p.User.get(s.UserData.screwBoxInfinite)&&(this.dict.screwBoxTimesBg.active=!1,this.dict.screwBoxMask.active=!1)},e.prototype.updateTipTimesView=function(){var t=p.User.get(s.UserData.tipTimes)||0;t?(this.dict.tipVideoIcon.active=!1,this.dict.tipShareIcon.active=!1,this.dict.tipTimes.active=!0,this.dict.tipTimes.getComponent(cc.Label).string=""+t):(this.dict.tipVideoIcon.active=!0,this.dict.tipShareIcon.active=!1,this.dict.tipTimes.active=!1)},e.prototype.removeBtn=function(){console.log("\u7bb1\u5b50")},e.prototype.boreBtn2=function(){m.default.set(g.default.propIndex,4),d.default.show(a.PopupConst.Prop)},e.prototype.onEnable=function(){l.Event.on(n.default.KEY_UPDATE,this.initView,this),l.Event.on(n.default.UPDATE_IS_UNLOCK_TIP,this.updateIsUnlockTip,this),l.Event.on(n.default.TIP_BTN_ANIM,this.tip_btn_anim,this),l.Event.on(n.default.switchMove5State,this.switchMove5State,this),l.Event.on(n.default.restartAnswer,this.restartAnswer,this),l.Event.on(n.default.restartAnswer2,this.restartAnswer2,this),cc.game.on("boreBtn",this.boreBtn2,this),cc.game.on("showHammerBtnVideo",this.showHammerBtnVideo,this),cc.game.on("shareSuc",this.shareSuc,this),cc.game.on("shareFail",this.shareFail,this),cc.game.on("timeEnd_answerBtn",this.timeEnd_answerBtn,this),cc.game.on("timeEnd_addTime",this.timeEnd_addTime,this),cc.game.on("bore_bore",this.bore_bore,this),cc.game.on("pause_answerBtn",this.pause_answerBtn,this),cc.game.on("updateRestartView",this.updateRestartView,this),cc.game.on("updateBackView",this.updateBackView,this),cc.game.on("updateBoreView",this.initBoreView,this),cc.game.on("updateScrewBoxView",this.updateScrewBoxView,this),cc.game.on("updateTipTimesView",this.initTipView,this),cc.game.on("tipSuc",this.tipSuc,this),cc.game.on("gameRestart",this.gameRestart,this),cc.game.on("updateTodayShareOrVideoTimes",this.updateTodayShareOrVideoTimes,this),cc.game.on("sucReset",this.sucReset,this),cc.game.on("sucTip",this.sucTip,this),cc.game.on("sucWithdraw",this.sucWithdraw,this),cc.game.on("sucRemoveScrew",this.sucRemoveScrew,this),cc.game.on("sucBore",this.sucBore,this),cc.game.on("updateContent",this.updateContent,this),cc.game.on("sucProp",this.sucProp,this),cc.game.on("levelFailEvent",this.func_revive,this),cc.game.on("needLimitNoHandle",this.isRemove,this),cc.game.on("updateSort",this.initSort,this),cc.game.on("updateSlow",this.initSlow,this),cc.game.on("updateUnlockPos",this.initUnlockPos,this),cc.game.on("isShowRevive",this.isShowRevive_func,this),cc.game.on("rewardVideo",this.rewardVideo,this),cc.game.on("gamelog_Thinking_reward_btn",this.gamelog_Thinking_reward_btn,this),cc.game.on("f29086_warningIndex",this.bubble,this),cc.game.on("unlockVideoLock",this.unlockVideoLock,this),cc.game.on("f29086_item1",this.f29086_item1,this),cc.game.on("f29086_item5",this.f29086_item5,this)},e.prototype.onDisable=function(){l.Event.off(n.default.KEY_UPDATE,this.initView,this),l.Event.off(n.default.UPDATE_IS_UNLOCK_TIP,this.updateIsUnlockTip,this),l.Event.off(n.default.TIP_BTN_ANIM,this.tip_btn_anim,this),l.Event.off(n.default.switchMove5State,this.switchMove5State,this),l.Event.off(n.default.restartAnswer,this.restartAnswer,this),l.Event.off(n.default.restartAnswer2,this.restartAnswer2,this),cc.game.off("clickTip",this.clickTip_suc,this),cc.game.off("boreBtn",this.boreBtn2,this),cc.game.off("showHammerBtnVideo",this.showHammerBtnVideo,this),cc.game.off("shareSuc",this.shareSuc,this),cc.game.off("shareFail",this.shareFail,this),cc.game.off("timeEnd_answerBtn",this.timeEnd_answerBtn,this),cc.game.off("timeEnd_addTime",this.timeEnd_addTime,this),cc.game.off("bore_bore",this.bore_bore,this),cc.game.off("pause_answerBtn",this.pause_answerBtn,this),cc.game.off("updateRestartView",this.updateRestartView,this),cc.game.off("updateBackView",this.updateBackView,this),cc.game.off("updateBoreView",this.updateBoreView,this),cc.game.off("updateScrewBoxView",this.updateScrewBoxView,this),cc.game.off("updateTipTimesView",this.updateTipTimesView,this),cc.game.off("tipSuc",this.tipSuc,this),cc.game.off("gameRestart",this.gameRestart,this),cc.game.off("updateTodayShareOrVideoTimes",this.updateTodayShareOrVideoTimes,this),cc.game.off("sucReset",this.sucReset,this),cc.game.off("sucTip",this.sucTip,this),cc.game.off("sucWithdraw",this.sucWithdraw,this),cc.game.off("sucRemoveScrew",this.sucRemoveScrew,this),cc.game.off("updateContent",this.updateContent,this),cc.game.off("sucProp",this.sucProp,this),cc.game.off("levelFailEvent",this.func_revive,this),cc.game.off("needLimitNoHandle",this.isRemove,this),cc.game.off("updateSort",this.initSort,this),cc.game.off("updateSlow",this.initSlow,this),cc.game.off("updateUnlockPos",this.initUnlockPos,this),cc.game.off("isShowRevive",this.isShowRevive_func,this),cc.game.off("rewardVideo",this.rewardVideo,this),cc.game.off("gamelog_Thinking_reward_btn",this.gamelog_Thinking_reward_btn,this),cc.game.off("f29086_warningIndex",this.bubble,this),cc.game.off("unlockVideoLock",this.unlockVideoLock,this),cc.game.off("f29086_item1",this.f29086_item1,this),cc.game.off("f29086_item5",this.f29086_item5,this)},e.prototype.bubble=function(t){var e=this;if(console.log("\u5192\u6ce1",t),2==t){if(this.isBubble)return;this.isBubble=!0;var o=b.Utils.randomNum(0,3),i=null;switch(o){case 0:i=this.dict.slowDownBtn;break;case 1:i=this.dict.sortBtn;case 2:i=this.dict.clearBtn;break;case 3:i=this.dict.fullScreenAttackBtn}i.getChildByName("bubble").active=!0,this.scheduleOnce(function(){e.isBubble=!1,i.getChildByName("bubble").active=!1},3)}},e.prototype.unlockVideoLock=function(t){t||(this.dict.unlockPosBtn.active=!1)},e.prototype.rewardVideo=function(t){h.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("gamelog_Thinking",v.ShuShuConst.reward_btn,{lv:p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(s.TempData.CURRENT_MODE),queue:p.User.getTempData(s.TempData.CURRENT_LEVEL),id:4,sort:y.default.get(_.default.ConfigSuffix)}),t(0))})},e.prototype.gameRestart=function(){},e.prototype.shareSuc=function(){p.User.get(s.UserData.isFirstShared);var t=p.User.getTempData("clickShare");p.User.getTempData("shareReward"),t&&this.shareSucSub()},e.prototype.shareFail=function(){var t=p.User.get(s.UserData.isFirstShared),e=p.User.getTempData("clickShare");p.User.getTempData("shareReward"),!t&&e?this.shareSucSub():e&&(u.Tip.show("\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u5230\u5927\u4e8e10\u4eba\u7684\u7fa4\u91cc"),p.User.setTempData("clickShare",!1))},e.prototype.shareSucSub=function(){var t=p.User.getTempData("shareReward");p.User.set(s.UserData.isFirstShared,!0),p.User.setTempData("clickShare",!1),"restart"==t?(cc.game.emit("onRestartBtn"),p.User.set(s.UserData.getResetByShareTimes,0)):"tip"==t?(this.tipSuc(),p.User.set(s.UserData.getTipShareTimes,0)):"bore"==t?(l.Event.emit(n.default.boreBtn),p.User.set(s.UserData.getBoreByShareTimes,0)):"delayed"==t?p.User.set(s.UserData.getDelayedByShareTimes,0):"tip_timeEnd"==t?(l.Event.emit(n.default.restartAnswer),d.default.hide()):"addTime_timeEnd"==t?(l.Event.emit(n.default.extendTime),d.default.hide()):"bore_bore"==t?(l.Event.emit(n.default.boreBtn),d.default.hide()):"pause_answerBtn"==t&&(l.Event.emit(n.default.restartAnswer2),l.Event.emit(n.default.restoreTime),d.default.hide()),this.initShareView()},e.prototype.showHammerBtnVideo=function(){this.dict.hammerBtn.getChildByName("video").active=!0},e.prototype.switchMove5State=function(t){console.log("state",t),this.dict.move5Btn.active=t},e.prototype.restartAnswer=function(){var t=this;this.scheduleOnce(function(){cc.game.emit("onRestartBtn"),p.User.set(s.TempData.isUnlockTip,!0),t.isUnlockTip=!0,t.initTipView(),cc.game.emit("gamelog","page006"),d.default.show(a.PopupConst.TIP)},.3)},e.prototype.restartAnswer2=function(){var t=this;this.scheduleOnce(function(){p.User.set(s.TempData.isUnlockTip,!0),t.isUnlockTip=!0,t.initTipView(),cc.game.emit("gamelog","page006"),d.default.show(a.PopupConst.TIP)},.3)},e.prototype.tip_btn_anim=function(){},e.prototype.updateIsUnlockTip=function(){p.User.set(s.TempData.isUnlockTip,!1),this.isUnlockTip=!1,this.initTipView()},e.prototype.updateContent=function(){c.BMS.getKey("itemVideo")},e.prototype.initView=function(){var t=this;this.initSkipView(),p.User.getTempData(s.TempData.CURRENT_MODE),this.node.children.forEach(function(e,o){o!=t.node.childrenCount-1&&(e.active=!1)});var e=p.User.getTempData("cheats");h.Platform.is(r.EPlatform.WEB)||e?this.dict.hideText.active=!0:this.dict.hideText.active=!1,this.initShareView(),p.User.get(s.UserData.screwBoxInfinite)&&(this.dict.screwBoxTimesBg.active=!1,this.dict.screwBoxMask.active=!1),this.initSort(),this.initSlow(),this.initUnlockPos(),this.scheduleOnce(function(){t.startState=t.node.parent.getChildByName("collectRoot").active},1)},e.prototype.initSort=function(){},e.prototype.initSlow=function(){},e.prototype.initUnlockPos=function(){var t=y.default.get(_.default.UnlockPos)||0;this.dict.unlockPosRoot.active=!!t,this.dict.unlockPos.getComponent(cc.Label).string=""+t,this.dict.unlockPosBtn.getChildByName("video").active=!this.dict.unlockPosRoot.active},e.prototype.addBtnOn_=function(t,e,o){t.getComponent(cc.Button)||t.addComponent(cc.Button);var i=t.getComponent(cc.Button);i.transition=cc.Button.Transition.SCALE,i.duration=.1,i.zoomScale=1.2,t.on(cc.Node.EventType.TOUCH_END,function(){cc.game.emit("playClickAudio"),e.call(o)},this)},e.prototype.updateTodayShareOrVideoTimes=function(){this.initShareView()},e.prototype.initRestartView=function(){},e.prototype.initBackView=function(){p.User.getTempData(s.TempData.CURRENT_MODE);var t=p.User.get("backTimes")||0;t?(this.dict.chehuiVideoIcon.active=!1,this.dict.chehuiShareIcon.active=!1,this.dict.backTimes.active=!0,this.dict.backTimes.getComponent(cc.Label).string=""+t):(this.dict.backTimes.active=!1,this.isShare?(this.dict.chehuiShareIcon.active=!0,this.dict.chehuiVideoIcon.active=!1):(this.dict.chehuiVideoIcon.active=!0,this.dict.chehuiShareIcon.active=!1))},e.prototype.initShareView=function(){},e.prototype.showShareView=function(){this.dict.restartVideoIcon.active=!1,this.dict.chehuiVideoIcon.active=!1,this.dict.tipVideoIcon.active=!1,this.dict.boreVideoIcon.active=!1,this.dict.restartShareIcon.active=!0,this.dict.chehuiShareIcon.active=!0,this.dict.tipShareIcon.active=!0,this.dict.boreShareIcon.active=!0},e.prototype.initTipView=function(){},e.prototype.initBoreView=function(){if(0==p.User.getTempData(s.TempData.CURRENT_MODE)){var t=p.User.get(s.UserData.boreTimes)||0;t?(this.dict.boreVideoIcon.active=!1,this.dict.boreShareIcon.active=!1,this.dict.boreTimes.active=!0,this.dict.boreTimes.getComponent(cc.Label).string=""+Math.abs(t)):(this.dict.boreTimes.active=!1,this.isShare?(this.dict.boreVideoIcon.active=!1,this.dict.boreShareIcon.active=!0):(this.dict.boreVideoIcon.active=!0,this.dict.boreShareIcon.active=!1))}},e.prototype.initSkipView=function(){if(!p.User.getTempData(s.TempData.IS_WIN)){var t=p.User.get(s.UserData.KEY);this.dict.skipVideo.active=!(t>=2)}},e.prototype.clickKey=function(){p.User.getTempData(s.TempData.IS_WIN)||(cc.game.emit("gamelog","btn016"),h.Platform.showRewardAds(function(t){if(0==t){cc.game.emit("gamelog","rewarde_btn002");var e=p.User.get(s.UserData.KEY);p.User.set(s.UserData.KEY,e+1),l.Event.emit(n.default.KEY_EFFECT)}}))},e.prototype.timeEnd_answerBtn=function(){console.log("\u70b9\u51fb\u5206\u4eab"),p.User.setTempData("clickShare",!0),p.User.setTempData("shareReward","tip_timeEnd"),h.Platform.share()},e.prototype.timeEnd_addTime=function(){console.log("\u70b9\u51fb\u5206\u4eab"),p.User.setTempData("clickShare",!0),p.User.setTempData("shareReward","addTime_timeEnd"),h.Platform.share()},e.prototype.bore_bore=function(){console.log("\u70b9\u51fb\u5206\u4eab"),p.User.setTempData("clickShare",!0),p.User.setTempData("shareReward","bore_bore"),h.Platform.share()},e.prototype.pause_answerBtn=function(){console.log("\u70b9\u51fb\u5206\u4eab"),p.User.setTempData("clickShare",!0),p.User.setTempData("shareReward","pause_answerBtn"),h.Platform.share()},e.prototype.clickTip=function(t){var e=this;if(void 0===t&&(t="001"),this.isUnlockTip)return d.default.show(a.PopupConst.TIP);p.User.getTempData("isVideo")?h.Platform.showRewardAds(function(o){if(0==o){var i=p.User.get(s.UserData.todayShareOrVideoTimes)||0;p.User.set(s.UserData.todayShareOrVideoTimes,i+1),e.updateContent(),e.sucTip(),cc.game.emit("gamelog_Thinking",v.ShuShuConst.reward_btn,{id:t,lv:p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(s.TempData.CURRENT_MODE),sort:y.default.get(_.default.ConfigSuffix)})}}):(m.default.set(g.default.propIndex,1),d.default.show(a.PopupConst.Prop))},e.prototype.tipSuc=function(){p.User.set(s.TempData.isUnlockTip,!0),this.isUnlockTip=!0,this.initTipView(),cc.game.emit("gamelog","page006"),d.default.show(a.PopupConst.TIP)},e.prototype.clickTip_suc=function(){p.User.set(s.TempData.isUnlockTip,!0),this.isUnlockTip=!0,this.initTipView(),cc.game.emit("gamelog","page006"),d.default.show(a.PopupConst.TIP)},e.prototype.clickSkip=function(t){void 0===t&&(t="007"),cc.game.emit("gamelog","btn019"),this.dict.skipVideo.active?h.Platform.showRewardAds(function(t){if(0==t){p.User.setTempData("isNeedInsert",!1);var e=p.User.getTempData(s.TempData.CURRENT_LEVEL),o=p.User.getTempData(s.TempData.CURRENT_MODE);cc.game.emit("gamelog","Level_Skip_"+o+"_"+e),cc.game.emit("gamelog","rewarde_btn004"),cc.game.emit("game_success2")}}):d.default.show(a.PopupConst.SKIP)},e.prototype.hideText=function(){255==this.dict.hideText.opacity?(this.dict.hideText.opacity=0,this.dict.skipBtn.active=!1):(this.dict.hideText.opacity=255,this.dict.skipBtn.active=!0)},e.prototype.move5Btn=function(){h.Platform.showRewardAds(function(t){0==t&&(l.Event.emit(n.default.move5),cc.game.emit("gamelog_Thinking",v.ShuShuConst.reward_btn,{id:"003",lv:p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(s.TempData.CURRENT_MODE),sort:y.default.get(_.default.ConfigSuffix)}))})},__decorate([A([cc.SpriteFrame])],e.prototype,"videoOrAdd",void 0),__decorate([f.LimitRepeat(1)],e.prototype,"boreBtn",null),__decorate([w],e)}(i.default);o.default=k,cc._RF.pop()},{"./BaseUI":"BaseUI","./BmsManager":"BmsManager","./EventConst":"EventConst","./EventManager":"EventManager","./LanguageManager":"LanguageManager","./LimitRepeat":"LimitRepeat","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./MemoryStorageConst":"MemoryStorageConst","./MemoryStorageManager":"MemoryStorageManager","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./ShuShuConst":"ShuShuConst","./TipManager":"TipManager","./UserConst":"UserConst","./UserManager":"UserManager","./Utils":"Utils"}],BrainLevelBase:[function(t,e,o){"use strict";cc._RF.push(e,"2b60cgbWiBDl7ZezLD1/izT","BrainLevelBase");var i=t("./LevelConstant"),n=cc._decorator,r=n.ccclass,a=n.property,s=(n.executeInEditMode,n.executionOrder),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelID=-1,e.levelJSON=null,e.folder="",e.preloadAsset=!0,e.dict={},e.dgNode=null,e.cwNode=null,e.titleNode=null,e.isEnd=!1,e.useCoundDown=!0,e.useCountDown=!0,e.loadAssetCount=0,e.loadAssetTotal=0,e.assetAssignmentType=1,e.assetCaches=[],e.audioCaches=[],e.assetLoadTimer=null,e.currentImg=[],e.currentAudio=[],e}return __extends(e,t),e.prototype.onLoad=function(){this.onLevelInitial(),this.getDefaultNode(),this.setDefaultSpriteFrame(),this.setLevelAsset(),this.loadNodeTree(),this.onLevelLoad()},e.prototype.onEnable=function(){this.onLevelEnable()},e.prototype.start=function(){this.onLevelStart()},e.prototype.onDisable=function(){this.setCollisionManager(!1,!1),this.stopLevelAllSound(),this.clearDefaultSpriteFrame(),this.clearAssetCaches(),this.clearAudioCaches(),clearTimeout(this.assetLoadTimer),this.onLevelDisable()},e.prototype.onDestroy=function(){for(var t=0;t<this.currentAudio.length;t++)cc.assetManager.releaseAsset(this.currentAudio[t]);this.onLevelDestory()},e.prototype.lateUpdate=function(t){this.onLevelLateUpdate(t)},e.prototype.update=function(t){this.onLevelUpdate(t)},e.prototype.getDefaultNode=function(){this.cwNode=this.node.getChildByName("cw"),this.dgNode=this.node.getChildByName("dg"),this.titleNode=this.node.getChildByName("title")||this.node.getChildByName("lblTitle")},e.prototype.setDefaultSpriteFrame=function(){return __awaiter(this,void 0,Promise,function(){var t,e,o=this;return __generator(this,function(i){switch(i.label){case 0:return t=function(t,e){e&&(t.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e))},this.cwNode?cc.resources?(cc.resources.load("zqddn_zhb/level/cw",function(e,i){return __awaiter(o,void 0,void 0,function(){return __generator(this,function(o){switch(o.label){case 0:return e?[4,this.downloadSpriteFrame("texture/common/cw",".png")]:[3,2];case 1:i=o.sent(),o.label=2;case 2:return cc.isValid(this.cwNode)?(t(this.cwNode,i),[2]):[2]}})})}),[3,3]):[3,1]:[3,3];case 1:return[4,this.downloadSpriteFrame("texture/common/cw",".png")];case 2:e=i.sent(),t(this.cwNode,e),i.label=3;case 3:return this.dgNode?cc.resources?(cc.resources.load("zqddn_zhb/level/dg",function(e,i){return __awaiter(o,void 0,void 0,function(){return __generator(this,function(o){switch(o.label){case 0:return e?[4,this.downloadSpriteFrame("texture/common/dg",".png")]:[3,2];case 1:i=o.sent(),o.label=2;case 2:return cc.isValid(this.dgNode)?(t(this.dgNode,i),[2]):[2]}})})}),[3,6]):[3,4]:[3,6];case 4:return[4,this.downloadSpriteFrame("texture/common/dg",".png")];case 5:e=i.sent(),t(this.dgNode,e),i.label=6;case 6:return[2]}})})},e.prototype.clearDefaultSpriteFrame=function(){this.cwNode&&(this.cwNode.getComponent(cc.Sprite).spriteFrame=null),this.dgNode&&(this.dgNode.getComponent(cc.Sprite).spriteFrame=null)},e.prototype.clearAssetCaches=function(){this.assetCaches=[]},e.prototype.clearAudioCaches=function(){this.audioCaches=[]},e.prototype.setLevelAsset=function(){var t=this,e=function(e){t.loadAssetCount++,t.onLevelAssetsLoaded(e),t.loadAssetCount>=t.loadAssetTotal&&(t.assetLoadTimer=setTimeout(function(){t.onAssetLoadedAllFinishHandle(),t.onLevelAllAssetsLoaded(),t.onAssetAssignmentHandle(),t.onLevelReady()},0))};if(this.preloadAsset){var o=this.node.getChildByName("game");if(o){var n=function(o,n){return __awaiter(t,void 0,void 0,function(){var t,r,a,s,c,l,h,d=this;return __generator(this,function(u){switch(u.label){case 0:return t=function(t,o){return new Promise(function(i){return __awaiter(d,void 0,void 0,function(){var r,s,l,h,d,u;return __generator(this,function(p){switch(p.label){case 0:return p.trys.push([0,2,,3]),[4,this.downloadSpriteFrame(t,o)];case 1:return r=p.sent(),n&&cc.isValid(n.node)?(n instanceof cc.Sprite&&n.srcBlendFactor==cc.macro.BlendFactor.ONE&&r.setPremultiplyAlpha(!0),1!=c.length&&"one"==c[1]&&(n.srcBlendFactor=cc.macro.BlendFactor.ONE,r.setPremultiplyAlpha(!0)),s=new cc.SpriteFrame(r),1!=(l=c).length&&(h="one"==l[1]?2:1,d=["insetLeft","insetRight","insetTop","insetBottom"],l.forEach(function(t,e){return l[e+h]?s[d[e]]=Number(l[e+h]):null})),n instanceof cc.Mask&&n.node.setContentSize(r.width,r.height),n instanceof cc.MotionStreak&&(n.node.setContentSize(r.width,r.height),n.texture=r),1==this.assetAssignmentType?n.spriteFrame=s:2==this.assetAssignmentType&&this.assetCaches.push({t:1,c:n,a:s}),e(a),[2,i(!0)]):[2,i(!0)];case 2:return u=p.sent(),console.log(u),[2,i(!1)];case 3:return[2]}})})})},this.loadAssetTotal++,r=this.folder||""+this.levelID,a=o,2==(s=o.split(".")).length?(r="c"==s[0]?"common":s[0],a=s[1]):3==s.length&&("c"==s[0]&&(r="common/"+s[1]),a=s[2]),(c=a.split(",")).length>1&&(a=c[0]),0!=r.indexOf("common")&&(a=r+"_"+a),[4,t(l="texture/"+r+"/"+a,".png")];case 1:return(h=u.sent())?[3,3]:[4,t(l,".jpg")];case 2:h=u.sent(),u.label=3;case 3:return h||cc.game.emit(i.LEVEL_EVENT.GAME_ASSET_DOWNDOWN_FAIL),[2]}})})},r=function(o,n){return __awaiter(t,void 0,void 0,function(){var t,r,a,s,c,l,h,d,u,p,f,g;return __generator(this,function(m){switch(m.label){case 0:this.loadAssetTotal++,t=this.folder||""+this.levelID,r=o,2==(a=o.split(".")).length?(t="c"==a[0]?"common":a[0],r=a[1]):3==a.length&&("c"==a[0]&&(t="common/"+a[1]),r=a[2]),s=r.split(","),c=null,l="default",2==s.length?(c=s[1],r=s[0]):3==s.length&&(l=s[2],c=s[1],r=s[0]),h="spine/"+t+"/"+r,d="spine/"+t+"/"+r,u="spine/"+t+"/"+r,m.label=1;case 1:return m.trys.push([1,3,,4]),[4,this.downloadSpine(u,d,h,r)];case 2:return p=m.sent(),n&&cc.isValid(n.node)?(f=new sp.SkeletonData,p[0]?(f.skeletonJson=p[1],f.atlasText=p[0],f.textures=p[2],f.textureNames=p[3]):f=p[1],1==this.assetAssignmentType?(n.skeletonData=f,n.setSkin(l),n.defaultSkin=l,(c||f.getRuntimeData())&&(n.defaultAnimation=c||f.getRuntimeData().animations[0].name,n.setAnimation(0,c||f.getRuntimeData().animations[0].name,n.loop))):2==this.assetAssignmentType&&this.assetCaches.push({t:2,c:n,a:f,o:c,s:l}),e(r),[3,4]):[2];case 3:return g=m.sent(),console.log(g),cc.game.emit(i.LEVEL_EVENT.GAME_ASSET_DOWNDOWN_FAIL),[2];case 4:return[2]}})})};(function t(e){e.children.forEach(function(e){0!=e.children.length&&t(e);var o=e.getComponent(cc.Sprite);if(o&&o.enabled&&!o.spriteFrame)return n(e.name.split("=")[0],o);var i=e.getComponent(sp.Skeleton);if(i&&i.enabled&&!i.skeletonData)return r(e.name.split("=")[0],i);var a=e.getComponent(cc.Mask);if(a&&a.enabled&&a.type==cc.Mask.Type.IMAGE_STENCIL&&!a.spriteFrame)return n(e.name.split("=")[0],a);var s=e.getComponent(cc.MotionStreak);return s&&s.enabled&&!s.texture?n(e.name.split("=")[0],s):void 0})})(o),0==this.loadAssetTotal&&this.loadAssetCount==this.loadAssetTotal&&e("")}}else e(null)},e.prototype.downloadSpriteFrame=function(t,e){var o=this;return new Promise(function(n,r){i.ASSET_LOCAL_BUNDLE?cc.assetManager.loadBundle(i.ASSET_LOCAL_BUNDLE,function(e,o){if(e)return r(e);o.load(t,cc.Texture2D,function(t,e){if(t)return r(t);n(e)})}):(t+=e,t=""+o.getDomain()+t,cc.assetManager.loadRemote(t,function(t,e){if(t)return r(t);window.currentImg||(window.currentImg=[]),window.currentImg.push(e),n(e)}))})},e.prototype.downloadSpine=function(t,e,o,n){var r=this;return new Promise(function(a,s){i.ASSET_LOCAL_BUNDLE?cc.assetManager.loadBundle(i.ASSET_LOCAL_BUNDLE,function(t,o){if(t)return s(t);o.load(e,sp.SkeletonData,function(t,e){if(t)return s(t);a([null,e,null])})}):(t=""+r.getDomain()+t+".atlas",e=""+r.getDomain()+e+".json",cc.assetManager.loadAny([{url:t,ext:".txt"},{url:e,ext:".txt"}],function(t,e){return __awaiter(r,void 0,void 0,function(){var i,r,c,l,h,d,u;return __generator(this,function(p){switch(p.label){case 0:if(t)return[2,s(t)];for(i=!0,r=[];i;)-1==e[0].indexOf(""+n+(r.length?r.length+1:"")+".png")?i=!1:r.push(""+n+(r.length?r.length+1:""));c=o.substring(0,o.lastIndexOf("/")),l=r.map(function(t){return t+".png"}),r=r.map(function(t){return c+"/"+t}),h=[],p.label=1;case 1:return r.length?(d=r.shift(),[4,this.downloadSpriteFrame(d,".png")]):[3,3];case 2:return u=p.sent(),h.push(u),[3,1];case 3:return e.push(h),e.push(l),a(e),[2]}})})}))})},e.prototype.downloadAudio=function(t){var e=this;return new Promise(function(o,n){-1!=t.indexOf(i.domain)&&(t=t.substring(i.domain.length)),-1!=t.indexOf(i.domain_local)&&(t=t.substring(i.domain_local.length)),-1!=t.indexOf(".mp3")&&(t=t.substring(0,t.indexOf(".mp3"))),i.ASSET_LOCAL_BUNDLE?cc.assetManager.loadBundle(i.ASSET_LOCAL_BUNDLE,function(e,i){if(e)return n(e);i.load(t,cc.AudioClip,function(t,e){if(t)return n(t);o(e)})}):(t=""+e.getDomain()+t+".mp3",cc.assetManager.loadRemote(t,function(t,e){if(t)return n(t);o(e)}))})},e.prototype.loadNodeTree=function(){var t=this,e=this.node.getChildByName("game");if(e){this.dict[e.name]=e;var o=function e(o){o.children.forEach(function(o){if(0!=o.children.length&&e(o),-1==o.name.indexOf("copy")){var i=o.name.split("=");1!=i.length?(t.dict[i[1]]||(t.dict[i[1]]=o),o.name=i[1]):t.dict[o.name]||(t.dict[o.name]=o)}})};o(e);var i=this.node.getChildByName("temp");i&&(this.dict[i.name]=i,o(i))}},e.prototype.setPhysicsManager=function(t,e){void 0===e&&(e=0)},e.prototype.setCollisionManager=function(t,e){void 0===e&&(e=!1),(t||cc.director.getCollisionManager().enabled&&!t)&&(cc.director.getCollisionManager().enabled=t),(e||cc.director.getCollisionManager().enabledDebugDraw&&!e)&&(cc.director.getCollisionManager().enabledDebugDraw=e)},e.prototype.setAssetAssignmentType=function(t){void 0===t&&(t=1),this.assetAssignmentType=t},e.prototype.playRemoteSound=function(t,e,o){var i=this;return void 0===e&&(e=!1),void 0===o&&(o=1),new Promise(function(n){return __awaiter(i,void 0,void 0,function(){var i,r,a,s=this;return __generator(this,function(c){switch(c.label){case 0:this.audioCaches.push({url:t}),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.downloadAudio(t)];case 2:return i=c.sent(),cc.isValid(this.node)?(r=this.audioCaches.find(function(e){return e.url==t&&!e.id}))?(t.includes("bgm")||t.includes("Bgm")?window.musicMute&&(o=0):window.effectMute&&(o=0),a=cc.audioEngine.play(i,e,o),r.id=a,e||cc.audioEngine.setFinishCallback(a,function(){if(s.audioCaches){var t=s.audioCaches.findIndex(function(t){return t.id==a});-1!=t&&s.audioCaches.splice(t,1)}}),[2,n(a)]):[2,n(-1)]:[2];case 3:return c.sent(),n(-1),[3,4];case 4:return[2]}})})})},e.prototype.stopAudioByUrl=function(t){var e=this.audioCaches.find(function(e){return e.url===t&&e.id});if(e){cc.audioEngine.stop(e.id);var o=this.audioCaches.findIndex(function(o){return o.url===t&&o.id===e.id});-1!==o&&this.audioCaches.splice(o,1)}},e.prototype.playLevelSound=function(t,e,o){void 0===e&&(e=!1),void 0===o&&(o=1);var i=this.folder||""+this.levelID,n="audio/"+i+"/"+i+"_"+t;return this.playRemoteSound(n,e,o)},e.prototype.stopLevelSound=function(t){var e=this.folder||""+this.levelID,o="audio/"+e+"/"+e+"_"+t,i=this.audioCaches.findIndex(function(t){return t.url==o});if(-1!=i){var n=this.audioCaches.splice(i,1)[0];n&&n.id&&cc.audioEngine.stop(n.id)}},e.prototype.stopLevelAllSound=function(){this.audioCaches.length&&(this.audioCaches.forEach(function(t){cc.audioEngine.stop(t.id)}),this.audioCaches=[])},e.prototype.playClickSound=function(){return this.playRemoteSound(i.AUDIO_URL.CLICK)},e.prototype.playErrorOnce=function(t,e){if(void 0===e&&(e=1),t){var o=cc.v2(),n=cc.v2();t instanceof cc.Event.EventTouch?(o=t.getLocation(),n=this.cwNode.parent.convertToNodeSpaceAR(o)):t instanceof cc.Node?(o=cc.v2(t.parent.convertToWorldSpaceAR(t.position)),n=this.cwNode.parent.convertToNodeSpaceAR(o)):t instanceof cc.Event.EventTouch&&(n=cc.v2(t)),this.cwNode.setPosition(n)}this.cwNode.active=!0,this.cwNode.scale=0,this.cwNode.stopAllActions(),this.playRemoteSound(i.AUDIO_URL.ERROR),cc.tween(this.cwNode).to(.3,{scale:1}).delay(e).to(.3,{scale:0}).start()},e.prototype.playError=function(t,e){var o=this;if(void 0===e&&(e=1),!this.isEnd){if(this.isEnd=!0,t){var n=cc.v2(),r=cc.v2();t instanceof cc.Event.EventTouch?(n=t.getLocation(),r=this.cwNode.parent.convertToNodeSpaceAR(n)):t instanceof cc.Node?(n=cc.v2(t.parent.convertToWorldSpaceAR(t.position)),r=this.cwNode.parent.convertToNodeSpaceAR(n)):(t instanceof cc.Vec2||t instanceof cc.Vec3)&&(r=this.cwNode.parent.convertToNodeSpaceAR(t)),this.cwNode.setPosition(r)}this.cwNode.active=!0,this.cwNode.scale=0,this.cwNode.stopAllActions(),this.playRemoteSound(i.AUDIO_URL.ERROR),cc.tween(this.cwNode).to(.3,{scale:1}).delay(e).to(.3,{scale:0}).call(function(){o.gameError()}).start()}},e.prototype.playRightOnce=function(t,e){var o=this;if(void 0===e&&(e=1),t){var n=cc.v2(),r=cc.v2();t instanceof cc.Event.EventTouch?(n=t.getLocation(),r=this.dgNode.parent.convertToNodeSpaceAR(n)):t instanceof cc.Node?(n=cc.v2(t.parent.convertToWorldSpaceAR(t.position)),r=this.dgNode.parent.convertToNodeSpaceAR(n)):t instanceof cc.Event.EventTouch&&(r=cc.v2(t)),this.dgNode.setPosition(r)}this.dgNode.active=!0,this.dgNode.scale=0,this.dgNode.stopAllActions(),cc.tween(this.dgNode).delay(.3).call(function(){o.playRemoteSound(i.AUDIO_URL.RIGHT)}).to(.3,{scale:1},{easing:cc.easing.expoOut}).delay(e).to(.3,{scale:0}).start()},e.prototype.playRight=function(t,e){var o=this;if(void 0===e&&(e=1),!this.isEnd){if(this.isEnd=!0,t){var n=cc.v2(),r=cc.v2();t instanceof cc.Event.EventTouch?(n=t.getLocation(),r=this.dgNode.parent.convertToNodeSpaceAR(n)):t instanceof cc.Node?(n=cc.v2(t.parent.convertToWorldSpaceAR(t.position)),r=this.dgNode.parent.convertToNodeSpaceAR(n)):t instanceof cc.Event.EventTouch&&(r=cc.v2(t)),this.dgNode.setPosition(r)}this.dgNode.active=!0,this.dgNode.scale=0,this.dgNode.stopAllActions(),cc.tween(this.dgNode).delay(.3).call(function(){o.playRemoteSound(i.AUDIO_URL.RIGHT)}).to(.3,{scale:1},{easing:cc.easing.expoOut}).delay(e).call(function(){o.gameRight()}).start()}},e.prototype.gameError=function(){cc.game.emit("onRestartBtn")},e.prototype.gameRight=function(){cc.game.emit("game_success1"),cc.game.emit("game_success2")},e.prototype.getDomain=function(){return i.domain},e.prototype.onAssetAssignmentHandle=function(){2==this.assetAssignmentType&&this.assetCaches.length&&cc.isValid(this.node,!0)&&this.assetCaches.forEach(function(t){cc.isValid(t.c.node)&&(1==t.t?t.c.spriteFrame=t.a:2==t.t&&(t.c.skeletonData=t.a,t.c.setSkin(t.s),(t.o||t.a.getRuntimeData())&&(t.c.defaultAnimation=t.o||t.a.getRuntimeData().animations[0].name,t.c.setAnimation(0,t.o||t.a.getRuntimeData().animations[0].name,t.c.loop))))})},e.prototype.onLevelInitial=function(){},e.prototype.onLevelUpdate=function(){},e.prototype.onLevelLateUpdate=function(){},e.prototype.onLevelLoad=function(){},e.prototype.onLevelEnable=function(){},e.prototype.onLevelStart=function(){},e.prototype.onLevelReady=function(){},e.prototype.onLevelDisable=function(){},e.prototype.onLevelDestory=function(){},e.prototype.onLevelAssetsLoaded=function(){},e.prototype.onLevelAllAssetsLoaded=function(){},e.prototype.onLevelReadyOnEditor=function(){},e.prototype.onAssetLoadedAllFinishHandle=function(){},__decorate([a({tooltip:"\u5173\u5361ID"})],e.prototype,"levelID",void 0),__decorate([a({type:cc.JsonAsset,tooltip:"\u5173\u5361JSON"})],e.prototype,"levelJSON",void 0),__decorate([a({tooltip:"\u8d44\u6e90\u8fdc\u7a0b\u6587\u4ef6\u5939\u540d\u5b57(\u82e5\u65e0\u5219\u4e3a\u5173\u5361ID)"})],e.prototype,"folder",void 0),__decorate([a({displayName:"\u662f\u5426\u52a0\u8f7d\u8fdc\u7a0b\u8d44\u6e90"})],e.prototype,"preloadAsset",void 0),__decorate([r,s(-1)],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./LevelConstant":"LevelConstant"}],BrainLevelTips:[function(t,e,o){"use strict";cc._RF.push(e,"dccdej6X9tPY4wPiS7pHujm","BrainLevelTips");var i=t("./LevelConstant"),n=cc._decorator,r=n.ccclass,a=n.property,s=n.executeInEditMode,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.folder="",e.tipsSize=cc.v2(650,650),e.assetName=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this.node.getChildByName("node")||this.node.children[0],e=this.tipsSize.x/t.width,o=this.tipsSize.y/t.height;t.scale=Math.min(o,e),this.autoSetAssetName(),this.setLevelAsset()},e.prototype.onDestroy=function(){},e.prototype.autoSetAssetName=function(){var t=this.assetName||this.node.assetName;if(t){switch(!0){case Number(t)<-2e4:this.folder="cf20000"}this.node.children[0].name=""+t}},e.prototype.setLevelAsset=function(){var t=this,e=this.node;if(e){var o=function(e,o){return __awaiter(t,void 0,void 0,function(){var t,i,n,r,a=this;return __generator(this,function(s){switch(s.label){case 0:return t=function(t,e){return new Promise(function(i){return __awaiter(a,void 0,void 0,function(){var n,r,a,s,c;return __generator(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,this.downloadSpriteFrame(t,e)];case 1:return n=l.sent(),o&&cc.isValid(o.node)?(o.spriteFrame=new cc.SpriteFrame(n),this.tipsSize.equals(cc.v2())?(r=this.node.getChildByName("node")||this.node.children[0])&&(a=r.width/o.node.width,s=r.height/o.node.height,o.node.scale=Math.min(s,a)):(a=this.tipsSize.x/o.node.width,s=this.tipsSize.y/o.node.height,o.node.scale=Math.min(s,a)),[2,i(!0)]):[2,i(!0)];case 2:return c=l.sent(),console.log(c),[2,i(!1)];case 3:return[2]}})})})},i=this.folder,(n=e.split(".")).length>1&&(i="c"==n[0]?"common":n[0]),[4,t(r="tips/"+i+"/"+e,".png")];case 1:return s.sent()||t(r,".jpg"),[2]}})})};(function t(e){e.children.forEach(function(e){0!=e.children.length&&t(e);var i=e.getComponent(cc.Sprite);if(i&&i.enabled&&!i.spriteFrame)return o(e.name.split("=")[0],i)})})(e)}},e.prototype.downloadSpriteFrame=function(t,e){var o=this;return new Promise(function(n,r){i.ASSET_LOCAL_BUNDLE?cc.assetManager.loadBundle(i.ASSET_LOCAL_BUNDLE,function(e,o){if(e)return r(e);o.load(t,cc.Texture2D,function(t,e){if(t)return r(t);n(e)})}):(t+=e,t=""+o.getDomain()+t,cc.assetManager.loadRemote(t,{maxRetryCount:1,retryInterval:100},function(t,e){if(t)return r(t);n(e)}))})},e.prototype.getDomain=function(){return i.domain},__decorate([a({tooltip:"\u8d44\u6e90\u8fdc\u7a0b\u6587\u4ef6\u5939\u540d\u5b57(\u82e5\u65e0\u5219\u4e3a\u5173\u5361ID)"})],e.prototype,"folder",void 0),__decorate([r,s],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./LevelConstant":"LevelConstant"}],CardShop:[function(t,e,o){"use strict";cc._RF.push(e,"573742yLehJ3q+kBTXIotLM","CardShop");var i=t("./SceneConst"),n=t("./UIBase"),r=t("./LocalStorageConst"),a=t("./LocalStorageManager"),s=t("./MemoryStorageConst"),c=t("./MemoryStorageManager"),l=t("./BmsManager"),h=t("./LanguageManager"),d=t("./PlatformManager"),u=t("./SceneManager"),p=t("./TipManager"),f=t("./UserManager"),g=t("./PaymentSystem"),m=t("./ShuShuConst"),v=cc._decorator,y=v.ccclass,_=(v.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isLoadingScene=!1,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.node.setContentSize(cc.winSize),this.localStorageUIData[r.default.cardAmount]=this.updateCardAmount.bind(this),this.localStorageUIData[r.default.isNoAD]=this.updateNoAD.bind(this),this.localStorageUIData[r.default.starter_pack]=this.updatestarter_pack.bind(this),this.memoryStorageUIData[s.default.isVIP]=this.updateIsVIP.bind(this),this.addBtnOn("backBtn",this.backBtn,this),this.addBtnOn("noADBtn0",this.buyBtn.bind(this,"remove_ads_pack"),this),this.addBtnOn("noADBtn1",this.buyBtn.bind(this,"remove_ads"),this),this.addBtnOn("cardBtn0",this.buyBtn.bind(this,"small_st"),this),this.addBtnOn("cardBtn1",this.buyBtn.bind(this,"medium_st"),this),this.addBtnOn("cardBtn2",this.buyBtn.bind(this,"big_st"),this),this.addBtnOn("cardBtn3",this.buyBtn.bind(this,"huge_st"),this),this.addBtnOn("cardBtn4",this.buyBtn.bind(this,"mega_st"),this),this.addBtnOn("cardBtn5",this.buyBtn.bind(this,"brilliant_st"),this),this.addBtnOn("cardBtn6",this.cardBtn6,this),this.addBtnOn("newHandBtn",this.newHandBtn,this),this.addBtnOn("vipBtn0",this.buyBtn_vip.bind(this,"day_vip_3"),this),this.addBtnOn("vipBtn1",this.buyBtn_vip.bind(this,"day_vip_7"),this),this.addBtnOn("vipBtn2",this.buyBtn_vip.bind(this,"day_vip_30"),this),this.initView()},e.prototype.updateNoAD=function(t){t&&(this.dict.noADTitleRoot.active=!1,this.dict.noADRoot.active=!1)},e.prototype.updatestarter_pack=function(t){this.dict.newHandRoot.active=!t,this.dict.newHandTitleRoot.active=!t},e.prototype.updateIsVIP=function(t){t&&(this.dict.vipBtn0.color=cc.Color.GRAY,this.dict.vipBtn1.color=cc.Color.GRAY,this.dict.vipBtn2.color=cc.Color.GRAY)},e.prototype.initView=function(){cc.view.getFrameSize().width/cc.view.getFrameSize().height<.5&&(this.dict.scrollView.getComponent(cc.Widget).bottom=150,this.dict.scrollView.getComponent(cc.Widget).updateAlignment()),this.dict.view.getComponent(cc.Mask).enabled=!0,this.dict.skin.getComponent(cc.Label).string=h.default.formatStr("\u83b7\u5f97\u76ae\u80a4\uff1a%s","\u7535\u97f3\u9489"),this.dict.newHandSkin.getComponent(cc.Label).string=h.default.formatStr("\u83b7\u5f97\u76ae\u80a4\uff1a%s","\u706b\u9f99\u679c"),this.dict.vipTitle.active=!!d.Platform.getConfig().hasVIP,this.dict.vipRoot.active=!!d.Platform.getConfig().hasVIP,cc.game.emit("gamelog_Thinking",m.ShuShuConst.Gift_page,{id:5});for(var t=["small_st","medium_st","big_st","huge_st","mega_st","brilliant_st"],e=0;e<this.dict.cardRoot.children[0].children.length;e++){var o=this.dict.cardRoot.children[0].children[e].getChildByName("money"),i=t[e];g.default.getGoodsLocalPrice(o,i)}var n=["day_vip_3","day_vip_7","day_vip_30"];for(e=0;e<this.dict.vipRoot.children[0].children.length;e++)o=this.dict.vipRoot.children[0].children[e].getChildByName("money"),i=n[e],g.default.getGoodsLocalPrice(o,i);g.default.getGoodsLocalPrice(this.dict.newHandMoney,"starter_pack"),g.default.getGoodsLocalPrice(this.dict.noADMoney,"remove_ads_pack")},e.prototype.updateCardAmount=function(t){this.dict.cardAmount.getComponent(cc.Label).string=""+t},e.prototype.backBtn=function(){this.isLoadingScene||(this.isLoadingScene=!0,u.default.loadScene(i.SceneConst.Home))},e.prototype.buyBtn=function(t){g.default.clickBuy(t)},e.prototype.cardBtn6=function(){var t=f.User.get("coin")||0;t>=1e3?(cc.game.emit("gamelog_Thinking",m.ShuShuConst.Activity_get,{id:6}),p.Tip.show(h.default.formatStr("\u5151\u6362\u6210\u529f\uff01")),f.User.set("coin",t-1e3),cc.game.emit("update_coin"),this.cardReward(2)):p.Tip.show(h.default.formatStr("\u91d1\u5e01\u4e0d\u8db3\uff01"))},e.prototype.newHandBtn=function(){g.default.clickBuy("starter_pack")},e.prototype.cardReward=function(t){var e=(a.default.get(r.default.cardAmount)||0)+t;a.default.set(r.default.cardAmount,e),this.saveServerData(r.default.cardAmount,e)},e.prototype.saveServerData=function(t,e){e=e.toString(),l.BMS.saveServerData(d.Platform.getConfig().flag,f.User.get("googleID")||f.User.get("uuid"),t,e).then(function(){console.log("\u4fdd\u5b58"+t+"\u6210\u529f:"+e)})},e.prototype.buyBtn_vip=function(t){if(c.default.get(s.default.isVIP))return p.Tip.show(h.default.formatStr("\u60a8\u5df2\u662f\u5c0a\u8d35\u7684VIP"));g.default.subscribeBuy(t)},__decorate([y],e)}(n.default));o.default=_,cc._RF.pop()},{"./BmsManager":"BmsManager","./LanguageManager":"LanguageManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./MemoryStorageConst":"MemoryStorageConst","./MemoryStorageManager":"MemoryStorageManager","./PaymentSystem":"PaymentSystem","./PlatformManager":"PlatformManager","./SceneConst":"SceneConst","./SceneManager":"SceneManager","./ShuShuConst":"ShuShuConst","./TipManager":"TipManager","./UIBase":"UIBase","./UserManager":"UserManager"}],ChallengeHttp:[function(t,e,o){"use strict";cc._RF.push(e,"e05fcG+euBPNZPaWNAB54S2","ChallengeHttp"),o.challengeHttp=void 0;var i=t("./PlatformManager"),n=t("./MD5Type"),r=function(){function t(){}return t.prototype.getCountry=function(t){var e=this;return void 0===t&&(t=!1),new Promise(function(o){return __awaiter(e,void 0,void 0,function(){var e,i,n,r,a;return __generator(this,function(s){switch(s.label){case 0:return[4,Promise.resolve()];case 1:s.sent();try{e={code:0,msg:"\u6210\u529f",data:{is_enable:1,info:{ip_address:"",global:"\u4e9a\u6d32",nation:"\u4e2d\u56fd",nation_name_en:"CHINA",nation_name_en_abbr:"CN",province:"",city:"",district:"",isp:"",adcode:"",gps:""},ip:""}},o(t?(null===(n=null===(i=e.data)||void 0===i?void 0:i.info)||void 0===n?void 0:n.nation_name_en_abbr)||"Other":(null===(a=null===(r=e.data)||void 0===r?void 0:r.info)||void 0===a?void 0:a.province)||"\u5176\u4ed6")}catch(c){o(t?"Other":"\u5176\u4ed6")}return[2]}})})})},t.prototype.getRank=function(t,e){var o=this;return void 0===e&&(e="1"),new Promise(function(t){return __awaiter(o,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,Promise.resolve()];case 1:e.sent();try{t({list:{"\u5e7f\u4e1c":{seq:1,score:602},"\u6e56\u5317":{seq:2,score:580},"\u5c71\u4e1c":{seq:3,score:407},"\u6cb3\u5317":{seq:4,score:398},"\u6cb3\u5357":{seq:5,score:394},"\u6c5f\u82cf":{seq:6,score:383},"\u5b89\u5fbd":{seq:7,score:175},"\u5e7f\u897f":{seq:8,score:164},"\u798f\u5efa":{seq:9,score:151},"\u56db\u5ddd":{seq:10,score:127},"\u5317\u4eac":{seq:11,score:112},"\u5409\u6797":{seq:12,score:103},"\u6c5f\u897f":{seq:13,score:91},"\u6d59\u6c5f":{seq:14,score:75},"\u6e56\u5357":{seq:15,score:66},"\u5929\u6d25":{seq:16,score:65},"\u5c71\u897f":{seq:17,score:63},"\u8d35\u5dde":{seq:18,score:61},"\u6d77\u5357":{seq:19,score:45},"\u9655\u897f":{seq:20,score:38},"\u5185\u8499\u53e4":{seq:21,score:38},"\u91cd\u5e86":{seq:22,score:35},"\u8fbd\u5b81":{seq:23,score:21},"\u4e91\u5357":{seq:24,score:16},"\u9ed1\u9f99\u6c5f":{seq:25,score:14},"\u5176\u4ed6":{seq:26,score:12},"\u7518\u8083":{seq:27,score:6},"\u65b0\u7586":{seq:28,score:4},"\u4e0a\u6d77":{seq:29,score:2}},total:29})}catch(o){t({list:[],total:0})}return[2]}})})})},t.prototype.setRank=function(t,e,o){var n=this;return new Promise(function(r){return __awaiter(n,void 0,void 0,function(){var n,a,s;return __generator(this,function(c){switch(c.label){case 0:return(n={app_name:i.Platform.getConfig().flag,rank_name:t,key:e,score:o,timestamp:Math.floor((new Date).getTime()/1e3),nonce:this.randomString(32)}).sign=this.getSign(n),[4,this.post("https://op-data.zuiqiangyingyu.net//common/rank/set-score",n)];case 1:a=c.sent();try{s=JSON.parse(a),r(s.data)}catch(l){r({list:[],total:0})}return[2]}})})})},t.prototype.incrRank=function(){return Promise.resolve()},t.prototype.getServerTime=function(){var t=this;return new Promise(function(e){return __awaiter(t,void 0,void 0,function(){var t,o;return __generator(this,function(i){switch(i.label){case 0:return[4,this.get("https://game.zuiqiangyingyu.net//common/common/time",{})];case 1:t=i.sent();try{o=JSON.parse(t),e(o.data&&o.data.date_time||(new Date).toString())}catch(n){e((new Date).toString())}return[2]}})})})},t.prototype.randomString=function(t){t=t||32;for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyzoOLl9gqVvUuI12345678_",o=e.length,i="",n=0;n<t;n++)i+=e.charAt(Math.floor(Math.random()*o));return i},t.prototype.getSign=function(t){var e=[];for(var o in t)e.push(o);e=e.sort();var i="";return e.forEach(function(o,n){i+=o+"="+t[o]+(n==e.length-1?"":"&")}),i+="VuFFap7NHJA70M9xWb9fSQcdVtivPY4E",(new n.Md5).md5(i)},t.prototype.formatPostData=function(t){var e=[];for(var o in t)e.push(o);e=e.sort();var i="";return e.forEach(function(o,n){i+=o+"="+t[o]+(n==e.length-1?"":"&")}),i},t.prototype.get=function(t,e){return new Promise(function(o){for(var i in t+="?",e)t+=i+"="+e[i]+"&";var n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&(n.status>=200&&n.status<400?o(n.response):o(null))},n.open("GET",t),n.send(),n.onerror=function(){o(null)},n.ontimeout=function(){o(null)}})},t.prototype.post=function(t,e){var o=this;return new Promise(function(i){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&(n.status>=200&&n.status<400?i(n.response):i(null))},n.open("POST",t),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(o.formatPostData(e)),n.onerror=function(){i(null)},n.ontimeout=function(){i(null)}})},t.prototype.request=function(t,e,o){switch(t){case"GET":return this.get(e,o);case"POST":return this.post(e,o)}},t}();o.challengeHttp=new r,cc._RF.pop()},{"./MD5Type":"MD5Type","./PlatformManager":"PlatformManager"}],ChallengeItem:[function(t,e,o){"use strict";var i;cc._RF.push(e,"f8e83zomDBLS6q0Olc8AyGo","ChallengeItem");var n,r=t("./PopupConst"),a=t("./UIBase"),s=t("./LocalStorageConst"),c=t("./LocalStorageManager"),l=t("./MemoryStorageConst"),h=t("./MemoryStorageManager"),d=t("./BmsManager"),u=t("./PlatformManager"),p=t("./PopupManager"),f=t("./UserManager"),g=t("./ShuShuConst"),m=cc._decorator,v=m.ccclass,y=m.property;(n=i||(i={}))[n.Normal=0]="Normal",n[n.Finish=1]="Finish",n[n.Lock=2]="Lock";var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelSpriteFrame=[],e.param=null,e.state=null,e.starAmount=0,e.skinNameArr=[],e.free=[],e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.setData=function(t){this.param=t,this.node.zIndex=this.param.index,this.free=JSON.parse(this.param.type.free),this.refresh()},e.prototype.refresh=function(){this.dict.container.color=cc.Color.GRAY,this.dict.icon.color=cc.Color.GRAY,this.dict.card.color=cc.Color.GRAY,this.dict.amount.color=cc.Color.GRAY,this.dict.fill.active=!1,this.dict.yesBtn.active=!1,this.dict.gou.active=!1,this.dict.lock.active=!0,this.dict.card.active=!1,this.dict.levelSprite.getComponent(cc.Sprite).spriteFrame=this.levelSpriteFrame[1],this.dict.level.color=cc.Color.WHITE,this.param.index%2==0?this.dict.bg.color=(new cc.Color).fromHEX("#f3e0ac"):this.dict.bg.color=(new cc.Color).fromHEX("#FEEFC6");var t=c.default.get(s.default.challengeReceive)||[];(c.default.get(s.default.challengeUnlockAmount)||0)>=this.param.index+1&&(this.dict.fill.active=!0,this.dict.container.color=cc.Color.WHITE,this.dict.icon.color=cc.Color.WHITE,this.dict.amount.color=cc.Color.WHITE,this.dict.card.color=cc.Color.WHITE,this.dict.lock.active=!1,this.dict.levelSprite.getComponent(cc.Sprite).spriteFrame=this.levelSpriteFrame[0],this.dict.level.color=cc.Color.WHITE,t.includes(this.param.index+1)?this.dict.gou.active=!0:(this.dict.yesBtn.active=!0,this.dict.fill.active=!0)),this.dict.level.getComponent(cc.Label).string=""+(this.param.index+1),1==this.free[0]?(this.dict.amount.getComponent(cc.Label).string="x"+this.free[1],this.dict.card.active=!1):(this.dict.amount.getComponent(cc.Label).string="x"+this.free[1],this.dict.card.active=!0)},e.prototype.clickEnter=function(){var t=c.default.get(s.default.challengeReceive)||[];t.push(this.param.index+1),c.default.set(s.default.challengeReceive,t),this.refresh(),2==this.free[0]?(this.cardReward(this.free[1]),h.default.set(l.default.reward,[["card",this.free[1]]])):(this.coinReward(this.free[1]),h.default.set(l.default.reward,[["coin",this.free[1]]])),cc.game.emit("gamelog_Thinking",g.ShuShuConst.Activity_get,{id:5}),p.default.show(r.PopupConst.Get)},e.prototype.cardReward=function(t){var e=(c.default.get(s.default.cardAmount)||0)+t;c.default.set(s.default.cardAmount,e),this.saveServerData(s.default.cardAmount,e)},e.prototype.coinReward=function(t){var e=(f.User.get("coin")||0)+t;f.User.set("coin",e),cc.game.emit("updateCoin"),this.saveServerData("coin",e)},e.prototype.saveServerData=function(t,e){e=e.toString(),d.BMS.saveServerData(u.Platform.getConfig().flag,f.User.get("googleID")||f.User.get("uuid"),t,e).then(function(){console.log("\u4fdd\u5b58"+t+"\u6210\u529f:"+e)})},e.state=i,__decorate([y([cc.SpriteFrame])],e.prototype,"levelSpriteFrame",void 0),__decorate([v],e)}(a.default);o.default=_,cc._RF.pop()},{"./BmsManager":"BmsManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./MemoryStorageConst":"MemoryStorageConst","./MemoryStorageManager":"MemoryStorageManager","./PlatformManager":"PlatformManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./ShuShuConst":"ShuShuConst","./UIBase":"UIBase","./UserManager":"UserManager"}],ChallengeSystem:[function(t,e,o){"use strict";cc._RF.push(e,"e5e5dwYToVAEK9YeCPb25/3","ChallengeSystem");var i=t("./LocalStorageConst"),n=t("./LocalStorageManager"),r=t("./TimeManager"),a=t("./LanguageManager"),s=new(function(){function t(){this.durationDay=3,this.isOpen=!1,this.surplusTime=0}return t.prototype.init=function(){var t=n.default.get(i.default.challengeStartTime)||0;if(t){var e=r.default.getCurrentTime();this.surplusTime=864e5*this.durationDay-(e-t),this.surplusTime>0?(this.isOpen=!0,r.default.addEventListener(this.timerFun.bind(this))):this.expire()}else n.default.set(i.default.challengeStartTime,0)},t.prototype.expire=function(){n.default.set(i.default.challengeStartTime,0),n.default.set(i.default.challengeUnlockAmount,0),n.default.set(i.default.challengeReceive,[])},t.prototype.timerFun=function(){this.surplusTime-=1e3,cc.game.emit("challengeExpire_timerFun"),this.surplusTime<=0&&(this.expire(),console.log("\u6781\u9650\u6311\u6218\u7cfb\u7edf\u5230\u671f"),cc.game.emit("challengeExpire"),r.default.removeEventListener(this.timerFun.bind(this)))},t.prototype.getSurplusTimeStr=function(){var t=Math.floor(this.surplusTime/1e3/86400),e=Math.floor(this.surplusTime/1e3%86400/3600),o=Math.floor(this.surplusTime/1e3%3600/60);return a.default.formatStr("%d\u5929%d\u65f6%d\u5206",t,e,o)},t}());o.default=s,cc._RF.pop()},{"./LanguageManager":"LanguageManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./TimeManager":"TimeManager"}],Cheats:[function(t,e,o){"use strict";cc._RF.push(e,"fe517Pb0PZMkrsK875Sm2BT","Cheats");var i=t("./BaseUI"),n=t("./PlatformManager"),r=t("./PopupManager"),a=t("./TipManager"),s=t("./UserManager"),c=t("./DebugManager"),l=cc._decorator,h=l.ccclass,d=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noAdBtn",this.clickNoAd,this),this.addBtnOn("unlockBtn",this.clickUnlock,this),this.addBtnOn("close",this.clickClose,this),this.addBtnOn("gmBtn",this.gmBtn,this),this.addBtnOn("clear",this.clear,this),this.addBtnOn("openLog",this.openLog,this),s.User.setTempData("cheats",!0)},e.prototype.clickUnlock=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2]})})},e.prototype.clickNoAd=function(){n.Platform.setNoAd(!0),a.Tip.show("\u6210\u529f\u53bb\u5e7f\u544a\uff01")},e.prototype.clickClose=function(){r.default.hide()},e.prototype.gmBtn=function(){a.Tip.show("\u6253\u5f00debug"),n.Platform.showAdDebugger(),this.clickClose()},e.prototype.clear=function(){a.Tip.show("\u6e05\u9664\u6570\u636e"),cc.sys.localStorage.clear()},e.prototype.openLog=function(){a.Tip.show("\u6210\u529f"),c.default.init()},__decorate([h],e)}(i.default));o.default=d,cc._RF.pop()},{"./BaseUI":"BaseUI","./DebugManager":"DebugManager","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager","./TipManager":"TipManager","./UserManager":"UserManager"}],Coin:[function(t,e,o){"use strict";cc._RF.push(e,"7016b+e7PJOu54morQmQ51Y","Coin");var i=t("./UIBase"),n=t("./LocalStorageConst"),r=t("./LocalStorageManager"),a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this);var e=r.default.get(n.default.Coin)||0;r.default.set(n.default.Coin,e),this.localStorageUIData[n.default.Coin]=this.updateCoin.bind(this)},e.prototype.updateCoin=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return this.dict.amount.getComponent(cc.Label).string=""+t,[2]})})},e.prototype.clickSelf=function(){},__decorate([s],e)}(i.default));o.default=c,cc._RF.pop()},{"./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./UIBase":"UIBase"}],CollectItem:[function(t,e,o){"use strict";cc._RF.push(e,"3de515pTKFCiKfRx2w7i95Q","CollectItem");var i=t("./ConfigConst"),n=t("./ConfigManager"),r=t("./TipManager"),a=t("./BaseUICtrl"),s=t("./LocalStorageConst"),c=t("./LocalStorageManager"),l=t("./AssetManager"),h=cc._decorator,d=h.ccclass,u=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.param=null,e.goodsIndex=0,e.goodsType=0,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.setData=function(t){this.param=t,this.node.zIndex=this.param.index,this.goodsIndex=this.param.index,this.refresh()},e.prototype.refresh=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return[4,l.default.getRes("gameBundle","texture/collect/"+this.param.goodsID,cc.Texture2D)];case 1:return t=e.sent(),this.dict.icon.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),this.dict.id0.getComponent(cc.Label).string=this.param.goodsID,this.dict.id1.getComponent(cc.Label).string=this.param.goodsID,this.dict.name.getComponent(cc.Label).string=this.param.goodsName,(c.default.get(s.default.Collect)||{0:[]})[this.goodsType].includes(this.param.goodsID)?(this.dict.state0.active=!1,this.dict.state1.active=!0,this.dict.icon.getComponent(cc.Button).interactable=!0,this.dict.icon.getComponent(cc.Button).enableAutoGrayEffect=!1):(this.dict.state0.active=!0,this.dict.state1.active=!1,this.dict.icon.getComponent(cc.Button).interactable=!1,this.dict.icon.getComponent(cc.Button).enableAutoGrayEffect=!0),[2]}})})},e.prototype.clickEnter=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o=this;return __generator(this,function(a){switch(a.label){case 0:return[4,n.Config.get(i.ConfigConst.Collect)];case 1:return t=a.sent(),e=t.find(function(t){return t.id==o.param.index+1}).id+1,this.dict.state1.active||r.Tip.show("\u901a\u8fc7\u7b2c"+e+"\u5173\u53ef\u83b7\u5f97"),[2]}})})},__decorate([d],e)}(a.default));o.default=u,cc._RF.pop()},{"./AssetManager":"AssetManager","./BaseUICtrl":"BaseUICtrl","./ConfigConst":"ConfigConst","./ConfigManager":"ConfigManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./TipManager":"TipManager"}],Collect:[function(t,e,o){"use strict";cc._RF.push(e,"60ba6IkN6JCPKX02jGfuNqd","Collect");var i=t("./ConfigConst"),n=t("./ConfigManager"),r=t("./LanguageManager"),a=t("./PopupManager"),s=t("./BaseUICtrl"),c=t("./DynamicScroll"),l=t("./LocalStorageConst"),h=t("./LocalStorageManager"),d=t("./CollectItem"),u=cc._decorator,p=u.ccclass,f=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentPage=0,e.currentChooseID=0,e.goodsType=0,e.collectConfig=null,e.scroll=null,e.collectData=[],e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.node.setContentSize(cc.winSize),this.initData(),this.localStorageUIData[l.default.Collect]=this.updateCollect.bind(this),this.initView()},e.prototype.initData=function(){this.collectConfig=h.default.get(l.default.Collect)||{0:[]},h.default.set(l.default.Collect,this.collectConfig)},e.prototype.initView=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return this.scroll=this.dict.scrollView.getComponent(c.default),this.scroll.onItemRender=this.onItemRender.bind(this),this.scroll.onItemClicked=this.onItemClicked.bind(this),t=this,[4,n.Config.get(i.ConfigConst.Collect)];case 1:return t.collectData=e.sent(),this.scroll.numItems=this.collectData.length,this.dict.progress.getComponent(cc.Label).string=r.default.formatStr("\u5f53\u524d\u6536\u96c6\u8fdb\u5ea6%s",this.collectConfig[0].length+" / "+this.collectData.length),[2]}})})},e.prototype.onItemRender=function(t,e){var o=e.getComponent(d.default),i={index:t,goodsID:this.collectData[t].goodsID,goodsName:this.collectData[t].goodsName};o.setData(i)},e.prototype.onItemClicked=function(){},e.prototype.updateCollect=function(){},e.prototype.noBtn=function(){a.default.hide()},__decorate([p],e)}(s.default));o.default=f,cc._RF.pop()},{"./BaseUICtrl":"BaseUICtrl","./CollectItem":"CollectItem","./ConfigConst":"ConfigConst","./ConfigManager":"ConfigManager","./DynamicScroll":"DynamicScroll","./LanguageManager":"LanguageManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./PopupManager":"PopupManager"}],Collision:[function(t,e,o){"use strict";cc._RF.push(e,"e4499wSYcBNuLBL8Krzrson","Collision");var i=cc._decorator,n=i.ccclass,r=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0},e.prototype.onCollisionEnter=function(){},e.prototype.onCollisionStay=function(){},e.prototype.onCollisionExit=function(){},__decorate([n],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],CommentNew:[function(t,e,o){"use strict";cc._RF.push(e,"34aaeiApPFPe4VbkcMFQKnw","CommentNew");var i=cc._decorator,n=i.ccclass,r=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fullStart=null,e.emptyStart=null,e.closeBtn=null,e.startRoot=null,e.submitBtn=null,e._data=null,e.startCount=0,e}return __extends(e,t),e.prototype.closeBtn_te=function(t){t.stopPropagation(),this._data&&this._data.cb&&this._data.cb()},e.prototype.submitBtn_te=function(t){t.stopPropagation(),this.onOkBtn(t)},e.prototype.onLoad=function(){this.closeBtn.on(cc.Node.EventType.TOUCH_END,this.closeBtn_te,this),this.submitBtn.on(cc.Node.EventType.TOUCH_END,this.submitBtn_te,this)},e.prototype.onEnable=function(){this.startCount=0},e.prototype.onStartBtn=function(t,e){var o=this.startRoot.children;this.startCount=parseInt(e)+1;for(var i=0;i<o.length;i++)o[i].getComponent(cc.Sprite).spriteFrame=i<=e?this.fullStart:this.emptyStart},e.prototype.onOkBtn=function(t){4==this.startCount||5==this.startCount?this.closeBtn_te(t):0==this.startCount||this.closeBtn_te(t)},__decorate([r(cc.SpriteFrame)],e.prototype,"fullStart",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"emptyStart",void 0),__decorate([r(cc.Node)],e.prototype,"closeBtn",void 0),__decorate([r(cc.Node)],e.prototype,"startRoot",void 0),__decorate([r(cc.Node)],e.prototype,"submitBtn",void 0),__decorate([n],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],Comment:[function(t,e,o){"use strict";cc._RF.push(e,"6bb816Q0RlAo6D++7loEDgC","Comment");var i=t("./BaseUI"),n=t("./PlatformConst"),r=t("./UserConst"),a=t("./BmsManager"),s=t("./PlatformManager"),c=t("./PopupManager"),l=t("./TipManager"),h=t("./UserManager"),d=t("./Stars"),u=t("./XMADUtils"),p=t("./LanguageManager"),f=cc._decorator,g=f.ccclass,m=f.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stars=null,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("giveUpBtn",this.clickGiveUp,this),this.addBtnOn("define",this.clickDefine,this),this.initView()},e.prototype.onEnable=function(){s.Platform.is(n.EPlatform.XIAOMI_ANDROID)&&u.XMAD.showBannerFeed()},e.prototype.onDisable=function(){},e.prototype.initView=function(){},e.prototype.clickGiveUp=function(){c.default.hide()},e.prototype.clickDefine=function(){if(this.stars.isTouch){var t=this.stars.starNum;this.stars.setCanMark(!1);var e=a.BMS.getKey("evaluatestar");console.log("starNum",t),console.log("showNum",e),t>=e&&s.Platform.gameComment(),h.User.set(r.UserData.IS_COMMENT,1),l.Tip.show(p.default.formatStr("\u8bc4\u5206\u6210\u529f\u3002")),c.default.hide()}else l.Tip.show(p.default.formatStr("\u8bf7\u5148\u8bc4\u5206!"))},__decorate([m(d.default)],e.prototype,"stars",void 0),__decorate([g],e)}(i.default);o.default=v,cc._RF.pop()},{"./BaseUI":"BaseUI","./BmsManager":"BmsManager","./LanguageManager":"LanguageManager","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager","./Stars":"Stars","./TipManager":"TipManager","./UserConst":"UserConst","./UserManager":"UserManager","./XMADUtils":"XMADUtils"}],ConfigConst:[function(t,e,o){"use strict";var i;cc._RF.push(e,"21aab4okM9JYa0gpJYLoGLX","ConfigConst"),o.ConfigConst=void 0,(i=o.ConfigConst||(o.ConfigConst={})).THEME="config/theme",i.Subject="config/subject",i.TIP="config/tips",i.RESULT="config/result",i.LANGUAGE="config/language",i.Rank="config/rank",i.RankHW="config/rankHW",i.Skin0="config/skin0",i.Task="config/task",i.DailyReward="config/DailyReward",i.Master="config/Master",i.Fighting="config/Fighting",i.Collect="config/Collect",i.Purchase="config/Purchase",i.Unit="config/Unit",i.Daily="config/Daily",i.Feature="config/Feature",i.SignIn="config/signIn",i.City="config/city",i.Role="config/role",i.Skin="config/skin",i.Dragon="config/dragon",cc._RF.pop()},{}],ConfigManager:[function(t,e,o){"use strict";cc._RF.push(e,"a32dfXmG0xMFaP2TzV79ZHA","ConfigManager"),o.Config=void 0;var i=function(){function t(){this.list={}}return t.prototype.preload=function(t){this.list[t]||cc.resources.preload(t)},t.prototype.get=function(t){var e=this;return new Promise(function(o,i){if(e.list[t])return o(e.list[t]);cc.resources.load(t,function(n,r){return n?(i(),console.warn(n)):(e.list[t]=e.parseData(r.json,t),o(e.list[t]))})})},t.prototype.parseData=function(t,e){for(var o={},i=0;i<t.values.length;i++)o[""+t.values[i][0]]=t.values[i];var n=t.values.length,r=[];for(i=0;i<n;i++){var a=o[""+(i+1)];if(a.every(function(t){return 0==t}))console.log(e+"\u8868\u6709\u7a7a\u767d\u6570\u636e\uff0c\u5df2\u8fc7\u6ee4");else{for(var s={},c=0;c<a.length;c++)s[""+t.keys[c]]=a[c];r.push(s)}}return r},t}();o.Config=new i,cc._RF.pop()},{}],ConfigUtils:[function(t,e,o){"use strict";cc._RF.push(e,"5dc93HYMAZK8Zcci5ZC94AJ","ConfigUtils"),o.ConfigUtils=void 0;var i=t("./ConfigConst"),n=t("./UserConst"),r=t("./ConfigManager"),a=t("./PlatformManager"),s=t("./UserManager"),c=function(){function t(){}return t.getLevelIDByIndex=function(t,e,o){var n=String(t);0==t&&(n=t+a.Platform.getConfig().configSuffix,console.log("path",n)),r.Config.get(i.ConfigConst.THEME+n).then(function(t){for(var i=0;i<t.length;i++)t[i].id==e&&o(t[i].stageID)})},t.getLevelIDByDevelop=function(t,e){var o=this,n=[];r.Config.get(i.ConfigConst.THEME).then(function(i){if(i.forEach(function(t){4!=t.type&&n.push(""+t.theme)}),0==o.allLevel.length)o.loadSubs(n,function(){for(var i=0;i<o.allLevel.length;i++)o.allLevel[i].stage1ID==t?e(o.allLevel[i],1):o.allLevel[i].stage2ID==t&&e(o.allLevel[i],2)},function(){});else for(var r=0;r<o.allLevel.length;r++)o.allLevel[r].stage1ID==t?e(o.allLevel[r],1):o.allLevel[r].stage2ID==t&&e(o.allLevel[r],2)})},t.loadSubs=function(t,e,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:i.trys.push([0,4,,5]),i.label=1;case 1:return t.length?[4,this.loadSub(t.shift())]:[3,3];case 2:return i.sent(),[3,1];case 3:return e&&e(),[3,5];case 4:return i.sent(),o?[2]:[3,5];case 5:return[2]}})})},t.loadSub=function(t){var e=this;return new Promise(function(o){r.Config.get(i.ConfigConst.THEME+t).then(function(i){i.mode=t;for(var n=0;n<i.length;n++)i[n].mode=t;e.allLevel=e.allLevel.concat(i),o(null)})})},t.getDataByID=function(t,e){r.Config.get(i.ConfigConst.THEME).then(function(o){for(var n,s=0;s<o.length;s++)o[s].theme==t&&(n=o[s]);if(console.log("result",n),n){var c=String(t);0==t&&(c=t+a.Platform.getConfig().configSuffix),r.Config.get(i.ConfigConst.THEME+c).then(function(t){n.amount=t.length,e(n)})}else console.log("\u52a0\u8f7d\u53e6\u5916\u4e00\u4e2a\u4e3b\u9898"),r.Config.get(i.ConfigConst.Subject).then(function(o){for(var s=0;s<o.length;s++)o[s].theme==t&&(n=o[s]);var c=String(t);0==t&&(c=t+a.Platform.getConfig().configSuffix),r.Config.get(i.ConfigConst.THEME+c).then(function(t){n.amount=t.length,console.log("\u8111\u6d1e\u6a21\u5f0f",n),e(n)})})})},t.getDataByID_99=function(t,e){r.Config.get(i.ConfigConst.THEME+t).then(function(t){for(var o=0,i=0;i<t.length;i++)o+=1;console.groupCollapsed,t.amount=o,e(t)})},t.setNextModeID=function(){for(var t=s.User.getTempData(n.TempData.CURRENT_MODE),e=s.User.getTempData(n.TempData.CURRENT_ALL_MODE),o=0;o<e.length;o++)if(e[o].theme==t)return void(o+1>=e.length?s.User.setTempData(n.TempData.NEXT_MODE_ID,t):s.User.setTempData(n.TempData.NEXT_MODE_ID,e[o+1].theme))},t.allLevel=[],t}();o.ConfigUtils=c,cc._RF.pop()},{"./ConfigConst":"ConfigConst","./ConfigManager":"ConfigManager","./PlatformManager":"PlatformManager","./UserConst":"UserConst","./UserManager":"UserManager"}],CopyRightDialog:[function(t,e,o){"use strict";cc._RF.push(e,"41235LESE1J6oauE1d5FoIs","CopyRightDialog");var i=t("./myXxtea"),n=cc.Node.EventType,r=function(){function t(){this._root=null,this._textNode=null,this._lblText=null,this.group=null}return t.prototype.init=function(t){void 0===t&&(t="default"),this._root||(t&&(this.group=t),this._initRoot(),this._initTouchNode(),this._initTextNode())},t.prototype._initRoot=function(){var t=cc.director.getScene(),e=new cc.Node("CR");this._root=e,e.parent=t,e.zIndex=cc.macro.MAX_ZINDEX,e.setContentSize(cc.winSize),e.setPosition(cc.winSize.width>>1,cc.winSize.height>>1),cc.game.addPersistRootNode(e),this.group&&(e.group=this.group)},t.prototype._initTouchNode=function(){var t=this,e=new cc.Node("touchNode");e.parent=this._root,e.setContentSize(200,150),e.anchorY=1,e.setPosition(0,cc.winSize.height>>1);var o=null,i=[],r=[1,1,0,2,2,0];e.on(n.TOUCH_START,function(t){o=t.getLocation()},this);var a=function(e){var n=e.getLocation().sub(o);n.mag()>10?n.x<0?i.push(1):i.push(2):i.push(0);var a=i.length-1;i[a]!=r[a]?i=[]:i.length==r.length&&(t.showText(t.copyrightDecrypt()),i=[]),cc.log(i)};e.on(n.TOUCH_END,a,this),e.on(n.TOUCH_CANCEL,a,this),e._touchListener.setSwallowTouches(!1)},t.prototype._initTextNode=function(){var t=new cc.Node("text");this._textNode=t,t.parent=this._root,t.setPosition(cc.v2());var e=new cc.Node("graphics").addComponent(cc.Graphics);e.node.parent=t;var o=new cc.Node("text").addComponent(cc.Label),i=o.node;this._lblText=o,o.overflow=cc.Label.Overflow.RESIZE_HEIGHT,o.node.parent=t,o.horizontalAlign=cc.Label.HorizontalAlign.CENTER,o.verticalAlign=cc.Label.VerticalAlign.CENTER,i.width=500,o.node.on(cc.Node.EventType.SIZE_CHANGED,function(){e.fillColor=cc.color(0,0,0,191),e.clear();var t=cc.size(i.width+30,i.height+30);e.roundRect(-t.width>>1,-t.height>>1,t.width,t.height,20),e.fill()},this)},t.prototype.showText=function(t){var e=this;this._textNode.setPosition(cc.v2()),this._textNode.stopAllActions(),this._textNode.opacity=255,cc.tween(this._textNode).by(.5,{y:200}).delay(1.3).call(function(){e._textNode.opacity=0}).start(),this._lblText.string=t,cc.game.emit("gesture")},t.prototype.copyrightDecrypt=function(){return(new i.myXxtea).xxtea_decrypt("b3ba6f3fdf954d34325b29de64289ba6e08c3b8f73517d56e115b3585508ce86dc4106f199d57538d3e865e0e02eda4c0f51cd7e31e5626f65202f7b","sjcoejdhsffstedg")},t}();o.default=r,cc._RF.pop()},{"./myXxtea":"myXxtea"}],CryHelp:[function(t,e,o){"use strict";cc._RF.push(e,"16de9VuAvdDnYSAeAtHcVEF","CryHelp");var i=t("./BaseUI"),n=t("./PlatformManager"),r=t("./PopupManager"),a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("defineBtn",this.clickDefine,this),this.addBtnOn("giveUpBtn",this.clickGiveUp,this)},e.prototype.onEnable=function(){cc.game.on("shareSuc",this.shareSuc,this)},e.prototype.onDisable=function(){cc.game.off("shareSuc",this.shareSuc,this)},e.prototype.clickDefine=function(){n.Platform.share(),r.default.hide(),setTimeout(function(){cc.game.emit("clickTip")},2e3)},e.prototype.clickGiveUp=function(){r.default.hide()},e.prototype.shareSuc=function(){},__decorate([s],e)}(i.default));o.default=c,cc._RF.pop()},{"./BaseUI":"BaseUI","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager"}],DebugManager:[function(t,e,o){"use strict";cc._RF.push(e,"1c9b6+DpYdJWrYHdQYz5IJA","DebugManager");var i=t("./AssetManager"),n=new(function(){function t(){this.isShow=!1,this.windowRoot=null,this.switchBtn=null,this.logLabel=null,this.logLines=[],this.maxLines=100}return t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(o){switch(o.label){case 0:return[4,i.default.getRes("bundle","prefab/Debug",cc.Prefab)];case 1:return t=o.sent(),e=cc.instantiate(t),cc.find("Canvas/logRoot").addChild(e),this.windowRoot=e.getChildByName("windowRoot"),this.logLabel=cc.find("scrollView/view/content/text",this.windowRoot).getComponent(cc.Label),this.switchBtn=e.getChildByName("switchBtn").getComponent(cc.Button),this.switchBtn.node.on("click",this.showOrHide,this),this.isShow=!0,this.showOrHide(),this.i("Debug \u521d\u59cb\u5316"),[2]}})})},t.prototype.showOrHide=function(){this.isShow=!this.isShow,this.windowRoot.active=this.isShow},t.prototype.isObject=function(t){return"object"==typeof t&&null!==t},t.prototype.i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var o="",i=0;i<arguments.length;i++){var n=arguments[i];this.isObject(n)&&(n=JSON.stringify(n)),o+=n}console.log.apply(console,t),this.check(o)},t.prototype.e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var o="",i=0;i<arguments.length;i++)o+=arguments[i];console.error.apply(console,t),this.check(o)},t.prototype.w=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var o="",i=0;i<arguments.length;i++)o+=arguments[i];console.warn.apply(console,t),this.check(o)},t.prototype.check=function(t){this.windowRoot&&(this.logLines.push(t),this.updateView())},t.prototype.updateView=function(){var t,e="";t=this.logLines.length<this.maxLines?this.logLines.length:this.maxLines;for(var o=0;o<t;o++)e=e+this.logLines[this.logLines.length-1-o]+"\n";this.logLabel.string=e},t}());o.default=n,cc._RF.pop()},{"./AssetManager":"AssetManager"}],DragonBall:[function(t,e,o){"use strict";cc._RF.push(e,"18dbalKOQxLE7vVg9J8vohv","DragonBall");var i=t("./UIBase"),n=t("./LocalStorageConst"),r=t("./LocalStorageManager"),a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this);var e=r.default.get(n.default.DragonBall)||0;r.default.set(n.default.DragonBall,e),this.localStorageUIData[n.default.DragonBall]=this.updateDragonBall.bind(this)},e.prototype.updateDragonBall=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return this.dict.amount.getComponent(cc.Label).string=""+t,[2]})})},e.prototype.clickSelf=function(){},__decorate([s],e)}(i.default));o.default=c,cc._RF.pop()},{"./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./UIBase":"UIBase"}],DynamicScroll:[function(t,e,o){"use strict";cc._RF.push(e,"76274RaxnZFPYSKpJF5ZNSo","DynamicScroll");var i=cc._decorator,n=i.ccclass,r=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemPrefab=null,e.spacingX=0,e.spacingY=0,e.canScroll=!0,e.borderTop=0,e.borderBot=0,e.isReverse=!1,e._numItems=0,e.onPosCallBack=function(){},e._content=null,e._items=[],e._itemsUidToIndex={},e._updateTimer=0,e._updateInterval=.016,e._lastContentPosY=0,e._lastContentPosX=0,e._col=0,e._row=0,e._spawnCount=0,e._isHorizon=!1,e._itemList={},e}return __extends(e,t),Object.defineProperty(e.prototype,"numItems",{get:function(){return this._numItems},set:function(t){this._numItems=t,this.updateAllItem()},enumerable:!1,configurable:!0}),e.prototype.onScrollingCallBack=function(){},e.prototype.onLoad=function(){var t=this.node.getComponent(cc.ScrollView);this._content=t.content,this._isHorizon=!t.vertical,this._initialize(),t.enabled=this.canScroll,this._regScrollEvent()},e.prototype.getItemList=function(){return this._itemList},e.prototype.getContent=function(){return this._content},e.prototype.scrollTo=function(t,e,o){this.node.getComponent(cc.ScrollView).scrollTo(t,e,o)},e.prototype.scrollToIndex=function(t,e,o){if(this.numItems){this.isReverse&&(t=this.numItems-t);var i=this.node.getComponent(cc.ScrollView),n=cc.v2();if(this._isHorizon){var r=t/(this.numItems-1);n=cc.v2(r,0)}else r=(Math.ceil(t/this._col)-1)/(this._row-1),n=cc.v2(0,1-r);console.log("pos================",this._content.height),i.scrollTo(n,e,o)}},e.prototype.scrollToPos=function(t){var e=this.node.getComponent(cc.ScrollView),o=cc.winSize.height,i=1-(t.y-o/2+o*(1-Math.abs(t.y/e.content.height)))/e.content.height*-1;e.scrollToPercentVertical(i,1)},e.prototype.getContentHeightByUnify=function(){var t=this.itemPrefab.data;return this._row*(t.height+this.spacingY)},e.prototype.getPosByUnify=function(t){var e=this.itemPrefab.data,o=0,i=0;return this._isHorizon?o=this.borderTop+e.width/2+t*(e.width+this.spacingX):(o=.5*(e.width+this.spacingX)-((this._col-t%this._col)*(e.width+this.spacingX)*.5+(.5-e.anchorX)*e.width)+t%this._col*(e.width+this.spacingX)*.5,i=-this.borderTop-e.height*(1-e.anchorY)-Math.floor(t/this._col)*(e.height+this.spacingY)),this.isReverse&&(i=-(this._content.height+i)),cc.v2(o,i)},e.prototype.stopAutoScroll=function(){this.node.getComponent(cc.ScrollView).stopAutoScroll()},e.prototype.updateItem=function(t,e){0!=this.numItems&&(e.active=t<this.numItems,e.active&&(this._itemList[t]=e,this.onItemRender&&this.onItemRender(t,e)))},e.prototype.updateAllItem=function(){if(0!=this.numItems){for(var t=0;t<this._items.length;++t){var e=this._items[t];if(e){var o=this._itemsUidToIndex[e.uuid];(o||0===o)&&this.updateItem(o,e)}}this._isHorizon?this._updateContentWidth():this._updateContentHeight()}},e.prototype.scrollComponent=function(){return this.node.getComponent(cc.ScrollView)},e.prototype._initialize=function(){this._isHorizon?(this._content.anchorX=0,this._content.anchorY=.5,this._content.position=cc.v3(-this.node.width/2,-this.node.height/2,0),this._updateContentWidth(),this._spawnCount=Math.ceil(this.node.width/this.itemPrefab.data.width)+2,console.log("\u521d\u59cb\u5316RecycleScroll item, \u5b9e\u4f8b\u5316\u6570\u91cf\uff1a"+this._spawnCount+" width: "+this._content.width)):(this._content.anchorX=.5,this._content.anchorY=1,this._content.position=cc.v3(),this._updateContentHeight(),this._spawnCount=this._col*Math.ceil(this.node.height/this.itemPrefab.data.height)+2*this._col,console.log("\u521d\u59cb\u5316RecycleScroll item, \u5b9e\u4f8b\u5316\u6570\u91cf\uff1a"+this._spawnCount)),this._createItem()},e.prototype._regScrollEvent=function(){this.scrollComponent().node.on("scrolling",this.onScrollingCallBack,this)},e.prototype._updateContentHeight=function(){if(this._content){var t=this.itemPrefab.data,e=this.numItems;this._col=Math.floor(this.node.width/(t.width+this.spacingX)),this._row=Math.ceil(e/this._col),this._content.height=this.getContentHeightByUnify()+this.borderTop+this.borderBot}},e.prototype._updateContentWidth=function(){if(this._content){var t=this.itemPrefab.data,e=this.numItems;this._row=1,this._content.width=t.width*e+this.spacingX*(e-1)+this.borderTop+this.borderBot}},e.prototype._createItem=function(){var t=this,e=0;s(this._spawnCount,function(o){if(cc.isValid(t.node)){var i=cc.instantiate(t.itemPrefab);t._content.addChild(i),i.setPosition(t.getPosByUnify(o)),i.active=o<t.numItems,t._items[o]=i,t._itemsUidToIndex[i.uuid]=o,i.on(cc.Node.EventType.TOUCH_END,function(){t.onItemClicked&&t.onItemClicked(t._itemsUidToIndex[i.uuid],i)},t),t.updateItem(o,i),++e==t._spawnCount&&t.onItemFinish()}})},e.prototype.onItemFinish=function(){},e.prototype._getPositionInView=function(t){var e=t.parent.convertToWorldSpaceAR(t.position);return this.node.convertToNodeSpaceAR(e)},e.prototype.update=function(t){if(this._items.length==this._spawnCount&&(this._updateTimer+=t,!(this._updateTimer<this._updateInterval))){this._updateTimer=0;var e=this._items,o=this.node.getComponent(cc.ScrollView);if(this._lastContentPosX==o.content.x&&this._lastContentPosY==o.content.y||this.onPosCallBack(),this._isHorizon){for(var i=Math.floor(o.content.x)<this._lastContentPosX,n=(this.itemPrefab.data.width+this.spacingX)*Math.ceil(this._items.length/this._row),r=0;r<e.length;++r){var a=e[r],s=this._getPositionInView(a);if(i){if(s.x<-a.width-(1-this.node.anchorX)*this.node.width&&a.x+n<=o.content.width){var c=this._itemsUidToIndex[a.uuid],l=1;this.isReverse&&(l=-1),(d=c+e.length*l)>=0&&(a.x=a.x+n,this._itemList[c]=null,this._itemList[d]=a,this._itemsUidToIndex[a.uuid]=d,this.updateItem(d,a))}}else s.x>a.width+(1-this.node.anchorX)*this.node.width&&a.x-n>=0&&(c=this._itemsUidToIndex[a.uuid],l=1,this.isReverse&&(l=-1),(d=c-e.length*l)>=0&&(a.x=a.x-n,this._itemList[c]=null,this._itemList[d]=a,this._itemsUidToIndex[a.uuid]=d,this.updateItem(d,a)))}this._lastContentPosX=o.content.x}else{var h=Math.floor(o.content.y)<=this._lastContentPosY;for(n=(this.itemPrefab.data.height+this.spacingY)*Math.ceil(this._items.length/this._col),r=0;r<e.length;++r)if(a=e[r],s=this._getPositionInView(a),h)s.y<-a.height-(1-this.node.anchorY)*this.node.height&&a.y+n<=0&&(c=this._itemsUidToIndex[a.uuid],l=1,this.isReverse&&(l=-1),(d=c-e.length*l)>=0&&(a.y=a.y+n,this._itemList[c]=null,this._itemList[d]=a,this._itemsUidToIndex[a.uuid]=d,this.updateItem(d,a)));else if(s.y>a.height+(1-this.node.anchorY)*this.node.height&&a.y-n>=-o.content.height){var d;c=this._itemsUidToIndex[a.uuid],l=1,this.isReverse&&(l=-1),(d=c+e.length*l)>=0&&(a.y=a.y-n,this._itemList[c]=null,this._itemList[d]=a,this._itemsUidToIndex[a.uuid]=d,this.updateItem(d,a))}this._lastContentPosY=o.content.y}}},__decorate([r({type:cc.Prefab,tooltip:"item\u9884\u5236\u4f53"})],e.prototype,"itemPrefab",void 0),__decorate([r({type:cc.Float,tooltip:"item\u4e4b\u95f4x\u95f4\u9694"})],e.prototype,"spacingX",void 0),__decorate([r({type:cc.Float,tooltip:"item\u4e4b\u95f4y\u95f4\u9694"})],e.prototype,"spacingY",void 0),__decorate([r({tooltip:"\u662f\u5426\u53ef\u6ed1\u52a8"})],e.prototype,"canScroll",void 0),__decorate([r({type:cc.Float,tooltip:"\u8fb9\u754c\u586b\u5145\u4e0a/\u5de6"})],e.prototype,"borderTop",void 0),__decorate([r({type:cc.Float,tooltip:"\u8fb9\u754c\u586b\u5145\u4e0b/\u53f3"})],e.prototype,"borderBot",void 0),__decorate([r({tooltip:"\u662f\u5426\u53cd\u5411\u6392\u5217"})],e.prototype,"isReverse",void 0),__decorate([n],e)}(cc.Component);function s(t,e,o,i){void 0===o&&(o=1),void 0===i&&(i=0);for(var r=t,a=(new Date).getTime(),c=0;c<r&&!(i>=r);++c){try{e&&e(i)}catch(n){cc.error(n)}if(i++,(new Date).getTime()-a>o)return void setTimeout(function(){s(t,e,o,i)},20)}}o.default=a,cc._RF.pop()},{}],1:[function(t,e,o){"use strict";const i=o;i.bignum=t("bn.js"),i.define=t("./asn1/api").define,i.base=t("./asn1/base"),i.constants=t("./asn1/constants"),i.decoders=t("./asn1/decoders"),i.encoders=t("./asn1/encoders")},{"./asn1/api":2,"./asn1/base":4,"./asn1/constants":8,"./asn1/decoders":10,"./asn1/encoders":13,"bn.js":15}],2:[function(t,e,o){"use strict";const i=t("./encoders"),n=t("./decoders"),r=t("inherits");function a(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}o.define=function(t,e){return new a(t,e)},a.prototype._createNamed=function(t){const e=this.name;function o(t){this._initNamed(t,e)}return r(o,t),o.prototype._initNamed=function(e,o){t.call(this,e,o)},new o(this)},a.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(n[t])),this.decoders[t]},a.prototype.decode=function(t,e,o){return this._getDecoder(e).decode(t,o)},a.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(i[t])),this.encoders[t]},a.prototype.encode=function(t,e,o){return this._getEncoder(e).encode(t,o)}},{"./decoders":10,"./encoders":13,inherits:136}],3:[function(t,e,o){"use strict";const i=t("inherits"),n=t("../base/reporter").Reporter,r=t("safer-buffer").Buffer;function a(t,e){n.call(this,e),r.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function s(t,e){if(Array.isArray(t))this.length=0,this.value=t.map(function(t){return s.isEncoderBuffer(t)||(t=new s(t,e)),this.length+=t.length,t},this);else if("number"==typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=r.byteLength(t);else{if(!r.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}i(a,n),o.DecoderBuffer=a,a.isDecoderBuffer=function(t){return t instanceof a||"object"==typeof t&&r.isBuffer(t.base)&&"DecoderBuffer"===t.constructor.name&&"number"==typeof t.offset&&"number"==typeof t.length&&"function"==typeof t.save&&"function"==typeof t.restore&&"function"==typeof t.isEmpty&&"function"==typeof t.readUInt8&&"function"==typeof t.skip&&"function"==typeof t.raw},a.prototype.save=function(){return{offset:this.offset,reporter:n.prototype.save.call(this)}},a.prototype.restore=function(t){const e=new a(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,n.prototype.restore.call(this,t.reporter),e},a.prototype.isEmpty=function(){return this.offset===this.length},a.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},a.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");const o=new a(this.base);return o._reporterState=this._reporterState,o.offset=this.offset,o.length=this.offset+t,this.offset+=t,o},a.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},o.EncoderBuffer=s,s.isEncoderBuffer=function(t){return t instanceof s||"object"==typeof t&&"EncoderBuffer"===t.constructor.name&&"number"==typeof t.length&&"function"==typeof t.join},s.prototype.join=function(t,e){return t||(t=r.alloc(this.length)),e||(e=0),0===this.length?t:(Array.isArray(this.value)?this.value.forEach(function(o){o.join(t,e),e+=o.length}):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):r.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length),t)}},{"../base/reporter":6,inherits:136,"safer-buffer":182}],4:[function(t,e,o){"use strict";const i=o;i.Reporter=t("./reporter").Reporter,i.DecoderBuffer=t("./buffer").DecoderBuffer,i.EncoderBuffer=t("./buffer").EncoderBuffer,i.Node=t("./node")},{"./buffer":3,"./node":5,"./reporter":6}],5:[function(t,e){"use strict";const o=t("../base/reporter").Reporter,i=t("../base/buffer").EncoderBuffer,n=t("../base/buffer").DecoderBuffer,r=t("minimalistic-assert"),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],s=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a);function c(t,e,o){const i={};this._baseState=i,i.name=o,i.enc=t,i.parent=e||null,i.children=null,i.tag=null,i.args=null,i.reverseArgs=null,i.choice=null,i.optional=!1,i.any=!1,i.obj=!1,i.use=null,i.useDecoder=null,i.key=null,i.default=null,i.explicit=null,i.implicit=null,i.contains=null,i.parent||(i.children=[],this._wrap())}e.exports=c;const l=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];c.prototype.clone=function(){const t=this._baseState,e={};l.forEach(function(o){e[o]=t[o]});const o=new this.constructor(e.parent);return o._baseState=e,o},c.prototype._wrap=function(){const t=this._baseState;s.forEach(function(e){this[e]=function(){const o=new this.constructor(this);return t.children.push(o),o[e].apply(o,arguments)}},this)},c.prototype._init=function(t){const e=this._baseState;r(null===e.parent),t.call(this),e.children=e.children.filter(function(t){return t._baseState.parent===this},this),r.equal(e.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(t){const e=this._baseState,o=t.filter(function(t){return t instanceof this.constructor},this);t=t.filter(function(t){return!(t instanceof this.constructor)},this),0!==o.length&&(r(null===e.children),e.children=o,o.forEach(function(t){t._baseState.parent=this},this)),0!==t.length&&(r(null===e.args),e.args=t,e.reverseArgs=t.map(function(t){if("object"!=typeof t||t.constructor!==Object)return t;const e={};return Object.keys(t).forEach(function(o){o==(0|o)&&(o|=0);const i=t[o];e[i]=o}),e}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(t){c.prototype[t]=function(){const e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}}),a.forEach(function(t){c.prototype[t]=function(){const e=this._baseState,o=Array.prototype.slice.call(arguments);return r(null===e.tag),e.tag=t,this._useArgs(o),this}}),c.prototype.use=function(t){r(t);const e=this._baseState;return r(null===e.use),e.use=t,this},c.prototype.optional=function(){return this._baseState.optional=!0,this},c.prototype.def=function(t){const e=this._baseState;return r(null===e.default),e.default=t,e.optional=!0,this},c.prototype.explicit=function(t){const e=this._baseState;return r(null===e.explicit&&null===e.implicit),e.explicit=t,this},c.prototype.implicit=function(t){const e=this._baseState;return r(null===e.explicit&&null===e.implicit),e.implicit=t,this},c.prototype.obj=function(){const t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},c.prototype.key=function(t){const e=this._baseState;return r(null===e.key),e.key=t,this},c.prototype.any=function(){return this._baseState.any=!0,this},c.prototype.choice=function(t){const e=this._baseState;return r(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map(function(e){return t[e]})),this},c.prototype.contains=function(t){const e=this._baseState;return r(null===e.use),e.contains=t,this},c.prototype._decode=function(t,e){const o=this._baseState;if(null===o.parent)return t.wrapResult(o.children[0]._decode(t,e));let i,r=o.default,a=!0,s=null;if(null!==o.key&&(s=t.enterKey(o.key)),o.optional){let i=null;if(null!==o.explicit?i=o.explicit:null!==o.implicit?i=o.implicit:null!==o.tag&&(i=o.tag),null!==i||o.any){if(a=this._peekTag(t,i,o.any),t.isError(a))return a}else{const i=t.save();try{null===o.choice?this._decodeGeneric(o.tag,t,e):this._decodeChoice(t,e),a=!0}catch(c){a=!1}t.restore(i)}}if(o.obj&&a&&(i=t.enterObject()),a){if(null!==o.explicit){const e=this._decodeTag(t,o.explicit);if(t.isError(e))return e;t=e}const i=t.offset;if(null===o.use&&null===o.choice){let e;o.any&&(e=t.save());const i=this._decodeTag(t,null!==o.implicit?o.implicit:o.tag,o.any);if(t.isError(i))return i;o.any?r=t.raw(e):t=i}if(e&&e.track&&null!==o.tag&&e.track(t.path(),i,t.length,"tagged"),e&&e.track&&null!==o.tag&&e.track(t.path(),t.offset,t.length,"content"),o.any||(r=null===o.choice?this._decodeGeneric(o.tag,t,e):this._decodeChoice(t,e)),t.isError(r))return r;if(o.any||null!==o.choice||null===o.children||o.children.forEach(function(o){o._decode(t,e)}),o.contains&&("octstr"===o.tag||"bitstr"===o.tag)){const i=new n(r);r=this._getUse(o.contains,t._reporterState.obj)._decode(i,e)}}return o.obj&&a&&(r=t.leaveObject(i)),null===o.key||null===r&&!0!==a?null!==s&&t.exitKey(s):t.leaveKey(s,o.key,r),r},c.prototype._decodeGeneric=function(t,e,o){const i=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,i.args[0],o):/str$/.test(t)?this._decodeStr(e,t,o):"objid"===t&&i.args?this._decodeObjid(e,i.args[0],i.args[1],o):"objid"===t?this._decodeObjid(e,null,null,o):"gentime"===t||"utctime"===t?this._decodeTime(e,t,o):"null_"===t?this._decodeNull(e,o):"bool"===t?this._decodeBool(e,o):"objDesc"===t?this._decodeStr(e,t,o):"int"===t||"enum"===t?this._decodeInt(e,i.args&&i.args[0],o):null!==i.use?this._getUse(i.use,e._reporterState.obj)._decode(e,o):e.error("unknown tag: "+t)},c.prototype._getUse=function(t,e){const o=this._baseState;return o.useDecoder=this._use(t,e),r(null===o.useDecoder._baseState.parent),o.useDecoder=o.useDecoder._baseState.children[0],o.implicit!==o.useDecoder._baseState.implicit&&(o.useDecoder=o.useDecoder.clone(),o.useDecoder._baseState.implicit=o.implicit),o.useDecoder},c.prototype._decodeChoice=function(t,e){const o=this._baseState;let i=null,n=!1;return Object.keys(o.choice).some(function(r){const a=t.save(),s=o.choice[r];try{const o=s._decode(t,e);if(t.isError(o))return!1;i={type:r,value:o},n=!0}catch(c){return t.restore(a),!1}return!0},this),n?i:t.error("Choice not matched")},c.prototype._createEncoderBuffer=function(t){return new i(t,this.reporter)},c.prototype._encode=function(t,e,o){const i=this._baseState;if(null!==i.default&&i.default===t)return;const n=this._encodeValue(t,e,o);return void 0===n||this._skipDefault(n,e,o)?void 0:n},c.prototype._encodeValue=function(t,e,i){const n=this._baseState;if(null===n.parent)return n.children[0]._encode(t,e||new o);let r=null;if(this.reporter=e,n.optional&&void 0===t){if(null===n.default)return;t=n.default}let a=null,s=!1;if(n.any)r=this._createEncoderBuffer(t);else if(n.choice)r=this._encodeChoice(t,e);else if(n.contains)a=this._getUse(n.contains,i)._encode(t,e),s=!0;else if(n.children)a=n.children.map(function(o){if("null_"===o._baseState.tag)return o._encode(null,e,t);if(null===o._baseState.key)return e.error("Child should have a key");const i=e.enterKey(o._baseState.key);if("object"!=typeof t)return e.error("Child expected, but input is not object");const n=o._encode(t[o._baseState.key],e,t);return e.leaveKey(i),n},this).filter(function(t){return t}),a=this._createEncoderBuffer(a);else if("seqof"===n.tag||"setof"===n.tag){if(!n.args||1!==n.args.length)return e.error("Too many args for : "+n.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");const o=this.clone();o._baseState.implicit=null,a=this._createEncoderBuffer(t.map(function(o){const i=this._baseState;return this._getUse(i.args[0],t)._encode(o,e)},o))}else null!==n.use?r=this._getUse(n.use,i)._encode(t,e):(a=this._encodePrimitive(n.tag,t),s=!0);if(!n.any&&null===n.choice){const t=null!==n.implicit?n.implicit:n.tag,o=null===n.implicit?"universal":"context";null===t?null===n.use&&e.error("Tag could be omitted only for .use()"):null===n.use&&(r=this._encodeComposite(t,s,o,a))}return null!==n.explicit&&(r=this._encodeComposite(n.explicit,!1,"context",r)),r},c.prototype._encodeChoice=function(t,e){const o=this._baseState,i=o.choice[t.type];return i||r(!1,t.type+" not found in "+JSON.stringify(Object.keys(o.choice))),i._encode(t.value,e)},c.prototype._encodePrimitive=function(t,e){const o=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&o.args)return this._encodeObjid(e,o.reverseArgs[0],o.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,o.args&&o.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},c.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},c.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(t)}},{"../base/buffer":3,"../base/reporter":6,"minimalistic-assert":140}],6:[function(t,e,o){"use strict";const i=t("inherits");function n(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function r(t,e){this.path=t,this.rethrow(e)}o.Reporter=n,n.prototype.isError=function(t){return t instanceof r},n.prototype.save=function(){const t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},n.prototype.restore=function(t){const e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},n.prototype.enterKey=function(t){return this._reporterState.path.push(t)},n.prototype.exitKey=function(t){const e=this._reporterState;e.path=e.path.slice(0,t-1)},n.prototype.leaveKey=function(t,e,o){const i=this._reporterState;this.exitKey(t),null!==i.obj&&(i.obj[e]=o)},n.prototype.path=function(){return this._reporterState.path.join("/")},n.prototype.enterObject=function(){const t=this._reporterState,e=t.obj;return t.obj={},e},n.prototype.leaveObject=function(t){const e=this._reporterState,o=e.obj;return e.obj=t,o},n.prototype.error=function(t){let e;const o=this._reporterState,i=t instanceof r;if(e=i?t:new r(o.path.map(function(t){return"["+JSON.stringify(t)+"]"}).join(""),t.message||t,t.stack),!o.options.partial)throw e;return i||o.errors.push(e),e},n.prototype.wrapResult=function(t){const e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},i(r,Error),r.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,r),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},{inherits:136}],7:[function(t,e,o){"use strict";function i(t){const e={};return Object.keys(t).forEach(function(o){(0|o)==o&&(o|=0);const i=t[o];e[i]=o}),e}o.tagClass={0:"universal",1:"application",2:"context",3:"private"},o.tagClassByName=i(o.tagClass),o.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},o.tagByName=i(o.tag)},{}],8:[function(t,e,o){"use strict";const i=o;i._reverse=function(t){const e={};return Object.keys(t).forEach(function(o){(0|o)==o&&(o|=0);const i=t[o];e[i]=o}),e},i.der=t("./der")},{"./der":7}],9:[function(t,e){"use strict";const o=t("inherits"),i=t("bn.js"),n=t("../base/buffer").DecoderBuffer,r=t("../base/node"),a=t("../constants/der");function s(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new c,this.tree._init(t.body)}function c(t){r.call(this,"der",t)}function l(t,e){let o=t.readUInt8(e);if(t.isError(o))return o;const i=a.tagClass[o>>6],n=0==(32&o);if(31==(31&o)){let i=o;for(o=0;128==(128&i);){if(i=t.readUInt8(e),t.isError(i))return i;o<<=7,o|=127&i}}else o&=31;return{cls:i,primitive:n,tag:o,tagStr:a.tag[o]}}function h(t,e,o){let i=t.readUInt8(o);if(t.isError(i))return i;if(!e&&128===i)return null;if(0==(128&i))return i;const n=127&i;if(n>4)return t.error("length octect is too long");i=0;for(let r=0;r<n;r++){i<<=8;const e=t.readUInt8(o);if(t.isError(e))return e;i|=e}return i}e.exports=s,s.prototype.decode=function(t,e){return n.isDecoderBuffer(t)||(t=new n(t,e)),this.tree._decode(t,e)},o(c,r),c.prototype._peekTag=function(t,e,o){if(t.isEmpty())return!1;const i=t.save(),n=l(t,'Failed to peek tag: "'+e+'"');return t.isError(n)?n:(t.restore(i),n.tag===e||n.tagStr===e||n.tagStr+"of"===e||o)},c.prototype._decodeTag=function(t,e,o){const i=l(t,'Failed to decode tag of "'+e+'"');if(t.isError(i))return i;let n=h(t,i.primitive,'Failed to get length of "'+e+'"');if(t.isError(n))return n;if(!o&&i.tag!==e&&i.tagStr!==e&&i.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(i.primitive||null!==n)return t.skip(n,'Failed to match body of: "'+e+'"');const r=t.save(),a=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(a)?a:(n=t.offset-r.offset,t.restore(r),t.skip(n,'Failed to match body of: "'+e+'"'))},c.prototype._skipUntilEnd=function(t,e){for(;;){const o=l(t,e);if(t.isError(o))return o;const i=h(t,o.primitive,e);if(t.isError(i))return i;let n;if(n=o.primitive||null!==i?t.skip(i):this._skipUntilEnd(t,e),t.isError(n))return n;if("end"===o.tagStr)break}},c.prototype._decodeList=function(t,e,o,i){const n=[];for(;!t.isEmpty();){const e=this._peekTag(t,"end");if(t.isError(e))return e;const r=o.decode(t,"der",i);if(t.isError(r)&&e)break;n.push(r)}return n},c.prototype._decodeStr=function(t,e){if("bitstr"===e){const e=t.readUInt8();return t.isError(e)?e:{unused:e,data:t.raw()}}if("bmpstr"===e){const e=t.raw();if(e.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");let o="";for(let t=0;t<e.length/2;t++)o+=String.fromCharCode(e.readUInt16BE(2*t));return o}if("numstr"===e){const e=t.raw().toString("ascii");return this._isNumstr(e)?e:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return t.raw();if("objDesc"===e)return t.raw();if("printstr"===e){const e=t.raw().toString("ascii");return this._isPrintstr(e)?e:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported")},c.prototype._decodeObjid=function(t,e,o){let i;const n=[];let r=0,a=0;for(;!t.isEmpty();)r<<=7,r|=127&(a=t.readUInt8()),0==(128&a)&&(n.push(r),r=0);128&a&&n.push(r);const s=n[0]/40|0,c=n[0]%40;if(i=o?n:[s,c].concat(n.slice(1)),e){let t=e[i.join(" ")];void 0===t&&(t=e[i.join(".")]),void 0!==t&&(i=t)}return i},c.prototype._decodeTime=function(t,e){const o=t.raw().toString();let i,n,r,a,s,c;if("gentime"===e)i=0|o.slice(0,4),n=0|o.slice(4,6),r=0|o.slice(6,8),a=0|o.slice(8,10),s=0|o.slice(10,12),c=0|o.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");i=0|o.slice(0,2),n=0|o.slice(2,4),r=0|o.slice(4,6),a=0|o.slice(6,8),s=0|o.slice(8,10),c=0|o.slice(10,12),i=i<70?2e3+i:1900+i}return Date.UTC(i,n-1,r,a,s,c,0)},c.prototype._decodeNull=function(){return null},c.prototype._decodeBool=function(t){const e=t.readUInt8();return t.isError(e)?e:0!==e},c.prototype._decodeInt=function(t,e){const o=t.raw();let n=new i(o);return e&&(n=e[n.toString(10)]||n),n},c.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getDecoder("der").tree}},{"../base/buffer":3,"../base/node":5,"../constants/der":7,"bn.js":15,inherits:136}],10:[function(t,e,o){"use strict";const i=o;i.der=t("./der"),i.pem=t("./pem")},{"./der":9,"./pem":11}],11:[function(t,e){"use strict";const o=t("inherits"),i=t("safer-buffer").Buffer,n=t("./der");function r(t){n.call(this,t),this.enc="pem"}o(r,n),e.exports=r,r.prototype.decode=function(t,e){const o=t.toString().split(/[\r\n]+/g),r=e.label.toUpperCase(),a=/^-----(BEGIN|END) ([^-]+)-----$/;let s=-1,c=-1;for(let i=0;i<o.length;i++){const t=o[i].match(a);if(null!==t&&t[2]===r){if(-1!==s){if("END"!==t[1])break;c=i;break}if("BEGIN"!==t[1])break;s=i}}if(-1===s||-1===c)throw new Error("PEM section not found for: "+r);const l=o.slice(s+1,c).join("");l.replace(/[^a-z0-9+/=]+/gi,"");const h=i.from(l,"base64");return n.prototype.decode.call(this,h,e)}},{"./der":9,inherits:136,"safer-buffer":182}],12:[function(t,e){"use strict";const o=t("inherits"),i=t("safer-buffer").Buffer,n=t("../base/node"),r=t("../constants/der");function a(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new s,this.tree._init(t.body)}function s(t){n.call(this,"der",t)}function c(t){return t<10?"0"+t:t}function l(t,e,o,i){let n;if("seqof"===t?t="seq":"setof"===t&&(t="set"),r.tagByName.hasOwnProperty(t))n=r.tagByName[t];else{if("number"!=typeof t||(0|t)!==t)return i.error("Unknown tag: "+t);n=t}return n>=31?i.error("Multi-octet tag encoding unsupported"):(e||(n|=32),n|=r.tagClassByName[o||"universal"]<<6)}e.exports=a,a.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},o(s,n),s.prototype._encodeComposite=function(t,e,o,n){const r=l(t,e,o,this.reporter);if(n.length<128){const t=i.alloc(2);return t[0]=r,t[1]=n.length,this._createEncoderBuffer([t,n])}let a=1;for(let i=n.length;i>=256;i>>=8)a++;const s=i.alloc(2+a);s[0]=r,s[1]=128|a;for(let i=1+a,c=n.length;c>0;i--,c>>=8)s[i]=255&c;return this._createEncoderBuffer([s,n])},s.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===e){const e=i.alloc(2*t.length);for(let o=0;o<t.length;o++)e.writeUInt16BE(t.charCodeAt(o),2*o);return this._createEncoderBuffer(e)}return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)?this._createEncoderBuffer(t):"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},s.prototype._encodeObjid=function(t,e,o){if("string"==typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s.]+/g);for(let e=0;e<t.length;e++)t[e]|=0}else if(Array.isArray(t)){t=t.slice();for(let e=0;e<t.length;e++)t[e]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!o){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}let n=0;for(let i=0;i<t.length;i++){let e=t[i];for(n++;e>=128;e>>=7)n++}const r=i.alloc(n);let a=r.length-1;for(let i=t.length-1;i>=0;i--){let e=t[i];for(r[a--]=127&e;(e>>=7)>0;)r[a--]=128|127&e}return this._createEncoderBuffer(r)},s.prototype._encodeTime=function(t,e){let o;const i=new Date(t);return"gentime"===e?o=[c(i.getUTCFullYear()),c(i.getUTCMonth()+1),c(i.getUTCDate()),c(i.getUTCHours()),c(i.getUTCMinutes()),c(i.getUTCSeconds()),"Z"].join(""):"utctime"===e?o=[c(i.getUTCFullYear()%100),c(i.getUTCMonth()+1),c(i.getUTCDate()),c(i.getUTCHours()),c(i.getUTCMinutes()),c(i.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(o,"octstr")},s.prototype._encodeNull=function(){return this._createEncoderBuffer("")},s.prototype._encodeInt=function(t,e){if("string"==typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"!=typeof t&&!i.isBuffer(t)){const e=t.toArray();!t.sign&&128&e[0]&&e.unshift(0),t=i.from(e)}if(i.isBuffer(t)){let e=t.length;0===t.length&&e++;const o=i.alloc(e);return t.copy(o),0===t.length&&(o[0]=0),this._createEncoderBuffer(o)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);let o=1;for(let i=t;i>=256;i>>=8)o++;const n=new Array(o);for(let i=n.length-1;i>=0;i--)n[i]=255&t,t>>=8;return 128&n[0]&&n.unshift(0),this._createEncoderBuffer(i.from(n))},s.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},s.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getEncoder("der").tree},s.prototype._skipDefault=function(t,e,o){const i=this._baseState;let n;if(null===i.default)return!1;const r=t.join();if(void 0===i.defaultBuffer&&(i.defaultBuffer=this._encodeValue(i.default,e,o).join()),r.length!==i.defaultBuffer.length)return!1;for(n=0;n<r.length;n++)if(r[n]!==i.defaultBuffer[n])return!1;return!0}},{"../base/node":5,"../constants/der":7,inherits:136,"safer-buffer":182}],13:[function(t,e,o){"use strict";const i=o;i.der=t("./der"),i.pem=t("./pem")},{"./der":12,"./pem":14}],14:[function(t,e){"use strict";const o=t("inherits"),i=t("./der");function n(t){i.call(this,t),this.enc="pem"}o(n,i),e.exports=n,n.prototype.encode=function(t,e){const o=i.prototype.encode.call(this,t).toString("base64"),n=["-----BEGIN "+e.label+"-----"];for(let i=0;i<o.length;i+=64)n.push(o.slice(i,i+64));return n.push("-----END "+e.label+"-----"),n.join("\n")}},{"./der":12,inherits:136}],15:[function(t,e){(function(e,o){"use strict";function i(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}function r(t,e,o){if(r.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(o=e,e=10),this._init(t||0,e||10,o||"be"))}var a;"object"==typeof e?e.exports=r:o.BN=r,r.BN=r,r.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:t("buffer").Buffer}catch(T){}function s(t,e){var o=t.charCodeAt(e);return o>=65&&o<=70?o-55:o>=97&&o<=102?o-87:o-48&15}function c(t,e,o){var i=s(t,o);return o-1>=e&&(i|=s(t,o-1)<<4),i}function l(t,e,o,i){for(var n=0,r=Math.min(t.length,o),a=e;a<r;a++){var s=t.charCodeAt(a)-48;n*=i,n+=s>=49?s-49+10:s>=17?s-17+10:s}return n}r.isBN=function(t){return t instanceof r||null!==t&&"object"==typeof t&&t.constructor.wordSize===r.wordSize&&Array.isArray(t.words)},r.max=function(t,e){return t.cmp(e)>0?t:e},r.min=function(t,e){return t.cmp(e)<0?t:e},r.prototype._init=function(t,e,o){if("number"==typeof t)return this._initNumber(t,e,o);if("object"==typeof t)return this._initArray(t,e,o);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,o):(this._parseBase(t,e,n),"le"===o&&this._initArray(this.toArray(),e,o)))},r.prototype._initNumber=function(t,e,o){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===o&&this._initArray(this.toArray(),e,o)},r.prototype._initArray=function(t,e,o){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,a,s=0;if("be"===o)for(n=t.length-1,r=0;n>=0;n-=3)a=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[r]|=a<<s&67108863,this.words[r+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,r++);else if("le"===o)for(n=0,r=0;n<t.length;n+=3)a=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[r]|=a<<s&67108863,this.words[r+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,r++);return this.strip()},r.prototype._parseHex=function(t,e,o){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var n,r=0,a=0;if("be"===o)for(i=t.length-1;i>=e;i-=2)n=c(t,e,i)<<r,this.words[a]|=67108863&n,r>=18?(r-=18,a+=1,this.words[a]|=n>>>26):r+=8;else for(i=(t.length-e)%2==0?e+1:e;i<t.length;i+=2)n=c(t,e,i)<<r,this.words[a]|=67108863&n,r>=18?(r-=18,a+=1,this.words[a]|=n>>>26):r+=8;this.strip()},r.prototype._parseBase=function(t,e,o){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=e)i++;i--,n=n/e|0;for(var r=t.length-o,a=r%i,s=Math.min(r,r-a)+o,c=0,h=o;h<s;h+=i)c=l(t,h,h+i,e),this.imuln(n),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==a){var d=1;for(c=l(t,h,t.length,e),h=0;h<a;h++)d*=e;this.imuln(d),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},r.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},r.prototype.clone=function(){var t=new r(null);return this.copy(t),t},r.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],u=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(t){for(var e=new Array(t.bitLength()),o=0;o<e.length;o++){var i=o/26|0,n=o%26;e[o]=(t.words[i]&1<<n)>>>n}return e}function f(t,e,o){o.negative=e.negative^t.negative;var i=t.length+e.length|0;o.length=i,i=i-1|0;var n=0|t.words[0],r=0|e.words[0],a=n*r,s=67108863&a,c=a/67108864|0;o.words[0]=s;for(var l=1;l<i;l++){for(var h=c>>>26,d=67108863&c,u=Math.min(l,e.length-1),p=Math.max(0,l-t.length+1);p<=u;p++){var f=l-p|0;h+=(a=(n=0|t.words[f])*(r=0|e.words[p])+d)/67108864|0,d=67108863&a}o.words[l]=0|d,c=0|h}return 0!==c?o.words[l]=0|c:o.length--,o.strip()}r.prototype.toString=function(t,e){var o;if(e=0|e||1,16===(t=t||10)||"hex"===t){o="";for(var n=0,r=0,a=0;a<this.length;a++){var s=this.words[a],c=(16777215&(s<<n|r)).toString(16);o=0!=(r=s>>>24-n&16777215)||a!==this.length-1?h[6-c.length]+c+o:c+o,(n+=2)>=26&&(n-=26,a--)}for(0!==r&&(o=r.toString(16)+o);o.length%e!=0;)o="0"+o;return 0!==this.negative&&(o="-"+o),o}if(t===(0|t)&&t>=2&&t<=36){var l=d[t],p=u[t];o="";var f=this.clone();for(f.negative=0;!f.isZero();){var g=f.modn(p).toString(t);o=(f=f.idivn(p)).isZero()?g+o:h[l-g.length]+g+o}for(this.isZero()&&(o="0"+o);o.length%e!=0;)o="0"+o;return 0!==this.negative&&(o="-"+o),o}i(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(t,e){return i(void 0!==a),this.toArrayLike(a,t,e)},r.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},r.prototype.toArrayLike=function(t,e,o){var n=this.byteLength(),r=o||Math.max(1,n);i(n<=r,"byte array longer than desired length"),i(r>0,"Requested array length <= 0"),this.strip();var a,s,c="le"===e,l=new t(r),h=this.clone();if(c){for(s=0;!h.isZero();s++)a=h.andln(255),h.iushrn(8),l[s]=a;for(;s<r;s++)l[s]=0}else{for(s=0;s<r-n;s++)l[s]=0;for(s=0;!h.isZero();s++)a=h.andln(255),h.iushrn(8),l[r-s-1]=a}return l},Math.clz32?r.prototype._countBits=function(t){return 32-Math.clz32(t)}:r.prototype._countBits=function(t){var e=t,o=0;return e>=4096&&(o+=13,e>>>=13),e>=64&&(o+=7,e>>>=7),e>=8&&(o+=4,e>>>=4),e>=2&&(o+=2,e>>>=2),o+e},r.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,o=0;return 0==(8191&e)&&(o+=13,e>>>=13),0==(127&e)&&(o+=7,e>>>=7),0==(15&e)&&(o+=4,e>>>=4),0==(3&e)&&(o+=2,e>>>=2),0==(1&e)&&o++,o},r.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var o=this._zeroBits(this.words[e]);if(t+=o,26!==o)break}return t},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},r.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},r.prototype.ior=function(t){return i(0==(this.negative|t.negative)),this.iuor(t)},r.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},r.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},r.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var o=0;o<e.length;o++)this.words[o]=this.words[o]&t.words[o];return this.length=e.length,this.strip()},r.prototype.iand=function(t){return i(0==(this.negative|t.negative)),this.iuand(t)},r.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},r.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},r.prototype.iuxor=function(t){var e,o;this.length>t.length?(e=this,o=t):(e=t,o=this);for(var i=0;i<o.length;i++)this.words[i]=e.words[i]^o.words[i];if(this!==e)for(;i<e.length;i++)this.words[i]=e.words[i];return this.length=e.length,this.strip()},r.prototype.ixor=function(t){return i(0==(this.negative|t.negative)),this.iuxor(t)},r.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},r.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},r.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),o=t%26;this._expand(e),o>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return o>0&&(this.words[n]=~this.words[n]&67108863>>26-o),this.strip()},r.prototype.notn=function(t){return this.clone().inotn(t)},r.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var o=t/26|0,n=t%26;return this._expand(o+1),this.words[o]=e?this.words[o]|1<<n:this.words[o]&~(1<<n),this.strip()},r.prototype.iadd=function(t){var e,o,i;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(o=this,i=t):(o=t,i=this);for(var n=0,r=0;r<i.length;r++)e=(0|o.words[r])+(0|i.words[r])+n,this.words[r]=67108863&e,n=e>>>26;for(;0!==n&&r<o.length;r++)e=(0|o.words[r])+n,this.words[r]=67108863&e,n=e>>>26;if(this.length=o.length,0!==n)this.words[this.length]=n,this.length++;else if(o!==this)for(;r<o.length;r++)this.words[r]=o.words[r];return this},r.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},r.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var o,i,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(o=this,i=t):(o=t,i=this);for(var r=0,a=0;a<i.length;a++)r=(e=(0|o.words[a])-(0|i.words[a])+r)>>26,this.words[a]=67108863&e;for(;0!==r&&a<o.length;a++)r=(e=(0|o.words[a])+r)>>26,this.words[a]=67108863&e;if(0===r&&a<o.length&&o!==this)for(;a<o.length;a++)this.words[a]=o.words[a];return this.length=Math.max(this.length,a),o!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,e,o){var i,n,r,a=t.words,s=e.words,c=o.words,l=0,h=0|a[0],d=8191&h,u=h>>>13,p=0|a[1],f=8191&p,g=p>>>13,m=0|a[2],v=8191&m,y=m>>>13,_=0|a[3],C=8191&_,b=_>>>13,S=0|a[4],w=8191&S,A=S>>>13,k=0|a[5],P=8191&k,T=k>>>13,B=0|a[6],M=8191&B,I=B>>>13,R=0|a[7],L=8191&R,D=R>>>13,N=0|a[8],E=8191&N,x=N>>>13,U=0|a[9],O=8191&U,F=U>>>13,W=0|s[0],V=8191&W,H=W>>>13,G=0|s[1],j=8191&G,z=G>>>13,q=0|s[2],K=8191&q,X=q>>>13,J=0|s[3],Y=8191&J,Q=J>>>13,Z=0|s[4],$=8191&Z,tt=Z>>>13,et=0|s[5],ot=8191&et,it=et>>>13,nt=0|s[6],rt=8191&nt,at=nt>>>13,st=0|s[7],ct=8191&st,lt=st>>>13,ht=0|s[8],dt=8191&ht,ut=ht>>>13,pt=0|s[9],ft=8191&pt,gt=pt>>>13;o.negative=t.negative^e.negative,o.length=19;var mt=(l+(i=Math.imul(d,V))|0)+((8191&(n=(n=Math.imul(d,H))+Math.imul(u,V)|0))<<13)|0;l=((r=Math.imul(u,H))+(n>>>13)|0)+(mt>>>26)|0,mt&=67108863,i=Math.imul(f,V),n=(n=Math.imul(f,H))+Math.imul(g,V)|0,r=Math.imul(g,H);var vt=(l+(i=i+Math.imul(d,j)|0)|0)+((8191&(n=(n=n+Math.imul(d,z)|0)+Math.imul(u,j)|0))<<13)|0;l=((r=r+Math.imul(u,z)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,i=Math.imul(v,V),n=(n=Math.imul(v,H))+Math.imul(y,V)|0,r=Math.imul(y,H),i=i+Math.imul(f,j)|0,n=(n=n+Math.imul(f,z)|0)+Math.imul(g,j)|0,r=r+Math.imul(g,z)|0;var yt=(l+(i=i+Math.imul(d,K)|0)|0)+((8191&(n=(n=n+Math.imul(d,X)|0)+Math.imul(u,K)|0))<<13)|0;l=((r=r+Math.imul(u,X)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,i=Math.imul(C,V),n=(n=Math.imul(C,H))+Math.imul(b,V)|0,r=Math.imul(b,H),i=i+Math.imul(v,j)|0,n=(n=n+Math.imul(v,z)|0)+Math.imul(y,j)|0,r=r+Math.imul(y,z)|0,i=i+Math.imul(f,K)|0,n=(n=n+Math.imul(f,X)|0)+Math.imul(g,K)|0,r=r+Math.imul(g,X)|0;var _t=(l+(i=i+Math.imul(d,Y)|0)|0)+((8191&(n=(n=n+Math.imul(d,Q)|0)+Math.imul(u,Y)|0))<<13)|0;l=((r=r+Math.imul(u,Q)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,i=Math.imul(w,V),n=(n=Math.imul(w,H))+Math.imul(A,V)|0,r=Math.imul(A,H),i=i+Math.imul(C,j)|0,n=(n=n+Math.imul(C,z)|0)+Math.imul(b,j)|0,r=r+Math.imul(b,z)|0,i=i+Math.imul(v,K)|0,n=(n=n+Math.imul(v,X)|0)+Math.imul(y,K)|0,r=r+Math.imul(y,X)|0,i=i+Math.imul(f,Y)|0,n=(n=n+Math.imul(f,Q)|0)+Math.imul(g,Y)|0,r=r+Math.imul(g,Q)|0;var Ct=(l+(i=i+Math.imul(d,$)|0)|0)+((8191&(n=(n=n+Math.imul(d,tt)|0)+Math.imul(u,$)|0))<<13)|0;l=((r=r+Math.imul(u,tt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,i=Math.imul(P,V),n=(n=Math.imul(P,H))+Math.imul(T,V)|0,r=Math.imul(T,H),i=i+Math.imul(w,j)|0,n=(n=n+Math.imul(w,z)|0)+Math.imul(A,j)|0,r=r+Math.imul(A,z)|0,i=i+Math.imul(C,K)|0,n=(n=n+Math.imul(C,X)|0)+Math.imul(b,K)|0,r=r+Math.imul(b,X)|0,i=i+Math.imul(v,Y)|0,n=(n=n+Math.imul(v,Q)|0)+Math.imul(y,Y)|0,r=r+Math.imul(y,Q)|0,i=i+Math.imul(f,$)|0,n=(n=n+Math.imul(f,tt)|0)+Math.imul(g,$)|0,r=r+Math.imul(g,tt)|0;var bt=(l+(i=i+Math.imul(d,ot)|0)|0)+((8191&(n=(n=n+Math.imul(d,it)|0)+Math.imul(u,ot)|0))<<13)|0;l=((r=r+Math.imul(u,it)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,i=Math.imul(M,V),n=(n=Math.imul(M,H))+Math.imul(I,V)|0,r=Math.imul(I,H),i=i+Math.imul(P,j)|0,n=(n=n+Math.imul(P,z)|0)+Math.imul(T,j)|0,r=r+Math.imul(T,z)|0,i=i+Math.imul(w,K)|0,n=(n=n+Math.imul(w,X)|0)+Math.imul(A,K)|0,r=r+Math.imul(A,X)|0,i=i+Math.imul(C,Y)|0,n=(n=n+Math.imul(C,Q)|0)+Math.imul(b,Y)|0,r=r+Math.imul(b,Q)|0,i=i+Math.imul(v,$)|0,n=(n=n+Math.imul(v,tt)|0)+Math.imul(y,$)|0,r=r+Math.imul(y,tt)|0,i=i+Math.imul(f,ot)|0,n=(n=n+Math.imul(f,it)|0)+Math.imul(g,ot)|0,r=r+Math.imul(g,it)|0;var St=(l+(i=i+Math.imul(d,rt)|0)|0)+((8191&(n=(n=n+Math.imul(d,at)|0)+Math.imul(u,rt)|0))<<13)|0;l=((r=r+Math.imul(u,at)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,i=Math.imul(L,V),n=(n=Math.imul(L,H))+Math.imul(D,V)|0,r=Math.imul(D,H),i=i+Math.imul(M,j)|0,n=(n=n+Math.imul(M,z)|0)+Math.imul(I,j)|0,r=r+Math.imul(I,z)|0,i=i+Math.imul(P,K)|0,n=(n=n+Math.imul(P,X)|0)+Math.imul(T,K)|0,r=r+Math.imul(T,X)|0,i=i+Math.imul(w,Y)|0,n=(n=n+Math.imul(w,Q)|0)+Math.imul(A,Y)|0,r=r+Math.imul(A,Q)|0,i=i+Math.imul(C,$)|0,n=(n=n+Math.imul(C,tt)|0)+Math.imul(b,$)|0,r=r+Math.imul(b,tt)|0,i=i+Math.imul(v,ot)|0,n=(n=n+Math.imul(v,it)|0)+Math.imul(y,ot)|0,r=r+Math.imul(y,it)|0,i=i+Math.imul(f,rt)|0,n=(n=n+Math.imul(f,at)|0)+Math.imul(g,rt)|0,r=r+Math.imul(g,at)|0;var wt=(l+(i=i+Math.imul(d,ct)|0)|0)+((8191&(n=(n=n+Math.imul(d,lt)|0)+Math.imul(u,ct)|0))<<13)|0;l=((r=r+Math.imul(u,lt)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,i=Math.imul(E,V),n=(n=Math.imul(E,H))+Math.imul(x,V)|0,r=Math.imul(x,H),i=i+Math.imul(L,j)|0,n=(n=n+Math.imul(L,z)|0)+Math.imul(D,j)|0,r=r+Math.imul(D,z)|0,i=i+Math.imul(M,K)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(I,K)|0,r=r+Math.imul(I,X)|0,i=i+Math.imul(P,Y)|0,n=(n=n+Math.imul(P,Q)|0)+Math.imul(T,Y)|0,r=r+Math.imul(T,Q)|0,i=i+Math.imul(w,$)|0,n=(n=n+Math.imul(w,tt)|0)+Math.imul(A,$)|0,r=r+Math.imul(A,tt)|0,i=i+Math.imul(C,ot)|0,n=(n=n+Math.imul(C,it)|0)+Math.imul(b,ot)|0,r=r+Math.imul(b,it)|0,i=i+Math.imul(v,rt)|0,n=(n=n+Math.imul(v,at)|0)+Math.imul(y,rt)|0,r=r+Math.imul(y,at)|0,i=i+Math.imul(f,ct)|0,n=(n=n+Math.imul(f,lt)|0)+Math.imul(g,ct)|0,r=r+Math.imul(g,lt)|0;var At=(l+(i=i+Math.imul(d,dt)|0)|0)+((8191&(n=(n=n+Math.imul(d,ut)|0)+Math.imul(u,dt)|0))<<13)|0;l=((r=r+Math.imul(u,ut)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,i=Math.imul(O,V),n=(n=Math.imul(O,H))+Math.imul(F,V)|0,r=Math.imul(F,H),i=i+Math.imul(E,j)|0,n=(n=n+Math.imul(E,z)|0)+Math.imul(x,j)|0,r=r+Math.imul(x,z)|0,i=i+Math.imul(L,K)|0,n=(n=n+Math.imul(L,X)|0)+Math.imul(D,K)|0,r=r+Math.imul(D,X)|0,i=i+Math.imul(M,Y)|0,n=(n=n+Math.imul(M,Q)|0)+Math.imul(I,Y)|0,r=r+Math.imul(I,Q)|0,i=i+Math.imul(P,$)|0,n=(n=n+Math.imul(P,tt)|0)+Math.imul(T,$)|0,r=r+Math.imul(T,tt)|0,i=i+Math.imul(w,ot)|0,n=(n=n+Math.imul(w,it)|0)+Math.imul(A,ot)|0,r=r+Math.imul(A,it)|0,i=i+Math.imul(C,rt)|0,n=(n=n+Math.imul(C,at)|0)+Math.imul(b,rt)|0,r=r+Math.imul(b,at)|0,i=i+Math.imul(v,ct)|0,n=(n=n+Math.imul(v,lt)|0)+Math.imul(y,ct)|0,r=r+Math.imul(y,lt)|0,i=i+Math.imul(f,dt)|0,n=(n=n+Math.imul(f,ut)|0)+Math.imul(g,dt)|0,r=r+Math.imul(g,ut)|0;var kt=(l+(i=i+Math.imul(d,ft)|0)|0)+((8191&(n=(n=n+Math.imul(d,gt)|0)+Math.imul(u,ft)|0))<<13)|0;l=((r=r+Math.imul(u,gt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,i=Math.imul(O,j),n=(n=Math.imul(O,z))+Math.imul(F,j)|0,r=Math.imul(F,z),i=i+Math.imul(E,K)|0,n=(n=n+Math.imul(E,X)|0)+Math.imul(x,K)|0,r=r+Math.imul(x,X)|0,i=i+Math.imul(L,Y)|0,n=(n=n+Math.imul(L,Q)|0)+Math.imul(D,Y)|0,r=r+Math.imul(D,Q)|0,i=i+Math.imul(M,$)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(I,$)|0,r=r+Math.imul(I,tt)|0,i=i+Math.imul(P,ot)|0,n=(n=n+Math.imul(P,it)|0)+Math.imul(T,ot)|0,r=r+Math.imul(T,it)|0,i=i+Math.imul(w,rt)|0,n=(n=n+Math.imul(w,at)|0)+Math.imul(A,rt)|0,r=r+Math.imul(A,at)|0,i=i+Math.imul(C,ct)|0,n=(n=n+Math.imul(C,lt)|0)+Math.imul(b,ct)|0,r=r+Math.imul(b,lt)|0,i=i+Math.imul(v,dt)|0,n=(n=n+Math.imul(v,ut)|0)+Math.imul(y,dt)|0,r=r+Math.imul(y,ut)|0;var Pt=(l+(i=i+Math.imul(f,ft)|0)|0)+((8191&(n=(n=n+Math.imul(f,gt)|0)+Math.imul(g,ft)|0))<<13)|0;l=((r=r+Math.imul(g,gt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,i=Math.imul(O,K),n=(n=Math.imul(O,X))+Math.imul(F,K)|0,r=Math.imul(F,X),i=i+Math.imul(E,Y)|0,n=(n=n+Math.imul(E,Q)|0)+Math.imul(x,Y)|0,r=r+Math.imul(x,Q)|0,i=i+Math.imul(L,$)|0,n=(n=n+Math.imul(L,tt)|0)+Math.imul(D,$)|0,r=r+Math.imul(D,tt)|0,i=i+Math.imul(M,ot)|0,n=(n=n+Math.imul(M,it)|0)+Math.imul(I,ot)|0,r=r+Math.imul(I,it)|0,i=i+Math.imul(P,rt)|0,n=(n=n+Math.imul(P,at)|0)+Math.imul(T,rt)|0,r=r+Math.imul(T,at)|0,i=i+Math.imul(w,ct)|0,n=(n=n+Math.imul(w,lt)|0)+Math.imul(A,ct)|0,r=r+Math.imul(A,lt)|0,i=i+Math.imul(C,dt)|0,n=(n=n+Math.imul(C,ut)|0)+Math.imul(b,dt)|0,r=r+Math.imul(b,ut)|0;var Tt=(l+(i=i+Math.imul(v,ft)|0)|0)+((8191&(n=(n=n+Math.imul(v,gt)|0)+Math.imul(y,ft)|0))<<13)|0;l=((r=r+Math.imul(y,gt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,i=Math.imul(O,Y),n=(n=Math.imul(O,Q))+Math.imul(F,Y)|0,r=Math.imul(F,Q),i=i+Math.imul(E,$)|0,n=(n=n+Math.imul(E,tt)|0)+Math.imul(x,$)|0,r=r+Math.imul(x,tt)|0,i=i+Math.imul(L,ot)|0,n=(n=n+Math.imul(L,it)|0)+Math.imul(D,ot)|0,r=r+Math.imul(D,it)|0,i=i+Math.imul(M,rt)|0,n=(n=n+Math.imul(M,at)|0)+Math.imul(I,rt)|0,r=r+Math.imul(I,at)|0,i=i+Math.imul(P,ct)|0,n=(n=n+Math.imul(P,lt)|0)+Math.imul(T,ct)|0,r=r+Math.imul(T,lt)|0,i=i+Math.imul(w,dt)|0,n=(n=n+Math.imul(w,ut)|0)+Math.imul(A,dt)|0,r=r+Math.imul(A,ut)|0;var Bt=(l+(i=i+Math.imul(C,ft)|0)|0)+((8191&(n=(n=n+Math.imul(C,gt)|0)+Math.imul(b,ft)|0))<<13)|0;l=((r=r+Math.imul(b,gt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,i=Math.imul(O,$),n=(n=Math.imul(O,tt))+Math.imul(F,$)|0,r=Math.imul(F,tt),i=i+Math.imul(E,ot)|0,n=(n=n+Math.imul(E,it)|0)+Math.imul(x,ot)|0,r=r+Math.imul(x,it)|0,i=i+Math.imul(L,rt)|0,n=(n=n+Math.imul(L,at)|0)+Math.imul(D,rt)|0,r=r+Math.imul(D,at)|0,i=i+Math.imul(M,ct)|0,n=(n=n+Math.imul(M,lt)|0)+Math.imul(I,ct)|0,r=r+Math.imul(I,lt)|0,i=i+Math.imul(P,dt)|0,n=(n=n+Math.imul(P,ut)|0)+Math.imul(T,dt)|0,r=r+Math.imul(T,ut)|0;var Mt=(l+(i=i+Math.imul(w,ft)|0)|0)+((8191&(n=(n=n+Math.imul(w,gt)|0)+Math.imul(A,ft)|0))<<13)|0;l=((r=r+Math.imul(A,gt)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,i=Math.imul(O,ot),n=(n=Math.imul(O,it))+Math.imul(F,ot)|0,r=Math.imul(F,it),i=i+Math.imul(E,rt)|0,n=(n=n+Math.imul(E,at)|0)+Math.imul(x,rt)|0,r=r+Math.imul(x,at)|0,i=i+Math.imul(L,ct)|0,n=(n=n+Math.imul(L,lt)|0)+Math.imul(D,ct)|0,r=r+Math.imul(D,lt)|0,i=i+Math.imul(M,dt)|0,n=(n=n+Math.imul(M,ut)|0)+Math.imul(I,dt)|0,r=r+Math.imul(I,ut)|0;var It=(l+(i=i+Math.imul(P,ft)|0)|0)+((8191&(n=(n=n+Math.imul(P,gt)|0)+Math.imul(T,ft)|0))<<13)|0;l=((r=r+Math.imul(T,gt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,i=Math.imul(O,rt),n=(n=Math.imul(O,at))+Math.imul(F,rt)|0,r=Math.imul(F,at),i=i+Math.imul(E,ct)|0,n=(n=n+Math.imul(E,lt)|0)+Math.imul(x,ct)|0,r=r+Math.imul(x,lt)|0,i=i+Math.imul(L,dt)|0,n=(n=n+Math.imul(L,ut)|0)+Math.imul(D,dt)|0,r=r+Math.imul(D,ut)|0;var Rt=(l+(i=i+Math.imul(M,ft)|0)|0)+((8191&(n=(n=n+Math.imul(M,gt)|0)+Math.imul(I,ft)|0))<<13)|0;l=((r=r+Math.imul(I,gt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,i=Math.imul(O,ct),n=(n=Math.imul(O,lt))+Math.imul(F,ct)|0,r=Math.imul(F,lt),i=i+Math.imul(E,dt)|0,n=(n=n+Math.imul(E,ut)|0)+Math.imul(x,dt)|0,r=r+Math.imul(x,ut)|0;var Lt=(l+(i=i+Math.imul(L,ft)|0)|0)+((8191&(n=(n=n+Math.imul(L,gt)|0)+Math.imul(D,ft)|0))<<13)|0;l=((r=r+Math.imul(D,gt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,i=Math.imul(O,dt),n=(n=Math.imul(O,ut))+Math.imul(F,dt)|0,r=Math.imul(F,ut);var Dt=(l+(i=i+Math.imul(E,ft)|0)|0)+((8191&(n=(n=n+Math.imul(E,gt)|0)+Math.imul(x,ft)|0))<<13)|0;l=((r=r+Math.imul(x,gt)|0)+(n>>>13)|0)+(Dt>>>26)|0,Dt&=67108863;var Nt=(l+(i=Math.imul(O,ft))|0)+((8191&(n=(n=Math.imul(O,gt))+Math.imul(F,ft)|0))<<13)|0;return l=((r=Math.imul(F,gt))+(n>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,c[0]=mt,c[1]=vt,c[2]=yt,c[3]=_t,c[4]=Ct,c[5]=bt,c[6]=St,c[7]=wt,c[8]=At,c[9]=kt,c[10]=Pt,c[11]=Tt,c[12]=Bt,c[13]=Mt,c[14]=It,c[15]=Rt,c[16]=Lt,c[17]=Dt,c[18]=Nt,0!==l&&(c[19]=l,o.length++),o};function m(t,e,o){o.negative=e.negative^t.negative,o.length=t.length+e.length;for(var i=0,n=0,r=0;r<o.length-1;r++){var a=n;n=0;for(var s=67108863&i,c=Math.min(r,e.length-1),l=Math.max(0,r-t.length+1);l<=c;l++){var h=r-l,d=(0|t.words[h])*(0|e.words[l]),u=67108863&d;s=67108863&(u=u+s|0),n+=(a=(a=a+(d/67108864|0)|0)+(u>>>26)|0)>>>26,a&=67108863}o.words[r]=s,i=a,a=n}return 0!==i?o.words[r]=i:o.length--,o.strip()}function v(t,e,o){return(new y).mulp(t,e,o)}function y(t,e){this.x=t,this.y=e}Math.imul||(g=f),r.prototype.mulTo=function(t,e){var o=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,e):o<63?f(this,t,e):o<1024?m(this,t,e):v(this,t,e)},y.prototype.makeRBT=function(t){for(var e=new Array(t),o=r.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,o,t);return e},y.prototype.revBin=function(t,e,o){if(0===t||t===o-1)return t;for(var i=0,n=0;n<e;n++)i|=(1&t)<<e-n-1,t>>=1;return i},y.prototype.permute=function(t,e,o,i,n,r){for(var a=0;a<r;a++)i[a]=e[t[a]],n[a]=o[t[a]]},y.prototype.transform=function(t,e,o,i,n,r){this.permute(r,t,e,o,i,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,c=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),h=0;h<n;h+=s)for(var d=c,u=l,p=0;p<a;p++){var f=o[h+p],g=i[h+p],m=o[h+p+a],v=i[h+p+a],y=d*m-u*v;v=d*v+u*m,m=y,o[h+p]=f+m,i[h+p]=g+v,o[h+p+a]=f-m,i[h+p+a]=g-v,p!==s&&(y=c*d-l*u,u=c*u+l*d,d=y)}},y.prototype.guessLen13b=function(t,e){var o=1|Math.max(e,t),i=1&o,n=0;for(o=o/2|0;o;o>>>=1)n++;return 1<<n+1+i},y.prototype.conjugate=function(t,e,o){if(!(o<=1))for(var i=0;i<o/2;i++){var n=t[i];t[i]=t[o-i-1],t[o-i-1]=n,n=e[i],e[i]=-e[o-i-1],e[o-i-1]=-n}},y.prototype.normalize13b=function(t,e){for(var o=0,i=0;i<e/2;i++){var n=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+o;t[i]=67108863&n,o=n<67108864?0:n/67108864|0}return t},y.prototype.convert13b=function(t,e,o,n){for(var r=0,a=0;a<e;a++)r+=0|t[a],o[2*a]=8191&r,r>>>=13,o[2*a+1]=8191&r,r>>>=13;for(a=2*e;a<n;++a)o[a]=0;i(0===r),i(0==(-8192&r))},y.prototype.stub=function(t){for(var e=new Array(t),o=0;o<t;o++)e[o]=0;return e},y.prototype.mulp=function(t,e,o){var i=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(i),r=this.stub(i),a=new Array(i),s=new Array(i),c=new Array(i),l=new Array(i),h=new Array(i),d=new Array(i),u=o.words;u.length=i,this.convert13b(t.words,t.length,a,i),this.convert13b(e.words,e.length,l,i),this.transform(a,r,s,c,i,n),this.transform(l,r,h,d,i,n);for(var p=0;p<i;p++){var f=s[p]*h[p]-c[p]*d[p];c[p]=s[p]*d[p]+c[p]*h[p],s[p]=f}return this.conjugate(s,c,i),this.transform(s,c,u,r,i,n),this.conjugate(u,r,i),this.normalize13b(u,i),o.negative=t.negative^e.negative,o.length=t.length+e.length,o.strip()},r.prototype.mul=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},r.prototype.mulf=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),v(this,t,e)},r.prototype.imul=function(t){return this.clone().mulTo(t,this)},r.prototype.imuln=function(t){i("number"==typeof t),i(t<67108864);for(var e=0,o=0;o<this.length;o++){var n=(0|this.words[o])*t,r=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=r>>>26,this.words[o]=67108863&r}return 0!==e&&(this.words[o]=e,this.length++),this},r.prototype.muln=function(t){return this.clone().imuln(t)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(t){var e=p(t);if(0===e.length)return new r(1);for(var o=this,i=0;i<e.length&&0===e[i];i++,o=o.sqr());if(++i<e.length)for(var n=o.sqr();i<e.length;i++,n=n.sqr())0!==e[i]&&(o=o.mul(n));return o},r.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,o=t%26,n=(t-o)/26,r=67108863>>>26-o<<26-o;if(0!==o){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&r,c=(0|this.words[e])-s<<o;this.words[e]=c|a,a=s>>>26-o}a&&(this.words[e]=a,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},r.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},r.prototype.iushrn=function(t,e,o){var n;i("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var r=t%26,a=Math.min((t-r)/26,this.length),s=67108863^67108863>>>r<<r,c=o;if(n-=a,n=Math.max(0,n),c){for(var l=0;l<a;l++)c.words[l]=this.words[l];c.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var h=0;for(l=this.length-1;l>=0&&(0!==h||l>=n);l--){var d=0|this.words[l];this.words[l]=h<<26-r|d>>>r,h=d&s}return c&&0!==h&&(c.words[c.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(t,e,o){return i(0===this.negative),this.iushrn(t,e,o)},r.prototype.shln=function(t){return this.clone().ishln(t)},r.prototype.ushln=function(t){return this.clone().iushln(t)},r.prototype.shrn=function(t){return this.clone().ishrn(t)},r.prototype.ushrn=function(t){return this.clone().iushrn(t)},r.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,o=(t-e)/26,n=1<<e;return!(this.length<=o||!(this.words[o]&n))},r.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,o=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=o)return this;if(0!==e&&o++,this.length=Math.min(o,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},r.prototype.maskn=function(t){return this.clone().imaskn(t)},r.prototype.iaddn=function(t){return i("number"==typeof t),i(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},r.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},r.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},r.prototype.addn=function(t){return this.clone().iaddn(t)},r.prototype.subn=function(t){return this.clone().isubn(t)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(t,e,o){var n,r,a=t.length+o;this._expand(a);var s=0;for(n=0;n<t.length;n++){r=(0|this.words[n+o])+s;var c=(0|t.words[n])*e;s=((r-=67108863&c)>>26)-(c/67108864|0),this.words[n+o]=67108863&r}for(;n<this.length-o;n++)s=(r=(0|this.words[n+o])+s)>>26,this.words[n+o]=67108863&r;if(0===s)return this.strip();for(i(-1===s),s=0,n=0;n<this.length;n++)s=(r=-(0|this.words[n])+s)>>26,this.words[n]=67108863&r;return this.negative=1,this.strip()},r.prototype._wordDiv=function(t,e){var o=(this.length,t.length),i=this.clone(),n=t,a=0|n.words[n.length-1];0!=(o=26-this._countBits(a))&&(n=n.ushln(o),i.iushln(o),a=0|n.words[n.length-1]);var s,c=i.length-n.length;if("mod"!==e){(s=new r(null)).length=c+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var h=i.clone()._ishlnsubmul(n,1,c);0===h.negative&&(i=h,s&&(s.words[c]=1));for(var d=c-1;d>=0;d--){var u=67108864*(0|i.words[n.length+d])+(0|i.words[n.length+d-1]);for(u=Math.min(u/a|0,67108863),i._ishlnsubmul(n,u,d);0!==i.negative;)u--,i.negative=0,i._ishlnsubmul(n,1,d),i.isZero()||(i.negative^=1);s&&(s.words[d]=u)}return s&&s.strip(),i.strip(),"div"!==e&&0!==o&&i.iushrn(o),{div:s||null,mod:i}},r.prototype.divmod=function(t,e,o){return i(!t.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(n=s.div.neg()),"div"!==e&&(a=s.mod.neg(),o&&0!==a.negative&&a.iadd(t)),{div:n,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(n=s.div.neg()),{div:n,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),o&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new r(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new r(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new r(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,a,s},r.prototype.div=function(t){return this.divmod(t,"div",!1).div},r.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},r.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},r.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var o=0!==e.div.negative?e.mod.isub(t):e.mod,i=t.ushrn(1),n=t.andln(1),r=o.cmp(i);return r<0||1===n&&0===r?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},r.prototype.modn=function(t){i(t<=67108863);for(var e=(1<<26)%t,o=0,n=this.length-1;n>=0;n--)o=(e*o+(0|this.words[n]))%t;return o},r.prototype.idivn=function(t){i(t<=67108863);for(var e=0,o=this.length-1;o>=0;o--){var n=(0|this.words[o])+67108864*e;this.words[o]=n/t|0,e=n%t}return this.strip()},r.prototype.divn=function(t){return this.clone().idivn(t)},r.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,o=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new r(1),a=new r(0),s=new r(0),c=new r(1),l=0;e.isEven()&&o.isEven();)e.iushrn(1),o.iushrn(1),++l;for(var h=o.clone(),d=e.clone();!e.isZero();){for(var u=0,p=1;0==(e.words[0]&p)&&u<26;++u,p<<=1);if(u>0)for(e.iushrn(u);u-- >0;)(n.isOdd()||a.isOdd())&&(n.iadd(h),a.isub(d)),n.iushrn(1),a.iushrn(1);for(var f=0,g=1;0==(o.words[0]&g)&&f<26;++f,g<<=1);if(f>0)for(o.iushrn(f);f-- >0;)(s.isOdd()||c.isOdd())&&(s.iadd(h),c.isub(d)),s.iushrn(1),c.iushrn(1);e.cmp(o)>=0?(e.isub(o),n.isub(s),a.isub(c)):(o.isub(e),s.isub(n),c.isub(a))}return{a:s,b:c,gcd:o.iushln(l)}},r.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e=this,o=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,a=new r(1),s=new r(0),c=o.clone();e.cmpn(1)>0&&o.cmpn(1)>0;){for(var l=0,h=1;0==(e.words[0]&h)&&l<26;++l,h<<=1);if(l>0)for(e.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);for(var d=0,u=1;0==(o.words[0]&u)&&d<26;++d,u<<=1);if(d>0)for(o.iushrn(d);d-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);e.cmp(o)>=0?(e.isub(o),a.isub(s)):(o.isub(e),s.isub(a))}return(n=0===e.cmpn(1)?a:s).cmpn(0)<0&&n.iadd(t),n},r.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),o=t.clone();e.negative=0,o.negative=0;for(var i=0;e.isEven()&&o.isEven();i++)e.iushrn(1),o.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;o.isEven();)o.iushrn(1);var n=e.cmp(o);if(n<0){var r=e;e=o,o=r}else if(0===n||0===o.cmpn(1))break;e.isub(o)}return o.iushln(i)},r.prototype.invm=function(t){return this.egcd(t).a.umod(t)},r.prototype.isEven=function(){return 0==(1&this.words[0])},r.prototype.isOdd=function(){return 1==(1&this.words[0])},r.prototype.andln=function(t){return this.words[0]&t},r.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,o=(t-e)/26,n=1<<e;if(this.length<=o)return this._expand(o+1),this.words[o]|=n,this;for(var r=n,a=o;0!==r&&a<this.length;a++){var s=0|this.words[a];r=(s+=r)>>>26,s&=67108863,this.words[a]=s}return 0!==r&&(this.words[a]=r,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(t){var e,o=t<0;if(0!==this.negative&&!o)return-1;if(0===this.negative&&o)return 1;if(this.strip(),this.length>1)e=1;else{o&&(t=-t),i(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},r.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},r.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,o=this.length-1;o>=0;o--){var i=0|this.words[o],n=0|t.words[o];if(i!==n){i<n?e=-1:i>n&&(e=1);break}}return e},r.prototype.gtn=function(t){return 1===this.cmpn(t)},r.prototype.gt=function(t){return 1===this.cmp(t)},r.prototype.gten=function(t){return this.cmpn(t)>=0},r.prototype.gte=function(t){return this.cmp(t)>=0},r.prototype.ltn=function(t){return-1===this.cmpn(t)},r.prototype.lt=function(t){return-1===this.cmp(t)},r.prototype.lten=function(t){return this.cmpn(t)<=0},r.prototype.lte=function(t){return this.cmp(t)<=0},r.prototype.eqn=function(t){return 0===this.cmpn(t)},r.prototype.eq=function(t){return 0===this.cmp(t)},r.red=function(t){return new k(t)},r.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},r.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(t){return this.red=t,this},r.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},r.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},r.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},r.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},r.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},r.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},r.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},r.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},r.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var _={k256:null,p224:null,p192:null,p25519:null};function C(t,e){this.name=t,this.p=new r(e,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){C.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){C.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){C.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){C.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(t){if("string"==typeof t){var e=r._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function P(t){k.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}C.prototype._tmp=function(){var t=new r(null);return t.words=new Array(Math.ceil(this.n/13)),t},C.prototype.ireduce=function(t){var e,o=t;do{this.split(o,this.tmp),e=(o=(o=this.imulK(o)).iadd(this.tmp)).bitLength()}while(e>this.n);var i=e<this.n?-1:o.ucmp(this.p);return 0===i?(o.words[0]=0,o.length=1):i>0?o.isub(this.p):void 0!==o.strip?o.strip():o._strip(),o},C.prototype.split=function(t,e){t.iushrn(this.n,0,e)},C.prototype.imulK=function(t){return t.imul(this.k)},n(b,C),b.prototype.split=function(t,e){for(var o=Math.min(t.length,9),i=0;i<o;i++)e.words[i]=t.words[i];if(e.length=o,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,i=10;i<t.length;i++){var r=0|t.words[i];t.words[i-10]=(4194303&r)<<4|n>>>22,n=r}n>>>=22,t.words[i-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,o=0;o<t.length;o++){var i=0|t.words[o];e+=977*i,t.words[o]=67108863&e,e=64*i+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(S,C),n(w,C),n(A,C),A.prototype.imulK=function(t){for(var e=0,o=0;o<t.length;o++){var i=19*(0|t.words[o])+e,n=67108863&i;i>>>=26,t.words[o]=n,e=i}return 0!==e&&(t.words[t.length++]=e),t},r._prime=function(t){if(_[t])return _[t];var e;if("k256"===t)e=new b;else if("p224"===t)e=new S;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new A}return _[t]=e,e},k.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},k.prototype._verify2=function(t,e){i(0==(t.negative|e.negative),"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},k.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},k.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},k.prototype.add=function(t,e){this._verify2(t,e);var o=t.add(e);return o.cmp(this.m)>=0&&o.isub(this.m),o._forceRed(this)},k.prototype.iadd=function(t,e){this._verify2(t,e);var o=t.iadd(e);return o.cmp(this.m)>=0&&o.isub(this.m),o},k.prototype.sub=function(t,e){this._verify2(t,e);var o=t.sub(e);return o.cmpn(0)<0&&o.iadd(this.m),o._forceRed(this)},k.prototype.isub=function(t,e){this._verify2(t,e);var o=t.isub(e);return o.cmpn(0)<0&&o.iadd(this.m),o},k.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},k.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},k.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},k.prototype.isqr=function(t){return this.imul(t,t.clone())},k.prototype.sqr=function(t){return this.mul(t,t)},k.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var o=this.m.add(new r(1)).iushrn(2);return this.pow(t,o)}for(var n=this.m.subn(1),a=0;!n.isZero()&&0===n.andln(1);)a++,n.iushrn(1);i(!n.isZero());var s=new r(1).toRed(this),c=s.redNeg(),l=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new r(2*h*h).toRed(this);0!==this.pow(h,l).cmp(c);)h.redIAdd(c);for(var d=this.pow(h,n),u=this.pow(t,n.addn(1).iushrn(1)),p=this.pow(t,n),f=a;0!==p.cmp(s);){for(var g=p,m=0;0!==g.cmp(s);m++)g=g.redSqr();i(m<f);var v=this.pow(d,new r(1).iushln(f-m-1));u=u.redMul(v),d=v.redSqr(),p=p.redMul(d),f=m}return u},k.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},k.prototype.pow=function(t,e){if(e.isZero())return new r(1).toRed(this);if(0===e.cmpn(1))return t.clone();var o=new Array(16);o[0]=new r(1).toRed(this),o[1]=t;for(var i=2;i<o.length;i++)o[i]=this.mul(o[i-1],t);var n=o[0],a=0,s=0,c=e.bitLength()%26;for(0===c&&(c=26),i=e.length-1;i>=0;i--){for(var l=e.words[i],h=c-1;h>=0;h--){var d=l>>h&1;n!==o[0]&&(n=this.sqr(n)),0!==d||0!==a?(a<<=1,a|=d,(4==++s||0===i&&0===h)&&(n=this.mul(n,o[a]),s=0,a=0)):s=0}c=26}return n},k.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},k.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},r.mont=function(t){return new P(t)},n(P,k),P.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},P.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},P.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var o=t.imul(e),i=o.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=o.isub(i).iushrn(this.shift),r=n;return n.cmp(this.m)>=0?r=n.isub(this.m):n.cmpn(0)<0&&(r=n.iadd(this.m)),r._forceRed(this)},P.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new r(0)._forceRed(this);var o=t.mul(e),i=o.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=o.isub(i).iushrn(this.shift),a=n;return n.cmp(this.m)>=0?a=n.isub(this.m):n.cmpn(0)<0&&(a=n.iadd(this.m)),a._forceRed(this)},P.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}})(void 0===e||e,this)},{buffer:19}],16:[function(t,e,o){"use strict";o.byteLength=function(t){var e=l(t),o=e[0],i=e[1];return 3*(o+i)/4-i},o.toByteArray=function(t){var e,o,i=l(t),a=i[0],s=i[1],c=new r(h(0,a,s)),d=0,u=s>0?a-4:a;for(o=0;o<u;o+=4)e=n[t.charCodeAt(o)]<<18|n[t.charCodeAt(o+1)]<<12|n[t.charCodeAt(o+2)]<<6|n[t.charCodeAt(o+3)],c[d++]=e>>16&255,c[d++]=e>>8&255,c[d++]=255&e;return 2===s&&(e=n[t.charCodeAt(o)]<<2|n[t.charCodeAt(o+1)]>>4,c[d++]=255&e),1===s&&(e=n[t.charCodeAt(o)]<<10|n[t.charCodeAt(o+1)]<<4|n[t.charCodeAt(o+2)]>>2,c[d++]=e>>8&255,c[d++]=255&e),c},o.fromByteArray=function(t){for(var e,o=t.length,n=o%3,r=[],a=0,s=o-n;a<s;a+=16383)r.push(d(t,a,a+16383>s?s:a+16383));return 1===n?(e=t[o-1],r.push(i[e>>2]+i[e<<4&63]+"==")):2===n&&(e=(t[o-2]<<8)+t[o-1],r.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"=")),r.join("")};for(var i=[],n=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)i[s]=a[s],n[a.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=t.indexOf("=");return-1===o&&(o=e),[o,o===e?0:4-o%4]}function h(t,e,o){return 3*(e+o)/4-o}function d(t,e,o){for(var n,r,a=[],s=e;s<o;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(i[(r=n)>>18&63]+i[r>>12&63]+i[r>>6&63]+i[63&r]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},{}],17:[function(t,e){(function(e,o){"use strict";function i(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}function r(t,e,o){if(r.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(o=e,e=10),this._init(t||0,e||10,o||"be"))}var a;"object"==typeof e?e.exports=r:o.BN=r,r.BN=r,r.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:t("buffer").Buffer}catch(I){}function s(t,e){var o=t.charCodeAt(e);return o>=48&&o<=57?o-48:o>=65&&o<=70?o-55:o>=97&&o<=102?o-87:void i(!1,"Invalid character in "+t)}function c(t,e,o){var i=s(t,o);return o-1>=e&&(i|=s(t,o-1)<<4),i}function l(t,e,o,n){for(var r=0,a=0,s=Math.min(t.length,o),c=e;c<s;c++){var l=t.charCodeAt(c)-48;r*=n,a=l>=49?l-49+10:l>=17?l-17+10:l,i(l>=0&&a<n,"Invalid character"),r+=a}return r}function h(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(r.isBN=function(t){return t instanceof r||null!==t&&"object"==typeof t&&t.constructor.wordSize===r.wordSize&&Array.isArray(t.words)},r.max=function(t,e){return t.cmp(e)>0?t:e},r.min=function(t,e){return t.cmp(e)<0?t:e},r.prototype._init=function(t,e,o){if("number"==typeof t)return this._initNumber(t,e,o);if("object"==typeof t)return this._initArray(t,e,o);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,o):(this._parseBase(t,e,n),"le"===o&&this._initArray(this.toArray(),e,o)))},r.prototype._initNumber=function(t,e,o){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===o&&this._initArray(this.toArray(),e,o)},r.prototype._initArray=function(t,e,o){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,a,s=0;if("be"===o)for(n=t.length-1,r=0;n>=0;n-=3)a=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[r]|=a<<s&67108863,this.words[r+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,r++);else if("le"===o)for(n=0,r=0;n<t.length;n+=3)a=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[r]|=a<<s&67108863,this.words[r+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,r++);return this._strip()},r.prototype._parseHex=function(t,e,o){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var n,r=0,a=0;if("be"===o)for(i=t.length-1;i>=e;i-=2)n=c(t,e,i)<<r,this.words[a]|=67108863&n,r>=18?(r-=18,a+=1,this.words[a]|=n>>>26):r+=8;else for(i=(t.length-e)%2==0?e+1:e;i<t.length;i+=2)n=c(t,e,i)<<r,this.words[a]|=67108863&n,r>=18?(r-=18,a+=1,this.words[a]|=n>>>26):r+=8;this._strip()},r.prototype._parseBase=function(t,e,o){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=e)i++;i--,n=n/e|0;for(var r=t.length-o,a=r%i,s=Math.min(r,r-a)+o,c=0,h=o;h<s;h+=i)c=l(t,h,h+i,e),this.imuln(n),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==a){var d=1;for(c=l(t,h,t.length,e),h=0;h<a;h++)d*=e;this.imuln(d),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},r.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},r.prototype._move=function(t){h(t,this)},r.prototype.clone=function(){var t=new r(null);return this.copy(t),t},r.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},r.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{r.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch(I){r.prototype.inspect=d}else r.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];r.prototype.toString=function(t,e){var o;if(e=0|e||1,16===(t=t||10)||"hex"===t){o="";for(var n=0,r=0,a=0;a<this.length;a++){var s=this.words[a],c=(16777215&(s<<n|r)).toString(16);r=s>>>24-n&16777215,(n+=2)>=26&&(n-=26,a--),o=0!==r||a!==this.length-1?u[6-c.length]+c+o:c+o}for(0!==r&&(o=r.toString(16)+o);o.length%e!=0;)o="0"+o;return 0!==this.negative&&(o="-"+o),o}if(t===(0|t)&&t>=2&&t<=36){var l=p[t],h=f[t];o="";var d=this.clone();for(d.negative=0;!d.isZero();){var g=d.modrn(h).toString(t);o=(d=d.idivn(h)).isZero()?g+o:u[l-g.length]+g+o}for(this.isZero()&&(o="0"+o);o.length%e!=0;)o="0"+o;return 0!==this.negative&&(o="-"+o),o}i(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},r.prototype.toJSON=function(){return this.toString(16,2)},a&&(r.prototype.toBuffer=function(t,e){return this.toArrayLike(a,t,e)}),r.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)};var g=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)};function m(t){for(var e=new Array(t.bitLength()),o=0;o<e.length;o++){var i=o/26|0,n=o%26;e[o]=t.words[i]>>>n&1}return e}function v(t,e,o){o.negative=e.negative^t.negative;var i=t.length+e.length|0;o.length=i,i=i-1|0;var n=0|t.words[0],r=0|e.words[0],a=n*r,s=67108863&a,c=a/67108864|0;o.words[0]=s;for(var l=1;l<i;l++){for(var h=c>>>26,d=67108863&c,u=Math.min(l,e.length-1),p=Math.max(0,l-t.length+1);p<=u;p++){var f=l-p|0;h+=(a=(n=0|t.words[f])*(r=0|e.words[p])+d)/67108864|0,d=67108863&a}o.words[l]=0|d,c=0|h}return 0!==c?o.words[l]=0|c:o.length--,o._strip()}r.prototype.toArrayLike=function(t,e,o){this._strip();var n=this.byteLength(),r=o||Math.max(1,n);i(n<=r,"byte array longer than desired length"),i(r>0,"Requested array length <= 0");var a=g(t,r);return this["_toArrayLike"+("le"===e?"LE":"BE")](a,n),a},r.prototype._toArrayLikeLE=function(t){for(var e=0,o=0,i=0,n=0;i<this.length;i++){var r=this.words[i]<<n|o;t[e++]=255&r,e<t.length&&(t[e++]=r>>8&255),e<t.length&&(t[e++]=r>>16&255),6===n?(e<t.length&&(t[e++]=r>>24&255),o=0,n=0):(o=r>>>24,n+=2)}if(e<t.length)for(t[e++]=o;e<t.length;)t[e++]=0},r.prototype._toArrayLikeBE=function(t){for(var e=t.length-1,o=0,i=0,n=0;i<this.length;i++){var r=this.words[i]<<n|o;t[e--]=255&r,e>=0&&(t[e--]=r>>8&255),e>=0&&(t[e--]=r>>16&255),6===n?(e>=0&&(t[e--]=r>>24&255),o=0,n=0):(o=r>>>24,n+=2)}if(e>=0)for(t[e--]=o;e>=0;)t[e--]=0},Math.clz32?r.prototype._countBits=function(t){return 32-Math.clz32(t)}:r.prototype._countBits=function(t){var e=t,o=0;return e>=4096&&(o+=13,e>>>=13),e>=64&&(o+=7,e>>>=7),e>=8&&(o+=4,e>>>=4),e>=2&&(o+=2,e>>>=2),o+e},r.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,o=0;return 0==(8191&e)&&(o+=13,e>>>=13),0==(127&e)&&(o+=7,e>>>=7),0==(15&e)&&(o+=4,e>>>=4),0==(3&e)&&(o+=2,e>>>=2),0==(1&e)&&o++,o},r.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var o=this._zeroBits(this.words[e]);if(t+=o,26!==o)break}return t},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},r.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},r.prototype.ior=function(t){return i(0==(this.negative|t.negative)),this.iuor(t)},r.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},r.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},r.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var o=0;o<e.length;o++)this.words[o]=this.words[o]&t.words[o];return this.length=e.length,this._strip()},r.prototype.iand=function(t){return i(0==(this.negative|t.negative)),this.iuand(t)},r.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},r.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},r.prototype.iuxor=function(t){var e,o;this.length>t.length?(e=this,o=t):(e=t,o=this);for(var i=0;i<o.length;i++)this.words[i]=e.words[i]^o.words[i];if(this!==e)for(;i<e.length;i++)this.words[i]=e.words[i];return this.length=e.length,this._strip()},r.prototype.ixor=function(t){return i(0==(this.negative|t.negative)),this.iuxor(t)},r.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},r.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},r.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),o=t%26;this._expand(e),o>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return o>0&&(this.words[n]=~this.words[n]&67108863>>26-o),this._strip()},r.prototype.notn=function(t){return this.clone().inotn(t)},r.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var o=t/26|0,n=t%26;return this._expand(o+1),this.words[o]=e?this.words[o]|1<<n:this.words[o]&~(1<<n),this._strip()},r.prototype.iadd=function(t){var e,o,i;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(o=this,i=t):(o=t,i=this);for(var n=0,r=0;r<i.length;r++)e=(0|o.words[r])+(0|i.words[r])+n,this.words[r]=67108863&e,n=e>>>26;for(;0!==n&&r<o.length;r++)e=(0|o.words[r])+n,this.words[r]=67108863&e,n=e>>>26;if(this.length=o.length,0!==n)this.words[this.length]=n,this.length++;else if(o!==this)for(;r<o.length;r++)this.words[r]=o.words[r];return this},r.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},r.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var o,i,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(o=this,i=t):(o=t,i=this);for(var r=0,a=0;a<i.length;a++)r=(e=(0|o.words[a])-(0|i.words[a])+r)>>26,this.words[a]=67108863&e;for(;0!==r&&a<o.length;a++)r=(e=(0|o.words[a])+r)>>26,this.words[a]=67108863&e;if(0===r&&a<o.length&&o!==this)for(;a<o.length;a++)this.words[a]=o.words[a];return this.length=Math.max(this.length,a),o!==this&&(this.negative=1),this._strip()},r.prototype.sub=function(t){return this.clone().isub(t)};var y=function(t,e,o){var i,n,r,a=t.words,s=e.words,c=o.words,l=0,h=0|a[0],d=8191&h,u=h>>>13,p=0|a[1],f=8191&p,g=p>>>13,m=0|a[2],v=8191&m,y=m>>>13,_=0|a[3],C=8191&_,b=_>>>13,S=0|a[4],w=8191&S,A=S>>>13,k=0|a[5],P=8191&k,T=k>>>13,B=0|a[6],M=8191&B,I=B>>>13,R=0|a[7],L=8191&R,D=R>>>13,N=0|a[8],E=8191&N,x=N>>>13,U=0|a[9],O=8191&U,F=U>>>13,W=0|s[0],V=8191&W,H=W>>>13,G=0|s[1],j=8191&G,z=G>>>13,q=0|s[2],K=8191&q,X=q>>>13,J=0|s[3],Y=8191&J,Q=J>>>13,Z=0|s[4],$=8191&Z,tt=Z>>>13,et=0|s[5],ot=8191&et,it=et>>>13,nt=0|s[6],rt=8191&nt,at=nt>>>13,st=0|s[7],ct=8191&st,lt=st>>>13,ht=0|s[8],dt=8191&ht,ut=ht>>>13,pt=0|s[9],ft=8191&pt,gt=pt>>>13;o.negative=t.negative^e.negative,o.length=19;var mt=(l+(i=Math.imul(d,V))|0)+((8191&(n=(n=Math.imul(d,H))+Math.imul(u,V)|0))<<13)|0;l=((r=Math.imul(u,H))+(n>>>13)|0)+(mt>>>26)|0,mt&=67108863,i=Math.imul(f,V),n=(n=Math.imul(f,H))+Math.imul(g,V)|0,r=Math.imul(g,H);var vt=(l+(i=i+Math.imul(d,j)|0)|0)+((8191&(n=(n=n+Math.imul(d,z)|0)+Math.imul(u,j)|0))<<13)|0;l=((r=r+Math.imul(u,z)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,i=Math.imul(v,V),n=(n=Math.imul(v,H))+Math.imul(y,V)|0,r=Math.imul(y,H),i=i+Math.imul(f,j)|0,n=(n=n+Math.imul(f,z)|0)+Math.imul(g,j)|0,r=r+Math.imul(g,z)|0;var yt=(l+(i=i+Math.imul(d,K)|0)|0)+((8191&(n=(n=n+Math.imul(d,X)|0)+Math.imul(u,K)|0))<<13)|0;l=((r=r+Math.imul(u,X)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,i=Math.imul(C,V),n=(n=Math.imul(C,H))+Math.imul(b,V)|0,r=Math.imul(b,H),i=i+Math.imul(v,j)|0,n=(n=n+Math.imul(v,z)|0)+Math.imul(y,j)|0,r=r+Math.imul(y,z)|0,i=i+Math.imul(f,K)|0,n=(n=n+Math.imul(f,X)|0)+Math.imul(g,K)|0,r=r+Math.imul(g,X)|0;var _t=(l+(i=i+Math.imul(d,Y)|0)|0)+((8191&(n=(n=n+Math.imul(d,Q)|0)+Math.imul(u,Y)|0))<<13)|0;l=((r=r+Math.imul(u,Q)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,i=Math.imul(w,V),n=(n=Math.imul(w,H))+Math.imul(A,V)|0,r=Math.imul(A,H),i=i+Math.imul(C,j)|0,n=(n=n+Math.imul(C,z)|0)+Math.imul(b,j)|0,r=r+Math.imul(b,z)|0,i=i+Math.imul(v,K)|0,n=(n=n+Math.imul(v,X)|0)+Math.imul(y,K)|0,r=r+Math.imul(y,X)|0,i=i+Math.imul(f,Y)|0,n=(n=n+Math.imul(f,Q)|0)+Math.imul(g,Y)|0,r=r+Math.imul(g,Q)|0;var Ct=(l+(i=i+Math.imul(d,$)|0)|0)+((8191&(n=(n=n+Math.imul(d,tt)|0)+Math.imul(u,$)|0))<<13)|0;l=((r=r+Math.imul(u,tt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,i=Math.imul(P,V),n=(n=Math.imul(P,H))+Math.imul(T,V)|0,r=Math.imul(T,H),i=i+Math.imul(w,j)|0,n=(n=n+Math.imul(w,z)|0)+Math.imul(A,j)|0,r=r+Math.imul(A,z)|0,i=i+Math.imul(C,K)|0,n=(n=n+Math.imul(C,X)|0)+Math.imul(b,K)|0,r=r+Math.imul(b,X)|0,i=i+Math.imul(v,Y)|0,n=(n=n+Math.imul(v,Q)|0)+Math.imul(y,Y)|0,r=r+Math.imul(y,Q)|0,i=i+Math.imul(f,$)|0,n=(n=n+Math.imul(f,tt)|0)+Math.imul(g,$)|0,r=r+Math.imul(g,tt)|0;var bt=(l+(i=i+Math.imul(d,ot)|0)|0)+((8191&(n=(n=n+Math.imul(d,it)|0)+Math.imul(u,ot)|0))<<13)|0;l=((r=r+Math.imul(u,it)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,i=Math.imul(M,V),n=(n=Math.imul(M,H))+Math.imul(I,V)|0,r=Math.imul(I,H),i=i+Math.imul(P,j)|0,n=(n=n+Math.imul(P,z)|0)+Math.imul(T,j)|0,r=r+Math.imul(T,z)|0,i=i+Math.imul(w,K)|0,n=(n=n+Math.imul(w,X)|0)+Math.imul(A,K)|0,r=r+Math.imul(A,X)|0,i=i+Math.imul(C,Y)|0,n=(n=n+Math.imul(C,Q)|0)+Math.imul(b,Y)|0,r=r+Math.imul(b,Q)|0,i=i+Math.imul(v,$)|0,n=(n=n+Math.imul(v,tt)|0)+Math.imul(y,$)|0,r=r+Math.imul(y,tt)|0,i=i+Math.imul(f,ot)|0,n=(n=n+Math.imul(f,it)|0)+Math.imul(g,ot)|0,r=r+Math.imul(g,it)|0;var St=(l+(i=i+Math.imul(d,rt)|0)|0)+((8191&(n=(n=n+Math.imul(d,at)|0)+Math.imul(u,rt)|0))<<13)|0;l=((r=r+Math.imul(u,at)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,i=Math.imul(L,V),n=(n=Math.imul(L,H))+Math.imul(D,V)|0,r=Math.imul(D,H),i=i+Math.imul(M,j)|0,n=(n=n+Math.imul(M,z)|0)+Math.imul(I,j)|0,r=r+Math.imul(I,z)|0,i=i+Math.imul(P,K)|0,n=(n=n+Math.imul(P,X)|0)+Math.imul(T,K)|0,r=r+Math.imul(T,X)|0,i=i+Math.imul(w,Y)|0,n=(n=n+Math.imul(w,Q)|0)+Math.imul(A,Y)|0,r=r+Math.imul(A,Q)|0,i=i+Math.imul(C,$)|0,n=(n=n+Math.imul(C,tt)|0)+Math.imul(b,$)|0,r=r+Math.imul(b,tt)|0,i=i+Math.imul(v,ot)|0,n=(n=n+Math.imul(v,it)|0)+Math.imul(y,ot)|0,r=r+Math.imul(y,it)|0,i=i+Math.imul(f,rt)|0,n=(n=n+Math.imul(f,at)|0)+Math.imul(g,rt)|0,r=r+Math.imul(g,at)|0;var wt=(l+(i=i+Math.imul(d,ct)|0)|0)+((8191&(n=(n=n+Math.imul(d,lt)|0)+Math.imul(u,ct)|0))<<13)|0;l=((r=r+Math.imul(u,lt)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,i=Math.imul(E,V),n=(n=Math.imul(E,H))+Math.imul(x,V)|0,r=Math.imul(x,H),i=i+Math.imul(L,j)|0,n=(n=n+Math.imul(L,z)|0)+Math.imul(D,j)|0,r=r+Math.imul(D,z)|0,i=i+Math.imul(M,K)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(I,K)|0,r=r+Math.imul(I,X)|0,i=i+Math.imul(P,Y)|0,n=(n=n+Math.imul(P,Q)|0)+Math.imul(T,Y)|0,r=r+Math.imul(T,Q)|0,i=i+Math.imul(w,$)|0,n=(n=n+Math.imul(w,tt)|0)+Math.imul(A,$)|0,r=r+Math.imul(A,tt)|0,i=i+Math.imul(C,ot)|0,n=(n=n+Math.imul(C,it)|0)+Math.imul(b,ot)|0,r=r+Math.imul(b,it)|0,i=i+Math.imul(v,rt)|0,n=(n=n+Math.imul(v,at)|0)+Math.imul(y,rt)|0,r=r+Math.imul(y,at)|0,i=i+Math.imul(f,ct)|0,n=(n=n+Math.imul(f,lt)|0)+Math.imul(g,ct)|0,r=r+Math.imul(g,lt)|0;var At=(l+(i=i+Math.imul(d,dt)|0)|0)+((8191&(n=(n=n+Math.imul(d,ut)|0)+Math.imul(u,dt)|0))<<13)|0;l=((r=r+Math.imul(u,ut)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,i=Math.imul(O,V),n=(n=Math.imul(O,H))+Math.imul(F,V)|0,r=Math.imul(F,H),i=i+Math.imul(E,j)|0,n=(n=n+Math.imul(E,z)|0)+Math.imul(x,j)|0,r=r+Math.imul(x,z)|0,i=i+Math.imul(L,K)|0,n=(n=n+Math.imul(L,X)|0)+Math.imul(D,K)|0,r=r+Math.imul(D,X)|0,i=i+Math.imul(M,Y)|0,n=(n=n+Math.imul(M,Q)|0)+Math.imul(I,Y)|0,r=r+Math.imul(I,Q)|0,i=i+Math.imul(P,$)|0,n=(n=n+Math.imul(P,tt)|0)+Math.imul(T,$)|0,r=r+Math.imul(T,tt)|0,i=i+Math.imul(w,ot)|0,n=(n=n+Math.imul(w,it)|0)+Math.imul(A,ot)|0,r=r+Math.imul(A,it)|0,i=i+Math.imul(C,rt)|0,n=(n=n+Math.imul(C,at)|0)+Math.imul(b,rt)|0,r=r+Math.imul(b,at)|0,i=i+Math.imul(v,ct)|0,n=(n=n+Math.imul(v,lt)|0)+Math.imul(y,ct)|0,r=r+Math.imul(y,lt)|0,i=i+Math.imul(f,dt)|0,n=(n=n+Math.imul(f,ut)|0)+Math.imul(g,dt)|0,r=r+Math.imul(g,ut)|0;var kt=(l+(i=i+Math.imul(d,ft)|0)|0)+((8191&(n=(n=n+Math.imul(d,gt)|0)+Math.imul(u,ft)|0))<<13)|0;l=((r=r+Math.imul(u,gt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,i=Math.imul(O,j),n=(n=Math.imul(O,z))+Math.imul(F,j)|0,r=Math.imul(F,z),i=i+Math.imul(E,K)|0,n=(n=n+Math.imul(E,X)|0)+Math.imul(x,K)|0,r=r+Math.imul(x,X)|0,i=i+Math.imul(L,Y)|0,n=(n=n+Math.imul(L,Q)|0)+Math.imul(D,Y)|0,r=r+Math.imul(D,Q)|0,i=i+Math.imul(M,$)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(I,$)|0,r=r+Math.imul(I,tt)|0,i=i+Math.imul(P,ot)|0,n=(n=n+Math.imul(P,it)|0)+Math.imul(T,ot)|0,r=r+Math.imul(T,it)|0,i=i+Math.imul(w,rt)|0,n=(n=n+Math.imul(w,at)|0)+Math.imul(A,rt)|0,r=r+Math.imul(A,at)|0,i=i+Math.imul(C,ct)|0,n=(n=n+Math.imul(C,lt)|0)+Math.imul(b,ct)|0,r=r+Math.imul(b,lt)|0,i=i+Math.imul(v,dt)|0,n=(n=n+Math.imul(v,ut)|0)+Math.imul(y,dt)|0,r=r+Math.imul(y,ut)|0;var Pt=(l+(i=i+Math.imul(f,ft)|0)|0)+((8191&(n=(n=n+Math.imul(f,gt)|0)+Math.imul(g,ft)|0))<<13)|0;l=((r=r+Math.imul(g,gt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,i=Math.imul(O,K),n=(n=Math.imul(O,X))+Math.imul(F,K)|0,r=Math.imul(F,X),i=i+Math.imul(E,Y)|0,n=(n=n+Math.imul(E,Q)|0)+Math.imul(x,Y)|0,r=r+Math.imul(x,Q)|0,i=i+Math.imul(L,$)|0,n=(n=n+Math.imul(L,tt)|0)+Math.imul(D,$)|0,r=r+Math.imul(D,tt)|0,i=i+Math.imul(M,ot)|0,n=(n=n+Math.imul(M,it)|0)+Math.imul(I,ot)|0,r=r+Math.imul(I,it)|0,i=i+Math.imul(P,rt)|0,n=(n=n+Math.imul(P,at)|0)+Math.imul(T,rt)|0,r=r+Math.imul(T,at)|0,i=i+Math.imul(w,ct)|0,n=(n=n+Math.imul(w,lt)|0)+Math.imul(A,ct)|0,r=r+Math.imul(A,lt)|0,i=i+Math.imul(C,dt)|0,n=(n=n+Math.imul(C,ut)|0)+Math.imul(b,dt)|0,r=r+Math.imul(b,ut)|0;var Tt=(l+(i=i+Math.imul(v,ft)|0)|0)+((8191&(n=(n=n+Math.imul(v,gt)|0)+Math.imul(y,ft)|0))<<13)|0;l=((r=r+Math.imul(y,gt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,i=Math.imul(O,Y),n=(n=Math.imul(O,Q))+Math.imul(F,Y)|0,r=Math.imul(F,Q),i=i+Math.imul(E,$)|0,n=(n=n+Math.imul(E,tt)|0)+Math.imul(x,$)|0,r=r+Math.imul(x,tt)|0,i=i+Math.imul(L,ot)|0,n=(n=n+Math.imul(L,it)|0)+Math.imul(D,ot)|0,r=r+Math.imul(D,it)|0,i=i+Math.imul(M,rt)|0,n=(n=n+Math.imul(M,at)|0)+Math.imul(I,rt)|0,r=r+Math.imul(I,at)|0,i=i+Math.imul(P,ct)|0,n=(n=n+Math.imul(P,lt)|0)+Math.imul(T,ct)|0,r=r+Math.imul(T,lt)|0,i=i+Math.imul(w,dt)|0,n=(n=n+Math.imul(w,ut)|0)+Math.imul(A,dt)|0,r=r+Math.imul(A,ut)|0;var Bt=(l+(i=i+Math.imul(C,ft)|0)|0)+((8191&(n=(n=n+Math.imul(C,gt)|0)+Math.imul(b,ft)|0))<<13)|0;l=((r=r+Math.imul(b,gt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,i=Math.imul(O,$),n=(n=Math.imul(O,tt))+Math.imul(F,$)|0,r=Math.imul(F,tt),i=i+Math.imul(E,ot)|0,n=(n=n+Math.imul(E,it)|0)+Math.imul(x,ot)|0,r=r+Math.imul(x,it)|0,i=i+Math.imul(L,rt)|0,n=(n=n+Math.imul(L,at)|0)+Math.imul(D,rt)|0,r=r+Math.imul(D,at)|0,i=i+Math.imul(M,ct)|0,n=(n=n+Math.imul(M,lt)|0)+Math.imul(I,ct)|0,r=r+Math.imul(I,lt)|0,i=i+Math.imul(P,dt)|0,n=(n=n+Math.imul(P,ut)|0)+Math.imul(T,dt)|0,r=r+Math.imul(T,ut)|0;var Mt=(l+(i=i+Math.imul(w,ft)|0)|0)+((8191&(n=(n=n+Math.imul(w,gt)|0)+Math.imul(A,ft)|0))<<13)|0;l=((r=r+Math.imul(A,gt)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,i=Math.imul(O,ot),n=(n=Math.imul(O,it))+Math.imul(F,ot)|0,r=Math.imul(F,it),i=i+Math.imul(E,rt)|0,n=(n=n+Math.imul(E,at)|0)+Math.imul(x,rt)|0,r=r+Math.imul(x,at)|0,i=i+Math.imul(L,ct)|0,n=(n=n+Math.imul(L,lt)|0)+Math.imul(D,ct)|0,r=r+Math.imul(D,lt)|0,i=i+Math.imul(M,dt)|0,n=(n=n+Math.imul(M,ut)|0)+Math.imul(I,dt)|0,r=r+Math.imul(I,ut)|0;var It=(l+(i=i+Math.imul(P,ft)|0)|0)+((8191&(n=(n=n+Math.imul(P,gt)|0)+Math.imul(T,ft)|0))<<13)|0;l=((r=r+Math.imul(T,gt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,i=Math.imul(O,rt),n=(n=Math.imul(O,at))+Math.imul(F,rt)|0,r=Math.imul(F,at),i=i+Math.imul(E,ct)|0,n=(n=n+Math.imul(E,lt)|0)+Math.imul(x,ct)|0,r=r+Math.imul(x,lt)|0,i=i+Math.imul(L,dt)|0,n=(n=n+Math.imul(L,ut)|0)+Math.imul(D,dt)|0,r=r+Math.imul(D,ut)|0;var Rt=(l+(i=i+Math.imul(M,ft)|0)|0)+((8191&(n=(n=n+Math.imul(M,gt)|0)+Math.imul(I,ft)|0))<<13)|0;l=((r=r+Math.imul(I,gt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,i=Math.imul(O,ct),n=(n=Math.imul(O,lt))+Math.imul(F,ct)|0,r=Math.imul(F,lt),i=i+Math.imul(E,dt)|0,n=(n=n+Math.imul(E,ut)|0)+Math.imul(x,dt)|0,r=r+Math.imul(x,ut)|0;var Lt=(l+(i=i+Math.imul(L,ft)|0)|0)+((8191&(n=(n=n+Math.imul(L,gt)|0)+Math.imul(D,ft)|0))<<13)|0;l=((r=r+Math.imul(D,gt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,i=Math.imul(O,dt),n=(n=Math.imul(O,ut))+Math.imul(F,dt)|0,r=Math.imul(F,ut);var Dt=(l+(i=i+Math.imul(E,ft)|0)|0)+((8191&(n=(n=n+Math.imul(E,gt)|0)+Math.imul(x,ft)|0))<<13)|0;l=((r=r+Math.imul(x,gt)|0)+(n>>>13)|0)+(Dt>>>26)|0,Dt&=67108863;var Nt=(l+(i=Math.imul(O,ft))|0)+((8191&(n=(n=Math.imul(O,gt))+Math.imul(F,ft)|0))<<13)|0;return l=((r=Math.imul(F,gt))+(n>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,c[0]=mt,c[1]=vt,c[2]=yt,c[3]=_t,c[4]=Ct,c[5]=bt,c[6]=St,c[7]=wt,c[8]=At,c[9]=kt,c[10]=Pt,c[11]=Tt,c[12]=Bt,c[13]=Mt,c[14]=It,c[15]=Rt,c[16]=Lt,c[17]=Dt,c[18]=Nt,0!==l&&(c[19]=l,o.length++),o};function _(t,e,o){o.negative=e.negative^t.negative,o.length=t.length+e.length;for(var i=0,n=0,r=0;r<o.length-1;r++){var a=n;n=0;for(var s=67108863&i,c=Math.min(r,e.length-1),l=Math.max(0,r-t.length+1);l<=c;l++){var h=r-l,d=(0|t.words[h])*(0|e.words[l]),u=67108863&d;s=67108863&(u=u+s|0),n+=(a=(a=a+(d/67108864|0)|0)+(u>>>26)|0)>>>26,a&=67108863}o.words[r]=s,i=a,a=n}return 0!==i?o.words[r]=i:o.length--,o._strip()}function C(t,e,o){return _(t,e,o)}function b(t,e){this.x=t,this.y=e}Math.imul||(y=v),r.prototype.mulTo=function(t,e){var o=this.length+t.length;return 10===this.length&&10===t.length?y(this,t,e):o<63?v(this,t,e):o<1024?_(this,t,e):C(this,t,e)},b.prototype.makeRBT=function(t){for(var e=new Array(t),o=r.prototype._countBits(t)-1,i=0;i<t;i++)e[i]=this.revBin(i,o,t);return e},b.prototype.revBin=function(t,e,o){if(0===t||t===o-1)return t;for(var i=0,n=0;n<e;n++)i|=(1&t)<<e-n-1,t>>=1;return i},b.prototype.permute=function(t,e,o,i,n,r){for(var a=0;a<r;a++)i[a]=e[t[a]],n[a]=o[t[a]]},b.prototype.transform=function(t,e,o,i,n,r){this.permute(r,t,e,o,i,n);for(var a=1;a<n;a<<=1)for(var s=a<<1,c=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),h=0;h<n;h+=s)for(var d=c,u=l,p=0;p<a;p++){var f=o[h+p],g=i[h+p],m=o[h+p+a],v=i[h+p+a],y=d*m-u*v;v=d*v+u*m,m=y,o[h+p]=f+m,i[h+p]=g+v,o[h+p+a]=f-m,i[h+p+a]=g-v,p!==s&&(y=c*d-l*u,u=c*u+l*d,d=y)}},b.prototype.guessLen13b=function(t,e){var o=1|Math.max(e,t),i=1&o,n=0;for(o=o/2|0;o;o>>>=1)n++;return 1<<n+1+i},b.prototype.conjugate=function(t,e,o){if(!(o<=1))for(var i=0;i<o/2;i++){var n=t[i];t[i]=t[o-i-1],t[o-i-1]=n,n=e[i],e[i]=-e[o-i-1],e[o-i-1]=-n}},b.prototype.normalize13b=function(t,e){for(var o=0,i=0;i<e/2;i++){var n=8192*Math.round(t[2*i+1]/e)+Math.round(t[2*i]/e)+o;t[i]=67108863&n,o=n<67108864?0:n/67108864|0}return t},b.prototype.convert13b=function(t,e,o,n){for(var r=0,a=0;a<e;a++)r+=0|t[a],o[2*a]=8191&r,r>>>=13,o[2*a+1]=8191&r,r>>>=13;for(a=2*e;a<n;++a)o[a]=0;i(0===r),i(0==(-8192&r))},b.prototype.stub=function(t){for(var e=new Array(t),o=0;o<t;o++)e[o]=0;return e},b.prototype.mulp=function(t,e,o){var i=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(i),r=this.stub(i),a=new Array(i),s=new Array(i),c=new Array(i),l=new Array(i),h=new Array(i),d=new Array(i),u=o.words;u.length=i,this.convert13b(t.words,t.length,a,i),this.convert13b(e.words,e.length,l,i),this.transform(a,r,s,c,i,n),this.transform(l,r,h,d,i,n);for(var p=0;p<i;p++){var f=s[p]*h[p]-c[p]*d[p];c[p]=s[p]*d[p]+c[p]*h[p],s[p]=f}return this.conjugate(s,c,i),this.transform(s,c,u,r,i,n),this.conjugate(u,r,i),this.normalize13b(u,i),o.negative=t.negative^e.negative,o.length=t.length+e.length,o._strip()},r.prototype.mul=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},r.prototype.mulf=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),C(this,t,e)},r.prototype.imul=function(t){return this.clone().mulTo(t,this)},r.prototype.imuln=function(t){var e=t<0;e&&(t=-t),i("number"==typeof t),i(t<67108864);for(var o=0,n=0;n<this.length;n++){var r=(0|this.words[n])*t,a=(67108863&r)+(67108863&o);o>>=26,o+=r/67108864|0,o+=a>>>26,this.words[n]=67108863&a}return 0!==o&&(this.words[n]=o,this.length++),e?this.ineg():this},r.prototype.muln=function(t){return this.clone().imuln(t)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(t){var e=m(t);if(0===e.length)return new r(1);for(var o=this,i=0;i<e.length&&0===e[i];i++,o=o.sqr());if(++i<e.length)for(var n=o.sqr();i<e.length;i++,n=n.sqr())0!==e[i]&&(o=o.mul(n));return o},r.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,o=t%26,n=(t-o)/26,r=67108863>>>26-o<<26-o;if(0!==o){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&r,c=(0|this.words[e])-s<<o;this.words[e]=c|a,a=s>>>26-o}a&&(this.words[e]=a,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this._strip()},r.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},r.prototype.iushrn=function(t,e,o){var n;i("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var r=t%26,a=Math.min((t-r)/26,this.length),s=67108863^67108863>>>r<<r,c=o;if(n-=a,n=Math.max(0,n),c){for(var l=0;l<a;l++)c.words[l]=this.words[l];c.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var h=0;for(l=this.length-1;l>=0&&(0!==h||l>=n);l--){var d=0|this.words[l];this.words[l]=h<<26-r|d>>>r,h=d&s}return c&&0!==h&&(c.words[c.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},r.prototype.ishrn=function(t,e,o){return i(0===this.negative),this.iushrn(t,e,o)},r.prototype.shln=function(t){return this.clone().ishln(t)},r.prototype.ushln=function(t){return this.clone().iushln(t)},r.prototype.shrn=function(t){return this.clone().ishrn(t)},r.prototype.ushrn=function(t){return this.clone().iushrn(t)},r.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,o=(t-e)/26,n=1<<e;return!(this.length<=o||!(this.words[o]&n))},r.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,o=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=o)return this;if(0!==e&&o++,this.length=Math.min(o,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this._strip()},r.prototype.maskn=function(t){return this.clone().imaskn(t)},r.prototype.iaddn=function(t){return i("number"==typeof t),i(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},r.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},r.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},r.prototype.addn=function(t){return this.clone().iaddn(t)},r.prototype.subn=function(t){return this.clone().isubn(t)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(t,e,o){var n,r,a=t.length+o;this._expand(a);var s=0;for(n=0;n<t.length;n++){r=(0|this.words[n+o])+s;var c=(0|t.words[n])*e;s=((r-=67108863&c)>>26)-(c/67108864|0),this.words[n+o]=67108863&r}for(;n<this.length-o;n++)s=(r=(0|this.words[n+o])+s)>>26,this.words[n+o]=67108863&r;if(0===s)return this._strip();for(i(-1===s),s=0,n=0;n<this.length;n++)s=(r=-(0|this.words[n])+s)>>26,this.words[n]=67108863&r;return this.negative=1,this._strip()},r.prototype._wordDiv=function(t,e){var o=(this.length,t.length),i=this.clone(),n=t,a=0|n.words[n.length-1];0!=(o=26-this._countBits(a))&&(n=n.ushln(o),i.iushln(o),a=0|n.words[n.length-1]);var s,c=i.length-n.length;if("mod"!==e){(s=new r(null)).length=c+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var h=i.clone()._ishlnsubmul(n,1,c);0===h.negative&&(i=h,s&&(s.words[c]=1));for(var d=c-1;d>=0;d--){var u=67108864*(0|i.words[n.length+d])+(0|i.words[n.length+d-1]);for(u=Math.min(u/a|0,67108863),i._ishlnsubmul(n,u,d);0!==i.negative;)u--,i.negative=0,i._ishlnsubmul(n,1,d),i.isZero()||(i.negative^=1);s&&(s.words[d]=u)}return s&&s._strip(),i._strip(),"div"!==e&&0!==o&&i.iushrn(o),{div:s||null,mod:i}},r.prototype.divmod=function(t,e,o){return i(!t.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(n=s.div.neg()),"div"!==e&&(a=s.mod.neg(),o&&0!==a.negative&&a.iadd(t)),{div:n,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(n=s.div.neg()),{div:n,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),o&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new r(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new r(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new r(this.modrn(t.words[0]))}:this._wordDiv(t,e);var n,a,s},r.prototype.div=function(t){return this.divmod(t,"div",!1).div},r.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},r.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},r.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var o=0!==e.div.negative?e.mod.isub(t):e.mod,i=t.ushrn(1),n=t.andln(1),r=o.cmp(i);return r<0||1===n&&0===r?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},r.prototype.modrn=function(t){var e=t<0;e&&(t=-t),i(t<=67108863);for(var o=(1<<26)%t,n=0,r=this.length-1;r>=0;r--)n=(o*n+(0|this.words[r]))%t;return e?-n:n},r.prototype.modn=function(t){return this.modrn(t)},r.prototype.idivn=function(t){var e=t<0;e&&(t=-t),i(t<=67108863);for(var o=0,n=this.length-1;n>=0;n--){var r=(0|this.words[n])+67108864*o;this.words[n]=r/t|0,o=r%t}return this._strip(),e?this.ineg():this},r.prototype.divn=function(t){return this.clone().idivn(t)},r.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,o=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new r(1),a=new r(0),s=new r(0),c=new r(1),l=0;e.isEven()&&o.isEven();)e.iushrn(1),o.iushrn(1),++l;for(var h=o.clone(),d=e.clone();!e.isZero();){for(var u=0,p=1;0==(e.words[0]&p)&&u<26;++u,p<<=1);if(u>0)for(e.iushrn(u);u-- >0;)(n.isOdd()||a.isOdd())&&(n.iadd(h),a.isub(d)),n.iushrn(1),a.iushrn(1);for(var f=0,g=1;0==(o.words[0]&g)&&f<26;++f,g<<=1);if(f>0)for(o.iushrn(f);f-- >0;)(s.isOdd()||c.isOdd())&&(s.iadd(h),c.isub(d)),s.iushrn(1),c.iushrn(1);e.cmp(o)>=0?(e.isub(o),n.isub(s),a.isub(c)):(o.isub(e),s.isub(n),c.isub(a))}return{a:s,b:c,gcd:o.iushln(l)}},r.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e=this,o=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,a=new r(1),s=new r(0),c=o.clone();e.cmpn(1)>0&&o.cmpn(1)>0;){for(var l=0,h=1;0==(e.words[0]&h)&&l<26;++l,h<<=1);if(l>0)for(e.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);for(var d=0,u=1;0==(o.words[0]&u)&&d<26;++d,u<<=1);if(d>0)for(o.iushrn(d);d-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);e.cmp(o)>=0?(e.isub(o),a.isub(s)):(o.isub(e),s.isub(a))}return(n=0===e.cmpn(1)?a:s).cmpn(0)<0&&n.iadd(t),n},r.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),o=t.clone();e.negative=0,o.negative=0;for(var i=0;e.isEven()&&o.isEven();i++)e.iushrn(1),o.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;o.isEven();)o.iushrn(1);var n=e.cmp(o);if(n<0){var r=e;e=o,o=r}else if(0===n||0===o.cmpn(1))break;e.isub(o)}return o.iushln(i)},r.prototype.invm=function(t){return this.egcd(t).a.umod(t)},r.prototype.isEven=function(){return 0==(1&this.words[0])},r.prototype.isOdd=function(){return 1==(1&this.words[0])},r.prototype.andln=function(t){return this.words[0]&t},r.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,o=(t-e)/26,n=1<<e;if(this.length<=o)return this._expand(o+1),this.words[o]|=n,this;for(var r=n,a=o;0!==r&&a<this.length;a++){var s=0|this.words[a];r=(s+=r)>>>26,s&=67108863,this.words[a]=s}return 0!==r&&(this.words[a]=r,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(t){var e,o=t<0;if(0!==this.negative&&!o)return-1;if(0===this.negative&&o)return 1;if(this._strip(),this.length>1)e=1;else{o&&(t=-t),i(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},r.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},r.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,o=this.length-1;o>=0;o--){var i=0|this.words[o],n=0|t.words[o];if(i!==n){i<n?e=-1:i>n&&(e=1);break}}return e},r.prototype.gtn=function(t){return 1===this.cmpn(t)},r.prototype.gt=function(t){return 1===this.cmp(t)},r.prototype.gten=function(t){return this.cmpn(t)>=0},r.prototype.gte=function(t){return this.cmp(t)>=0},r.prototype.ltn=function(t){return-1===this.cmpn(t)},r.prototype.lt=function(t){return-1===this.cmp(t)},r.prototype.lten=function(t){return this.cmpn(t)<=0},r.prototype.lte=function(t){return this.cmp(t)<=0},r.prototype.eqn=function(t){return 0===this.cmpn(t)},r.prototype.eq=function(t){return 0===this.cmp(t)},r.red=function(t){return new B(t)},r.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},r.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(t){return this.red=t,this},r.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},r.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},r.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},r.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},r.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},r.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},r.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},r.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},r.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var S={k256:null,p224:null,p192:null,p25519:null};function w(t,e){this.name=t,this.p=new r(e,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function A(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function k(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function T(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function B(t){if("string"==typeof t){var e=r._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function M(t){B.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var t=new r(null);return t.words=new Array(Math.ceil(this.n/13)),t},w.prototype.ireduce=function(t){var e,o=t;do{this.split(o,this.tmp),e=(o=(o=this.imulK(o)).iadd(this.tmp)).bitLength()}while(e>this.n);var i=e<this.n?-1:o.ucmp(this.p);return 0===i?(o.words[0]=0,o.length=1):i>0?o.isub(this.p):void 0!==o.strip?o.strip():o._strip(),o},w.prototype.split=function(t,e){t.iushrn(this.n,0,e)},w.prototype.imulK=function(t){return t.imul(this.k)},n(A,w),A.prototype.split=function(t,e){for(var o=Math.min(t.length,9),i=0;i<o;i++)e.words[i]=t.words[i];if(e.length=o,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,i=10;i<t.length;i++){var r=0|t.words[i];t.words[i-10]=(4194303&r)<<4|n>>>22,n=r}n>>>=22,t.words[i-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},A.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,o=0;o<t.length;o++){var i=0|t.words[o];e+=977*i,t.words[o]=67108863&e,e=64*i+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(k,w),n(P,w),n(T,w),T.prototype.imulK=function(t){for(var e=0,o=0;o<t.length;o++){var i=19*(0|t.words[o])+e,n=67108863&i;i>>>=26,t.words[o]=n,e=i}return 0!==e&&(t.words[t.length++]=e),t},r._prime=function(t){if(S[t])return S[t];var e;if("k256"===t)e=new A;else if("p224"===t)e=new k;else if("p192"===t)e=new P;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new T}return S[t]=e,e},B.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},B.prototype._verify2=function(t,e){i(0==(t.negative|e.negative),"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},B.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(h(t,t.umod(this.m)._forceRed(this)),t)},B.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},B.prototype.add=function(t,e){this._verify2(t,e);var o=t.add(e);return o.cmp(this.m)>=0&&o.isub(this.m),o._forceRed(this)},B.prototype.iadd=function(t,e){this._verify2(t,e);var o=t.iadd(e);return o.cmp(this.m)>=0&&o.isub(this.m),o},B.prototype.sub=function(t,e){this._verify2(t,e);var o=t.sub(e);return o.cmpn(0)<0&&o.iadd(this.m),o._forceRed(this)},B.prototype.isub=function(t,e){this._verify2(t,e);var o=t.isub(e);return o.cmpn(0)<0&&o.iadd(this.m),o},B.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},B.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},B.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},B.prototype.isqr=function(t){return this.imul(t,t.clone())},B.prototype.sqr=function(t){return this.mul(t,t)},B.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var o=this.m.add(new r(1)).iushrn(2);return this.pow(t,o)}for(var n=this.m.subn(1),a=0;!n.isZero()&&0===n.andln(1);)a++,n.iushrn(1);i(!n.isZero());var s=new r(1).toRed(this),c=s.redNeg(),l=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new r(2*h*h).toRed(this);0!==this.pow(h,l).cmp(c);)h.redIAdd(c);for(var d=this.pow(h,n),u=this.pow(t,n.addn(1).iushrn(1)),p=this.pow(t,n),f=a;0!==p.cmp(s);){for(var g=p,m=0;0!==g.cmp(s);m++)g=g.redSqr();i(m<f);var v=this.pow(d,new r(1).iushln(f-m-1));u=u.redMul(v),d=v.redSqr(),p=p.redMul(d),f=m}return u},B.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},B.prototype.pow=function(t,e){if(e.isZero())return new r(1).toRed(this);if(0===e.cmpn(1))return t.clone();var o=new Array(16);o[0]=new r(1).toRed(this),o[1]=t;for(var i=2;i<o.length;i++)o[i]=this.mul(o[i-1],t);var n=o[0],a=0,s=0,c=e.bitLength()%26;for(0===c&&(c=26),i=e.length-1;i>=0;i--){for(var l=e.words[i],h=c-1;h>=0;h--){var d=l>>h&1;n!==o[0]&&(n=this.sqr(n)),0!==d||0!==a?(a<<=1,a|=d,(4==++s||0===i&&0===h)&&(n=this.mul(n,o[a]),s=0,a=0)):s=0}c=26}return n},B.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},B.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},r.mont=function(t){return new M(t)},n(M,B),M.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},M.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},M.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var o=t.imul(e),i=o.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=o.isub(i).iushrn(this.shift),r=n;return n.cmp(this.m)>=0?r=n.isub(this.m):n.cmpn(0)<0&&(r=n.iadd(this.m)),r._forceRed(this)},M.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new r(0)._forceRed(this);var o=t.mul(e),i=o.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=o.isub(i).iushrn(this.shift),a=n;return n.cmp(this.m)>=0?a=n.isub(this.m):n.cmpn(0)<0&&(a=n.iadd(this.m)),a._forceRed(this)},M.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}})(void 0===e||e,this)},{buffer:19}],18:[function(t,e){var o;function i(t){this.rand=t}if(e.exports=function(t){return o||(o=new i(null)),o.generate(t)},e.exports.Rand=i,i.prototype.generate=function(t){return this._rand(t)},i.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),o=0;o<e.length;o++)e[o]=this.rand.getByte();return e},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"==typeof window&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var n=t("crypto");if("function"!=typeof n.randomBytes)throw new Error("Not supported");i.prototype._rand=function(t){return n.randomBytes(t)}}catch(r){}},{crypto:19}],19:[function(){},{}],20:[function(t,e){var o=t("safe-buffer").Buffer;function i(t){o.isBuffer(t)||(t=o.from(t));for(var e=t.length/4|0,i=new Array(e),n=0;n<e;n++)i[n]=t.readUInt32BE(4*n);return i}function n(t){for(;0<t.length;t++)t[0]=0}function r(t,e,o,i,n){for(var r,a,s,c,l=o[0],h=o[1],d=o[2],u=o[3],p=t[0]^e[0],f=t[1]^e[1],g=t[2]^e[2],m=t[3]^e[3],v=4,y=1;y<n;y++)r=l[p>>>24]^h[f>>>16&255]^d[g>>>8&255]^u[255&m]^e[v++],a=l[f>>>24]^h[g>>>16&255]^d[m>>>8&255]^u[255&p]^e[v++],s=l[g>>>24]^h[m>>>16&255]^d[p>>>8&255]^u[255&f]^e[v++],c=l[m>>>24]^h[p>>>16&255]^d[f>>>8&255]^u[255&g]^e[v++],p=r,f=a,g=s,m=c;return r=(i[p>>>24]<<24|i[f>>>16&255]<<16|i[g>>>8&255]<<8|i[255&m])^e[v++],a=(i[f>>>24]<<24|i[g>>>16&255]<<16|i[m>>>8&255]<<8|i[255&p])^e[v++],s=(i[g>>>24]<<24|i[m>>>16&255]<<16|i[p>>>8&255]<<8|i[255&f])^e[v++],c=(i[m>>>24]<<24|i[p>>>16&255]<<16|i[f>>>8&255]<<8|i[255&g])^e[v++],[r>>>=0,a>>>=0,s>>>=0,c>>>=0]}var a=[0,1,2,4,8,16,32,64,128,27,54],s=function(){for(var t=new Array(256),e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var o=[],i=[],n=[[],[],[],[]],r=[[],[],[],[]],a=0,s=0,c=0;c<256;++c){var l=s^s<<1^s<<2^s<<3^s<<4;l=l>>>8^255&l^99,o[a]=l,i[l]=a;var h=t[a],d=t[h],u=t[d],p=257*t[l]^16843008*l;n[0][a]=p<<24|p>>>8,n[1][a]=p<<16|p>>>16,n[2][a]=p<<8|p>>>24,n[3][a]=p,p=16843009*u^65537*d^257*h^16843008*a,r[0][l]=p<<24|p>>>8,r[1][l]=p<<16|p>>>16,r[2][l]=p<<8|p>>>24,r[3][l]=p,0===a?a=s=1:(a=h^t[t[t[u^h]]],s^=t[t[s]])}return{SBOX:o,INV_SBOX:i,SUB_MIX:n,INV_SUB_MIX:r}}();function c(t){this._key=i(t),this._reset()}c.blockSize=16,c.keySize=32,c.prototype.blockSize=c.blockSize,c.prototype.keySize=c.keySize,c.prototype._reset=function(){for(var t=this._key,e=t.length,o=e+6,i=4*(o+1),n=[],r=0;r<e;r++)n[r]=t[r];for(r=e;r<i;r++){var c=n[r-1];r%e==0?(c=c<<8|c>>>24,c=s.SBOX[c>>>24]<<24|s.SBOX[c>>>16&255]<<16|s.SBOX[c>>>8&255]<<8|s.SBOX[255&c],c^=a[r/e|0]<<24):e>6&&r%e==4&&(c=s.SBOX[c>>>24]<<24|s.SBOX[c>>>16&255]<<16|s.SBOX[c>>>8&255]<<8|s.SBOX[255&c]),n[r]=n[r-e]^c}for(var l=[],h=0;h<i;h++){var d=i-h,u=n[d-(h%4?0:4)];l[h]=h<4||d<=4?u:s.INV_SUB_MIX[0][s.SBOX[u>>>24]]^s.INV_SUB_MIX[1][s.SBOX[u>>>16&255]]^s.INV_SUB_MIX[2][s.SBOX[u>>>8&255]]^s.INV_SUB_MIX[3][s.SBOX[255&u]]}this._nRounds=o,this._keySchedule=n,this._invKeySchedule=l},c.prototype.encryptBlockRaw=function(t){return r(t=i(t),this._keySchedule,s.SUB_MIX,s.SBOX,this._nRounds)},c.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),i=o.allocUnsafe(16);return i.writeUInt32BE(e[0],0),i.writeUInt32BE(e[1],4),i.writeUInt32BE(e[2],8),i.writeUInt32BE(e[3],12),i},c.prototype.decryptBlock=function(t){var e=(t=i(t))[1];t[1]=t[3],t[3]=e;var n=r(t,this._invKeySchedule,s.INV_SUB_MIX,s.INV_SBOX,this._nRounds),a=o.allocUnsafe(16);return a.writeUInt32BE(n[0],0),a.writeUInt32BE(n[3],4),a.writeUInt32BE(n[2],8),a.writeUInt32BE(n[1],12),a},c.prototype.scrub=function(){n(this._keySchedule),n(this._invKeySchedule),n(this._key)},e.exports.AES=c},{"safe-buffer":181}],21:[function(t,e){var o=t("./aes"),i=t("safe-buffer").Buffer,n=t("cipher-base"),r=t("inherits"),a=t("./ghash"),s=t("buffer-xor"),c=t("./incr32");function l(t,e){var o=0;t.length!==e.length&&o++;for(var i=Math.min(t.length,e.length),n=0;n<i;++n)o+=t[n]^e[n];return o}function h(t,e,o){if(12===e.length)return t._finID=i.concat([e,i.from([0,0,0,1])]),i.concat([e,i.from([0,0,0,2])]);var n=new a(o),r=e.length,s=r%16;n.update(e),s&&(s=16-s,n.update(i.alloc(s,0))),n.update(i.alloc(8,0));var l=8*r,h=i.alloc(8);h.writeUIntBE(l,0,8),n.update(h),t._finID=n.state;var d=i.from(t._finID);return c(d),d}function d(t,e,r,s){n.call(this);var c=i.alloc(4,0);this._cipher=new o.AES(e);var l=this._cipher.encryptBlock(c);this._ghash=new a(l),r=h(this,r,l),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=s,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}r(d,n),d.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=i.alloc(e,0),this._ghash.update(e))}this._called=!0;var o=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(o),this._len+=t.length,o},d.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=s(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&l(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},d.prototype.getAuthTag=function(){if(this._decrypt||!i.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},d.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},d.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},e.exports=d},{"./aes":20,"./ghash":25,"./incr32":26,"buffer-xor":63,"cipher-base":66,inherits:136,"safe-buffer":181}],22:[function(t,e,o){var i=t("./encrypter"),n=t("./decrypter"),r=t("./modes/list.json");o.createCipher=o.Cipher=i.createCipher,o.createCipheriv=o.Cipheriv=i.createCipheriv,o.createDecipher=o.Decipher=n.createDecipher,o.createDecipheriv=o.Decipheriv=n.createDecipheriv,o.listCiphers=o.getCiphers=function(){return Object.keys(r)}},{"./decrypter":23,"./encrypter":24,"./modes/list.json":34}],23:[function(t,e,o){var i=t("./authCipher"),n=t("safe-buffer").Buffer,r=t("./modes"),a=t("./streamCipher"),s=t("cipher-base"),c=t("./aes"),l=t("evp_bytestokey");function h(t,e,o){s.call(this),this._cache=new d,this._last=void 0,this._cipher=new c.AES(e),this._prev=n.from(o),this._mode=t,this._autopadding=!0}function d(){this.cache=n.allocUnsafe(0)}function u(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");for(var o=-1;++o<e;)if(t[o+(16-e)]!==e)throw new Error("unable to decrypt data");if(16!==e)return t.slice(0,16-e)}function p(t,e,o){var s=r[t.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"==typeof o&&(o=n.from(o)),"GCM"!==s.mode&&o.length!==s.iv)throw new TypeError("invalid iv length "+o.length);if("string"==typeof e&&(e=n.from(e)),e.length!==s.key/8)throw new TypeError("invalid key length "+e.length);return"stream"===s.type?new a(s.module,e,o,!0):"auth"===s.type?new i(s.module,e,o,!0):new h(s.module,e,o)}t("inherits")(h,s),h.prototype._update=function(t){var e,o;this._cache.add(t);for(var i=[];e=this._cache.get(this._autopadding);)o=this._mode.decrypt(this,e),i.push(o);return n.concat(i)},h.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return u(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},d.prototype.add=function(t){this.cache=n.concat([this.cache,t])},d.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},d.prototype.flush=function(){if(this.cache.length)return this.cache},o.createDecipher=function(t,e){var o=r[t.toLowerCase()];if(!o)throw new TypeError("invalid suite type");var i=l(e,!1,o.key,o.iv);return p(t,i.key,i.iv)},o.createDecipheriv=p},{"./aes":20,"./authCipher":21,"./modes":33,"./streamCipher":36,"cipher-base":66,evp_bytestokey:104,inherits:136,"safe-buffer":181}],24:[function(t,e,o){var i=t("./modes"),n=t("./authCipher"),r=t("safe-buffer").Buffer,a=t("./streamCipher"),s=t("cipher-base"),c=t("./aes"),l=t("evp_bytestokey");function h(t,e,o){s.call(this),this._cache=new u,this._cipher=new c.AES(e),this._prev=r.from(o),this._mode=t,this._autopadding=!0}t("inherits")(h,s),h.prototype._update=function(t){var e,o;this._cache.add(t);for(var i=[];e=this._cache.get();)o=this._mode.encrypt(this,e),i.push(o);return r.concat(i)};var d=r.alloc(16,16);function u(){this.cache=r.allocUnsafe(0)}function p(t,e,o){var s=i[t.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=r.from(e)),e.length!==s.key/8)throw new TypeError("invalid key length "+e.length);if("string"==typeof o&&(o=r.from(o)),"GCM"!==s.mode&&o.length!==s.iv)throw new TypeError("invalid iv length "+o.length);return"stream"===s.type?new a(s.module,e,o):"auth"===s.type?new n(s.module,e,o):new h(s.module,e,o)}h.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(d))throw this._cipher.scrub(),new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},u.prototype.add=function(t){this.cache=r.concat([this.cache,t])},u.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},u.prototype.flush=function(){for(var t=16-this.cache.length,e=r.allocUnsafe(t),o=-1;++o<t;)e.writeUInt8(t,o);return r.concat([this.cache,e])},o.createCipheriv=p,o.createCipher=function(t,e){var o=i[t.toLowerCase()];if(!o)throw new TypeError("invalid suite type");var n=l(e,!1,o.key,o.iv);return p(t,n.key,n.iv)}},{"./aes":20,"./authCipher":21,"./modes":33,"./streamCipher":36,"cipher-base":66,evp_bytestokey:104,inherits:136,"safe-buffer":181}],25:[function(t,e){var o=t("safe-buffer").Buffer,i=o.alloc(16,0);function n(t){var e=o.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function r(t){this.h=t,this.state=o.alloc(16,0),this.cache=o.allocUnsafe(0)}r.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},r.prototype._multiply=function(){for(var t,e,o,i=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],r=[0,0,0,0],a=-1;++a<128;){for(0!=(this.state[~~(a/8)]&1<<7-a%8)&&(r[0]^=i[0],r[1]^=i[1],r[2]^=i[2],r[3]^=i[3]),o=0!=(1&i[3]),e=3;e>0;e--)i[e]=i[e]>>>1|(1&i[e-1])<<31;i[0]=i[0]>>>1,o&&(i[0]=i[0]^225<<24)}this.state=n(r)},r.prototype.update=function(t){var e;for(this.cache=o.concat([this.cache,t]);this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)},r.prototype.final=function(t,e){return this.cache.length&&this.ghash(o.concat([this.cache,i],16)),this.ghash(n([0,t,0,e])),this.state},e.exports=r},{"safe-buffer":181}],26:[function(t,e){e.exports=function(t){for(var e,o=t.length;o--;){if(255!==(e=t.readUInt8(o))){e++,t.writeUInt8(e,o);break}t.writeUInt8(0,o)}}},{}],27:[function(t,e,o){var i=t("buffer-xor");o.encrypt=function(t,e){var o=i(e,t._prev);return t._prev=t._cipher.encryptBlock(o),t._prev},o.decrypt=function(t,e){var o=t._prev;t._prev=e;var n=t._cipher.decryptBlock(e);return i(n,o)}},{"buffer-xor":63}],28:[function(t,e,o){var i=t("safe-buffer").Buffer,n=t("buffer-xor");function r(t,e,o){var r=e.length,a=n(e,t._cache);return t._cache=t._cache.slice(r),t._prev=i.concat([t._prev,o?e:a]),a}o.encrypt=function(t,e,o){for(var n,a=i.allocUnsafe(0);e.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=i.allocUnsafe(0)),!(t._cache.length<=e.length)){a=i.concat([a,r(t,e,o)]);break}n=t._cache.length,a=i.concat([a,r(t,e.slice(0,n),o)]),e=e.slice(n)}return a}},{"buffer-xor":63,"safe-buffer":181}],29:[function(t,e,o){var i=t("safe-buffer").Buffer;function n(t,e,o){for(var i,n,a=-1,s=0;++a<8;)i=e&1<<7-a?128:0,s+=(128&(n=t._cipher.encryptBlock(t._prev)[0]^i))>>a%8,t._prev=r(t._prev,o?i:n);return s}function r(t,e){var o=t.length,n=-1,r=i.allocUnsafe(t.length);for(t=i.concat([t,i.from([e])]);++n<o;)r[n]=t[n]<<1|t[n+1]>>7;return r}o.encrypt=function(t,e,o){for(var r=e.length,a=i.allocUnsafe(r),s=-1;++s<r;)a[s]=n(t,e[s],o);return a}},{"safe-buffer":181}],30:[function(t,e,o){var i=t("safe-buffer").Buffer;function n(t,e,o){var n=t._cipher.encryptBlock(t._prev)[0]^e;return t._prev=i.concat([t._prev.slice(1),i.from([o?e:n])]),n}o.encrypt=function(t,e,o){for(var r=e.length,a=i.allocUnsafe(r),s=-1;++s<r;)a[s]=n(t,e[s],o);return a}},{"safe-buffer":181}],31:[function(t,e,o){var i=t("buffer-xor"),n=t("safe-buffer").Buffer,r=t("../incr32");function a(t){var e=t._cipher.encryptBlockRaw(t._prev);return r(t._prev),e}o.encrypt=function(t,e){var o=Math.ceil(e.length/16),r=t._cache.length;t._cache=n.concat([t._cache,n.allocUnsafe(16*o)]);for(var s=0;s<o;s++){var c=a(t),l=r+16*s;t._cache.writeUInt32BE(c[0],l+0),t._cache.writeUInt32BE(c[1],l+4),t._cache.writeUInt32BE(c[2],l+8),t._cache.writeUInt32BE(c[3],l+12)}var h=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),i(e,h)}},{"../incr32":26,"buffer-xor":63,"safe-buffer":181}],32:[function(t,e,o){o.encrypt=function(t,e){return t._cipher.encryptBlock(e)},o.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},{}],33:[function(t,e){var o={ECB:t("./ecb"),CBC:t("./cbc"),CFB:t("./cfb"),CFB8:t("./cfb8"),CFB1:t("./cfb1"),OFB:t("./ofb"),CTR:t("./ctr"),GCM:t("./ctr")},i=t("./list.json");for(var n in i)i[n].module=o[i[n].mode];e.exports=i},{"./cbc":27,"./cfb":28,"./cfb1":29,"./cfb8":30,"./ctr":31,"./ecb":32,"./list.json":34,"./ofb":35}],34:[function(t,e){e.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],35:[function(t,e,o){(function(e){var i=t("buffer-xor");function n(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}o.encrypt=function(t,o){for(;t._cache.length<o.length;)t._cache=e.concat([t._cache,n(t)]);var r=t._cache.slice(0,o.length);return t._cache=t._cache.slice(o.length),i(o,r)}}).call(this,t("buffer").Buffer)},{buffer:64,"buffer-xor":63}],36:[function(t,e){var o=t("./aes"),i=t("safe-buffer").Buffer,n=t("cipher-base");function r(t,e,r,a){n.call(this),this._cipher=new o.AES(e),this._prev=i.from(r),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=a,this._mode=t}t("inherits")(r,n),r.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},r.prototype._final=function(){this._cipher.scrub()},e.exports=r},{"./aes":20,"cipher-base":66,inherits:136,"safe-buffer":181}],37:[function(t,e,o){var i=t("browserify-des"),n=t("browserify-aes/browser"),r=t("browserify-aes/modes"),a=t("browserify-des/modes"),s=t("evp_bytestokey");function c(t,e,o){if(t=t.toLowerCase(),r[t])return n.createCipheriv(t,e,o);if(a[t])return new i({key:e,iv:o,mode:t});throw new TypeError("invalid suite type")}function l(t,e,o){if(t=t.toLowerCase(),r[t])return n.createDecipheriv(t,e,o);if(a[t])return new i({key:e,iv:o,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}o.createCipher=o.Cipher=function(t,e){var o,i;if(t=t.toLowerCase(),r[t])o=r[t].key,i=r[t].iv;else{if(!a[t])throw new TypeError("invalid suite type");o=8*a[t].key,i=a[t].iv}var n=s(e,!1,o,i);return c(t,n.key,n.iv)},o.createCipheriv=o.Cipheriv=c,o.createDecipher=o.Decipher=function(t,e){var o,i;if(t=t.toLowerCase(),r[t])o=r[t].key,i=r[t].iv;else{if(!a[t])throw new TypeError("invalid suite type");o=8*a[t].key,i=a[t].iv}var n=s(e,!1,o,i);return l(t,n.key,n.iv)},o.createDecipheriv=o.Decipheriv=l,o.listCiphers=o.getCiphers=function(){return Object.keys(a).concat(n.getCiphers())}},{"browserify-aes/browser":22,"browserify-aes/modes":33,"browserify-des":38,"browserify-des/modes":39,evp_bytestokey:104}],38:[function(t,e){var o=t("cipher-base"),i=t("des.js"),n=t("inherits"),r=t("safe-buffer").Buffer,a={"des-ede3-cbc":i.CBC.instantiate(i.EDE),"des-ede3":i.EDE,"des-ede-cbc":i.CBC.instantiate(i.EDE),"des-ede":i.EDE,"des-cbc":i.CBC.instantiate(i.DES),"des-ecb":i.DES};function s(t){o.call(this);var e,i=t.mode.toLowerCase(),n=a[i];e=t.decrypt?"decrypt":"encrypt";var s=t.key;r.isBuffer(s)||(s=r.from(s)),"des-ede"!==i&&"des-ede-cbc"!==i||(s=r.concat([s,s.slice(0,8)]));var c=t.iv;r.isBuffer(c)||(c=r.from(c)),this._des=n.create({key:s,iv:c,type:e})}a.des=a["des-cbc"],a.des3=a["des-ede3-cbc"],e.exports=s,n(s,o),s.prototype._update=function(t){return r.from(this._des.update(t))},s.prototype._final=function(){return r.from(this._des.final())}},{"cipher-base":66,"des.js":75,inherits:136,"safe-buffer":181}],39:[function(t,e,o){o["des-ecb"]={key:8,iv:0},o["des-cbc"]=o.des={key:8,iv:8},o["des-ede3-cbc"]=o.des3={key:24,iv:8},o["des-ede3"]={key:24,iv:0},o["des-ede-cbc"]={key:16,iv:8},o["des-ede"]={key:16,iv:0}},{}],40:[function(t,e){(function(o){var i=t("bn.js"),n=t("randombytes");function r(t){var e=a(t);return{blinder:e.toRed(i.mont(t.modulus)).redPow(new i(t.publicExponent)).fromRed(),unblinder:e.invm(t.modulus)}}function a(t){var e,o=t.modulus.byteLength();do{e=new i(n(o))}while(e.cmp(t.modulus)>=0||!e.umod(t.prime1)||!e.umod(t.prime2));return e}function s(t,e){var n=r(e),a=e.modulus.byteLength(),s=new i(t).mul(n.blinder).umod(e.modulus),c=s.toRed(i.mont(e.prime1)),l=s.toRed(i.mont(e.prime2)),h=e.coefficient,d=e.prime1,u=e.prime2,p=c.redPow(e.exponent1).fromRed(),f=l.redPow(e.exponent2).fromRed(),g=p.isub(f).imul(h).umod(d).imul(u);return f.iadd(g).imul(n.unblinder).umod(e.modulus).toArrayLike(o,"be",a)}s.getr=a,e.exports=s}).call(this,t("buffer").Buffer)},{"bn.js":17,buffer:64,randombytes:162}],41:[function(t,e){e.exports=t("./browser/algorithms.json")},{"./browser/algorithms.json":42}],42:[function(t,e){e.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],43:[function(t,e){e.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],44:[function(t,e){var o=t("safe-buffer").Buffer,i=t("create-hash"),n=t("readable-stream"),r=t("inherits"),a=t("./sign"),s=t("./verify"),c=t("./algorithms.json");function l(t){n.Writable.call(this);var e=c[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=i(e.hash),this._tag=e.id,this._signType=e.sign}function h(t){n.Writable.call(this);var e=c[t];if(!e)throw new Error("Unknown message digest");this._hash=i(e.hash),this._tag=e.id,this._signType=e.sign}function d(t){return new l(t)}function u(t){return new h(t)}Object.keys(c).forEach(function(t){c[t].id=o.from(c[t].id,"hex"),c[t.toLowerCase()]=c[t]}),r(l,n.Writable),l.prototype._write=function(t,e,o){this._hash.update(t),o()},l.prototype.update=function(t,e){return"string"==typeof t&&(t=o.from(t,e)),this._hash.update(t),this},l.prototype.sign=function(t,e){this.end();var o=this._hash.digest(),i=a(o,t,this._hashType,this._signType,this._tag);return e?i.toString(e):i},r(h,n.Writable),h.prototype._write=function(t,e,o){this._hash.update(t),o()},h.prototype.update=function(t,e){return"string"==typeof t&&(t=o.from(t,e)),this._hash.update(t),this},h.prototype.verify=function(t,e,i){"string"==typeof e&&(e=o.from(e,i)),this.end();var n=this._hash.digest();return s(e,n,t,this._signType,this._tag)},e.exports={Sign:d,Verify:u,createSign:d,createVerify:u}},{"./algorithms.json":42,"./sign":45,"./verify":46,"create-hash":70,inherits:136,"readable-stream":61,"safe-buffer":181}],45:[function(t,e){var o=t("safe-buffer").Buffer,i=t("create-hmac"),n=t("browserify-rsa"),r=t("elliptic").ec,a=t("bn.js"),s=t("parse-asn1"),c=t("./curves.json");function l(t,e){var i=c[e.curve.join(".")];if(!i)throw new Error("unknown curve "+e.curve.join("."));var n=new r(i).keyFromPrivate(e.privateKey).sign(t);return o.from(n.toDER())}function h(t,e,o){for(var i,n=e.params.priv_key,r=e.params.p,s=e.params.q,c=e.params.g,l=new a(0),h=p(t,s).mod(s),f=!1,v=u(n,s,t,o);!1===f;)l=m(c,i=g(s,v,o),r,s),0===(f=i.invm(s).imul(h.add(n.mul(l))).mod(s)).cmpn(0)&&(f=!1,l=new a(0));return d(l,f)}function d(t,e){t=t.toArray(),e=e.toArray(),128&t[0]&&(t=[0].concat(t)),128&e[0]&&(e=[0].concat(e));var i=[48,t.length+e.length+4,2,t.length];return i=i.concat(t,[2,e.length],e),o.from(i)}function u(t,e,n,r){if((t=o.from(t.toArray())).length<e.byteLength()){var a=o.alloc(e.byteLength()-t.length);t=o.concat([a,t])}var s=n.length,c=f(n,e),l=o.alloc(s);l.fill(1);var h=o.alloc(s);return h=i(r,h).update(l).update(o.from([0])).update(t).update(c).digest(),l=i(r,h).update(l).digest(),{k:h=i(r,h).update(l).update(o.from([1])).update(t).update(c).digest(),v:l=i(r,h).update(l).digest()}}function p(t,e){var o=new a(t),i=(t.length<<3)-e.bitLength();return i>0&&o.ishrn(i),o}function f(t,e){t=(t=p(t,e)).mod(e);var i=o.from(t.toArray());if(i.length<e.byteLength()){var n=o.alloc(e.byteLength()-i.length);i=o.concat([n,i])}return i}function g(t,e,n){var r,a;do{for(r=o.alloc(0);8*r.length<t.bitLength();)e.v=i(n,e.k).update(e.v).digest(),r=o.concat([r,e.v]);a=p(r,t),e.k=i(n,e.k).update(e.v).update(o.from([0])).digest(),e.v=i(n,e.k).update(e.v).digest()}while(-1!==a.cmp(t));return a}function m(t,e,o,i){return t.toRed(a.mont(o)).redPow(e).fromRed().mod(i)}e.exports=function(t,e,i,r,a){var c=s(e);if(c.curve){if("ecdsa"!==r&&"ecdsa/rsa"!==r)throw new Error("wrong private key type");return l(t,c)}if("dsa"===c.type){if("dsa"!==r)throw new Error("wrong private key type");return h(t,c,i)}if("rsa"!==r&&"ecdsa/rsa"!==r)throw new Error("wrong private key type");t=o.concat([a,t]);for(var d=c.modulus.byteLength(),u=[0,1];t.length+u.length+1<d;)u.push(255);u.push(0);for(var p=-1;++p<t.length;)u.push(t[p]);return n(u,c)},e.exports.getKey=u,e.exports.makeKey=g},{"./curves.json":43,"bn.js":17,"browserify-rsa":40,"create-hmac":72,elliptic:86,"parse-asn1":146,"safe-buffer":181}],46:[function(t,e){var o=t("safe-buffer").Buffer,i=t("bn.js"),n=t("elliptic").ec,r=t("parse-asn1"),a=t("./curves.json");function s(t,e,o){var i=a[o.data.algorithm.curve.join(".")];if(!i)throw new Error("unknown curve "+o.data.algorithm.curve.join("."));var r=new n(i),s=o.data.subjectPrivateKey.data;return r.verify(e,t,s)}function c(t,e,o){var n=o.data.p,a=o.data.q,s=o.data.g,c=o.data.pub_key,h=r.signature.decode(t,"der"),d=h.s,u=h.r;l(d,a),l(u,a);var p=i.mont(n),f=d.invm(a);return 0===s.toRed(p).redPow(new i(e).mul(f).mod(a)).fromRed().mul(c.toRed(p).redPow(u.mul(f).mod(a)).fromRed()).mod(n).mod(a).cmp(u)}function l(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=e)throw new Error("invalid sig")}e.exports=function(t,e,n,a,l){var h=r(n);if("ec"===h.type){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw new Error("wrong public key type");return s(t,e,h)}if("dsa"===h.type){if("dsa"!==a)throw new Error("wrong public key type");return c(t,e,h)}if("rsa"!==a&&"ecdsa/rsa"!==a)throw new Error("wrong public key type");e=o.concat([l,e]);for(var d=h.modulus.byteLength(),u=[1],p=0;e.length+u.length+2<d;)u.push(255),p++;u.push(0);for(var f=-1;++f<e.length;)u.push(e[f]);u=o.from(u);var g=i.mont(h.modulus);t=(t=new i(t).toRed(g)).redPow(new i(h.publicExponent)),t=o.from(t.fromRed().toArray());var m=p<8?1:0;for(d=Math.min(t.length,u.length),t.length!==u.length&&(m=1),f=-1;++f<d;)m|=t[f]^u[f];return 0===m}},{"./curves.json":43,"bn.js":17,elliptic:86,"parse-asn1":146,"safe-buffer":181}],47:[function(t,e){"use strict";var o={};function i(t,e,i){function n(t,o,i){return"string"==typeof e?e:e(t,o,i)}i||(i=Error);var r=function(t){var e,o;function i(e,o,i){return t.call(this,n(e,o,i))||this}return o=t,(e=i).prototype=Object.create(o.prototype),e.prototype.constructor=e,e.__proto__=o,i}(i);r.prototype.name=i.name,r.prototype.code=t,o[t]=r}function n(t,e){if(Array.isArray(t)){var o=t.length;return t=t.map(function(t){return String(t)}),o>2?"one of ".concat(e," ").concat(t.slice(0,o-1).join(", "),", or ")+t[o-1]:2===o?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}function r(t,e,o){return(void 0===o||o>t.length)&&(o=t.length),t.substring(o-e.length,o)===e}function a(t,e,o){return"number"!=typeof o&&(o=0),!(o+e.length>t.length)&&-1!==t.indexOf(e,o)}i("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError),i("ERR_INVALID_ARG_TYPE",function(t,e,o){var i,s;if("string"==typeof e&&("not ","not "===e.substr(0,"not ".length))?(i="must not be",e=e.replace(/^not /,"")):i="must be",r(t," argument"))s="The ".concat(t," ").concat(i," ").concat(n(e,"type"));else{var c=a(t,".")?"property":"argument";s='The "'.concat(t,'" ').concat(c," ").concat(i," ").concat(n(e,"type"))}return s+". Received type ".concat(typeof o)},TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=o},{}],48:[function(t,e){(function(o){"use strict";var i=Object.keys||function(t){var e=[];for(var o in t)e.push(o);return e};e.exports=l;var n=t("./_stream_readable"),r=t("./_stream_writable");t("inherits")(l,n);for(var a=i(r.prototype),s=0;s<a.length;s++){var c=a[s];l.prototype[c]||(l.prototype[c]=r.prototype[c])}function l(t){if(!(this instanceof l))return new l(t);n.call(this,t),r.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||o.nextTick(d,this)}function d(t){t.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this,t("_process"))},{"./_stream_readable":50,"./_stream_writable":52,_process:154,inherits:136}],49:[function(t,e){"use strict";e.exports=i;var o=t("./_stream_transform");function i(t){if(!(this instanceof i))return new i(t);o.call(this,t)}t("inherits")(i,o),i.prototype._transform=function(t,e,o){o(null,t)}},{"./_stream_transform":51,inherits:136}],50:[function(t,e){(function(o,i){"use strict";var n;e.exports=T,T.ReadableState=P,t("events").EventEmitter;var r=function(t,e){return t.listeners(e).length},a=t("./internal/streams/stream"),s=t("buffer").Buffer,c=(void 0!==i?i:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};function l(t){return s.from(t)}var h,d=t("util");h=d&&d.debuglog?d.debuglog("stream"):function(){};var u,p,f,g=t("./internal/streams/buffer_list"),m=t("./internal/streams/destroy"),v=t("./internal/streams/state").getHighWaterMark,y=t("../errors").codes,_=y.ERR_INVALID_ARG_TYPE,C=y.ERR_STREAM_PUSH_AFTER_EOF,b=y.ERR_METHOD_NOT_IMPLEMENTED,S=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t("inherits")(T,a);var w=m.errorOrDestroy,A=["error","close","destroy","pause","resume"];function k(t,e,o){if("function"==typeof t.prependListener)return t.prependListener(e,o);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(o):t._events[e]=[o,t._events[e]]:t.on(e,o)}function P(e,o,i){n=n||t("./_stream_duplex"),e=e||{},"boolean"!=typeof i&&(i=o instanceof n),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=v(this,e,"readableHighWaterMark",i),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(u||(u=t("string_decoder/").StringDecoder),this.decoder=new u(e.encoding),this.encoding=e.encoding)}function T(e){if(n=n||t("./_stream_duplex"),!(this instanceof T))return new T(e);var o=this instanceof n;this._readableState=new P(e,this,o),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function B(t,e,o,i,n){h("readableAddChunk",e);var r,a=t._readableState;if(null===e)a.reading=!1,N(t,a);else if(n||(r=I(a,e)),r)w(t,r);else if(a.objectMode||e&&e.length>0)if("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===s.prototype||(e=l(e)),i)a.endEmitted?w(t,new S):M(t,a,e,!0);else if(a.ended)w(t,new C);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!o?(e=a.decoder.write(e),a.objectMode||0!==e.length?M(t,a,e,!1):U(t,a)):M(t,a,e,!1)}else i||(a.reading=!1,U(t,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function M(t,e,o,i){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",o)):(e.length+=e.objectMode?1:o.length,i?e.buffer.unshift(o):e.buffer.push(o),e.needReadable&&E(t)),U(t,e)}function I(t,e){var o,i;return i=e,s.isBuffer(i)||i instanceof c||"string"==typeof e||void 0===e||t.objectMode||(o=new _("chunk",["string","Buffer","Uint8Array"],e)),o}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),T.prototype.destroy=m.destroy,T.prototype._undestroy=m.undestroy,T.prototype._destroy=function(t,e){e(t)},T.prototype.push=function(t,e){var o,i=this._readableState;return i.objectMode?o=!0:"string"==typeof t&&((e=e||i.defaultEncoding)!==i.encoding&&(t=s.from(t,e),e=""),o=!0),B(this,t,e,!1,o)},T.prototype.unshift=function(t){return B(this,t,null,!0,!1)},T.prototype.isPaused=function(){return!1===this._readableState.flowing},T.prototype.setEncoding=function(e){u||(u=t("string_decoder/").StringDecoder);var o=new u(e);this._readableState.decoder=o,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,n="";null!==i;)n+=o.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var R=1073741824;function L(t){return t>=R?t=R:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function D(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=L(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function N(t,e){if(h("onEofChunk"),!e.ended){if(e.decoder){var o=e.decoder.end();o&&o.length&&(e.buffer.push(o),e.length+=e.objectMode?1:o.length)}e.ended=!0,e.sync?E(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,x(t)))}}function E(t){var e=t._readableState;h("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(h("emitReadable",e.flowing),e.emittedReadable=!0,o.nextTick(x,t))}function x(t){var e=t._readableState;h("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,j(t)}function U(t,e){e.readingMore||(e.readingMore=!0,o.nextTick(O,t,e))}function O(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var o=e.length;if(h("maybeReadMore read 0"),t.read(0),o===e.length)break}e.readingMore=!1}function F(t){return function(){var e=t._readableState;h("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&r(t,"data")&&(e.flowing=!0,j(t))}}function W(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function V(t){h("readable nexttick read 0"),t.read(0)}function H(t,e){e.resumeScheduled||(e.resumeScheduled=!0,o.nextTick(G,t,e))}function G(t,e){h("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),j(t),e.flowing&&!e.reading&&t.read(0)}function j(t){var e=t._readableState;for(h("flow",e.flowing);e.flowing&&null!==t.read(););}function z(t,e){return 0===e.length?null:(e.objectMode?o=e.buffer.shift():!t||t>=e.length?(o=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):o=e.buffer.consume(t,e.decoder),o);var o}function q(t){var e=t._readableState;h("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,o.nextTick(K,e,t))}function K(t,e){if(h("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var o=e._writableState;(!o||o.autoDestroy&&o.finished)&&e.destroy()}}function X(t,e){for(var o=0,i=t.length;o<i;o++)if(t[o]===e)return o;return-1}T.prototype.read=function(t){h("read",t),t=parseInt(t,10);var e=this._readableState,o=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return h("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?q(this):E(this),null;if(0===(t=D(t,e))&&e.ended)return 0===e.length&&q(this),null;var i,n=e.needReadable;return h("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&h("length less than watermark",n=!0),e.ended||e.reading?h("reading or ended",n=!1):n&&(h("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=D(o,e))),null===(i=t>0?z(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),o!==t&&e.ended&&q(this)),null!==i&&this.emit("data",i),i},T.prototype._read=function(){w(this,new b("_read()"))},T.prototype.pipe=function(t,e){var i=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t)}n.pipesCount+=1,h("pipe count=%d opts=%j",n.pipesCount,e);var a=e&&!1===e.end||t===o.stdout||t===o.stderr?m:c;function s(e,o){h("onunpipe"),e===i&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,h("cleanup"),t.removeListener("close",f),t.removeListener("finish",g),t.removeListener("drain",l),t.removeListener("error",p),t.removeListener("unpipe",s),i.removeListener("end",c),i.removeListener("end",m),i.removeListener("data",u),d=!0,!n.awaitDrain||t._writableState&&!t._writableState.needDrain||l())}function c(){h("onend"),t.end()}n.endEmitted?o.nextTick(a):i.once("end",a),t.on("unpipe",s);var l=F(i);t.on("drain",l);var d=!1;function u(e){h("ondata");var o=t.write(e);h("dest.write",o),!1===o&&((1===n.pipesCount&&n.pipes===t||n.pipesCount>1&&-1!==X(n.pipes,t))&&!d&&(h("false write response, pause",n.awaitDrain),n.awaitDrain++),i.pause())}function p(e){h("onerror",e),m(),t.removeListener("error",p),0===r(t,"error")&&w(t,e)}function f(){t.removeListener("finish",g),m()}function g(){h("onfinish"),t.removeListener("close",f),m()}function m(){h("unpipe"),i.unpipe(t)}return i.on("data",u),k(t,"error",p),t.once("close",f),t.once("finish",g),t.emit("pipe",i),n.flowing||(h("pipe resume"),i.resume()),t},T.prototype.unpipe=function(t){var e=this._readableState,o={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,o),this);if(!t){var i=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var r=0;r<n;r++)i[r].emit("unpipe",this,{hasUnpiped:!1});return this}var a=X(e.pipes,t);return-1===a?this:(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,o),this)},T.prototype.on=function(t,e){var i=a.prototype.on.call(this,t,e),n=this._readableState;return"data"===t?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===t&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,h("on readable",n.length,n.reading),n.length?E(this):n.reading||o.nextTick(V,this))),i},T.prototype.addListener=T.prototype.on,T.prototype.removeListener=function(t,e){var i=a.prototype.removeListener.call(this,t,e);return"readable"===t&&o.nextTick(W,this),i},T.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||o.nextTick(W,this),e},T.prototype.resume=function(){var t=this._readableState;return t.flowing||(h("resume"),t.flowing=!t.readableListening,H(this,t)),t.paused=!1,this},T.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(t){var e=this,o=this._readableState,i=!1;for(var n in t.on("end",function(){if(h("wrapped end"),o.decoder&&!o.ended){var t=o.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(n){h("wrapped data"),o.decoder&&(n=o.decoder.write(n)),o.objectMode&&null==n||(o.objectMode||n&&n.length)&&(e.push(n)||(i=!0,t.pause()))}),t)void 0===this[n]&&"function"==typeof t[n]&&(this[n]=function(e){return function(){return t[e].apply(t,arguments)}}(n));for(var r=0;r<A.length;r++)t.on(A[r],this.emit.bind(this,A[r]));return this._read=function(e){h("wrapped _read",e),i&&(i=!1,t.resume())},this},"function"==typeof Symbol&&(T.prototype[Symbol.asyncIterator]=function(){return void 0===p&&(p=t("./internal/streams/async_iterator")),p(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),T._fromList=z,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(T.from=function(e,o){return void 0===f&&(f=t("./internal/streams/from")),f(T,e,o)})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":47,"./_stream_duplex":48,"./internal/streams/async_iterator":53,"./internal/streams/buffer_list":54,"./internal/streams/destroy":55,"./internal/streams/from":57,"./internal/streams/state":59,"./internal/streams/stream":60,_process:154,buffer:64,events:103,inherits:136,"string_decoder/":62,util:19}],51:[function(t,e){"use strict";e.exports=l;var o=t("../errors").codes,i=o.ERR_METHOD_NOT_IMPLEMENTED,n=o.ERR_MULTIPLE_CALLBACK,r=o.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=o.ERR_TRANSFORM_WITH_LENGTH_0,s=t("./_stream_duplex");function c(t,e){var o=this._transformState;o.transforming=!1;var i=o.writecb;if(null===i)return this.emit("error",new n);o.writechunk=null,o.writecb=null,null!=e&&this.push(e),i(t);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function l(t){if(!(this instanceof l))return new l(t);s.call(this,t),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush(function(e,o){d(t,e,o)})}function d(t,e,o){if(e)return t.emit("error",e);if(null!=o&&t.push(o),t._writableState.length)throw new a;if(t._transformState.transforming)throw new r;return t.push(null)}t("inherits")(l,s),l.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},l.prototype._transform=function(t,e,o){o(new i("_transform()"))},l.prototype._write=function(t,e,o){var i=this._transformState;if(i.writecb=o,i.writechunk=t,i.writeencoding=e,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},l.prototype._read=function(){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(t,e){s.prototype._destroy.call(this,t,function(t){e(t)})}},{"../errors":47,"./_stream_duplex":48,inherits:136}],52:[function(t,e){(function(o,i){"use strict";function n(t){var e=this;this.next=null,this.entry=null,this.finish=function(){G(e,t)}}var r;e.exports=P,P.WritableState=k;var a={deprecate:t("util-deprecate")},s=t("./internal/streams/stream"),c=t("buffer").Buffer,l=(void 0!==i?i:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};function h(t){return c.from(t)}var d,u=t("./internal/streams/destroy"),p=t("./internal/streams/state").getHighWaterMark,f=t("../errors").codes,g=f.ERR_INVALID_ARG_TYPE,m=f.ERR_METHOD_NOT_IMPLEMENTED,v=f.ERR_MULTIPLE_CALLBACK,y=f.ERR_STREAM_CANNOT_PIPE,_=f.ERR_STREAM_DESTROYED,C=f.ERR_STREAM_NULL_VALUES,b=f.ERR_STREAM_WRITE_AFTER_END,S=f.ERR_UNKNOWN_ENCODING,w=u.errorOrDestroy;function A(){}function k(e,o,i){r=r||t("./_stream_duplex"),e=e||{},"boolean"!=typeof i&&(i=o instanceof r),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=p(this,e,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){N(o,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function P(e){var o=this instanceof(r=r||t("./_stream_duplex"));if(!o&&!d.call(P,this))return new P(e);this._writableState=new k(e,this,o),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),s.call(this)}function T(t,e){var i=new b;w(t,i),o.nextTick(e,i)}function B(t,e,i,n){var r;return null===i?r=new C:"string"==typeof i||e.objectMode||(r=new g("chunk",["string","Buffer"],i)),!r||(w(t,r),o.nextTick(n,r),!1)}function M(t,e,o){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=c.from(e,o)),e}function I(t,e,o,i,n,r){if(!o){var a=M(e,i,n);i!==a&&(o=!0,n="buffer",i=a)}var s=e.objectMode?1:i.length;e.length+=s;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:n,isBuf:o,callback:r,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else R(t,e,!1,s,i,n,r);return c}function R(t,e,o,i,n,r,a){e.writelen=i,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new _("write")):o?t._writev(n,e.onwrite):t._write(n,r,e.onwrite),e.sync=!1}function L(t,e,i,n,r){--e.pendingcb,i?(o.nextTick(r,n),o.nextTick(V,t,e),t._writableState.errorEmitted=!0,w(t,n)):(r(n),t._writableState.errorEmitted=!0,w(t,n),V(t,e))}function D(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function N(t,e){var i=t._writableState,n=i.sync,r=i.writecb;if("function"!=typeof r)throw new v;if(D(i),e)L(t,i,n,e,r);else{var a=O(i)||t.destroyed;a||i.corked||i.bufferProcessing||!i.bufferedRequest||U(t,i),n?o.nextTick(E,t,i,a,r):E(t,i,a,r)}}function E(t,e,o,i){o||x(t,e),e.pendingcb--,i(),V(t,e)}function x(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function U(t,e){e.bufferProcessing=!0;var o=e.bufferedRequest;if(t._writev&&o&&o.next){var i=e.bufferedRequestCount,r=new Array(i),a=e.corkedRequestsFree;a.entry=o;for(var s=0,c=!0;o;)r[s]=o,o.isBuf||(c=!1),o=o.next,s+=1;r.allBuffers=c,R(t,e,!0,e.length,r,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new n(e),e.bufferedRequestCount=0}else{for(;o;){var l=o.chunk,h=o.encoding,d=o.callback;if(R(t,e,!1,e.objectMode?1:l.length,l,h,d),o=o.next,e.bufferedRequestCount--,e.writing)break}null===o&&(e.lastBufferedRequest=null)}e.bufferedRequest=o,e.bufferProcessing=!1}function O(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function F(t,e){t._final(function(o){e.pendingcb--,o&&w(t,o),e.prefinished=!0,t.emit("prefinish"),V(t,e)})}function W(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,o.nextTick(F,t,e)))}function V(t,e){var o=O(e);if(o&&(W(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var i=t._readableState;(!i||i.autoDestroy&&i.endEmitted)&&t.destroy()}return o}function H(t,e,i){e.ending=!0,V(t,e),i&&(e.finished?o.nextTick(i):t.once("finish",i)),e.ended=!0,t.writable=!1}function G(t,e,o){var i=t.entry;for(t.entry=null;i;){var n=i.callback;e.pendingcb--,n(o),i=i.next}e.corkedRequestsFree.next=t}t("inherits")(P,s),k.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(k.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(t){return!!d.call(this,t)||this===P&&t&&t._writableState instanceof k}})):d=function(t){return t instanceof this},P.prototype.pipe=function(){w(this,new y)},P.prototype.write=function(t,e,o){var i,n=this._writableState,r=!1,a=!n.objectMode&&(i=t,c.isBuffer(i)||i instanceof l);return a&&!c.isBuffer(t)&&(t=h(t)),"function"==typeof e&&(o=e,e=null),a?e="buffer":e||(e=n.defaultEncoding),"function"!=typeof o&&(o=A),n.ending?T(this,o):(a||B(this,n,t,o))&&(n.pendingcb++,r=I(this,n,a,t,e,o)),r},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||U(this,t))},P.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new S(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),P.prototype._write=function(t,e,o){o(new m("_write()"))},P.prototype._writev=null,P.prototype.end=function(t,e,o){var i=this._writableState;return"function"==typeof t?(o=t,t=null,e=null):"function"==typeof e&&(o=e,e=null),null!=t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||H(this,i,o),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),P.prototype.destroy=u.destroy,P.prototype._undestroy=u.undestroy,P.prototype._destroy=function(t,e){e(t)}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":47,"./_stream_duplex":48,"./internal/streams/destroy":55,"./internal/streams/state":59,"./internal/streams/stream":60,_process:154,buffer:64,inherits:136,"util-deprecate":193}],53:[function(t,e){(function(o){"use strict";var i;function n(t,e,o){return(e=r(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function r(t){var e=a(t,"string");return"symbol"==typeof e?e:String(e)}function a(t,e){if("object"!=typeof t||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var s=t("./end-of-stream"),c=Symbol("lastResolve"),l=Symbol("lastReject"),h=Symbol("error"),d=Symbol("ended"),u=Symbol("lastPromise"),p=Symbol("handlePromise"),f=Symbol("stream");function g(t,e){return{value:t,done:e}}function m(t){var e=t[c];if(null!==e){var o=t[f].read();null!==o&&(t[u]=null,t[c]=null,t[l]=null,e(g(o,!1)))}}function v(t){o.nextTick(m,t)}function y(t,e){return function(o,i){t.then(function(){e[d]?o(g(void 0,!0)):e[p](o,i)},i)}}var _=Object.getPrototypeOf(function(){}),C=Object.setPrototypeOf((n(i={get stream(){return this[f]},next:function(){var t=this,e=this[h];if(null!==e)return Promise.reject(e);if(this[d])return Promise.resolve(g(void 0,!0));if(this[f].destroyed)return new Promise(function(e,i){o.nextTick(function(){t[h]?i(t[h]):e(g(void 0,!0))})});var i,n=this[u];if(n)i=new Promise(y(n,this));else{var r=this[f].read();if(null!==r)return Promise.resolve(g(r,!1));i=new Promise(this[p])}return this[u]=i,i}},Symbol.asyncIterator,function(){return this}),n(i,"return",function(){var t=this;return new Promise(function(e,o){t[f].destroy(null,function(t){t?o(t):e(g(void 0,!0))})})}),i),_);e.exports=function(t){var e,o=Object.create(C,(n(e={},f,{value:t,writable:!0}),n(e,c,{value:null,writable:!0}),n(e,l,{value:null,writable:!0}),n(e,h,{value:null,writable:!0}),n(e,d,{value:t._readableState.endEmitted,writable:!0}),n(e,p,{value:function(t,e){var i=o[f].read();i?(o[u]=null,o[c]=null,o[l]=null,t(g(i,!1))):(o[c]=t,o[l]=e)},writable:!0}),e));return o[u]=null,s(t,function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=o[l];return null!==e&&(o[u]=null,o[c]=null,o[l]=null,e(t)),void(o[h]=t)}var i=o[c];null!==i&&(o[u]=null,o[c]=null,o[l]=null,i(g(void 0,!0))),o[d]=!0}),t.on("readable",v.bind(null,o)),o}}).call(this,t("_process"))},{"./end-of-stream":56,_process:154}],54:[function(t,e){"use strict";function o(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,i)}return o}function i(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach(function(e){n(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function n(t,e,o){return(e=s(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,s(i.key),i)}}function s(t){var e=c(t,"string");return"symbol"==typeof e?e:String(e)}function c(t,e){if("object"!=typeof t||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var l=t("buffer").Buffer,h=t("util").inspect,d=h&&h.custom||"inspect";e.exports=function(){function t(){r(this,t),this.head=null,this.tail=null,this.length=0}var e,o;return e=t,(o=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,o=""+e.data;e=e.next;)o+=t+e.data;return o}},{key:"concat",value:function(t){if(0===this.length)return l.alloc(0);for(var e,o,i,n=l.allocUnsafe(t>>>0),r=this.head,a=0;r;)e=r.data,o=n,i=a,l.prototype.copy.call(e,o,i),a+=r.data.length,r=r.next;return n}},{key:"consume",value:function(t,e){var o;return t<this.head.data.length?(o=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):o=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),o}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,o=1,i=e.data;for(t-=i.length;e=e.next;){var n=e.data,r=t>n.length?n.length:t;if(r===n.length?i+=n:i+=n.slice(0,t),0==(t-=r)){r===n.length?(++o,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=n.slice(r));break}++o}return this.length-=o,i}},{key:"_getBuffer",value:function(t){var e=l.allocUnsafe(t),o=this.head,i=1;for(o.data.copy(e),t-=o.data.length;o=o.next;){var n=o.data,r=t>n.length?n.length:t;if(n.copy(e,e.length-t,0,r),0==(t-=r)){r===n.length?(++i,o.next?this.head=o.next:this.head=this.tail=null):(this.head=o,o.data=n.slice(r));break}++i}return this.length-=i,e}},{key:d,value:function(t,e){return h(this,i(i({},e),{},{depth:0,customInspect:!1}))}}])&&a(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},{buffer:64,util:19}],55:[function(t,e){(function(t){"use strict";function o(t,e){n(t,e),i(t)}function i(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function n(t,e){t.emit("error",e)}e.exports={destroy:function(e,r){var a=this,s=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return s||c?(r?r(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(n,this,e)):t.nextTick(n,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!r&&e?a._writableState?a._writableState.errorEmitted?t.nextTick(i,a):(a._writableState.errorEmitted=!0,t.nextTick(o,a,e)):t.nextTick(o,a,e):r?(t.nextTick(i,a),r(e)):t.nextTick(i,a)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var o=t._readableState,i=t._writableState;o&&o.autoDestroy||i&&i.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this,t("_process"))},{_process:154}],56:[function(t,e){"use strict";var o=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(t){var e=!1;return function(){if(!e){e=!0;for(var o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];t.apply(this,i)}}}function n(){}function r(t){return t.setHeader&&"function"==typeof t.abort}e.exports=function t(e,a,s){if("function"==typeof a)return t(e,null,a);a||(a={}),s=i(s||n);var c=a.readable||!1!==a.readable&&e.readable,l=a.writable||!1!==a.writable&&e.writable,h=function(){e.writable||u()},d=e._writableState&&e._writableState.finished,u=function(){l=!1,d=!0,c||s.call(e)},p=e._readableState&&e._readableState.endEmitted,f=function(){c=!1,p=!0,l||s.call(e)},g=function(t){s.call(e,t)},m=function(){var t;return c&&!p?(e._readableState&&e._readableState.ended||(t=new o),s.call(e,t)):l&&!d?(e._writableState&&e._writableState.ended||(t=new o),s.call(e,t)):void 0},v=function(){e.req.on("finish",u)};return r(e)?(e.on("complete",u),e.on("abort",m),e.req?v():e.on("request",v)):l&&!e._writableState&&(e.on("end",h),e.on("close",h)),e.on("end",f),e.on("finish",u),!1!==a.error&&e.on("error",g),e.on("close",m),function(){e.removeListener("complete",u),e.removeListener("abort",m),e.removeListener("request",v),e.req&&e.req.removeListener("finish",u),e.removeListener("end",h),e.removeListener("close",h),e.removeListener("finish",u),e.removeListener("end",f),e.removeListener("error",g),e.removeListener("close",m)}}},{"../../../errors":47}],57:[function(t,e){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],58:[function(t,e){"use strict";var o;function i(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var n=t("../../../errors").codes,r=n.ERR_MISSING_ARGS,a=n.ERR_STREAM_DESTROYED;function s(t){if(t)throw t}function c(t){return t.setHeader&&"function"==typeof t.abort}function l(e,n,r,s){s=i(s);var l=!1;e.on("close",function(){l=!0}),void 0===o&&(o=t("./end-of-stream")),o(e,{readable:n,writable:r},function(t){if(t)return s(t);l=!0,s()});var h=!1;return function(t){if(!l&&!h)return h=!0,c(e)?e.abort():"function"==typeof e.destroy?e.destroy():void s(t||new a("pipe"))}}function h(t){t()}function d(t,e){return t.pipe(e)}function u(t){return t.length?"function"!=typeof t[t.length-1]?s:t.pop():s}e.exports=function(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];var i,n=u(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new r("streams");var a=e.map(function(t,o){var r=o<e.length-1;return l(t,r,o>0,function(t){i||(i=t),t&&a.forEach(h),r||(a.forEach(h),n(i))})});return e.reduce(d)}},{"../../../errors":47,"./end-of-stream":56}],59:[function(t,e){"use strict";var o=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;function i(t,e,o){return null!=t.highWaterMark?t.highWaterMark:e?t[o]:null}e.exports={getHighWaterMark:function(t,e,n,r){var a=i(e,r,n);if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||a<0)throw new o(r?n:"highWaterMark",a);return Math.floor(a)}return t.objectMode?16:16384}}},{"../../../errors":47}],60:[function(t,e){e.exports=t("events").EventEmitter},{events:103}],61:[function(t,e,o){(o=e.exports=t("./lib/_stream_readable.js")).Stream=o,o.Readable=o,o.Writable=t("./lib/_stream_writable.js"),o.Duplex=t("./lib/_stream_duplex.js"),o.Transform=t("./lib/_stream_transform.js"),o.PassThrough=t("./lib/_stream_passthrough.js"),o.finished=t("./lib/internal/streams/end-of-stream.js"),o.pipeline=t("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":48,"./lib/_stream_passthrough.js":49,"./lib/_stream_readable.js":50,"./lib/_stream_transform.js":51,"./lib/_stream_writable.js":52,"./lib/internal/streams/end-of-stream.js":56,"./lib/internal/streams/pipeline.js":58}],62:[function(t,e,o){"use strict";var i=t("safe-buffer").Buffer,n=i.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function a(t){var e=r(t);if("string"!=typeof e&&(i.isEncoding===n||!n(t)))throw new Error("Unknown encoding: "+t);return e||t}function s(t){var e;switch(this.encoding=a(t),this.encoding){case"utf16le":this.text=u,this.end=p,e=4;break;case"utf8":this.fillLast=d,e=4;break;case"base64":this.text=f,this.end=g,e=3;break;default:return this.write=m,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(e)}function c(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function l(t,e,o){var i=e.length-1;if(i<o)return 0;var n=c(e[i]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--i<o||-2===n?0:(n=c(e[i]))>=0?(n>0&&(t.lastNeed=n-2),n):--i<o||-2===n?0:(n=c(e[i]))>=0?(n>0&&(2===n?n=0:t.lastNeed=n-3),n):0}function h(t,e){if(128!=(192&e[0]))return t.lastNeed=0,"\ufffd";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"\ufffd";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"\ufffd"}}function d(t){var e=this.lastTotal-this.lastNeed,o=h(this,t);return void 0!==o?o:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var o=t.toString("utf16le",e);if(o){var i=o.charCodeAt(o.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],o.slice(0,-1)}return o}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function p(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var o=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,o)}return e}function f(t,e){var o=(t.length-e)%3;return 0===o?t.toString("base64",e):(this.lastNeed=3-o,this.lastTotal=3,1===o?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-o))}function g(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function m(t){return t.toString(this.encoding)}function v(t){return t&&t.length?this.write(t):""}o.StringDecoder=s,s.prototype.write=function(t){if(0===t.length)return"";var e,o;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";o=this.lastNeed,this.lastNeed=0}else o=0;return o<t.length?e?e+this.text(t,o):this.text(t,o):e||""},s.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\ufffd":e},s.prototype.text=function(t,e){var o=l(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=o;var i=t.length-(o-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)},s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},{"safe-buffer":181}],63:[function(t,e){(function(t){e.exports=function(e,o){for(var i=Math.min(e.length,o.length),n=new t(i),r=0;r<i;++r)n[r]=e[r]^o[r];return n}}).call(this,t("buffer").Buffer)},{buffer:64}],64:[function(t,e,o){(function(e){"use strict";var i=t("base64-js"),n=t("ieee754"),r=t("isarray");function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,o){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,o);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return u(this,t)}return l(this,t,e,o)}function l(t,e,o,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?g(t,e,o,i):"string"==typeof e?p(t,e,o):m(t,e)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function d(t,e,o,i){return h(e),e<=0?s(t,e):void 0!==o?"string"==typeof i?s(t,e).fill(o,i):s(t,e).fill(o):s(t,e)}function u(t,e){if(h(e),t=s(t,e<0?0:0|v(e)),!c.TYPED_ARRAY_SUPPORT)for(var o=0;o<e;++o)t[o]=0;return t}function p(t,e,o){if("string"==typeof o&&""!==o||(o="utf8"),!c.isEncoding(o))throw new TypeError('"encoding" must be a valid string encoding');var i=0|y(e,o),n=(t=s(t,i)).write(e,o);return n!==i&&(t=t.slice(0,n)),t}function f(t,e){var o=e.length<0?0:0|v(e.length);t=s(t,o);for(var i=0;i<o;i+=1)t[i]=255&e[i];return t}function g(t,e,o,i){if(e.byteLength,o<0||e.byteLength<o)throw new RangeError("'offset' is out of bounds");if(e.byteLength<o+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===o&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,o):new Uint8Array(e,o,i),c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=f(t,e),t}function m(t,e){if(c.isBuffer(e)){var o=0|v(e.length);return 0===(t=s(t,o)).length?t:(e.copy(t,0,0,o),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?s(t,0):f(t,e);if("Buffer"===e.type&&r(e.data))return f(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function v(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function y(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var o=t.length;if(0===o)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":case void 0:return K(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*o;case"hex":return o>>>1;case"base64":return Y(t).length;default:if(i)return K(t).length;e=(""+e).toLowerCase(),i=!0}}function _(t,e,o){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===o||o>this.length)&&(o=this.length),o<=0)return"";if((o>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return E(this,e,o);case"utf8":case"utf-8":return I(this,e,o);case"ascii":return D(this,e,o);case"latin1":case"binary":return N(this,e,o);case"base64":return M(this,e,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,o);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function C(t,e,o){var i=t[e];t[e]=t[o],t[o]=i}function b(t,e,o,i,n){if(0===t.length)return-1;if("string"==typeof o?(i=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,isNaN(o)&&(o=n?0:t.length-1),o<0&&(o=t.length+o),o>=t.length){if(n)return-1;o=t.length-1}else if(o<0){if(!n)return-1;o=0}if("string"==typeof e&&(e=c.from(e,i)),c.isBuffer(e))return 0===e.length?-1:S(t,e,o,i,n);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,o):Uint8Array.prototype.lastIndexOf.call(t,e,o):S(t,[e],o,i,n);throw new TypeError("val must be string, number or Buffer")}function S(t,e,o,i,n){var r,a=1,s=t.length,c=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,o/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(n){var h=-1;for(r=o;r<s;r++)if(l(t,r)===l(e,-1===h?0:r-h)){if(-1===h&&(h=r),r-h+1===c)return h*a}else-1!==h&&(r-=r-h),h=-1}else for(o+c>s&&(o=s-c),r=o;r>=0;r--){for(var d=!0,u=0;u<c;u++)if(l(t,r+u)!==l(e,u)){d=!1;break}if(d)return r}return-1}function w(t,e,o,i){o=Number(o)||0;var n=t.length-o;i?(i=Number(i))>n&&(i=n):i=n;var r=e.length;if(r%2!=0)throw new TypeError("Invalid hex string");i>r/2&&(i=r/2);for(var a=0;a<i;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[o+a]=s}return a}function A(t,e,o,i){return Q(K(e,t.length-o),t,o,i)}function k(t,e,o,i){return Q(X(e),t,o,i)}function P(t,e,o,i){return k(t,e,o,i)}function T(t,e,o,i){return Q(Y(e),t,o,i)}function B(t,e,o,i){return Q(J(e,t.length-o),t,o,i)}function M(t,e,o){return 0===e&&o===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,o))}function I(t,e,o){o=Math.min(t.length,o);for(var i=[],n=e;n<o;){var r,a,s,c,l=t[n],h=null,d=l>239?4:l>223?3:l>191?2:1;if(n+d<=o)switch(d){case 1:l<128&&(h=l);break;case 2:128==(192&(r=t[n+1]))&&(c=(31&l)<<6|63&r)>127&&(h=c);break;case 3:r=t[n+1],a=t[n+2],128==(192&r)&&128==(192&a)&&(c=(15&l)<<12|(63&r)<<6|63&a)>2047&&(c<55296||c>57343)&&(h=c);break;case 4:r=t[n+1],a=t[n+2],s=t[n+3],128==(192&r)&&128==(192&a)&&128==(192&s)&&(c=(15&l)<<18|(63&r)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(h=c)}null===h?(h=65533,d=1):h>65535&&(h-=65536,i.push(h>>>10&1023|55296),h=56320|1023&h),i.push(h),n+=d}return L(i)}o.Buffer=c,o.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},o.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),o.kMaxLength=a(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,o){return l(null,t,e,o)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,o){return d(null,t,e,o)},c.allocUnsafe=function(t){return u(null,t)},c.allocUnsafeSlow=function(t){return u(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var o=t.length,i=e.length,n=0,r=Math.min(o,i);n<r;++n)if(t[n]!==e[n]){o=t[n],i=e[n];break}return o<i?-1:i<o?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!r(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var o;if(void 0===e)for(e=0,o=0;o<t.length;++o)e+=t[o].length;var i=c.allocUnsafe(e),n=0;for(o=0;o<t.length;++o){var a=t[o];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,n),n+=a.length}return i},c.byteLength=y,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)C(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)C(this,e,e+3),C(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)C(this,e,e+7),C(this,e+1,e+6),C(this,e+2,e+5),C(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?I(this,0,t):_.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",e=o.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,o,i,n){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===o&&(o=t?t.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),e<0||o>t.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&e>=o)return 0;if(i>=n)return-1;if(e>=o)return 1;if(this===t)return 0;for(var r=(n>>>=0)-(i>>>=0),a=(o>>>=0)-(e>>>=0),s=Math.min(r,a),l=this.slice(i,n),h=t.slice(e,o),d=0;d<s;++d)if(l[d]!==h[d]){r=l[d],a=h[d];break}return r<a?-1:a<r?1:0},c.prototype.includes=function(t,e,o){return-1!==this.indexOf(t,e,o)},c.prototype.indexOf=function(t,e,o){return b(this,t,e,o,!0)},c.prototype.lastIndexOf=function(t,e,o){return b(this,t,e,o,!1)},c.prototype.write=function(t,e,o,i){if(void 0===e)i="utf8",o=this.length,e=0;else if(void 0===o&&"string"==typeof e)i=e,o=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(o)?(o|=0,void 0===i&&(i="utf8")):(i=o,o=void 0)}var n=this.length-e;if((void 0===o||o>n)&&(o=n),t.length>0&&(o<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var r=!1;;)switch(i){case"hex":return w(this,t,e,o);case"utf8":case"utf-8":return A(this,t,e,o);case"ascii":return k(this,t,e,o);case"latin1":case"binary":return P(this,t,e,o);case"base64":return T(this,t,e,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,e,o);default:if(r)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),r=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function L(t){var e=t.length;if(e<=R)return String.fromCharCode.apply(String,t);for(var o="",i=0;i<e;)o+=String.fromCharCode.apply(String,t.slice(i,i+=R));return o}function D(t,e,o){var i="";o=Math.min(t.length,o);for(var n=e;n<o;++n)i+=String.fromCharCode(127&t[n]);return i}function N(t,e,o){var i="";o=Math.min(t.length,o);for(var n=e;n<o;++n)i+=String.fromCharCode(t[n]);return i}function E(t,e,o){var i,n=t.length;(!e||e<0)&&(e=0),(!o||o<0||o>n)&&(o=n);for(var r="",a=e;a<o;++a)r+=(i=t[a])<16?"0"+i.toString(16):i.toString(16);return r}function x(t,e,o){for(var i=t.slice(e,o),n="",r=0;r<i.length;r+=2)n+=String.fromCharCode(i[r]+256*i[r+1]);return n}function U(t,e,o){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>o)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,o,i,n,r){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<r)throw new RangeError('"value" argument is out of bounds');if(o+i>t.length)throw new RangeError("Index out of range")}function F(t,e,o,i){e<0&&(e=65535+e+1);for(var n=0,r=Math.min(t.length-o,2);n<r;++n)t[o+n]=(e&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function W(t,e,o,i){e<0&&(e=4294967295+e+1);for(var n=0,r=Math.min(t.length-o,4);n<r;++n)t[o+n]=e>>>8*(i?n:3-n)&255}function V(t,e,o,i){if(o+i>t.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function H(t,e,o,i,r){return r||V(t,0,o,4),n.write(t,e,o,i,23,4),o+4}function G(t,e,o,i,r){return r||V(t,0,o,8),n.write(t,e,o,i,52,8),o+8}c.prototype.slice=function(t,e){var o,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(o=this.subarray(t,e)).__proto__=c.prototype;else{var n=e-t;o=new c(n,void 0);for(var r=0;r<n;++r)o[r]=this[r+t]}return o},c.prototype.readUIntLE=function(t,e,o){t|=0,e|=0,o||U(t,e,this.length);for(var i=this[t],n=1,r=0;++r<e&&(n*=256);)i+=this[t+r]*n;return i},c.prototype.readUIntBE=function(t,e,o){t|=0,e|=0,o||U(t,e,this.length);for(var i=this[t+--e],n=1;e>0&&(n*=256);)i+=this[t+--e]*n;return i},c.prototype.readUInt8=function(t,e){return e||U(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||U(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||U(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||U(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||U(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,o){t|=0,e|=0,o||U(t,e,this.length);for(var i=this[t],n=1,r=0;++r<e&&(n*=256);)i+=this[t+r]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*e)),i},c.prototype.readIntBE=function(t,e,o){t|=0,e|=0,o||U(t,e,this.length);for(var i=e,n=1,r=this[t+--i];i>0&&(n*=256);)r+=this[t+--i]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*e)),r},c.prototype.readInt8=function(t,e){return e||U(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||U(t,2,this.length);var o=this[t]|this[t+1]<<8;return 32768&o?4294901760|o:o},c.prototype.readInt16BE=function(t,e){e||U(t,2,this.length);var o=this[t+1]|this[t]<<8;return 32768&o?4294901760|o:o},c.prototype.readInt32LE=function(t,e){return e||U(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||U(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||U(t,4,this.length),n.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||U(t,4,this.length),n.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||U(t,8,this.length),n.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||U(t,8,this.length),n.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,o,i){t=+t,e|=0,o|=0,i||O(this,t,e,o,Math.pow(2,8*o)-1,0);var n=1,r=0;for(this[e]=255&t;++r<o&&(n*=256);)this[e+r]=t/n&255;return e+o},c.prototype.writeUIntBE=function(t,e,o,i){t=+t,e|=0,o|=0,i||O(this,t,e,o,Math.pow(2,8*o)-1,0);var n=o-1,r=1;for(this[e+n]=255&t;--n>=0&&(r*=256);)this[e+n]=t/r&255;return e+o},c.prototype.writeUInt8=function(t,e,o){return t=+t,e|=0,o||O(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,o){return t=+t,e|=0,o||O(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):F(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,o){return t=+t,e|=0,o||O(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):F(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,o){return t=+t,e|=0,o||O(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):W(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,o){return t=+t,e|=0,o||O(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):W(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,o,i){if(t=+t,e|=0,!i){var n=Math.pow(2,8*o-1);O(this,t,e,o,n-1,-n)}var r=0,a=1,s=0;for(this[e]=255&t;++r<o&&(a*=256);)t<0&&0===s&&0!==this[e+r-1]&&(s=1),this[e+r]=(t/a>>0)-s&255;return e+o},c.prototype.writeIntBE=function(t,e,o,i){if(t=+t,e|=0,!i){var n=Math.pow(2,8*o-1);O(this,t,e,o,n-1,-n)}var r=o-1,a=1,s=0;for(this[e+r]=255&t;--r>=0&&(a*=256);)t<0&&0===s&&0!==this[e+r+1]&&(s=1),this[e+r]=(t/a>>0)-s&255;return e+o},c.prototype.writeInt8=function(t,e,o){return t=+t,e|=0,o||O(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,o){return t=+t,e|=0,o||O(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):F(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,o){return t=+t,e|=0,o||O(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):F(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,o){return t=+t,e|=0,o||O(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):W(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,o){return t=+t,e|=0,o||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):W(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,o){return H(this,t,e,!0,o)},c.prototype.writeFloatBE=function(t,e,o){return H(this,t,e,!1,o)},c.prototype.writeDoubleLE=function(t,e,o){return G(this,t,e,!0,o)},c.prototype.writeDoubleBE=function(t,e,o){return G(this,t,e,!1,o)},c.prototype.copy=function(t,e,o,i){if(o||(o=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<o&&(i=o),i===o)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(o<0||o>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-o&&(i=t.length-e+o);var n,r=i-o;if(this===t&&o<e&&e<i)for(n=r-1;n>=0;--n)t[n+e]=this[n+o];else if(r<1e3||!c.TYPED_ARRAY_SUPPORT)for(n=0;n<r;++n)t[n+e]=this[n+o];else Uint8Array.prototype.set.call(t,this.subarray(o,o+r),e);return r},c.prototype.fill=function(t,e,o,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,o=this.length):"string"==typeof o&&(i=o,o=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<o)throw new RangeError("Out of range index");if(o<=e)return this;var r;if(e>>>=0,o=void 0===o?this.length:o>>>0,t||(t=0),"number"==typeof t)for(r=e;r<o;++r)this[r]=t;else{var a=c.isBuffer(t)?t:K(new c(t,i).toString()),s=a.length;for(r=0;r<o-e;++r)this[r+e]=a[r%s]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function z(t){if((t=q(t).replace(j,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function q(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function K(t,e){var o;e=e||1/0;for(var i=t.length,n=null,r=[],a=0;a<i;++a){if((o=t.charCodeAt(a))>55295&&o<57344){if(!n){if(o>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(a+1===i){(e-=3)>-1&&r.push(239,191,189);continue}n=o;continue}if(o<56320){(e-=3)>-1&&r.push(239,191,189),n=o;continue}o=65536+(n-55296<<10|o-56320)}else n&&(e-=3)>-1&&r.push(239,191,189);if(n=null,o<128){if((e-=1)<0)break;r.push(o)}else if(o<2048){if((e-=2)<0)break;r.push(o>>6|192,63&o|128)}else if(o<65536){if((e-=3)<0)break;r.push(o>>12|224,o>>6&63|128,63&o|128)}else{if(!(o<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;r.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}}return r}function X(t){for(var e=[],o=0;o<t.length;++o)e.push(255&t.charCodeAt(o));return e}function J(t,e){for(var o,i,n,r=[],a=0;a<t.length&&!((e-=2)<0);++a)i=(o=t.charCodeAt(a))>>8,n=o%256,r.push(n),r.push(i);return r}function Y(t){return i.toByteArray(z(t))}function Q(t,e,o,i){for(var n=0;n<i&&!(n+o>=e.length||n>=t.length);++n)e[n+o]=t[n];return n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":16,ieee754:135,isarray:65}],65:[function(t,e){var o={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==o.call(t)}},{}],66:[function(t,e){var o=t("safe-buffer").Buffer,i=t("stream").Transform,n=t("string_decoder").StringDecoder;function r(t){i.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}t("inherits")(r,i),r.prototype.update=function(t,e,i){"string"==typeof t&&(t=o.from(t,e));var n=this._update(t);return this.hashMode?this:(i&&(n=this._toString(n,i)),n)},r.prototype.setAutoPadding=function(){},r.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},r.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},r.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},r.prototype._transform=function(t,e,o){var i;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(n){i=n}finally{o(i)}},r.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(o){e=o}t(e)},r.prototype._finalOrDigest=function(t){var e=this.__final()||o.alloc(0);return t&&(e=this._toString(e,t,!0)),e},r.prototype._toString=function(t,e,o){if(this._decoder||(this._decoder=new n(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var i=this._decoder.write(t);return o&&(i+=this._decoder.end()),i},e.exports=r},{inherits:136,"safe-buffer":181,stream:191,string_decoder:192}],67:[function(t,e,o){function i(t){return Object.prototype.toString.call(t)}o.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===i(t)},o.isBoolean=function(t){return"boolean"==typeof t},o.isNull=function(t){return null===t},o.isNullOrUndefined=function(t){return null==t},o.isNumber=function(t){return"number"==typeof t},o.isString=function(t){return"string"==typeof t},o.isSymbol=function(t){return"symbol"==typeof t},o.isUndefined=function(t){return void 0===t},o.isRegExp=function(t){return"[object RegExp]"===i(t)},o.isObject=function(t){return"object"==typeof t&&null!==t},o.isDate=function(t){return"[object Date]"===i(t)},o.isError=function(t){return"[object Error]"===i(t)||t instanceof Error},o.isFunction=function(t){return"function"==typeof t},o.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},o.isBuffer=t("buffer").Buffer.isBuffer},{buffer:64}],68:[function(t,e){(function(o){var i=t("elliptic"),n=t("bn.js");e.exports=function(t){return new a(t)};var r={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function a(t){this.curveType=r[t],this.curveType||(this.curveType={name:t}),this.curve=new i.ec(this.curveType.name),this.keys=void 0}function s(t,e,i){Array.isArray(t)||(t=t.toArray());var n=new o(t);if(i&&n.length<i){var r=new o(i-n.length);r.fill(0),n=o.concat([r,n])}return e?n.toString(e):n}r.p224=r.secp224r1,r.p256=r.secp256r1=r.prime256v1,r.p192=r.secp192r1=r.prime192v1,r.p384=r.secp384r1,r.p521=r.secp521r1,a.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},a.prototype.computeSecret=function(t,e,i){return e=e||"utf8",o.isBuffer(t)||(t=new o(t,e)),s(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),i,this.curveType.byteLength)},a.prototype.getPublicKey=function(t,e){var o=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(o[o.length-1]%2?o[0]=7:o[0]=6),s(o,t)},a.prototype.getPrivateKey=function(t){return s(this.keys.getPrivate(),t)},a.prototype.setPublicKey=function(t,e){return e=e||"utf8",o.isBuffer(t)||(t=new o(t,e)),this.keys._importPublic(t),this},a.prototype.setPrivateKey=function(t,e){e=e||"utf8",o.isBuffer(t)||(t=new o(t,e));var i=new n(t);return i=i.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(i),this}}).call(this,t("buffer").Buffer)},{"bn.js":69,buffer:64,elliptic:86}],69:[function(t,e,o){arguments[4][15][0].apply(o,arguments)},{buffer:19,dup:15}],70:[function(t,e){"use strict";var o=t("inherits"),i=t("md5.js"),n=t("ripemd160"),r=t("sha.js"),a=t("cipher-base");function s(t){a.call(this,"digest"),this._hash=t}o(s,a),s.prototype._update=function(t){this._hash.update(t)},s.prototype._final=function(){return this._hash.digest()},e.exports=function(t){return"md5"===(t=t.toLowerCase())?new i:"rmd160"===t||"ripemd160"===t?new n:new s(r(t))}},{"cipher-base":66,inherits:136,"md5.js":137,ripemd160:180,"sha.js":184}],71:[function(t,e){var o=t("md5.js");e.exports=function(t){return(new o).update(t).digest()}},{"md5.js":137}],72:[function(t,e){"use strict";var o=t("inherits"),i=t("./legacy"),n=t("cipher-base"),r=t("safe-buffer").Buffer,a=t("create-hash/md5"),s=t("ripemd160"),c=t("sha.js"),l=r.alloc(128);function h(t,e){n.call(this,"digest"),"string"==typeof e&&(e=r.from(e));var o="sha512"===t||"sha384"===t?128:64;this._alg=t,this._key=e,e.length>o?e=("rmd160"===t?new s:c(t)).update(e).digest():e.length<o&&(e=r.concat([e,l],o));for(var i=this._ipad=r.allocUnsafe(o),a=this._opad=r.allocUnsafe(o),h=0;h<o;h++)i[h]=54^e[h],a[h]=92^e[h];this._hash="rmd160"===t?new s:c(t),this._hash.update(i)}o(h,n),h.prototype._update=function(t){this._hash.update(t)},h.prototype._final=function(){var t=this._hash.digest();return("rmd160"===this._alg?new s:c(this._alg)).update(this._opad).update(t).digest()},e.exports=function(t,e){return"rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new h("rmd160",e):"md5"===t?new i(a,e):new h(t,e)}},{"./legacy":73,"cipher-base":66,"create-hash/md5":71,inherits:136,ripemd160:180,"safe-buffer":181,"sha.js":184}],73:[function(t,e){"use strict";var o=t("inherits"),i=t("safe-buffer").Buffer,n=t("cipher-base"),r=i.alloc(128),a=64;function s(t,e){n.call(this,"digest"),"string"==typeof e&&(e=i.from(e)),this._alg=t,this._key=e,e.length>a?e=t(e):e.length<a&&(e=i.concat([e,r],a));for(var o=this._ipad=i.allocUnsafe(a),s=this._opad=i.allocUnsafe(a),c=0;c<a;c++)o[c]=54^e[c],s[c]=92^e[c];this._hash=[o]}o(s,n),s.prototype._update=function(t){this._hash.push(t)},s.prototype._final=function(){var t=this._alg(i.concat(this._hash));return this._alg(i.concat([this._opad,t]))},e.exports=s},{"cipher-base":66,inherits:136,"safe-buffer":181}],74:[function(t,e,o){"use strict";o.randomBytes=o.rng=o.pseudoRandomBytes=o.prng=t("randombytes"),o.createHash=o.Hash=t("create-hash"),o.createHmac=o.Hmac=t("create-hmac");var i=t("browserify-sign/algos"),n=Object.keys(i),r=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(n);o.getHashes=function(){return r};var a=t("pbkdf2");o.pbkdf2=a.pbkdf2,o.pbkdf2Sync=a.pbkdf2Sync;var s=t("browserify-cipher");o.Cipher=s.Cipher,o.createCipher=s.createCipher,o.Cipheriv=s.Cipheriv,o.createCipheriv=s.createCipheriv,o.Decipher=s.Decipher,o.createDecipher=s.createDecipher,o.Decipheriv=s.Decipheriv,o.createDecipheriv=s.createDecipheriv,o.getCiphers=s.getCiphers,o.listCiphers=s.listCiphers;var c=t("diffie-hellman");o.DiffieHellmanGroup=c.DiffieHellmanGroup,o.createDiffieHellmanGroup=c.createDiffieHellmanGroup,o.getDiffieHellman=c.getDiffieHellman,o.createDiffieHellman=c.createDiffieHellman,o.DiffieHellman=c.DiffieHellman;var l=t("browserify-sign");o.createSign=l.createSign,o.Sign=l.Sign,o.createVerify=l.createVerify,o.Verify=l.Verify,o.createECDH=t("create-ecdh");var h=t("public-encrypt");o.publicEncrypt=h.publicEncrypt,o.privateEncrypt=h.privateEncrypt,o.publicDecrypt=h.publicDecrypt,o.privateDecrypt=h.privateDecrypt;var d=t("randomfill");o.randomFill=d.randomFill,o.randomFillSync=d.randomFillSync,o.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},o.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":37,"browserify-sign":44,"browserify-sign/algos":41,"create-ecdh":68,"create-hash":70,"create-hmac":72,"diffie-hellman":81,pbkdf2:147,"public-encrypt":155,randombytes:162,randomfill:163}],75:[function(t,e,o){"use strict";o.utils=t("./des/utils"),o.Cipher=t("./des/cipher"),o.DES=t("./des/des"),o.CBC=t("./des/cbc"),o.EDE=t("./des/ede")},{"./des/cbc":76,"./des/cipher":77,"./des/des":78,"./des/ede":79,"./des/utils":80}],76:[function(t,e,o){"use strict";var i=t("minimalistic-assert"),n=t("inherits"),r={};function a(t){i.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}o.instantiate=function(t){function e(e){t.call(this,e),this._cbcInit()}n(e,t);for(var o=Object.keys(r),i=0;i<o.length;i++){var a=o[i];e.prototype[a]=r[a]}return e.create=function(t){return new e(t)},e},r._cbcInit=function(){var t=new a(this.options.iv);this._cbcState=t},r._update=function(t,e,o,i){var n=this._cbcState,r=this.constructor.super_.prototype,a=n.iv;if("encrypt"===this.type){for(var s=0;s<this.blockSize;s++)a[s]^=t[e+s];for(r._update.call(this,a,0,o,i),s=0;s<this.blockSize;s++)a[s]=o[i+s]}else{for(r._update.call(this,t,e,o,i),s=0;s<this.blockSize;s++)o[i+s]^=a[s];for(s=0;s<this.blockSize;s++)a[s]=t[e+s]}}},{inherits:136,"minimalistic-assert":140}],77:[function(t,e){"use strict";var o=t("minimalistic-assert");function i(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}e.exports=i,i.prototype._init=function(){},i.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},i.prototype._buffer=function(t,e){for(var o=Math.min(this.buffer.length-this.bufferOff,t.length-e),i=0;i<o;i++)this.buffer[this.bufferOff+i]=t[e+i];return this.bufferOff+=o,o},i.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(t){var e=0,o=0,i=(this.bufferOff+t.length)/this.blockSize|0,n=new Array(i*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(o+=this._flushBuffer(n,o)));for(var r=t.length-(t.length-e)%this.blockSize;e<r;e+=this.blockSize)this._update(t,e,n,o),o+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return n},i.prototype._updateDecrypt=function(t){for(var e=0,o=0,i=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,n=new Array(i*this.blockSize);i>0;i--)e+=this._buffer(t,e),o+=this._flushBuffer(n,o);return e+=this._buffer(t,e),n},i.prototype.final=function(t){var e,o;return t&&(e=this.update(t)),o="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(o):o},i.prototype._pad=function(t,e){if(0===e)return!1;for(;e<t.length;)t[e++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},i.prototype._unpad=function(t){return t},i.prototype._finalDecrypt=function(){o.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}},{"minimalistic-assert":140}],78:[function(t,e){"use strict";var o=t("minimalistic-assert"),i=t("inherits"),n=t("./utils"),r=t("./cipher");function a(){this.tmp=new Array(2),this.keys=null}function s(t){r.call(this,t);var e=new a;this._desState=e,this.deriveKeys(e,t.key)}i(s,r),e.exports=s,s.create=function(t){return new s(t)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];s.prototype.deriveKeys=function(t,e){t.keys=new Array(32),o.equal(e.length,this.blockSize,"Invalid key length");var i=n.readUInt32BE(e,0),r=n.readUInt32BE(e,4);n.pc1(i,r,t.tmp,0),i=t.tmp[0],r=t.tmp[1];for(var a=0;a<t.keys.length;a+=2){var s=c[a>>>1];i=n.r28shl(i,s),r=n.r28shl(r,s),n.pc2(i,r,t.keys,a)}},s.prototype._update=function(t,e,o,i){var r=this._desState,a=n.readUInt32BE(t,e),s=n.readUInt32BE(t,e+4);n.ip(a,s,r.tmp,0),a=r.tmp[0],s=r.tmp[1],"encrypt"===this.type?this._encrypt(r,a,s,r.tmp,0):this._decrypt(r,a,s,r.tmp,0),a=r.tmp[0],s=r.tmp[1],n.writeUInt32BE(o,a,i),n.writeUInt32BE(o,s,i+4)},s.prototype._pad=function(t,e){for(var o=t.length-e,i=e;i<t.length;i++)t[i]=o;return!0},s.prototype._unpad=function(t){for(var e=t[t.length-1],i=t.length-e;i<t.length;i++)o.equal(t[i],e);return t.slice(0,t.length-e)},s.prototype._encrypt=function(t,e,o,i,r){for(var a=e,s=o,c=0;c<t.keys.length;c+=2){var l=t.keys[c],h=t.keys[c+1];n.expand(s,t.tmp,0),l^=t.tmp[0],h^=t.tmp[1];var d=n.substitute(l,h),u=s;s=(a^n.permute(d))>>>0,a=u}n.rip(s,a,i,r)},s.prototype._decrypt=function(t,e,o,i,r){for(var a=o,s=e,c=t.keys.length-2;c>=0;c-=2){var l=t.keys[c],h=t.keys[c+1];n.expand(a,t.tmp,0),l^=t.tmp[0],h^=t.tmp[1];var d=n.substitute(l,h),u=a;a=(s^n.permute(d))>>>0,s=u}n.rip(a,s,i,r)}},{"./cipher":77,"./utils":80,inherits:136,"minimalistic-assert":140}],79:[function(t,e){"use strict";var o=t("minimalistic-assert"),i=t("inherits"),n=t("./cipher"),r=t("./des");function a(t,e){o.equal(e.length,24,"Invalid key length");var i=e.slice(0,8),n=e.slice(8,16),a=e.slice(16,24);this.ciphers="encrypt"===t?[r.create({type:"encrypt",key:i}),r.create({type:"decrypt",key:n}),r.create({type:"encrypt",key:a})]:[r.create({type:"decrypt",key:a}),r.create({type:"encrypt",key:n}),r.create({type:"decrypt",key:i})]}function s(t){n.call(this,t);var e=new a(this.type,this.options.key);this._edeState=e}i(s,n),e.exports=s,s.create=function(t){return new s(t)},s.prototype._update=function(t,e,o,i){var n=this._edeState;n.ciphers[0]._update(t,e,o,i),n.ciphers[1]._update(o,i,o,i),n.ciphers[2]._update(o,i,o,i)},s.prototype._pad=r.prototype._pad,s.prototype._unpad=r.prototype._unpad},{"./cipher":77,"./des":78,inherits:136,"minimalistic-assert":140}],80:[function(t,e,o){"use strict";o.readUInt32BE=function(t,e){return(t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])>>>0},o.writeUInt32BE=function(t,e,o){t[0+o]=e>>>24,t[1+o]=e>>>16&255,t[2+o]=e>>>8&255,t[3+o]=255&e},o.ip=function(t,e,o,i){for(var n=0,r=0,a=6;a>=0;a-=2){for(var s=0;s<=24;s+=8)n<<=1,n|=e>>>s+a&1;for(s=0;s<=24;s+=8)n<<=1,n|=t>>>s+a&1}for(a=6;a>=0;a-=2){for(s=1;s<=25;s+=8)r<<=1,r|=e>>>s+a&1;for(s=1;s<=25;s+=8)r<<=1,r|=t>>>s+a&1}o[i+0]=n>>>0,o[i+1]=r>>>0},o.rip=function(t,e,o,i){for(var n=0,r=0,a=0;a<4;a++)for(var s=24;s>=0;s-=8)n<<=1,n|=e>>>s+a&1,n<<=1,n|=t>>>s+a&1;for(a=4;a<8;a++)for(s=24;s>=0;s-=8)r<<=1,r|=e>>>s+a&1,r<<=1,r|=t>>>s+a&1;o[i+0]=n>>>0,o[i+1]=r>>>0},o.pc1=function(t,e,o,i){for(var n=0,r=0,a=7;a>=5;a--){for(var s=0;s<=24;s+=8)n<<=1,n|=e>>s+a&1;for(s=0;s<=24;s+=8)n<<=1,n|=t>>s+a&1}for(s=0;s<=24;s+=8)n<<=1,n|=e>>s+a&1;for(a=1;a<=3;a++){for(s=0;s<=24;s+=8)r<<=1,r|=e>>s+a&1;for(s=0;s<=24;s+=8)r<<=1,r|=t>>s+a&1}for(s=0;s<=24;s+=8)r<<=1,r|=t>>s+a&1;o[i+0]=n>>>0,o[i+1]=r>>>0},o.r28shl=function(t,e){return t<<e&268435455|t>>>28-e};var i=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];o.pc2=function(t,e,o,n){for(var r=0,a=0,s=i.length>>>1,c=0;c<s;c++)r<<=1,r|=t>>>i[c]&1;for(c=s;c<i.length;c++)a<<=1,a|=e>>>i[c]&1;o[n+0]=r>>>0,o[n+1]=a>>>0},o.expand=function(t,e,o){var i=0,n=0;i=(1&t)<<5|t>>>27;for(var r=23;r>=15;r-=4)i<<=6,i|=t>>>r&63;for(r=11;r>=3;r-=4)n|=t>>>r&63,n<<=6;n|=(31&t)<<1|t>>>31,e[o+0]=i>>>0,e[o+1]=n>>>0};var n=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];o.substitute=function(t,e){for(var o=0,i=0;i<4;i++)o<<=4,o|=n[64*i+(t>>>18-6*i&63)];for(i=0;i<4;i++)o<<=4,o|=n[256+64*i+(e>>>18-6*i&63)];return o>>>0};var r=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];o.permute=function(t){for(var e=0,o=0;o<r.length;o++)e<<=1,e|=t>>>r[o]&1;return e>>>0},o.padSplit=function(t,e,o){for(var i=t.toString(2);i.length<e;)i="0"+i;for(var n=[],r=0;r<e;r+=o)n.push(i.slice(r,r+o));return n.join(" ")}},{}],81:[function(t,e,o){(function(e){var i=t("./lib/generatePrime"),n=t("./lib/primes.json"),r=t("./lib/dh"),a={binary:!0,hex:!0,base64:!0};o.DiffieHellmanGroup=o.createDiffieHellmanGroup=o.getDiffieHellman=function(t){var o=new e(n[t].prime,"hex"),i=new e(n[t].gen,"hex");return new r(o,i)},o.createDiffieHellman=o.DiffieHellman=function t(o,n,s,c){return e.isBuffer(n)||void 0===a[n]?t(o,"binary",n,s):(n=n||"binary",c=c||"binary",s=s||new e([2]),e.isBuffer(s)||(s=new e(s,c)),"number"==typeof o?new r(i(o,s),s,!0):(e.isBuffer(o)||(o=new e(o,n)),new r(o,s,!0)))}}).call(this,t("buffer").Buffer)},{"./lib/dh":82,"./lib/generatePrime":83,"./lib/primes.json":84,buffer:64}],82:[function(t,e){(function(o){var i=t("bn.js"),n=new(t("miller-rabin")),r=new i(24),a=new i(11),s=new i(10),c=new i(3),l=new i(7),h=t("./generatePrime"),d=t("randombytes");function u(t,e){return e=e||"utf8",o.isBuffer(t)||(t=new o(t,e)),this._pub=new i(t),this}function p(t,e){return e=e||"utf8",o.isBuffer(t)||(t=new o(t,e)),this._priv=new i(t),this}e.exports=m;var f={};function g(t,e){var o=e.toString("hex"),i=[o,t.toString(16)].join("_");if(i in f)return f[i];var d,u=0;if(t.isEven()||!h.simpleSieve||!h.fermatTest(t)||!n.test(t))return u+=1,u+="02"===o||"05"===o?8:4,f[i]=u,u;switch(n.test(t.shrn(1))||(u+=2),o){case"02":t.mod(r).cmp(a)&&(u+=8);break;case"05":(d=t.mod(s)).cmp(c)&&d.cmp(l)&&(u+=8);break;default:u+=4}return f[i]=u,u}function m(t,e,o){this.setGenerator(e),this.__prime=new i(t),this._prime=i.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,o?(this.setPublicKey=u,this.setPrivateKey=p):this._primeCode=8}function v(t,e){var i=new o(t.toArray());return e?i.toString(e):i}Object.defineProperty(m.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=g(this.__prime,this.__gen)),this._primeCode}}),m.prototype.generateKeys=function(){return this._priv||(this._priv=new i(d(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},m.prototype.computeSecret=function(t){var e=(t=(t=new i(t)).toRed(this._prime)).redPow(this._priv).fromRed(),n=new o(e.toArray()),r=this.getPrime();if(n.length<r.length){var a=new o(r.length-n.length);a.fill(0),n=o.concat([a,n])}return n},m.prototype.getPublicKey=function(t){return v(this._pub,t)},m.prototype.getPrivateKey=function(t){return v(this._priv,t)},m.prototype.getPrime=function(t){return v(this.__prime,t)},m.prototype.getGenerator=function(t){return v(this._gen,t)},m.prototype.setGenerator=function(t,e){return e=e||"utf8",o.isBuffer(t)||(t=new o(t,e)),this.__gen=t,this._gen=new i(t),this}}).call(this,t("buffer").Buffer)},{"./generatePrime":83,"bn.js":85,buffer:64,"miller-rabin":138,randombytes:162}],83:[function(t,e){var o=t("randombytes");e.exports=v,v.simpleSieve=g,v.fermatTest=m;var i=t("bn.js"),n=new i(24),r=new(t("miller-rabin")),a=new i(1),s=new i(2),c=new i(5),l=(new i(16),new i(8),new i(10)),h=new i(3),d=(new i(7),new i(11)),u=new i(4),p=(new i(12),null);function f(){if(null!==p)return p;var t=[];t[0]=2;for(var e=1,o=3;o<1048576;o+=2){for(var i=Math.ceil(Math.sqrt(o)),n=0;n<e&&t[n]<=i&&o%t[n]!=0;n++);e!==n&&t[n]<=i||(t[e++]=o)}return p=t,t}function g(t){for(var e=f(),o=0;o<e.length;o++)if(0===t.modn(e[o]))return 0===t.cmpn(e[o]);return!0}function m(t){var e=i.mont(t);return 0===s.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function v(t,e){if(t<16)return new i(2===e||5===e?[140,123]:[140,39]);var p,f;for(e=new i(e);;){for(p=new i(o(Math.ceil(t/8)));p.bitLength()>t;)p.ishrn(1);if(p.isEven()&&p.iadd(a),p.testn(1)||p.iadd(s),e.cmp(s)){if(!e.cmp(c))for(;p.mod(l).cmp(h);)p.iadd(u)}else for(;p.mod(n).cmp(d);)p.iadd(u);if(g(f=p.shrn(1))&&g(p)&&m(f)&&m(p)&&r.test(f)&&r.test(p))return p}}},{"bn.js":85,"miller-rabin":138,randombytes:162}],84:[function(t,e){e.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],85:[function(t,e,o){arguments[4][15][0].apply(o,arguments)},{buffer:19,dup:15}],86:[function(t,e,o){"use strict";var i=o;i.version=t("../package.json").version,i.utils=t("./elliptic/utils"),i.rand=t("brorand"),i.curve=t("./elliptic/curve"),i.curves=t("./elliptic/curves"),i.ec=t("./elliptic/ec"),i.eddsa=t("./elliptic/eddsa")},{"../package.json":102,"./elliptic/curve":89,"./elliptic/curves":92,"./elliptic/ec":93,"./elliptic/eddsa":96,"./elliptic/utils":100,brorand:18}],87:[function(t,e){"use strict";var o=t("bn.js"),i=t("../utils"),n=i.getNAF,r=i.getJSF,a=i.assert;function s(t,e){this.type=t,this.p=new o(e.p,16),this.red=e.prime?o.red(e.prime):o.mont(this.p),this.zero=new o(0).toRed(this.red),this.one=new o(1).toRed(this.red),this.two=new o(2).toRed(this.red),this.n=e.n&&new o(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(t,e){this.curve=t,this.type=e,this.precomputed=null}e.exports=s,s.prototype.point=function(){throw new Error("Not implemented")},s.prototype.validate=function(){throw new Error("Not implemented")},s.prototype._fixedNafMul=function(t,e){a(t.precomputed);var o=t._getDoubles(),i=n(e,1,this._bitLength),r=(1<<o.step+1)-(o.step%2==0?2:1);r/=3;var s,c,l=[];for(s=0;s<i.length;s+=o.step){c=0;for(var h=s+o.step-1;h>=s;h--)c=(c<<1)+i[h];l.push(c)}for(var d=this.jpoint(null,null,null),u=this.jpoint(null,null,null),p=r;p>0;p--){for(s=0;s<l.length;s++)(c=l[s])===p?u=u.mixedAdd(o.points[s]):c===-p&&(u=u.mixedAdd(o.points[s].neg()));d=d.add(u)}return d.toP()},s.prototype._wnafMul=function(t,e){var o=4,i=t._getNAFPoints(o);o=i.wnd;for(var r=i.points,s=n(e,o,this._bitLength),c=this.jpoint(null,null,null),l=s.length-1;l>=0;l--){for(var h=0;l>=0&&0===s[l];l--)h++;if(l>=0&&h++,c=c.dblp(h),l<0)break;var d=s[l];a(0!==d),c="affine"===t.type?d>0?c.mixedAdd(r[d-1>>1]):c.mixedAdd(r[-d-1>>1].neg()):d>0?c.add(r[d-1>>1]):c.add(r[-d-1>>1].neg())}return"affine"===t.type?c.toP():c},s.prototype._wnafMulAdd=function(t,e,o,i,a){var s,c,l,h=this._wnafT1,d=this._wnafT2,u=this._wnafT3,p=0;for(s=0;s<i;s++){var f=(l=e[s])._getNAFPoints(t);h[s]=f.wnd,d[s]=f.points}for(s=i-1;s>=1;s-=2){var g=s-1,m=s;if(1===h[g]&&1===h[m]){var v=[e[g],null,null,e[m]];0===e[g].y.cmp(e[m].y)?(v[1]=e[g].add(e[m]),v[2]=e[g].toJ().mixedAdd(e[m].neg())):0===e[g].y.cmp(e[m].y.redNeg())?(v[1]=e[g].toJ().mixedAdd(e[m]),v[2]=e[g].add(e[m].neg())):(v[1]=e[g].toJ().mixedAdd(e[m]),v[2]=e[g].toJ().mixedAdd(e[m].neg()));var y=[-3,-1,-5,-7,0,7,5,1,3],_=r(o[g],o[m]);for(p=Math.max(_[0].length,p),u[g]=new Array(p),u[m]=new Array(p),c=0;c<p;c++){var C=0|_[0][c],b=0|_[1][c];u[g][c]=y[3*(C+1)+(b+1)],u[m][c]=0,d[g]=v}}else u[g]=n(o[g],h[g],this._bitLength),u[m]=n(o[m],h[m],this._bitLength),p=Math.max(u[g].length,p),p=Math.max(u[m].length,p)}var S=this.jpoint(null,null,null),w=this._wnafT4;for(s=p;s>=0;s--){for(var A=0;s>=0;){var k=!0;for(c=0;c<i;c++)w[c]=0|u[c][s],0!==w[c]&&(k=!1);if(!k)break;A++,s--}if(s>=0&&A++,S=S.dblp(A),s<0)break;for(c=0;c<i;c++){var P=w[c];0!==P&&(P>0?l=d[c][P-1>>1]:P<0&&(l=d[c][-P-1>>1].neg()),S="affine"===l.type?S.mixedAdd(l):S.add(l))}}for(s=0;s<i;s++)d[s]=null;return a?S:S.toP()},s.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},s.prototype.decodePoint=function(t,e){t=i.toArray(t,e);var o=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*o)return 6===t[0]?a(t[t.length-1]%2==0):7===t[0]&&a(t[t.length-1]%2==1),this.point(t.slice(1,1+o),t.slice(1+o,1+2*o));if((2===t[0]||3===t[0])&&t.length-1===o)return this.pointFromX(t.slice(1,1+o),3===t[0]);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(t){return this.encode(t,!0)},c.prototype._encode=function(t){var e=this.curve.p.byteLength(),o=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(o):[4].concat(o,this.getY().toArray("be",e))},c.prototype.encode=function(t,e){return i.encode(this._encode(e),t)},c.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},c.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},c.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var o=[this],i=this,n=0;n<e;n+=t){for(var r=0;r<t;r++)i=i.dbl();o.push(i)}return{step:t,points:o}},c.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],o=(1<<t)-1,i=1===o?null:this.dbl(),n=1;n<o;n++)e[n]=e[n-1].add(i);return{wnd:t,points:e}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(t){for(var e=this,o=0;o<t;o++)e=e.dbl();return e}},{"../utils":100,"bn.js":101}],88:[function(t,e){"use strict";var o=t("../utils"),i=t("bn.js"),n=t("inherits"),r=t("./base"),a=o.assert;function s(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,r.call(this,"edwards",t),this.a=new i(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}function c(t,e,o,n,a){r.BasePoint.call(this,t,"projective"),null===e&&null===o&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(e,16),this.y=new i(o,16),this.z=n?new i(n,16):this.curve.one,this.t=a&&new i(a,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}n(s,r),e.exports=s,s.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},s.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},s.prototype.jpoint=function(t,e,o,i){return this.point(t,e,o,i)},s.prototype.pointFromX=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var o=t.redSqr(),n=this.c2.redSub(this.a.redMul(o)),r=this.one.redSub(this.c2.redMul(this.d).redMul(o)),a=n.redMul(r.redInvm()),s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");var c=s.fromRed().isOdd();return(e&&!c||!e&&c)&&(s=s.redNeg()),this.point(t,s)},s.prototype.pointFromY=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var o=t.redSqr(),n=o.redSub(this.c2),r=o.redMul(this.d).redMul(this.c2).redSub(this.a),a=n.redMul(r.redInvm());if(0===a.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");return s.fromRed().isOdd()!==e&&(s=s.redNeg()),this.point(s,t)},s.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),o=t.y.redSqr(),i=e.redMul(this.a).redAdd(o),n=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(o)));return 0===i.cmp(n)},n(c,r.BasePoint),s.prototype.pointFromJSON=function(t){return c.fromJSON(this,t)},s.prototype.point=function(t,e,o,i){return new c(this,t,e,o,i)},c.fromJSON=function(t,e){return new c(t,e[0],e[1],e[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},c.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),o=this.z.redSqr();o=o.redIAdd(o);var i=this.curve._mulA(t),n=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),r=i.redAdd(e),a=r.redSub(o),s=i.redSub(e),c=n.redMul(a),l=r.redMul(s),h=n.redMul(s),d=a.redMul(r);return this.curve.point(c,l,d,h)},c.prototype._projDbl=function(){var t,e,o,i,n,r,a=this.x.redAdd(this.y).redSqr(),s=this.x.redSqr(),c=this.y.redSqr();if(this.curve.twisted){var l=(i=this.curve._mulA(s)).redAdd(c);this.zOne?(t=a.redSub(s).redSub(c).redMul(l.redSub(this.curve.two)),e=l.redMul(i.redSub(c)),o=l.redSqr().redSub(l).redSub(l)):(n=this.z.redSqr(),r=l.redSub(n).redISub(n),t=a.redSub(s).redISub(c).redMul(r),e=l.redMul(i.redSub(c)),o=l.redMul(r))}else i=s.redAdd(c),n=this.curve._mulC(this.z).redSqr(),r=i.redSub(n).redSub(n),t=this.curve._mulC(a.redISub(i)).redMul(r),e=this.curve._mulC(i).redMul(s.redISub(c)),o=i.redMul(r);return this.curve.point(t,e,o)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),o=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),i=this.t.redMul(this.curve.dd).redMul(t.t),n=this.z.redMul(t.z.redAdd(t.z)),r=o.redSub(e),a=n.redSub(i),s=n.redAdd(i),c=o.redAdd(e),l=r.redMul(a),h=s.redMul(c),d=r.redMul(c),u=a.redMul(s);return this.curve.point(l,h,u,d)},c.prototype._projAdd=function(t){var e,o,i=this.z.redMul(t.z),n=i.redSqr(),r=this.x.redMul(t.x),a=this.y.redMul(t.y),s=this.curve.d.redMul(r).redMul(a),c=n.redSub(s),l=n.redAdd(s),h=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(r).redISub(a),d=i.redMul(c).redMul(h);return this.curve.twisted?(e=i.redMul(l).redMul(a.redSub(this.curve._mulA(r))),o=c.redMul(l)):(e=i.redMul(l).redMul(a.redSub(r)),o=this.curve._mulC(c).redMul(l)),this.curve.point(d,e,o)},c.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},c.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},c.prototype.mulAdd=function(t,e,o){return this.curve._wnafMulAdd(1,[this,e],[t,o],2,!1)},c.prototype.jmulAdd=function(t,e,o){return this.curve._wnafMulAdd(1,[this,e],[t,o],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},c.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var o=t.clone(),i=this.curve.redN.redMul(this.z);;){if(o.iadd(this.curve.n),o.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(i),0===this.x.cmp(e))return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},{"../utils":100,"./base":87,"bn.js":101,inherits:136}],89:[function(t,e,o){"use strict";var i=o;i.base=t("./base"),i.short=t("./short"),i.mont=t("./mont"),i.edwards=t("./edwards")},{"./base":87,"./edwards":88,"./mont":90,"./short":91}],90:[function(t,e){"use strict";var o=t("bn.js"),i=t("inherits"),n=t("./base"),r=t("../utils");function a(t){n.call(this,"mont",t),this.a=new o(t.a,16).toRed(this.red),this.b=new o(t.b,16).toRed(this.red),this.i4=new o(4).toRed(this.red).redInvm(),this.two=new o(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function s(t,e,i){n.BasePoint.call(this,t,"projective"),null===e&&null===i?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new o(e,16),this.z=new o(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(a,n),e.exports=a,a.prototype.validate=function(t){var e=t.normalize().x,o=e.redSqr(),i=o.redMul(e).redAdd(o.redMul(this.a)).redAdd(e);return 0===i.redSqrt().redSqr().cmp(i)},i(s,n.BasePoint),a.prototype.decodePoint=function(t,e){return this.point(r.toArray(t,e),1)},a.prototype.point=function(t,e){return new s(this,t,e)},a.prototype.pointFromJSON=function(t){return s.fromJSON(this,t)},s.prototype.precompute=function(){},s.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},s.fromJSON=function(t,e){return new s(t,e[0],e[1]||t.one)},s.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},s.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},s.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),o=t.redSub(e),i=t.redMul(e),n=o.redMul(e.redAdd(this.curve.a24.redMul(o)));return this.curve.point(i,n)},s.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.diffAdd=function(t,e){var o=this.x.redAdd(this.z),i=this.x.redSub(this.z),n=t.x.redAdd(t.z),r=t.x.redSub(t.z).redMul(o),a=n.redMul(i),s=e.z.redMul(r.redAdd(a).redSqr()),c=e.x.redMul(r.redISub(a).redSqr());return this.curve.point(s,c)},s.prototype.mul=function(t){for(var e=t.clone(),o=this,i=this.curve.point(null,null),n=[];0!==e.cmpn(0);e.iushrn(1))n.push(e.andln(1));for(var r=n.length-1;r>=0;r--)0===n[r]?(o=o.diffAdd(i,this),i=i.dbl()):(i=o.diffAdd(i,this),o=o.dbl());return i},s.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},s.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},s.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":100,"./base":87,"bn.js":101,inherits:136}],91:[function(t,e){"use strict";var o=t("../utils"),i=t("bn.js"),n=t("inherits"),r=t("./base"),a=o.assert;function s(t){r.call(this,"short",t),this.a=new i(t.a,16).toRed(this.red),this.b=new i(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function c(t,e,o,n){r.BasePoint.call(this,t,"affine"),null===e&&null===o?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(e,16),this.y=new i(o,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function l(t,e,o,n){r.BasePoint.call(this,t,"jacobian"),null===e&&null===o&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(e,16),this.y=new i(o,16),this.z=new i(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}n(s,r),e.exports=s,s.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,o;if(t.beta)e=new i(t.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);e=(e=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(t.lambda)o=new i(t.lambda,16);else{var r=this._getEndoRoots(this.n);0===this.g.mul(r[0]).x.cmp(this.g.x.redMul(e))?o=r[0]:(o=r[1],a(0===this.g.mul(o).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:o,basis:t.basis?t.basis.map(function(t){return{a:new i(t.a,16),b:new i(t.b,16)}}):this._getEndoBasis(o)}}},s.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:i.mont(t),o=new i(2).toRed(e).redInvm(),n=o.redNeg(),r=new i(3).toRed(e).redNeg().redSqrt().redMul(o);return[n.redAdd(r).fromRed(),n.redSub(r).fromRed()]},s.prototype._getEndoBasis=function(t){for(var e,o,n,r,a,s,c,l,h,d=this.n.ushrn(Math.floor(this.n.bitLength()/2)),u=t,p=this.n.clone(),f=new i(1),g=new i(0),m=new i(0),v=new i(1),y=0;0!==u.cmpn(0);){var _=p.div(u);l=p.sub(_.mul(u)),h=m.sub(_.mul(f));var C=v.sub(_.mul(g));if(!n&&l.cmp(d)<0)e=c.neg(),o=f,n=l.neg(),r=h;else if(n&&2==++y)break;c=l,p=u,u=l,m=f,f=h,v=g,g=C}a=l.neg(),s=h;var b=n.sqr().add(r.sqr());return a.sqr().add(s.sqr()).cmp(b)>=0&&(a=e,s=o),n.negative&&(n=n.neg(),r=r.neg()),a.negative&&(a=a.neg(),s=s.neg()),[{a:n,b:r},{a:a,b:s}]},s.prototype._endoSplit=function(t){var e=this.endo.basis,o=e[0],i=e[1],n=i.b.mul(t).divRound(this.n),r=o.b.neg().mul(t).divRound(this.n),a=n.mul(o.a),s=r.mul(i.a),c=n.mul(o.b),l=r.mul(i.b);return{k1:t.sub(a).sub(s),k2:c.add(l).neg()}},s.prototype.pointFromX=function(t,e){(t=new i(t,16)).red||(t=t.toRed(this.red));var o=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=o.redSqrt();if(0!==n.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var r=n.fromRed().isOdd();return(e&&!r||!e&&r)&&(n=n.redNeg()),this.point(t,n)},s.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,o=t.y,i=this.a.redMul(e),n=e.redSqr().redMul(e).redIAdd(i).redIAdd(this.b);return 0===o.redSqr().redISub(n).cmpn(0)},s.prototype._endoWnafMulAdd=function(t,e,o){for(var i=this._endoWnafT1,n=this._endoWnafT2,r=0;r<t.length;r++){var a=this._endoSplit(e[r]),s=t[r],c=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),c=c.neg(!0)),i[2*r]=s,i[2*r+1]=c,n[2*r]=a.k1,n[2*r+1]=a.k2}for(var l=this._wnafMulAdd(1,i,n,2*r,o),h=0;h<2*r;h++)i[h]=null,n[h]=null;return l},n(c,r.BasePoint),s.prototype.point=function(t,e,o){return new c(this,t,e,o)},s.prototype.pointFromJSON=function(t,e){return c.fromJSON(this,t,e)},c.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var o=this.curve,i=function(t){return o.point(t.x.redMul(o.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return e}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(t,e,o){"string"==typeof e&&(e=JSON.parse(e));var i=t.point(e[0],e[1],o);if(!e[2])return i;function n(e){return t.point(e[0],e[1],o)}var r=e[2];return i.precomputed={beta:null,doubles:r.doubles&&{step:r.doubles.step,points:[i].concat(r.doubles.points.map(n))},naf:r.naf&&{wnd:r.naf.wnd,points:[i].concat(r.naf.points.map(n))}},i},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var o=e.redSqr().redISub(this.x).redISub(t.x),i=e.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,i)},c.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,o=this.x.redSqr(),i=t.redInvm(),n=o.redAdd(o).redIAdd(o).redIAdd(e).redMul(i),r=n.redSqr().redISub(this.x.redAdd(this.x)),a=n.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,a)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(t){return t=new i(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},c.prototype.mulAdd=function(t,e,o){var i=[this,e],n=[t,o];return this.curve.endo?this.curve._endoWnafMulAdd(i,n):this.curve._wnafMulAdd(1,i,n,2)},c.prototype.jmulAdd=function(t,e,o){var i=[this,e],n=[t,o];return this.curve.endo?this.curve._endoWnafMulAdd(i,n,!0):this.curve._wnafMulAdd(1,i,n,2,!0)},c.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},c.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var o=this.precomputed,i=function(t){return t.neg()};e.precomputed={naf:o.naf&&{wnd:o.naf.wnd,points:o.naf.points.map(i)},doubles:o.doubles&&{step:o.doubles.step,points:o.doubles.points.map(i)}}}return e},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},n(l,r.BasePoint),s.prototype.jpoint=function(t,e,o){return new l(this,t,e,o)},l.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),o=this.x.redMul(e),i=this.y.redMul(e).redMul(t);return this.curve.point(o,i)},l.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},l.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),o=this.z.redSqr(),i=this.x.redMul(e),n=t.x.redMul(o),r=this.y.redMul(e.redMul(t.z)),a=t.y.redMul(o.redMul(this.z)),s=i.redSub(n),c=r.redSub(a);if(0===s.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=s.redSqr(),h=l.redMul(s),d=i.redMul(l),u=c.redSqr().redIAdd(h).redISub(d).redISub(d),p=c.redMul(d.redISub(u)).redISub(r.redMul(h)),f=this.z.redMul(t.z).redMul(s);return this.curve.jpoint(u,p,f)},l.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),o=this.x,i=t.x.redMul(e),n=this.y,r=t.y.redMul(e).redMul(this.z),a=o.redSub(i),s=n.redSub(r);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),l=c.redMul(a),h=o.redMul(c),d=s.redSqr().redIAdd(l).redISub(h).redISub(h),u=s.redMul(h.redISub(d)).redISub(n.redMul(l)),p=this.z.redMul(a);return this.curve.jpoint(d,u,p)},l.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var o=this;for(e=0;e<t;e++)o=o.dbl();return o}var i=this.curve.a,n=this.curve.tinv,r=this.x,a=this.y,s=this.z,c=s.redSqr().redSqr(),l=a.redAdd(a);for(e=0;e<t;e++){var h=r.redSqr(),d=l.redSqr(),u=d.redSqr(),p=h.redAdd(h).redIAdd(h).redIAdd(i.redMul(c)),f=r.redMul(d),g=p.redSqr().redISub(f.redAdd(f)),m=f.redISub(g),v=p.redMul(m);v=v.redIAdd(v).redISub(u);var y=l.redMul(s);e+1<t&&(c=c.redMul(u)),r=g,s=y,l=v}return this.curve.jpoint(r,l.redMul(n),s)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},l.prototype._zeroDbl=function(){var t,e,o;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),r=n.redSqr(),a=this.x.redAdd(n).redSqr().redISub(i).redISub(r);a=a.redIAdd(a);var s=i.redAdd(i).redIAdd(i),c=s.redSqr().redISub(a).redISub(a),l=r.redIAdd(r);l=(l=l.redIAdd(l)).redIAdd(l),t=c,e=s.redMul(a.redISub(c)).redISub(l),o=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),d=this.y.redSqr(),u=d.redSqr(),p=this.x.redAdd(d).redSqr().redISub(h).redISub(u);p=p.redIAdd(p);var f=h.redAdd(h).redIAdd(h),g=f.redSqr(),m=u.redIAdd(u);m=(m=m.redIAdd(m)).redIAdd(m),t=g.redISub(p).redISub(p),e=f.redMul(p.redISub(t)).redISub(m),o=(o=this.y.redMul(this.z)).redIAdd(o)}return this.curve.jpoint(t,e,o)},l.prototype._threeDbl=function(){var t,e,o;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),r=n.redSqr(),a=this.x.redAdd(n).redSqr().redISub(i).redISub(r);a=a.redIAdd(a);var s=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),c=s.redSqr().redISub(a).redISub(a);t=c;var l=r.redIAdd(r);l=(l=l.redIAdd(l)).redIAdd(l),e=s.redMul(a.redISub(c)).redISub(l),o=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),d=this.y.redSqr(),u=this.x.redMul(d),p=this.x.redSub(h).redMul(this.x.redAdd(h));p=p.redAdd(p).redIAdd(p);var f=u.redIAdd(u),g=(f=f.redIAdd(f)).redAdd(f);t=p.redSqr().redISub(g),o=this.y.redAdd(this.z).redSqr().redISub(d).redISub(h);var m=d.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),e=p.redMul(f.redISub(t)).redISub(m)}return this.curve.jpoint(t,e,o)},l.prototype._dbl=function(){var t=this.curve.a,e=this.x,o=this.y,i=this.z,n=i.redSqr().redSqr(),r=e.redSqr(),a=o.redSqr(),s=r.redAdd(r).redIAdd(r).redIAdd(t.redMul(n)),c=e.redAdd(e),l=(c=c.redIAdd(c)).redMul(a),h=s.redSqr().redISub(l.redAdd(l)),d=l.redISub(h),u=a.redSqr();u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var p=s.redMul(d).redISub(u),f=o.redAdd(o).redMul(i);return this.curve.jpoint(h,p,f)},l.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),o=this.z.redSqr(),i=e.redSqr(),n=t.redAdd(t).redIAdd(t),r=n.redSqr(),a=this.x.redAdd(e).redSqr().redISub(t).redISub(i),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(r)).redSqr(),c=i.redIAdd(i);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var l=n.redIAdd(a).redSqr().redISub(r).redISub(s).redISub(c),h=e.redMul(l);h=(h=h.redIAdd(h)).redIAdd(h);var d=this.x.redMul(s).redISub(h);d=(d=d.redIAdd(d)).redIAdd(d);var u=this.y.redMul(l.redMul(c.redISub(l)).redISub(a.redMul(s)));u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var p=this.z.redAdd(a).redSqr().redISub(o).redISub(s);return this.curve.jpoint(d,u,p)},l.prototype.mul=function(t,e){return t=new i(t,e),this.curve._wnafMul(this,t)},l.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),o=t.z.redSqr();if(0!==this.x.redMul(o).redISub(t.x.redMul(e)).cmpn(0))return!1;var i=e.redMul(this.z),n=o.redMul(t.z);return 0===this.y.redMul(n).redISub(t.y.redMul(i)).cmpn(0)},l.prototype.eqXToP=function(t){var e=this.z.redSqr(),o=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(o))return!0;for(var i=t.clone(),n=this.curve.redN.redMul(e);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(o.redIAdd(n),0===this.x.cmp(o))return!0}},l.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},{"../utils":100,"./base":87,"bn.js":101,inherits:136}],92:[function(t,e,o){"use strict";var i,n=o,r=t("hash.js"),a=t("./curve"),s=t("./utils").assert;function c(t){"short"===t.type?this.curve=new a.short(t):"edwards"===t.type?this.curve=new a.edwards(t):this.curve=new a.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function l(t,e){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:function(){var o=new c(e);return Object.defineProperty(n,t,{configurable:!0,enumerable:!0,value:o}),o}})}n.PresetCurve=c,l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{i=t("./precomputed/secp256k1")}catch(h){i=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",i]})},{"./curve":89,"./precomputed/secp256k1":99,"./utils":100,"hash.js":122}],93:[function(t,e){"use strict";var o=t("bn.js"),i=t("hmac-drbg"),n=t("../utils"),r=t("../curves"),a=t("brorand"),s=n.assert,c=t("./key"),l=t("./signature");function h(t){if(!(this instanceof h))return new h(t);"string"==typeof t&&(s(Object.prototype.hasOwnProperty.call(r,t),"Unknown curve "+t),t=r[t]),t instanceof r.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}e.exports=h,h.prototype.keyPair=function(t){return new c(this,t)},h.prototype.keyFromPrivate=function(t,e){return c.fromPrivate(this,t,e)},h.prototype.keyFromPublic=function(t,e){return c.fromPublic(this,t,e)},h.prototype.genKeyPair=function(t){t||(t={});for(var e=new i({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||a(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),r=this.n.sub(new o(2));;){var s=new o(e.generate(n));if(!(s.cmp(r)>0))return s.iaddn(1),this.keyFromPrivate(s)}},h.prototype._truncateToN=function(t,e){var o=8*t.byteLength()-this.n.bitLength();return o>0&&(t=t.ushrn(o)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},h.prototype.sign=function(t,e,n,r){"object"==typeof n&&(r=n,n=null),r||(r={}),e=this.keyFromPrivate(e,n),t=this._truncateToN(new o(t,16));for(var a=this.n.byteLength(),s=e.getPrivate().toArray("be",a),c=t.toArray("be",a),h=new i({hash:this.hash,entropy:s,nonce:c,pers:r.pers,persEnc:r.persEnc||"utf8"}),d=this.n.sub(new o(1)),u=0;;u++){var p=r.k?r.k(u):new o(h.generate(this.n.byteLength()));if(!((p=this._truncateToN(p,!0)).cmpn(1)<=0||p.cmp(d)>=0)){var f=this.g.mul(p);if(!f.isInfinity()){var g=f.getX(),m=g.umod(this.n);if(0!==m.cmpn(0)){var v=p.invm(this.n).mul(m.mul(e.getPrivate()).iadd(t));if(0!==(v=v.umod(this.n)).cmpn(0)){var y=(f.getY().isOdd()?1:0)|(0!==g.cmp(m)?2:0);return r.canonical&&v.cmp(this.nh)>0&&(v=this.n.sub(v),y^=1),new l({r:m,s:v,recoveryParam:y})}}}}}},h.prototype.verify=function(t,e,i,n){t=this._truncateToN(new o(t,16)),i=this.keyFromPublic(i,n);var r=(e=new l(e,"hex")).r,a=e.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var s,c=a.invm(this.n),h=c.mul(t).umod(this.n),d=c.mul(r).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(h,i.getPublic(),d)).isInfinity()&&s.eqXToP(r):!(s=this.g.mulAdd(h,i.getPublic(),d)).isInfinity()&&0===s.getX().umod(this.n).cmp(r)},h.prototype.recoverPubKey=function(t,e,i,n){s((3&i)===i,"The recovery param is more than two bits"),e=new l(e,n);var r=this.n,a=new o(t),c=e.r,h=e.s,d=1&i,u=i>>1;if(c.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");c=u?this.curve.pointFromX(c.add(this.curve.n),d):this.curve.pointFromX(c,d);var p=e.r.invm(r),f=r.sub(a).mul(p).umod(r),g=h.mul(p).umod(r);return this.g.mulAdd(f,c,g)},h.prototype.getKeyRecoveryParam=function(t,e,o,i){if(null!==(e=new l(e,i)).recoveryParam)return e.recoveryParam;for(var n=0;n<4;n++){var r;try{r=this.recoverPubKey(t,e,n)}catch(t){continue}if(r.eq(o))return n}throw new Error("Unable to find valid recovery factor")}},{"../curves":92,"../utils":100,"./key":94,"./signature":95,"bn.js":101,brorand:18,"hmac-drbg":134}],94:[function(t,e){"use strict";var o=t("bn.js"),i=t("../utils").assert;function n(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}e.exports=n,n.fromPublic=function(t,e,o){return e instanceof n?e:new n(t,{pub:e,pubEnc:o})},n.fromPrivate=function(t,e,o){return e instanceof n?e:new n(t,{priv:e,privEnc:o})},n.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},n.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},n.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},n.prototype._importPrivate=function(t,e){this.priv=new o(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},n.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?i(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},n.prototype.derive=function(t){return t.validate()||i(t.validate(),"public point not validated"),t.mul(this.priv).getX()},n.prototype.sign=function(t,e,o){return this.ec.sign(t,this,e,o)},n.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},n.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":100,"bn.js":101}],95:[function(t,e){"use strict";var o=t("bn.js"),i=t("../utils"),n=i.assert;function r(t,e){if(t instanceof r)return t;this._importDER(t,e)||(n(t.r&&t.s,"Signature without r or s"),this.r=new o(t.r,16),this.s=new o(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function a(){this.place=0}function s(t,e){var o=t[e.place++];if(!(128&o))return o;var i=15&o;if(0===i||i>4)return!1;for(var n=0,r=0,a=e.place;r<i;r++,a++)n<<=8,n|=t[a],n>>>=0;return!(n<=127)&&(e.place=a,n)}function c(t){for(var e=0,o=t.length-1;!t[e]&&!(128&t[e+1])&&e<o;)e++;return 0===e?t:t.slice(e)}function l(t,e){if(e<128)t.push(e);else{var o=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|o);--o;)t.push(e>>>(o<<3)&255);t.push(e)}}e.exports=r,r.prototype._importDER=function(t,e){t=i.toArray(t,e);var n=new a;if(48!==t[n.place++])return!1;var r=s(t,n);if(!1===r)return!1;if(r+n.place!==t.length)return!1;if(2!==t[n.place++])return!1;var c=s(t,n);if(!1===c)return!1;var l=t.slice(n.place,c+n.place);if(n.place+=c,2!==t[n.place++])return!1;var h=s(t,n);if(!1===h)return!1;if(t.length!==h+n.place)return!1;var d=t.slice(n.place,h+n.place);if(0===l[0]){if(!(128&l[1]))return!1;l=l.slice(1)}if(0===d[0]){if(!(128&d[1]))return!1;d=d.slice(1)}return this.r=new o(l),this.s=new o(d),this.recoveryParam=null,!0},r.prototype.toDER=function(t){var e=this.r.toArray(),o=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&o[0]&&(o=[0].concat(o)),e=c(e),o=c(o);!(o[0]||128&o[1]);)o=o.slice(1);var n=[2];l(n,e.length),(n=n.concat(e)).push(2),l(n,o.length);var r=n.concat(o),a=[48];return l(a,r.length),a=a.concat(r),i.encode(a,t)}},{"../utils":100,"bn.js":101}],96:[function(t,e){"use strict";var o=t("hash.js"),i=t("../curves"),n=t("../utils"),r=n.assert,a=n.parseBytes,s=t("./key"),c=t("./signature");function l(t){if(r("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof l))return new l(t);t=i[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=o.sha512}e.exports=l,l.prototype.sign=function(t,e){t=a(t);var o=this.keyFromSecret(e),i=this.hashInt(o.messagePrefix(),t),n=this.g.mul(i),r=this.encodePoint(n),s=this.hashInt(r,o.pubBytes(),t).mul(o.priv()),c=i.add(s).umod(this.curve.n);return this.makeSignature({R:n,S:c,Rencoded:r})},l.prototype.verify=function(t,e,o){t=a(t),e=this.makeSignature(e);var i=this.keyFromPublic(o),n=this.hashInt(e.Rencoded(),i.pubBytes(),t),r=this.g.mul(e.S());return e.R().add(i.pub().mul(n)).eq(r)},l.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return n.intFromLE(t.digest()).umod(this.curve.n)},l.prototype.keyFromPublic=function(t){return s.fromPublic(this,t)},l.prototype.keyFromSecret=function(t){return s.fromSecret(this,t)},l.prototype.makeSignature=function(t){return t instanceof c?t:new c(this,t)},l.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},l.prototype.decodePoint=function(t){var e=(t=n.parseBytes(t)).length-1,o=t.slice(0,e).concat(-129&t[e]),i=0!=(128&t[e]),r=n.intFromLE(o);return this.curve.pointFromY(r,i)},l.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},l.prototype.decodeInt=function(t){return n.intFromLE(t)},l.prototype.isPoint=function(t){return t instanceof this.pointClass}},{"../curves":92,"../utils":100,"./key":97,"./signature":98,"hash.js":122}],97:[function(t,e){"use strict";var o=t("../utils"),i=o.assert,n=o.parseBytes,r=o.cachedProperty;function a(t,e){this.eddsa=t,this._secret=n(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=n(e.pub)}a.fromPublic=function(t,e){return e instanceof a?e:new a(t,{pub:e})},a.fromSecret=function(t,e){return e instanceof a?e:new a(t,{secret:e})},a.prototype.secret=function(){return this._secret},r(a,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),r(a,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),r(a,"privBytes",function(){var t=this.eddsa,e=this.hash(),o=t.encodingLength-1,i=e.slice(0,t.encodingLength);return i[0]&=248,i[o]&=127,i[o]|=64,i}),r(a,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),r(a,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),r(a,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),a.prototype.sign=function(t){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},a.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},a.prototype.getSecret=function(t){return i(this._secret,"KeyPair is public only"),o.encode(this.secret(),t)},a.prototype.getPublic=function(t){return o.encode(this.pubBytes(),t)},e.exports=a},{"../utils":100}],98:[function(t,e){"use strict";var o=t("bn.js"),i=t("../utils"),n=i.assert,r=i.cachedProperty,a=i.parseBytes;function s(t,e){this.eddsa=t,"object"!=typeof e&&(e=a(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),n(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof o&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}r(s,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),r(s,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),r(s,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),r(s,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),s.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},s.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},e.exports=s},{"../utils":100,"bn.js":101}],99:[function(t,e){e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],100:[function(t,e,o){"use strict";var i=o,n=t("bn.js"),r=t("minimalistic-assert"),a=t("minimalistic-crypto-utils");i.assert=r,i.toArray=a.toArray,i.zero2=a.zero2,i.toHex=a.toHex,i.encode=a.encode,i.getNAF=function(t,e,o){var i=new Array(Math.max(t.bitLength(),o)+1);i.fill(0);for(var n=1<<e+1,r=t.clone(),a=0;a<i.length;a++){var s,c=r.andln(n-1);r.isOdd()?(s=c>(n>>1)-1?(n>>1)-c:c,r.isubn(s)):s=0,i[a]=s,r.iushrn(1)}return i},i.getJSF=function(t,e){var o=[[],[]];t=t.clone(),e=e.clone();for(var i,n=0,r=0;t.cmpn(-n)>0||e.cmpn(-r)>0;){var a,s,c=t.andln(3)+n&3,l=e.andln(3)+r&3;3===c&&(c=-1),3===l&&(l=-1),a=0==(1&c)?0:3!=(i=t.andln(7)+n&7)&&5!==i||2!==l?c:-c,o[0].push(a),s=0==(1&l)?0:3!=(i=e.andln(7)+r&7)&&5!==i||2!==c?l:-l,o[1].push(s),2*n===a+1&&(n=1-n),2*r===s+1&&(r=1-r),t.iushrn(1),e.iushrn(1)}return o},i.cachedProperty=function(t,e,o){var i="_"+e;t.prototype[e]=function(){return void 0!==this[i]?this[i]:this[i]=o.call(this)}},i.parseBytes=function(t){return"string"==typeof t?i.toArray(t,"hex"):t},i.intFromLE=function(t){return new n(t,"hex","le")}},{"bn.js":101,"minimalistic-assert":140,"minimalistic-crypto-utils":141}],101:[function(t,e,o){arguments[4][15][0].apply(o,arguments)},{buffer:19,dup:15}],102:[function(t,e){e.exports={_from:"elliptic@^6.5.3",_id:"elliptic@6.5.4",_inBundle:!1,_integrity:"sha512-iLhC6ULemrljPZb+QutR5TQGB+pdW6KGD5RSegS+8sorOZT+rdQFbsQFJgvN3eRqNALqJer4oQ16YvJHlU8hzQ==",_location:"/elliptic",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"elliptic@^6.5.3",name:"elliptic",escapedName:"elliptic",rawSpec:"^6.5.3",saveSpec:null,fetchSpec:"^6.5.3"},_requiredBy:["/browserify-sign","/create-ecdh"],_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-6.5.4.tgz",_shasum:"da37cebd31e79a1367e941b592ed1fbebd58abbb",_spec:"elliptic@^6.5.3",_where:"C:\\Users\\nantas\\fireball-x\\fireball_2.4.12\\dist\\resources\\app\\node_modules\\browserify-sign",author:{name:"Fedor Indutny",email:"fedor@indutny.com"},bugs:{url:"https://github.com/indutny/elliptic/issues"},bundleDependencies:!1,dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},deprecated:!1,description:"EC cryptography",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},files:["lib"],homepage:"https://github.com/indutny/elliptic",keywords:["EC","Elliptic","curve","Cryptography"],license:"MIT",main:"lib/elliptic.js",name:"elliptic",repository:{type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/index.js",version:"grunt dist && git add dist/"},version:"6.5.4"}},{}],103:[function(t,e){function o(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function n(t){return"object"==typeof t&&null!==t}function r(t){return void 0===t}e.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._maxListeners=void 0,o.defaultMaxListeners=10,o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},o.prototype.emit=function(t){var e,o,a,s,c,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var h=new Error('Uncaught, unspecified "error" event. ('+e+")");throw h.context=e,h}if(r(o=this._events[t]))return!1;if(i(o))switch(arguments.length){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),o.apply(this,s)}else if(n(o))for(s=Array.prototype.slice.call(arguments,1),a=(l=o.slice()).length,c=0;c<a;c++)l[c].apply(this,s);return!0},o.prototype.addListener=function(t,e){var a;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?n(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,n(this._events[t])&&!this._events[t].warned&&(a=r(this._maxListeners)?o.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[t].length>a&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},o.prototype.on=o.prototype.addListener,o.prototype.once=function(t,e){if(!i(e))throw TypeError("listener must be a function");var o=!1;function n(){this.removeListener(t,n),o||(o=!0,e.apply(this,arguments))}return n.listener=e,this.on(t,n),this},o.prototype.removeListener=function(t,e){var o,r,a,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(o=this._events[t]).length,r=-1,o===e||i(o.listener)&&o.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(n(o)){for(s=a;s-- >0;)if(o[s]===e||o[s].listener&&o[s].listener===e){r=s;break}if(r<0)return this;1===o.length?(o.length=0,delete this._events[t]):o.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},o.prototype.removeAllListeners=function(t){var e,o;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i(o=this._events[t]))this.removeListener(t,o);else if(o)for(;o.length;)this.removeListener(t,o[o.length-1]);return delete this._events[t],this},o.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},o.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},o.listenerCount=function(t,e){return t.listenerCount(e)}},{}],104:[function(t,e){var o=t("safe-buffer").Buffer,i=t("md5.js");e.exports=function(t,e,n,r){if(o.isBuffer(t)||(t=o.from(t,"binary")),e&&(o.isBuffer(e)||(e=o.from(e,"binary")),8!==e.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var a=n/8,s=o.alloc(a),c=o.alloc(r||0),l=o.alloc(0);a>0||r>0;){var h=new i;h.update(l),h.update(t),e&&h.update(e),l=h.digest();var d=0;if(a>0){var u=s.length-a;d=Math.min(a,l.length),l.copy(s,u,0,d),a-=d}if(d<l.length&&r>0){var p=c.length-r,f=Math.min(r,l.length-d);l.copy(c,p,d,d+f),r-=f}}return l.fill(0),{key:s,iv:c}}},{"md5.js":137,"safe-buffer":181}],105:[function(t,e){"use strict";var o=t("safe-buffer").Buffer,i=t("readable-stream").Transform;function n(t,e){if(!o.isBuffer(t)&&"string"!=typeof t)throw new TypeError(e+" must be a string or a buffer")}function r(t){i.call(this),this._block=o.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}t("inherits")(r,i),r.prototype._transform=function(t,e,o){var i=null;try{this.update(t,e)}catch(n){i=n}o(i)},r.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(o){e=o}t(e)},r.prototype.update=function(t,e){if(n(t,"Data"),this._finalized)throw new Error("Digest already called");o.isBuffer(t)||(t=o.from(t,e));for(var i=this._block,r=0;this._blockOffset+t.length-r>=this._blockSize;){for(var a=this._blockOffset;a<this._blockSize;)i[a++]=t[r++];this._update(),this._blockOffset=0}for(;r<t.length;)i[this._blockOffset++]=t[r++];for(var s=0,c=8*t.length;c>0;++s)this._length[s]+=c,(c=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*c);return this},r.prototype._update=function(){throw new Error("_update is not implemented")},r.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var o=0;o<4;++o)this._length[o]=0;return e},r.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=r},{inherits:136,"readable-stream":120,"safe-buffer":181}],106:[function(t,e,o){arguments[4][47][0].apply(o,arguments)},{dup:47}],107:[function(t,e,o){arguments[4][48][0].apply(o,arguments)},{"./_stream_readable":109,"./_stream_writable":111,_process:154,dup:48,inherits:136}],108:[function(t,e,o){arguments[4][49][0].apply(o,arguments)},{"./_stream_transform":110,dup:49,inherits:136}],109:[function(t,e,o){arguments[4][50][0].apply(o,arguments)},{"../errors":106,"./_stream_duplex":107,"./internal/streams/async_iterator":112,"./internal/streams/buffer_list":113,"./internal/streams/destroy":114,"./internal/streams/from":116,"./internal/streams/state":118,"./internal/streams/stream":119,_process:154,buffer:64,dup:50,events:103,inherits:136,"string_decoder/":121,util:19}],110:[function(t,e,o){arguments[4][51][0].apply(o,arguments)},{"../errors":106,"./_stream_duplex":107,dup:51,inherits:136}],111:[function(t,e,o){arguments[4][52][0].apply(o,arguments)},{"../errors":106,"./_stream_duplex":107,"./internal/streams/destroy":114,"./internal/streams/state":118,"./internal/streams/stream":119,_process:154,buffer:64,dup:52,inherits:136,"util-deprecate":193}],112:[function(t,e,o){arguments[4][53][0].apply(o,arguments)},{"./end-of-stream":115,_process:154,dup:53}],113:[function(t,e,o){arguments[4][54][0].apply(o,arguments)},{buffer:64,dup:54,util:19}],114:[function(t,e,o){arguments[4][55][0].apply(o,arguments)},{_process:154,dup:55}],115:[function(t,e,o){arguments[4][56][0].apply(o,arguments)},{"../../../errors":106,dup:56}],116:[function(t,e,o){arguments[4][57][0].apply(o,arguments)},{dup:57}],117:[function(t,e,o){arguments[4][58][0].apply(o,arguments)},{"../../../errors":106,"./end-of-stream":115,dup:58}],118:[function(t,e,o){arguments[4][59][0].apply(o,arguments)},{"../../../errors":106,dup:59}],119:[function(t,e,o){arguments[4][60][0].apply(o,arguments)},{dup:60,events:103}],120:[function(t,e,o){arguments[4][61][0].apply(o,arguments)},{"./lib/_stream_duplex.js":107,"./lib/_stream_passthrough.js":108,"./lib/_stream_readable.js":109,"./lib/_stream_transform.js":110,"./lib/_stream_writable.js":111,"./lib/internal/streams/end-of-stream.js":115,"./lib/internal/streams/pipeline.js":117,dup:61}],121:[function(t,e,o){arguments[4][62][0].apply(o,arguments)},{dup:62,"safe-buffer":181}],122:[function(t,e,o){var i=o;i.utils=t("./hash/utils"),i.common=t("./hash/common"),i.sha=t("./hash/sha"),i.ripemd=t("./hash/ripemd"),i.hmac=t("./hash/hmac"),i.sha1=i.sha.sha1,i.sha256=i.sha.sha256,i.sha224=i.sha.sha224,i.sha384=i.sha.sha384,i.sha512=i.sha.sha512,i.ripemd160=i.ripemd.ripemd160},{"./hash/common":123,"./hash/hmac":124,"./hash/ripemd":125,"./hash/sha":126,"./hash/utils":133}],123:[function(t,e,o){"use strict";var i=t("./utils"),n=t("minimalistic-assert");function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}o.BlockHash=r,r.prototype.update=function(t,e){if(t=i.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var o=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-o,t.length),0===this.pending.length&&(this.pending=null),t=i.join32(t,0,t.length-o,this.endian);for(var n=0;n<t.length;n+=this._delta32)this._update(t,n,n+this._delta32)}return this},r.prototype.digest=function(t){return this.update(this._pad()),n(null===this.pending),this._digest(t)},r.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,o=e-(t+this.padLength)%e,i=new Array(o+this.padLength);i[0]=128;for(var n=1;n<o;n++)i[n]=0;if(t<<=3,"big"===this.endian){for(var r=8;r<this.padLength;r++)i[n++]=0;i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=t>>>24&255,i[n++]=t>>>16&255,i[n++]=t>>>8&255,i[n++]=255&t}else for(i[n++]=255&t,i[n++]=t>>>8&255,i[n++]=t>>>16&255,i[n++]=t>>>24&255,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,r=8;r<this.padLength;r++)i[n++]=0;return i}},{"./utils":133,"minimalistic-assert":140}],124:[function(t,e){"use strict";var o=t("./utils"),i=t("minimalistic-assert");function n(t,e,i){if(!(this instanceof n))return new n(t,e,i);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(o.toArray(e,i))}e.exports=n,n.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),i(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},n.prototype.update=function(t,e){return this.inner.update(t,e),this},n.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},{"./utils":133,"minimalistic-assert":140}],125:[function(t,e,o){"use strict";var i=t("./utils"),n=t("./common"),r=i.rotl32,a=i.sum32,s=i.sum32_3,c=i.sum32_4,l=n.BlockHash;function h(){if(!(this instanceof h))return new h;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function d(t,e,o,i){return t<=15?e^o^i:t<=31?e&o|~e&i:t<=47?(e|~o)^i:t<=63?e&i|o&~i:e^(o|~i)}function u(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function p(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}i.inherits(h,l),o.ripemd160=h,h.blockSize=512,h.outSize=160,h.hmacStrength=192,h.padLength=64,h.prototype._update=function(t,e){for(var o=this.h[0],i=this.h[1],n=this.h[2],l=this.h[3],h=this.h[4],y=o,_=i,C=n,b=l,S=h,w=0;w<80;w++){var A=a(r(c(o,d(w,i,n,l),t[f[w]+e],u(w)),m[w]),h);o=h,h=l,l=r(n,10),n=i,i=A,A=a(r(c(y,d(79-w,_,C,b),t[g[w]+e],p(w)),v[w]),S),y=S,S=b,b=r(C,10),C=_,_=A}A=s(this.h[1],n,b),this.h[1]=s(this.h[2],l,S),this.h[2]=s(this.h[3],h,y),this.h[3]=s(this.h[4],o,_),this.h[4]=s(this.h[0],i,C),this.h[0]=A},h.prototype._digest=function(t){return"hex"===t?i.toHex32(this.h,"little"):i.split32(this.h,"little")};var f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":123,"./utils":133}],126:[function(t,e,o){"use strict";o.sha1=t("./sha/1"),o.sha224=t("./sha/224"),o.sha256=t("./sha/256"),o.sha384=t("./sha/384"),o.sha512=t("./sha/512")},{"./sha/1":127,"./sha/224":128,"./sha/256":129,"./sha/384":130,"./sha/512":131}],127:[function(t,e){"use strict";var o=t("../utils"),i=t("../common"),n=t("./common"),r=o.rotl32,a=o.sum32,s=o.sum32_5,c=n.ft_1,l=i.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function d(){if(!(this instanceof d))return new d;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}o.inherits(d,l),e.exports=d,d.blockSize=512,d.outSize=160,d.hmacStrength=80,d.padLength=64,d.prototype._update=function(t,e){for(var o=this.W,i=0;i<16;i++)o[i]=t[e+i];for(;i<o.length;i++)o[i]=r(o[i-3]^o[i-8]^o[i-14]^o[i-16],1);var n=this.h[0],l=this.h[1],d=this.h[2],u=this.h[3],p=this.h[4];for(i=0;i<o.length;i++){var f=~~(i/20),g=s(r(n,5),c(f,l,d,u),p,o[i],h[f]);p=u,u=d,d=r(l,30),l=n,n=g}this.h[0]=a(this.h[0],n),this.h[1]=a(this.h[1],l),this.h[2]=a(this.h[2],d),this.h[3]=a(this.h[3],u),this.h[4]=a(this.h[4],p)},d.prototype._digest=function(t){return"hex"===t?o.toHex32(this.h,"big"):o.split32(this.h,"big")}},{"../common":123,"../utils":133,"./common":132}],128:[function(t,e){"use strict";var o=t("../utils"),i=t("./256");function n(){if(!(this instanceof n))return new n;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}o.inherits(n,i),e.exports=n,n.blockSize=512,n.outSize=224,n.hmacStrength=192,n.padLength=64,n.prototype._digest=function(t){return"hex"===t?o.toHex32(this.h.slice(0,7),"big"):o.split32(this.h.slice(0,7),"big")}},{"../utils":133,"./256":129}],129:[function(t,e){"use strict";var o=t("../utils"),i=t("../common"),n=t("./common"),r=t("minimalistic-assert"),a=o.sum32,s=o.sum32_4,c=o.sum32_5,l=n.ch32,h=n.maj32,d=n.s0_256,u=n.s1_256,p=n.g0_256,f=n.g1_256,g=i.BlockHash,m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function v(){if(!(this instanceof v))return new v;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=m,this.W=new Array(64)}o.inherits(v,g),e.exports=v,v.blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(t,e){for(var o=this.W,i=0;i<16;i++)o[i]=t[e+i];for(;i<o.length;i++)o[i]=s(f(o[i-2]),o[i-7],p(o[i-15]),o[i-16]);var n=this.h[0],g=this.h[1],m=this.h[2],v=this.h[3],y=this.h[4],_=this.h[5],C=this.h[6],b=this.h[7];for(r(this.k.length===o.length),i=0;i<o.length;i++){var S=c(b,u(y),l(y,_,C),this.k[i],o[i]),w=a(d(n),h(n,g,m));b=C,C=_,_=y,y=a(v,S),v=m,m=g,g=n,n=a(S,w)}this.h[0]=a(this.h[0],n),this.h[1]=a(this.h[1],g),this.h[2]=a(this.h[2],m),this.h[3]=a(this.h[3],v),this.h[4]=a(this.h[4],y),this.h[5]=a(this.h[5],_),this.h[6]=a(this.h[6],C),this.h[7]=a(this.h[7],b)},v.prototype._digest=function(t){return"hex"===t?o.toHex32(this.h,"big"):o.split32(this.h,"big")}},{"../common":123,"../utils":133,"./common":132,"minimalistic-assert":140}],130:[function(t,e){"use strict";var o=t("../utils"),i=t("./512");function n(){if(!(this instanceof n))return new n;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}o.inherits(n,i),e.exports=n,n.blockSize=1024,n.outSize=384,n.hmacStrength=192,n.padLength=128,n.prototype._digest=function(t){return"hex"===t?o.toHex32(this.h.slice(0,12),"big"):o.split32(this.h.slice(0,12),"big")}},{"../utils":133,"./512":131}],131:[function(t,e){"use strict";var o=t("../utils"),i=t("../common"),n=t("minimalistic-assert"),r=o.rotr64_hi,a=o.rotr64_lo,s=o.shr64_hi,c=o.shr64_lo,l=o.sum64,h=o.sum64_hi,d=o.sum64_lo,u=o.sum64_4_hi,p=o.sum64_4_lo,f=o.sum64_5_hi,g=o.sum64_5_lo,m=i.BlockHash,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function y(){if(!(this instanceof y))return new y;m.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=v,this.W=new Array(160)}function _(t,e,o,i,n){var r=t&o^~t&n;return r<0&&(r+=4294967296),r}function C(t,e,o,i,n,r){var a=e&i^~e&r;return a<0&&(a+=4294967296),a}function b(t,e,o,i,n){var r=t&o^t&n^o&n;return r<0&&(r+=4294967296),r}function S(t,e,o,i,n,r){var a=e&i^e&r^i&r;return a<0&&(a+=4294967296),a}function w(t,e){var o=r(t,e,28)^r(e,t,2)^r(e,t,7);return o<0&&(o+=4294967296),o}function A(t,e){var o=a(t,e,28)^a(e,t,2)^a(e,t,7);return o<0&&(o+=4294967296),o}function k(t,e){var o=a(t,e,14)^a(t,e,18)^a(e,t,9);return o<0&&(o+=4294967296),o}function P(t,e){var o=r(t,e,1)^r(t,e,8)^s(t,e,7);return o<0&&(o+=4294967296),o}function T(t,e){var o=a(t,e,1)^a(t,e,8)^c(t,e,7);return o<0&&(o+=4294967296),o}function B(t,e){var o=a(t,e,19)^a(e,t,29)^c(t,e,6);return o<0&&(o+=4294967296),o}o.inherits(y,m),e.exports=y,y.blockSize=1024,y.outSize=512,y.hmacStrength=192,y.padLength=128,y.prototype._prepareBlock=function(t,e){for(var o=this.W,i=0;i<32;i++)o[i]=t[e+i];for(;i<o.length;i+=2){var n=(m=o[i-4],v=o[i-3],y=void 0,(y=r(m,v,19)^r(v,m,29)^s(m,v,6))<0&&(y+=4294967296),y),a=B(o[i-4],o[i-3]),c=o[i-14],l=o[i-13],h=P(o[i-30],o[i-29]),d=T(o[i-30],o[i-29]),f=o[i-32],g=o[i-31];o[i]=u(n,a,c,l,h,d,f,g),o[i+1]=p(n,a,c,l,h,d,f,g)}var m,v,y},y.prototype._update=function(t,e){this._prepareBlock(t,e);var o,i,a,s=this.W,c=this.h[0],u=this.h[1],p=this.h[2],m=this.h[3],v=this.h[4],y=this.h[5],P=this.h[6],T=this.h[7],B=this.h[8],M=this.h[9],I=this.h[10],R=this.h[11],L=this.h[12],D=this.h[13],N=this.h[14],E=this.h[15];n(this.k.length===s.length);for(var x=0;x<s.length;x+=2){var U=N,O=E,F=(a=void 0,(a=r(o=B,i=M,14)^r(o,i,18)^r(i,o,9))<0&&(a+=4294967296),a),W=k(B,M),V=_(B,0,I,0,L),H=C(0,M,0,R,0,D),G=this.k[x],j=this.k[x+1],z=s[x],q=s[x+1],K=f(U,O,F,W,V,H,G,j,z,q),X=g(U,O,F,W,V,H,G,j,z,q);U=w(c,u),O=A(c,u),F=b(c,0,p,0,v),W=S(0,u,0,m,0,y);var J=h(U,O,F,W),Y=d(U,O,F,W);N=L,E=D,L=I,D=R,I=B,R=M,B=h(P,T,K,X),M=d(T,T,K,X),P=v,T=y,v=p,y=m,p=c,m=u,c=h(K,X,J,Y),u=d(K,X,J,Y)}l(this.h,0,c,u),l(this.h,2,p,m),l(this.h,4,v,y),l(this.h,6,P,T),l(this.h,8,B,M),l(this.h,10,I,R),l(this.h,12,L,D),l(this.h,14,N,E)},y.prototype._digest=function(t){return"hex"===t?o.toHex32(this.h,"big"):o.split32(this.h,"big")}},{"../common":123,"../utils":133,"minimalistic-assert":140}],132:[function(t,e,o){"use strict";var i=t("../utils").rotr32;function n(t,e,o){return t&e^~t&o}function r(t,e,o){return t&e^t&o^e&o}function a(t,e,o){return t^e^o}o.ft_1=function(t,e,o,i){return 0===t?n(e,o,i):1===t||3===t?a(e,o,i):2===t?r(e,o,i):void 0},o.ch32=n,o.maj32=r,o.p32=a,o.s0_256=function(t){return i(t,2)^i(t,13)^i(t,22)},o.s1_256=function(t){return i(t,6)^i(t,11)^i(t,25)},o.g0_256=function(t){return i(t,7)^i(t,18)^t>>>3},o.g1_256=function(t){return i(t,17)^i(t,19)^t>>>10}},{"../utils":133}],133:[function(t,e,o){"use strict";var i=t("minimalistic-assert"),n=t("inherits");function r(t,e){return 55296==(64512&t.charCodeAt(e))&&!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1))}function a(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function s(t){return 1===t.length?"0"+t:t}function c(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}o.inherits=n,o.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var o=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),n=0;n<t.length;n+=2)o.push(parseInt(t[n]+t[n+1],16))}else for(var i=0,n=0;n<t.length;n++){var a=t.charCodeAt(n);a<128?o[i++]=a:a<2048?(o[i++]=a>>6|192,o[i++]=63&a|128):r(t,n)?(a=65536+((1023&a)<<10)+(1023&t.charCodeAt(++n)),o[i++]=a>>18|240,o[i++]=a>>12&63|128,o[i++]=a>>6&63|128,o[i++]=63&a|128):(o[i++]=a>>12|224,o[i++]=a>>6&63|128,o[i++]=63&a|128)}else for(n=0;n<t.length;n++)o[n]=0|t[n];return o},o.toHex=function(t){for(var e="",o=0;o<t.length;o++)e+=s(t[o].toString(16));return e},o.htonl=a,o.toHex32=function(t,e){for(var o="",i=0;i<t.length;i++){var n=t[i];"little"===e&&(n=a(n)),o+=c(n.toString(16))}return o},o.zero2=s,o.zero8=c,o.join32=function(t,e,o,n){var r=o-e;i(r%4==0);for(var a=new Array(r/4),s=0,c=e;s<a.length;s++,c+=4){var l;l="big"===n?t[c]<<24|t[c+1]<<16|t[c+2]<<8|t[c+3]:t[c+3]<<24|t[c+2]<<16|t[c+1]<<8|t[c],a[s]=l>>>0}return a},o.split32=function(t,e){for(var o=new Array(4*t.length),i=0,n=0;i<t.length;i++,n+=4){var r=t[i];"big"===e?(o[n]=r>>>24,o[n+1]=r>>>16&255,o[n+2]=r>>>8&255,o[n+3]=255&r):(o[n+3]=r>>>24,o[n+2]=r>>>16&255,o[n+1]=r>>>8&255,o[n]=255&r)}return o},o.rotr32=function(t,e){return t>>>e|t<<32-e},o.rotl32=function(t,e){return t<<e|t>>>32-e},o.sum32=function(t,e){return t+e>>>0},o.sum32_3=function(t,e,o){return t+e+o>>>0},o.sum32_4=function(t,e,o,i){return t+e+o+i>>>0},o.sum32_5=function(t,e,o,i,n){return t+e+o+i+n>>>0},o.sum64=function(t,e,o,i){var n=t[e],r=i+t[e+1]>>>0,a=(r<i?1:0)+o+n;t[e]=a>>>0,t[e+1]=r},o.sum64_hi=function(t,e,o,i){return(e+i>>>0<e?1:0)+t+o>>>0},o.sum64_lo=function(t,e,o,i){return e+i>>>0},o.sum64_4_hi=function(t,e,o,i,n,r,a,s){var c=0,l=e;return c+=(l=l+i>>>0)<e?1:0,c+=(l=l+r>>>0)<r?1:0,t+o+n+a+(c+=(l=l+s>>>0)<s?1:0)>>>0},o.sum64_4_lo=function(t,e,o,i,n,r,a,s){return e+i+r+s>>>0},o.sum64_5_hi=function(t,e,o,i,n,r,a,s,c,l){var h=0,d=e;return h+=(d=d+i>>>0)<e?1:0,h+=(d=d+r>>>0)<r?1:0,h+=(d=d+s>>>0)<s?1:0,t+o+n+a+c+(h+=(d=d+l>>>0)<l?1:0)>>>0},o.sum64_5_lo=function(t,e,o,i,n,r,a,s,c,l){return e+i+r+s+l>>>0},o.rotr64_hi=function(t,e,o){return(e<<32-o|t>>>o)>>>0},o.rotr64_lo=function(t,e,o){return(t<<32-o|e>>>o)>>>0},o.shr64_hi=function(t,e,o){return t>>>o},o.shr64_lo=function(t,e,o){return(t<<32-o|e>>>o)>>>0}},{inherits:136,"minimalistic-assert":140}],134:[function(t,e){"use strict";var o=t("hash.js"),i=t("minimalistic-crypto-utils"),n=t("minimalistic-assert");function r(t){if(!(this instanceof r))return new r(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=i.toArray(t.entropy,t.entropyEnc||"hex"),o=i.toArray(t.nonce,t.nonceEnc||"hex"),a=i.toArray(t.pers,t.persEnc||"hex");n(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,o,a)}e.exports=r,r.prototype._init=function(t,e,o){var i=t.concat(e).concat(o);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},r.prototype._hmac=function(){return new o.hmac(this.hash,this.K)},r.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},r.prototype.reseed=function(t,e,o,r){"string"!=typeof e&&(r=o,o=e,e=null),t=i.toArray(t,e),o=i.toArray(o,r),n(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(o||[])),this._reseed=1},r.prototype.generate=function(t,e,o,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(n=o,o=e,e=null),o&&(o=i.toArray(o,n||"hex"),this._update(o));for(var r=[];r.length<t;)this.V=this._hmac().update(this.V).digest(),r=r.concat(this.V);var a=r.slice(0,t);return this._update(o),this._reseed++,i.encode(a,e)}},{"hash.js":122,"minimalistic-assert":140,"minimalistic-crypto-utils":141}],135:[function(t,e,o){o.read=function(t,e,o,i,n){var r,a,s=8*n-i-1,c=(1<<s)-1,l=c>>1,h=-7,d=o?n-1:0,u=o?-1:1,p=t[e+d];for(d+=u,r=p&(1<<-h)-1,p>>=-h,h+=s;h>0;r=256*r+t[e+d],d+=u,h-=8);for(a=r&(1<<-h)-1,r>>=-h,h+=i;h>0;a=256*a+t[e+d],d+=u,h-=8);if(0===r)r=1-l;else{if(r===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),r-=l}return(p?-1:1)*a*Math.pow(2,r-i)},o.write=function(t,e,o,i,n,r){var a,s,c,l=8*r-n-1,h=(1<<l)-1,d=h>>1,u=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:r-1,f=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+d>=1?u/c:u*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=h?(s=0,a=h):a+d>=1?(s=(e*c-1)*Math.pow(2,n),a+=d):(s=e*Math.pow(2,d-1)*Math.pow(2,n),a=0));n>=8;t[o+p]=255&s,p+=f,s/=256,n-=8);for(a=a<<n|s,l+=n;l>0;t[o+p]=255&a,p+=f,a/=256,l-=8);t[o+p-f]|=128*g}},{}],136:[function(t,e){"function"==typeof Object.create?e.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,e){if(e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}}},{}],137:[function(t,e){"use strict";var o=t("inherits"),i=t("hash-base"),n=t("safe-buffer").Buffer,r=new Array(16);function a(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function s(t,e){return t<<e|t>>>32-e}function c(t,e,o,i,n,r,a){return s(t+(e&o|~e&i)+n+r|0,a)+e|0}function l(t,e,o,i,n,r,a){return s(t+(e&i|o&~i)+n+r|0,a)+e|0}function h(t,e,o,i,n,r,a){return s(t+(e^o^i)+n+r|0,a)+e|0}function d(t,e,o,i,n,r,a){return s(t+(o^(e|~i))+n+r|0,a)+e|0}o(a,i),a.prototype._update=function(){for(var t=r,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var o=this._a,i=this._b,n=this._c,a=this._d;o=c(o,i,n,a,t[0],3614090360,7),a=c(a,o,i,n,t[1],3905402710,12),n=c(n,a,o,i,t[2],606105819,17),i=c(i,n,a,o,t[3],3250441966,22),o=c(o,i,n,a,t[4],4118548399,7),a=c(a,o,i,n,t[5],1200080426,12),n=c(n,a,o,i,t[6],2821735955,17),i=c(i,n,a,o,t[7],4249261313,22),o=c(o,i,n,a,t[8],1770035416,7),a=c(a,o,i,n,t[9],2336552879,12),n=c(n,a,o,i,t[10],4294925233,17),i=c(i,n,a,o,t[11],2304563134,22),o=c(o,i,n,a,t[12],1804603682,7),a=c(a,o,i,n,t[13],4254626195,12),n=c(n,a,o,i,t[14],2792965006,17),o=l(o,i=c(i,n,a,o,t[15],1236535329,22),n,a,t[1],4129170786,5),a=l(a,o,i,n,t[6],3225465664,9),n=l(n,a,o,i,t[11],643717713,14),i=l(i,n,a,o,t[0],3921069994,20),o=l(o,i,n,a,t[5],3593408605,5),a=l(a,o,i,n,t[10],38016083,9),n=l(n,a,o,i,t[15],3634488961,14),i=l(i,n,a,o,t[4],3889429448,20),o=l(o,i,n,a,t[9],568446438,5),a=l(a,o,i,n,t[14],3275163606,9),n=l(n,a,o,i,t[3],4107603335,14),i=l(i,n,a,o,t[8],1163531501,20),o=l(o,i,n,a,t[13],2850285829,5),a=l(a,o,i,n,t[2],4243563512,9),n=l(n,a,o,i,t[7],1735328473,14),o=h(o,i=l(i,n,a,o,t[12],2368359562,20),n,a,t[5],4294588738,4),a=h(a,o,i,n,t[8],2272392833,11),n=h(n,a,o,i,t[11],1839030562,16),i=h(i,n,a,o,t[14],4259657740,23),o=h(o,i,n,a,t[1],2763975236,4),a=h(a,o,i,n,t[4],1272893353,11),n=h(n,a,o,i,t[7],4139469664,16),i=h(i,n,a,o,t[10],3200236656,23),o=h(o,i,n,a,t[13],681279174,4),a=h(a,o,i,n,t[0],3936430074,11),n=h(n,a,o,i,t[3],3572445317,16),i=h(i,n,a,o,t[6],76029189,23),o=h(o,i,n,a,t[9],3654602809,4),a=h(a,o,i,n,t[12],3873151461,11),n=h(n,a,o,i,t[15],530742520,16),o=d(o,i=h(i,n,a,o,t[2],3299628645,23),n,a,t[0],4096336452,6),a=d(a,o,i,n,t[7],1126891415,10),n=d(n,a,o,i,t[14],2878612391,15),i=d(i,n,a,o,t[5],4237533241,21),o=d(o,i,n,a,t[12],1700485571,6),a=d(a,o,i,n,t[3],2399980690,10),n=d(n,a,o,i,t[10],4293915773,15),i=d(i,n,a,o,t[1],2240044497,21),o=d(o,i,n,a,t[8],1873313359,6),a=d(a,o,i,n,t[15],4264355552,10),n=d(n,a,o,i,t[6],2734768916,15),i=d(i,n,a,o,t[13],1309151649,21),o=d(o,i,n,a,t[4],4149444226,6),a=d(a,o,i,n,t[11],3174756917,10),n=d(n,a,o,i,t[2],718787259,15),i=d(i,n,a,o,t[9],3951481745,21),this._a=this._a+o|0,this._b=this._b+i|0,this._c=this._c+n|0,this._d=this._d+a|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=n.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},e.exports=a},{"hash-base":105,inherits:136,"safe-buffer":181}],138:[function(t,e){var o=t("bn.js"),i=t("brorand");function n(t){this.rand=t||new i.Rand}e.exports=n,n.create=function(t){return new n(t)},n.prototype._randbelow=function(t){var e=t.bitLength(),i=Math.ceil(e/8);do{var n=new o(this.rand.generate(i))}while(n.cmp(t)>=0);return n},n.prototype._randrange=function(t,e){var o=e.sub(t);return t.add(this._randbelow(o))},n.prototype.test=function(t,e,i){var n=t.bitLength(),r=o.mont(t),a=new o(1).toRed(r);e||(e=Math.max(1,n/48|0));for(var s=t.subn(1),c=0;!s.testn(c);c++);for(var l=t.shrn(c),h=s.toRed(r);e>0;e--){var d=this._randrange(new o(2),s);i&&i(d);var u=d.toRed(r).redPow(l);if(0!==u.cmp(a)&&0!==u.cmp(h)){for(var p=1;p<c;p++){if(0===(u=u.redSqr()).cmp(a))return!1;if(0===u.cmp(h))break}if(p===c)return!1}}return!0},n.prototype.getDivisor=function(t,e){var i=t.bitLength(),n=o.mont(t),r=new o(1).toRed(n);e||(e=Math.max(1,i/48|0));for(var a=t.subn(1),s=0;!a.testn(s);s++);for(var c=t.shrn(s),l=a.toRed(n);e>0;e--){var h=this._randrange(new o(2),a),d=t.gcd(h);if(0!==d.cmpn(1))return d;var u=h.toRed(n).redPow(c);if(0!==u.cmp(r)&&0!==u.cmp(l)){for(var p=1;p<s;p++){if(0===(u=u.redSqr()).cmp(r))return u.fromRed().subn(1).gcd(t);if(0===u.cmp(l))break}if(p===s)return(u=u.redSqr()).fromRed().subn(1).gcd(t)}}return!1}},{"bn.js":139,brorand:18}],139:[function(t,e,o){arguments[4][15][0].apply(o,arguments)},{buffer:19,dup:15}],140:[function(t,e){function o(t,e){if(!t)throw new Error(e||"Assertion failed")}e.exports=o,o.equal=function(t,e,o){if(t!=e)throw new Error(o||"Assertion failed: "+t+" != "+e)}},{}],141:[function(t,e,o){"use strict";var i=o;function n(t){return 1===t.length?"0"+t:t}function r(t){for(var e="",o=0;o<t.length;o++)e+=n(t[o].toString(16));return e}i.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var o=[];if("string"!=typeof t){for(var i=0;i<t.length;i++)o[i]=0|t[i];return o}if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),i=0;i<t.length;i+=2)o.push(parseInt(t[i]+t[i+1],16));else for(i=0;i<t.length;i++){var n=t.charCodeAt(i),r=n>>8,a=255&n;r?o.push(r,a):o.push(a)}return o},i.zero2=n,i.toHex=r,i.encode=function(t,e){return"hex"===e?r(t):t}},{}],142:[function(t,e){e.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],143:[function(t,e,o){"use strict";var i=t("asn1.js");o.certificate=t("./certificate");var n=i.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});o.RSAPrivateKey=n;var r=i.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});o.RSAPublicKey=r;var a=i.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())});o.PublicKey=a;var s=i.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),c=i.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(s),this.key("subjectPrivateKey").octstr())});o.PrivateKey=c;var l=i.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});o.EncryptedPrivateKey=l;var h=i.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});o.DSAPrivateKey=h,o.DSAparam=i.define("DSAparam",function(){this.int()});var d=i.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(u),this.key("publicKey").optional().explicit(1).bitstr())});o.ECPrivateKey=d;var u=i.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});o.signature=i.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"./certificate":144,"asn1.js":1}],144:[function(t,e){"use strict";var o=t("asn1.js"),i=o.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),n=o.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),r=o.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),a=o.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(r),this.key("subjectPublicKey").bitstr())}),s=o.define("RelativeDistinguishedName",function(){this.setof(n)}),c=o.define("RDNSequence",function(){this.seqof(s)}),l=o.define("Name",function(){this.choice({rdnSequence:this.use(c)})}),h=o.define("Validity",function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))}),d=o.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),u=o.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(r),this.key("issuer").use(l),this.key("validity").use(h),this.key("subject").use(l),this.key("subjectPublicKeyInfo").use(a),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(d).optional())}),p=o.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(u),this.key("signatureAlgorithm").use(r),this.key("signatureValue").bitstr())});e.exports=p},{"asn1.js":1}],145:[function(t,e){var o=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,n=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,r=t("evp_bytestokey"),a=t("browserify-aes"),s=t("safe-buffer").Buffer;e.exports=function(t,e){var c,l=t.toString(),h=l.match(o);if(h){var d="aes"+h[1],u=s.from(h[2],"hex"),p=s.from(h[3].replace(/[\r\n]/g,""),"base64"),f=r(e,u.slice(0,8),parseInt(h[1],10)).key,g=[],m=a.createDecipheriv(d,f,u);g.push(m.update(p)),g.push(m.final()),c=s.concat(g)}else{var v=l.match(n);c=s.from(v[2].replace(/[\r\n]/g,""),"base64")}return{tag:l.match(i)[1],data:c}}},{"browserify-aes":22,evp_bytestokey:104,"safe-buffer":181}],146:[function(t,e){var o=t("./asn1"),i=t("./aesid.json"),n=t("./fixProc"),r=t("browserify-aes"),a=t("pbkdf2"),s=t("safe-buffer").Buffer;function c(t){var e;"object"!=typeof t||s.isBuffer(t)||(e=t.passphrase,t=t.key),"string"==typeof t&&(t=s.from(t));var i,r,a=n(t,e),c=a.tag,h=a.data;switch(c){case"CERTIFICATE":r=o.certificate.decode(h,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(r||(r=o.PublicKey.decode(h,"der")),i=r.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return o.RSAPublicKey.decode(r.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return r.subjectPrivateKey=r.subjectPublicKey,{type:"ec",data:r};case"1.2.840.10040.4.1":return r.algorithm.params.pub_key=o.DSAparam.decode(r.subjectPublicKey.data,"der"),{type:"dsa",data:r.algorithm.params};default:throw new Error("unknown key id "+i)}case"ENCRYPTED PRIVATE KEY":h=l(h=o.EncryptedPrivateKey.decode(h,"der"),e);case"PRIVATE KEY":switch(i=(r=o.PrivateKey.decode(h,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return o.RSAPrivateKey.decode(r.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:r.algorithm.curve,privateKey:o.ECPrivateKey.decode(r.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return r.algorithm.params.priv_key=o.DSAparam.decode(r.subjectPrivateKey,"der"),{type:"dsa",params:r.algorithm.params};default:throw new Error("unknown key id "+i)}case"RSA PUBLIC KEY":return o.RSAPublicKey.decode(h,"der");case"RSA PRIVATE KEY":return o.RSAPrivateKey.decode(h,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:o.DSAPrivateKey.decode(h,"der")};case"EC PRIVATE KEY":return{curve:(h=o.ECPrivateKey.decode(h,"der")).parameters.value,privateKey:h.privateKey};default:throw new Error("unknown key type "+c)}}function l(t,e){var o=t.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),c=i[t.algorithm.decrypt.cipher.algo.join(".")],l=t.algorithm.decrypt.cipher.iv,h=t.subjectPrivateKey,d=parseInt(c.split("-")[1],10)/8,u=a.pbkdf2Sync(e,o,n,d,"sha1"),p=r.createDecipheriv(c,u,l),f=[];return f.push(p.update(h)),f.push(p.final()),s.concat(f)}e.exports=c,c.signature=o.signature},{"./aesid.json":142,"./asn1":143,"./fixProc":145,"browserify-aes":22,pbkdf2:147,"safe-buffer":181}],147:[function(t,e,o){o.pbkdf2=t("./lib/async"),o.pbkdf2Sync=t("./lib/sync")},{"./lib/async":148,"./lib/sync":151}],148:[function(t,e){(function(o){var i,n,r=t("safe-buffer").Buffer,a=t("./precondition"),s=t("./default-encoding"),c=t("./sync"),l=t("./to-buffer"),h=o.crypto&&o.crypto.subtle,d={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},u=[];function p(t){if(o.process&&!o.process.browser)return Promise.resolve(!1);if(!h||!h.importKey||!h.deriveBits)return Promise.resolve(!1);if(void 0!==u[t])return u[t];var e=g(i=i||r.alloc(8),i,10,128,t).then(function(){return!0}).catch(function(){return!1});return u[t]=e,e}function f(){return n||(n=o.process&&o.process.nextTick?o.process.nextTick:o.queueMicrotask?o.queueMicrotask:o.setImmediate?o.setImmediate:o.setTimeout)}function g(t,e,o,i,n){return h.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then(function(t){return h.deriveBits({name:"PBKDF2",salt:e,iterations:o,hash:{name:n}},t,i<<3)}).then(function(t){return r.from(t)})}function m(t,e){t.then(function(t){f()(function(){e(null,t)})},function(t){f()(function(){e(t)})})}e.exports=function(t,e,i,n,r,h){"function"==typeof r&&(h=r,r=void 0);var u=d[(r=r||"sha1").toLowerCase()];if(u&&"function"==typeof o.Promise){if(a(i,n),t=l(t,s,"Password"),e=l(e,s,"Salt"),"function"!=typeof h)throw new Error("No callback provided to pbkdf2");m(p(u).then(function(o){return o?g(t,e,i,n,u):c(t,e,i,n,r)}),h)}else f()(function(){var o;try{o=c(t,e,i,n,r)}catch(a){return h(a)}h(null,o)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./default-encoding":149,"./precondition":150,"./sync":151,"./to-buffer":152,"safe-buffer":181}],149:[function(t,e){(function(t,o){var i;i=o.process&&o.process.browser?"utf-8":o.process&&o.process.version?parseInt(t.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":"utf-8",e.exports=i}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:154}],150:[function(t,e){var o=Math.pow(2,30)-1;e.exports=function(t,e){if("number"!=typeof t)throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if("number"!=typeof e)throw new TypeError("Key length not a number");if(e<0||e>o||e!=e)throw new TypeError("Bad key length")}},{}],151:[function(t,e){var o=t("create-hash/md5"),i=t("ripemd160"),n=t("sha.js"),r=t("safe-buffer").Buffer,a=t("./precondition"),s=t("./default-encoding"),c=t("./to-buffer"),l=r.alloc(128),h={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function d(t,e,o){var i=u(t),n="sha512"===t||"sha384"===t?128:64;e.length>n?e=i(e):e.length<n&&(e=r.concat([e,l],n));for(var a=r.allocUnsafe(n+h[t]),s=r.allocUnsafe(n+h[t]),c=0;c<n;c++)a[c]=54^e[c],s[c]=92^e[c];var d=r.allocUnsafe(n+o+4);a.copy(d,0,0,n),this.ipad1=d,this.ipad2=a,this.opad=s,this.alg=t,this.blocksize=n,this.hash=i,this.size=h[t]}function u(t){return"rmd160"===t||"ripemd160"===t?function(t){return(new i).update(t).digest()}:"md5"===t?o:function(e){return n(t).update(e).digest()}}d.prototype.run=function(t,e){return t.copy(e,this.blocksize),this.hash(e).copy(this.opad,this.blocksize),this.hash(this.opad)},e.exports=function(t,e,o,i,n){a(o,i);var l=new d(n=n||"sha1",t=c(t,s,"Password"),(e=c(e,s,"Salt")).length),u=r.allocUnsafe(i),p=r.allocUnsafe(e.length+4);e.copy(p,0,0,e.length);for(var f=0,g=h[n],m=Math.ceil(i/g),v=1;v<=m;v++){p.writeUInt32BE(v,e.length);for(var y=l.run(p,l.ipad1),_=y,C=1;C<o;C++){_=l.run(_,l.ipad2);for(var b=0;b<g;b++)y[b]^=_[b]}y.copy(u,f),f+=g}return u}},{"./default-encoding":149,"./precondition":150,"./to-buffer":152,"create-hash/md5":71,ripemd160:180,"safe-buffer":181,"sha.js":184}],152:[function(t,e){var o=t("safe-buffer").Buffer;e.exports=function(t,e,i){if(o.isBuffer(t))return t;if("string"==typeof t)return o.from(t,e);if(ArrayBuffer.isView(t))return o.from(t.buffer);throw new TypeError(i+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":181}],153:[function(t,e){(function(t){"use strict";void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,o,i,n){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var r,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,o)});case 3:return t.nextTick(function(){e.call(null,o,i)});case 4:return t.nextTick(function(){e.call(null,o,i,n)});default:for(r=new Array(s-1),a=0;a<r.length;)r[a++]=arguments[a];return t.nextTick(function(){e.apply(null,r)})}}}:e.exports=t}).call(this,t("_process"))},{_process:154}],154:[function(t,e){var o,i,n=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(o===setTimeout)return setTimeout(t,0);if((o===r||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}function c(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(function(){try{o="function"==typeof setTimeout?setTimeout:r}catch(t){o=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}})();var l,h=[],d=!1,u=-1;function p(){d&&l&&(d=!1,l.length?h=l.concat(h):u=-1,h.length&&f())}function f(){if(!d){var t=s(p);d=!0;for(var e=h.length;e;){for(l=h,h=[];++u<e;)l&&l[u].run();u=-1,e=h.length}l=null,d=!1,c(t)}}function g(t,e){this.fun=t,this.array=e}function m(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)e[o-1]=arguments[o];h.push(new g(t,e)),1!==h.length||d||s(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(){return[]},n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],155:[function(t,e,o){o.publicEncrypt=t("./publicEncrypt"),o.privateDecrypt=t("./privateDecrypt"),o.privateEncrypt=function(t,e){return o.publicEncrypt(t,e,!0)},o.publicDecrypt=function(t,e){return o.privateDecrypt(t,e,!0)}},{"./privateDecrypt":158,"./publicEncrypt":159}],156:[function(t,e){var o=t("create-hash"),i=t("safe-buffer").Buffer;function n(t){var e=i.allocUnsafe(4);return e.writeUInt32BE(t,0),e}e.exports=function(t,e){for(var r,a=i.alloc(0),s=0;a.length<e;)r=n(s++),a=i.concat([a,o("sha1").update(t).update(r).digest()]);return a.slice(0,e)}},{"create-hash":70,"safe-buffer":181}],157:[function(t,e,o){arguments[4][15][0].apply(o,arguments)},{buffer:19,dup:15}],158:[function(t,e){var o=t("parse-asn1"),i=t("./mgf"),n=t("./xor"),r=t("bn.js"),a=t("browserify-rsa"),s=t("create-hash"),c=t("./withPublic"),l=t("safe-buffer").Buffer;function h(t,e){var o=t.modulus.byteLength(),r=s("sha1").update(l.alloc(0)).digest(),a=r.length;if(0!==e[0])throw new Error("decryption error");var c=e.slice(1,a+1),h=e.slice(a+1),d=n(c,i(h,a)),p=n(h,i(d,o-a-1));if(u(r,p.slice(0,a)))throw new Error("decryption error");for(var f=a;0===p[f];)f++;if(1!==p[f++])throw new Error("decryption error");return p.slice(f)}function d(t,e,o){for(var i=e.slice(0,2),n=2,r=0;0!==e[n++];)if(n>=e.length){r++;break}var a=e.slice(2,n-1);if(("0002"!==i.toString("hex")&&!o||"0001"!==i.toString("hex")&&o)&&r++,a.length<8&&r++,r)throw new Error("decryption error");return e.slice(n)}function u(t,e){t=l.from(t),e=l.from(e);var o=0,i=t.length;t.length!==e.length&&(o++,i=Math.min(t.length,e.length));for(var n=-1;++n<i;)o+=t[n]^e[n];return o}e.exports=function(t,e,i){var n;n=t.padding?t.padding:i?1:4;var s,u=o(t),p=u.modulus.byteLength();if(e.length>p||new r(e).cmp(u.modulus)>=0)throw new Error("decryption error");s=i?c(new r(e),u):a(e,u);var f=l.alloc(p-s.length);if(s=l.concat([f,s],p),4===n)return h(u,s);if(1===n)return d(0,s,i);if(3===n)return s;throw new Error("unknown padding")}},{"./mgf":156,"./withPublic":160,"./xor":161,"bn.js":157,"browserify-rsa":40,"create-hash":70,"parse-asn1":146,"safe-buffer":181}],159:[function(t,e){var o=t("parse-asn1"),i=t("randombytes"),n=t("create-hash"),r=t("./mgf"),a=t("./xor"),s=t("bn.js"),c=t("./withPublic"),l=t("browserify-rsa"),h=t("safe-buffer").Buffer;function d(t,e){var o=t.modulus.byteLength(),c=e.length,l=n("sha1").update(h.alloc(0)).digest(),d=l.length,u=2*d;if(c>o-u-2)throw new Error("message too long");var p=h.alloc(o-c-u-2),f=o-d-1,g=i(d),m=a(h.concat([l,p,h.alloc(1,1),e],f),r(g,f)),v=a(g,r(m,d));return new s(h.concat([h.alloc(1),v,m],o))}function u(t,e,o){var i,n=e.length,r=t.modulus.byteLength();if(n>r-11)throw new Error("message too long");return i=o?h.alloc(r-n-3,255):p(r-n-3),new s(h.concat([h.from([0,o?1:2]),i,h.alloc(1),e],r))}function p(t){for(var e,o=h.allocUnsafe(t),n=0,r=i(2*t),a=0;n<t;)a===r.length&&(r=i(2*t),a=0),(e=r[a++])&&(o[n++]=e);return o}e.exports=function(t,e,i){var n;n=t.padding?t.padding:i?1:4;var r,a=o(t);if(4===n)r=d(a,e);else if(1===n)r=u(a,e,i);else{if(3!==n)throw new Error("unknown padding");if((r=new s(e)).cmp(a.modulus)>=0)throw new Error("data too long for modulus")}return i?l(r,a):c(r,a)}},{"./mgf":156,"./withPublic":160,"./xor":161,"bn.js":157,"browserify-rsa":40,"create-hash":70,"parse-asn1":146,randombytes:162,"safe-buffer":181}],160:[function(t,e){var o=t("bn.js"),i=t("safe-buffer").Buffer;e.exports=function(t,e){return i.from(t.toRed(o.mont(e.modulus)).redPow(new o(e.publicExponent)).fromRed().toArray())}},{"bn.js":157,"safe-buffer":181}],161:[function(t,e){e.exports=function(t,e){for(var o=t.length,i=-1;++i<o;)t[i]^=e[i];return t}},{}],162:[function(t,e){(function(o,i){"use strict";var n=t("safe-buffer").Buffer,r=i.crypto||i.msCrypto;r&&r.getRandomValues?e.exports=function(t,e){if(t>4294967295)throw new RangeError("requested too many random bytes");var i=n.allocUnsafe(t);if(t>0)if(t>65536)for(var a=0;a<t;a+=65536)r.getRandomValues(i.slice(a,a+65536));else r.getRandomValues(i);return"function"==typeof e?o.nextTick(function(){e(null,i)}):i}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:154,"safe-buffer":181}],163:[function(t,e,o){(function(e,i){"use strict";function n(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var r=t("safe-buffer"),a=t("randombytes"),s=r.Buffer,c=r.kMaxLength,l=i.crypto||i.msCrypto,h=Math.pow(2,32)-1;function d(t,e){if("number"!=typeof t||t!=t)throw new TypeError("offset must be a number");if(t>h||t<0)throw new TypeError("offset must be a uint32");if(t>c||t>e)throw new RangeError("offset out of range")}function u(t,e,o){if("number"!=typeof t||t!=t)throw new TypeError("size must be a number");if(t>h||t<0)throw new TypeError("size must be a uint32");if(t+e>o||t>c)throw new RangeError("buffer too small")}function p(t,o,i,n){if(e.browser){var r=t.buffer,s=new Uint8Array(r,o,i);return l.getRandomValues(s),n?void e.nextTick(function(){n(null,t)}):t}if(!n)return a(i).copy(t,o),t;a(i,function(e,i){if(e)return n(e);i.copy(t,o),n(null,t)})}l&&l.getRandomValues||!e.browser?(o.randomFill=function(t,e,o,n){if(!(s.isBuffer(t)||t instanceof i.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof e)n=e,e=0,o=t.length;else if("function"==typeof o)n=o,o=t.length-e;else if("function"!=typeof n)throw new TypeError('"cb" argument must be a function');return d(e,t.length),u(o,e,t.length),p(t,e,o,n)},o.randomFillSync=function(t,e,o){if(void 0===e&&(e=0),!(s.isBuffer(t)||t instanceof i.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return d(e,t.length),void 0===o&&(o=t.length-e),u(o,e,t.length),p(t,e,o)}):(o.randomFill=n,o.randomFillSync=n)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:154,randombytes:162,"safe-buffer":181}],164:[function(t,e){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":165}],165:[function(t,e){"use strict";var o=t("process-nextick-args"),i=Object.keys||function(t){var e=[];for(var o in t)e.push(o);return e};e.exports=h;var n=Object.create(t("core-util-is"));n.inherits=t("inherits");var r=t("./_stream_readable"),a=t("./_stream_writable");n.inherits(h,r);for(var s=i(a.prototype),c=0;c<s.length;c++){var l=s[c];h.prototype[l]||(h.prototype[l]=a.prototype[l])}function h(t){if(!(this instanceof h))return new h(t);r.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||o.nextTick(u,this)}function u(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),o.nextTick(e,t)}},{"./_stream_readable":167,"./_stream_writable":169,"core-util-is":67,inherits:136,"process-nextick-args":153}],166:[function(t,e){"use strict";e.exports=n;var o=t("./_stream_transform"),i=Object.create(t("core-util-is"));function n(t){if(!(this instanceof n))return new n(t);o.call(this,t)}i.inherits=t("inherits"),i.inherits(n,o),n.prototype._transform=function(t,e,o){o(null,t)}},{"./_stream_transform":168,"core-util-is":67,inherits:136}],167:[function(t,e){(function(o,i){"use strict";var n=t("process-nextick-args");e.exports=b;var r,a=t("isarray");b.ReadableState=C,t("events").EventEmitter;var s=function(t,e){return t.listeners(e).length},c=t("./internal/streams/stream"),l=t("safe-buffer").Buffer,h=(void 0!==i?i:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};function d(t){return l.from(t)}var u=Object.create(t("core-util-is"));u.inherits=t("inherits");var p=t("util"),f=void 0;f=p&&p.debuglog?p.debuglog("stream"):function(){};var g,m=t("./internal/streams/BufferList"),v=t("./internal/streams/destroy");u.inherits(b,c);var y=["error","close","destroy","pause","resume"];function _(t,e,o){if("function"==typeof t.prependListener)return t.prependListener(e,o);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(o):t._events[e]=[o,t._events[e]]:t.on(e,o)}function C(e,o){e=e||{};var i=o instanceof(r=r||t("./_stream_duplex"));this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,a=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(g||(g=t("string_decoder/").StringDecoder),this.decoder=new g(e.encoding),this.encoding=e.encoding)}function b(e){if(r=r||t("./_stream_duplex"),!(this instanceof b))return new b(e);this._readableState=new C(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),c.call(this)}function S(t,e,o,i,n){var r,a=t._readableState;return null===e?(a.reading=!1,M(t,a)):(n||(r=A(a,e)),r?t.emit("error",r):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===l.prototype||(e=d(e)),i?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!o?(e=a.decoder.write(e),a.objectMode||0!==e.length?w(t,a,e,!1):L(t,a)):w(t,a,e,!1))):i||(a.reading=!1)),k(a)}function w(t,e,o,i){e.flowing&&0===e.length&&!e.sync?(t.emit("data",o),t.read(0)):(e.length+=e.objectMode?1:o.length,i?e.buffer.unshift(o):e.buffer.push(o),e.needReadable&&I(t)),L(t,e)}function A(t,e){var o,i;return i=e,l.isBuffer(i)||i instanceof h||"string"==typeof e||void 0===e||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o}function k(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),b.prototype.destroy=v.destroy,b.prototype._undestroy=v.undestroy,b.prototype._destroy=function(t,e){this.push(null),e(t)},b.prototype.push=function(t,e){var o,i=this._readableState;return i.objectMode?o=!0:"string"==typeof t&&((e=e||i.defaultEncoding)!==i.encoding&&(t=l.from(t,e),e=""),o=!0),S(this,t,e,!1,o)},b.prototype.unshift=function(t){return S(this,t,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return g||(g=t("string_decoder/").StringDecoder),this._readableState.decoder=new g(e),this._readableState.encoding=e,this};var P=8388608;function T(t){return t>=P?t=P:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function B(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=T(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function M(t,e){if(!e.ended){if(e.decoder){var o=e.decoder.end();o&&o.length&&(e.buffer.push(o),e.length+=e.objectMode?1:o.length)}e.ended=!0,I(t)}}function I(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(f("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?n.nextTick(R,t):R(t))}function R(t){f("emit readable"),t.emit("readable"),O(t)}function L(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(D,t,e))}function D(t,e){for(var o=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(f("maybeReadMore read 0"),t.read(0),o!==e.length);)o=e.length;e.readingMore=!1}function N(t){return function(){var e=t._readableState;f("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,O(t))}}function E(t){f("readable nexttick read 0"),t.read(0)}function x(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(U,t,e))}function U(t,e){e.reading||(f("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),O(t),e.flowing&&!e.reading&&t.read(0)}function O(t){var e=t._readableState;for(f("flow",e.flowing);e.flowing&&null!==t.read(););}function F(t,e){return 0===e.length?null:(e.objectMode?o=e.buffer.shift():!t||t>=e.length?(o=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):o=W(t,e.buffer,e.decoder),o);var o}function W(t,e,o){var i;return t<e.head.data.length?(i=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):i=t===e.head.data.length?e.shift():o?V(t,e):H(t,e),i}function V(t,e){var o=e.head,i=1,n=o.data;for(t-=n.length;o=o.next;){var r=o.data,a=t>r.length?r.length:t;if(a===r.length?n+=r:n+=r.slice(0,t),0==(t-=a)){a===r.length?(++i,o.next?e.head=o.next:e.head=e.tail=null):(e.head=o,o.data=r.slice(a));break}++i}return e.length-=i,n}function H(t,e){var o=l.allocUnsafe(t),i=e.head,n=1;for(i.data.copy(o),t-=i.data.length;i=i.next;){var r=i.data,a=t>r.length?r.length:t;if(r.copy(o,o.length-t,0,a),0==(t-=a)){a===r.length?(++n,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=r.slice(a));break}++n}return e.length-=n,o}function G(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,n.nextTick(j,e,t))}function j(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function z(t,e){for(var o=0,i=t.length;o<i;o++)if(t[o]===e)return o;return-1}b.prototype.read=function(t){f("read",t),t=parseInt(t,10);var e=this._readableState,o=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?G(this):I(this),null;if(0===(t=B(t,e))&&e.ended)return 0===e.length&&G(this),null;var i,n=e.needReadable;return f("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&f("length less than watermark",n=!0),e.ended||e.reading?f("reading or ended",n=!1):n&&(f("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=B(o,e))),null===(i=t>0?F(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),o!==t&&e.ended&&G(this)),null!==i&&this.emit("data",i),i},b.prototype._read=function(){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(t,e){var i=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1,f("pipe count=%d opts=%j",r.pipesCount,e);var a=e&&!1===e.end||t===o.stdout||t===o.stderr?y:l;function c(e,o){f("onunpipe"),e===i&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,f("cleanup"),t.removeListener("close",m),t.removeListener("finish",v),t.removeListener("drain",h),t.removeListener("error",g),t.removeListener("unpipe",c),i.removeListener("end",l),i.removeListener("end",y),i.removeListener("data",p),d=!0,!r.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function l(){f("onend"),t.end()}r.endEmitted?n.nextTick(a):i.once("end",a),t.on("unpipe",c);var h=N(i);t.on("drain",h);var d=!1;var u=!1;function p(e){f("ondata"),u=!1,!1!==t.write(e)||u||((1===r.pipesCount&&r.pipes===t||r.pipesCount>1&&-1!==z(r.pipes,t))&&!d&&(f("false write response, pause",r.awaitDrain),r.awaitDrain++,u=!0),i.pause())}function g(e){f("onerror",e),y(),t.removeListener("error",g),0===s(t,"error")&&t.emit("error",e)}function m(){t.removeListener("finish",v),y()}function v(){f("onfinish"),t.removeListener("close",m),y()}function y(){f("unpipe"),i.unpipe(t)}return i.on("data",p),_(t,"error",g),t.once("close",m),t.once("finish",v),t.emit("pipe",i),r.flowing||(f("pipe resume"),i.resume()),t},b.prototype.unpipe=function(t){var e=this._readableState,o={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,o),this);if(!t){var i=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var r=0;r<n;r++)i[r].emit("unpipe",this,{hasUnpiped:!1});return this}var a=z(e.pipes,t);return-1===a?this:(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,o),this)},b.prototype.on=function(t,e){var o=c.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&I(this):n.nextTick(E,this))}return o},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var t=this._readableState;return t.flowing||(f("resume"),t.flowing=!0,x(this,t)),this},b.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(t){var e=this,o=this._readableState,i=!1;for(var n in t.on("end",function(){if(f("wrapped end"),o.decoder&&!o.ended){var t=o.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(n){f("wrapped data"),o.decoder&&(n=o.decoder.write(n)),o.objectMode&&null==n||(o.objectMode||n&&n.length)&&(e.push(n)||(i=!0,t.pause()))}),t)void 0===this[n]&&"function"==typeof t[n]&&(this[n]=function(e){return function(){return t[e].apply(t,arguments)}}(n));for(var r=0;r<y.length;r++)t.on(y[r],this.emit.bind(this,y[r]));return this._read=function(e){f("wrapped _read",e),i&&(i=!1,t.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=F}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":165,"./internal/streams/BufferList":170,"./internal/streams/destroy":171,"./internal/streams/stream":172,_process:154,"core-util-is":67,events:103,inherits:136,isarray:173,"process-nextick-args":153,"safe-buffer":174,"string_decoder/":175,util:19}],168:[function(t,e){"use strict";e.exports=r;var o=t("./_stream_duplex"),i=Object.create(t("core-util-is"));function n(t,e){var o=this._transformState;o.transforming=!1;var i=o.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));o.writechunk=null,o.writecb=null,null!=e&&this.push(e),i(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function r(t){if(!(this instanceof r))return new r(t);o.call(this,t),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"==typeof this._flush?this._flush(function(e,o){s(t,e,o)}):s(this,null,null)}function s(t,e,o){if(e)return t.emit("error",e);if(null!=o&&t.push(o),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=t("inherits"),i.inherits(r,o),r.prototype.push=function(t,e){return this._transformState.needTransform=!1,o.prototype.push.call(this,t,e)},r.prototype._transform=function(){throw new Error("_transform() is not implemented")},r.prototype._write=function(t,e,o){var i=this._transformState;if(i.writecb=o,i.writechunk=t,i.writeencoding=e,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},r.prototype._read=function(){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},r.prototype._destroy=function(t,e){var i=this;o.prototype._destroy.call(this,t,function(t){e(t),i.emit("close")})}},{"./_stream_duplex":165,"core-util-is":67,inherits:136}],169:[function(t,e){(function(o,i){"use strict";var n=t("process-nextick-args");function r(t){var e=this;this.next=null,this.entry=null,this.finish=function(){E(e,t)}}e.exports=y;var a,s=!o.browser&&["v0.10","v0.9."].indexOf(o.version.slice(0,5))>-1?setImmediate:n.nextTick;y.WritableState=v;var c=Object.create(t("core-util-is"));c.inherits=t("inherits");var l={deprecate:t("util-deprecate")},h=t("./internal/streams/stream"),d=t("safe-buffer").Buffer,u=(void 0!==i?i:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};function p(t){return d.from(t)}var f,g=t("./internal/streams/destroy");function m(){}function v(e,o){a=a||t("./_stream_duplex"),e=e||{};var i=o instanceof a;this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,s=e.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i&&(s||0===s)?s:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===e.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){P(o,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function y(e){if(a=a||t("./_stream_duplex"),!(f.call(y,this)||this instanceof a))return new y(e);this._writableState=new v(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),h.call(this)}function _(t,e){var o=new Error("write after end");t.emit("error",o),n.nextTick(e,o)}function C(t,e,o,i){var r=!0,a=!1;return null===o?a=new TypeError("May not write null values to stream"):"string"==typeof o||void 0===o||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),n.nextTick(i,a),r=!1),r}function b(t,e,o){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=d.from(e,o)),e}function S(t,e,o,i,n,r){if(!o){var a=b(e,i,n);i!==a&&(o=!0,n="buffer",i=a)}var s=e.objectMode?1:i.length;e.length+=s;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:n,isBuf:o,callback:r,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else w(t,e,!1,s,i,n,r);return c}function w(t,e,o,i,n,r,a){e.writelen=i,e.writecb=a,e.writing=!0,e.sync=!0,o?t._writev(n,e.onwrite):t._write(n,r,e.onwrite),e.sync=!1}function A(t,e,o,i,r){--e.pendingcb,o?(n.nextTick(r,i),n.nextTick(D,t,e),t._writableState.errorEmitted=!0,t.emit("error",i)):(r(i),t._writableState.errorEmitted=!0,t.emit("error",i),D(t,e))}function k(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function P(t,e){var o=t._writableState,i=o.sync,n=o.writecb;if(k(o),e)A(t,o,i,e,n);else{var r=I(o);r||o.corked||o.bufferProcessing||!o.bufferedRequest||M(t,o),i?s(T,t,o,r,n):T(t,o,r,n)}}function T(t,e,o,i){o||B(t,e),e.pendingcb--,i(),D(t,e)}function B(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function M(t,e){e.bufferProcessing=!0;var o=e.bufferedRequest;if(t._writev&&o&&o.next){var i=e.bufferedRequestCount,n=new Array(i),a=e.corkedRequestsFree;a.entry=o;for(var s=0,c=!0;o;)n[s]=o,o.isBuf||(c=!1),o=o.next,s+=1;n.allBuffers=c,w(t,e,!0,e.length,n,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new r(e),e.bufferedRequestCount=0}else{for(;o;){var l=o.chunk,h=o.encoding,d=o.callback;if(w(t,e,!1,e.objectMode?1:l.length,l,h,d),o=o.next,e.bufferedRequestCount--,e.writing)break}null===o&&(e.lastBufferedRequest=null)}e.bufferedRequest=o,e.bufferProcessing=!1}function I(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function R(t,e){t._final(function(o){e.pendingcb--,o&&t.emit("error",o),e.prefinished=!0,t.emit("prefinish"),D(t,e)})}function L(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,n.nextTick(R,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function D(t,e){var o=I(e);return o&&(L(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),o}function N(t,e,o){e.ending=!0,D(t,e),o&&(e.finished?n.nextTick(o):t.once("finish",o)),e.ended=!0,t.writable=!1}function E(t,e,o){var i=t.entry;for(t.entry=null;i;){var n=i.callback;e.pendingcb--,n(o),i=i.next}e.corkedRequestsFree.next=t}c.inherits(y,h),v.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(v.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return!!f.call(this,t)||this===y&&t&&t._writableState instanceof v}})):f=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(t,e,o){var i,n=this._writableState,r=!1,a=!n.objectMode&&(i=t,d.isBuffer(i)||i instanceof u);return a&&!d.isBuffer(t)&&(t=p(t)),"function"==typeof e&&(o=e,e=null),a?e="buffer":e||(e=n.defaultEncoding),"function"!=typeof o&&(o=m),n.ended?_(this,o):(a||C(this,n,t,o))&&(n.pendingcb++,r=S(this,n,a,t,e,o)),r},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||M(this,t))},y.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(t,e,o){o(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(t,e,o){var i=this._writableState;"function"==typeof t?(o=t,t=null,e=null):"function"==typeof e&&(o=e,e=null),null!=t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||N(this,i,o)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":165,"./internal/streams/destroy":171,"./internal/streams/stream":172,_process:154,"core-util-is":67,inherits:136,"process-nextick-args":153,"safe-buffer":174,"util-deprecate":193}],170:[function(t,e){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=t("safe-buffer").Buffer,n=t("util");e.exports=function(){function t(){o(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,o=""+e.data;e=e.next;)o+=t+e.data;return o},t.prototype.concat=function(t){if(0===this.length)return i.alloc(0);for(var e,o,n=i.allocUnsafe(t>>>0),r=this.head,a=0;r;)e=n,o=a,r.data.copy(e,o),a+=r.data.length,r=r.next;return n},t}(),n&&n.inspect&&n.inspect.custom&&(e.exports.prototype[n.inspect.custom]=function(){var t=n.inspect({length:this.length});return this.constructor.name+" "+t})},{"safe-buffer":174,util:19}],171:[function(t,e){"use strict";var o=t("process-nextick-args");function i(t,e){t.emit("error",e)}e.exports={destroy:function(t,e){var n=this,r=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return r||a?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,o.nextTick(i,this,t)):o.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?n._writableState?n._writableState.errorEmitted||(n._writableState.errorEmitted=!0,o.nextTick(i,n,t)):o.nextTick(i,n,t):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":153}],172:[function(t,e,o){arguments[4][60][0].apply(o,arguments)},{dup:60,events:103}],173:[function(t,e,o){arguments[4][65][0].apply(o,arguments)},{dup:65}],174:[function(t,e,o){var i=t("buffer"),n=i.Buffer;function r(t,e){for(var o in t)e[o]=t[o]}function a(t,e,o){return n(t,e,o)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=i:(r(i,o),o.Buffer=a),r(n,a),a.from=function(t,e,o){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,o)},a.alloc=function(t,e,o){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=n(t);return void 0!==e?"string"==typeof o?i.fill(e,o):i.fill(e):i.fill(0),i},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},{buffer:64}],175:[function(t,e,o){arguments[4][62][0].apply(o,arguments)},{dup:62,"safe-buffer":174}],176:[function(t,e){e.exports=t("./readable").PassThrough},{"./readable":177}],177:[function(t,e,o){(o=e.exports=t("./lib/_stream_readable.js")).Stream=o,o.Readable=o,o.Writable=t("./lib/_stream_writable.js"),o.Duplex=t("./lib/_stream_duplex.js"),o.Transform=t("./lib/_stream_transform.js"),o.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":165,"./lib/_stream_passthrough.js":166,"./lib/_stream_readable.js":167,"./lib/_stream_transform.js":168,"./lib/_stream_writable.js":169}],178:[function(t,e){e.exports=t("./readable").Transform},{"./readable":177}],179:[function(t,e){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":169}],180:[function(t,e){"use strict";var o=t("buffer").Buffer,i=t("inherits"),n=t("hash-base"),r=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],s=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],l=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],h=[0,1518500249,1859775393,2400959708,2840853838],d=[1352829926,1548603684,1836072691,2053994217,0];function u(){n.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(t,e){return t<<e|t>>>32-e}function f(t,e,o,i,n,r,a,s){return p(t+(e^o^i)+r+a|0,s)+n|0}function g(t,e,o,i,n,r,a,s){return p(t+(e&o|~e&i)+r+a|0,s)+n|0}function m(t,e,o,i,n,r,a,s){return p(t+((e|~o)^i)+r+a|0,s)+n|0}function v(t,e,o,i,n,r,a,s){return p(t+(e&i|o&~i)+r+a|0,s)+n|0}function y(t,e,o,i,n,r,a,s){return p(t+(e^(o|~i))+r+a|0,s)+n|0}i(u,n),u.prototype._update=function(){for(var t=r,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var o=0|this._a,i=0|this._b,n=0|this._c,u=0|this._d,_=0|this._e,C=0|this._a,b=0|this._b,S=0|this._c,w=0|this._d,A=0|this._e,k=0;k<80;k+=1){var P,T;k<16?(P=f(o,i,n,u,_,t[a[k]],h[0],c[k]),T=y(C,b,S,w,A,t[s[k]],d[0],l[k])):k<32?(P=g(o,i,n,u,_,t[a[k]],h[1],c[k]),T=v(C,b,S,w,A,t[s[k]],d[1],l[k])):k<48?(P=m(o,i,n,u,_,t[a[k]],h[2],c[k]),T=m(C,b,S,w,A,t[s[k]],d[2],l[k])):k<64?(P=v(o,i,n,u,_,t[a[k]],h[3],c[k]),T=g(C,b,S,w,A,t[s[k]],d[3],l[k])):(P=y(o,i,n,u,_,t[a[k]],h[4],c[k]),T=f(C,b,S,w,A,t[s[k]],d[4],l[k])),o=_,_=u,u=p(n,10),n=i,i=P,C=A,A=w,w=p(S,10),S=b,b=T}var B=this._b+n+w|0;this._b=this._c+u+A|0,this._c=this._d+_+C|0,this._d=this._e+o+b|0,this._e=this._a+i+S|0,this._a=B},u.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=o.alloc?o.alloc(20):new o(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},e.exports=u},{buffer:64,"hash-base":105,inherits:136}],181:[function(t,e,o){var i=t("buffer"),n=i.Buffer;function r(t,e){for(var o in t)e[o]=t[o]}function a(t,e,o){return n(t,e,o)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=i:(r(i,o),o.Buffer=a),a.prototype=Object.create(n.prototype),r(n,a),a.from=function(t,e,o){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,o)},a.alloc=function(t,e,o){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=n(t);return void 0!==e?"string"==typeof o?i.fill(e,o):i.fill(e):i.fill(0),i},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},{buffer:64}],182:[function(t,e){(function(o){"use strict";var i,n=t("buffer"),r=n.Buffer,a={};for(i in n)n.hasOwnProperty(i)&&"SlowBuffer"!==i&&"Buffer"!==i&&(a[i]=n[i]);var s=a.Buffer={};for(i in r)r.hasOwnProperty(i)&&"allocUnsafe"!==i&&"allocUnsafeSlow"!==i&&(s[i]=r[i]);if(a.Buffer.prototype=r.prototype,s.from&&s.from!==Uint8Array.from||(s.from=function(t,e,o){if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&void 0===t.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return r(t,e,o)}),s.alloc||(s.alloc=function(t,e,o){if("number"!=typeof t)throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var i=r(t);return e&&0!==e.length?"string"==typeof o?i.fill(e,o):i.fill(e):i.fill(0),i}),!a.kStringMaxLength)try{a.kStringMaxLength=o.binding("buffer").kStringMaxLength}catch(c){}a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),e.exports=a}).call(this,t("_process"))},{_process:154,buffer:64}],183:[function(t,e){var o=t("safe-buffer").Buffer;function i(t,e){this._block=o.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}i.prototype.update=function(t,e){"string"==typeof t&&(e=e||"utf8",t=o.from(t,e));for(var i=this._block,n=this._blockSize,r=t.length,a=this._len,s=0;s<r;){for(var c=a%n,l=Math.min(r-s,n-c),h=0;h<l;h++)i[c+h]=t[s+h];s+=l,(a+=l)%n==0&&this._update(i)}return this._len+=r,this},i.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var o=8*this._len;if(o<=4294967295)this._block.writeUInt32BE(o,this._blockSize-4);else{var i=(4294967295&o)>>>0,n=(o-i)/4294967296;this._block.writeUInt32BE(n,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var r=this._hash();return t?r.toString(t):r},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=i},{"safe-buffer":181}],184:[function(t,e,o){(o=e.exports=function(t){t=t.toLowerCase();var e=o[t];if(!e)throw new Error(t+" is not supported (we accept pull requests)");return new e}).sha=t("./sha"),o.sha1=t("./sha1"),o.sha224=t("./sha224"),o.sha256=t("./sha256"),o.sha384=t("./sha384"),o.sha512=t("./sha512")},{"./sha":185,"./sha1":186,"./sha224":187,"./sha256":188,"./sha384":189,"./sha512":190}],185:[function(t,e){var o=t("inherits"),i=t("./hash"),n=t("safe-buffer").Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function s(){this.init(),this._w=a,i.call(this,64,56)}function c(t){return t<<30|t>>>2}function l(t,e,o,i){return 0===t?e&o|~e&i:2===t?e&o|e&i|o&i:e^o^i}o(s,i),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},s.prototype._update=function(t){for(var e,o=this._w,i=0|this._a,n=0|this._b,a=0|this._c,s=0|this._d,h=0|this._e,d=0;d<16;++d)o[d]=t.readInt32BE(4*d);for(;d<80;++d)o[d]=o[d-3]^o[d-8]^o[d-14]^o[d-16];for(var u=0;u<80;++u){var p=~~(u/20),f=0|((e=i)<<5|e>>>27)+l(p,n,a,s)+h+o[u]+r[p];h=s,s=a,a=c(n),n=i,i=f}this._a=i+this._a|0,this._b=n+this._b|0,this._c=a+this._c|0,this._d=s+this._d|0,this._e=h+this._e|0},s.prototype._hash=function(){var t=n.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},e.exports=s},{"./hash":183,inherits:136,"safe-buffer":181}],186:[function(t,e){var o=t("inherits"),i=t("./hash"),n=t("safe-buffer").Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function s(){this.init(),this._w=a,i.call(this,64,56)}function c(t){return t<<5|t>>>27}function l(t){return t<<30|t>>>2}function h(t,e,o,i){return 0===t?e&o|~e&i:2===t?e&o|e&i|o&i:e^o^i}o(s,i),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},s.prototype._update=function(t){for(var e,o=this._w,i=0|this._a,n=0|this._b,a=0|this._c,s=0|this._d,d=0|this._e,u=0;u<16;++u)o[u]=t.readInt32BE(4*u);for(;u<80;++u)o[u]=(e=o[u-3]^o[u-8]^o[u-14]^o[u-16])<<1|e>>>31;for(var p=0;p<80;++p){var f=~~(p/20),g=c(i)+h(f,n,a,s)+d+o[p]+r[f]|0;d=s,s=a,a=l(n),n=i,i=g}this._a=i+this._a|0,this._b=n+this._b|0,this._c=a+this._c|0,this._d=s+this._d|0,this._e=d+this._e|0},s.prototype._hash=function(){var t=n.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},e.exports=s},{"./hash":183,inherits:136,"safe-buffer":181}],187:[function(t,e){var o=t("inherits"),i=t("./sha256"),n=t("./hash"),r=t("safe-buffer").Buffer,a=new Array(64);function s(){this.init(),this._w=a,n.call(this,64,56)}o(s,i),s.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},s.prototype._hash=function(){var t=r.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},e.exports=s},{"./hash":183,"./sha256":188,inherits:136,"safe-buffer":181}],188:[function(t,e){var o=t("inherits"),i=t("./hash"),n=t("safe-buffer").Buffer,r=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function s(){this.init(),this._w=a,i.call(this,64,56)}function c(t,e,o){return o^t&(e^o)}function l(t,e,o){return t&e|o&(t|e)}function h(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function d(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function u(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}o(s,i),s.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},s.prototype._update=function(t){for(var e,o=this._w,i=0|this._a,n=0|this._b,a=0|this._c,s=0|this._d,p=0|this._e,f=0|this._f,g=0|this._g,m=0|this._h,v=0;v<16;++v)o[v]=t.readInt32BE(4*v);for(;v<64;++v)o[v]=0|(((e=o[v-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+o[v-7]+u(o[v-15])+o[v-16];for(var y=0;y<64;++y){var _=m+d(p)+c(p,f,g)+r[y]+o[y]|0,C=h(i)+l(i,n,a)|0;m=g,g=f,f=p,p=s+_|0,s=a,a=n,n=i,i=_+C|0}this._a=i+this._a|0,this._b=n+this._b|0,this._c=a+this._c|0,this._d=s+this._d|0,this._e=p+this._e|0,this._f=f+this._f|0,this._g=g+this._g|0,this._h=m+this._h|0},s.prototype._hash=function(){var t=n.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},e.exports=s},{"./hash":183,inherits:136,"safe-buffer":181}],189:[function(t,e){var o=t("inherits"),i=t("./sha512"),n=t("./hash"),r=t("safe-buffer").Buffer,a=new Array(160);function s(){this.init(),this._w=a,n.call(this,128,112)}o(s,i),s.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},s.prototype._hash=function(){var t=r.allocUnsafe(48);function e(e,o,i){t.writeInt32BE(e,i),t.writeInt32BE(o,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},e.exports=s},{"./hash":183,"./sha512":190,inherits:136,"safe-buffer":181}],190:[function(t,e){var o=t("inherits"),i=t("./hash"),n=t("safe-buffer").Buffer,r=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function s(){this.init(),this._w=a,i.call(this,128,112)}function c(t,e,o){return o^t&(e^o)}function l(t,e,o){return t&e|o&(t|e)}function h(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function d(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function u(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function p(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function f(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function g(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function m(t,e){return t>>>0<e>>>0?1:0}o(s,i),s.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},s.prototype._update=function(t){for(var e=this._w,o=0|this._ah,i=0|this._bh,n=0|this._ch,a=0|this._dh,s=0|this._eh,v=0|this._fh,y=0|this._gh,_=0|this._hh,C=0|this._al,b=0|this._bl,S=0|this._cl,w=0|this._dl,A=0|this._el,k=0|this._fl,P=0|this._gl,T=0|this._hl,B=0;B<32;B+=2)e[B]=t.readInt32BE(4*B),e[B+1]=t.readInt32BE(4*B+4);for(;B<160;B+=2){var M=e[B-30],I=e[B-30+1],R=u(M,I),L=p(I,M),D=f(M=e[B-4],I=e[B-4+1]),N=g(I,M),E=e[B-14],x=e[B-14+1],U=e[B-32],O=e[B-32+1],F=L+x|0,W=R+E+m(F,L)|0;W=(W=W+D+m(F=F+N|0,N)|0)+U+m(F=F+O|0,O)|0,e[B]=W,e[B+1]=F}for(var V=0;V<160;V+=2){W=e[V],F=e[V+1];var H=l(o,i,n),G=l(C,b,S),j=h(o,C),z=h(C,o),q=d(s,A),K=d(A,s),X=r[V],J=r[V+1],Y=c(s,v,y),Q=c(A,k,P),Z=T+K|0,$=_+q+m(Z,T)|0;$=($=($=$+Y+m(Z=Z+Q|0,Q)|0)+X+m(Z=Z+J|0,J)|0)+W+m(Z=Z+F|0,F)|0;var tt=z+G|0,et=j+H+m(tt,z)|0;_=y,T=P,y=v,P=k,v=s,k=A,s=a+$+m(A=w+Z|0,w)|0,a=n,w=S,n=i,S=b,i=o,b=C,o=$+et+m(C=Z+tt|0,Z)|0}this._al=this._al+C|0,this._bl=this._bl+b|0,this._cl=this._cl+S|0,this._dl=this._dl+w|0,this._el=this._el+A|0,this._fl=this._fl+k|0,this._gl=this._gl+P|0,this._hl=this._hl+T|0,this._ah=this._ah+o+m(this._al,C)|0,this._bh=this._bh+i+m(this._bl,b)|0,this._ch=this._ch+n+m(this._cl,S)|0,this._dh=this._dh+a+m(this._dl,w)|0,this._eh=this._eh+s+m(this._el,A)|0,this._fh=this._fh+v+m(this._fl,k)|0,this._gh=this._gh+y+m(this._gl,P)|0,this._hh=this._hh+_+m(this._hl,T)|0},s.prototype._hash=function(){var t=n.allocUnsafe(64);function e(e,o,i){t.writeInt32BE(e,i),t.writeInt32BE(o,i+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},e.exports=s},{"./hash":183,inherits:136,"safe-buffer":181}],191:[function(t,e){e.exports=i;var o=t("events").EventEmitter;function i(){o.call(this)}t("inherits")(i,o),i.Readable=t("readable-stream/readable.js"),i.Writable=t("readable-stream/writable.js"),i.Duplex=t("readable-stream/duplex.js"),i.Transform=t("readable-stream/transform.js"),i.PassThrough=t("readable-stream/passthrough.js"),i.Stream=i,i.prototype.pipe=function(t,e){var i=this;function n(e){t.writable&&!1===t.write(e)&&i.pause&&i.pause()}function r(){i.readable&&i.resume&&i.resume()}i.on("data",n),t.on("drain",r),t._isStdio||e&&!1===e.end||(i.on("end",s),i.on("close",c));var a=!1;function s(){a||(a=!0,t.end())}function c(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function l(t){if(h(),0===o.listenerCount(this,"error"))throw t}function h(){i.removeListener("data",n),t.removeListener("drain",r),i.removeListener("end",s),i.removeListener("close",c),i.removeListener("error",l),t.removeListener("error",l),i.removeListener("end",h),i.removeListener("close",h),t.removeListener("close",h)}return i.on("error",l),t.on("error",l),i.on("end",h),i.on("close",h),t.on("close",h),t.emit("pipe",i),t}},{events:103,inherits:136,"readable-stream/duplex.js":164,"readable-stream/passthrough.js":176,"readable-stream/readable.js":177,"readable-stream/transform.js":178,"readable-stream/writable.js":179}],192:[function(t,e,o){var i=t("buffer").Buffer,n=i.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(t){if(t&&!n(t))throw new Error("Unknown encoding: "+t)}var a=o.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),r(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=c;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=l;break;default:return void(this.write=s)}this.charBuffer=new i(6),this.charReceived=0,this.charLength=0};function s(t){return t.toString(this.encoding)}function c(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function l(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}a.prototype.write=function(t){for(var e="";this.charLength;){var o=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,o),this.charReceived+=o,this.charReceived<this.charLength)return"";if(t=t.slice(o,t.length),!((i=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var i,n=t.length;if(this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,n),n-=this.charReceived),n=(e+=t.toString(this.encoding,0,n)).length-1,(i=e.charCodeAt(n))>=55296&&i<=56319){var r=this.surrogateSize;return this.charLength+=r,this.charReceived+=r,this.charBuffer.copy(this.charBuffer,r,0,r),t.copy(this.charBuffer,0,0,r),e.substring(0,n)}return e},a.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var o=t[t.length-e];if(1==e&&o>>5==6){this.charLength=2;break}if(e<=2&&o>>4==14){this.charLength=3;break}if(e<=3&&o>>3==30){this.charLength=4;break}}this.charReceived=e},a.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var o=this.charReceived,i=this.charBuffer,n=this.encoding;e+=i.slice(0,o).toString(n)}return e}},{buffer:64}],193:[function(t,e){(function(t){function o(e){try{if(!t.localStorage)return!1}catch(i){return!1}var o=t.localStorage[e];return null!=o&&"true"===String(o).toLowerCase()}e.exports=function(t,e){if(o("noDeprecation"))return t;var i=!1;return function(){if(!i){if(o("throwDeprecation"))throw new Error(e);o("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return t.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],EHttp:[function(t,e,o){"use strict";var i;cc._RF.push(e,"99bf5QxiqFPX5iMoWx5Nv6A","EHttp"),o.HttpMethod=o.ContentType=void 0,(i=o.ContentType||(o.ContentType={})).text="text/plain;charset=UTF-8",i.json="application/json;charset=UTF-8",i.form="application/x-www-form-urlencoded;charset=UTF-8",function(t){t.get="GET",t.post="POST",t.put="PUT",t.delete="DELETE"}(o.HttpMethod||(o.HttpMethod={})),cc._RF.pop()},{}],EffectManager:[function(t,e,o){"use strict";var i;cc._RF.push(e,"154211B1+lFQZeUdqaGVt05","EffectManager"),o.Effect=void 0;var n,r=t("./EventConst"),a=t("./EventManager"),s=function(){function t(){this.poolMap={}}return t.prototype.showEffect=function(t,e,o){var n=this;void 0===t&&(t=50),void 0===o&&(o=0),t=t>50?50:t;var s="prefab/item/Power",c=i.power;1==o?(s="prefab/item/Key",c=i.key):2==o?(s="prefab/item/Coin",c=i.coin):3==o&&(s="prefab/item/DragonBall",c=i.metal);for(var l=0;l<t;++l)this.getNode(c,s).then(function(t){var i=e;if(i&&cc.isValid(i)){var s=cc.find("Canvas");t.parent=s;var l=cc.find("Canvas").getChildByName("Main Camera"),h=s.convertToNodeSpaceAR(l.parent.convertToWorldSpaceAR(l.position)),d=s.convertToNodeSpaceAR(i.parent.convertToWorldSpaceAR(i.position)),u=cc.v3(200*Math.random()-100+h.x,200*Math.random()-100+h.y,0);3==o&&(u=cc.v3(200*Math.random()-100+h.x,200*Math.random()-100+h.y-200,0)),t.position=u,t.stopAllActions(),t.opacity=0,t.zIndex=cc.macro.MAX_ZINDEX,setTimeout(function(){if(i&&cc.isValid(i)){var s=cc.moveTo(1,cc.v2(d.x,d.y));t.runAction(cc.sequence(cc.spawn(cc.fadeIn(.1),cc.moveBy(.1,0,15).easing(cc.easeBackIn())),cc.delayTime(.05),s.easing(cc.easeBackIn()),cc.callFunc(function(){var i=e;if(i&&cc.isValid(i)){n.putNode(c,t),i.stopAllActions();var s=i.scale;1==o?a.Event.emit(r.default.KEY_UPDATE):2==o?a.Event.emit(r.default.COIN_UPDATE):3==o?a.Event.emit(r.default.Metal_UPDATE):a.Event.emit(r.default.POWER_UPDATE),cc.tween(i).to(.3*s,{scale:s},{easing:cc.easing.backOut}).start()}else n.putNode(c,t)})))}},800*Math.random())}})},t.prototype.getNode=function(t,e){var o=this;return new Promise(function(i){var n=null,r=o.poolMap[t];r&&r.size()?((n=r.get()).active=!0,console.log("\u6570\u91cf\u5145\u8db3,\u4ece\u5bf9\u8c61\u6c60\u83b7\u53d6<"+n.name+">"),i(n)):cc.resources.load(""+e,function(t,o){if(t)return cc.error(t);cc.log("\u52a0\u8f7d\u9884\u5236\u6210\u529f",""+e),(n=cc.instantiate(o)).active=!0,console.log("\u6570\u91cf\u4e0d\u8db3,\u521b\u5efa<"+n.name+">"),i(n)})})},t.prototype.putNode=function(t,e){e.active=!1;var o=this.poolMap[t];if(o)o.put(e);else{var i=new cc.NodePool;this.poolMap[t]=i,i.put(e)}},t.prototype.clear=function(t){this.poolMap[t].clear(),delete this.poolMap[t]},t}();(n=i||(i={})).power="power",n.key="key",n.coin="coin",n.metal="Metal",o.Effect=new s,cc._RF.pop()},{"./EventConst":"EventConst","./EventManager":"EventManager"}],Encrypt:[function(t,e,o){"use strict";cc._RF.push(e,"055b3rPwb9JkbapXeyhaQ+e","Encrypt"),o.Encrypt=void 0;var i=t("./crypto-js"),n=function(){function t(){this.AesKey="NO8tU0nT0iLQzHzO",this.CBCIV="wt2y0aEzGcu0wTDE",this.CBCOptions={iv:i.enc.Utf8.parse(this.CBCIV),mode:i.mode.CBC,padding:i.pad.Pkcs7}}return t.prototype.encrypt=function(t){var e=i.enc.Utf8.parse(this.AesKey),o=i.enc.Utf8.parse(t);return i.AES.encrypt(o,e,this.CBCOptions).toString()},t.prototype.decrypt=function(t){var e=i.enc.Utf8.parse(this.AesKey),o=i.AES.decrypt(t,e,this.CBCOptions);return i.enc.Utf8.stringify(o).toString()},t}();o.Encrypt=n,cc._RF.pop()},{"./crypto-js":"crypto-js"}],EventConst:[function(t,e,o){"use strict";var i,n;cc._RF.push(e,"4441fcnv+1C6KZ6/1u1hjUu","EventConst"),(n=i||(i={}))[n.START_RECORD=0]="START_RECORD",n[n.STOP_RECORD=1]="STOP_RECORD",n[n.UPDATE_RECORD_TIME=2]="UPDATE_RECORD_TIME",n[n.SET_MUSIC_MUTE=3]="SET_MUSIC_MUTE",n[n.SET_EFFECT_MUTE=4]="SET_EFFECT_MUTE",n[n.ENTER_MAIN=5]="ENTER_MAIN",n[n.CLICK_BACK=6]="CLICK_BACK",n[n.POWER_UPDATE=7]="POWER_UPDATE",n[n.POWER_EFFECT=8]="POWER_EFFECT",n[n.KEY_UPDATE=9]="KEY_UPDATE",n[n.KEY_EFFECT=10]="KEY_EFFECT",n[n.COIN_UPDATE=11]="COIN_UPDATE",n[n.Metal_UPDATE=12]="Metal_UPDATE",n[n.COIN_EFFECT=13]="COIN_EFFECT",n[n.Metal_EFFECT=14]="Metal_EFFECT",n[n.CLICK_NEXT=15]="CLICK_NEXT",n[n.UPDATE_INFINITE_POWER=16]="UPDATE_INFINITE_POWER",n[n.UPDATE_IS_UNLOCK_TIP=17]="UPDATE_IS_UNLOCK_TIP",n[n.ENTER_ID=18]="ENTER_ID",n[n.TIP_BTN_ANIM=19]="TIP_BTN_ANIM",n[n.destroyInsert=20]="destroyInsert",n[n.enterNewMode=21]="enterNewMode",n[n.updateUnlockAllMode=22]="updateUnlockAllMode",n[n.extendTime=23]="extendTime",n[n.move5=24]="move5",n[n.upset=25]="upset",n[n.switchMove5State=26]="switchMove5State",n[n.boreBtn=27]="boreBtn",n[n.restartAnswer=28]="restartAnswer",n[n.restartAnswer2=29]="restartAnswer2",n[n.StopTimer=30]="StopTimer",n[n.restoreTime=31]="restoreTime",n[n.update_use_skin=32]="update_use_skin",n[n.hideWelfareBtn=33]="hideWelfareBtn",n[n.hideLimitWelfareBtn=34]="hideLimitWelfareBtn",n[n.EnterSidebar=35]="EnterSidebar",n[n.extendTime2=36]="extendTime2",n[n.checkFullAd=37]="checkFullAd",n[n.checkFullAd_result=38]="checkFullAd_result",o.default=i,cc._RF.pop()},{}],EventManager:[function(t,e,o){"use strict";cc._RF.push(e,"8a5540f/tdEw7JcMTMEOk+g","EventManager"),o.Event=void 0;var i=function(){function t(){this.prefix="event_"}return t.prototype.on=function(t,e,o){var i=""+this.prefix+t;cc.game.on(i,e,o)},t.prototype.off=function(t,e,o){var i=""+this.prefix+t;cc.game.off(i,e,o)},t.prototype.emit=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var i=""+this.prefix+t;cc.game.emit(i,e)},t}();o.Event=new i,cc._RF.pop()},{}],First:[function(t,e,o){"use strict";cc._RF.push(e,"9da12/D7xhGfokru9pCHdN4","First");var i=cc._decorator,n=i.ccclass,r=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.encrXToken=null,e}return __extends(e,t),e.prototype.onLoad=function(){console.log("\u9996\u573a\u666f"),this.loadSubpackage()},e.prototype.loadSubpackage=function(){var t=this,e=cc.sys,o=e.platform;o==e.IPHONE||o==e.IPAD?this.getDefaultLanguage().then(function(e){if(e){var o=cc.sys.localStorage.getItem("isCheckIP");if(null==o||null==o||""==o){var i=jsb.reflection.callStaticMethod("AppController","gainIOSBMSVersion");console.log("\u83b7\u5f97\u7248\u672c\u53f7",i),console.time("test time"),t.getIPAbroad("zqdn2ios","ios",i).then(function(t){console.log(t),console.timeEnd("test time"),cc.director.loadScene("App")})}else 0==Number(o)?(t.en(),window.haiwai=!0):(t.zh(),window.haiwai=!1),cc.director.loadScene("App")}else t.zh(),window.haiwai=!1,cc.director.loadScene("App")}):this.loadSubs([],function(){cc.director.loadScene("App")},function(){})},e.prototype.getDefaultLanguage=function(){var t=this,e=jsb.reflection.callStaticMethod("AppController","gainIOSBMSVersion");return new Promise(function(o){return __awaiter(t,void 0,void 0,function(){var t,i,n,r;return __generator(this,function(a){switch(a.label){case 0:return i=cc.sys,n=i.platform,t=n==i.IPHONE||n==i.IPAD?"https://bms.yarkgame.com/":"https://game.zuiqiangyingyu.net/",[4,this.request("GET",t+"common/config/info",{app_name:"zqdn2ios",version:e})];case 1:if(r=a.sent(),console.log("[BMS] \u53c2\u6570",r),r){window.ChinaConfig=r;try{"zh"==JSON.parse(r).data.language?o(!1):o(!0)}catch(s){o(!1)}}else o(!1);return[2]}})})})},e.prototype.getIPAbroad=function(t,e,o){var i=this;return new Promise(function(n){return __awaiter(i,void 0,void 0,function(){var i,r;return __generator(this,function(a){switch(a.label){case 0:return[4,this.request("GET","https://bms.yarkgame.com/common/is/v2/ml",{app_name:t,channel:e,version:o})];case 1:if(i=a.sent(),console.timeLog("test time"),i)try{r=(r=JSON.parse(i)).data,console.log("getIPAbroad",r.is_ml),0==r.is_ml?(cc.sys.localStorage.setItem("isCheckIP",0),this.en(),console.log("\u6d77\u5916"),window.haiwai=!0):(cc.sys.localStorage.setItem("isCheckIP",1),this.zh(),console.log("\u5927\u9646"),window.haiwai=!1),n()}catch(s){this.zh(),n()}else n();return[2]}})})})},e.prototype.en=function(){cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||jsb.reflection.callStaticMethod("AppController","gainCurrentIp:","en")},e.prototype.zh=function(){cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||jsb.reflection.callStaticMethod("AppController","gainCurrentIp:","zh")},e.prototype.request=function(t,e,o,i){switch(t){case"GET":return this.get(e,o,i)}},e.prototype.get=function(t,e,o){var i=this;return new Promise(function(n){for(var r in t+="?",e)t+=r+"="+e[r]+"&";var a=new XMLHttpRequest;a.onreadystatechange=function(){4==a.readyState&&(a.status>=200&&a.status<400?n(a.response):(i.zh(),n(null)))},a.open("GET",t),o&&a.setRequestHeader("x-token",i.encrXToken),a.send(),a.onerror=function(){i.zh(),n(null)},a.ontimeout=function(){i.zh(),n(null),o&&console.log("\u8d85\u65f6\u5931\u8d25")}})},e.prototype.loadSub=function(t){return new Promise(function(e,o){cc.assetManager.loadBundle(t,function(i){if(null!==i)return console.log("[ResMgr]:Load AssetsBundle Error: "+t),o();console.log("[ResMgr]:Load AssetsBundle Success: "+t),console.log("\u52a0\u8f7d\u5b8c\u6210",t),e(null)})})},e.prototype.loadSubs=function(t,e,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){switch(i.label){case 0:i.trys.push([0,4,,5]),i.label=1;case 1:return t.length?[4,this.loadSub(t.shift())]:[3,3];case 2:return i.sent(),[3,1];case 3:return e&&e(),[3,5];case 4:return i.sent(),o?[2]:[3,5];case 5:return[2]}})})},__decorate([n],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],FrameAnim:[function(t,e,o){"use strict";cc._RF.push(e,"4aa26eLfYVJpKUtxwSFloMK","FrameAnim");var i=cc._decorator,n=i.ccclass,r=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spriteFrames=[],e.duration=.1,e.loop=!1,e.playOnload=!1,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this.node.getComponent(cc.Sprite);t||(t=this.node.addComponent(cc.Sprite)),this.sprite=t,this.isPlaying=!1,this.playTime=0,this.isLoop=!1,this.endFunc=null,this.spriteFrames.length>0&&(this.sprite.spriteFrame=this.spriteFrames[0]),this.playOnload&&(this.loop?this.playLoop():this.playOnce(null))},e.prototype.playOnce=function(t){this.playTime=0,this.isPlaying=!0,this.isLoop=!1,this.endFunc=t},e.prototype.playLoop=function(){this.playTime=0,this.isPlaying=!0,this.isLoop=!0},e.prototype.stopAnim=function(){this.playTime=0,this.isPlaying=!1,this.isLoop=!1},e.prototype.resetFrame=function(){this.spriteFrames.length>0&&(this.sprite.spriteFrame=this.spriteFrames[0])},e.prototype.update=function(t){if(!1!==this.isPlaying){this.playTime+=t;var e=Math.floor(this.playTime/this.duration);if(!1===this.isLoop){if(e>=this.spriteFrames.length)return this.sprite.spriteFrame=this.spriteFrames[this.spriteFrames.length-1],this.isPlaying=!1,this.playTime=0,void(this.endFunc&&this.endFunc());this.sprite.spriteFrame=this.spriteFrames[e]}else{for(;e>=this.spriteFrames.length;)e-=this.spriteFrames.length,this.playTime-=this.duration*this.spriteFrames.length;this.sprite.spriteFrame=this.spriteFrames[e]}}},__decorate([r([cc.SpriteFrame])],e.prototype,"spriteFrames",void 0),__decorate([r],e.prototype,"duration",void 0),__decorate([r],e.prototype,"loop",void 0),__decorate([r],e.prototype,"playOnload",void 0),__decorate([n],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],GameNamespace:[function(t,e,o){"use strict";var i,n;cc._RF.push(e,"ffe69ru/7JH5byOg3hwtb9X","GameNamespace"),o.game=void 0,(n=i=o.game||(o.game={})).log=console.log,n.warn=console.warn,n.error=console.error,n.userID=null,n.currentLevel=1,n.boxAtlas=null,n.drinkAtlas=null,n.plateAtlas=null,n.totalAmount=null,n.remainingAmount=null,n.dragonMoving=!0,n.canUseProps=!0,n.random=function(t,e){return void 0===e&&(e=0),(t-e)*Math.random()+e},n.randomInt=function(t,e){return void 0===e&&(e=0),~~((t-e)*Math.random()+e)},window.game=i,cc._RF.pop()},{}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"f72228mH5pHwL/ctyeXoyfH","Game");var i=t("./BaseUI"),n=t("./AudioConst"),r=t("./EventConst"),a=t("./PlatformConst"),s=t("./PopupConst"),c=t("./SceneConst"),l=t("./UserConst"),h=t("./AudioManager"),d=t("./BmsManager"),u=t("./EventManager"),p=t("./PlatformManager"),f=t("./PopupManager"),g=t("./ResManager"),m=t("./SceneManager"),v=t("./UserManager"),y=t("./Utils"),_=t("./ConfigUtils"),C=t("./XMADUtils"),b=t("./LanguageManager"),S=t("./ScreenshotUtils"),w=t("./TipManager"),A=t("./ConfigManager"),k=t("./ConfigConst"),P=t("./OPPOAndroidAdUtils"),T=t("./OPPOMiniADUtils"),B=t("./ShuShuConst"),M=t("./TaskManager"),I=t("./MemoryStorageManager"),R=t("./MemoryStorageConst"),L=t("./AdjustEventSystem"),D=t("./LocalStorageManager"),N=t("./LocalStorageConst"),E=t("./ChallengeSystem"),x=t("./PoolUtils"),U=t("./AssetManager"),O=t("./Tools"),F=cc._decorator,W=F.ccclass,V=F.property,H=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coloringSpinePrefab=null,e._data=null,e.level=null,e.levelID=null,e.bms=null,e.flag=null,e.clickAmountNode=null,e.isUnlockTip=!1,e.currentLevel=1,e.currentMode=1,e.themeType=0,e.currentTopLevel=1,e.fullAdCounter=0,e.clickAmount=0,e.currentPrefabAsset=[],e.time=0,e.isHandle=!1,e.modeLevelTime=[180,180,180,180,180,180,300,180,180,180],e.restartTimes=0,e.isCheckTipTextCD=!1,e.allHoleCoverAnim=!1,e.node_hammer=null,e.metalAmount=0,e.developID=-1,e.recordState=0,e.isLoadFail=!1,e.isTimeEnd=!1,e.currentLevelProgress=1,e.currentLevelTotalTime=180,e.currentLevelTime=0,e.isLoadingScene=!1,e.isBack=!1,e}return __extends(e,t),e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this),this.modeLevelTime=new Array(100).fill(180),this.modeLevelTime[6]=300,this.modeLevelTime[21]=300,this.modeLevelTime[23]=300,this.modeLevelTime[77]=90,this.modeLevelTime[81]=120,this.modeLevelTime[82]=120,this.modeLevelTime[90]=300;var o=d.BMS.getKey("screwTime");if(o>=900&&(o=900),o<=180&&(o=180),0==o?(this.modeLevelTime[0]=18e16,this.dict.time2.opacity=0):this.modeLevelTime[0]=o,window.coloringSpinePrefab=this.coloringSpinePrefab,this.level=this.dict.level,this.levelID=this.dict.levelID,this.flag=this.dict.flag,this.bms=this.dict.bms,this.clickAmountNode=this.dict.clickAmountNode,this.addBtnOn("homeBtn",this.clickHome,this),this.addBtnOn("backBtn",this.clickBack,this),this.addBtnOn("restartBtn",this.clickRestart2,this),this.addBtnOn("developBtn",this.developBtn,this),this.addBtnOn("orderBtn",this.orderBtn,this),this.addBtnOn("screenshotBtn",this.screenshotBtn,this),this.addBtnOn("downloadBtn",this.downloadBtn,this),this.addBtnOn("collectRoot",this.collectRoot,this),this.addBtnOn("limitWelfareBtn",this.limitWelfareBtn,this),this.addBtnOn("mapBtn",this.mapBtn,this),this.clickAmountNode.on(cc.Node.EventType.TOUCH_START,function(t){if(p.Platform.is(a.EPlatform.XIAOMI_ANDROID))e.clickAmount+=1,console.log("\u70b9\u51fb\u6b21\u6570",e.clickAmount),0!=(o=d.BMS.getKey("fullClickNum"))&&o==e.clickAmount&&(C.XMAD.showInterstitialFeed_must(),e.clickAmount=0);else if(p.Platform.is(a.EPlatform.OPPO_ANDROID))e.clickAmount+=1,console.log("\u70b9\u51fb\u6b21\u6570",e.clickAmount),0!=(o=d.BMS.getKey("fullClickNum"))&&o==e.clickAmount&&(P.OPPOAndroidAd.showInterstitialFeed_must(),e.clickAmount=0);else if(p.Platform.is(a.EPlatform.OPPO)){var o;e.clickAmount+=1,console.log("\u70b9\u51fb\u6b21\u6570",e.clickAmount),0!=(o=d.BMS.getKey("fullClickNum"))&&o==e.clickAmount&&(T.OPPOMiniAD.showInterstitialFeed_must(),e.clickAmount=0)}e.listenHandle(),cc.game.emit("clickAmountNode");var i=t.getLocation(),n=e.dict.clickSpine.parent.convertToNodeSpaceAR(i);e.dict.clickSpine.position=n,e.dict.clickSpine.active=!0,e.dict.clickSpine.getComponent(sp.Skeleton).setAnimation(0,"animation",!1)},this),this.clickAmountNode._touchListener&&this.clickAmountNode._touchListener.setSwallowTouches(!1),v.User.setTempData("isNeedInsert",!0),this.dict.version.getComponent(cc.Label).string="v"+p.Platform.getConfig().version,this.dict.limitWelfareBtn.active=!1,window.tt&&["Douyin","douyin_lite","live_stream","aweme_hotsoon"].some(function(t){return t==window.tt.getSystemInfoSync().appName})){var i=v.User.get(l.UserData.EnterSidebar)||0;console.log("\u5224\u65ad\u6309\u94ae",i,2!=i),2!=i?(console.log("\u663e\u793a\u6309\u94ae"),this.dict.limitWelfareBtn.active=!0):(console.log("\u4e0d\u663e\u793a\u6309\u94ae"),this.dict.limitWelfareBtn.active=!1)}p.Platform.is(a.EPlatform.WEB)&&(this.dict.limitWelfareBtn.active=!0),this.initView(),this.schedule(function(){e.fullAdCounter++},1),this.listenHandle(),h.Audio.playMusic(n.AudioConst.BGM_MAIN),p.Platform.is(a.EPlatform.WX)&&console.log("\u8c03\u7528\u5e7f\u544a"),p.Platform.is(a.EPlatform.WEB)&&(this.dict.hideUIBtn.active=!0),M.default.init(),0==this.currentMode&&(p.Platform.getConfig().hasPurchase?this.dict.universalCard.active=!0:this.dict.universalCard.active=!1)},e.prototype.updateSkin=function(){var t=v.User.get(l.UserData.skinList)||{0:[0],1:[0],2:[9],3:[0],4:[0],5:[0]};v.User.set(l.UserData.skinList,t);var e=v.User.get(l.UserData.useSkinIDList)||{0:0,1:0,2:9,3:0,4:0,5:0};v.User.set(l.UserData.useSkinIDList,e);var o=v.User.get(l.UserData.getLockSkinList)||{0:[],1:[],2:[],3:[],4:[],5:[]};v.User.set(l.UserData.getLockSkinList,o)},e.prototype.hideUIBtn=function(){this.dict.backBtn.opacity?(this.dict.backBtn.opacity=0,this.dict.bottomBar0.opacity=0,this.dict.hideUIBtn.opacity=0,this.dict.shopBtn.opacity=0):(this.dict.backBtn.opacity=255,this.dict.bottomBar0.opacity=255,this.dict.hideUIBtn.opacity=255,this.dict.shopBtn.opacity=255)},e.prototype.onDestroy=function(){p.Platform.stopRecordCap(),p.Platform.hideCustomAd1(),p.Platform.hideCustomAd2();var t=v.User.getTempData("levelTime"),e=((new Date).getTime()-t)/1e3;cc.game.emit("gamelog_Thinking",B.ShuShuConst.Level_End,{EndType:2,Duration:e,lv:v.User.getTempData(l.TempData.CURRENT_LEVEL_ID),mode:v.User.getTempData(l.TempData.CURRENT_MODE)})},e.prototype.listenHandle=function(){u.Event.emit(r.default.TIP_BTN_ANIM,!1,"test"),this.unschedule(this.handleEvent),this.scheduleOnce(this.handleEvent,8)},e.prototype.handleEvent=function(){console.log("\u6d4b\u8bd5\u65e0\u64cd\u4f5c"),v.User.get(l.TempData.isUnlockTip)||u.Event.emit(r.default.TIP_BTN_ANIM,!0,"test")},e.prototype.restartBtn_1=function(){this.checkFullAd_noResult(),this.currentLevelProgress=1,this.initView(!0)},e.prototype.clickRestart2=function(t){var e=v.User.getTempData(l.TempData.CURRENT_LEVEL),o=v.User.getTempData(l.TempData.CURRENT_MODE);cc.game.emit("gamelog","Level_Lose_"+o+"_"+e),this.restartTimes+=1,console.log("\u91cd\u7f6e\u6b21\u6570",this.restartTimes);var i=d.BMS.getKey("FriendHelp"),n=v.User.getTempData(l.TempData.cryHelpList)||[],a=v.User.get(l.UserData.cryHelpTimes)||0;console.log("\u68c0\u6d4b",this.restartTimes,i),console.log("\u68c0\u6d4b2",a),console.log("\u68c0\u6d4b3",n,e),this.restartTimes>=i&&a<2&&-1==n.indexOf(this.currentLevel)?(n.push(this.currentLevel),v.User.setTempData(l.TempData.cryHelpList,n),v.User.set(l.UserData.cryHelpTimes,a+1)):this.restartTimes>=i&&p.Platform.showInsert(),this.restartTimes>=3&&(u.Event.emit(r.default.TIP_BTN_ANIM,!0),this.restartTimes=0),this.clickRestart(t)},e.prototype.onRestartReset=function(){this.checkFullAd_noResult(),this.currentLevelProgress=1,this.clickRestart2()},e.prototype.onEnable=function(){p.Platform.is(a.EPlatform.OPPO_ANDROID)?P.OPPOAndroidAd.showBannerFeed():p.Platform.is(a.EPlatform.OPPO),this.initEvent(),u.Event.on(r.default.hideLimitWelfareBtn,this.hideLimitWelfareBtn,this)},e.prototype.onDisable=function(){p.Platform.is(a.EPlatform.OPPO_ANDROID)?p.Platform.hideNativeAds():p.Platform.is(a.EPlatform.OPPO),this.clearEvent(),u.Event.off(r.default.hideLimitWelfareBtn,this.hideLimitWelfareBtn,this)},e.prototype.initEvent=function(){cc.game.on("game_success1",this.startSuc,this),cc.game.on("game_success2",this.suc,this),cc.game.on("onRestartBtn",this.clickRestart2,this),cc.game.on("restartBtn_1",this.restartBtn_1,this),cc.game.on("onRestartReset",this.onRestartReset,this),cc.game.on("isTimeEnd",this.isTimeEndFun,this),u.Event.on(r.default.CLICK_NEXT,this.clickNext,this),u.Event.on(r.default.destroyInsert,this.destroyInsert,this),u.Event.on(r.default.enterNewMode,this.enterNewMode,this),u.Event.on(r.default.extendTime,this.extendTime,this),u.Event.on(r.default.move5,this.move5,this),u.Event.on(r.default.upset,this.upset,this),u.Event.on(r.default.boreBtn,this.boreBtn,this),cc.game.on("woodRemove",this.woodRemove,this),u.Event.on(r.default.StopTimer,this.stopTimer,this),u.Event.on(r.default.restoreTime,this.restoreTime,this),cc.game.on("adsVideoFail",this.adsVideoFail,this),cc.game.on("insetVideoSuccess",this.insetVideoSuccess,this),cc.game.on("insetVideoAsk",this.insetVideoAsk,this),cc.game.on("adSkipped",this.adSkipped,this),cc.game.on("hammerBtn",this.hammerBtn,this),cc.game.on("shakeBtn",this.shakeBtn,this),cc.game.on("undoBtn",this.undoBtn,this),cc.game.on("wingBtn",this.wingBtn,this),cc.game.on("highlightBtn",this.highlightBtn,this),cc.game.on("addStepBtn",this.addStepBtn,this),cc.game.on("moderateBtn",this.moderateBtn,this),cc.game.on("rotateBtn",this.rotateBtn,this),cc.game.on("screwBoxBtn",this.screwBoxBtn,this),cc.game.on("func_checkDelNailCb",this.func_checkDelNailCb,this),cc.game.on("allHoleCover",this.allHoleCover,this),cc.game.on("chehuiBtn_anim",this.chehuiBtn_anim,this),cc.game.on("removeScrewBtn",this.removeScrewBtn,this),cc.game.on("listenHandle",this.listenHandle,this),cc.game.on("hideGetCard",this.hideGetCard,this),cc.game.on("allPersonAmount",this.allPersonAmount,this),cc.game.on("checkTipText",this.checkTipText,this),cc.game.on("f29086_addCoin",this.f29086_addCoin,this)},e.prototype.clearEvent=function(){cc.game.off("game_success1",this.startSuc,this),cc.game.off("game_success2",this.suc,this),cc.game.off("onRestartBtn",this.clickRestart2,this),cc.game.off("onRestartReset",this.onRestartReset,this),cc.game.off("isTimeEnd",this.isTimeEndFun,this),u.Event.off(r.default.CLICK_NEXT,this.clickNext,this),u.Event.off(r.default.destroyInsert,this.destroyInsert,this),u.Event.off(r.default.enterNewMode,this.enterNewMode,this),u.Event.off(r.default.extendTime,this.extendTime,this),u.Event.off(r.default.move5,this.move5,this),u.Event.off(r.default.upset,this.upset,this),u.Event.off(r.default.boreBtn,this.boreBtn,this),cc.game.off("woodRemove",this.woodRemove,this),u.Event.off(r.default.StopTimer,this.stopTimer,this),u.Event.off(r.default.restoreTime,this.restoreTime,this),cc.game.off("adsVideoFail",this.adsVideoFail,this),cc.game.off("insetVideoSuccess",this.insetVideoSuccess,this),cc.game.off("insetVideoAsk",this.insetVideoAsk,this),cc.game.off("adSkipped",this.adSkipped,this),cc.game.off("hammerBtn",this.hammerBtn,this),cc.game.off("shakeBtn",this.shakeBtn,this),cc.game.off("undoBtn",this.undoBtn,this),cc.game.off("wingBtn",this.wingBtn,this),cc.game.off("highlightBtn",this.highlightBtn,this),cc.game.off("addStepBtn",this.addStepBtn,this),cc.game.off("moderateBtn",this.moderateBtn,this),cc.game.off("rotateBtn",this.rotateBtn,this),cc.game.off("screwBoxBtn",this.screwBoxBtn,this),cc.game.off("func_checkDelNailCb",this.func_checkDelNailCb,this),cc.game.off("allHoleCover",this.allHoleCover,this),cc.game.off("chehuiBtn_anim",this.chehuiBtn_anim,this),cc.game.off("removeScrewBtn",this.removeScrewBtn,this),cc.game.off("listenHandle",this.listenHandle,this),cc.game.off("hideGetCard",this.hideGetCard,this),cc.game.off("allPersonAmount",this.allPersonAmount,this),cc.game.off("checkTipText",this.checkTipText,this),cc.game.off("f29086_addCoin",this.f29086_addCoin,this)},e.prototype.f29086_addCoin=function(){},e.prototype.allPersonAmount=function(t,e){if(this.currentLevel>1){var o=I.default.get(R.default.CollectGoodsID),i=D.default.get(N.default.Collect)||{0:[]};!o||i[0].includes(o)?this.dict.collectRoot.active=!1:0==this.currentMode&&(this.dict.collectRoot.active=!0,this.dict.collectRate.getComponent(cc.Label).string=Math.round((e-t)/e*100)+"%",this.dict.collectIcon2.getComponent(cc.Sprite).fillRange=(e-t)/e)}else this.dict.collectRoot.active=!1;this.dict.levelProText.getComponent(cc.Label).string=""+t,this.dict.levelPro.getComponent(cc.Sprite).fillRange=t/e,0==t&&(this.dict.levelProRoot.active=!1)},e.prototype.checkTipText=function(t){var e=this;if(0==t){if(this.isCheckTipTextCD)return;this.isCheckTipTextCD=!0,this.dict.tipText.scale=0,this.dict.tipText.active=!0,this.dict.tipText.opacity=255,cc.tween(this.dict.tipText).to(.4,{scale:1},{easing:"backOut"}).delay(1.5).to(.3,{opacity:0}).start(),this.scheduleOnce(function(){e.isCheckTipTextCD=!1},60)}else this.dict.tipText2.scale=0,this.dict.tipText2.active=!0,this.dict.tipText2.opacity=255,cc.tween(this.dict.tipText2).to(.4,{scale:1},{easing:"backOut"}).delay(1.5).to(.3,{opacity:0}).start()},e.prototype.removeScrewBtn=function(){this.dict.removeScrewBtn.stopAllActions(),this.dict.removeScrewBtn.scale=1,this.allHoleCoverAnim=!1},e.prototype.chehuiBtn_anim=function(){this.allHoleCoverAnim=!1},e.prototype.hideGetCard=function(){this.dict.noFirstAllHole.active=!1,u.Event.emit(r.default.restoreTime)},e.prototype.allHoleCover=function(){var t=this;this.allHoleCoverAnim||(this.allHoleCoverAnim=!0,console.log("allHoleCover-------"),!D.default.get(N.default.NoFirstAllHole)&&p.Platform.getConfig().hasPurchase&&(D.default.set(N.default.NoFirstAllHole,1),this.dict.noFirstAllHole.active=!0,w.Tip.show("\u5f88\u9057\u61be\uff0c\u6ca1\u6709\u53ef\u64cd\u4f5c\u6b65\u9aa4\u4e86\u3002"),u.Event.emit(r.default.StopTimer),this.scheduleOnce(function(){var t=(D.default.get(N.default.cardAmount)||0)+1;D.default.set(N.default.cardAmount,t),I.default.set(R.default.reward,[["card",1]])},1.5)),this.dict.removeScrewBtn.active&&(this.dict.removeScrewBtn.stopAllActions(),this.dict.removeScrewBtn.scale=1,cc.tween(this.dict.removeScrewBtn).to(.25,{scale:1.1}).to(.25,{scale:1}).union().repeatForever().start(),this.scheduleOnce(function(){t.dict.removeScrewBtn.stopAllActions(),t.dict.removeScrewBtn.scale=1,t.allHoleCoverAnim=!1},5)))},e.prototype.move5=function(){this.level.children[0]._components[0].addAutoMoveNumber()},e.prototype.upset=function(){this.level.children[0]._components[0].shuffle&&this.level.children[0]._components[0].shuffle()},e.prototype.boreBtn=function(){this.dict.boreBtn.active=!1,this.level.children[0]._components[0].checkAdLock&&this.level.children[0]._components[0].checkAdLock()},e.prototype.hammerBtn=function(){var t=this.level.children[0]._components[0];t.isCanUseHammer=!0,t.node_hammer.getChildByName("img").position=cc.v3(),t.node_hammer.active=!0;var e=t.node_hammer.getChildByName("img");cc.tween(e).repeatForever(cc.tween().to(.2,{scale:1.2}).to(.1,{scale:1})).start()},e.prototype.getIsOpen=function(){return 1},e.prototype._initOutLine=function(){},e.prototype.shakeBtn=function(){this.level.children[0]._components[0].shakeAnimation&&this.level.children[0]._components[0].shakeAnimation(0)},e.prototype.undoBtn=function(){this.level.children[0]._components[0].func_withdraw&&this.level.children[0]._components[0].func_withdraw()},e.prototype.wingBtn=function(){this.level.children[0]._components[0].func_fly&&this.level.children[0]._components[0].func_fly()},e.prototype.highlightBtn=function(){this.level.children[0]._components[0].func_highlight&&this.level.children[0]._components[0].func_highlight()},e.prototype.addStepBtn=function(){this.level.children[0]._components[0].func_addStep&&this.level.children[0]._components[0].func_addStep()},e.prototype.moderateBtn=function(){this.level.children[0]._components[0].setLeftScrollSpeed&&this.level.children[0]._components[0].setLeftScrollSpeed(30)},e.prototype.rotateBtn=function(){this.level.children[0]._components[1].turn&&this.level.children[0]._components[1].turn()},e.prototype.screwBoxBtn=function(){this.dict.bottomBar0.active=!1,this.dict.topLeftBar.active=!1,this.dict.number.active=!1,this.stopTimer(),this.level.children[0]._components[0].func_delNail&&this.level.children[0]._components[0].func_delNail()},e.prototype.func_checkDelNailCb=function(){this.dict.bottomBar0.active=!0,this.dict.topLeftBar.active=!0,this.dict.number.active=!0,this.restoreTime()},e.prototype.extendTime=function(){this.currentLevelTime=60,this.dict.time2.active=!0,this.dict.time2.getComponent(cc.Label).string=""+this.secondFormat(this.currentLevelTime),this.schedule(this.timerFun,1)},e.prototype.stopTimer=function(t){void 0===t&&(t=!1),this.dict.time2.active&&(console.log("\u6682\u505c\u65f6\u95f4"),this.unschedule(this.timerFun))},e.prototype.restoreTime=function(){this.dict.time2.active&&(this.unschedule(this.timerFun),this.schedule(this.timerFun,1))},e.prototype.adsVideoFail=function(){cc.game.emit("gamelog","level_interfail_"+this.currentMode+"_"+this.currentLevel)},e.prototype.adSkipped=function(){},e.prototype.insetVideoSuccess=function(){cc.game.emit("gamelog","level_interplay_"+this.currentMode+"_"+this.currentLevel)},e.prototype.insetVideoAsk=function(){cc.game.emit("gamelog","level_inter_"+this.currentMode+"_"+this.currentLevel)},e.prototype.destroyInsert=function(){p.Platform.destroyInsert()},e.prototype.clickNext=function(){var t=this;v.User.getTempData(l.TempData.NEXT_MODE_ID),1!=this.themeType?_.ConfigUtils.getDataByID(this.currentMode,function(e){t.currentTopLevel=e.amount,t.currentLevel+1>t.currentTopLevel?(console.log("\u6700\u540e\u4e00\u5173"),t.initLevelOrder()):(v.User.setTempData(l.TempData.CURRENT_LEVEL,t.currentLevel+1),u.Event.emit(r.default.UPDATE_IS_UNLOCK_TIP),t.initView()),(p.Platform.is(a.EPlatform.ANDROID_GOOGLE)||p.Platform.is(a.EPlatform.IOS_HAIWAI))&&(v.User.getTempData("isNeedInsert")?t.checkFullAd():console.log("\u4e0d\u9700\u8981\u5dee\u8bc4"),v.User.setTempData("isNeedInsert",!0))}):_.ConfigUtils.getDataByID_99(this.currentMode,function(e){t.currentTopLevel=e.amount,t.currentLevel+1>t.currentTopLevel?(console.log("\u6700\u540e\u4e00\u5173"),v.User.setTempData(l.TempData.CURRENT_MODE,t.currentMode),v.User.setTempData(l.TempData.CURRENT_LEVEL,1),u.Event.emit(r.default.UPDATE_IS_UNLOCK_TIP),t.initView()):(v.User.setTempData(l.TempData.CURRENT_LEVEL,t.currentLevel+1),u.Event.emit(r.default.UPDATE_IS_UNLOCK_TIP),t.initView()),(p.Platform.is(a.EPlatform.ANDROID_GOOGLE)||p.Platform.is(a.EPlatform.IOS_HAIWAI))&&(v.User.getTempData("isNeedInsert")||p.Platform.getNoADState()?t.checkFullAd():console.log("\u4e0d\u9700\u8981\u5dee\u8bc4"),v.User.setTempData("isNeedInsert",!0))})},e.prototype.initLevelOrder=function(){var t=this;if(p.Platform.is(a.EPlatform.WEB))this.updateCurrentModeLevel();else{v.User.get(l.UserData.mode0LevelList_stage1ID),v.User.get(l.UserData.mode0LevelList_stage2ID),v.User.get(l.UserData.mode1LevelList_stage1ID),v.User.get(l.UserData.mode1LevelList_stage2ID);var e=[],o=[],i=[],n=[],r=[],s=[];0==this.currentMode?A.Config.get(k.ConfigConst.THEME+0+p.Platform.getConfig().configSuffix).then(function(i){for(var n=0;n<i.length;n++){var r=i[n];e.push(r.stage1ID),o.push(r.stage2ID)}e.sort(function(){return.5-Math.random()}),o.sort(function(){return.5-Math.random()}),v.User.set(l.UserData.mode0LevelList_stage1ID,e),v.User.set(l.UserData.mode0LevelList_stage2ID,o),console.log("\u6253\u87ba\u4e1d",e,o),t.updateCurrentModeLevel()}):1==this.currentMode?A.Config.get(k.ConfigConst.THEME+1).then(function(e){for(var o=0;o<e.length;o++){var r=e[o];i.push(r.stage1ID),n.push(r.stage2ID)}i.sort(function(){return.5-Math.random()}),n.sort(function(){return.5-Math.random()}),v.User.set(l.UserData.mode1LevelList_stage1ID,i),v.User.set(l.UserData.mode1LevelList_stage2ID,n),console.log("\u6e05\u7406",i,n),t.updateCurrentModeLevel()}):2==this.currentMode?A.Config.get(k.ConfigConst.THEME+2).then(function(e){for(var o=0;o<e.length;o++){var i=e[o];r.push(i.stage1ID),s.push(i.stage2ID)}r.sort(function(){return.5-Math.random()}),s.sort(function(){return.5-Math.random()}),v.User.set(l.UserData.mode2LevelList_stage1ID,r),v.User.set(l.UserData.mode2LevelList_stage2ID,s),console.log("\u6d88\u9664\u7bad\u5934",r,s),t.updateCurrentModeLevel()}):this.handleModeByID(this.currentMode)}},e.prototype.handleModeByID=function(t){var e=this,o=[],i=[];A.Config.get(k.ConfigConst.THEME+t).then(function(n){for(var r=0;r<n.length;r++){var a=n[r];o.push(a.stage1ID),i.push(a.stage2ID)}o.sort(function(){return.5-Math.random()}),i.sort(function(){return.5-Math.random()}),v.User.set(l.UserData["mode"+t+"LevelList_stage1ID"],o),v.User.set(l.UserData["mode"+t+"LevelList_stage2ID"],i),console.log("\u6a21\u5f0f",t,o,i),e.updateCurrentModeLevel()})},e.prototype.updateCurrentModeLevel=function(){var t=v.User.get(l.UserData.LEVEL_LIST)||{},e=v.User.get("levelListLoopTimes")||{};e[this.currentMode]?e[this.currentMode]+=1:e[this.currentMode]=1,v.User.set("levelListLoopTimes",e),t[this.currentMode]=1,v.User.setTempData(l.TempData.CURRENT_MODE,this.currentMode),v.User.setTempData(l.TempData.CURRENT_LEVEL,1),v.User.set(l.UserData.LEVEL_LIST,t),u.Event.emit(r.default.UPDATE_IS_UNLOCK_TIP),this.initView()},e.prototype.enterNewMode=function(){u.Event.emit(r.default.UPDATE_IS_UNLOCK_TIP),this.initView()},e.prototype.startSuc=function(){this.screenshot()},e.prototype.screenshot=function(){var t=this;this.scheduleOnce(function(){cc.isValid(t.dict.level)&&t.restartNodeShot()},.1)},e.prototype.restartNodeShot=function(){console.log("\u622a\u56fe"),y.Utils.nodeShot(this.dict.level).then(function(t){window.screenShotPicture=t})},e.prototype.woodRemove=function(t){console.log("\u6d4b\u8bd5 woodRemove");var e=x.default.get(this.dict.downSpineRoot);e.active=!0;var o=t.parent.convertToWorldSpaceAR(t.position),i=this.node.convertToNodeSpaceAR(o);i.x<=-250&&(i.x=-250),i.x>=250&&(i.x=250),console.log("nPos.x",i.x),e.x=i.x,this.node.addChild(e),e.children[0].getComponent(sp.Skeleton).setAnimation(0,"animation",!1),e.children[1].getComponent(sp.Skeleton).setAnimation(0,"animation",!1),this.scheduleOnce(function(){x.default.put(e)},10)},e.prototype.suc=function(){p.Platform.stopRecordCap(),this.dict.time2.active=!1,this.unschedule(this.timerFun);var t=v.User.getTempData("levelTime"),e=((new Date).getTime()-t)/1e3,o=v.User.getTempData(l.TempData.CURRENT_LEVEL_ID);cc.game.emit("gamelog_Thinking",B.ShuShuConst.Level_Win,{lv:o,mode:this.currentMode,queue:this.currentLevel,times:e,sort:D.default.get(N.default.ConfigSuffix)}),this.sucFunc(),this.currentLevelProgress=1},e.prototype.playNDBS=function(){var t=this;this.dict.spine.active=!0,"tc"==b.default.instance.lan?this.dict.spine.getComponent(sp.Skeleton).setAnimation(0,"animation2",!1):"en"==b.default.instance.lan?this.dict.spine.getComponent(sp.Skeleton).setAnimation(0,"animation4",!1):"ja"==b.default.instance.lan?this.dict.spine.getComponent(sp.Skeleton).setAnimation(0,"animation3",!1):this.dict.spine.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),this.scheduleOnce(function(){t.dict.spine.active=!1},1.5)},e.prototype.sucFunc=function(){var t=this.currentLevel+1,e=v.User.get(l.UserData.LEVEL_LIST)||{};if(e[0]||(e[0]=1),console.log("nextLevel",t,"list",e),t>e[this.currentMode]){e[this.currentMode]=t,v.User.set(l.UserData.LEVEL_LIST,e),console.log("\u65b0\u901a\u5173"),v.User.setTempData("newPass",!0),L.default.todayPassTimes();var o=D.default.get(N.default.canTurntableTimes)||0;D.default.set(N.default.canTurntableTimes,o+1);var i=D.default.get(N.default.shipStartTime)||0,n=D.default.get(N.default.forwardTimes)||0;console.log("shipStartTime",n),console.log("shipStartTime",i),i&&(n+=1,console.log("shipStartTime323333",i),D.default.set(N.default.forwardTimes,n))}else v.User.setTempData("newPass",!1);var r=v.User.get("record")||0;if(r+=1,v.User.set("record",r),p.Platform.sendRankData(),0==this.currentMode&&e[this.currentMode]>=5){0==(D.default.get(N.default.challengeStartTime)||0)&&(D.default.set(N.default.challengeStartTime,(new Date).getTime()),E.default.init());var c=D.default.get(N.default.challengeUnlockAmount)||0;c+=1,D.default.set(N.default.challengeUnlockAmount,c)}if(cc.game.emit("TaskFinish"),-1!=p.Platform.getConfig().flag.indexOf("tt")){var h=this.currentMode,u=v.User.get(l.UserData.ALREADY_PLAY)||{};u[h]||(u[h]=[]),-1==u[h].indexOf(this.currentLevel)&&u[h].push(this.currentLevel),v.User.set(l.UserData.ALREADY_PLAY,u);var g=v.User.get(l.UserData.ALREADY_UNLOCK)||{};g[h]||(g[h]=[]),-1==g[h].indexOf(t)&&g[h].push(t),v.User.set(l.UserData.ALREADY_UNLOCK,g)}p.Platform.is(a.EPlatform.ANDROID_GOOGLE)||p.Platform.is(a.EPlatform.IOS_HAIWAI)||this.checkFullAd(),f.default.hideAll(),I.default.set(R.default.IsFail,0),1==this.themeType?f.default.show(s.PopupConst.WinOld):f.default.show(s.PopupConst.WIN);var m=v.User.get(l.UserData.EnterSidebar)||0;this.currentLevel>=3&&this.currentLevel%3==0&&2!=m&&this.scheduleOnce(function(){f.default.show(s.PopupConst.LimitWelfare)},.3);var y=v.User.get(l.UserData.IS_COMMENT)||0,_=d.BMS.getKey("evaluatelv");0!=this.currentMode||y||-1==_.indexOf(this.currentLevel)||this.scheduleOnce(function(){f.default.show(s.PopupConst.COMMENT)},.4),v.User.setTempData(l.TempData.IS_WIN,!1)},e.prototype.initSkinAndRole=function(){var t=D.default.get(N.default.SkinList)||{};t[0]||(t[0]=[0]),t[1]||(t[1]=[0]);var e=D.default.get(N.default.UseSkin)||{};e[0]||(e[0]=0),e[1]||(e[1]=0);var o=D.default.get(N.default.HeroLevel)||1;window.f29086_LevelData={useSkin:e,heroLevel:o},window.f29086_dragonBall=0,window.f29086_coin=0},e.prototype.initView=function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),__awaiter(this,void 0,void 0,function(){var o,i,n,c,h,m,y,_,C,S,w,P,T,M,L,E,x,F,W,V=this;return __generator(this,function(H){switch(H.label){case 0:if(this.currentPrefabAsset.length>=2){for(o=0;o<this.currentPrefabAsset.length;o++)cc.assetManager.releaseAsset(this.currentPrefabAsset[o]);this.currentPrefabAsset=[],console.log("\u91ca\u653e\u9884\u5236")}return null==this.level?[2]:(this.level.destroyAllChildren(),game.canUseProps=!0,this.initSkinAndRole(),this.listenHandle(),this.isCheckTipTextCD=!1,this.currentMode=v.User.getTempData(l.TempData.CURRENT_MODE),this.currentLevel=v.User.getTempData(l.TempData.CURRENT_LEVEL),this.themeType=I.default.get(R.default.ThemeType)||0,this.allHoleCoverAnim=!1,I.default.set(R.default.LevelReliveCount,0),console.log("== \u4e3b\u9898: "+this.currentMode+" \u5173\u5361: "+this.currentLevel+" =="),console.log("== \u4e3b\u9898\u7c7b\u578b: "+this.themeType),cc.game.emit("isRemove",!1),cc.game.emit("gameRestart"),this.dict.levelProRoot.active=!1,this.dict.unlockPosBtn.active=!1,1==this.currentLevel&&this.dict.limitWelfareBtn.active?(console.log("limitWelfareBtn111",this.dict.limitWelfareBtn.active),this.dict.limitWelfareBtn.active=!1,console.log("limitWelfareBtn111----",this.dict.limitWelfareBtn.active),window.needShowLimitWelfareBtn=!0):window.needShowLimitWelfareBtn&&(console.log("limitWelfareBtn222",this.dict.limitWelfareBtn.active),this.dict.limitWelfareBtn.active=!0),i=d.BMS.getKey("levelspace"),n=d.BMS.getKey("isCheck"),console.log("[levelspace-isCheck]",n),0==n&&(-1==i?this.dict.downloadBtn.active=!1:this.currentLevel%(i+1)==1?(this.dict.downloadBtn.y=514.778,this.dict.downloadBtn.active=!0):this.dict.downloadBtn.active=!1),(c=v.User.get("levelListLoopTimes")||{})[this.currentMode]||(c[this.currentMode]=0),0!=this.currentMode?[3,2]:[4,A.Config.get(k.ConfigConst.THEME+this.currentMode+p.Platform.getConfig().configSuffix)]);case 1:if(m=H.sent(),c[this.currentMode]){if(!(y=D.default.get(N.default.LoopLevelIDArr)||[]).length){for(_=0;_<m.length;_++)1!=(C=m[_]).id&&y.push(C.levelID);y=O.default.shuffleArray(y),D.default.set(N.default.LoopLevelIDArr,y)}h=y[this.currentLevel-1]?y[this.currentLevel-1]:y[y.length-1]}else h=m.find(function(t){return t.id==V.currentLevel}).levelID;return[3,4];case 2:return[4,A.Config.get(k.ConfigConst.THEME+this.currentMode)];case 3:m=H.sent(),h=m.find(function(t){return t.id==V.currentLevel}).levelID,H.label=4;case 4:if(e&&(h=v.User.getTempData(l.TempData.CURRENT_LEVEL_ID)),console.log("== \u5f00\u53d1ID: "+h),t?cc.game.emit("gamelog_Thinking",B.ShuShuConst.Level_Reset,{lv:h,mode:this.currentMode,queue:this.currentLevel}):cc.game.emit("gamelog_Thinking",B.ShuShuConst.Level_Page,{lv:h,mode:this.currentMode,queue:this.currentLevel,sort:D.default.get(N.default.ConfigSuffix)}),p.Platform.getConfig().hasPurchase||(this.dict.shopBtn.active=!1),S="zqddn_zhb/prefab/level/zqddn_zhb_level"+h,v.User.setTempData(l.TempData.CURRENT_LEVEL_ID,h),g.Res.load(S).then(function(t){return __awaiter(V,void 0,void 0,function(){var e,o,i,n,r,a,s=this;return __generator(this,function(h){switch(h.label){case 0:return e=this.currentLevel+c[this.currentMode]*m.length,this.dict.number.getComponent(cc.Label).string=b.default.formatStr("\u7b2c%d\u5173",e),game.currentLevel=e,this.dict.mapBtn.active=!1,o=cc.instantiate(t),8==this.currentMode&&o._components[0].gameError&&(console.log("[\u5f39\u7403\u6a21\u5f0f] \u4fee\u6539"),o._components[0].gameError=function(){cc.game.emit("onRestartBtn",!0)}),o._components[0]._lbTime&&(o._components[0]._lbTime.string=""),o._components[1]&&o._components[1].initBrain&&(o._components[1].initBrain=function(){}),o.getChildByName("title")&&(o.getChildByName("title").getComponent(cc.Label).overflow=cc.Label.Overflow.SHRINK,o.getChildByName("title").width=720),o.getChildByName("lblTitle")&&(o.getChildByName("lblTitle").getComponent(cc.Label).overflow=cc.Label.Overflow.SHRINK,o.getChildByName("lblTitle").width=720),2==this.currentLevelProgress&&(o.getChildByName("title")&&(o.getChildByName("title").active=!1),o.getChildByName("lblTitle")&&(o.getChildByName("lblTitle").active=!1)),o._components[0].getIsOpen&&(o._components[0].getIsOpen=this.getIsOpen.bind(this),o._components[0].getAdResult=function(){},this.scheduleOnce(function(){o._components[0].node_hammer.active=!1,o._components[0].node_hammer.children[1].active=!1})),o._components[0].func_highlight&&(o.getChildByName("game").getChildByName("zhandan").opacity=0,o.getChildByName("game").getChildByName("zhandan").y=1e7,o._components[0].initCountDown=function(){}),o.x=0,this.currentPrefabAsset.push(t),[4,A.Config.get(k.ConfigConst.Collect)];case 1:return i=h.sent(),this.currentLevel>1&&i[this.currentLevel-2]?(n=i[this.currentLevel-2].goodsID,r=i[this.currentLevel-2].goodsName,I.default.set(R.default.CollectGoodsID,n),I.default.set(R.default.CollectGoodsName,r),[4,U.default.getRes("gameBundle","texture/collect/"+n,cc.Texture2D)]):[3,3];case 2:return a=h.sent(),this.dict.collectIcon.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(a),this.dict.collectIcon2.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(a),[3,4];case 3:I.default.set(R.default.CollectGoodsID,null),h.label=4;case 4:return this.level.addChild(o),window.levelContent=o,this.scheduleOnce(function(){s.screenshot(),p.Platform.startRecordCap()},0),cc.game.emit("gamelog","Level_page_"+this.currentMode+"_"+this.currentLevel),v.User.setTempData("levelTime",(new Date).getTime()),0==this.currentMode&&1==v.User.getTempData(l.TempData.CURRENT_LEVEL)?this.dict.content.active=!1:this.dict.content.active=!0,[2]}})})}),v.User.getTempData("cheats")&&(this.dict.cheats.active=!0,this.levelID.getComponent(cc.Label).string="["+h+"]",this.bms.getComponent(cc.Label).string="[bms: "+p.Platform.getConfig().version+"]",this.flag.getComponent(cc.Label).string="[flag: "+p.Platform.getConfig().flag+"]"),this.currentLevelProgress,this.initPlatformUI(),!t){if(w=d.BMS.getKey("TiLi"),console.log("bmsPower",w),w&&!this.isInfinitePower()){if(v.User.getTempData(l.TempData.IS_INFINITE_POWER))return[2];(P=v.User.get(l.UserData.POWER))<5?(v.User.setTempData(l.TempData.POWER_TYPE,0),d.BMS.getKey("WuxianTiLi")?(cc.game.emit("gamelog","page008"),f.default.show(s.PopupConst.INFINITE_POWER)):(cc.game.emit("gamelog","page009"),cc.game.emit("gamelog","Level_NoPower_"+this.currentMode+"_"+this.currentLevel),f.default.show(s.PopupConst.POWER_SHORTAGE))):(v.User.set(l.UserData.POWER,P-5),u.Event.emit(r.default.POWER_UPDATE),cc.game.emit("gamelog","Level_Power_"+this.currentMode+"_"+this.currentLevel+"_"+v.User.get(l.UserData.POWER)),T=v.User.get(l.UserData.hasUseKey)||0,M=d.BMS.getKey("keyVideo"),T||0!=this.currentMode||this.currentLevel!=M||(v.User.setTempData(l.TempData.current_key_type,1),console.log("TempData",v.User.getTempData(l.TempData.current_key_type)),f.default.show(s.PopupConst.SHOP)))}if(p.Platform.is(a.EPlatform.WX)){if(!window.wx)return[2];L=d.BMS.getKey("lvinys5x5lv"),E=d.BMS.getKey("lvinys5x5chance"),x=this.getIsMistakeByChance(E),console.log("\u8bbe\u7f6e\u7b2c\u51e0\u5173:",L,"\u5f53\u524d\u7b2c\u51e0\u5173:",this.currentLevel,x),L<=this.currentLevel&&x&&(F=window.wx.getSystemInfoSync(),W=F.windowHeight/2-250,p.Platform.showBlockAds({top:W,left:0,id:p.Platform.getConfig().blockID,hideCb:function(){p.Platform.hideBlockAds(),setTimeout(function(){},300)}},function(t){0==t||(p.Platform.hideBlockAds(),setTimeout(function(){},300))}))}this.restartTimes=0}return[2]}})})},e.prototype.isTimeEndFun=function(){console.log("\u6d4b\u8bd5isTimeEndFun"),this.isTimeEnd=!1},e.prototype.timerFun=function(){if(this.currentLevelTime-=1,this.dict.time2.getComponent(cc.Label).string=""+this.secondFormat(this.currentLevelTime),0==this.currentLevelTime){this.dict.time2.active=!1,this.unschedule(this.timerFun),this.isTimeEnd=!0,h.Audio.playEffect(n.AudioConst.timeEnd);var t=v.User.getTempData(l.TempData.CURRENT_LEVEL_ID);v.User.getTempData(l.TempData.CURRENT_MODE),cc.game.emit("gamelog_Thinking",B.ShuShuConst.Level_Lose,{lv:t,mode:this.currentMode})}},e.prototype.secondFormat=function(t,e,o){void 0===e&&(e=2),void 0===o&&(o=!1);var i,n,r,a=t/3600,s=(t%=3600)/60,c=t%=60;i=(a=Math.floor(a))>=10?a+"":"0"+a,n=(s=Math.floor(s))>=10?s+"":"0"+s,r=(c=Math.floor(c))>=10?c+"":"0"+c,o&&(c=100*c/60,r=(c=Math.floor(c))>=10?c+"":"0"+c);var l=i+":"+n+":"+r;switch(e){case 2:l=n+":"+r}return l},e.prototype.developBtn=function(){var t=this.dict.developID.getComponent(cc.EditBox).string;console.log("\u5f00\u53d1id",t),this.isIntNum(t)&&(console.log("\u662f\u6570\u5b57"),v.User.setTempData(l.TempData.CURRENT_LEVEL_ID,Number(t)),this.initView(!1,!0))},e.prototype.orderBtn=function(){var t=this.dict.orderID.getComponent(cc.EditBox).string;console.log("\u987a\u5e8fid",t),this.isIntNum(t)&&(console.log("\u662f\u6570\u5b57"),v.User.setTempData(l.TempData.CURRENT_LEVEL,Number(t)),this.initView())},e.prototype.screenshotBtn=function(){var t=this,e=this.dict.screenshot.getComponent(cc.EditBox).string.split("-"),o=e[0],i=e[1];console.log("str",o,i),this.isIntNum(o)&&this.isIntNum(i)?(this.dict.cheats.active=!1,v.User.setTempData(l.TempData.CURRENT_LEVEL,Number(o)),this.initView(!0),S.Screenshot.init(this.node),this.schedule(function e(){S.Screenshot.btn_image_knife(String(t.currentLevel)),console.log("\u622a\u56fe\u7b2c"+t.currentLevel+"\u5173");var o=t.currentLevel+1;o<=Number(i)?(v.User.setTempData(l.TempData.CURRENT_LEVEL,o),t.initView(!0)):(console.log("\u7ed3\u675f\u622a\u56fe"),t.unschedule(e))},2)):w.Tip.show("\u8f93\u5165\u683c\u5f0f\u5e94\u8be5\u4e3a: 1-100")},e.prototype.downloadBtn=function(){C.XMAD.downloadBtn()},e.prototype.collectRoot=function(){f.default.show(s.PopupConst.Collect)},e.prototype.mapBtn=function(){f.default.show(s.PopupConst.Map)},e.prototype.roleBtn=function(){f.default.show(s.PopupConst.Role)},e.prototype.limitWelfareBtn=function(){console.log("limitWelfareBtn"),cc.game.emit("gamelog_Thinking",B.ShuShuConst.btn,{id:"009"}),f.default.show(s.PopupConst.LimitWelfare)},e.prototype.hideLimitWelfareBtn=function(){this.dict.limitWelfareBtn.active=!1},e.prototype.isIntNum=function(t){return!isNaN(parseFloat(t))},e.prototype.getIsMistakeByChance=function(t){var e=100*Math.random(),o=!1;return console.log("\u968f\u673a\u6570",e),console.log("\u5f53\u524d\u914d\u7f6e\u6982\u7387:"+t),0==t?o:(t>=e&&(o=!0),o)},e.prototype.isInfinitePower=function(){var t=!1;if(d.BMS.getKey("WuxianTiLi")){var e=v.User.get(l.UserData.INF_POWER_START_TIME),o=(new Date).getTime();e&&((o-e)/1e3>=86400||(t=!0))}return console.log("\u662f\u5426\u662f\u65e0\u9650\u4f53\u529b",t),t},e.prototype.initPlatformUI=function(){if(p.Platform.getConfig().fitUIType==a.FitUIType.TT&&(this.dict.topRightBar.getComponent(cc.Widget).top=75,this.dict.topRightBar.getComponent(cc.Widget).updateAlignment(),(t=cc.view.getFrameSize().width/cc.view.getFrameSize().height)<.5?(this.dict.topLeftBar.getComponent(cc.Widget).top=55,this.dict.topLeftBar.getComponent(cc.Widget).updateAlignment(),this.dict.bottomBar0.getComponent(cc.Widget).bottom=20,this.dict.bottomBar0.getComponent(cc.Widget).updateAlignment(),this.dict.collectRoot.y=301.999):this.dict.collectRoot.y=401.999),p.Platform.getConfig().fitUIType==a.FitUIType.KS){var t=cc.view.getFrameSize().width/cc.view.getFrameSize().height;console.log("\u957f\u9ad8\u6bd4",t),t<.5?(this.dict.topLeftBar.getComponent(cc.Widget).top=120,this.dict.topLeftBar.getComponent(cc.Widget).left=140,this.dict.topLeftBar.getComponent(cc.Widget).updateAlignment()):(this.dict.topLeftBar.getComponent(cc.Widget).top=55,this.dict.topLeftBar.getComponent(cc.Widget).left=140,this.dict.topLeftBar.getComponent(cc.Widget).updateAlignment()),this.dict.topRightBar.getComponent(cc.Widget).top=75,this.dict.topRightBar.getComponent(cc.Widget).updateAlignment(),this.dict.addPowerBtn.getComponent(cc.Widget).top=90,this.dict.addPowerBtn.getComponent(cc.Widget).updateAlignment()}p.Platform.getConfig().hasHomeBtn?this.dict.homeBtn.active=!0:this.dict.homeBtn.active=!1},e.prototype.clickHome=function(){this.isLoadingScene||(this.isLoadingScene=!0,cc.game.emit("gamelog","btn015"),m.default.loadScene(c.SceneConst.MAIN))},e.prototype.clickBack=function(){cc.game.emit("gamelog_Thinking",B.ShuShuConst.Level_Pause,{lv:v.User.getTempData(l.TempData.CURRENT_LEVEL_ID),mode:v.User.getTempData(l.TempData.CURRENT_MODE)}),this.stopTimer(),f.default.show(s.PopupConst.SET)},e.prototype.clickRestart=function(t){cc.game.emit("gamelog","btn014"),this.initView(!0,t)},e.prototype.checkFullAd_noResult=function(){cc.game.emit("checkFullAd_noResult",this.currentLevel)},e.prototype.checkFullAd=function(){u.Event.emit(r.default.checkFullAd_result)},__decorate([V(cc.Prefab)],e.prototype,"coloringSpinePrefab",void 0),__decorate([W],e)}(i.default);o.default=H,cc._RF.pop()},{"./AdjustEventSystem":"AdjustEventSystem","./AssetManager":"AssetManager","./AudioConst":"AudioConst","./AudioManager":"AudioManager","./BaseUI":"BaseUI","./BmsManager":"BmsManager","./ChallengeSystem":"ChallengeSystem","./ConfigConst":"ConfigConst","./ConfigManager":"ConfigManager","./ConfigUtils":"ConfigUtils","./EventConst":"EventConst","./EventManager":"EventManager","./LanguageManager":"LanguageManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./MemoryStorageConst":"MemoryStorageConst","./MemoryStorageManager":"MemoryStorageManager","./OPPOAndroidAdUtils":"OPPOAndroidAdUtils","./OPPOMiniADUtils":"OPPOMiniADUtils","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PoolUtils":"PoolUtils","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./ResManager":"ResManager","./SceneConst":"SceneConst","./SceneManager":"SceneManager","./ScreenshotUtils":"ScreenshotUtils","./ShuShuConst":"ShuShuConst","./TaskManager":"TaskManager","./TipManager":"TipManager","./Tools":"Tools","./UserConst":"UserConst","./UserManager":"UserManager","./Utils":"Utils","./XMADUtils":"XMADUtils"}],GenerateMapPath:[function(t,e,o){"use strict";cc._RF.push(e,"67ea1W9jZ9L4obpxKg4Pvma","GenerateMapPath");var i=cc._decorator,n=i.ccclass,r=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isDebug=!1,e.paths=[],e.OFFSET=16,e.drawSize=3,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this.node.getComponent(cc.Animation).getClips()[0].curveData.paths;for(var e in t){var o=t[e].props.position;console.log("roadData",o),this.generatePathData(o)}this.drawRoads(),console.log("paths",this.paths)},e.prototype.getPath=function(){return this.paths},e.prototype.generatePathData=function(t){for(var e=null,o=null,i=null,n=null,r=[],a=0;a<t.length;a++){var s=t[a];null!==e&&r.push([o,e,e,cc.v2(s.value[0],s.value[1])]),o=cc.v2(s.value[0],s.value[1]),console.log("keyFrame.motionPath",s,s.motionPath);for(var c=0;c<s.motionPath.length;c++){var l=cc.v2(s.motionPath[c][0],s.motionPath[c][1]);n=cc.v2(s.motionPath[c][2],s.motionPath[c][3]),null===e&&(e=n),r.push([o,e,n,l]),e=cc.v2(s.motionPath[c][4],s.motionPath[c][5]),o=l}}console.log(r);for(var h=[[r[0][0].x,r[0][0].y]],d=0;d<r.length;d++){o=r[d][0],e=r[d][1],n=r[d][2],i=r[d][3];var u=this.bezierLength(o,e,n,i)/this.OFFSET,p=1/(u=Math.floor(u)),f=p;for(a=0;a<u;a++){var g=o.x*(1-f)*(1-f)*(1-f)+3*e.x*f*(1-f)*(1-f)+3*n.x*f*f*(1-f)+i.x*f*f*f,m=o.y*(1-f)*(1-f)*(1-f)+3*e.y*f*(1-f)*(1-f)+3*n.y*f*f*(1-f)+i.y*f*f*f;h.push([g,m]),f+=p}}this.paths.push(h)},e.prototype.drawRoads=function(){if(this.isDebug){var t=this.node.addComponent(cc.Graphics);t.fillColor=cc.color(255,0,0,255),t.clear();for(var e=0;e<this.paths.length;e++)for(var o=this.paths[e],i=0;i<o.length;i++)t.moveTo(o[i][0]-this.drawSize,o[i][1]+this.drawSize),t.lineTo(o[i][0]-this.drawSize,o[i][1]-this.drawSize),t.lineTo(o[i][0]+this.drawSize,o[i][1]-this.drawSize),t.lineTo(o[i][0]+this.drawSize,o[i][1]+this.drawSize),t.close();t.fill()}},e.prototype.bezierLength=function(t,e,o,i){for(var n=t,r=0,a=.05,s=0;s<20;s++){var c=t.x*(1-a)*(1-a)*(1-a)+3*e.x*a*(1-a)*(1-a)+3*o.x*a*a*(1-a)+i.x*a*a*a,l=t.y*(1-a)*(1-a)*(1-a)+3*e.y*a*(1-a)*(1-a)+3*o.y*a*a*(1-a)+i.y*a*a*a,h=cc.v2(c,l),d=h.sub(n);n=h,r+=d.mag(),a+=.05}return r},__decorate([r],e.prototype,"isDebug",void 0),__decorate([n],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],Get3:[function(t,e,o){"use strict";cc._RF.push(e,"dadd1ML92dNnrpmYDVaoztr","Get3");var i=t("./PopupManager"),n=t("./UIBase"),r=t("./LanguageManager"),a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.node.setContentSize(cc.winSize),this.addBtnOn("noBtn",this.noBtn,this),this.initView()},e.prototype.initView=function(){this.dict["title_"+r.default.instance.lan].active=!0},e.prototype.noBtn=function(){i.default.hide()},__decorate([s],e)}(n.default));o.default=c,cc._RF.pop()},{"./LanguageManager":"LanguageManager","./PopupManager":"PopupManager","./UIBase":"UIBase"}],GetCard:[function(t,e,o){"use strict";cc._RF.push(e,"88e9fUh1aBA1roJxmdS51vX","GetCard");var i=t("./PopupManager"),n=t("./UIBase"),r=t("./LanguageManager"),a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.node.setContentSize(cc.winSize),this.addBtnOn("noBtn",this.noBtn,this),this.dict.cardAmount.getComponent(cc.Label).string=r.default.formatStr("\u4e07\u80fd\u5361x%d",1)},e.prototype.noBtn=function(){console.log("\u6d4b\u8bd5"),cc.game.emit("hideGetCard"),i.default.hide()},__decorate([s],e)}(n.default));o.default=c,cc._RF.pop()},{"./LanguageManager":"LanguageManager","./PopupManager":"PopupManager","./UIBase":"UIBase"}],Get:[function(t,e,o){"use strict";cc._RF.push(e,"2495bpQP+pP2ZQtMwQQV+Lt","Get");var i=t("./EventConst"),n=t("./UserConst"),r=t("./BmsManager"),a=t("./EventManager"),s=t("./PlatformManager"),c=t("./PopupManager"),l=t("./UserManager"),h=t("./MemoryStorageConst"),d=t("./MemoryStorageManager"),u=t("./UIBase"),p=t("./LanguageManager"),f=t("./ConfigManager"),g=t("./ConfigConst"),m=cc._decorator,v=m.ccclass,y=(m.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.node.setContentSize(cc.winSize),this.addBtnOn("noBtn",this.noBtn,this),this.initView()},e.prototype.initView=function(){var t=this;this.dict["title_"+p.default.instance.lan].active=!0;var e=d.default.get(h.default.rewardType),o=d.default.get(h.default.reward);"VIPCard"==e?(this.dict["title_"+p.default.instance.lan].active=!1,this.dict.titleCard.active=!0):"remove_ads_pack"==e&&(this.dict.skin.active=!0,this.dict.card.active=!0),d.default.set(h.default.rewardType,""),o.forEach(function(e){var o=e[0],i=e[1];if(t.dict[o].active=!0,"card"==o&&(t.dict[o].getChildByName("text").getComponent(cc.Label).string=p.default.formatStr("\u4e07\u80fd\u5361x%d",i)),"skin"==o){l.User.get(n.UserData.getLockSkinList),l.User.get(n.UserData.skinList),l.User.get(n.UserData.useSkinIDList);var r="pifu"+i;if(i>=16){t.dict.skin.getComponent(sp.Skeleton).enabled=!1;var a=t.dict.skin.getChildByName("spine2").getComponent(sp.Skeleton);t.dict.skin.getChildByName("spine2").active=!0,a.setSkin(r),a.defaultSkin=r}else{var s=t.dict.skin.getComponent(sp.Skeleton);s.node.active=!0,s.setSkin(r),s.defaultSkin=r}f.Config.get(g.ConfigConst.Skin0).then(function(e){t.dict[o].getChildByName("text").getComponent(cc.Label).string=e.find(function(t){return t.id==i}).skinName})}"coin"==o&&(t.dict[o].getChildByName("text").getComponent(cc.Label).string=p.default.formatStr("\u91d1\u5e01x%d",i))})},e.prototype.skinReward=function(t){var e=t,o=l.User.get(n.UserData.getLockSkinList);o[0].includes(e)||o[0].push(e),l.User.set(n.UserData.getLockSkinList,o),l.User.setTempData("chooseSkinPage",0),l.User.setTempData("chooseSkin",e+1)},e.prototype.saveServerData=function(t,e){e=e.toString(),r.BMS.saveServerData(s.Platform.getConfig().flag,l.User.get("googleID")||l.User.get("uuid"),t,e).then(function(){console.log("\u4fdd\u5b58"+t+"\u6210\u529f:"+e)})},e.prototype.nextBtn=function(){a.Event.emit(i.default.CLICK_NEXT),c.default.hide()},e.prototype.noBtn=function(){console.log("\u6d4b\u8bd5"),c.default.hide()},__decorate([v],e)}(u.default));o.default=y,cc._RF.pop()},{"./BmsManager":"BmsManager","./ConfigConst":"ConfigConst","./ConfigManager":"ConfigManager","./EventConst":"EventConst","./EventManager":"EventManager","./LanguageManager":"LanguageManager","./MemoryStorageConst":"MemoryStorageConst","./MemoryStorageManager":"MemoryStorageManager","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager","./UIBase":"UIBase","./UserConst":"UserConst","./UserManager":"UserManager"}],HW:[function(t,e,o){"use strict";cc._RF.push(e,"e0f69anvRxBeLSmAfyiTVJQ","HW");var i=function(t){function e(){var e=t.call(this)||this;return e.sdk=window.qg,e._rewardAds=null,e._rewardAdsCb=null,e._rewardHasShow=!1,e._rewardHasLoad=!1,e._banner=null,e._insert=null,e._nativeAds=[],e}return __extends(e,t),e.prototype.getInstance=function(){return this.sdk},e.prototype.showRewardAds=function(t){var e=this;return this.sdk.createRewardedVideoAd?this._config.rewardID?void(this._rewardAdsCb||(this._rewardAdsCb=t,this._rewardHasShow=!1,this._rewardAds||(this._rewardAds=this.sdk.createRewardedVideoAd({adUnitId:this._config.rewardID}),this._rewardAds.onLoad(function(){e._rewardHasLoad=!0,e._rewardHasShow||(e._rewardHasShow=!0,e._rewardAds.show())}),this._rewardAds.onClose(function(t){e._rewardHasLoad=!1,e._rewardAdsCb&&setTimeout(function(){e._rewardAdsCb(t.isEnded?0:1),e._rewardAdsCb=null},300)}),this._rewardAds.onError(function(t){e._rewardHasLoad=!1,console.log("[platform] [HWPlatform] showRewardAds",JSON.stringify(t)),e._rewardAdsCb&&setTimeout(function(){e._rewardAdsCb(-1),e._rewardAdsCb=null},300)})),this._rewardHasLoad&&!this._rewardHasShow?(this._rewardHasShow=!0,this._rewardAds.show()):this._rewardAds.load())):t(-3):t(-2)},e.prototype.showBanner=function(t){if(void 0===t&&(t={id:""}),this._config.bannerID&&!this._banner){var e=this.sdk.getSystemInfoSync();console.log("on getSystemInfoSync: success ="+JSON.stringify(e));var o=e.safeArea.height;this._banner=this.sdk.createBannerAd({adUnitId:t.id||this._config.bannerID,style:{top:o-57,left:0,height:57,width:360}}),this._banner.show(),this._banner.onError(function(t){console.log("[platform] [HWPlatform] showBanner",t)})}},e.prototype.hideBanner=function(){this._banner&&(this._banner.hide(),this._banner.destroy(),this._banner=null)},e.prototype.showInsert=function(){var t=this;this._config.insertID&&(this._insert||(this._insert=this.sdk.createInterstitialAd({adUnitId:this._config.insertID}),this._insert.onLoad(function(){console.log("[platform] [ZJTDPlatform] showInsert onLoad"),t._insert&&t._insert.show()}),this._insert.onClose(function(){console.log("[platform] [ZJTDPlatform] showInsert onClose"),t._insert&&(t._insert.destroy(),t._insert=null)}),this._insert.onError(function(e){console.log("[platform] [ZJTDPlatform] showInsert onError",e),e&&1003==e.errCode&&t._insert&&(t._insert.destroy(),t._insert=null)}),this._insert.load()))},e.prototype.showNativeAds=function(t,e){var o=this;if(void 0===t&&(t={type:0,container:null}),this.sdk.createNativeAd&&this._config.nativeID){var i=this.sdk.createNativeAd({adUnitId:t.id||this._config.nativeID});t.container.opacity=255,this._nativeAds.push({ads:i,container:t.container}),i.onLoad(function(n){var r;if(r=n.adList?n.adList[0]:null,0!=t.container.opacity){if(i&&r){var a=function(){console.log(r.adId),i.reportAdShow({adId:r.adId})};a();var s=o._nativeAds.findIndex(function(e){return e.container.name==t.container.name});o._nativeAds[s].report=a,cc.game.on(cc.game.EVENT_SHOW,a,o),0==t.type?o.showNativeBanner(r,i,t):1==t.type?o.showNativeInsert(r,i,t):o.showNativeIcon(r,i,t)}i.offError(),i.offLoad()}e&&e(0)}),i.onError(function(n){if(console.log("[platform] [HWPlatform] showNativeAd",JSON.stringify(n)),t.container){t.container.active=!1,t.container.opacity=0;var r=o._nativeAds.findIndex(function(e){return e.container.name==t.container.name});-1!=r&&o._nativeAds.splice(r,1)}i.offError(),i.offLoad(),i.destory&&i.destory(),i=null,e&&e(1)}),i&&i.load()}},e.prototype.hideNativeAds=function(){if(this._nativeAds.length){var t=this._nativeAds.pop();if(cc.isValid(t.container,!0)){t.container.opacity=0,t.container.active=!1,t.container.off(cc.Node.EventType.TOUCH_START);var e=t.container.getChildByName("close");e&&e.off(cc.Node.EventType.TOUCH_START);var o=t.container.getChildByName("next");o&&o.off(cc.Node.EventType.TOUCH_START)}t.report&&cc.game.off(cc.game.EVENT_SHOW,t.report,this),t.ads.destory&&t.ads.destory()}},e.prototype.showNativeBanner=function(t,e,o){var i=this;void 0===o&&(o={type:0,container:null});var n=o.container,r=n.getChildByName("img")||n.getChildByName("mask").getChildByName("img"),a=n.getChildByName("title"),s=n.getChildByName("desc"),c=n.getChildByName("btnText"),l=n.getChildByName("close");if(n.active=!0,n.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),i.hideNativeAds(),o.hideCb&&o.hideCb()},this),l&&l.once(cc.Node.EventType.TOUCH_START,function(){o.isMistakeClose?(e.reportAdClick({adId:t.adId}),i.hideNativeAds()):i.hideNativeAds(),o.hideCb&&o.hideCb()}),a&&(a.getComponent(cc.Label).string=""+t.title),s&&(s.getComponent(cc.Label).string=""+(t.desc||"")),c&&(c.getComponent(cc.Label).string=""+(t.clickBtnTxt||"\u70b9\u51fb\u67e5\u770b")),r){var h=t.imgUrlList[Math.floor(Math.random()*t.imgUrlList.length)];cc.assetManager.loadRemote(h,{ext:".png"},function(t,e){!t&&r&&(r.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e))})}},e.prototype.showNativeInsert=function(t,e,o){var i=this;void 0===o&&(o={type:0,container:null});var n=o.container,r=n.getChildByName("img")||n.getChildByName("mask").getChildByName("img"),a=n.getChildByName("title"),s=n.getChildByName("desc"),c=n.getChildByName("btnText"),l=n.getChildByName("next"),h=n.getChildByName("close");if(n.active=!0,n.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),i.hideNativeAds(),o.hideCb&&o.hideCb()},this),l&&l.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),i.hideNativeAds(),o.hideCb&&o.hideCb()},this),h&&h.once(cc.Node.EventType.TOUCH_START,function(){o.isMistakeClose?(e.reportAdClick({adId:t.adId}),i.hideNativeAds()):i.hideNativeAds(),o.hideCb&&o.hideCb()}),a&&(a.getComponent(cc.Label).string=""+t.title),s&&(s.getComponent(cc.Label).string=""+(t.desc||"")),c&&(c.getComponent(cc.Label).string=""+(t.clickBtnTxt||"\u70b9\u51fb\u67e5\u770b")),r){var d=t.imgUrlList[Math.floor(Math.random()*t.imgUrlList.length)];cc.assetManager.loadRemote(d,{ext:".png"},function(t,e){!t&&r&&(r.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e))})}},e.prototype.showNativeIcon=function(t,e,o){var i=this;void 0===o&&(o={type:0,container:null});var n=o.container,r=n.getChildByName("img")||n.getChildByName("mask").getChildByName("img"),a=n.getChildByName("title"),s=n.getChildByName("close");if(n.active=!0,n.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),i.hideNativeAds(),o.hideCb&&o.hideCb()},this),s&&s.once(cc.Node.EventType.TOUCH_START,function(){o.isMistakeClose?(e.reportAdClick({adId:t.adId}),i.hideNativeAds()):i.hideNativeAds(),o.hideCb&&o.hideCb()}),a&&(a.getComponent(cc.Label).string=""+t.title),r){var c=t.imgUrlList[Math.floor(Math.random()*t.imgUrlList.length)];cc.loader.load({url:c,type:"png"},function(t,e){!t&&r&&(r.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e))})}},e.prototype.login=function(){var t=this;return new Promise(function(e,o){console.log("[platform] [HWPlatform] gameLoginWithReal"),t.sdk.gameLoginWithReal({forceLogin:1,appid:t._config.appID,success:function(t){console.log("[platform] [HWPlatform] gameLoginWithReal success:",JSON.stringify(t)),e(0)},fail:function(e,i){console.log("[platform] [HWPlatform] appid ",t._config.appID),console.log("[platform] [HWPlatform] gameLoginWithReal fail:"+e+", code:"+i),o(7004!=i&&2012!=i?-2:-1)}})})},e.prototype.randomString=function(t){t=t||32;for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyzoOLl9gqVvUuI12345678",o=e.length,i="",n=0;n<t;n++)i+=e.charAt(Math.floor(Math.random()*o));return i},e.prototype.canPlayGame=function(){var t=this;return new Promise(function(e){return __awaiter(t,void 0,void 0,function(){var t,o;return __generator(this,function(i){switch(i.label){case 0:t=null;try{t=new Date}catch(n){t=new Date}return o=t.getDay(),[5,6,7].some(function(t){return t==o})?[2,e(20==t.getHours())]:[4,this.isHoliday(t)];case 1:return i.sent()?[2,e(20==t.getHours())]:[2,e(!1)]}})})})},e.prototype.getDate=function(){return new Promise(function(t,e){var o=new XMLHttpRequest;o.open("HEAD",location.href,!0),o.onreadystatechange=function(){if(4==o.readyState&&200==o.status)return t(o.getResponseHeader("Date"))},o.send(null),o.ontimeout=function(){return e()},o.onerror=function(){return e()}})},e.prototype.isHoliday=function(t){return new Promise(function(e){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4==o.readyState&&200==o.status)try{var t=JSON.parse(o.response);return e(t.holiday)}catch(i){return e(!0)}};var i=t.getMonth()+1;i<10&&(i="0"+i);var n=t.getDate();n<10&&(n="0"+n),o.open("GET","http://timor.tech/api/holiday/info/"+t.getFullYear()+"-"+i+"-"+n,!0),o.send(null),o.ontimeout=function(){return e(!1)},o.onerror=function(){return e(!1)}})},e}(t("./BasePlatform").BasePlatform);o.default=i,cc._RF.pop()},{"./BasePlatform":"BasePlatform"}],HeroLevel:[function(t,e,o){"use strict";cc._RF.push(e,"d62a4KxKjpBlboaTVm8Y+Xr","HeroLevel");var i=t("./PopupConst"),n=t("./UIBase"),r=t("./LocalStorageConst"),a=t("./LocalStorageManager"),s=t("./PopupManager"),c=t("./ConfigManager"),l=t("./ConfigConst"),h=cc._decorator,d=h.ccclass,u=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cost=0,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.node.scale=1.2;var e=a.default.get(r.default.HeroLevel)||1;a.default.set(r.default.HeroLevel,e),this.localStorageUIData[r.default.HeroLevel]=this.updateHeroLevel.bind(this)},e.prototype.updateHeroLevel=function(t){return __awaiter(this,void 0,void 0,function(){var e,o,i;return __generator(this,function(n){switch(n.label){case 0:return this.dict.heroLevel.getComponent(cc.Label).string="Lv"+t,[4,c.Config.get(l.ConfigConst.Role)];case 1:return e=n.sent(),o=a.default.get(r.default.DragonBall)||0,(i=e.find(function(e){return e.id==t+1}))?(this.cost=i.cost,this.dict.upgrade.active=o>=this.cost):this.dict.upgrade.active=!1,[2]}})})},e.prototype.clickSelf=function(){s.default.show(i.PopupConst.Role)},__decorate([d],e)}(n.default));o.default=u,cc._RF.pop()},{"./ConfigConst":"ConfigConst","./ConfigManager":"ConfigManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./UIBase":"UIBase"}],Hide:[function(t,e,o){"use strict";cc._RF.push(e,"ad60amMOi5HOr1zdtf8EqBs","Hide");var i=function(){function t(){}return t.prototype.hide=function(t){window.tt&&window.wxapi.onHide(t)},t}();o.default=new i,cc._RF.pop()},{}],HintSystem:[function(t,e,o){"use strict";cc._RF.push(e,"13d71cqb7NL4oEA4oack7yj","HintSystem");var i=new(function(){function t(){this.hints=[]}return t.prototype.init=function(){},t.prototype.addHint=function(t){this.hints.push(t)},t.prototype.showHint=function(t){t>=0&&t<this.hints.length&&this.hints[t].show()},t.prototype.hideHint=function(t){t>=0&&t<this.hints.length&&this.hints[t].hide()},t.prototype.clearHints=function(){for(var t=0;t<this.hints.length;t++)this.hints[t].hide()},t}());o.default=i,cc._RF.pop()},{}],Hint:[function(t,e,o){"use strict";cc._RF.push(e,"09f8c6tS5RMJJok1qE+Wivd","Hint");var i=function(){function t(t,e,o){this.node=null,this.node=new cc.Node("Hint"),this.node.setPosition(e),this.node.setScale(o),this.node.scale=0,this.node.opacity=0}return t.prototype.show=function(){this.node.scale=1,this.node.opacity=1},t.prototype.hide=function(){this.node.scale=0,this.node.opacity=0},t}();o.default=i,cc._RF.pop()},{}],HomeItem:[function(t,e,o){"use strict";var i;cc._RF.push(e,"fbe47kuOa1Ip7UlVTWQIEmp","HomeItem");var n,r=t("./LanguageManager"),a=t("./PlatformManager"),s=t("./Utils"),c=cc._decorator,l=c.ccclass,h=c.property;(n=i||(i={}))[n.Normal=0]="Normal",n[n.Finish=1]="Finish",n[n.Lock=2]="Lock";var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ranking=null,e.score=null,e.province=null,e.roleRoot=null,e.bgSpriteFrame=[],e.param=null,e.state=null,e.starAmount=0,e.skinNameArr=[],e}return __extends(e,t),e.prototype.onLoad=function(){this.skinNameArr=new Array(8).fill("skin_").map(function(t,e){return t+(e+1)})},e.prototype.setData=function(t){this.param=t,this.node.zIndex=this.param.index,this.refresh()},e.prototype.refresh=function(){var t=this,e=this.param.index+1;this.ranking.string=r.default.formatStr("\u7b2c%d\u540d",e),this.score.string=""+this.param.score,this.province.string=this.param.province+"\u961f",a.Platform.getConfig().rank.includes("haiwai")&&(this.province.string=""+this.param.province),this.param.province.includes("UNKNOW")&&(this.province.string="\u5176\u4ed6\u961f"),"null"!=this.param.province&&null!=this.param.province||(this.province.string="\u5176\u4ed6\u961f"),this.roleRoot.children.forEach(function(e){e.active=!1;var o=e.children[0].getComponent(sp.Skeleton);if(Number(e.name)+1<=t.param.score){e.active=!0;var i=t.skinNameArr[s.Utils.randomNum(0,7)];o.setSkin(i),o.defaultSkin=i}}),this.param.index>2?this.node.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=this.bgSpriteFrame[3]:this.node.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=this.bgSpriteFrame[this.param.index]},e.state=i,__decorate([h(cc.Label)],e.prototype,"ranking",void 0),__decorate([h(cc.Label)],e.prototype,"score",void 0),__decorate([h(cc.Label)],e.prototype,"province",void 0),__decorate([h(cc.Node)],e.prototype,"roleRoot",void 0),__decorate([h([cc.SpriteFrame])],e.prototype,"bgSpriteFrame",void 0),__decorate([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./LanguageManager":"LanguageManager","./PlatformManager":"PlatformManager","./Utils":"Utils"}],Home:[function(t,e,o){"use strict";cc._RF.push(e,"b5839ZLSZhGeL0ByHlxxbWw","Home");var i=t("./BaseUI"),n=t("./RecycleScroll"),r=t("./ConfigConst"),a=t("./EventConst"),s=t("./PlatformConst"),c=t("./PopupConst"),l=t("./SceneConst"),h=t("./UserConst"),d=t("./AudioManager"),u=t("./BmsManager"),p=t("./ConfigManager"),f=t("./EventManager"),g=t("./LanguageManager"),m=t("./PlatformManager"),v=t("./PopupManager"),y=t("./SceneManager"),_=t("./UserManager"),C=t("./ChallengeHttp"),b=t("./ConfigUtils"),S=t("./OPPOAndroidAdUtils"),w=t("./Utils"),A=t("./VIVOADUtils"),k=t("./XMADUtils"),P=t("./MemoryStorageConst"),T=t("./MemoryStorageManager"),B=t("./ShuShuConst"),M=t("./HomeItem"),I=t("./LocalStorageConst"),R=t("./VIPSystem"),L=t("./TipManager"),D=t("./ChallengeSystem"),N=t("./LocalStorageManager"),E=cc._decorator,x=E.ccclass,U=E.property,O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scroll=null,e.clickTimes=0,e.ageSpriteFrame=[],e.btnIconSpriteFrame=[],e.animName="angry",e.secondModeData=null,e.thirdModesData=[],e.darenModesData=[],e.carSpeed=500,e.moveTimes=!1,e.moveTimes2=!1,e.scrollType=0,e.rankList=[],e.myRank=1,e.isLoadingScene=!1,e.isLoadPrivacy=!1,e.isEnterUgc=!1,e.isAnim=!1,e.isShow=!1,e}return __extends(e,t),e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this),this.addBtnOn("setBtn",this.clickSet,this),this.addBtnOn("roleRoot",this.heroLevelBtn,this),this.addBtnOn("startBtn",this.clickStart,this),this.addBtnOn("infinitePowerBtn",this.clickInfinitePower,this),this.addBtnOn("ageBtn",this.clickAge,this),this.addBtnOn("privacyBtn",this.clickPrivacy,this),this.addBtnOn("appointBtn",this.clickAppoint,this),this.addBtnOn("moreGameBtn",this.clickMoreGame,this),this.addBtnOn("ageBtn",this.clickAgeBtn,this),this.addBtnOn("followBtn",this.clickFollowBtn,this),this.addBtnOn("mode985Btn",this.modeBtnFuc.bind(this,985),this),this.addBtnOn("thirdBtn",this.clickThirdMode,this),this.addBtnOn("beeBtn",this.clickBeeBtn,this),this.addBtnOn("modeJumpBtn",this.modeJumpBtn,this),this.addBtnOn("closeDaren",this.closeDaren,this),this.addBtnOn("unlockAllModeBtn",this.unlockAllModeBtn,this),this.addBtnOn("orderBtn",this.orderBtn,this),this.addBtnOn("topBtn",this.topBtn,this),this.addBtnOn("rankBtn",this.rankBtn,this),this.addBtnOn("skinBtn",this.skinBtn,this),this.addBtnOn("playBtn",this.playBtn,this),this.addBtnOn("signInBtn",this.signInBtn,this),this.addBtnOn("shopBtn",this.shopBtn,this),this.addBtnOn("positionBtn",this.positionBtn,this),this.addBtnOn("limitWelfareBtn",this.limitWelfareBtn,this),this.addBtnOn("shareBtn",this.shareBtn,this),this.addBtnOn("vipBtn",this.vipBtn,this),this.addBtnOn("specialBtn",this.specialBtn,this),this.addBtnOn("newHandBtn",this.newHandBtn,this),this.addBtnOn("supervalueBtn",this.supervalueBtn,this),this.addBtnOn("noADBtn",this.noADBtn,this),this.addBtnOn("shipBtn",this.shipBtn,this),this.addBtnOn("turntableBtn",this.turntableBtn,this),this.addBtnOn("planBtn",this.planBtn,this),this.addBtnOn("challengeBtn",this.challengeBtn,this),this.addBtnOn("mapBtn",this.mapBtn,this),this.addBtnOn("collectBtn",this.collectBtn,this),this.addBtnOn("roleBtn",this.roleBtn,this),this.dict.cheats.on(cc.Node.EventType.TOUCH_START,this.clickCheats,this),this.dict.clickBg.on(cc.Node.EventType.TOUCH_START,function(){e.isShow&&e.clickThirdMode()},this),this.dict.clickBg._touchListener&&this.dict.clickBg._touchListener.setSwallowTouches(!1),_.User.setTempData("currentScene_",1),"zh"==g.default.instance.lan?m.Platform.getConfig().logoType=s.LogoType.DreamSetUp:"tc"==g.default.instance.lan?m.Platform.getConfig().logoType=s.LogoType.DreamSetUp_TC:m.Platform.getConfig().logoType=s.LogoType.DreamSetUp_EN,this.dict.logo&&cc.resources.load("texture/logo/logo"+m.Platform.getConfig().logoType,function(t,o){if(t)return console.log(t);e.dict.logo.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o)}),this.initPlatformUI(),this.initView(),m.Platform.is(s.EPlatform.XIAOMI_ANDROID)&&k.XMAD.showInsert_must(),cc.game.emit("gamelog_Thinking",B.ShuShuConst.page,{id:"001"}),this.scroll&&this.schedule(function(){e.scroll.node.getComponent(cc.ScrollView).getContentPosition().y>900?(e.scrollType=1,e.dict.positionBtnText.getComponent(cc.Label).string="\u56de\u5230\u9876\u90e8",e.dict.positionBtnIcon.getComponent(cc.Sprite).spriteFrame=e.btnIconSpriteFrame[e.scrollType]):(e.scrollType=0,e.dict.positionBtnText.getComponent(cc.Label).string="\u6211\u7684\u4f4d\u7f6e",e.dict.positionBtnIcon.getComponent(cc.Sprite).spriteFrame=e.btnIconSpriteFrame[e.scrollType])},.5)},e.prototype.longtouAnim=function(){var t=this;this.dict.longtou.getComponent(sp.Skeleton).setAnimation(0,"angry",!0),this.schedule(function(){"angry"==t.animName?(t.dict.longtou.getComponent(sp.Skeleton).setAnimation(0,"idle1",!0),t.animName="idle1"):(t.dict.longtou.getComponent(sp.Skeleton).setAnimation(0,"angry",!0),t.animName="angry")},5)},e.prototype.limitWelfareBtn=function(){console.log("limitWelfareBtn"),cc.game.emit("gamelog_Thinking",B.ShuShuConst.btn,{id:"009"}),v.default.show(c.PopupConst.LimitWelfare)},e.prototype.shareBtn=function(){m.Platform.share()},e.prototype.vipBtn=function(){v.default.show(c.PopupConst.VIP)},e.prototype.specialBtn=function(){v.default.show(c.PopupConst.SpecialGift)},e.prototype.newHandBtn=function(){v.default.show(c.PopupConst.NewHand)},e.prototype.supervalueBtn=function(){v.default.show(c.PopupConst.Supervalue)},e.prototype.noADBtn=function(){},e.prototype.shipBtn=function(){N.default.set(I.default.todayClickShip,1),this.dict.shipHint.active=!1,N.default.get(I.default.todayShipExpire)?v.default.show(c.PopupConst.ShipRace):this.dict.shipTime.parent.active?(T.default.set(P.default.openShipWay,"home"),v.default.show(c.PopupConst.ShipRace2,null,!1)):v.default.show(c.PopupConst.ShipRace)},e.prototype.turntableBtn=function(){var t,e=_.User.get(h.UserData.LEVEL_LIST)||{},o=N.default.get(I.default.canTurntableTimes)||0;t=e[0]<=6?6-o:8-o,this.dict.turntableProgressSF.getComponent(cc.Sprite).fillRange>=1?v.default.show(c.PopupConst.LuckTurntable):L.Tip.show(g.default.formatStr("\u518d\u901a\u8fc7%d\u5173\u5f00\u542f",t))},e.prototype.planBtn=function(){N.default.set(I.default.todayClickPlan,1),this.dict.planHint.active=!1,v.default.show(c.PopupConst.Plan,null,!1)},e.prototype.challengeBtn=function(){this.isLoadingScene||(this.isLoadingScene=!0,N.default.set(I.default.todayClickChallenge,1),this.dict.challengeHint.active=!1,y.default.loadScene(l.SceneConst.Challenge))},e.prototype.collectBtn=function(){v.default.show(c.PopupConst.Collect)},e.prototype.roleBtn=function(){v.default.show(c.PopupConst.Role)},e.prototype.mapBtn=function(){v.default.show(c.PopupConst.Map)},e.prototype.hideLimitWelfareBtn=function(){this.dict.limitWelfareBtn.active=!1},e.prototype.onEnable=function(){f.Event.on(a.default.UPDATE_INFINITE_POWER,this.updateInfinitePower,this),f.Event.on(a.default.updateUnlockAllMode,this.updateUnlockAllMode,this),f.Event.on(a.default.ENTER_ID,this.sucEnterByMode,this),f.Event.on(a.default.hideLimitWelfareBtn,this.hideLimitWelfareBtn,this),f.Event.on(a.default.COIN_UPDATE,this.changeKey,this),cc.game.on("signInHint",this.signInHint,this),cc.game.on("skinHint",this.skinHint,this),cc.game.on("hasPurchase",this.hasPurchase,this),cc.game.on("showHomeCoin",this.showHomeCoin,this),cc.game.on("special_pack",this.special_pack,this),cc.game.on("remove_ads",this.remove_ads,this),cc.game.on("canTurntableTimes",this.canTurntableTimes,this),cc.game.on("updateShipTime",this.updateShipTime,this),cc.game.on("shipExpire",this.shipExpire,this),cc.game.on("clickStart",this.clickStart,this),cc.game.on("piggy_bank",this.piggy_bank,this),cc.game.on("ChallengeSys",this.ChallengeSys,this),cc.game.on("challengeExpire",this.challengeExpire,this),cc.game.on("challengeExpire_timerFun",this.challengeExpire_timerFun,this),cc.game.on("starter_pack",this.starter_pack,this),m.Platform.is(s.EPlatform.XIAOMI_ANDROID)?k.XMAD.showBannerFeed():m.Platform.is(s.EPlatform.OPPO_ANDROID)?S.OPPOAndroidAd.showBannerFeed():m.Platform.is(s.EPlatform.VIVO)&&A.VIVOAD.showCustomAd_1()},e.prototype.onDisable=function(){f.Event.off(a.default.UPDATE_INFINITE_POWER,this.updateInfinitePower,this),f.Event.off(a.default.updateUnlockAllMode,this.updateUnlockAllMode,this),f.Event.off(a.default.ENTER_ID,this.sucEnterByMode,this),f.Event.off(a.default.hideLimitWelfareBtn,this.hideLimitWelfareBtn,this),f.Event.off(a.default.COIN_UPDATE,this.changeKey,this),cc.game.off("signInHint",this.signInHint,this),cc.game.off("skinHint",this.skinHint,this),cc.game.off("hasPurchase",this.hasPurchase,this),cc.game.off("showHomeCoin",this.showHomeCoin,this),cc.game.off("special_pack",this.special_pack,this),cc.game.off("remove_ads",this.remove_ads,this),cc.game.off("canTurntableTimes",this.canTurntableTimes,this),cc.game.off("updateShipTime",this.updateShipTime,this),cc.game.off("shipExpire",this.shipExpire,this),cc.game.off("clickStart",this.clickStart,this),cc.game.off("piggy_bank",this.piggy_bank,this),cc.game.off("ChallengeSys",this.ChallengeSys,this),cc.game.off("challengeExpire",this.challengeExpire,this),cc.game.off("challengeExpire_timerFun",this.challengeExpire_timerFun,this),cc.game.off("starter_pack",this.starter_pack,this),m.Platform.hideCustomAd_1(),m.Platform.hideCustomAd_2()},e.prototype.updateInfinitePower=function(t){this.dict.infinitePowerBtn&&(this.dict.infinitePowerBtn.active=!t)},e.prototype.updateUnlockAllMode=function(){this.dict.unlockAllModeBtn&&(this.dict.unlockAllModeBtn.active=!1)},e.prototype.initView=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,i,n,l,g,y,C,b,S,w,A,k,B,M,L,E,x,U,O,F,W,V,H,G,j,z,q,K,X,J,Y,Q,Z,$,tt,et,ot,it,nt,rt,at,st,ct,lt=this;return __generator(this,function(ht){switch(ht.label){case 0:return t=_.User.get(h.UserData.LEVEL_LIST)||{},[4,p.Config.get(r.ConfigConst.THEME)];case 1:for(e=ht.sent(),_.User.setTempData(h.TempData.CURRENT_ALL_MODE,e),M=0;M<e.length;M++)n=e[M].theme,t[n]||(t[n]=1),2==e[M].id?this.secondModeData=e[M]:e[M].id>=3&&this.thirdModesData.push(e[M]),this.darenModesData.push(e[M]);for(_.User.set(h.UserData.LEVEL_LIST,t),o=_.User.get(h.UserData.ALREADY_PLAY)||{},M=0;M<e.length;M++)n=e[M].theme,o[n]||(o[n]=[]);for(_.User.set(h.UserData.ALREADY_PLAY,o),i=_.User.get(h.UserData.ALREADY_UNLOCK)||{},M=0;M<e.length;M++)n=e[M].theme,i[n]||(i[n]=[1]);if(_.User.set(h.UserData.ALREADY_UNLOCK,i),l=_.User.get(h.UserData.UNLOCK_ALL_MODE_VIDEO_TIMES)||0,g=_.User.get(h.UserData.UNLOCK_MODE_LIST)||[],this.dict.unlockAllModeBtn&&(2==l||g.length>=e.length)&&(this.dict.unlockAllModeBtn.active=!1),_.User.setTempData(h.TempData.POWER_TYPE,1),_.User.get(h.UserData.FIRST_DAY_DATE)){if(console.log("\u8001\u7528\u6237",m.Platform.getConfig().flag.indexOf("tt")),-1!=m.Platform.getConfig().flag.indexOf("tt")&&(b=_.User.get(h.UserData.IS_COMPATIBLE_233)||0,console.log("\u662f\u5426\u5df2\u7ecf\u517c\u5bb9",b),!b)){for(k in S=_.User.get(h.UserData.LEVEL_LIST),console.log("levelList",JSON.stringify(S)),w={},A={},S){for(B=S[k],w[k]=[],A[k]=[],M=1;M<=B-1&&!(w[k].length>=580);M++)w[k].push(M);for(M=1;M<=B&&!(w[k].length>=580);M++)A[k].push(M)}console.log("\u901a\u5173\u5217\u8868",JSON.stringify(w)),console.log("\u89e3\u9501\u5217\u8868",JSON.stringify(A)),_.User.set(h.UserData.IS_COMPATIBLE_233,1),_.User.set(h.UserData.ALREADY_PLAY,w),_.User.set(h.UserData.ALREADY_UNLOCK,A)}}else{for(k in _.User.set(h.UserData.FIRST_DAY_DATE,(new Date).getDate()),y=_.User.get(h.UserData.LEVEL_LIST),C={},A={},y)C[k]=[],A[k]=[1];_.User.set(h.UserData.IS_COMPATIBLE_233,1),_.User.set(h.UserData.ALREADY_PLAY,C),_.User.set(h.UserData.ALREADY_UNLOCK,A)}return L=u.BMS.getKey("GM"),this.dict.cheats.active=!!L,E=u.BMS.getKey("AllThemeUnlock"),this.dict.unlockAllModeBtn&&(this.dict.unlockAllModeBtn.active=!!E),x=u.BMS.getKey("WuxianTiLi"),this.dict.infinitePowerBtn&&(this.dict.infinitePowerBtn.active=0!=x),_.User.get(h.UserData.INF_POWER_VIDEO_TIMES)>=3&&this.updateInfinitePower(!0),d.Audio.stopMusic(),cc.game.emit("gamelog","page001"),this.dict.version.getComponent(cc.Label).string="v"+m.Platform.getConfig().version,m.Platform.is(s.EPlatform.WEB)?(this.dict.orderID.active=!0,this.dict.orderBtn.active=!0):(this.dict.orderID.active=!1,this.dict.orderBtn.active=!1),window.wrongful&&v.default.show(c.PopupConst.STOP),this.judgeMainMode(0),this.getRank(),this.updateSkin(),U=_.User.get("shakeAmount")||4,_.User.set("shakeAmount",U),N.default.get(I.default.todaySignIn),O=N.default.get(I.default.todayOpenSignIn)||0,F=N.default.get(I.default.signInDays)||0,this.dict.signInBtn.active=F<7,this.dict.signInHint.active=F<7&&0==O,this.skinHint(),this.dict.limitWelfareBtn.active=!1,window.tt&&["Douyin","douyin_lite","live_stream","aweme_hotsoon"].some(function(t){return t==window.tt.getSystemInfoSync().appName})&&(W=_.User.get(h.UserData.EnterSidebar)||0,console.log("\u5224\u65ad\u6309\u94ae",W,2!=W),2!=W?(console.log("\u663e\u793a\u6309\u94ae"),this.dict.limitWelfareBtn.active=!0):(console.log("\u4e0d\u663e\u793a\u6309\u94ae"),this.dict.limitWelfareBtn.active=!1)),this.hasPurchase(),"all"==u.BMS.getKey("share")&&(this.dict.shareBtn.active=!0),V=_.User.getTempData("backByGame"),H=T.default.get(P.default.isVIP),G=N.default.get(I.default.backTimes)||0,m.Platform.getConfig().hasPurchase&&m.Platform.getConfig().hasVIP&&V&&!H&&2==G&&v.default.show(c.PopupConst.VIP),(j=u.BMS.getKey("BackHomeAd"))&&V&&G>=j&&(console.log("BackHomeAd-\u89e6\u53d1\u63d2\u5c4f\u5e7f\u544a"),f.Event.emit(a.default.checkFullAd)),_.User.setTempData("backByGame",!1),z=N.default.get(I.default.isReceiveVIP)||0,H&&!z&&(q=N.default.get(I.default.cardAmount)||0,K=q+5,N.default.set(I.default.cardAmount,K),T.default.set(P.default.rewardType,"VIPCard"),T.default.set(P.default.reward,[["card",5]]),N.default.set(I.default.isReceiveVIP,1),v.default.show(c.PopupConst.Get)),this.dict.vipTime&&(H?(this.dict.vipTime.active=!0,this.dict.vipTime.getComponent(cc.Label).string=R.default.getSurplusTimeStr()):this.dict.vipTime.active=!1),this.dict.specialBtn&&(X=N.default.get(I.default.hasSpecialBtn)||0,J=T.default.get(P.default.special_pack)||!1,this.dict.specialBtn.active=!X&&!J),this.dict.newHandBtn&&(Y=N.default.get(I.default.starter_pack)||0,this.dict.newHandBtn.active=!Y),this.dict.newHandBtn&&(this.dict.newHandBtn.active||(Q=N.default.get(I.default.value_pack)||0,this.dict.supervalueBtn.active=!Q)),Z=N.default.get(I.default.isNoAD)||0,$=T.default.get(P.default.remove_ads)||!1,tt=T.default.get(P.default.remove_ads_pack)||!1,N.default.set(I.default.isNoAD,Z),this.dict.noADBtn&&(Z||$||tt?(this.dict.noADBtn.active=!1,N.default.set(I.default.isNoAD,1)):this.dict.noADBtn.active=!0),et=_.User.get(h.UserData.boreTimes)||0,ot=_.User.get(h.UserData.tipTimes)||0,it=_.User.get(h.UserData.screwBoxTimes)||0,!_.User.get("NewVersion")&&(et||ot||it)&&(_.User.set("NewVersion",!0),v.default.show(c.PopupConst.NewVersion)),this.canTurntableTimes(),this.dict.shipBtn&&(nt=N.default.get(I.default.shipStartTime)||0,t[0]>=4?this.dict.shipBtn.active=!0:this.dict.shipBtn.active=!1,m.Platform.getConfig().hasShip||(this.dict.shipBtn.active=!1),this.dict.shipTime.parent.active=0!=nt),this.dict.shipHint&&(rt=N.default.get(I.default.todayClickShip)||0,this.dict.shipHint.active=!rt),this.dict.vipBtn&&(m.Platform.getConfig().hasPurchase?(this.dict.shopBtn.active=!0,m.Platform.getConfig().hasVIP&&(this.dict.vipBtn.active=!0),this.dict.universalCard.active=!0,this.dict.turntableBtn.active=!0):(this.dict.noADBtn.active=!1,this.dict.specialBtn.active=!1,this.dict.vipBtn.active=!1,this.dict.shopBtn.active=!1,this.dict.universalCard.active=!1,this.dict.shipBtn.active=!1,this.dict.turntableBtn.active=!1,this.dict.newHandBtn.active=!1,this.dict.supervalueBtn.active=!1)),this.dict.universalCard&&(this.dict.universalCard.active=!1),m.Platform.getConfig().hasPurchase&&this.dict.planBtn&&(this.dict.planBtn.active=t[0]>=2,at=N.default.get(I.default.todayClickPlan)||0,this.dict.planHint.active=!at),m.Platform.getConfig().hasPurchase&&this.dict.challengeBtn&&(this.dict.challengeBtn.active=t[0]>4),st=N.default.get(I.default.todayClickChallenge)||0,ct=N.default.get(I.default.challengeStartTime)||0,this.dict.challengeTime&&(ct?(this.dict.challengeHint.active=!st,this.dict.challengeTime.parent.active=!0,this.dict.challengeTime.getComponent(cc.Label).string=D.default.getSurplusTimeStr()):this.dict.challengeTime.parent.active=!1),this.dict.pigBtn&&(this.dict.pigBtn.active=!1),this.changeKey(),this.dict.green1&&(this.dict.green1.opacity=0,this.dict.yellow1.opacity=0,this.dict.blue3.opacity=0,this.dict.red3.opacity=0,this.carMove1(),this.scheduleOnce(function(){lt.carMove2()},.6)),[2]}})})},e.prototype.heroLevelBtn=function(){v.default.show(c.PopupConst.Role)},e.prototype.carMove1=function(){var t,e=this;(t=this.moveTimes?this.dict.green1:this.dict.yellow1).opacity=255,cc.tween(t).by((cc.winSize.width+200)/this.carSpeed,{x:cc.winSize.width+200}).call(function(){e.moveTimes=!e.moveTimes,t.position=cc.v2(-476.534,-59),t.opacity=0;var o=w.Utils.randomNum(2,6);e.scheduleOnce(function(){e.carMove1()},o)}).start()},e.prototype.carMove2=function(){var t,e=this;(t=this.moveTimes2?this.dict.blue3:this.dict.red3).opacity=255,cc.tween(t).by((cc.winSize.width+300)/this.carSpeed,{x:-(cc.winSize.width+300)}).call(function(){e.moveTimes2=!e.moveTimes2,t.position=cc.v2(520.17,52.917),t.opacity=0;var o=w.Utils.randomNum(2,6);e.scheduleOnce(function(){e.carMove2()},o)}).start()},e.prototype.starter_pack=function(){this.dict.newHandBtn.active=!1;var t=N.default.get(I.default.value_pack)||0;this.dict.supervalueBtn.active=!t},e.prototype.changeKey=function(){if(this.dict.coinAmount){var t=_.User.get("coin")||0;this.dict.coinAmount.getComponent(cc.Label).string=""+t}},e.prototype.piggy_bank=function(){this.dict.pigBtn.active=!1},e.prototype.ChallengeSys=function(){if(this.dict.challengeTime){var t=N.default.get(I.default.todayClickChallenge)||0;N.default.get(I.default.challengeStartTime)?(this.dict.challengeHint.active=!t,this.dict.challengeTime.parent.active=!0,this.dict.challengeTime.getComponent(cc.Label).string=D.default.getSurplusTimeStr()):this.dict.challengeTime.parent.active=!1}},e.prototype.challengeExpire=function(){this.dict.challengeTime&&(this.dict.challengeTime.parent.active=!1)},e.prototype.challengeExpire_timerFun=function(){this.dict.challengeTime&&(this.dict.challengeTime.getComponent(cc.Label).string=D.default.getSurplusTimeStr())},e.prototype.updateShipTime=function(){},e.prototype.shipExpire=function(){this.dict.shipTime.parent.active=!1},e.prototype.special_pack=function(){this.dict.specialBtn.active=!1},e.prototype.remove_ads=function(){this.dict.noADBtn.active=!1},e.prototype.canTurntableTimes=function(){if(this.dict.turntableProgress){var t=_.User.get(h.UserData.LEVEL_LIST)||{},e=N.default.get(I.default.canTurntableTimes)||0,o=8;N.default.get(I.default.isFirstTurntable)||(o=6),e<=0&&(e=0),t[0],this.dict.turntableProgress.getComponent(cc.Label).string=e+"/"+o,this.dict.turntableProgressSF.getComponent(cc.Sprite).fillRange=e/o}},e.prototype.hasPurchase=function(){this.dict.shopBtn&&(m.Platform.getConfig().hasPurchase?this.dict.shopBtn.active=!0:this.dict.shopBtn.active=!1)},e.prototype.signInHint=function(){this.dict.signInHint.active=!1},e.prototype.skinHint=function(){this.dict.skinHint&&(_.User.get(h.UserData.getLockSkinList)[0].length?this.dict.skinHint.active=!0:this.dict.skinHint.active=!1)},e.prototype.updateSkin=function(){var t=_.User.get(h.UserData.skinList)||{0:[0],1:[0],2:[9],3:[0],4:[0],5:[0]};_.User.set(h.UserData.skinList,t);var e=_.User.get(h.UserData.useSkinIDList)||{0:0,1:0,2:9,3:0,4:0,5:0};_.User.set(h.UserData.useSkinIDList,e);var o=_.User.get(h.UserData.getLockSkinList)||{0:[],1:[],2:[],3:[],4:[],5:[]};_.User.set(h.UserData.getLockSkinList,o)},e.prototype.topBtn=function(){this.scroll.node.getComponent(cc.ScrollView).scrollToPercentVertical(1,1)},e.prototype.rankBtn=function(){cc.game.emit("gamelog_Thinking",B.ShuShuConst.btn,{id:"005"}),m.Platform.is(s.EPlatform.TT)?m.Platform.showRankList():v.default.show(c.PopupConst.Rank)},e.prototype.positionBtn=function(){if(this.scrollType)this.scroll.node.getComponent(cc.ScrollView).scrollToPercentVertical(1,1);else{var t=1*(this.rankList.length-this.myRank)/(this.rankList.length-1);console.log(this.myRank,t),this.scroll.node.getComponent(cc.ScrollView).scrollToPercentVertical(t,1)}},e.prototype.playBtn=function(){v.default.show(c.PopupConst.Play)},e.prototype.showHomeCoin=function(){this.dict.addCoinBtn.active=!0},e.prototype.signInBtn=function(){cc.game.emit("gamelog_Thinking",B.ShuShuConst.btn,{id:"006"}),N.default.set(I.default.todayOpenSignIn,1),this.dict.signInHint.active=!1,v.default.show(c.PopupConst.SignIn)},e.prototype.shopBtn=function(){if(!this.isLoadingScene){this.isLoadingScene=!0,cc.game.emit("gamelog_Thinking",B.ShuShuConst.btn,{id:"shopBtn"});var t=_.User.getTempData("currentScene_");t&&cc.game.emit("gamelog_Thinking",B.ShuShuConst.Store_page,{id:t}),y.default.loadScene(l.SceneConst.CardShop)}},e.prototype.skinBtn=function(){cc.game.emit("gamelog_Thinking",B.ShuShuConst.btn,{id:"004"}),v.default.show(c.PopupConst.Skin)},e.prototype.getRank=function(){var t=this,e=new Date,o=this.showTime(e.getMonth()+1),i=this.showTime(e.getDate()),n="province_"+o+i+"_"+m.Platform.getConfig().rank;"haiwai"==m.Platform.getConfig().rank&&(n="country_"+o+i+"_"+m.Platform.getConfig().rank),console.log("rank_name",n),C.challengeHttp.getRank(n,"1").then(function(e){if(console.log("\u6392\u884c\u699c\u6570\u636e",e),e.total){var o=[],i=0;for(var a in e.list)i+=1,o.push({id:i,province:a,score:e.list[a].score});t.rankList=o,t.sucGetRank()}else{var s=r.ConfigConst.Rank;"haiwai"==m.Platform.getConfig().rank&&(s=r.ConfigConst.RankHW),p.Config.get(s).then(function(e){console.log("\u5047\u6570\u636e",e);for(var o=0;o<e.length;o++){var i=e[o];C.challengeHttp.incrRank(n,i.province,i.score).then(function(){console.log("\u987a\u4fbf\u4e0a\u4f20")})}t.rankList=e,t.rankList.sort(function(t,e){return e.score-t.score}),t.sucGetRank()})}})},e.prototype.sucGetRank=function(){var t,e=this;this.scroll&&(this.scroll.onItemRender=this.onItemRender.bind(this),this.scroll.onItemClicked=this.onItemClicked.bind(this),this.scroll.numItems=this.rankList.length),this.rankList.forEach(function(t){t.score}),t=m.Platform.getConfig().rank.includes("haiwai")?"nation":"province";var o=this.rankList.findIndex(function(e){return e.province==_.User.get(t)});-1==o&&(o=this.rankList.length),this.myRank=o+1,this.dict.myRank.getComponent(cc.Label).string=g.default.formatStr("\u6211\u7684\u5730\u533a\u6392\u540d\uff1a\u7b2c%d\u540d",this.myRank),cc.tween(this.dict.todayAmount).delay(3).to(2,{x:-750}).call(function(){e.dict.todayAmount.x=750}).to(2,{x:0}).union().repeatForever().start();var i=new Date,n=this.showTime(i.getMonth()+1),r=this.showTime(i.getDate()),a="people_"+n+r+m.Platform.getConfig().rank;"haiwai"==m.Platform.getConfig().rank&&(a="countryPeople_"+n+r+"_"+m.Platform.getConfig().rank),C.challengeHttp.getRank(a,"1").then(function(t){if(console.log("\u4eba\u6570\u6392\u884c\u699c\u6570\u636e",t),t.total){var o=0;for(var i in t.list)o+=t.list[i].score;e.dict.todayAmount.getComponent(cc.Label).string=g.default.formatStr("\u4eca\u5929%d\u4eba\u6311\u6218\uff0c\u5171\u6709%d\u4eba\u901a\u5173",18*o+w.Utils.randomNum(10,20),o)}else"haiwai"==m.Platform.getConfig().rank?C.challengeHttp.incrRank(a,"US",99).then(function(){console.log("\u987a\u4fbf\u4e0a\u4f20")}):C.challengeHttp.incrRank(a,"\u5e7f\u4e1c",99).then(function(){console.log("\u987a\u4fbf\u4e0a\u4f20")}),e.dict.todayAmount.getComponent(cc.Label).string=g.default.formatStr("\u4eca\u5929%d\u4eba\u6311\u6218\uff0c\u5171\u6709%d\u4eba\u901a\u5173",1782+w.Utils.randomNum(10,20),99)})},e.prototype.showTime=function(t){return t>10?t:"0"+t},e.prototype.onItemRender=function(t,e){var o=e.getComponent(M.default),i=(M.default.state.Normal,{index:t,province:this.rankList[t].province,score:this.rankList[t].score});o.setData(i)},e.prototype.onItemClicked=function(){},e.prototype.judgeMainMode=function(t){var e,o=this,i=_.User.get(h.UserData.mode0LevelList_stage1ID)||[],n=_.User.get(h.UserData.mode0LevelList_stage2ID)||[],a=_.User.get(h.UserData.mode1LevelList_stage1ID)||[],c=_.User.get(h.UserData.mode1LevelList_stage2ID)||[],l=(_.User.get(h.UserData.mode2LevelList_stage1ID),_.User.get(h.UserData.mode2LevelList_stage2ID),[]),d=[],f=[],g=[];0==t?p.Config.get(r.ConfigConst.THEME+0+m.Platform.getConfig().configSuffix).then(function(t){if(m.Platform.is(s.EPlatform.WEB)){for(var o=0;o<t.length;o++){var r=t[o];l.push(r.stage1ID),d.push(r.stage2ID)}_.User.set(h.UserData.mode0LevelList_stage1ID,l),_.User.set(h.UserData.mode0LevelList_stage2ID,d)}else if(t.length>i.length&&0!=i.length){for(o=0;o<t.length;o++)r=t[o],o>i.length-1&&(l.push(r.stage1ID),d.push(r.stage2ID));l.sort(function(){return.5-Math.random()}),d.sort(function(){return.5-Math.random()}),l=i.concat(l),d=n.concat(d),console.log("\u6709\u65b0\u589e\u5173\u5361"),_.User.set(h.UserData.mode0LevelList_stage1ID,l),_.User.set(h.UserData.mode0LevelList_stage2ID,d)}else if(0==i.length){var a=[],c=[],p=[],f=[],g=[],v=[],y=[],C=[];for(o=0;o<t.length;o++)r=t[o],0==o&&(e=r.stage1ID),o<5?(a.push(r.stage1ID),c.push(r.stage2ID)):o<10?(p.push(r.stage1ID),f.push(r.stage2ID)):o<50?(g.push(r.stage1ID),v.push(r.stage2ID)):(y.push(r.stage1ID),C.push(r.stage2ID));if(l=a.concat(p).concat(g).concat(y),d=c.concat(f).concat(v).concat(C),u.BMS.getKey("mainModeID"))l=p.concat(a).concat(g),d=f.concat(c).concat(v);else{var b=l.indexOf(e),S=l[0];l[0]=e,l[b]=S}console.log("\u6ca1\u6709\u65b0\u589e\u5173\u5361\u4e14\u662f\u65b0\u7528\u6237"),_.User.set(h.UserData.mode0LevelList_stage1ID,l),_.User.set(h.UserData.mode0LevelList_stage2ID,d)}else console.log("\u8001\u7528\u6237")}):1==t?p.Config.get(r.ConfigConst.THEME+1).then(function(t){if(m.Platform.is(s.EPlatform.WEB)){for(var e=0;e<t.length;e++){var o=t[e];f.push(o.stage1ID),g.push(o.stage2ID)}_.User.set(h.UserData.mode1LevelList_stage1ID,f),_.User.set(h.UserData.mode1LevelList_stage2ID,g)}else if(t.length>a.length&&0!=a.length){for(e=0;e<t.length;e++)o=t[e],e>a.length-1&&(f.push(o.stage1ID),g.push(o.stage2ID));f.sort(function(){return.5-Math.random()}),g.sort(function(){return.5-Math.random()}),f=a.concat(f),g=c.concat(g),_.User.set(h.UserData.mode1LevelList_stage1ID,f),_.User.set(h.UserData.mode1LevelList_stage2ID,g)}else if(0==a.length){var i=[],n=[],r=[],l=[];for(e=0;e<t.length;e++)o=t[e],e<5?(i.push(o.stage1ID),n.push(o.stage2ID)):(r.push(o.stage1ID),l.push(o.stage2ID));i.sort(function(){return.5-Math.random()}),n.sort(function(){return.5-Math.random()}),r.sort(function(){return.5-Math.random()}),l.sort(function(){return.5-Math.random()}),f=i.concat(r),g=n.concat(l),_.User.set(h.UserData.mode1LevelList_stage1ID,f),_.User.set(h.UserData.mode1LevelList_stage2ID,g)}else console.log("\u8001\u7528\u6237");console.log("\u6e05\u7406",f,g)}):p.Config.get(r.ConfigConst.THEME).then(function(e){e.forEach(function(e){e.theme>=t&&o.handleModeByID(e.theme)})})},e.prototype.handleModeByID=function(t,e){var o=[],i=[],n=_.User.get("mode"+t+"LevelList_stage1ID")||[],a=_.User.get("mode"+t+"LevelList_stage2ID")||[];p.Config.get(r.ConfigConst.THEME+t).then(function(r){if(m.Platform.is(s.EPlatform.WEB)){for(var c=0;c<r.length;c++){var l=r[c];o.push(l.stage1ID),i.push(l.stage2ID)}_.User.set("mode"+t+"LevelList_stage1ID",o),_.User.set("mode"+t+"LevelList_stage2ID",i)}else if(r.length>n.length&&0!=n.length){for(c=0;c<r.length;c++)l=r[c],c>n.length-1&&(o.push(l.stage1ID),i.push(l.stage2ID));o=n.concat(o),i=a.concat(i),_.User.set("mode"+t+"LevelList_stage1ID",o),_.User.set("mode"+t+"LevelList_stage2ID",i)}else if(0==n.length){for(c=0;c<r.length;c++)l=r[c],o.push(l.stage1ID),i.push(l.stage2ID);_.User.set("mode"+t+"LevelList_stage1ID",o),_.User.set("mode"+t+"LevelList_stage2ID",i)}e&&e()})},e.prototype.updateModeView=function(){var t=this;this.dict.secondBtn.children[0].getComponent(cc.Label).string=this.secondModeData.themeName;for(var e=function(e){var i=o.dict.moreModeBg.children[0].children[e].children[0];i.name=o.thirdModesData[e].theme+"",i.getComponent(cc.Label).string=o.thirdModesData[e].themeName,i.parent.getComponent(cc.Button)||i.parent.addComponent(cc.Button);var n=i.parent.getComponent(cc.Button);n.transition=cc.Button.Transition.SCALE,n.duration=.1,n.zoomScale=1.2,i.parent.on(cc.Node.EventType.TOUCH_END,function(){cc.game.emit("playClickAudio");var o=t.thirdModesData[e].theme;cc.game.emit("gamelog","modebtn_"+o),t.enterByMode(o)},o)},o=this,i=0;i<this.thirdModesData.length;i++)e(i);var n=function(e){var o=r.dict.darenModes.children[1].children[e].children[0];o.name=r.darenModesData[e].theme+"",o.getComponent(cc.Label).string=r.darenModesData[e].themeName,o.parent.getComponent(cc.Button)||o.parent.addComponent(cc.Button);var i=o.parent.getComponent(cc.Button);i.transition=cc.Button.Transition.SCALE,i.duration=.1,i.zoomScale=1.2,o.parent.on(cc.Node.EventType.TOUCH_END,function(){var o=t.darenModesData[e].theme;t.enterByMode2(o)},r)},r=this;for(i=0;i<this.darenModesData.length;i++)n(i)},e.prototype.initPlatformUI=function(){var t=m.Platform.getConfig();if(t.fitUIType!=s.FitUIType.TT&&t.fitUIType!=s.FitUIType.KS||(this.dict.topBar.getComponent(cc.Widget).top=30,this.dict.topBar.getComponent(cc.Widget).updateAlignment()),cc.view.getFrameSize().width/cc.view.getFrameSize().height<.5&&(this.dict.bottomBar.getComponent(cc.Widget).bottom=100,this.dict.bottomBar.getComponent(cc.Widget).updateAlignment()),t.hasAgeTip){this.dict.ageBtn.active=!0;var e=m.Platform.getConfig().ageTipType;e==s.AgeTipType.AGE_12&&(this.dict.ageBtn.getComponent(cc.Sprite).spriteFrame=this.ageSpriteFrame[e])}if(this.dict.privacyBtn&&(this.dict.privacyBtn.active=!1,t.privacyPolicyType!=s.PrivacyPolicyType.NO&&(this.dict.privacyBtn.active=!0)),this.dict.moreGameBtn&&(this.dict.moreGameBtn.active=!1,t.hasMoreGame&&(this.dict.moreGameBtn.active=!0)),this.dict.customerService&&(this.dict.customerService.active=!1,t.hasCustomerService&&(this.dict.customerService.active=!0)),m.Platform.is(s.EPlatform.OHAYOO_ANDROID)&&this.dict.privacyBtn&&(this.dict.privacyBtn.children[0].getComponent(cc.Label).string="\u9690\u79c1\n\u8bbe\u7f6e"),m.Platform.is(s.EPlatform.QQ)&&(this.dict.appointBtn.active=!0),m.Platform.is(s.EPlatform.HW)&&(this.dict.privacyBtn.x-=100),m.Platform.is(s.EPlatform.WX)){var o=u.BMS.getKey("ys5x5");if(console.log("ys5x5",o),o){var i=window.wx.getSystemInfoSync().windowHeight/2-250;console.log("\u6d4b\u8bd5showBlockAds"),m.Platform.showBlockAds({top:i,left:0,id:"",hideCb:function(){m.Platform.hideBlockAds(),setTimeout(function(){},300)}},function(t){0==t||(m.Platform.hideBlockAds(),setTimeout(function(){},300))})}}t.privacyPolicyType==s.PrivacyPolicyType.MINI_GAME_XM&&(this.dict.ageBtn.active=!0)},e.prototype.isDOUYIN=function(){var t=window.tt&&window.tt.getSystemInfoSync();if(!t)return!1;switch(t.appName){case"Douyin":return!0;default:return!1}},e.prototype.clickSet=function(){cc.game.emit("gamelog","btn004"),v.default.show(c.PopupConst.SET)},e.prototype.clickStart=function(){if(!this.isLoadingScene){this.isLoadingScene=!0,T.default.set(P.default.ThemeType,0),cc.game.emit("gamelog_Thinking",B.ShuShuConst.btn,{id:"001"}),cc.game.emit("gamelog","btn001"),_.User.setTempData(h.TempData.CURRENT_MODE,0);var t=_.User.get(h.UserData.LEVEL_LIST);b.ConfigUtils.setNextModeID();var e=1;b.ConfigUtils.getDataByID(0,function(o){console.log("res - ",o),e=o.amount,t[0]>e?_.User.setTempData(h.TempData.CURRENT_LEVEL,1):_.User.setTempData(h.TempData.CURRENT_LEVEL,t[0]),y.default.loadScene(l.SceneConst.GAME)})}},e.prototype.clickInfinitePower=function(){cc.game.emit("gamelog","btn007"),cc.game.emit("gamelog","page011"),v.default.show(c.PopupConst.INFINITE_POWER)},e.prototype.clickHotMode=function(){this.isLoadingScene||(this.isLoadingScene=!0,cc.game.emit("gamelog","btn002"),y.default.loadScene(l.SceneConst.MODE_SELECT,1))},e.prototype.clickMoreMode=function(){this.isLoadingScene||(this.isLoadingScene=!0,cc.game.emit("gamelog","btn003"),y.default.loadScene(l.SceneConst.MODE_SELECT,2))},e.prototype.clickCheats=function(){this.clickTimes+=1,console.log("["+this.clickTimes+"]"),this.clickTimes>=8&&(v.default.show(c.PopupConst.CHEATS),this.clickTimes=0)},e.prototype.clickAge=function(){v.default.show(c.PopupConst.AGE_TIP)},e.prototype.clickPrivacy=function(){var t=this,e=m.Platform.getConfig();if(e.privacyPolicyType==s.PrivacyPolicyType.MINI_GAME||e.privacyPolicyType==s.PrivacyPolicyType.MINI_GAME_VIVO||e.privacyPolicyType==s.PrivacyPolicyType.MINI_GAME_XM){if(this.isLoadPrivacy)return;this.isLoadPrivacy=!0,cc.resources.load("prefab/popup/PrivacyPolicy",function(e,o){if(t.isLoadPrivacy=!1,e)console.error(e);else{var i=cc.instantiate(o);t.node.addChild(i),i.getComponent("PrivacyPolicy").open()}})}else e.privacyPolicyType==s.PrivacyPolicyType.NATIVE&&m.Platform.showPrivacyPolicy()},e.prototype.clickAppoint=function(){var t=this;this.isLoadPrivacy||(this.isLoadPrivacy=!0,cc.resources.load("prefab/popup/PrivacyPolicy",function(e,o){if(t.isLoadPrivacy=!1,e)console.error(e);else{var i=cc.instantiate(o);t.node.addChild(i),i.getComponent("PrivacyPolicy").openUserPanelHandle()}}))},e.prototype.clickMoreGame=function(){m.Platform.showMoreGame()},e.prototype.clickLevelSelect=function(){this.isLoadingScene||(this.isLoadingScene=!0,cc.game.emit("gamelog","page002"),_.User.setTempData(h.TempData.CURRENT_MODE,0),y.default.loadScene(l.SceneConst.LEVEL_SELECT))},e.prototype.clickCreateBtn=function(){cc.game.emit("gamelog","btn027"),!u.BMS.getKey("ugcad")||_.User.get(h.UserData.isUnlockUgc)?this.isEnterUgc||(this.isEnterUgc=!0,y.default.loadScene(l.SceneConst.UGC)):v.default.show(c.PopupConst.UNLOCK_UGC)},e.prototype.clickAgeBtn=function(){v.default.show(c.PopupConst.AGE_TIP)},e.prototype.modeBtnFuc=function(t){var e=this;985==t?T.default.set(P.default.ThemeType,1):T.default.set(P.default.ThemeType,0),this.dict["mode"+t+"BtnVideo"].active?m.Platform.showRewardAds(function(o){0==o&&(cc.game.emit("gamelog_Thinking",B.ShuShuConst.Play,{mode:t}),_.User.set("mode"+t+"Btn",1),e.enterByMode_(t))}):this.enterByMode_(t)},e.prototype.enterByMode_=function(t){var e=this;if(!this.isLoadingScene){this.isLoadingScene=!0,_.User.setTempData(h.TempData.CURRENT_MODE,t);var o=_.User.get(h.UserData.LEVEL_LIST)||{};o[t]||(o[t]=1);var i=T.default.get(P.default.ThemeType);b.ConfigUtils.setNextModeID();var n=1;b.ConfigUtils.getDataByID(t,function(a){if(n=a.amount,o[t]>n?_.User.setTempData(h.TempData.CURRENT_LEVEL,1):_.User.setTempData(h.TempData.CURRENT_LEVEL,o[t]),i)return y.default.loadScene(l.SceneConst.GAME);_.User.get(h.UserData.mode0LevelList_stage1ID),_.User.get(h.UserData.mode0LevelList_stage2ID);var c=_.User.get(h.UserData.mode1LevelList_stage1ID)||[],d=_.User.get(h.UserData.mode1LevelList_stage2ID)||[],u=(_.User.get(h.UserData.mode2LevelList_stage1ID),_.User.get(h.UserData.mode2LevelList_stage2ID),[]),f=[];if(1==t)p.Config.get(r.ConfigConst.THEME+1).then(function(t){if(m.Platform.is(s.EPlatform.WEB)){for(var e=0;e<t.length;e++){var o=t[e];u.push(o.stage1ID),f.push(o.stage2ID)}_.User.set(h.UserData.mode1LevelList_stage1ID,u),_.User.set(h.UserData.mode1LevelList_stage2ID,f)}else if(t.length>c.length&&0!=c.length){for(e=0;e<t.length;e++)o=t[e],e>c.length-1&&(u.push(o.stage1ID),f.push(o.stage2ID));u=c.concat(u),f=d.concat(f),_.User.set(h.UserData.mode1LevelList_stage1ID,u),_.User.set(h.UserData.mode1LevelList_stage2ID,f)}else if(0==c.length){for(e=0;e<t.length;e++)o=t[e],u.push(o.stage1ID),f.push(o.stage2ID);_.User.set(h.UserData.mode1LevelList_stage1ID,u),_.User.set(h.UserData.mode1LevelList_stage2ID,f)}y.default.loadScene(l.SceneConst.GAME)});else if(13==t){var g=_.User.get("mode13LevelList_stage1ID")||[],v=_.User.get("mode13LevelList_stage2ID")||[],C=[],b=[];p.Config.get(r.ConfigConst.THEME+13).then(function(t){if(m.Platform.is(s.EPlatform.WEB)){for(var e=0;e<t.length;e++){var o=t[e];C.push(o.stage1ID),b.push(o.stage2ID)}_.User.set("mode13LevelList_stage1ID",C),_.User.set("mode13LevelList_stage2ID",b)}else if(t.length>g.length&&0!=g.length){for(e=0;e<t.length;e++)o=t[e],e>g.length-1&&(C.push(o.stage1ID),b.push(o.stage2ID));C=g.concat(C),b=v.concat(b),_.User.set("mode13LevelList_stage1ID",C),_.User.set("mode13LevelList_stage2ID",b)}else if(0==g.length){for(e=0;e<t.length;e++)o=t[e],C.push(o.stage1ID),b.push(o.stage2ID);_.User.set("mode13LevelList_stage1ID",C),_.User.set("mode13LevelList_stage2ID",b)}y.default.loadScene(l.SceneConst.GAME)})}else p.Config.get(r.ConfigConst.THEME).then(function(o){o.forEach(function(o){o.theme!=t||e.handleModeByID(o.theme,function(){y.default.loadScene(l.SceneConst.GAME)})})})})}},e.prototype.clickFollowBtn=function(){cc.game.emit("gamelog_Thinking",B.ShuShuConst.btn,{id:"008"}),m.Platform.follow(function(t){0!=t||(console.log("\u5173\u6ce8\u6210\u529f"),_.User.get(h.UserData.isFollow))})},e.prototype.clickLoveDog=function(){cc.game.emit("gamelog","btn028"),this.enterByMode(1)},e.prototype.clickDogStone=function(){cc.game.emit("gamelog","btn029"),this.enterByMode(2)},e.prototype.clickSecondMode=function(){cc.game.emit("gamelog_Thinking",B.ShuShuConst.btn,{id:"001"}),cc.game.emit("gamelog","modebtn_0"),this.enterByMode(0)},e.prototype.click3Mode=function(){cc.game.emit("gamelog_Thinking",B.ShuShuConst.btn,{id:"003"}),cc.game.emit("gamelog","modebtn_2"),this.enterByMode(2)},e.prototype.clickThirdMode=function(){var t=this;this.isAnim||(this.isAnim=!0,cc.game.emit("gamelog","btn032"),this.dict.moreModeBg.active=!this.dict.moreModeBg.active,this.isShow?(this.dict.moreModeBg.active=!0,this.dict.moreModeBg.opacity=255,cc.tween(this.dict.moreModeBg).to(.3,{opacity:0}).call(function(){t.dict.moreModeBg.active=!1,t.isAnim=!1,t.isShow=!1}).start()):(this.dict.moreModeBg.opacity=0,this.dict.moreModeBg.active=!0,console.log("\u6d4b\u8bd5"),cc.tween(this.dict.moreModeBg).to(.3,{opacity:255}).call(function(){t.isAnim=!1,t.isShow=!0}).start()),0==this.dict.arrow.angle?this.dict.arrow.angle=180:this.dict.arrow.angle=0)},e.prototype.clickBeeBtn=function(){v.default.show(c.PopupConst.BEE)},e.prototype.unlockAllModeBtn=function(){v.default.show(c.PopupConst.UNLOCK_ALL_MODE)},e.prototype.orderBtn=function(){var t=this.dict.orderID.getComponent(cc.EditBox).string;if(console.log("\u987a\u5e8fid",t),this.isIntNum(t)){if(console.log("\u662f\u6570\u5b57"),_.User.setTempData(h.TempData.CURRENT_MODE,0),_.User.setTempData(h.TempData.CURRENT_LEVEL,Number(t)),this.isLoadingScene)return;this.isLoadingScene=!0,y.default.loadScene(l.SceneConst.GAME)}},e.prototype.modeJumpBtn=function(){this.dict.darenModes.active=!0},e.prototype.closeDaren=function(){this.dict.darenModes.active=!1},e.prototype.enterByMode=function(t){if(u.BMS.getKey("newmodead")&&-1==(_.User.get(h.UserData.UNLOCK_MODE_LIST)||[]).indexOf(t))return _.User.setTempData(h.TempData.CURRENT_MODE_UNLOCK_ID,t),void v.default.show(c.PopupConst.MODE_UNLOCK);this.sucEnterByMode(t)},e.prototype.enterByMode2=function(t){window.modeID=t,this.dict.darenModes.children[1].active=!1,this.dict.EditBox.active=!0,this.dict.darenJump.active=!0},e.prototype.darenJump=function(){var t=this.dict.EditBox.getComponent(cc.EditBox).string;this.isIntNum(t)&&(console.log("\u662f\u6570\u5b57"),_.User.setTempData(h.TempData.CURRENT_MODE,Number(window.modeID)),_.User.setTempData(h.TempData.CURRENT_LEVEL,Number(t)),y.default.loadScene(l.SceneConst.GAME))},e.prototype.isIntNum=function(t){return!isNaN(parseFloat(t))},e.prototype.sucEnterByMode=function(t){if(!this.isLoadingScene){this.isLoadingScene=!0,_.User.setTempData(h.TempData.CURRENT_MODE,t);var e=_.User.get(h.UserData.LEVEL_LIST);b.ConfigUtils.setNextModeID();var o=1;b.ConfigUtils.getDataByID(t,function(i){o=i.amount,e[t]>o?_.User.setTempData(h.TempData.CURRENT_LEVEL,1):_.User.setTempData(h.TempData.CURRENT_LEVEL,e[t]),y.default.loadScene(l.SceneConst.GAME)})}},__decorate([U(n.default)],e.prototype,"scroll",void 0),__decorate([U([cc.SpriteFrame])],e.prototype,"ageSpriteFrame",void 0),__decorate([U([cc.SpriteFrame])],e.prototype,"btnIconSpriteFrame",void 0),__decorate([x],e)}(i.default);o.default=O,cc._RF.pop()},{"./AudioManager":"AudioManager","./BaseUI":"BaseUI","./BmsManager":"BmsManager","./ChallengeHttp":"ChallengeHttp","./ChallengeSystem":"ChallengeSystem","./ConfigConst":"ConfigConst","./ConfigManager":"ConfigManager","./ConfigUtils":"ConfigUtils","./EventConst":"EventConst","./EventManager":"EventManager","./HomeItem":"HomeItem","./LanguageManager":"LanguageManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./MemoryStorageConst":"MemoryStorageConst","./MemoryStorageManager":"MemoryStorageManager","./OPPOAndroidAdUtils":"OPPOAndroidAdUtils","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./RecycleScroll":"RecycleScroll","./SceneConst":"SceneConst","./SceneManager":"SceneManager","./ShuShuConst":"ShuShuConst","./TipManager":"TipManager","./UserConst":"UserConst","./UserManager":"UserManager","./Utils":"Utils","./VIPSystem":"VIPSystem","./VIVOADUtils":"VIVOADUtils","./XMADUtils":"XMADUtils"}],HttpConst:[function(t,e,o){"use strict";cc._RF.push(e,"744aaCvWehP/7983o23OIIb","HttpConst"),o.default={internal:{url:"https://game.zuiqiangyingyu.net/",configAPI:"common/config/info",getAPI:"common/game-data/get",getMultiAPI:"common/game-data/multi-get",saveAPI:"common/game-data/save",getWXOpenidAPI:"common/session/check_code",timeAPI:"common/common/time"},abroad:{url:"https://bms.yarkgame.com/"},area:{url:"https://game.zuiqiangyingyu.net/",getAreaAPI:"common/is/v2/is",rankAPI:"common/rank/list",incrRankAPI:"common/rank/incr-score"},zhiShang:{url:"https://api.328vip.com/",getShareAPI:"CpApi/setting/getShareConfig",getConfigAPI:"cpApi/setting/config",getConfigV2API:"cpApi/setting/configV2"}},cc._RF.pop()},{}],HttpUtils:[function(t,e,o){"use strict";cc._RF.push(e,"828c1W5pdxNQJ+HSWL5Oqxf","HttpUtils");var i=t("./EHttp"),n=t("./HttpConst"),r=t("./XMLHttpRequestUtils"),a=new function(){this.getTime=function(t){return void 0===t&&(t={}),Promise.resolve({code:0,msg:"\u6210\u529f",data:{time:Math.floor(Date.now()/1e3),date_time:"2024-12-19 22:16:10"}})},this.getMulti=function(t){return void 0===t&&(t={}),r.default.get(""+n.default.internal.url+n.default.internal.getMultiAPI,t)},this.saveData=function(t){return void 0===t&&(t={}),r.default.post(""+n.default.internal.url+n.default.internal.saveAPI,t,i.ContentType.form)}};o.default=a,cc._RF.pop()},{"./EHttp":"EHttp","./HttpConst":"HttpConst","./XMLHttpRequestUtils":"XMLHttpRequestUtils"}],IGame:[function(t,e){"use strict";cc._RF.push(e,"a3a0ezl9iJBl5hZOH33hitQ","IGame"),cc._RF.pop()},{}],IOS:[function(t,e,o){"use strict";cc._RF.push(e,"66c87hmZMxCmJ2vIRywICYR","IOS"),o.IOS=void 0;var i,n=t("./BasePlatform"),r=t("./UserConst"),a=t("./AudioManager"),s=t("./LanguageManager"),c=t("./TipManager"),l=t("./UserManager");i=window.jsb&&jsb.reflection?jsb.reflection.callStaticMethod:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]};var h=function(t){function e(){var e=t.call(this)||this;return e._rewardAdsCb=null,e._isMute=null,console.log("ios"),e.bindEvents(),e}return __extends(e,t),e.prototype.getInstance=function(){return this},e.prototype.gainIOSBMSVersion=function(){var t=jsb.reflection.callStaticMethod("AppController","gainIOSBMSVersion");console.log("\u83b7\u5f97\u7248\u672c\u53f7",t),cc.game.emit("version-update",t)},e.prototype.showRewardAds=function(t){console.log("[platform] [IosPlatform] showRewardAds"),this._rewardAdsCb=null,this._rewardAdsCb=t,jsb.reflection.callStaticMethod("AppController","showAds")},e.prototype.showBanner=function(){console.log("[platform] [IosPlatform] showBanner"),jsb.reflection.callStaticMethod("AppController","showBannerAds1")},e.prototype.hideBanner=function(){console.log("[platform] [IosPlatform] hideBanner"),jsb.reflection.callStaticMethod("AppController","hiddenBanner")},e.prototype.showInsert=function(){console.log("[platform] [IosPlatform] showInsert"),cc.game.emit("gamelog","Level_Inter_"+l.User.getTempData(r.TempData.CURRENT_MODE)+"_"+l.User.getTempData(r.TempData.CURRENT_LEVEL)),jsb.reflection.callStaticMethod("AppController","fullscreenAds")},e.prototype.showOpenAd=function(){jsb.reflection.callStaticMethod("AppController","showOpenAd")},e.prototype.bindEvents=function(){var t=this;window.iOSSendMsg=function(e){return"playAds"==e&&(a.Audio.setMusicMute(1),cc.director.pause(),cc.game.pause()),"playAdsEnd"!=e&&"rewardPlayEnd"!=e&&"rewardPlayNotEnd"!=e||(cc.director.resume(),cc.game.resume(),a.Audio.setMusicMute(0),"rewardPlayEnd"==e&&t._rewardAdsCb&&t._rewardAdsCb(0),"rewardPlayNotEnd"==e&&t._rewardAdsCb&&t._rewardAdsCb(1)),"rewardad_fail"==e&&c.Tip.show(s.default.formatStr("\u6682\u65e0\u5e7f\u544a")),"interad_fail"==e&&cc.game.emit("gamelog","Level_Inter_Fail_"+l.User.getTempData(r.TempData.CURRENT_MODE)+"_"+l.User.getTempData(r.TempData.CURRENT_LEVEL)),"interad_suc"==e&&cc.game.emit("gamelog","Level_Inter_Play_"+l.User.getTempData(r.TempData.CURRENT_MODE)+"_"+l.User.getTempData(r.TempData.CURRENT_LEVEL)),"iosApplicationDidBecomeActive"==e&&cc.game.emit("iosApplicationDidBecomeActive"),"abcd"},cc.game.on(cc.game.EVENT_SHOW,function(){cc.director.resume(),cc.game.resume(),a.Audio.setMusicMute(0)})},e.prototype.report=function(t,e){i("AppController","customTrackerWithName:andDictString:",t,e)},e.prototype.gameComment=function(){i("AppController","onCommentBtn")},e.prototype.showAdDebugger=function(){i("AppController","showMediationDebugger")},e}(n.BasePlatform);o.IOS=h,cc._RF.pop()},{"./AudioManager":"AudioManager","./BasePlatform":"BasePlatform","./LanguageManager":"LanguageManager","./TipManager":"TipManager","./UserConst":"UserConst","./UserManager":"UserManager"}],IUser:[function(t,e){"use strict";cc._RF.push(e,"83e09xSiOBGMbL068+XYscm","IUser"),cc._RF.pop()},{}],KS:[function(t,e,o){"use strict";cc._RF.push(e,"b7ef7rVHM1Jc6IDUlu1tXqI","KS"),o.KS=void 0;var i=function(t){function e(){var e=t.call(this)||this;return e.sdk=window.kwaigame,e._rewardAds=null,e._rewardAdsCb=null,e._insert=null,e._recorder=null,e._recordStatus=-1,e._recordID=null,e._recordTime=0,console.log("\u5feb\u624b"),e}return __extends(e,t),e.prototype.showRewardAds=function(t){var e=this;return this.sdk.createRewardedVideoAd?this._config.rewardID?(this._rewardAdsCb=t,this._rewardAds||(this._rewardAds=this.sdk.createRewardedVideoAd({adUnitId:this._config.rewardID}),this._rewardAds.onClose(function(){e._rewardAdsCb(1)}),this._rewardAds.onReward(function(){e._rewardAdsCb(0)})),void this._rewardAds.show({success:function(){},fail:function(){}})):t(-3):t(-2)},e.prototype.showInsert=function(){var t=this;this.sdk.createInterstitialAd&&this._config.insertID&&(this._insert||(this._insert=this.sdk.createInterstitialAd({adUnitId:this._config.insertID}),this._insert.show().then(function(){}).catch(function(t){console.log("[platform] [KSPlatform] showInsert",t)}),this._insert.onClose(function(){t._insert&&(t._insert.destroy(),t._insert=null)}),this._insert.onError(function(e){console.log("[platform] [KSPlatform] showInsert",e),e&&1003==e.errCode&&t._insert&&(t._insert.destroy(),t._insert=null)})))},e.prototype.shareRecordCap=function(t){var e=this;return this._recorder?-1==this._recordStatus?t(-1):this._recordID?void this._recorder.publishVideo({video:this._recordID,callback:function(o){o?(e._recordStatus=1,t(1)):t(0)}}):t(-3):t(-2)},e.prototype.startRecordCap=function(){var t=this;this.sdk.createMediaRecorder&&(this._recorder||(this._recorder=this.sdk.createMediaRecorder(),this._recorder.onStop(function(e){t._recordID=e.videoID}),this._recorder.onError(function(){t._recordStatus=-1})),this._recordID=null,this._recorder.start(),this._recordStatus=1,this._recordTime=Math.floor((new Date).getTime()/1e3))},e.prototype.stopRecordCap=function(){this._recorder&&1==this._recordStatus&&(this._recorder.stop(),Math.floor((new Date).getTime()/1e3)-this._recordTime<5?this._recordStatus=-1:this._recordStatus=0)},e.prototype.getShareStatus=function(){return this._recordStatus},e}(t("./BasePlatform").BasePlatform);o.KS=i,cc._RF.pop()},{"./BasePlatform":"BasePlatform"}],Key:[function(t,e,o){"use strict";cc._RF.push(e,"f6791YXWW5E3pPeHQqr/KlK","Key");var i=t("./EventConst"),n=t("./PopupConst"),r=t("./SceneConst"),a=t("./UserConst"),s=t("./EffectManager"),c=t("./EventManager"),l=t("./PopupManager"),h=t("./SceneManager"),d=t("./UserManager"),u=cc._decorator,p=u.ccclass,f=u.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.key=null,e}return __extends(e,t),e.prototype.onEnable=function(){this.initEvent(),this.initView()},e.prototype.onDisable=function(){this.clearEvent()},e.prototype.initView=function(){var t=cc.sys.localStorage.getItem("walkFast_key");null!=t&&null!=t&&""!=t||(t=0),t<=0&&(t=0),d.User.set(a.UserData.KEY,Number(t)),this.key.string=""+t},e.prototype.initEvent=function(){c.Event.on(i.default.KEY_UPDATE,this.changeKey,this),c.Event.on(i.default.KEY_EFFECT,this.keyEffect,this)},e.prototype.clearEvent=function(){c.Event.off(i.default.KEY_UPDATE,this.changeKey,this),c.Event.off(i.default.KEY_EFFECT,this.keyEffect,this)},e.prototype.changeKey=function(){var t=d.User.get(a.UserData.KEY);this.key.string=""+t},e.prototype.keyEffect=function(){s.Effect.showEffect(1,this.icon,1)},e.prototype.clickSelf=function(){d.User.setTempData(a.TempData.current_key_type,0),cc.game.emit("playClickAudio"),h.default.getCurrentScene()==r.SceneConst.MAIN?cc.game.emit("gamelog","btn005"):h.default.getCurrentScene()==r.SceneConst.GAME&&cc.game.emit("gamelog","btn020"),l.default.show(n.PopupConst.SHOP)},__decorate([f(cc.Node)],e.prototype,"icon",void 0),__decorate([f(cc.Label)],e.prototype,"key",void 0),__decorate([p],e)}(cc.Component);o.default=g,cc._RF.pop()},{"./EffectManager":"EffectManager","./EventConst":"EventConst","./EventManager":"EventManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./SceneConst":"SceneConst","./SceneManager":"SceneManager","./UserConst":"UserConst","./UserManager":"UserManager"}],LanguageManager:[function(t,e,o){"use strict";cc._RF.push(e,"60780wKnnVNdoUhMLV0Hntp","LanguageManager");var i=t("./ConfigConst"),n=t("./ConfigManager"),r=["logo"];window.GameLanguage={},window.LanguageLabel={};var a=function(){function t(){this.lastLan="zh",this._lan="zh",this._font=null}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lan",{get:function(){return this._lan},set:function(t){this.lastLan=this._lan,this._lan=t,this.updateLan()},enumerable:!1,configurable:!0}),t.prototype.setFont=function(t){this._font=t},t.prototype.init=function(){var e=this;try{var o=cc.sys.language,i=cc.sys.languageCode;"zh"===o?-1!=i.indexOf("hant")||-1!=i.indexOf("tw")||-1!=i.indexOf("hk")||-1!=i.indexOf("mo")?this.lan="tc":this.lan="zh":this.lan="en",cc.sys.platform!=cc.sys.IPHONE&&cc.sys.platform!=cc.sys.IPAD||(window.haiwai?"zh"===o?-1!=i.indexOf("hant")||-1!=i.indexOf("tw")||-1!=i.indexOf("hk")||-1!=i.indexOf("mo")?this.lan="tc":this.lan="zh":this.lan="ja"==o?"ja":"en":this.lan="zh"),this.lan="zh",console.log("[Language] --\x3e \u521d\u59cb\u5316\u8bed\u8a00:  lan: "+this.lan+" systype: "+o+" syscode: "+cc.sys.languageCode),cc.game.emit("language-init",this.lan)}catch(n){}Object.defineProperty(cc.Label.prototype,"string",{get:function(){return this._string},set:function(e){if(null!=e)if("tc"==t.instance.lan);else{var o=this._string,i=e;window.GameLanguage&&window.GameLanguage[e]&&(i=window.GameLanguage[e]||""),i&&"number"!=typeof i&&(i=i.replace("<br/>","\n")),this._string=""+i,this.string!==o&&this.setVertsDirty(),this._checkStringEmpty()}}}),cc.Label.prototype.onLoad=function(){this._batchAsBitmap&&this.cacheMode===cc.Label.CacheMode.NONE&&(this.cacheMode=cc.Label.CacheMode.BITMAP,this._batchAsBitmap=!1),cc.game.renderType===cc.game.RENDER_TYPE_CANVAS&&(this.cacheMode=cc.Label.CacheMode.NONE),e._font&&this.font!=e._font&&(this.font=e._font,this.lineHeight==this.fontSize&&(this.lineHeight+=2)),this.string=this.string},cc.RichText.prototype.start=function(){e._font&&(this.font=e._font),this._onTTFLoaded()},cc.Sprite.prototype.onLoad=function(){var e=this;if(this.spriteFrame){var o=this.spriteFrame.name;if(-1==r.indexOf(o))return;if(o){var i="texture/language/"+t.instance.lan+"/"+o,n=this.node.opacity;this.node.opacity=0,this.spPath=i,cc.loader.loadRes(i,cc.SpriteFrame,function(t,o){e.node.opacity=n,t||e.spPath==i&&(e.spriteFrame=o)})}}}},t.prototype.updateLan=function(){var t=this;n.Config.get(i.ConfigConst.LANGUAGE).then(function(e){for(var o in e){var i=e[o];window.GameLanguage[i.zh]=i[t.lan]}})},t.formatStr=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var i=arguments[0],n=window.GameLanguage;n&&n[i]&&(i=n[i]);var r=/(%d)|(%s)/,a=/%s/,s=arguments.length;if(0===s)return"";if(1===s)return""+i;var c="string"==typeof i&&r.test(i);if(c)for(var l=1;l<s;++l){var h,d=arguments[l];if((h="number"==typeof d?r:a).test(i)){var u=d,p=window.GameLanguage;if(p&&p[u]){var f=p[u];f&&(u=f)}i=i.replace(h,u)}else i+=""+d}else for(l=1;l<s;++l)i+=" "+arguments[l];return i},t._instance=null,t}();o.default=a,cc._RF.pop()},{"./ConfigConst":"ConfigConst","./ConfigManager":"ConfigManager"}],"Level-249667_bulldozer":[function(t,e,o){"use strict";cc._RF.push(e,"a77792qamdCoY5K8keo/DZj","Level-249667_bulldozer");var i=t("../../scripts/AudioManager"),n=t("./Collision"),r=t("./Level-249667_busConfig"),a=t("./Level-249667_carItem"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.oldPos=null,e.bulldozerSpeed=400,e.state=r.BulldozerState.Idle,e.mgr=null,e.minLen=10,e.boundary=750,e}return __extends(e,t),e.prototype.onLoad=function(){this.node.getChildByName("bulldozerChild").getComponent(n.default).onCollisionEnter=this.onCollisionEnter.bind(this)},e.prototype.init=function(t){this.mgr=t},e.prototype.onCollisionEnter=function(t,e){var o=this;"box"==t.node.name?this.scheduleOnce(function(){var i=t.node.parent.convertToWorldSpaceAR(t.node.position),r=e.node.parent.convertToNodeSpaceAR(i),a=cc.instantiate(t.node);if(a.name="boxCopy",a.position=r,a.getComponent(n.default).onCollisionEnter=o.onCollisionEnter_boxCopy.bind(o),e.node.parent.addChild(a),a.angle=-e.node.parent.angle,t.node.destroy(),o.oldPos=o.node.position,52==Math.round(Math.abs(e.node.parent.angle))){var s=cc.instantiate(e.node);s.removeComponent(cc.PolygonCollider),e.node.parent.addChild(s)}},0):"car"==t.node.name&&t.node.parent.getComponent(a.default).carState==r.CarState.Idle?this.scheduleOnce(function(){var e=o.node.position.sub(o.oldPos).mag();o.node.stopAllActions(),i.Audio.getEffectMute()||o.mgr.playLevelSound("Crash"),o.mgr.hit(o.node);var n=t.node.parent.getComponent(a.default);t.node.parent.runAction(n.shackAction(.1,2)),cc.tween(o.node).to(e/o.bulldozerSpeed,{position:o.oldPos}).call(function(){o.state=r.BulldozerState.Idle}).start()},0):"car"==t.node.name&&t.node.parent.getComponent(a.default).carState==r.CarState.Normal&&this.scheduleOnce(function(){t.node.parent.getComponent(a.default).carBack(o.node)},0)},e.prototype.onCollisionEnter_boxCopy=function(t,e){var o=this;if("car"==t.node.name){e.node.parent.stopAllActions(),i.Audio.getEffectMute()||this.mgr.playLevelSound("Crash");var s=t.node.parent.getComponent(a.default);t.node.parent.runAction(s.shackAction(.1,2));var c=this.node.position.sub(this.oldPos).mag();cc.tween(this.node).to(c/this.bulldozerSpeed,{position:this.oldPos}).call(function(){o.state=r.BulldozerState.Idle}).start()}else if("box"==t.node.name){var l=t.node.parent.convertToWorldSpaceAR(t.node.position),h=this.node.convertToNodeSpaceAR(l),d=cc.instantiate(t.node);d.name="boxCopy",d.position=h,d.getComponent(n.default).onCollisionEnter=this.onCollisionEnter_boxCopy.bind(this),this.node.addChild(d),d.angle=-this.node.angle,t.node.destroy(),this.oldPos=this.node.position;var u=e.node.position;if(e.node.position=h,d.position=u,52==Math.round(Math.abs(this.node.angle))){var p=cc.instantiate(this.node.getChildByName("bulldozerChild"));p.removeComponent(cc.PolygonCollider),this.node.addChild(p)}}},e.prototype.update=function(){if(this.state==r.BulldozerState.Normal){(this.node.x<=-(this.boundary/2+this.node.width/2)||this.node.x>=this.boundary/2+this.node.width/2)&&(console.log("\u8d85\u8fc7\u8fb9\u754c\u9500\u6bc1"),this.node.destroy());var t=this.mgr.dict.road.parent.convertToWorldSpaceAR(this.mgr.dict.road.position),e=this.node.parent.convertToNodeSpaceAR(t);this.node.y>=e.y-2*this.minLen&&(console.log("\u68c0\u6d4b\u78b0\u5230\u516c\u8def"),this.state=r.BulldozerState.OnRoad,this.mgr.changeBulldozer(this.node))}},e.prototype.getWPosByNode=function(t){return t.parent.convertToWorldSpaceAR(t.position)},__decorate([c],e)}(cc.Component));o.default=l,cc._RF.pop()},{"../../scripts/AudioManager":"AudioManager","./Collision":"Collision","./Level-249667_busConfig":"Level-249667_busConfig","./Level-249667_carItem":"Level-249667_carItem"}],"Level-249667_busConfig":[function(t,e,o){"use strict";var i;cc._RF.push(e,"f182cVddZpA2qy/i2RrTEs8","Level-249667_busConfig"),o.BulldozerState=o.LinkType=o.TurntablePosDir=o.CarState=o.CarLenImg=o.CarDirImg=o.CarDir=o.colorDes=o.CarColor=o.sortColor=o.levelData=void 0,o.levelData={"-27355":{carColor:[[0,10,[0,1]],[11,20,[0,1]],[21,30,[2,3]],[31,40,[2,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[6,7]],[91,100,[6,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27356":{carColor:[[0,10,[0,1]],[11,20,[0,1]],[21,30,[2,3]],[31,40,[2,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27357":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27358":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27359":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27360":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27361":{carColor:[[0,100,[0,3]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:0},"-27362":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27363":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27364":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27365":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27366":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27367":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27368":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27369":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[1,4]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27370":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[1,4]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27371":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[1,4]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27372":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[1,4]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27373":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27374":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[1,4]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27433":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[1,2,2,3,2]]},"-27434":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,78,[4,7]],[79,86,[4,7]],[87,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[3,1,1,3,2],[2,3,2,3,1]]},"-27435":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[4,7]],[71,80,[4,7]],[81,90,[0,3]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[2,2,2,3,1],[1,3,2,3,2]]},"-27436":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[1,2,2,3],[2,3,1,3,2],[1,3,2,3,2]]},"-27437":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[2,2,2,3,3,1]]},"-27527":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,55,[4,5]],[56,60,[6,7]],[61,65,[4,5]],[66,70,[6,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[1,2,3,3,3,3,3,2,3,2,2,2,2,3,1]},"-27528":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[6,7]],[46,50,[4,5]],[51,55,[6,7]],[56,60,[4,5]],[61,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[2,3,2,2,2,2,3,1,1,2,3,3,3,3,3,2,1,1,2,2,2,3,1]},"-27529":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[6,7]],[46,50,[4,5]],[51,55,[6,7]],[56,60,[4,5]],[61,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[1,2,3,3,3,3,3,2,1,1,2,2,3,2,2,2,2,3,2,2,3,1,1,2,2]},"-27530":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[6,7]],[46,50,[4,5]],[51,55,[6,7]],[56,60,[4,5]],[61,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,blackAmount:6,transport:[3,3,3,3,3,2,1,1,2,2,3,2,2,2,2,3,2,2,3,2,2,2,2,3]},"-27531":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[6,7]],[46,50,[4,5]],[51,55,[6,7]],[56,60,[4,5]],[61,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[1,2,2,3,2,2,2,2,3,2,2,3,1,2,2,1,3,2,1,3,2]},"-27532":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,blackAmount:12},"-27533":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,blackAmount:12},"-27534":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,blackAmount:10},"-27535":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[3,2,2,1],[2,3,1,3,2],[2,3,1,3,2],[3,3,2,3,1]]},"-27536":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[1,2,2,3],[2,3,1,3,2],[1,3,2,3,2]]},"-27537":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[6,7]],[46,50,[4,5]],[51,55,[6,7]],[56,60,[4,5]],[61,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[2,2,3,3,2,2,2,2,3,1,2,3,2,2,2,1,3,3,2,2,3]},"-27538":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[6,7]],[46,50,[4,5]],[51,55,[6,7]],[56,60,[4,5]],[61,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[1,1,2,3,2,2,2,2,3,2,2,3,1,2,2,2,3,1,2,2,3,2,2,3,1]},"-27539":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[6,7]],[46,50,[4,5]],[51,55,[6,7]],[56,60,[4,5]],[61,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[3,2,2,3,2,2,2,2,3,1,2,3,2,2,1,2,3,3,2,2,2,3,1]},"-27540":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[4,5]],[46,50,[6,7]],[51,55,[4,5]],[56,60,[6,7]],[61,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[3,2,2,3,2,2,2,2,3,1,2,3,2,2,1,2,3,3,2,2,2,2,3,1,2,2,3,1],carpark:[[1,2,2,3,2,2,3,2]]},"-27541":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[1,1,2,3,2,3,2,2,3,1,2,3,2,2,1,2,3,3,2,2,3,1,1,2,3,3,2,2,3,1],carpark:[[2,2,1,3,2,2,3,2],[3,1,1,3,2,2,2,3,2]]},"-27655":{carColor:[[0,25,[0,3]],[26,50,[0,3]],[51,75,[0,3]],[76,100,[0,3]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27656":{carColor:[[0,25,[0,3]],[26,50,[0,3]],[51,75,[0,3]],[76,100,[0,3]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27657":{carColor:[[0,25,[2,7]],[26,50,[2,7]],[51,75,[2,7]],[76,100,[2,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27658":{carColor:[[0,25,[0,4]],[26,50,[0,4]],[51,75,[0,4]],[76,100,[0,4]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27659":{carColor:[[0,50,[0,4]],[51,100,[0,4]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[3,2,1,3]]},"-27660":{carColor:[[0,50,[2,6]],[51,100,[2,6]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[3,2,1,3],[2,1,3]]},"-27661":{carColor:[[0,60,[0,4]],[61,100,[0,4]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[3,1,2,3,2,3,2,2,3,1,2,3]},"-27662":{carColor:[[0,60,[2,6]],[61,100,[2,6]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[1,2,3,2,3,2,2,3,1,2,3,3,1,2,3]},"-27663":{carColor:[[0,50,[2,6]],[51,100,[2,6]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,blackAmount:5},"-27664":{carColor:[[0,50,[0,4]],[51,100,[0,4]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,blackAmount:7},"-27665":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[4,7]],[71,90,[0,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[1,2,2,3,2,3]]},"-27666":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[3,1,2,3,2,3]]},"-27667":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[3,1,2,3,2,3],[3,1,2,3,2,3]]},"-27668":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,55,[4,5]],[56,60,[6,7]],[61,65,[4,5]],[66,70,[6,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[1,2,3,1,3,3,1,2,3,2,1,2,2,3,1,2,3,1,3,3,1,2,3,2,2]},"-27669":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,55,[4,5]],[56,60,[6,7]],[61,65,[4,5]],[66,70,[6,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[1,1,2,2,3,1,2,3,1,3,3,1,2,3,2,2,2,3,1,3,3,1,2,3,2]},"-27670":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,55,[4,5]],[56,60,[6,7]],[61,65,[4,5]],[66,70,[6,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[2,3,2,2,3,1,2,3,3,3,3,1,2,3,2,2,2,3,1,3,3,1,2]},"-27671":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[4,5]],[46,50,[6,7]],[51,55,[4,5]],[56,60,[6,7]],[61,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[1,2,2,3,2,3,2,2,3,1,2,3,2,2,1,2,3,3,2,2,2,2],carpark:[[2,3,2,1,3,1,2,1,3]]},"-27672":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[4,5]],[46,50,[6,7]],[51,55,[4,5]],[56,60,[6,7]],[61,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[3,2,1,3,1,3,2,2,3,1,2,3,2,2,1,2,3,3,2,2,2,2,3],carpark:[[2,3,2,1,3,1],[1,3,2,3,3,1]]},"-27673":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[4,5]],[46,50,[6,7]],[51,55,[4,5]],[56,60,[6,7]],[61,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[2,3,1,2,3,2,2,1,2,3,3,2,2,3,2,1,3,1,3,2,2,2],carpark:[[3,3,2,1,3,1],[3,3,2,3,2,1]]},"-27674":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[4,5]],[46,50,[6,7]],[51,55,[4,5]],[56,60,[6,7]],[61,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,blackAmount:6,transport:[3,3,2,2,3,2,1,3,1,3,2,2,2,3,2,3,1,2,3,2,2,1],carpark:[[2,3,2,1,3,1,3,2,1,3]]},"-27693":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,55,[4,5]],[56,60,[6,7]],[61,65,[4,5]],[66,70,[6,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[1,3,2,2,3,1,2,3,1,3,3,1,2,3,2,2,2,3,1,3,3,1,2]},"-27694":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,55,[4,5]],[56,60,[6,7]],[61,65,[4,5]],[66,70,[6,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[3,3,3,1,2,3,2,2,2,3,1,3,3,1,2,3,2,2,3,1,2,3,1]},"-27695":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[3,1,2,3,2,3,1,2],[3,1,2,3,2,3,1,2]]},"-27696":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[4,5]],[46,50,[6,7]],[51,55,[4,5]],[56,60,[6,7]],[61,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,blackAmount:6,transport:[1,3,3,3,2,2,3,2,1,3,2,2,2,3,2,3,1,2,3,2,2,1],carpark:[[1,3,2,1,3,1,3,2,1,3]]},"-27697":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[1,2,3,2,3,1,2],[1,2,3,2,3,1,2]]},"-27698":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27699":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27700":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,blackAmount:6},"-27701":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[4,5]],[46,50,[6,7]],[51,55,[4,5]],[56,60,[6,7]],[61,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[2,3,1,2,3,2,2,1,2,3,3,2,2,3,2,1,3,1,3,2,2,2],carpark:[[1,3,2,3,3,1],[2,3,2,3,2,1]]},"-27702":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[4,5]],[46,50,[6,7]],[51,55,[4,5]],[56,60,[6,7]],[61,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,blackAmount:6,transport:[1,3,1,2,3,2,2,1,2,3,3,2,2,3,2,1,3,1,3,2,2,2],carpark:[[1,3,2,3,3,1],[2,3,2,3,2,1]]},"-27808":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27809":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,blackAmount:6},"-27810":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27811":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,blackAmount:6},"-27812":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,55,[4,5]],[56,60,[6,7]],[61,65,[4,5]],[66,70,[6,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[3,1,3,1,2,3,2,2,2,3,1,3,3,1,2,3,2,2,3,1,2,3,1,1,3,1,2,1,3,1]},"-27813":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,55,[4,5]],[56,60,[6,7]],[61,65,[4,5]],[66,70,[6,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[3,1,3,1,2,3,2,2,2,3,1,3,3,1,2,3,2,2,3,1,2,3,1,1,3,1,2]},"-27814":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,55,[4,5]],[56,60,[6,7]],[61,65,[4,5]],[66,70,[6,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[3,1,3,1,2,3,2,2,2,3,1,3,3,1,2,3,2,2,3,1,2,3,1,1,3,1,2],blackAmount:6},"-27815":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[2,3,1,2,3,2,3,1,2],[2,1,2,2,1,2,3,1,2],[1,2,1,2,3,2,3,1,2]]},"-27816":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[4,5]],[46,50,[6,7]],[51,55,[4,5]],[56,60,[6,7]],[61,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,blackAmount:6,transport:[3,2,2,1,2,3,3,2,2,3,2,1,3,2,2,1,2,3,1,3,2,1,3,1,2,2,2,1,2,3],carpark:[[3,2,1,3,1,3,2,3,3],[3,2,3,1,2,3,2,3,2]]},"-27817":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[1,3,1,2,3,2,3,1,2],[3,1,2,2,1,2,3,1,2]]},"-27879":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27880":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27881":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27882":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27883":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27884":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27885":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27886":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27887":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[1,3,1,2,3,2],[3,1,2,2,1,2],[1,3,3,2,1,2],[2,1,3,2,1,2],[3,3,1,2,1,2],[3,3,1,2,1,2]]},"-27888":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[1,3,1,2,3,2],[3,1,2,2,1,2],[1,3,3,2,1,2],[2,1,3,2,1,2],[3,3,1,2,1,2],[3,3,1,2,1,2]]},"-27907":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27908":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27909":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,blackAmount:6,carpark:[[1,3,1,2,3,2,3,1]]},"-27910":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[4,5]],[46,50,[6,7]],[51,55,[4,5]],[56,60,[6,7]],[61,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,blackAmount:6,transport:[3,2,2,1,2,3,3,2,2,3,2,1,3,2,2,1,2,3,1,3,2,1,3,1,2,2,2,1,2],carpark:[[3,2,1,3,1,3,2,3]]},"-27911":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,55,[4,5]],[56,60,[6,7]],[61,65,[4,5]],[66,70,[6,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[3,1,3,1,2,3,2,2,2,3,1,3,3,1,2,3,2,2,3,1,2,3,1,1,3,1,2,2],blackAmount:6},"-27912":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,55,[4,5]],[56,60,[6,7]],[61,65,[4,5]],[66,70,[6,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[2,2,3,1,2,3,3,2,2,3,1,3,3,1,2,3,2,2,3,1,2,3,1,1,3,1,2,2],blackAmount:6},"-27913":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[1,3,1,2,3,2,3],[3,1,2,2,1,2,1]]},"-27914":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,55,[4,5]],[56,60,[6,7]],[61,65,[4,5]],[66,70,[6,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[2,2,3,1,2,3,3,2,2,3,1,3,3,1,2,3,2,2,3,1,2,3,1,1,3,1,2,2],blackAmount:6},"-27915":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[3,3,1,1,2,3],[2,1,2,2,3,2],[2,2,2,1,2,3]]},"-27916":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,55,[4,5]],[56,60,[6,7]],[61,65,[4,5]],[66,70,[6,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[2,2,3,1,2,3,3,2,2,3,1,3,3,1,2,3,2,2,3,1,2,3,1,1,3,1,2,3]},"-27917":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[3,3,2,1,2,3],[2,3,2,1,2,3],[1,3,2,1,2,3]]},"-27918":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,55,[4,5]],[56,60,[6,7]],[61,65,[4,5]],[66,70,[6,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[3,1,3,3,1,3,3,2,2,3,1,3,3,1,2,3,2,2,3,1,2,3,1,1,3,1,2,3]},"-27919":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[3,3,1,2,3,2,1],[1,3,2,2,2,2,3]]},"-27920":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,55,[4,5]],[56,60,[6,7]],[61,65,[4,5]],[66,70,[6,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[1,1,3,3,1,1,3,2,2,3,3,3,3,1,2,3,2,2,3,1,2,3,1,1,3,1,2,3],blackAmount:6},"-27921":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[2,3,1,2,3,2,3],[2,3,2,2,2,2,3]]},"-27922":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,55,[4,5]],[56,60,[6,7]],[61,65,[4,5]],[66,70,[6,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[1,1,3,3,1,1,3,2,2,3,3,3,3,1,2,3,2,2,3,1,2,3,1,1,3,1,2,3],blackAmount:6},"-27923":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[1,2,3,2,1,2,3],[2,3,2,2,1,2,3]]},"-27924":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[4,5]],[46,50,[6,7]],[51,55,[4,5]],[56,60,[6,7]],[61,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[3,2,2,1,2,3,3,2,2,3,2,1,3,2,2,1,2,3,1,3,2,1,3,1,2,2,2,3],carpark:[[3,2,1,3,1,3,3],[3,1,2,3,2,3,2]]},"-27925":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[2,3,3,2,1,2,3],[2,3,2,2,1,2,3]]},"-27926":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[4,5]],[46,50,[6,7]],[51,55,[4,5]],[56,60,[6,7]],[61,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[3,2,2,1,2,3,3,2,2,3,2,1,3,2,2,1,2,3,1,3,2,1,3,1,2,2,2,3],carpark:[[3,3,1,3,2,3,3],[3,1,2,3,2,3,2]]},"-27955":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27956":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,blackAmount:6},"-27957":{carColor:[[0,10,[0,1]],[11,20,[0,1]],[21,30,[2,3]],[31,40,[2,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27958":{carColor:[[0,10,[0,1]],[11,20,[0,1]],[21,30,[2,3]],[31,40,[2,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27959":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27960":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27961":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27962":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27963":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27964":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-27965":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[2,3,3,2,1,2,3]]},"-27966":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[2,3,3,2,1,2,3],[2,1,2,3,2,3,3]]},"-27967":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[2,3,3,2,1,2,3],[1,2,2,3,2,3,3],[2,1,2,3,2,3,3]]},"-27968":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[2,3,3,2,1,2,3],[1,2,2,3,2,3,3],[2,1,2,3,2,3,3]]},"-27969":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[2,3,3,2,1,2,3],[1,2,2,3,2,3,3],[2,2,1,3,1,3,3],[2,1,2,3,2,3,3]]},"-27970":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[1,2,2,3,2,1]]},"-27971":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,78,[4,7]],[79,86,[4,7]],[87,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[3,1,1,3,2,2],[2,3,2,3,1,1]]},"-27972":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[4,7]],[71,80,[4,7]],[81,90,[0,3]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[2,2,2,3,1,2],[1,3,2,3,2,1]]},"-27973":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[3,2,2,3,1,3,3],[1,2,3,3,1,2,3]]},"-27974":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[3,2,2,3,1,3],[1,2,3,3,1,2],[2,2,2,3,1,2],[3,2,3,1,1,2]]},"-27975":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,55,[4,5]],[56,60,[6,7]],[61,65,[4,5]],[66,70,[6,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[1,1,3,3,1,1,3,2,2,3,3,3,3,1,2,3,2,2,3,1,2,3,1,1,3,1,2,3],blackAmount:6},"-27976":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,55,[4,5]],[56,60,[6,7]],[61,65,[4,5]],[66,70,[6,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[2,2,3,3,1,1,3,2,2,3,3,3,3,1,2,3,2,2,3,1,2,3,1,1,3,1,2,3]},"-27977":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,55,[4,5]],[56,60,[6,7]],[61,65,[4,5]],[66,70,[6,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[3,3,3,3,1,1,3,2,2,3,3,3,3,1,2,3,2,2,3,1,2,3,1,1,3,1,2,3]},"-27978":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,55,[4,5]],[56,60,[6,7]],[61,65,[4,5]],[66,70,[6,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[2,1,1,3,1,1,3,2,2,3,3,3,3,1,2,3,2,2,3,1,2,3,1,1,3,1,2,3],blackAmount:6},"-27979":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,55,[4,5]],[56,60,[6,7]],[61,65,[4,5]],[66,70,[6,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[3,1,3,3,1,2,3,2,2,3,3,3,3,1,2,3,2,2,3,1,2,3,1,1,3,1,2,3]},"-27980":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,55,[4,5]],[56,60,[6,7]],[61,65,[4,5]],[66,70,[6,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[2,3,3,3,2,1,3,2,2,3,3,3,3,1,2,3,2,2,3,1,2,3,1,1,3,1,2,3]},"-27981":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[4,5]],[46,50,[6,7]],[51,55,[4,5]],[56,60,[6,7]],[61,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[3,2,2,1,2,3,3,2,2,3,2,1,3,2,2,1,2,3,1,3,2,1,3,1,2,2,2,1,2],carpark:[[3,2,1,3,1,3,2,3],[2,2,3,2,1,3,2,3]]},"-27982":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[4,5]],[46,50,[6,7]],[51,55,[4,5]],[56,60,[6,7]],[61,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[3,2,2,1,2,3,3,2,2,3,2,1,3,2,2,1,2,3,1,3,2,1,3,1,2,2,2,1,2],carpark:[[1,2,1,3,1,3,2,3],[2,2,3,2,1,3,2,3]]},"-27983":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[4,5]],[46,50,[6,7]],[51,55,[4,5]],[56,60,[6,7]],[61,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,blackAmount:6,transport:[1,2,2,1,2,3,3,2,2,3,2,1,3,2,2,1,2,3,1,3,2,1,3,1,2,2,2,1,2],carpark:[[1,2,1,3,1,3,2,3]]},"-27984":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[4,5]],[46,50,[6,7]],[51,55,[4,5]],[56,60,[6,7]],[61,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,blackAmount:6,transport:[3,2,2,1,2,3,3,2,2,3,2,1,3,2,2,1,2,3,1,3,2,1,3,1,2,2,2,1,2],carpark:[[3,2,2,3,1,3],[2,2,1,3,1,3],[1,2,2,3,1,3],[3,2,1,3,1,3]]},"-28204":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28205":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28206":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28207":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28208":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28209":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28210":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28211":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28212":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28213":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28252":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28253":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28254":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28255":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28256":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28257":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28258":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[3,3,3,3,3,2,1,1,2,2,3,2,2,2,2,3,2,2,3,2,2,2,2]},"-28259":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28260":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[1,2,2,3,2,3]]},"-28261":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28302":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28303":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28304":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[2,2,1,3,2,2,3]]},"-28305":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28306":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[1,2,3,3,2,2],[3,2,1,3,1,1]]},"-28307":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28308":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28309":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28310":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28311":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28505":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28506":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28507":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28508":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28509":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28510":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28511":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28512":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28513":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28514":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28515":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28516":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28517":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28518":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28519":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28520":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28521":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28522":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28523":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28524":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28538":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[3,2,2,3,1,3,1],[1,2,1,3,1,2,3]]},"-28539":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[3,2,2,3,1,3,3],[1,2,1,3,1,2,3]]},"-28540":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[3,2,2,3,1,3],[1,2,1,3,1,2],[2,1,3,3,1,2],[3,1,2,3,1,2]]},"-28541":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carpark:[[2,2,1,3,1,3,3],[3,2,1,3,2,2,1]]},"-28542":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[4,5]],[46,50,[6,7]],[51,55,[4,5]],[56,60,[6,7]],[61,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[2,1,2,3,2,1,3,2,2,3,2,1,3,2,2,1,2,3,1,3,2,1,3,1,2,2,2,1,2]},"-28543":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[4,5]],[46,50,[6,7]],[51,55,[4,5]],[56,60,[6,7]],[61,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[1,3,2,2,3,2,1,3,2,2,1,2,3,1,3,2,1,3,1,2,2,2,1,2,2,1,2,3,2]},"-28544":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[4,5]],[46,50,[6,7]],[51,55,[4,5]],[56,60,[6,7]],[61,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[3,2,2,3,2,1,3,2,2,1,2,3,1,3,2,1,3,1,2,2,2,1,2,2,1,2,3,2]},"-28545":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[4,5]],[46,50,[6,7]],[51,55,[4,5]],[56,60,[6,7]],[61,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[3,2,2,3,2,1,3,2,2,1,2,3,1,3,2,1,3,1,2,2,2,1,2,2,1,2,3,2]},"-28546":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[4,5]],[46,50,[6,7]],[51,55,[4,5]],[56,60,[6,7]],[61,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,blackAmount:6,transport:[2,1,2,3,3,2,2,3,2,1,3,2,2,1,2,3,1,3,2,1,3,1,2,2,2,1,2],carpark:[[3,2,2,3,1,3],[2,2,1,3,1,3]]},"-28547":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,45,[4,5]],[46,50,[6,7]],[51,55,[4,5]],[56,60,[6,7]],[61,70,[0,7]],[71,85,[0,7]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,blackAmount:6,transport:[3,2,2,3,3,2,2,3,2,1,3,2,2,1,2,3,1,3,2,1,3,1,2,2,2,1,2],carpark:[[1,2,2,3,1,3],[2,2,1,3,1,3]]},"-28631":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,3]],[71,85,[0,6]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carSquare:[15,15,15]},"-28632":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,3]],[71,85,[0,6]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carSquare:[18,18,18]},"-28633":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,3]],[71,85,[0,6]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carSquare:[20,20,20]},"-28634":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,55,[0,3]],[56,70,[0,5]],[71,85,[0,6]],[86,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carSquare:[22,22,22]},"-28635":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,5]],[66,80,[0,6]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,carSquare:[20,22,24]},"-28636":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,5]],[66,80,[0,6]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,centerSquare:[13,13,13],oblique:[[2,3,1,3,2,2],[2,2,1,3,1,2]]},"-28637":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,5]],[66,80,[0,6]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,centerSquare:[15,15,15],oblique:[[2,2,1,3,2,2],[1,2,1,3,1,2]]},"-28638":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,5]],[66,80,[0,6]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,centerSquare:[17,17,17],oblique:[[1,3,2,3,1,2],[3,2,1,3,1,2]]},"-28639":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,5]],[66,80,[0,6]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,centerSquare:[18,18,18],oblique:[[3,3,1,1,3,3],[2,2,1,1,2,2]]},"-28640":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,5]],[66,80,[0,6]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,centerSquare:[19,19,19],oblique:[[2,2,2,3,3,3],[1,1,1,1,2,3]]},"-28641":{carColor:[[0,10,[0,2]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,5]],[66,80,[0,6]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,uTransport:[1,2,3,3,3,3,3,2,3,2,2,1,2,2,3,1,1,3,3,2,3,2,1,2,2,1,3,3,3,3]},"-28642":{carColor:[[0,10,[0,2]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,5]],[66,80,[0,6]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,uTransport:[2,3,2,2,1,2,2,3,1,1,3,1,2,3,3,3,3,3,3,2,3,2,1,2,2,1,3,3,3,3]},"-28643":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,uTransport:[2,2,1,2,3,2,2,1,2,2,3,1,1,3,1,2,3,3,3,3,3,3,2,3,2,1,2,2,1,3,3,3,3]},"-28644":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,uTransport:[2,3,2,2,3,2,2,1,2,2,3,1,1,3,1,2,3,3,3,3,3,3,2,3,2,1,2,2,1,3,3,3,3]},"-28645":{carColor:[[0,10,[0,3]],[11,20,[0,3]],[21,30,[0,3]],[31,40,[0,3]],[41,50,[0,3]],[51,65,[0,7]],[66,80,[0,7]],[81,100,[0,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,uTransport:[2,3,2,2,1,2,3,2,2,1,2,2,3,1,1,3,1,2,3,3,3,3,3,3,2,3,2,1,2,2,1,3,3,3,3]},"-28646":{carColor:[[0,10,[0,1]],[11,20,[0,1]],[21,30,[2,3]],[31,40,[2,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28647":{carColor:[[0,10,[0,1]],[11,20,[0,1]],[21,30,[2,3]],[31,40,[2,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28648":{carColor:[[0,10,[0,1]],[11,20,[0,1]],[21,30,[2,3]],[31,40,[2,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28649":{carColor:[[0,10,[0,1]],[11,20,[0,1]],[21,30,[2,3]],[31,40,[2,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28650":{carColor:[[0,10,[0,1]],[11,20,[0,1]],[21,30,[2,3]],[31,40,[2,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[4,7]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[2,2,3,1,3,3,1,2,3,1,2,2,2,3,1,1,3,3,1]},"-28777":{carColor:[[0,10,[0,1]],[11,20,[0,1]],[21,30,[2,3]],[31,40,[2,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28778":{carColor:[[0,10,[0,1]],[11,20,[0,1]],[21,30,[2,3]],[31,40,[2,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28779":{carColor:[[0,10,[0,1]],[11,20,[0,1]],[21,30,[2,3]],[31,40,[2,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28780":{carColor:[[0,10,[0,1]],[11,20,[0,1]],[21,30,[2,3]],[31,40,[2,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28781":{carColor:[[0,10,[0,1]],[11,20,[0,1]],[21,30,[2,3]],[31,40,[2,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28782":{carColor:[[0,10,[0,1]],[11,20,[0,1]],[21,30,[2,3]],[31,40,[2,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28783":{carColor:[[0,10,[0,1]],[11,20,[0,1]],[21,30,[2,3]],[31,40,[2,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28784":{carColor:[[0,10,[0,1]],[11,20,[0,1]],[21,30,[2,3]],[31,40,[2,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3,transport:[2,2,3,1,3,3,1,2,3,1,2,2,2,3,1,1,3,3,1]},"-28785":{carColor:[[0,10,[0,1]],[11,20,[0,1]],[21,30,[2,3]],[31,40,[2,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3},"-28786":{carColor:[[0,10,[0,1]],[11,20,[0,1]],[21,30,[2,3]],[31,40,[2,3]],[41,50,[0,3]],[51,60,[0,3]],[61,70,[0,3]],[71,80,[0,3]],[81,90,[4,7]],[91,100,[4,7]]],carWeight:[25,5,1,0,0,0],parkingWeight:5,sortWeight:5,limitRank:3}},o.sortColor=[0,3,4,7,1,2,5,6],(i=o.CarColor||(o.CarColor={}))[i.Blue=0]="Blue",i[i.Purple=1]="Purple",i[i.Pink=2]="Pink",i[i.Green=3]="Green",i[i.Red=4]="Red",i[i.LightBlue=5]="LightBlue",i[i.Orange=6]="Orange",i[i.Yellow=7]="Yellow",i[i.None=8]="None",i[i.Police=9]="Police",i[i.Gold=10]="Gold",o.colorDes=["\u84dd0","\u7d2b1","\u7c892","\u7eff3","\u7ea24","\u6d45\u84dd5","\u6a596","\u9ec47","\u5360\u4f4d8","\u8b66\u8f669","\u571f\u8c6a\u8f6610"],o.CarDir=[1,2,3,4,5],o.CarDirImg={52:4,128:5,90:1,0:2,180:3},o.CarLenImg={4:1,6:2,10:3},function(t){t[t.Idle=-1]="Idle",t[t.Normal=0]="Normal",t[t.NormalNoObstruct=1]="NormalNoObstruct",t[t.GoingRoad=2]="GoingRoad",t[t.InRoadRight=3]="InRoadRight",t[t.InRoadLeft=4]="InRoadLeft",t[t.GoingParking=5]="GoingParking",t[t.Parking=6]="Parking",t[t.GoingOutParking=7]="GoingOutParking",t[t.OutParking=8]="OutParking",t[t.OnBottomLeft=9]="OnBottomLeft",t[t.OnBottomRight=10]="OnBottomRight",t[t.WaterSpray=11]="WaterSpray",t[t.WaterSprayLeave=12]="WaterSprayLeave"}(o.CarState||(o.CarState={})),function(t){t[t.LeftTop=0]="LeftTop",t[t.Top=1]="Top",t[t.RightTop=2]="RightTop",t[t.Right=3]="Right",t[t.RightBottom=4]="RightBottom",t[t.Bottom=5]="Bottom",t[t.LeftBottom=6]="LeftBottom",t[t.Left=7]="Left"}(o.TurntablePosDir||(o.TurntablePosDir={})),function(t){t[t.FrontBack=0]="FrontBack",t[t.Parallel=1]="Parallel"}(o.LinkType||(o.LinkType={})),function(t){t[t.Idle=0]="Idle",t[t.Normal=1]="Normal",t[t.OnRoad=2]="OnRoad",t[t.Remove=3]="Remove"}(o.BulldozerState||(o.BulldozerState={})),cc._RF.pop()},{}],"Level-249667_bus":[function(t,e,o){"use strict";cc._RF.push(e,"8cae89gsklEoIUAnoA32UtM","Level-249667_bus");var i=t("../../scripts/UserConst"),n=t("../../scripts/Tools"),r=t("../../scripts/AudioManager"),a=t("../../scripts/BmsManager"),s=t("../../scripts/LanguageManager"),c=t("../../scripts/PlatformManager"),l=t("../../scripts/TipManager"),h=t("../../scripts/UserManager"),d=t("../../scripts/LimitRepeat"),u=t("../../scripts/Utils"),p=t("../../scripts/ShuShuConst"),f=t("../../scripts/LocalStorageConst"),g=t("../../scripts/LocalStorageManager"),m=t("../../scripts/MemoryStorageConst"),v=t("../../scripts/MemoryStorageManager"),y=t("../../scripts/AssetManager"),_=t("../../scripts/PopupConst"),C=t("../../scripts/PopupManager"),b=t("../../scripts/ToastManager"),S=t("./BrainLevelBase"),w=t("./PoolMgr"),A=t("./Level-249667_bulldozer"),k=t("./Level-249667_busConfig"),P=t("./Level-249667_carItem"),T=t("./Level-249667_carpark"),B=t("./Level-249667_carSquare"),M=t("./Level-249667_chain"),I=t("./Level-249667_key"),R=t("./Level-249667_oblique"),L=t("./Level-249667_personItem"),D=t("./Level-249667_turntable"),N=t("./Level-249667_uTransport"),E=t("./MotionTrail"),x=cc._decorator,U=x.ccclass,O=x.property,F=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isDebug=!1,e.boundary=750,e.isWaterMode=!1,e.isHighSpeedRailway=!1,e.carRoot=null,e.colorTypeAmount=k.colorDes.length,e.roadPoint0=null,e.roadPoint1=null,e.turntableCarArr=[],e.transportAmount=null,e.transportCarArr=[],e.lastCar=null,e.oldSortAmount=0,e.guideNodes=[],e.guideText=["\u6c7d\u8f66\u4f1a\u671d\u7740\u7bad\u5934\u65b9\u5411\u79fb\u52a8","\u5927\u5df4\u8f66\u53ef\u4ee5\u8f7d10\u4e2a\u540c\u8272\u5c0f\u4eba","\u5c0f\u5df4\u58eb\u53ef\u4ee5\u8f7d6\u4e2a\u540c\u8272\u5c0f\u4eba","\u8f7f\u8f66\u53ef\u4ee5\u8f7d4\u4e2a\u540c\u8272\u5c0f\u4eba"],e.currentGuideNode=null,e.guidedNodes=[],e.poolMgr=new w.default,e.sortColor_new=[],e.levelDataJSON={},e.parkingNodes=[],e.between2_4CarArr=[],e.highSpeedRailSpeed=600,e.isTransportCarMove=!1,e.transportSpeed=50,e.colorPersonArr=[],e.unlockParkingTarget=null,e.carparkIng=!1,e.isRotateCreate=!1,e.moveCarAmount=0,e.allPersonAmount=0,e.allPersonAmount2=0,e.extraWeightConst=0,e.extraWeight=[],e.carWeight=[],e.parkingWeight=[],e.sortWeight=[],e.allWeight=[],e.colorPersonAmountArr=[],e.colorPersonAmountArrIndex=[],e.colorPersonIndexArr=[],e.uiShowPersonAmount=20,e.currentPersonColorAmount=[],e.sortPersonNodes=[],e.times=0,e.isCanStartClick=!1,e.isCheck=!1,e.isFail=!1,e.isWin=!1,e.personSpeed=1200,e.policeIndex=0,e.goldIndex=0,e.policeSkinName="a",e.goldSkinName="a",e.policeIndexSeat=0,e.goldIndexSeat=0,e.isReviveAmount=0,e.lastExtraIndexArr=[],e.randomColorArr=[],e.randomColorNum=[],e.pathArr=[],e.carIndex=[],e.carNodeArr=[],e.carAllAmount=0,e.weightLimitIndex=0,e.localData={},e.reviveArr=[],e.firstSortIndexArr=[],e.firstSortAmountArr=[],e.isSorting=!1,e.isSortAnim=!1,e.isRemove=!1,e.tipRemove=null,e.removePropUsing=!1,e}return __extends(e,t),e.prototype.changeBg=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,n,r,a,s;return __generator(this,function(c){switch(c.label){case 0:return this.isWaterMode?[2]:this.isHighSpeedRailway?[2]:((t=h.User.getTempData(i.TempData.CURRENT_LEVEL)||1)>50&&(t%=50),this.dict.bg.width=1e4,t>=41?(this.dict.bg.color=new cc.Color(254,205,136),[4,y.default.getRes("gameBundle","prefab/map/SandBg",cc.Prefab)]):[3,3]);case 1:return a=c.sent(),this.dict.bg.addChild(cc.instantiate(a)),[4,y.default.getRes("gameBundle","prefab/map/SandDoor",cc.Prefab)];case 2:return s=c.sent(),this.dict.door.getComponent(cc.Sprite).enabled=!1,this.dict.door.children[0].active=!1,this.dict.door.children[1].active=!1,this.dict.door.addChild(cc.instantiate(s)),[3,12];case 3:return t>=31?(this.dict.bg.color=new cc.Color(254,205,136),[4,y.default.getRes("gameBundle","prefab/map/SnowBg",cc.Prefab)]):[3,6];case 4:return e=c.sent(),this.dict.bg.addChild(cc.instantiate(e)),[4,y.default.getRes("gameBundle","prefab/map/SnowDoor",cc.Prefab)];case 5:return o=c.sent(),this.dict.door.getComponent(cc.Sprite).enabled=!1,this.dict.door.children[0].active=!1,this.dict.door.children[1].active=!1,this.dict.door.addChild(cc.instantiate(o)),[3,12];case 6:return t>=21?(this.dict.bg.color=new cc.Color(227,196,163),[4,y.default.getRes("gameBundle","prefab/map/DoorYellow",cc.Prefab)]):[3,9];case 7:return n=c.sent(),this.dict.bg.addChild(cc.instantiate(n)),[4,y.default.getRes("gameBundle","prefab/map/HouseYellow",cc.Prefab)];case 8:return r=c.sent(),this.dict.door.addChild(cc.instantiate(r)),this.dict.door.getComponent(cc.Sprite).enabled=!1,this.dict.door.children[0].active=!1,this.dict.door.children[1].active=!1,console.log("\u9ec4\u8272\u80cc\u666f"),[3,12];case 9:return t>=11?(this.dict.bg.color=new cc.Color(160,193,122),[4,y.default.getRes("gameBundle","prefab/map/GrassBg",cc.Prefab)]):[3,12];case 10:return a=c.sent(),this.dict.bg.addChild(cc.instantiate(a)),[4,y.default.getRes("gameBundle","prefab/map/GrassDoor",cc.Prefab)];case 11:return s=c.sent(),this.dict.door.getComponent(cc.Sprite).enabled=!1,this.dict.door.children[0].active=!1,this.dict.door.children[1].active=!1,this.dict.door.addChild(cc.instantiate(s)),[3,12];case 12:return[2]}})})},e.prototype.updateCarParking=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,i,n,r,a;return __generator(this,function(c){switch(c.label){case 0:return[4,y.default.getRes("gameBundle","texture/vip",cc.Texture2D)];case 1:for(t=c.sent(),r=0;r<this.dict.parkingRoot.children.length;r++)(a=this.dict.parkingRoot.children[r]).opacity=255,a.getChildByName("videoLock")&&(a.getChildByName("videoLock").getChildByName("text").getComponent(cc.Label).fontSize=35,a.getChildByName("videoLock").getChildByName("text").getComponent(cc.Label).lineHeight=40,a.getChildByName("videoLock").getChildByName("text").width=90,a.getChildByName("videoLock").opacity=200);return[4,y.default.getRes("gameBundle","prefab/item/unlock_pack",cc.Prefab)];case 2:return e=c.sent(),(o=cc.instantiate(e)).active=!1,this.dict.parkingRoot.parent.addChild(o),i=g.default.get(f.default.cardAmount)||0,g.default.get(f.default.UnlockParking)?(o.active=!0,o.children[1].getComponent(cc.Label).string=""+g.default.get(f.default.UnlockParking),[4,y.default.getRes("gameBundle","texture/lock",cc.Texture2D)]):[3,4];case 3:for(n=c.sent(),r=0;r<this.dict.parkingRoot.children.length;r++)(a=this.dict.parkingRoot.children[r]).opacity=255,a.getChildByName("videoLock")&&(a.getChildByName("videoLock").getChildByName("icon").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n));return[3,6];case 4:return i?[4,y.default.getRes("gameBundle","texture/lock",cc.Texture2D)]:[3,6];case 5:for(n=c.sent(),r=0;r<this.dict.parkingRoot.children.length;r++)(a=this.dict.parkingRoot.children[r]).opacity=255,a.getChildByName("videoLock")&&(a.getChildByName("videoLock").getChildByName("icon").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n));c.label=6;case 6:return this.dict.parkingRoot.children[0].getChildByName("empty").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),o.on(cc.Node.EventType.TOUCH_START,function(){b.default.show(s.default.formatStr("\u53ef\u4ee5\u89e3\u9501\u4e00\u4e2a\u65b0\u7684\u505c\u8f66\u4f4d"))},this),[2]}})})},e.prototype.updateUnlockParking=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,i,n;return __generator(this,function(r){switch(r.label){case 0:return t=g.default.get(f.default.UnlockParking)||0,e=g.default.get(f.default.cardAmount)||0,t?(this.dict.parkingRoot.parent.getChildByName("unlock_pack").active=!0,this.dict.parkingRoot.parent.getChildByName("unlock_pack").children[1].getComponent(cc.Label).string=""+t,[4,y.default.getRes("gameBundle","texture/lock",cc.Texture2D)]):[3,2];case 1:for(o=r.sent(),i=0;i<this.dict.parkingRoot.children.length;i++)(n=this.dict.parkingRoot.children[i]).opacity=255,n.getChildByName("videoLock")&&(n.getChildByName("videoLock").getChildByName("icon").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o));return[3,6];case 2:return e?(this.dict.parkingRoot.parent.getChildByName("unlock_pack").active=!1,[4,y.default.getRes("gameBundle","texture/lock",cc.Texture2D)]):[3,4];case 3:for(o=r.sent(),i=0;i<this.dict.parkingRoot.children.length;i++)(n=this.dict.parkingRoot.children[i]).opacity=255,n.getChildByName("videoLock")&&(n.getChildByName("videoLock").getChildByName("icon").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o));return[3,6];case 4:return this.dict.parkingRoot.parent.getChildByName("unlock_pack").active=!1,[4,y.default.getRes("gameBundle","texture/video",cc.Texture2D)];case 5:for(o=r.sent(),i=0;i<this.dict.parkingRoot.children.length;i++)(n=this.dict.parkingRoot.children[i]).opacity=255,n.getChildByName("videoLock")&&(n.getChildByName("videoLock").getChildByName("icon").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o));r.label=6;case 6:return[2]}})})},e.prototype.onLoad=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(o){switch(o.label){case 0:for(this.changeNodeName(),this.createSpine(),t.prototype.onLoad.call(this),(c.Platform.getConfig().flag.includes("ios")||this.isHighSpeedRailway)&&(this.dict.door.getComponent(cc.Sprite).enabled=!1,this.dict.door.getChildByName("bg").active=!1,this.dict.doorOutside.active=!1,this.dict.door2.getComponent(cc.Sprite).enabled=!1,this.dict.door2.active=!1,this.dict.board&&(this.dict.board.active=!1)),cc.view.getFrameSize().width/cc.view.getFrameSize().height<.5&&this.dict.carRoot.getComponent(R.default)&&this.dict.carRootBg2&&(this.dict.carRootBg2.children[0].y-=50),e=0;e<this.dict.personPosRoot.children.length;e++)this.dict.personPosRoot.children[e].y+=14;return this.dict.personRoot.setSiblingIndex(100),this.dict.door.setSiblingIndex(101),window.tt&&(this.isDebug=!1),c.Platform.getConfig().flag.includes("gg")&&(this.isDebug=!1),c.Platform.getConfig().flag.includes("ios")&&(this.isDebug=!1),this.roadPoint0=this.dict.road.convertToWorldSpaceAR(cc.v2(-2250,0)),this.roadPoint1=this.dict.road.convertToWorldSpaceAR(cc.v2(2250,0)),this.dict.personAmount.getComponent(cc.Label).fontSize=32,this.dict.personAmount.getComponent(cc.Label).enableBold=!0,this.dict.personAmount.parent.children[0].getComponent(cc.Label).fontSize=17,this.dict.personAmount.parent.children[0].getComponent(cc.Label).enableBold=!0,this.dict.personAmount.parent.y-=15,this.dict.personAmount.parent.zIndex=1e3,this.changeBg(),this.updateCarParking(),this.carWeight=new Array(this.colorTypeAmount).fill(0),this.extraWeight=new Array(this.colorTypeAmount).fill(0),this.lastExtraIndexArr=new Array(this.colorTypeAmount).fill(0),this.parkingWeight=new Array(this.colorTypeAmount).fill(0),this.sortWeight=new Array(this.colorTypeAmount).fill(0),this.allWeight=new Array(this.colorTypeAmount).fill(0),this.colorPersonIndexArr=new Array(this.colorTypeAmount).fill(0),this.currentPersonColorAmount=new Array(this.colorTypeAmount).fill(0),this.colorPersonArr=new Array(this.colorTypeAmount).fill(0),this.levelDataJSON=JSON.parse(JSON.stringify(k.levelData[this.levelID])),this.setCollisionManager(!0,!1),this.carRoot=this.dict.carRoot,this.isHighSpeedRailway?this.dict.fence.x-=45:this.dict.fence.x-=17,this.dict.btns&&(this.dict.btns.active=!1),this.dict.hitSpine.scale=.4,[4,this.updatePersonPrefab()];case 1:return o.sent(),this.dict.tailGas.getComponent(E.default)&&(this.dict.tailGas.getComponent(E.default).length=25,this.dict.tailGas.getComponent(E.default).headWidth=35,this.dict.tailGas.getComponent(E.default).tailWidth=20,this.dict.tailGas.getComponent(E.default).headOpacity=230,this.dict.tailGas.getComponent(E.default).tailOpacity=40),this.dict.hand&&(this.guideNodes.push(this.dict.carRoot.children[3]),this.guideNodes.push(this.dict.carRoot.children[0]),this.guideNodes.push(this.dict.carRoot.children[1]),this.guideNodes.push(this.dict.carRoot.children[2]),this.currentGuideNode=this.guideNodes[0],this.handPos()),[4,this.initTT()];case 2:return o.sent(),[4,this.initIOS()];case 3:return o.sent(),[4,this.initShipMode()];case 4:return o.sent(),[2]}})})},e.prototype.initIOS=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,i,n,r,a;return __generator(this,function(s){switch(s.label){case 0:return c.Platform.getConfig().flag.includes("ios")||this.isHighSpeedRailway?(this.dict.personAmount.parent.active=!1,[4,y.default.getRes("iosBundle","prefab/Mark",cc.Prefab)]):[3,4];case 1:return t=s.sent(),e=cc.instantiate(t),this.dict.element.addChild(e),this.dict.personAmount=e.getChildByName("personAmount"),this.dict.personAmount.getComponent(cc.Label).string=""+this.allPersonAmount,[4,y.default.getRes("iosBundle","prefab/Roof",cc.Prefab)];case 2:return o=s.sent(),i=cc.instantiate(o),this.dict.door.addChild(i),this.dict.highSpeedRail2Root=i.getChildByName("highSpeedRail2Root"),[4,y.default.getRes("iosBundle","prefab/personPosRoot",cc.Prefab)];case 3:for(n=s.sent(),r=cc.instantiate(n),a=0;a<this.dict.personPosRoot.children.length;a++)this.dict.personPosRoot.children[a].position=r.children[a].position;s.label=4;case 4:return[2]}})})},e.prototype.initShipMode=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(o){switch(o.label){case 0:return this.isWaterMode?(this.dict.personAmount.parent.active=!1,[4,y.default.getRes("iosBundle","prefab/Mark",cc.Prefab)]):[3,2];case 1:t=o.sent(),e=cc.instantiate(t),this.dict.element.addChild(e),this.dict.personAmount=e.getChildByName("personAmount"),this.dict.personAmount.getComponent(cc.Label).string=""+this.allPersonAmount,o.label=2;case 2:return[2]}})})},e.prototype.updatePersonPrefab=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o;return __generator(this,function(i){switch(i.label){case 0:return"f27597"!=this.folder?[3,4]:(this.dict.carPrefab.getChildByName("061").destroy(),this.dict.carPrefab.getChildByName("062").destroy(),this.dict.carPrefab.getChildByName("063").destroy(),[4,y.default.getRes("ttBundle","prefab/blockMan/061",cc.Prefab)]);case 1:return t=i.sent(),[4,y.default.getRes("ttBundle","prefab/blockMan/062",cc.Prefab)];case 2:return e=i.sent(),[4,y.default.getRes("ttBundle","prefab/blockMan/063",cc.Prefab)];case 3:return o=i.sent(),this.dict.carPrefab.addChild(cc.instantiate(t)),this.dict.carPrefab.addChild(cc.instantiate(e)),this.dict.carPrefab.addChild(cc.instantiate(o)),[3,5];case 4:this.isWaterMode,this.dict.personPrefab.scale=.9,i.label=5;case 5:return this.dict.personPrefab.getComponent(cc.Sprite).enabled=!1,[4,this.addCoin()];case 6:return i.sent(),[2]}})})},e.prototype.updateTransportAmount=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(o){switch(o.label){case 0:return this.dict.transportAmount?c.Platform.getConfig().flag.includes("ios")||this.isHighSpeedRailway?[4,y.default.getRes("iosBundle","prefab/TransportAmountRoot",cc.Prefab)]:[3,2]:[3,3];case 1:t=o.sent(),e=cc.instantiate(t),this.dict.right.addChild(e),this.dict.transportAmount=e.getChildByName("transportAmount"),o.label=2;case 2:this.dict.transportAmount.getComponent(cc.Label).string=""+this.transportCarArr.length,o.label=3;case 3:return[2]}})})},e.prototype.addTurntableCar=function(){if(this.dict.turntableRoot){this.turntableCarArr=[];for(var t=0;t<this.dict.turntableRoot.children.length;t++){var e=this.dict.turntableRoot.children[t];e.getComponent(D.default).init(this),this.turntableCarArr=this.turntableCarArr.concat(e.getComponent(D.default).getCars())}}},e.prototype.updateTurntableCar=function(){this.turntableCarArr=[];for(var t=0;t<this.dict.turntableRoot.children.length;t++){var e=this.dict.turntableRoot.children[t];this.turntableCarArr=this.turntableCarArr.concat(e.getComponent(D.default).getCars())}},e.prototype.addTransportCar=function(){var t=this.levelDataJSON.transport;if(t){for(var e=this.dict.transportPos.parent.convertToWorldSpaceAR(this.dict.transportPos.position),o=this.dict.carRoot.convertToNodeSpaceAR(e),i=0;i<t.length;i++){var n=t[i],r=cc.instantiate(this.dict.carPrefab.getChildByName("02"+n));switch(this.dict.carRoot.addChild(r),r.getComponent(P.default).isTransportCar=!0,this.transportCarArr.push(r),r.x=397+70*i,n){case 1:r.y=o.y;break;case 2:r.y=o.y+10;break;case 3:r.y=o.y+27}}this.lastCar=this.transportCarArr[this.transportCarArr.length-1],this.transportAmount=this.transportCarArr.length,this.updateTransportAmount()}},e.prototype.timerTransportMove=function(t){void 0===t&&(t=1.2),this.unschedule(this.setTransportCarMove),this.scheduleOnce(this.setTransportCarMove,t)},e.prototype.setTransportCarMove=function(){this.isTransportCarMove=!0},e.prototype.update=function(t){if(this.isTransportCarMove&&this.dict.line){this.dict.line.x-=t*this.transportSpeed,this.dict.line2.x-=t*this.transportSpeed,this.dict.line.x<=-(315+this.dict.line.width)&&(this.dict.line.x=this.dict.line2.x+this.dict.line.width),this.dict.line2.x<=-(315+this.dict.line.width)&&(this.dict.line2.x=this.dict.line.x+this.dict.line.width);try{for(var e=0;e<this.transportCarArr.length;e++){var o=this.transportCarArr[e];if(o){var i=o.x-t*this.transportSpeed;if(i<=-350){var n=this.getMaxXTransportCar().x+70;i=n<=397?397:n}o.x=i}}}catch(r){}}},e.prototype.getMaxXTransportCar=function(){for(var t=this.transportCarArr[0],e=0;e<this.transportCarArr.length;e++){var o=this.transportCarArr[e];o.x>t.x&&(t=o)}return t},e.prototype.addCoin=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,i,n,r,a,s,l,h;return __generator(this,function(d){switch(d.label){case 0:return c.Platform.getConfig().hasCoin?(console.log("addCoin"),[4,y.default.getRes("gameBundle","prefab/coin/coinRoot0",cc.Prefab)]):[2];case 1:return t=d.sent(),[4,y.default.getRes("gameBundle","prefab/coin/coinRoot1",cc.Prefab)];case 2:return e=d.sent(),[4,y.default.getRes("gameBundle","prefab/coin/coinRoot2",cc.Prefab)];case 3:return o=d.sent(),[4,y.default.getRes("gameBundle","prefab/coin/coinRoot11",cc.Prefab)];case 4:return i=d.sent(),[4,y.default.getRes("gameBundle","prefab/coin/coinRoot13",cc.Prefab)];case 5:return n=d.sent(),(r=cc.instantiate(t)).name="coinRoot",(a=cc.instantiate(e)).name="coinRoot",(s=cc.instantiate(o)).name="coinRoot",(l=cc.instantiate(i)).name="coinRoot",(h=cc.instantiate(n)).name="coinRoot",this.dict.carPrefab.getChildByName("061").addChild(r),this.dict.carPrefab.getChildByName("062").addChild(a),this.dict.carPrefab.getChildByName("063").addChild(s),this.dict.carPrefab.getChildByName("1161")&&this.dict.carPrefab.getChildByName("1161").addChild(l),this.dict.carPrefab.getChildByName("1363")&&this.dict.carPrefab.getChildByName("1363").addChild(h),[2]}})})},e.prototype.initTT=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return this.isWaterMode?[3,2]:[4,y.default.getRes("gameBundle","prefab/item/Line",cc.Prefab)];case 1:t=e.sent(),this.dict.road.addChild(cc.instantiate(t)),e.label=2;case 2:return this.dict.fence.y+=5,[2]}})})},e.prototype.handPos=function(){var t=cc.v2(0,-20);t="053-1"==this.currentGuideNode.name?cc.v2(-15,-35):"053-0"==this.currentGuideNode.name?cc.v2(15,-35):"042-0"==this.currentGuideNode.name?cc.v2(15,-50):cc.v2(-15,-20);var e=this.currentGuideNode.convertToWorldSpaceAR(t),o=this.guideNodes.indexOf(this.currentGuideNode);this.dict.handText.getComponent(cc.Label).string=this.guideText[o];var i=this.dict.hand.parent.convertToNodeSpaceAR(e);this.dict.hand.position=i},e.prototype.changeNodeName=function(){for(var t=cc.find("game/element/carRoot",this.node),e=0;e<t.children.length;e++)t.children[e].children[1].getComponent(cc.Sprite).enabled=!1},e.prototype.createSpine=function(){(function(t,e){if(!t.getChildByName(e)){var o=new cc.Node(e);t.addChild(o),o.position=cc.v2(0,1e5),o.addComponent(sp.Skeleton),o.getComponent(sp.Skeleton).premultipliedAlpha=!1}})(cc.find("game",this.node),"f28749.jiesuo=jiesuo")},e.prototype.changeBulldozer=function(t){var e=cc.instantiate(this.dict.carPrefab.getChildByName("bulldozer"));this.dict.bulldozerRoot.addChild(e),e.position=t.position;var o=t.getComponent(A.default).bulldozerSpeed,i=e.convertToWorldSpaceAR(cc.v2(0,1500)),n=e.parent.convertToNodeSpaceAR(i);t.destroy(),cc.tween(e).to(1500/o,{position:n}).call(function(){e.destroy()}).start()},e.prototype.shackAction=function(t,e){var o=cc.moveBy(t,e,e),i=cc.moveBy(t,-e,-e),n=cc.moveBy(.8*t,.8*e,.8*e),r=cc.moveBy(.8*t,.8*-e,.8*-e),a=cc.moveBy(.6*t,.6*e,.6*e),s=cc.moveBy(.6*t,.6*-e,.6*-e),c=cc.moveBy(.4*t,.4*e,.4*e),l=cc.moveBy(.4*t,.4*-e,.4*-e),h=cc.moveBy(.2*t,.2*e,.2*e),d=cc.moveBy(.2*t,.2*-e,.2*-e);return cc.sequence(o,i,n,r,a,s,c,l,h,d)},e.prototype.changeCar=function(t,e,o,i){return void 0===o&&(o=0),__awaiter(this,void 0,void 0,function(){var n,r,a,s,c,l,h,d,u,p,f=this;return __generator(this,function(g){switch(g.label){case 0:return t.getComponent(P.default).isReadyDestroy=!0,n=t.getComponent(P.default).colorImgName,r=t.getComponent(P.default).lenImgName,i?(t.getComponent(P.default).isFireEngine&&(i="1213"),console.log("changeCar-carName",i),(a=cc.instantiate(this.dict.carPrefab.getChildByName(i))).parking=t.parking,a.getComponent(P.default).isRichCar=t.getComponent(P.default).isRichCar):t.getComponent(P.default).isFireEngine?a=cc.instantiate(this.dict.carPrefab.getChildByName("1223")):t.getComponent(P.default).isPoliceCar?a=cc.instantiate(this.dict.carPrefab.getChildByName("102"+r)):t.getComponent(P.default).isRichCar?(r=1,a=cc.instantiate(this.dict.carPrefab.getChildByName("112"+r))):a=t.getComponent(P.default).isTramcar?4!=e&&5!=e||2!=o?4!=e&&5!=e||1!=o?cc.instantiate(this.dict.carPrefab.getChildByName("132"+r)):cc.instantiate(this.dict.carPrefab.getChildByName("13"+e+r+"-1")):cc.instantiate(this.dict.carPrefab.getChildByName("13"+e+r+"-0")):cc.instantiate(this.dict.carPrefab.getChildByName("02"+r)),a.getComponent(P.default).isTramcar=t.getComponent(P.default).isTramcar,a.getComponent(P.default).tramcarPosIndex=t.getComponent(P.default).tramcarPosIndex,a.getComponent(P.default).isTramcar&&(a.getComponent(P.default).otherCarNode=this.getOtherCarByDistance(a)),t.getComponent(P.default).carState!=k.CarState.InRoadRight&&t.getComponent(P.default).carState!=k.CarState.InRoadLeft||this.updateCarWeight(),a.getComponent(P.default).carState=t.getComponent(P.default).carState,a.active=!1,this.carRoot.addChild(a),a.getComponent(P.default).mgr=this,a.getComponent(P.default).colorImgName=n,a.getComponent(P.default).lenImgName=r,a.getComponent(P.default).dirImgName=e,a.getComponent(P.default).carColor=t.getComponent(P.default).carColor,c=2,a.getComponent(P.default).isTramcar&&(c=1),4==e||5==e?(a.position=cc.v2(t.x,t.y),l=a.convertToWorldSpaceAR(cc.v2(0,t.height/c)),s=a.parent.convertToNodeSpaceAR(l),a.position=cc.v2(s.x,s.y)):0==o?a.position=cc.v2(t.x,t.y+t.height/c):a.getComponent(P.default).carState==k.CarState.OnBottomLeft?a.position=cc.v2(t.x-t.width/c,t.y):a.getComponent(P.default).carState==k.CarState.OnBottomRight?a.position=cc.v2(t.x+t.width/c,t.y):1==o?(l=this.dict.road.parent.convertToWorldSpaceAR(this.dict.road.position),s=a.parent.convertToNodeSpaceAR(l),a.position=cc.v2(t.x+t.width/c,s.y)):(l=this.dict.road.parent.convertToWorldSpaceAR(this.dict.road.position),s=a.parent.convertToNodeSpaceAR(l),a.position=cc.v2(t.x-t.width/c,s.y)),a.getComponent(P.default).carState==k.CarState.GoingParking&&(h=a.parking.convertToWorldSpaceAR(cc.v2(0,-155)),s=a.parent.convertToNodeSpaceAR(h),a.position=cc.v2(s.x,s.y)),u=""+n+e+r,d="texture/"+this.folder+"/"+this.folder+"_"+u,a.stopAllActions(),p=function(e){if(t.getChildByName("tailGasSpine")&&f.poolMgr.put(t.getChildByName("tailGasSpine"),"tailGasSpine"),t.getChildByName("tailGas")&&t.getChildByName("tailGas").destroy(),t.getComponent(P.default).isTurntableCar){var o=t.parent.getComponent(D.default).cars.indexOf(t);t.parent.getComponent(D.default).cars.splice(o,1),f.updateTurntableCar()}var i=t.getComponent(P.default).nextCar;try{i&&i.getComponent(P.default)&&(i.getComponent(P.default).carState=k.CarState.Normal)}catch(b){}if(t.getChildByName("key")){var n=cc.instantiate(t.getChildByName("key")),r=t.getChildByName("key").getComponent(I.default).lock,s=t.convertToWorldSpaceAR(n.position),c=f.node.convertToNodeSpaceAR(s),l=r.parent.convertToWorldSpaceAR(r.position),h=f.node.convertToNodeSpaceAR(l);n.position=c,f.node.addChild(n);var d=s.sub(l).mag(),u=n.scale;cc.tween(n).to(.3,{scale:1.5*u}).to(d/800,{position:h}).call(function(){n.opacity=0;var t=r.scale;cc.tween(r).to(.3,{scale:1.5*t}).call(function(){r.runAction(f.shackAction(.1,2))}).delay(.5).call(function(){n.destroy(),r.destroy()}).start()}).start()}t.destroy(),e&&(a.getChildByName("car").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e)),a.active=!0;var p=a.convertToWorldSpaceAR(cc.v2(0,2250)),g=a.parent.convertToNodeSpaceAR(p);if(a.getComponent(P.default).carState==k.CarState.InRoadRight||a.getComponent(P.default).carState==k.CarState.InRoadLeft){var m;s=a.parent.convertToWorldSpaceAR(a.position);var v=void 0;if(a.getComponent(P.default).isFireEngine){var y=a.parking.getChildByName("fireCarPos").position;v=a.parking.convertToWorldSpaceAR(y)}else v=a.parking.convertToWorldSpaceAR(cc.v2(0,-229));m=a.parent.convertToNodeSpaceAR(v),d=Math.abs(v.x-s.x),f.addTailGasSpine(a),cc.tween(a).to(d/a.getComponent(P.default).speed,{position:m}).call(function(){a.getComponent(P.default).isFireEngine?(a.getComponent(P.default).carState=k.CarState.WaterSpray,a.getChildByName("penshui").active=!0,cc.tween(a.parking.getChildByName("fireSpine")).to(1,{opacity:0}).start(),cc.tween(a).delay(1).call(function(){f.fireEngineLeave(a)}).start()):(a.getComponent(P.default).carState=k.CarState.GoingParking,console.log("isRichCar",a.getComponent(P.default).isRichCar),a.getComponent(P.default).isRichCar?f.changeCar(a,6,0,"116"+a.getComponent(P.default).lenImgName):a.getComponent(P.default).isTramcar?f.changeCar(a,6,0,"136"+a.getComponent(P.default).lenImgName):f.changeCar(a,6,0,"06"+a.getComponent(P.default).lenImgName))}).start()}else if(a.getComponent(P.default).carState==k.CarState.GoingParking){if(s=f.getWPosByNode(a),v=void 0,a.parking){1==a.getComponent(P.default).lenImgName?v=a.parking.convertToWorldSpaceAR(cc.v2(0,-20)):2==a.getComponent(P.default).lenImgName?(v=a.parking.convertToWorldSpaceAR(cc.v2(0,-3)),a.getChildByName("car").angle=-27.592):(v=a.parking.convertToWorldSpaceAR(cc.v2(3,3)),a.getChildByName("car").angle=-27.592);var _=a.parent.convertToNodeSpaceAR(v);a.getComponent(P.default).carState=k.CarState.Parking,a.stopAllActions(),d=_.sub(a.position).mag(),cc.tween(a).to(d/a.getComponent(P.default).speed,{position:_}).call(function(){a.parking.car=a,f.putTailGas(a),f.checkPerson(!0)}).start()}}else if(a.getComponent(P.default).carState==k.CarState.GoingRoad){s=f.dict.road.parent.convertToWorldSpaceAR(f.dict.road.position);var C=a.parent.convertToWorldSpaceAR(a.position);d=Math.abs(C.y-s.y),f.addTailGasSpine(a),cc.tween(a).by(d/a.getComponent(P.default).speed,{y:d}).call(function(){f.collision(a)}).start()}else f.addTailGasSpine(a),cc.tween(a).to(2250/a.getComponent(P.default).speed,{position:g}).start()},t.getComponent(P.default).carState==k.CarState.GoingParking&&this.preLoadMannedImg(a,n,e,r),t.getComponent(P.default).carState!=k.CarState.OutParking?[3,2]:[4,this.addMannedImg(a,n,e,r)];case 1:return g.sent(),p(null),[3,3];case 2:cc.resources.load(d,function(t,e){p(e)}),g.label=3;case 3:return[2]}})})},e.prototype.preLoadMannedImg=function(t,e,o,i){var n,r=""+e+7+i;n="texture/"+this.folder+"/"+this.folder+"_"+r,this.load(n)},e.prototype.addMannedImg=function(t,e,o,i){return __awaiter(this,void 0,void 0,function(){var o,n,r,a;return __generator(this,function(s){switch(s.label){case 0:return o=new cc.Node,r=""+e+7+i,n="texture/"+this.folder+"/"+this.folder+"_"+r,[4,this.load(n)];case 1:return a=s.sent(),o.addComponent(cc.Sprite).spriteFrame=a,o.y=-38.458,t.getChildByName("car").addChild(o),t.getChildByName("dir").active=!1,[2]}})})},e.prototype.load=function(t){return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(e,o){cc.resources.load(t,function(t,i){return t?(cc.warn(t),o(t)):e(new cc.SpriteFrame(i))})})]})})},e.prototype.fireEngineLeave=function(t){t.getComponent(P.default).carState=k.CarState.WaterSprayLeave;var e=t.convertToWorldSpaceAR(cc.v2(0,2250)),o=t.parent.convertToNodeSpaceAR(e);this.addTailGasSpine(t),cc.tween(t).to(2250/t.getComponent(P.default).speed,{position:o}).start(),t.parking.getChildByName("fireSpine").destroy(),t.parking.car=null,t.parking.isEmpty=!0;var i=this.dict.parkingRoot.children.indexOf(t.parking);console.log("index",i,this.parkingNodes.length),this.parkingNodes.splice(i-1,0,t.parking),console.log("index2",i,this.parkingNodes.length)},e.prototype.getWPosByNode=function(t){return t.parent.convertToWorldSpaceAR(t.position)},e.prototype.putTailGas=function(t){t.getChildByName("tailGas")&&this.poolMgr.put(t.getChildByName("tailGas"),"tailGas")},e.prototype.hit=function(t){var e=cc.instantiate(this.dict.hitSpine);e&&(t.addChild(e),e.position=cc.v2(0,0),this.scheduleOnce(function(){e.destroy()},1))},e.prototype.collision=function(t){if(t.getComponent(P.default).isFireEngine){for(i=t,n=void 0,r=0;r<this.dict.parkingRoot.children.length;r++){var e=this.dict.parkingRoot.children[r];if(e.getChildByName("fireSpine")&&e.getChildByName("fireSpine").active){e.isEmpty=!1,i.parking=e,n=e;break}}if(n){s=i.parent.convertToWorldSpaceAR(i.position);var o=n.getChildByName("fireCarPos").position;c=n.convertToWorldSpaceAR(o),s.x>=c.x?(i.getComponent(P.default).carState=k.CarState.InRoadLeft,this.changeCar(i,1,2,"01"+i.getComponent(P.default).lenImgName+"-0")):(i.getComponent(P.default).carState=k.CarState.InRoadRight,this.changeCar(i,1,1,"01"+i.getComponent(P.default).lenImgName+"-1"))}}else{this.dict.carRoot.getComponent(B.default)&&this.dict.carRoot.getComponent(B.default).carMove(t),this.dict.carRoot.getComponent(R.default)&&this.dict.carRoot.getComponent(R.default).carMove(t);for(var i=t,n=void 0,r=0;r<this.parkingNodes.length;r++){var a=this.parkingNodes[r];if(a.isEmpty){a.isEmpty=!1,i.parking=a,n=a;break}}if(n){var s=i.parent.convertToWorldSpaceAR(i.position),c=n.convertToWorldSpaceAR(cc.v2(0,-229));s.x>=c.x?(i.getComponent(P.default).carState=k.CarState.InRoadLeft,i.getComponent(P.default).isRichCar?(i.getComponent(P.default).lenImgName=1,this.changeCar(i,1,2,"111"+i.getComponent(P.default).lenImgName+"-0")):this.changeCar(i,1,2,"01"+i.getComponent(P.default).lenImgName+"-0")):(i.getComponent(P.default).carState=k.CarState.InRoadRight,i.getComponent(P.default).isRichCar?(i.getComponent(P.default).lenImgName=1,this.changeCar(i,1,1,"111"+i.getComponent(P.default).lenImgName+"-1")):this.changeCar(i,1,1,"01"+i.getComponent(P.default).lenImgName+"-1"))}}},e.prototype.onLevelReady=function(){this.dict.personPrefab.children[0].getComponent(sp.Skeleton).setAnimationCacheMode(sp.Skeleton.AnimationCacheMode.PRIVATE_CACHE),this.initView()},e.prototype.initView=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,r,s,l,d,u,p,f,g,m,v,_,C,b,S,w,M,I,L,D,E,x,U=this;return __generator(this,function(O){switch(O.label){case 0:if(this.dict.carRoot.getComponent(B.default)&&this.dict.carRoot.getComponent(B.default).init(this.levelDataJSON.carSquare,this),this.dict.carRoot.getComponent(R.default)&&this.dict.carRoot.getComponent(R.default).init(this.levelDataJSON.centerSquare,this.levelDataJSON.oblique,this),this.dict.carRoot.getComponent(N.default)){for(I=0;I<this.dict.carRoot.children.length;I++)(C=this.dict.carRoot.children[I]).getComponent(P.default).isUTransportCar_noIn=!0;this.dict.carRoot.getComponent(N.default).init(this.levelDataJSON.uTransport,this)}if(this.dict.guide&&this.scheduleOnce(function(){U.dict.guide.active=!1},6),this.dict.bulldozerRoot)for(I=0;I<this.dict.bulldozerRoot.children.length;I++)"bulldozer"==(C=this.dict.bulldozerRoot.children[I]).name&&C.getComponent(A.default).init(this);for(this.addTurntableCar(),this.addTransportCar(),b=0;b<this.dict.parkingRoot.childrenCount;b++)(S=this.dict.parkingRoot.children[b]).active&&S.getChildByName("empty").active&&!S.getChildByName("fireSpine")&&(S.isEmpty=!0,this.parkingNodes.push(S)),S.getChildByName("videoLock")&&(S.getChildByName("videoLock").getChildByName("icon").scale=.8);if(this.isDebug)for(t=[],b=0;b<this.carRoot.childrenCount;b++){for(S=this.carRoot.children[b],I=0;I<t.length;I++)C=t[I],S.x==C[0]&&S.y==C[1]&&console.error("\u540c\u4e00\u4e2a\u4f4d\u7f6e\u590d\u5236\u591a\u8f86\u8f66",S.name,b);t.push([S.x,S.y])}for(e=this.getLocal("blackCar")||[],o=this.carRoot.children.concat(this.turntableCarArr),b=0;b<o.length;b++)S=o[b],this.carNodeArr.push(S),S.getComponent(P.default).mgr=this,S.indexID=""+b,r=void 0,S.getComponent(P.default).isTransportCar?r=99:S.getComponent(P.default).isUTransportCar?r=99:(r=this.getPath(S),this.levelDataJSON.blackAmount&&!e.length&&r>=2&&r<=4&&this.between2_4CarArr.push(S)),S.getComponent(P.default).path=r,this.isDebug&&((s=new cc.Node).name="path",s.addComponent(cc.Label).string=""+r,s.color=cc.Color.WHITE,S.addChild(s),s.position=cc.v2(-13.105,-26.21)),this.allPersonAmount+=S.getComponent(P.default).seatTotalAmount;if(this.dict.carParkRoot)for(l={1:4,2:6,3:10},I=0;I<this.dict.carParkRoot.children.length;I++)for((C=this.dict.carParkRoot.children[I]).getComponent(T.default).initData(this.levelDataJSON.carpark[I],this),d=this.levelDataJSON.carpark[I],u=0;u<d.length;u++)p=d[u],this.allPersonAmount+=l[p];if(this.allPersonAmount2=this.allPersonAmount,this.dict.personAmount.getComponent(cc.Label).string=""+this.allPersonAmount,cc.game.emit("allPersonAmount",this.allPersonAmount,this.allPersonAmount2),this.setCarID(),this.levelDataJSON.blackAmount&&!e.length){if(this.levelDataJSON.blackAmount>=this.between2_4CarArr.length)for(I=0;I<this.between2_4CarArr.length;I++)(C=this.between2_4CarArr[I]).getComponent(P.default).isBlackCar=!0,e.push(C.getComponent(P.default).carID);else for(f=this.getRandomDistinctElements(this.between2_4CarArr,this.levelDataJSON.blackAmount),I=0;I<f.length;I++)(C=f[I]).getComponent(P.default).isBlackCar=!0,e.push(C.getComponent(P.default).carID);this.setLocal("blackCar",e)}if(g=this.getLocal("colorConfig")||[],-27361==this.levelID&&(g=[7,4,0,3]),m=a.BMS.getKey("RandomColor"),(v=h.User.getTempData(i.TempData.CURRENT_LEVEL)||1)>=m&&0!=m&&v>1?(this.sortColor_new=n.default.shuffleArray(JSON.parse(JSON.stringify(k.sortColor))),console.log("\u968f\u673a\u6253\u4e71\u989c\u8272",this.sortColor_new)):this.sortColor_new=k.sortColor,0==g.length||v>=m&&0!=m&&v>1){for(_=this.levelDataJSON.carColor,I=0;I<_.length;I++)C=_[I],this.randomColorArr.push(this.getArrByLen([0,1,2,3,4,5,6,7],C[2])),this.randomColorNum[I]||(this.randomColorNum[I]=0);for(b=0;b<this.carNodeArr.length;b++)S=this.carNodeArr[b],w=this.getCarColor(b,_),S.getComponent(P.default).isPoliceCar&&(w=k.CarColor.Police),S.getComponent(P.default).isRichCar&&(w=k.CarColor.Gold),g.push(w),this.setCarColorImg(S,w),null==(M=this.levelDataJSON.carWeight[S.getComponent(P.default).path-1])&&(M=0),w==k.CarColor.Gold?this.carWeight[w]+=M*S.getComponent(P.default).emptySeatAmount*2:this.carWeight[w]+=M*S.getComponent(P.default).emptySeatAmount;this.setLocal("colorConfig",g)}else for(b=0;b<this.carNodeArr.length;b++)S=this.carNodeArr[b],w=g[b],e.includes(S.getComponent(P.default).carID)&&(S.getComponent(P.default).isBlackCar=!0),S.getComponent(P.default).isPoliceCar&&(w=k.CarColor.Police),S.getComponent(P.default).isRichCar&&(w=k.CarColor.Gold),this.setCarColorImg(S,w),null==(M=this.levelDataJSON.carWeight[S.getComponent(P.default).path-1])&&(M=0),w==k.CarColor.Gold?this.carWeight[w]+=M*S.getComponent(P.default).emptySeatAmount*2:this.carWeight[w]+=M*S.getComponent(P.default).emptySeatAmount;for(console.log("\u8f66\u8f86\u6743\u91cd",this.carWeight),console.log("\u989c\u8272",k.colorDes),console.log("\u4eba\u6570",this.colorPersonArr),I=0;I<k.colorDes.length;I++)this.getAmountByColor(I);return console.log("this.colorPersonAmountArr",this.colorPersonAmountArr),console.log("this.colorPersonAmountArrIndex",this.colorPersonAmountArrIndex),-27361==this.levelID&&(this.colorPersonAmountArr=[[4,4,2],[],[],[3,3],[1,3],[],[],[2,4,4]],this.firstSortIndexArr=[0,7,3,4,0,7,3,4,0,7]),"f27597"!=this.folder?[3,2]:[4,y.default.getRes("ttBundle","prefab/blockMan/Person",cc.Prefab)];case 1:L=O.sent(),this.dict.personPrefab=cc.instantiate(L),this.dict.personPrefab.scale=.7,O.label=2;case 2:return c.Platform.getConfig().flag.includes("ios")||this.isHighSpeedRailway?[4,y.default.getRes("iosBundle","prefab/PavementRoot",cc.Prefab)]:[3,4];case 3:return D=O.sent(),E=cc.instantiate(D),this.dict.bg.addChild(E),this.dict.highSpeedRail=E.getChildByName("highSpeedRail"),this.dict.highSpeedRail.x=-850,this.dict.leftDoor=E.getChildByName("highSpeedRail").getChildByName("leftDoor"),this.dict.rightDoor=E.getChildByName("highSpeedRail").getChildByName("rightDoor"),this.dict.door2.parent.getChildByName("bg").active=!1,this.dict.door2.getComponent(cc.Sprite).enabled=!1,x=Math.abs(-837),cc.tween(this.dict.highSpeedRail).to(x/this.highSpeedRailSpeed,{x:-13}).call(function(){U.dict.highSpeedRail2Root.active=!0,cc.tween(U.dict.leftDoor).by(.3,{x:-34}).start(),cc.tween(U.dict.rightDoor).by(.3,{x:34}).call(function(){U.createPerson(),U.personMove(),U.onTouch(),U.scheduleOnce(function(){U.isCanStartClick=!0},1)}).start()}).start(),[3,5];case 4:this.createPerson(),this.personMove(),this.onTouch(),this.isCanStartClick=!0,O.label=5;case 5:return this.isTransportCarMove=!0,this.scheduleOnce(function(){U.face(),U.face2()},2),this.schedule(function(){return __awaiter(U,void 0,void 0,function(){var t,e;return __generator(this,function(o){switch(o.label){case 0:return this.isFail?[3,9]:this.checkCarFull()?[4,this.timer(.1)]:[3,9];case 1:return o.sent()?this.checkHasPersonMove()?[3,8]:[3,2]:[3,8];case 2:return[4,this.timer(.1)];case 3:return o.sent()?this.checkHasCarMove()?[3,8]:[3,4]:[3,8];case 4:return t=this.allPersonAmount,[4,this.timer(1)];case 5:return o.sent()?t!=this.allPersonAmount?[3,8]:this.isFail?[3,7]:(this.isFail=!0,e=this.allPersonAmount,[4,this.timer(.5)]):[3,8];case 6:o.sent()&&(this.check(e)?cc.game.emit("func_revive"):this.isFail=!1),o.label=7;case 7:return[3,8];case 8:return[3,9];case 9:return[2]}})})},.4),this.initWaterModeEffect(),[2]}})})},e.prototype.initWaterModeEffect=function(){if(this.isWaterMode)for(var t=function(t){var o=e.dict.carRoot.children[t],i=u.Utils.randomNum(0,20)/10;if(!o.getComponent(P.default).floatPos){var n=Math.PI/180*(90-o.angle),r=2*Math.cos(n),a=2*Math.sin(n),s=o.convertToWorldSpaceAR(cc.v2(r,a)),c=o.parent.convertToNodeSpaceAR(s);o.getComponent(P.default).floatPos=c;var l=o.position;e.scheduleOnce(function(){cc.tween(o).to(.6,{position:c}).to(.6,{position:l}).union().repeatForever().start()},i)}},e=this,o=0;o<this.dict.carRoot.children.length;o++)t(o)},e.prototype.check=function(t){return this.checkCarFull()&&!this.checkHasPersonMove()&&!this.checkHasCarMove()&&t==this.allPersonAmount},e.prototype.func_checkCanUseSort=function(){return!(this.checkHasPersonMove()||this.checkHasCarMove()||this.moveCarAmount>=this.parkingNodes.length)},e.prototype.timer=function(t){var e=this;return new Promise(function(o){e.scheduleOnce(function(){o(1)},t)})},e.prototype.checkCarFull=function(){for(var t=!0,e=0;e<this.parkingNodes.length;e++)this.parkingNodes[e].car||(t=!1);return t},e.prototype.checkHasPersonMove=function(){for(var t=!1,e=0;e<this.sortPersonNodes.length;e++)if(this.sortPersonNodes[e].getComponent(L.default).isMoving){t=!0;break}return t},e.prototype.checkHasCarMove=function(){for(var t=!1,e=this.carRoot.children.concat(this.turntableCarArr),o=0;o<e.length;o++){var i=e[o];if(i.getComponent(P.default).carState!=k.CarState.Idle&&i.getComponent(P.default).carState!=k.CarState.Normal&&i.getComponent(P.default).carState!=k.CarState.Parking){t=!0;break}}return t},e.prototype.checkHasCarMoveAmount=function(){for(var t=0,e=this.carRoot.children.concat(this.turntableCarArr),o=0;o<e.length;o++){var i=e[o];i&&cc.isValid(i,!0)&&i.active&&i.getComponent(P.default).carState!=k.CarState.Idle&&i.getComponent(P.default).carState!=k.CarState.OutParking&&(t+=1)}return t},e.prototype.face=function(){var t=this;if(this.dict.faceSpine){var e=this.randomNum(5,10);this.scheduleOnce(function(){if(t.sortPersonNodes.length){var e=t.randomNum(3,4),o=t.randomNum(0,t.sortPersonNodes.length-1);if(t.sortPersonNodes[o]){var i=cc.v2(t.sortPersonNodes[o].x,t.sortPersonNodes[o].y+67+20),n=t.sortPersonNodes[o].parent.convertToWorldSpaceAR(i),r=t.dict.faceSpine.parent.convertToNodeSpaceAR(n),a=cc.instantiate(t.poolMgr.get(t.dict.faceSpine,"faceSpine"));t.dict.faceSpine.parent.addChild(a),a.position=r,a.getComponent(sp.Skeleton).setAnimation(0,"animation"+e,!0),cc.tween(t.dict.faceSpine.parent).delay(3).call(function(){t.poolMgr.put(a,"faceSpine"),t.face()}).start()}}},e)}},e.prototype.face2=function(){var t=this;if(this.dict.faceSpine){for(var e=[],o=0;o<this.dict.parkingRoot.children.length;o++){var i=this.dict.parkingRoot.children[o].car;if(i)for(var n=0;n<i.getChildByName("seatRoot").children.length;n++){var r=i.getChildByName("seatRoot").children[n];r.active&&e.push(r)}}if(e.length){var a=this.randomNum(5,10);this.scheduleOnce(function(){var o=t.randomNum(0,e.length-1);if(e[o]){if(e[o])try{var i=cc.v2(e[o].x,e[o].y+67),n=e[o].parent.convertToWorldSpaceAR(i),r=t.dict.faceSpine.parent.convertToNodeSpaceAR(n),a=cc.instantiate(t.poolMgr.get(t.dict.faceSpine,"faceSpine"));t.dict.faceSpine.parent.addChild(a),a.position=r,a.getComponent(sp.Skeleton).setAnimation(0,"animation",!0),cc.tween(t.dict.faceSpine.parent).delay(3).call(function(){t.poolMgr.put(a,"faceSpine"),t.face2()}).start()}catch(s){}}else t.scheduleOnce(function(){t.face2()},3)},a)}else this.scheduleOnce(function(){t.face2()},3)}},e.prototype.createCarByCarPark=function(t,e,o,i){var n="0"+i+t+"-"+o;console.log("name",n);var r=this.dict.carPrefab.getChildByName(n),a=cc.instantiate(r);if(a.active=!1,a.parent=this.carRoot,a.position=cc.v2(0,0),a.getComponent(P.default).mgr=this,a.getComponent(P.default).path=e,this.isDebug){var s=new cc.Node;s.name="path",s.addComponent(cc.Label).string=""+e,s.color=cc.Color.WHITE,a.addChild(s),s.position=cc.v2(-13.105,-26.21)}return a},e.prototype.onTouch=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this);for(var t=0;t<this.dict.parkingRoot.children.length;t++){var e=this.dict.parkingRoot.children[t];e.getChildByName("videoLock")&&e.on(cc.Node.EventType.TOUCH_START,this.touchStart_parking,this)}},e.prototype.touchStart_parking=function(t){var e=this;if(!this.isRemove&&!this.removePropUsing){var o=t.target;if(this.unlockParkingTarget=o,o.getChildByName("videoLock")){var n=g.default.get(f.default.UnlockParking)||0;if(n)return g.default.set(f.default.UnlockParking,n-1),o.getChildByName("videoLock").destroy(),o.getChildByName("empty").active=!0,o.isEmpty=!0,this.parkingNodes.push(o),cc.game.emit("gamelog_Thinking",p.ShuShuConst.Booster_use,{lv:h.User.getTempData(i.TempData.CURRENT_LEVEL_ID),queue:h.User.getTempData(i.TempData.CURRENT_LEVEL),mode:h.User.getTempData(i.TempData.CURRENT_MODE),id:4,or:1,sort:g.default.get(f.default.ConfigSuffix)}),void this.playUnlockSpine(o);g.default.get(f.default.cardAmount)?(v.default.set(m.default.propIndex,4),C.default.show(_.PopupConst.Prop)):c.Platform.showRewardAds(function(t){0==t&&(o.getChildByName("videoLock").destroy(),o.getChildByName("empty").active=!0,o.isEmpty=!0,e.parkingNodes.push(o),cc.game.emit("gamelog_Thinking",p.ShuShuConst.reward_btn,{lv:h.User.getTempData(i.TempData.CURRENT_LEVEL_ID),mode:h.User.getTempData(i.TempData.CURRENT_MODE),queue:h.User.getTempData(i.TempData.CURRENT_LEVEL),id:4,sort:g.default.get(f.default.ConfigSuffix)}),e.playUnlockSpine(o))})}}},e.prototype.playUnlockSpine=function(t){var e=cc.instantiate(this.dict.jiesuo);this.node.addChild(e);var o=t.convertToWorldSpaceAR(cc.v2(0,-t.height/2)),i=this.node.convertToNodeSpaceAR(o);e.position=i,e.getComponent(sp.Skeleton).premultipliedAlpha=!1,e.getComponent(sp.Skeleton).setAnimation(0,"animation",!1)},e.prototype.func_unlockParking=function(){this.playUnlockSpine(this.unlockParkingTarget),this.unlockParkingTarget.getChildByName("videoLock").destroy(),this.unlockParkingTarget.getChildByName("empty").active=!0,this.unlockParkingTarget.isEmpty=!0,this.parkingNodes.push(this.unlockParkingTarget)},e.prototype.checkHasCollision=function(t){var e,o,i,n,r,a,s=t.width,c=t.height;e=t.convertToWorldSpaceAR(cc.v2(-s/2,-c)),o=t.convertToWorldSpaceAR(cc.v2(-s/2,2250)),i=t.convertToWorldSpaceAR(cc.v2(s/2,-c)),n=t.convertToWorldSpaceAR(cc.v2(s/2,2250)),r=t.convertToWorldSpaceAR(cc.v2(0,-c)),a=t.convertToWorldSpaceAR(cc.v2(0,2250));for(var l=this.carRoot.children.concat(this.turntableCarArr),h=0;h<l.length;h++){var d=l[h];if(d&&d!=t&&d.getComponent(P.default).carState==k.CarState.Idle&&d.active&&!d.getComponent(P.default).isTransportCar&&!d.getComponent(P.default).isUTransportCar){var u,p,f,g,m,v,y=d.width,_=d.height;if(u=d.convertToWorldSpaceAR(cc.v2(-y/2,-_)),p=d.convertToWorldSpaceAR(cc.v2(-y/2,0)),f=d.convertToWorldSpaceAR(cc.v2(y/2,-_)),g=d.convertToWorldSpaceAR(cc.v2(y/2,0)),m=d.convertToWorldSpaceAR(cc.v2(y/2+1,0)),v=d.convertToWorldSpaceAR(cc.v2(-y/2-1,0)),cc.Intersection.lineLine(e,o,u,p)||cc.Intersection.lineLine(e,o,f,g)||cc.Intersection.lineLine(i,n,u,p)||cc.Intersection.lineLine(i,n,f,g)||cc.Intersection.lineLine(e,o,m,v)||cc.Intersection.lineLine(r,a,m,v))return!0}}return!1},e.prototype.touchStart=function(t){if(this.isCanStartClick){t.target;var e=t.getLocation();if(this.carparkIng)return console.log("\u9650\u5236\u8f66\u5e93\u8f66\u70b9\u51fb");if(this.isRotateCreate)return console.log("\u6b63\u5728\u65cb\u8f6c\u751f\u6210");for(var o=this.carRoot.children.concat(this.turntableCarArr),i=0;i<o.length;i++){var n=o[i],a=n.getChildByName("car").getComponent(cc.PolygonCollider);if(cc.Intersection.pointInPolygon(e,this.getWPosByPolygon(a))){if(this.dict.carRoot.getComponent(R.default)&&null!=n.carSquareCol&&this.dict.carRoot.getComponent(R.default).isAnim)return;if(console.log("\u65b0\u589e\u9650\u5236\u5feb\u901f\u70b9\u51fb",this.moveCarAmount,this.parkingNodes.length),this.moveCarAmount>=this.parkingNodes.length)return console.log("\u9650\u5236\u5feb\u901f\u70b9\u51fb"),this.show(s.default.formatStr("\u6682\u65f6\u6ca1\u6709\u8f66\u4f4d\u7a7a\u51fa"));var c=n.getComponent(P.default).nextCar,h=n.getComponent(P.default).prevCar;if((c||h)&&this.moveCarAmount>=this.parkingNodes.length-1)return console.log("\u9650\u5236\u5feb\u901f\u70b9\u51fb2"),this.show(s.default.formatStr("\u9700\u8981\u4e24\u4e2a\u505c\u8f66\u4f4d"),.8,1);if(255!=n.opacity)return;if(n.getChildByName("lock"))return l.Tip.show(s.default.formatStr("\u9700\u8981\u94a5\u5319\u89e3\u9501")),void n.runAction(n.getComponent(P.default).shackAction(.1,2));if(n.isScaleAnim)return;if(this.isSortAnim)return;if(n.isCarPark&&!n.isWen)return console.log("\u9650\u5236\u8f66\u5e93\u8f66,\u6ca1\u505c\u7a33");if(this.isRemove&&n.getComponent(P.default).carState==k.CarState.Idle&&!this.removePropUsing&&!n.obliqueHead&&!n.getComponent(P.default).isFireEngine)return void this.removeCar(n);if(this.removePropUsing)return;if(!n.getComponent(P.default).isCanClick)return;if(n.getComponent(P.default).carState!=k.CarState.Idle)return;if(n.getComponent(P.default).isTransportCar&&(n.x>267||n.x<-267))return;if(n.obliqueHead)return void n.runAction(this.shackAction(.1,2));if(this.dict.hand&&this.dict.hand.active&&(this.guidedNodes.push(n),this.currentGuideNode==n)){for(var d=!1,u=0;u<this.guideNodes.length;u++){var p=this.guideNodes[u];if(-1==this.guidedNodes.indexOf(p)){this.currentGuideNode=p,this.handPos(),d=!0;break}}d||(this.dict.hand.active=!1,this.dict.handText.active=!1,this.dict.handText.parent.active=!1)}var f=!1;for(u=0;u<this.parkingNodes.length;u++)if(this.parkingNodes[u].isEmpty){f=!0;break}if(!f)return console.log("\u6240\u6709\u8f66\u4f4d\u90fd\u88ab\u5360\u7528\u4e86"),this.show(s.default.formatStr("\u76ee\u524d\u8f66\u4f4d\u5df2\u6ee1"),.8,1);if(c||h){var g=0;for(u=0;u<this.parkingNodes.length;u++)this.parkingNodes[u].isEmpty&&(g+=1);if(g<=1)return console.log("\u62c9\u94fe\u8f66-\u6240\u6709\u8f66\u4f4d\u90fd\u88ab\u5360\u7528\u4e86"),this.show(s.default.formatStr("\u9700\u8981\u4e24\u4e2a\u505c\u8f66\u4f4d"),.8,1)}if(this.checkHasCarMoveAmount()>=this.parkingNodes.length)return console.log("\u6709\u76f8\u7b49\u4e8e\u8f66\u4f4d\u603b\u91cf\u7684\u8f66\u5728\u8fd0\u52a8\uff0c\u65e0\u6cd5\u51fa\u8f66"),this.show(s.default.formatStr("\u6682\u65f6\u6ca1\u6709\u8f66\u4f4d\u7a7a\u51fa"));if(console.log("\u6709"+this.checkHasCarMoveAmount()+"\u8f86\u8f66\u5728\u52a8\uff01",this.parkingNodes.length),(c||h)&&this.parkingNodes.length-this.checkHasCarMoveAmount()<=1)return console.log("\u62c9\u94fe\u8f66\u4e0d\u80fd\u51fa\u8f66"),this.show(s.default.formatStr("\u6682\u65f6\u6ca1\u6709\u8f66\u4f4d\u7a7a\u51fa"));n.stopAllActions(),this.isWaterMode&&(n.position=n.getComponent(P.default).oldPos),n.getComponent(P.default).isTransportCar&&(this.isTransportCarMove=!1,this.timerTransportMove(2),this.checkHasCollision(n)||this.addTailGasSpine(n)),n.getComponent(P.default).isUTransportCar&&this.dict.carRoot.getComponent(N.default).stop(n);var m=n.convertToWorldSpaceAR(cc.v2(0,2250)),v=n.parent.convertToNodeSpaceAR(m);if(n.getComponent(P.default).otherCarNode=this.getOtherCarByDistance(n),n.getComponent(P.default).oldPos=n.position,c&&(c.getComponent(P.default).otherCarNode=this.getOtherCarByDistance(c,!0),c.getComponent(P.default).oldPos=c.position),h&&(h.getComponent(P.default).otherCarNode=this.getOtherCarByDistance(h,!0),h.getComponent(P.default).oldPos=h.position),n.getComponent(P.default).carState==k.CarState.Idle){n.getComponent(P.default).carState=k.CarState.Normal,n.getComponent(P.default).isFireEngine||(this.moveCarAmount+=1),cc.tween(n).to(2250/n.getComponent(P.default).speed,{position:v}).start();var y=n.getComponent(P.default).nextCar;y&&((n.getChildByName("chain")&&1==n.getChildByName("chain").getComponent(M.default).linkType||y.getChildByName("chain")&&1==y.getChildByName("chain").getComponent(M.default).linkType)&&(y.getComponent(P.default).carState=k.CarState.Normal,console.log("\u5e73\u884c\u52a0\u5165\u68c0\u6d4b")),this.moveCarAmount+=1,cc.tween(y).to(2250/n.getComponent(P.default).speed,{position:v}).start()),h&&(h.getChildByName("chain")&&1==h.getChildByName("chain").getComponent(M.default).linkType||n.getChildByName("chain")&&1==n.getChildByName("chain").getComponent(M.default).linkType)&&(h.getComponent(P.default).carState=k.CarState.Normal,this.moveCarAmount+=1,cc.tween(h).to(2250/h.getComponent(P.default).speed,{position:v}).start())}n.getComponent(P.default).isTransportCar||n.getComponent(P.default).isUTransportCar||1!=n.getComponent(P.default).path||(this.addTailGasSpine(n),r.Audio.getEffectMute()||this.playLevelSound("Engine2"));break}}this.touchStart_bulldozerRoot(e)}},e.prototype.touchStart_bulldozerRoot=function(t){if(this.dict.bulldozerRoot)for(var e=0;e<this.dict.bulldozerRoot.children.length;e++){var o=this.dict.bulldozerRoot.children[e];if("bulldozer"==o.name){var i=o.getChildByName("bulldozerChild").getComponent(cc.PolygonCollider);if(cc.Intersection.pointInPolygon(t,this.getWPosByPolygon(i))&&o.getComponent(A.default).state==k.BulldozerState.Idle){console.log("\u70b9\u51fb\u5230\u63a8\u571f\u673a"),o.getComponent(A.default).state=k.BulldozerState.Normal,o.getComponent(A.default).oldPos=o.position;var n=o.convertToWorldSpaceAR(cc.v2(0,2250)),r=o.parent.convertToNodeSpaceAR(n);cc.tween(o).to(2250/o.getComponent(A.default).bulldozerSpeed,{position:r}).start()}}}},e.prototype.getAngle=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI+90},e.prototype.addStarSpine=function(t){var e=this,o=cc.instantiate(this.poolMgr.get(this.dict.mixSpine,"mixSpine"));this.node.addChild(o);var i=t.convertToWorldSpaceAR(cc.v2(0,-t.height/2)),n=o.parent.convertToNodeSpaceAR(i);o.position=n,this.scheduleOnce(function(){e.poolMgr.put(o,"mixSpine")},2)},e.prototype.addTailGasSpine=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(){return e=cc.instantiate(this.dict.tailGas),t.addChild(e),e.position=cc.v2(0,-t.height),e.getComponent(E.default)&&(e.getComponent(E.default).active=!0),[2]})})},e.prototype.getNodeWorldEulerAngles=function(t){for(var e=0,o=t;o;)e+=o.angle,o=o.parent;return console.log("worldEulerAngles",e),console.log("worldEulerAngles2",e%360),e%360},e.prototype.fun=function(t,e,o){if(t&&e)for(var i=0;i<o.length;i++){var n=o[i];console.log("item2.position",e.position),cc.tween(n).stop().to(.05*i+.02,{position:e.position}).start()}else this.unschedule(this.fun)},e.prototype.getWPosByPolygon=function(t){for(var e=t.points,o=[],i=0;i<e.length;i++){var n=cc.v2(e[i].x+t.offset.x,e[i].y+t.offset.y),r=t.node.convertToWorldSpaceAR(n);o.push(r)}return o},e.prototype.getRandomDistinctElements=function(t,e){for(var o=[],i=0;i<e;i++){var n=Math.floor(Math.random()*(t.length-i));o.includes(t[n])||(o.push(t[n]),t[n]=t[t.length-i-1])}return o},e.prototype.setCarColorImg=function(t,e){var o,i=t.getComponent(P.default);i.carColor=e,this.colorPersonArr[e]||(this.colorPersonArr[e]=0),this.colorPersonArr[e]+=i.seatTotalAmount,i.colorImgName=e+1,t.getComponent(P.default).isTramcar&&(i.colorImgName=e+1+12),i.dirImgName=k.CarDirImg[Math.round(Math.abs(t.angle))],i.lenImgName=k.CarLenImg[i.seatTotalAmount];var n=""+i.colorImgName+i.dirImgName+i.lenImgName;if(o="texture/"+this.folder+"/"+this.folder+"_"+n,t.getComponent(P.default).isBlackCar){o="texture/"+this.folder+"/"+this.folder+"_9"+i.dirImgName+i.lenImgName,t.getChildByName("dir").active=!1;var r="texture/"+this.folder+"/"+this.folder+"_15";console.log("newDirUrl1111",t.angle),128==Math.round(Math.abs(t.angle))?r="texture/"+this.folder+"/"+this.folder+"_17":90==Math.round(Math.abs(t.angle))?r="texture/"+this.folder+"/"+this.folder+"_34":0==Math.round(Math.abs(t.angle))&&(r="texture/"+this.folder+"/"+this.folder+"_35"),console.log("newDirUrl",r),cc.resources.load(r,function(e,o){e||(t.getChildByName("dir").active=!0,o&&(t.getChildByName("dir").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o)))})}t.getComponent(P.default).isFireEngine||t.getComponent(P.default).isPoliceCar||t.getComponent(P.default).isRichCar?t.getChildByName("car").getComponent(cc.Sprite).enabled=!0:cc.resources.load(o,function(e,o){e||(t.getChildByName("car").getComponent(cc.Sprite).enabled=!0,o&&(t.getChildByName("car").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o)))}),this.levelDataJSON.carWeight[i.path]||(this.levelDataJSON.carWeight[i.path]=0)},e.prototype.setCarColorImg_2=function(t,e){var o,i=t.getComponent(P.default);i.carColor=e,i.colorImgName=e+1;var n=""+i.colorImgName+i.dirImgName+i.lenImgName;o="texture/"+this.folder+"/"+this.folder+"_"+n,cc.resources.load(o,function(e,o){t.getChildByName("car").getComponent(cc.Sprite).enabled=!0,o&&(t.getChildByName("car").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o))})},e.prototype.updateCarWeight=function(){var t=this;this.carWeight=new Array(this.colorTypeAmount).fill(0);for(var e=this.carRoot.children.concat(this.turntableCarArr),o=function(o){var n=e[o];if(n&&n.getComponent(P.default)&&n.getComponent(P.default).carState==k.CarState.Idle&&!n.getComponent(P.default).isTransportCar&&!n.getComponent(P.default).isUTransportCar){n.path=null;var r=i.getPath(n);n.getComponent(P.default).path=r,1==r&&n.getComponent(P.default).isBlackCar&&!n.isNoBlack&&(n.isScaleAnim=!0,cc.tween(n).to(.2,{scale:1.2}).to(.2,{scale:1}).call(function(){n.isScaleAnim=!1,n.getChildByName("dir").active=!1;var e="texture/"+t.folder+"/"+t.folder+"_3";128==Math.round(Math.abs(n.angle))?e="texture/"+t.folder+"/"+t.folder+"_4":90==Math.round(Math.abs(n.angle))?e="texture/"+t.folder+"/"+t.folder+"_2":0==Math.round(Math.abs(n.angle))&&(e="texture/"+t.folder+"/"+t.folder+"_1"),cc.resources.load(e,function(t,e){t||(n.getChildByName("dir").active=!0,e&&(n.getChildByName("dir").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e)))});var o=n.getComponent(P.default),i=""+o.colorImgName+o.dirImgName+o.lenImgName,r="texture/"+t.folder+"/"+t.folder+"_"+i;n.getChildByName("car").active=!1,n.isNoBlack=!0,cc.resources.load(r,function(t,e){t||(n.getChildByName("car").active=!0,e&&(n.getChildByName("car").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e)))})}).start()),i.isDebug&&n.getChildByName("path")&&(n.getChildByName("path").getComponent(cc.Label).string=""+r);var a=i.levelDataJSON.carWeight[r-1];null==a&&(a=0),n.getComponent(P.default).carColor==k.CarColor.Gold?i.carWeight[n.getComponent(P.default).carColor]+=a*n.getComponent(P.default).emptySeatAmount*2:i.carWeight[n.getComponent(P.default).carColor]+=a*n.getComponent(P.default).emptySeatAmount}},i=this,n=0;n<e.length;n++)o(n)},e.prototype.createPerson=function(t,e){void 0===t&&(t=!1);for(var o=0,i=0;i<this.currentPersonColorAmount.length;i++)o+=l=this.currentPersonColorAmount[i];if(!(o>=this.allPersonAmount2)){for(var n=0;this.sortPersonNodes.length<this.uiShowPersonAmount;){var r=this.getPersonColor(),a=(i=this.colorPersonIndexArr[r],this.colorPersonAmountArr[r][i]);if(this.isReviveAmount&&(a=1),this.colorPersonAmountArrIndex[r][i]==this.lastExtraIndexArr[r]?this.extraWeight[r]=this.extraWeightConst:this.extraWeight[r]=0,this.lastExtraIndexArr[r]=this.colorPersonAmountArrIndex[r][i],!a){for(var s=[],c=0;c<this.colorPersonIndexArr.length;c++){var l=this.colorPersonIndexArr[c];this.colorPersonAmountArr[c][l]&&s.push(c)}if(!s.length)return void(e&&e());r=s[this.randomNum(0,s.length-1)],i=this.colorPersonIndexArr[r],a=this.colorPersonAmountArr[r][i]}this.currentPersonColorAmount[r]+=a,this.isReviveAmount||(this.colorPersonIndexArr[r]+=1),t&&(this.goldIndex=0,this.policeIndex=0);for(var h=0;h<a;h++)if(t){var d=void 0;(d=r>=k.CarColor.Police?cc.instantiate(this.dict.careerPrefab):cc.instantiate(this.dict.personPrefab)).oldPosIndex=-1,this.dict.personRoot.addChild(d),d.getComponent(L.default).personColor=r,r+1==10?(this.setColorPersonImg(r,d,2,this.policeSkinName),"a"==this.policeSkinName?this.policeSkinName="b":this.policeSkinName="a"):r+1==11?(this.setColorPersonImg(r,d,2,this.goldSkinName),this.goldSkinName="a"==this.goldSkinName?"b":"a"):this.setColorPersonImg(r,d),d.children[0].getComponent(sp.Skeleton).setAnimation(0,"daiji_zheng",!0);var u=this.dict.personPosRoot.childrenCount-1-n;u<0?d.position=this.dict.doorOutside.position:(d.position=this.dict.personPosRoot.children[u].position,d.zIndex=this.dict.personPosRoot.childrenCount-this.sortPersonNodes.length,d.oldPosIndex=u,u>=5&&(this.setColorPersonImg(d.getComponent(L.default).personColor,d,1),d.children[0].getComponent(sp.Skeleton).setAnimation(0,"daiji_ce",!0))),this.sortPersonNodes.push(d),n+=1}else d=void 0,(d=r>=k.CarColor.Police?cc.instantiate(this.dict.careerPrefab):cc.instantiate(this.dict.personPrefab)).oldPosIndex=-1,this.dict.personRoot.addChild(d),d.position=this.dict.doorOutside.position,d.getComponent(L.default).personColor=r,r+1==10?(this.setColorPersonImg(r,d,2,this.policeSkinName),this.policeSkinName="a"==this.policeSkinName?"b":"a"):r+1==11?(this.setColorPersonImg(r,d,2,this.goldSkinName),this.goldSkinName="a"==this.goldSkinName?"b":"a"):this.setColorPersonImg(r,d),this.sortPersonNodes.push(d),n+=1}e&&e()}},e.prototype.personMove=function(){var t=this,e=this.sortPersonNodes.length;e>=this.uiShowPersonAmount&&(e=this.uiShowPersonAmount);for(var o=function(e){var o=i.sortPersonNodes[e];i.scheduleOnce(function(){o.oldPosIndex=0,o.position=t.dict.personPosRoot.children[0].position,o.children[0].getComponent(sp.Skeleton).setAnimation(0,"daiji_zheng",!0),e!=t.uiShowPersonAmount-1&&(o.zIndex=t.dict.personPosRoot.childrenCount-e,o.children[0].getComponent(sp.Skeleton).setAnimation(0,"pao_zheng",!0),t.move(0,o,t.dict.personPosRoot.childrenCount-1-e,null,!0))},.1*e)},i=this,n=0;n<e;n++)o(n)},e.prototype.updateParkingWeight=function(){this.parkingWeight=new Array(this.colorTypeAmount).fill(0);for(var t=0;t<this.dict.parkingRoot.children.length;t++){var e=this.dict.parkingRoot.children[t];try{if(e.active&&e.car){var o=e.car,i=o.getComponent(P.default).carColor;if(o&&o.getComponent(P.default))for(var n=0;n<o.getChildByName("seatRoot").children.length;n++){var r=o.getChildByName("seatRoot").children[n];r.active||r.targetPerson||(this.parkingWeight[i]+=this.levelDataJSON.parkingWeight)}}}catch(a){}}},e.prototype.checkPerson=function(t){var e=this;if(void 0===t&&(t=!1),t&&this.checkTipText(),!this.isCheck)for(var o=this.sortPersonNodes[0].getComponent(L.default).personColor,i=null,n=function(t){var n=a.dict.parkingRoot.children[t];if(n.active&&n.car){var s=n.car;if(s.getComponent(P.default).carColor==o)for(var l=function(t){var n=s.getChildByName("seatRoot").children[t];if(!n.active&&!n.targetPerson&&(n.targetPerson=!0,i=n)){a.isCheck=!0;var l=a.sortPersonNodes.shift();l.targetSeat=i,a.setColorPersonImg(o,l),a.createPerson();var h=a.sortPersonNodes.length;h>=a.uiShowPersonAmount&&(h=a.uiShowPersonAmount);for(var d=function(t){var o=a.sortPersonNodes[t];o.zIndex=h-t,o.getComponent(L.default).isMoving=!0,a.move(o.oldPosIndex,o,o.oldPosIndex+1,function(){o.getComponent(L.default).isMoving=!1,t==h-1&&e.scheduleOnce(function(){e.isCheck=!1,e.checkPerson()},.05)})},u=0;u<h;u++)d(u);return a.allPersonAmount-=1,a.dict.personAmount.getComponent(cc.Label).string=""+a.allPersonAmount,cc.game.emit("allPersonAmount",a.allPersonAmount,a.allPersonAmount2),cc.tween(l).to(30/a.personSpeed,{position:cc.v2(-140.859,412)}).call(function(){var t=i.parent.convertToWorldSpaceAR(i.position),n=l.parent.convertToNodeSpaceAR(t),a=Math.abs(n.x-l.x),h=Math.abs(n.y-l.y);e.setColorPersonImg_seat(o,i,3),n.x<l.x?l.children[0].getComponent(sp.Skeleton).setAnimation(0,"pao_ce",!0):(l.scaleX=-l.scaleX,l.children[0].getComponent(sp.Skeleton).setAnimation(0,"pao_ce",!0)),cc.tween(l).to(a/(.6*e.personSpeed),{x:n.x}).call(function(){l.children[0].getComponent(sp.Skeleton).setAnimation(0,"pao_zheng",!0)}).to(h/(.6*e.personSpeed),{y:n.y}).call(function(){if(r.Audio.getEffectMute()||e.playLevelSound("Get_on"),i.active=!0,s.getComponent(P.default).emptySeatAmount-=1,e.carAnim(i),l.destroy(),e.checkCarGo(),c.Platform.getConfig().hasCoin){var t=i.parent.children.indexOf(i);i.parent.parent.getChildByName("coinRoot").children[t].getComponent(sp.Skeleton).setAnimation(0,"animation2",!1)}}).start()}).start(),{value:void 0}}},h=0;h<s.getChildByName("seatRoot").children.length;h++){var d=l(h);if("object"==typeof d)return d}}},a=this,s=0;s<this.dict.parkingRoot.children.length;s++){var l=n(s);if("object"==typeof l)return l.value}},e.prototype.carAnim=function(t){t.isCarAnim||(t.isCarAnim=!0,cc.tween(t.parent.parent).to(.1,{scale:.9}).to(.1,{scale:1}).call(function(){t.isCarAnim=!1}).start())},e.prototype.checkTipText=function(){for(var t=0,e=0;e<this.parkingNodes.length;e++)this.parkingNodes[e].isEmpty||(t+=1);t==this.parkingNodes.length?cc.game.emit("checkTipText",1):t==this.parkingNodes.length-1&&cc.game.emit("checkTipText",0)},e.prototype.checkCarGo=function(){for(var t=this,e=function(e){var i=o.dict.parkingRoot.children[e];if(i.car){var n=i.car;if(!n.setInterval){for(var a=n.getChildByName("seatRoot"),s=0,l=0;l<a.children.length;l++)a.children[l].active&&(s+=1);if(s>=a.childrenCount){o.moveCarAmount-=1;var h=n.convertToWorldSpaceAR(cc.v2(0,-n.height/2)),d=n.parent.convertToNodeSpaceAR(h);n.setInterval=!0;var u=setInterval(function(){if(!t.checkCarBlock(d)){if(clearInterval(u),i.car=null,r.Audio.getEffectMute()||t.playLevelSound("Full"),t.addStarSpine(i),n.GoingOutParking_nPos=d,n.getComponent(P.default).carState=k.CarState.GoingOutParking,0==e&&(i.active=!1),i.isEmpty=!0,c.Platform.getConfig().hasCoin){var o=a.parent.getChildByName("coinRoot");cc.game.emit("coinEffect",o)}cc.tween(n).to(n.height/2/n.getComponent(P.default).speed*1.3,{position:d}).call(function(){t.checkRes(),n.getComponent(P.default).carState=k.CarState.OutParking,n.getComponent(P.default).isRichCar?t.changeCar(n,1,1,"1111-1"):t.changeCar(n,1,1,"01"+n.getComponent(P.default).lenImgName+"-1")}).start()}},.5)}}}},o=this,i=0;i<this.dict.parkingRoot.children.length;i++)e(i)},e.prototype.checkCarBlock=function(t){for(var e=this.carRoot.children.concat(this.turntableCarArr),o=0;o<e.length;o++){var i=e[o];if(i.getComponent(P.default).carState==k.CarState.OutParking&&i.position.sub(t).mag()<400)return!0;if(i.getComponent(P.default).carState==k.CarState.GoingOutParking){var n=i.GoingOutParking_nPos;if(n&&n.sub(t).mag()<400)return!0}}return!1},e.prototype.checkRes=function(){if(!this.isWin&&0==this.allPersonAmount){if(c.Platform.getConfig().hasCoin){var t=g.default.get(f.default.coin)||0;t+=this.allPersonAmount2,g.default.set(f.default.coin,t),console.log("\u6dfb\u52a0\u672c\u5730\u91d1\u5e01",t,this.allPersonAmount2)}this.isWin=!0,this.playRight()}},e.prototype.func_addResource=function(){var t=g.default.get(f.default.BuildResource)||0;t+=this.carAllAmount,g.default.set(f.default.BuildResource,t)},e.prototype.move=function(t,e,o,i,n){var r=this;void 0===t&&(t=0);var a=e.position.sub(this.dict.personPosRoot.children[t+1].position).mag(),s=a/this.personSpeed;n&&(s=a/(.3*this.personSpeed)),cc.tween(e).to(s,{position:this.dict.personPosRoot.children[t+1].position}).call(function(){e.oldPosIndex=t+1,t+1==5&&r.setColorPersonImg(e.getComponent(L.default).personColor,e,1),t+1==o?(o>=5?e.children[0].getComponent(sp.Skeleton).setAnimation(0,"daiji_ce",!0):e.children[0].getComponent(sp.Skeleton).setAnimation(0,"daiji_zheng",!0),i&&i()):r.move(t+1,e,o)}).start()},e.prototype.setColorPersonImg=function(t,e,o,i){void 0===o&&(o=2),void 0===i&&(i=""),this.folder,this.folder;var n="skin_"+(t+1);e.children[0].scale=1,t+1==10?(n="skin_"+(t+1)+i,""!=i&&(e.children[0].getComponent(sp.Skeleton).setSkin(""+n),e.children[0].getComponent(sp.Skeleton).defaultSkin=n)):t+1==11?(n="skin_"+(t+1)+i,""!=i&&(e.children[0].getComponent(sp.Skeleton).setSkin(""+n),e.children[0].getComponent(sp.Skeleton).defaultSkin=n)):(e.children[0].getComponent(sp.Skeleton).setSkin(""+n),e.children[0].getComponent(sp.Skeleton).defaultSkin=n),2==o?e.children[0].getComponent(sp.Skeleton).setAnimation(0,"pao_zheng",!0):e.children[0].getComponent(sp.Skeleton).setAnimation(0,"pao_ce",!0)},e.prototype.setColorPersonImg_sort=function(t,e,o){void 0===o&&(o=2);var i="skin_"+(t+1);e.name.includes("careerPrefab")?console.log("\u804c\u4e1a\u5c0f\u4eba \u4e0d\u53d8"):(t+1>=9&&(i="skin_8"),e.children[0].scale=1,e.children[0].getComponent(sp.Skeleton).setSkin(""+i),e.children[0].getComponent(sp.Skeleton).defaultSkin=i)},e.prototype.setColorPersonImg_seat=function(t,e,o){var i,n;void 0===o&&(o=2),n="r"+(t+1)+o,t==k.CarColor.Police?0==this.policeIndexSeat?(n="r"+(t+1)+o,this.policeIndexSeat=1):(n="r11"+o,this.policeIndexSeat=0):t==k.CarColor.Gold&&(0==this.goldIndexSeat?(n="r12"+o,this.goldIndexSeat=1):(n="r13"+o,this.goldIndexSeat=0)),i="texture/f27312/f27312_"+n,cc.resources.load(i,function(t,o){o&&(e.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o))})},e.prototype.shuffleArray=function(t){for(var e,o=t.length-1;o>0;o--){var i=Math.floor(Math.random()*(o+1));e=[t[i],t[o]],t[o]=e[0],t[i]=e[1]}return t},e.prototype.getAmountByColor=function(t){if(!this.colorPersonAmountArr[t]){this.colorPersonAmountArr[t]=[];for(var e=[],o=[],i=0;i<this.carNodeArr.length;i++){var n=this.carNodeArr[i].getComponent(P.default);if(n.carColor==t){for(var r=[],a=[],s=n.seatTotalAmount;s>0;){var c=this.randomNum(1,s);t!=k.CarColor.Police&&t!=k.CarColor.Gold||(c=2),r.push(c),a.push(e.length),s-=c}e.push(r),o.push(a)}}if(e.length){var l=this.flatten(e),h=this.flatten(o);this.colorPersonAmountArr[t]=l,this.colorPersonAmountArrIndex[t]=h}return e}},e.prototype.flatten=function(t){var e=this;return t.reduce(function(t,o){return Array.isArray(o)?t.concat(e.flatten(o)):t.concat(o)},[])},e.prototype.consoleWeight=function(t,e){for(var o=JSON.parse(JSON.stringify(e)),i=0;i<o.length;i++){var n=o[i];n=k.colorDes[i]+":"+n,o[i]=n}console.log(t,o)},e.prototype.getPersonColor=function(){if(this.reviveArr.length){var t=this.reviveArr.shift();return this.isReviveAmount=1,t}if(this.isReviveAmount=0,this.firstSortIndexArr.length)return this.firstSortIndexArr.shift();this.updateParkingWeight(),this.updateSortWeight();for(var e=0;e<this.colorTypeAmount;e++)this.allWeight[e]=0,this.allWeight[e]+=this.carWeight[e],this.allWeight[e]+=this.parkingWeight[e],this.allWeight[e]+=this.extraWeight[e],this.allWeight[e]-=this.sortWeight[e],this.allWeight[e]<0&&(this.allWeight[e]=0),0!=this.currentPersonColorAmount[e]&&this.currentPersonColorAmount[e]>=this.colorPersonArr[e]&&(console.log(k.colorDes[e]+"\u989c\u8272\u5df2\u7ecf\u6ee1\u5143"),this.allWeight[e]=0);return this.randomByWeight(new Array(k.colorDes.length).fill(1).map(function(t,e){return e}),this.allWeight)},e.prototype.updateSortWeight=function(){this.sortWeight=new Array(this.colorTypeAmount).fill(0);for(var t=0;t<this.sortPersonNodes.length;t++){var e=this.sortPersonNodes[t].getComponent(L.default).personColor;this.sortWeight[e]+=this.levelDataJSON.sortWeight}},e.prototype.getCarColor=function(t,e){for(var o=this.carNodeArr.length,i=Math.round((t+1)/o*100),n=0;n<e.length;n++){var r=e[n];if(i<=r[1]&&i>=r[0]){if(this.randomColorNum[n]==this.randomColorArr[n].length){var a=this.randomNum(0,this.randomColorArr[n].length-1);return this.randomColorArr[n][a]}var s=this.randomColorNum[n],c=this.randomColorArr[n][s];return this.randomColorNum[n]+=1,c}}},e.prototype.setCarID=function(){var t=this;if(this.dict.carParkRoot)for(var e=0;e<this.dict.carParkRoot.children.length;e++)for(var o=this.dict.carParkRoot.children[e].getComponent(T.default).carParkCars,i=0;i<o.length;i++)this.carNodeArr.push(o[i]);this.carNodeArr.sort(function(t,e){return t.getComponent(P.default).path-e.getComponent(P.default).path}),this.carNodeArr.forEach(function(e,o){if(e.getComponent(P.default).carID=o,t.isDebug){var i=cc.instantiate(e.getChildByName("path"));i.position=cc.v2(0,-20),i.parent=e,i.getComponent(cc.Label).string="ID"+o,i.getComponent(cc.Label).fontSize=20}}),this.carAllAmount=this.carNodeArr.length},e.prototype.getArrByLen=function(t,e){t=this.sortColor_new;for(var o=[],i=0;i<t.length;i++){var n=t[i];i>=e[0]&&i<=e[1]&&o.push(n)}return o},e.prototype.getOtherCarByDistance=function(t,e){void 0===e&&(e=!1);for(var o=[],i=this.carRoot.children.concat(this.turntableCarArr),n=0;n<i.length;n++){var r=i[n];r&&r!=t&&r.getComponent(P.default).carState==k.CarState.Idle&&r.active&&!r.getComponent(P.default).isTransportCar&&!r.getComponent(P.default).isUTransportCar&&(e&&t.getComponent(P.default).prevCar==r||o.push(r))}var a=t.convertToWorldSpaceAR(cc.v2(0,0));return o.sort(function(t,e){var o=t,i=e,n=[o.convertToWorldSpaceAR(cc.v2(0,0)),o.convertToWorldSpaceAR(cc.v2(0,-o.height))],r=[i.convertToWorldSpaceAR(cc.v2(0,0)),i.convertToWorldSpaceAR(cc.v2(0,-i.height))];return cc.Intersection.pointLineDistance(a,n[0],n[1],!0)-cc.Intersection.pointLineDistance(a,r[0],r[1],!0)}),o},e.prototype.getPath=function(t){var e,o,i,n,r,a,s=t;if(s.path)return s.path;if(s.getComponent(P.default).isTramcar)return s.path=30,s.path;if(s.getComponent(P.default).leftObliqueCar||s.getComponent(P.default).rightObliqueCar)return 1;if(s.getComponent(P.default).isUTransportCar_noIn)return 2;var c=s.width,l=s.height;e=s.convertToWorldSpaceAR(cc.v2(-c/2,-l)),o=s.convertToWorldSpaceAR(cc.v2(-c/2,2250)),i=s.convertToWorldSpaceAR(cc.v2(c/2,-l)),n=s.convertToWorldSpaceAR(cc.v2(c/2,2250)),r=s.convertToWorldSpaceAR(cc.v2(0,-l)),a=s.convertToWorldSpaceAR(cc.v2(0,2250));var h=this.getOtherCarByDistance(s),d=!1;s.collisionArr||(s.collisionArr=[]);for(var u=1,p=0;p<h.length;p++){var f=h[p];if(f!=s){var g,m,v,y,_,C,b=f.width,S=f.height;g=f.convertToWorldSpaceAR(cc.v2(-b/2,-S)),m=f.convertToWorldSpaceAR(cc.v2(-b/2,0)),v=f.convertToWorldSpaceAR(cc.v2(b/2,-S)),y=f.convertToWorldSpaceAR(cc.v2(b/2,0)),_=f.convertToWorldSpaceAR(cc.v2(b/2+1,0)),C=f.convertToWorldSpaceAR(cc.v2(-b/2-1,0)),(cc.Intersection.lineLine(e,o,g,m)||cc.Intersection.lineLine(e,o,v,y)||cc.Intersection.lineLine(i,n,g,m)||cc.Intersection.lineLine(i,n,v,y)||cc.Intersection.lineLine(e,o,_,C)||cc.Intersection.lineLine(i,n,_,C)||cc.Intersection.lineLine(r,a,_,C))&&(d=!0,f.path?u+=f.path:u+=this.getPath(f))}}return d?(s.path=u,u):(s.path=1,1)},e.prototype.hasCommonElement=function(t,e){return t.some(function(t){return e.includes(t)})},e.prototype.areAllNumbersSmallerThan=function(t,e){return t.every(function(t){return t<e})},e.prototype.checkWeightLimit=function(t,e){void 0===e&&(e=0),this.weightLimitIndex=e;for(var o=0,i=0;i<t.length;i++)t[i]<this.levelDataJSON.weightLimit[e]&&(o+=1);return o>=t.length?this.levelDataJSON.weightLimit[e+1]?this.checkWeightLimit(t,e+1):-1:this.weightLimitIndex},e.prototype.fetchMaxIndex=function(t,e){return t.map(function(t,e){return{key:e,value:t}}).sort(function(t,e){return e.value-t.value}).filter(function(t,o){return o<e}).map(function(t){return t.key})},e.prototype.randomByWeight=function(t,e){if(t.length!=e.length)return console.warn("random2\u8f93\u5165\u4e0d\u5408\u6cd5: resultArr.length != weightArr.length"),null;for(var o=this.fetchMaxIndex(e,this.levelDataJSON.limitRank||k.colorDes.length),i=0;i<e.length;i++)e[i],o.includes(i)||(e[i]=0);if(this.arraysEqual(e,new Array(k.colorDes.length).fill(0))){console.log("TODO");var n=[];for(i=0;i<k.colorDes.length;i++)this.colorPersonAmountArr[i].length&&this.currentPersonColorAmount[i]<this.colorPersonArr[i]&&n.push(i);if(console.log("TODO",n),n.length)return n[this.randomNum(0,n.length-1)]}for(var r=0,a=0,s=Math.random(),c=e.length-1;c>=0;c--)r+=e[c];for(s*=r,c=e.length-1;c>=0;c--)if(s<=(a+=e[c]))return t[c];return null},e.prototype.arraysEqual=function(t,e){if(t.length!==e.length)return!1;for(var o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0},e.prototype.randomNum=function(t,e,o){var i=e-t,n=o||Math.random();return t+Math.round(n*i)},e.prototype.getLocal=function(t){if(this.localData[t])return this.localData[t];var e=cc.sys.localStorage.getItem(""+this.levelID+t);return e?JSON.parse(e):null},e.prototype.setLocal=function(t,e){this.localData[t]=e,cc.sys.localStorage.setItem(""+this.levelID+t,JSON.stringify(e))},e.prototype.show=function(t,e,o){void 0===e&&(e=.8),void 0===o&&(o=0);var i=cc.instantiate(this.dict.tipPrefab);this.dict.game.addChild(i),i.active=!0,i.stopAllActions(),i.children[1].getComponent(cc.Label).string=s.default.formatStr(t),i.setPosition(cc.v2(0,-60)),i.opacity=0,cc.tween(i).by(.3,{position:cc.v2(0,60),opacity:255}).delay(e).by(.3,{position:cc.v2(0,60),opacity:-255}).call(function(){i.destroy()}).start()},e.prototype.func_sort2=function(){this.func_sort()},e.prototype.func_sort=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,i=this;return __generator(this,function(n){switch(n.label){case 0:return this.isSorting?[2]:(this.isSorting=!0,this.isSortAnim=!0,t=1.5,[4,y.default.getRes("gameBundle","prefab/item/StarPrefab",cc.Prefab)]);case 1:return e=n.sent(),o=cc.instantiate(e),this.dict.tailGas.parent.addChild(o),this.schedule(function(){for(var t=0;t<i.sortPersonNodes.length;t++){var e=i.sortPersonNodes[t],o=i.randomNum(0,k.colorDes.length-1);i.setColorPersonImg_sort(o,e)}},.2,(t-1)/.2-.3),cc.tween(this.node).delay(t).call(function(){i.isSortAnim=!1,o.destroy(),i.isFail=!1,i.consoleWeight("\u603b\u6743\u91cd",i.allWeight),console.log("\u6392\u961f\u989c\u8272\u987a\u5e8f",i.fetchMaxIndex(i.allWeight,k.colorDes.length));for(var t=i.fetchMaxIndex(i.allWeight,k.colorDes.length),e=new Array(k.colorDes.length).fill(0),n=0;n<i.sortPersonNodes.length;n++)e[(a=i.sortPersonNodes[n]).getComponent(L.default).personColor]+=1;var r=0;for(n=0;n<i.sortPersonNodes.length;n++){for(var a=i.sortPersonNodes[n],s=t[r];0==e[s]&&(s=t[r+=1],!(r>=k.colorDes.length-1)););e[s]-=1,a.getComponent(L.default).personColor=s,i.setColorPersonImg_sort(s,a),console.log(k.colorDes[s])}i.checkPerson(),i.isSorting=!1}).start(),[2]}})})},e.prototype.remove=function(){console.log("start=====",JSON.parse(JSON.stringify(this.colorPersonAmountArr)));for(var t=[],e=0;e<this.sortPersonNodes.length;e++){var o=(d=this.sortPersonNodes[e]).getComponent(L.default).personColor;t.push(o)}console.log("\u6d88\u9664",t);var i=this.dict.parkingRoot.children[0].car,n=i.getComponent(P.default).carColor,r=i.getComponent(P.default).emptySeatAmount,a=[],s=[];for(e=0;e<t.length;e++)a.length<r&&t[e]==n?a.push(t[e]):s.push(t[e]);var c=a.concat(s);console.log("\u65b0\u6392\u5e8f",JSON.stringify(c));var l=r-a.length;if(console.log("add",l),l>0){console.log("start",JSON.stringify(this.colorPersonAmountArr[n]));for(var h=0;h<l;h++)c.unshift(n),console.log("\u6267\u884c");for(e=this.colorPersonAmountArr[n].length-1;e>=0;e--)if(this.colorPersonAmountArr[n][e]>0){if(l<=this.colorPersonAmountArr[n][e]){this.colorPersonAmountArr[n][e]-=l,l=0;break}l-=this.colorPersonAmountArr[n][e],this.colorPersonAmountArr[n][e]=0}}for(console.log("end",JSON.stringify(this.colorPersonAmountArr[n])),console.log("\u65b0\u6392\u5e8f2",JSON.stringify(c)),e=0;e<c.length;e++){var d=this.sortPersonNodes[e],u=c[e];if(d)d.getComponent(L.default).personColor=u,this.setColorPersonImg_sort(u,d);else{var p=this.colorPersonAmountArr[u].length-1;this.colorPersonAmountArr[u][p]+=1,console.log("\u56de\u6536",k.colorDes[u]),this.currentPersonColorAmount[u]-=1}}console.log("end=====",JSON.parse(JSON.stringify(this.colorPersonAmountArr))),this.checkPerson()},e.prototype.revive=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,i=this;return __generator(this,function(n){switch(n.label){case 0:return this.isSorting?[2]:(this.isSorting=!0,this.isSortAnim=!0,t=1.5,[4,y.default.getRes("gameBundle","prefab/item/StarPrefab",cc.Prefab)]);case 1:return e=n.sent(),o=cc.instantiate(e),this.dict.tailGas.parent.addChild(o),this.schedule(function(){for(var t=0;t<i.sortPersonNodes.length;t++){var e=i.sortPersonNodes[t],o=i.randomNum(0,k.colorDes.length-1);i.setColorPersonImg_sort(o,e)}},.2,(t-1)/.2-.3),cc.tween(this.node).delay(t).call(function(){i.isFail=!1,i.policeIndex=0,i.goldIndex=0,i.isSortAnim=!1,o.destroy();for(var t=0,e={},n=[],r=0;r<i.parkingNodes.length;r++){var a=(f=i.parkingNodes[r]).car;if(!f.isEmpty&&a&&t<4){t+=1;var s=a.getComponent(P.default),c=new Array(s.emptySeatAmount).fill(s.carColor);if(n=n.concat(c),e[s.carColor]){var l=e[s.carColor];l+=s.emptySeatAmount,e[s.carColor]=l}else e[s.carColor]=s.emptySeatAmount}}console.log("\u9700\u8981\u4ece\u540e\u9762\u51cf\u6389",JSON.parse(JSON.stringify(e)));var h=[];for(r=0;r<i.sortPersonNodes.length;r++){var d=(f=i.sortPersonNodes[r]).getComponent(L.default).personColor;n.includes(d)?0==(l=e[d])?h.push(d):(l-=1,e[d]=l):h.push(d)}for(var u in n=n.concat(h),console.log("\u9700\u8981\u4ece\u540e\u9762\u51cf\u6389222",JSON.parse(JSON.stringify(e))),console.log("start",JSON.parse(JSON.stringify(i.colorPersonAmountArr))),e){var p=e[u];if(d=Number(u),p>0)for(r=i.colorPersonAmountArr[d].length-1;r>=0;r--)if(i.colorPersonAmountArr[d][r]>0){if(p<=i.colorPersonAmountArr[d][r]){i.colorPersonAmountArr[d][r]-=p,p=0;break}p-=i.colorPersonAmountArr[d][r],i.colorPersonAmountArr[d][r]=0}}for(console.log("end",JSON.parse(JSON.stringify(i.colorPersonAmountArr))),i.reviveArr.length?i.reviveArr=n.concat(i.reviveArr):i.reviveArr=n,r=0;r<n.length;r++){var f=i.sortPersonNodes[r];d=n[r],f&&(f.getComponent(L.default).personColor=d,i.setColorPersonImg_sort(d,f))}for(console.log("start-reviveArr",JSON.parse(JSON.stringify(i.reviveArr))),r=0;r<n.length;r++)if(f=i.sortPersonNodes[r],d=n[r],!f){i.reviveArr=i.reviveArr.splice(r);break}console.log("end-reviveArr",JSON.parse(JSON.stringify(i.reviveArr))),i.checkPerson(),i.isSorting=!1}).start(),[2]}})})},e.prototype.func_sortOld=function(t){return void 0===t&&(t=!1),__awaiter(this,void 0,void 0,function(){var e,o,i,n=this;return __generator(this,function(r){switch(r.label){case 0:return this.isSorting?[2]:(this.isSorting=!0,this.isSortAnim=!0,e=1.5,[4,y.default.getRes("gameBundle","prefab/item/StarPrefab",cc.Prefab)]);case 1:return o=r.sent(),i=cc.instantiate(o),this.dict.tailGas.parent.addChild(i),this.schedule(function(){for(var t=0;t<n.sortPersonNodes.length;t++){var e=n.sortPersonNodes[t],o=n.randomNum(0,k.colorDes.length-1);n.setColorPersonImg_sort(o,e)}},.2,(e-1)/.2-.3),this.scheduleOnce(function(){n.policeIndex=0,n.goldIndex=0,n.isSortAnim=!1,i.destroy(),n.isFail=!1,n.firstSortIndexArr=[],n.firstSortAmountArr=[];var e=[],o=[];if(t){var r=n.dict.parkingRoot.children[0].car;e.push(r.getComponent(P.default).carColor),o.push(r.getComponent(P.default).emptySeatAmount);for(var a=0;a<n.parkingNodes.length;a++){var s=(d=n.parkingNodes[a]).car;!d.isEmpty&&s&&e.length<3&&(e.push(s.getComponent(P.default).carColor),o.push(s.getComponent(P.default).emptySeatAmount))}}else for(a=0;a<n.parkingNodes.length;a++)r=(d=n.parkingNodes[a]).car,!d.isEmpty&&r&&e.length<4&&(e.push(r.getComponent(P.default).carColor),o.push(r.getComponent(P.default).emptySeatAmount));if(0==e.length){var c=new Array(n.colorTypeAmount).fill(0);for(a=0;a<n.sortPersonNodes.length;a++)c[h=(d=n.sortPersonNodes[a]).getComponent(L.default).personColor]+=1,n.currentPersonColorAmount[h]-=1,!n.firstSortIndexArr.includes(h)&&n.firstSortIndexArr.length<2&&n.firstSortIndexArr.push(h);for(var l=new Array(n.colorTypeAmount).fill([]),h=0;h<n.colorPersonAmountArr.length;h++){var d=n.colorPersonAmountArr[h],u=void 0;u=n.colorPersonIndexArr[h]==d.length?[]:d.slice(-(d.length-n.colorPersonIndexArr[h])),l[h]=u}for(a=0;a<l.length;a++)0!=c[a]&&l[a].push(c[a]);for(a=0;a<n.firstSortIndexArr.length;a++){h=n.firstSortIndexArr[a];var p=void 0;p=(m=n.colorPersonArr[h]-n.currentPersonColorAmount[h])>=10?10:m;var f=0;if((v=l[h])[v.length-1]>p)f=p,v[v.length-1]-=p,v.unshift(p);else if(v[v.length-1]==p)v.pop(),v.unshift(p);else{for(;f<p;)(f+=v[v.length-1])>p?v[v.length-1]=f-p:v.pop();v.unshift(p)}l[h]=v}for(a=0;a<n.sortPersonNodes.length;a++)(v=n.sortPersonNodes[a]).destroy();n.sortPersonNodes=[],n.colorPersonIndexArr=new Array(n.colorTypeAmount).fill(0),n.colorPersonAmountArr=l,n.createPerson(!0),n.isSorting=!1}else if(1==e.length||2==e.length){var g=e.length;for(n.firstSortIndexArr=e,n.firstSortAmountArr=o,c=new Array(n.colorTypeAmount).fill(0),a=0;a<n.sortPersonNodes.length;a++)c[h=(d=n.sortPersonNodes[a]).getComponent(L.default).personColor]+=1,n.currentPersonColorAmount[h]-=1,n.firstSortIndexArr.length<g+1&&n.firstSortIndexArr.push(h);if(t);else if(n.firstSortIndexArr.length<g+1)for(a=0;a<n.colorPersonArr.length;a++)(v=n.colorPersonArr[a])-n.currentPersonColorAmount[a]&&n.firstSortIndexArr.length<g+1&&n.firstSortIndexArr.push(a);for(l=new Array(n.colorTypeAmount).fill([]),h=0;h<n.colorPersonAmountArr.length;h++)d=n.colorPersonAmountArr[h],u=void 0,u=n.colorPersonIndexArr[h]==d.length?[]:d.slice(-(d.length-n.colorPersonIndexArr[h])),l[h]=u;for(a=0;a<l.length;a++)0!=c[a]&&l[a].push(c[a]);for(a=0;a<n.firstSortIndexArr.length;a++){if(h=n.firstSortIndexArr[a],(p=n.firstSortAmountArr[a])||(p=10),(m=n.colorPersonArr[h]-n.currentPersonColorAmount[h])<10&&(p=m),f=0,(v=l[h])[v.length-1]>p)f=p,v[v.length-1]-=p,v.unshift(p);else if(v[v.length-1]==p)v.pop(),v.unshift(p);else{for(;f<p;)(f+=v[v.length-1])>p?v[v.length-1]=f-p:v.pop();v.unshift(p)}l[h]=v}for(a=0;a<n.sortPersonNodes.length;a++)(v=n.sortPersonNodes[a]).destroy();n.sortPersonNodes=[],n.colorPersonIndexArr=new Array(n.colorTypeAmount).fill(0),n.colorPersonAmountArr=l,n.createPerson(!0,function(){n.checkPerson(),n.isSorting=!1})}else{for(n.firstSortIndexArr=e,n.firstSortAmountArr=o,c=new Array(n.colorTypeAmount).fill(0),a=0;a<n.sortPersonNodes.length;a++)c[h=(d=n.sortPersonNodes[a]).getComponent(L.default).personColor]+=1,n.currentPersonColorAmount[h]-=1;for(l=new Array(n.colorTypeAmount).fill([]),h=0;h<n.colorPersonAmountArr.length;h++)d=n.colorPersonAmountArr[h],u=void 0,u=n.colorPersonIndexArr[h]==d.length?[]:d.slice(-(d.length-n.colorPersonIndexArr[h])),l[h]=u;for(a=0;a<l.length;a++)0!=c[a]&&l[a].push(c[a]);for(a=0;a<n.firstSortIndexArr.length;a++){h=n.firstSortIndexArr[a],p=n.firstSortAmountArr[a];var m=n.colorPersonArr[h]-n.currentPersonColorAmount[h];if(f=0,(v=l[h])[v.length-1]>p)f=p,v[v.length-1]-=p,v.unshift(p);else if(v[v.length-1]==p)v.pop(),v.unshift(p);else{for(;f<p;)(f+=v[v.length-1])>p?v[v.length-1]=f-p:v.pop();v.unshift(p)}l[h]=v}for(a=0;a<n.sortPersonNodes.length;a++){var v;(v=n.sortPersonNodes[a]).destroy()}n.sortPersonNodes=[],n.colorPersonIndexArr=new Array(n.colorTypeAmount).fill(0),n.colorPersonAmountArr=l,n.createPerson(!0,function(){n.checkPerson(),n.isSorting=!1})}},e),[2]}})})},e.prototype.func_updateCar=function(){for(var t=[],e=this.carRoot.children.concat(this.turntableCarArr),o=0;o<e.length;o++)!(l=e[o]).active||l.getComponent(P.default).carState!=k.CarState.Idle||l.getComponent(P.default).isTransportCar||l.getComponent(P.default).isUTransportCar||l.getComponent(P.default).isBlackCar||t.push(l);for(var i=0;i<t.length;i++)for(var n=t[i],r=0;r<t.length;r++){var a=t[r];if(n!=a&&n.getComponent(P.default).seatTotalAmount==a.getComponent(P.default).seatTotalAmount&&n.getComponent(P.default).carColor!=a.getComponent(P.default).carColor&&!n.isExchange&&!a.isExchange&&1==this.randomNum(0,1)){var s=n.getComponent(P.default).carColor,c=a.getComponent(P.default).carColor;n.getComponent(P.default).carColor=c,a.getComponent(P.default).carColor=s,n.isExchange=!0,a.isExchange=!0,this.setCarColorImg(n,n.getComponent(P.default).carColor),this.setCarColorImg(a,a.getComponent(P.default).carColor);break}}for(o=0;o<e.length;o++){var l;(l=e[o]).isExchange=!1}},e.prototype.func_removeCar=function(){this.isTransportCarMove=!1,this.dict.carRoot.getComponent(N.default)&&(this.dict.carRoot.getComponent(N.default).isTransportCarMove=!1);var t=cc.instantiate(this.dict.tipPrefab);this.dict.tipPrefab.parent.addChild(t),this.tipRemove=t,t.children[1].getComponent(cc.Label).string=s.default.formatStr("\u53ef\u62ce\u51fa\u4efb\u610f\u4e00\u8f86\u6c7d\u8f66\u81f3VIP\u8f66\u4f4d\u6d88\u9664"),t.y=301.643,t.active=!0,this.isRemove=!0,cc.game.emit("isRemove",!0);for(var e=0;e<this.carRoot.children.length;e++){var o=this.carRoot.children[e];(o.getComponent(P.default).prevCar||o.getComponent(P.default).nextCar||o.getChildByName("key")||o.getChildByName("lock"))&&(o.opacity=100)}},e.prototype.removeCar=function(t){var e=this;this.removePropUsing=!0,this.tipRemove.destroy();var o=t.convertToWorldSpaceAR(cc.v2(0,-t.height/2));this.dict.helicopterRoot.position=cc.v3(434,-614,0);var i=this.dict.helicopterRoot.parent.convertToNodeSpaceAR(o),n=this.dict.helicopterRoot.position.sub(i).mag();this.dict.helicopterSpine.getComponent(sp.Skeleton).setAnimation(0,"animation2",!0),this.dict.parkingRoot.children[0].active=!0;var r=this.dict.parkingRoot.children[0].convertToWorldSpaceAR(cc.v2(0,-this.dict.parkingRoot.children[0].height/2)),a=this.dict.helicopterRoot.parent.convertToNodeSpaceAR(r),s=i.sub(a).mag();this.dict.helicopterRoot.active=!0,this.dict.helicopterRoot.opacity=255,cc.tween(this.dict.helicopterRoot).to(n/500,{position:i}).to(.3,{scale:.9}).call(function(){var o=cc.instantiate(t);if(o.getChildByName("car").getComponent(cc.PolygonCollider).enabled=!1,o.getComponent(P.default).lenImgName=t.getComponent(P.default).lenImgName,o.getComponent(P.default).colorImgName=t.getComponent(P.default).colorImgName,o.getComponent(P.default).carColor=t.getComponent(P.default).carColor,t.getComponent(P.default).isTransportCar&&-1!==(i=e.transportCarArr.indexOf(t))&&e.transportCarArr.splice(i,1),t.getComponent(P.default).isUTransportCar&&-1!==(i=e.dict.carRoot.getComponent(N.default).carArr.indexOf(t))&&(e.dict.carRoot.getComponent(N.default).carArr[i]=null,e.dict.carRoot.getComponent(N.default).reduceUpdate()),t.getComponent(P.default).isTurntableCar){var i=t.parent.getComponent(D.default).cars.indexOf(t);t.parent.getComponent(D.default).cars.splice(i,1),e.updateTurntableCar()}t.destroy(),e.dict.helicopterRoot.getChildByName("car").addChild(o);var n=t.convertToWorldSpaceAR(cc.v2(0,0));o.position=e.dict.helicopterRoot.getChildByName("car").parent.convertToNodeSpaceAR(n)}).delay(.3).to(.3,{scale:1}).to(s/500,{position:a}).to(.3,{scale:.9}).call(function(){var t,o,n=e.dict.helicopterRoot.getChildByName("car").children[0],r=n.getComponent(P.default).colorImgName,a=n.getComponent(P.default).lenImgName;n.getComponent(P.default).isRichCar?(a=1,t=cc.instantiate(e.dict.carPrefab.getChildByName("116"+a))):t=n.getComponent(P.default).isTramcar?cc.instantiate(e.dict.carPrefab.getChildByName("136"+a)):cc.instantiate(e.dict.carPrefab.getChildByName("06"+a)),t.parking=e.dict.parkingRoot.children[0],t.getChildByName("car").getComponent(cc.PolygonCollider).enabled=!1,t.active=!1,e.carRoot.addChild(t);var s=t.parking.convertToWorldSpaceAR(cc.v2(0,0));i=t.parent.convertToNodeSpaceAR(s),t.position=cc.v2(i.x,i.y);var c=""+r+6+a;o="texture/"+e.folder+"/"+e.folder+"_"+c,t.getComponent(P.default).carColor=n.getComponent(P.default).carColor,t.getComponent(P.default).colorImgName=n.getComponent(P.default).colorImgName,t.getComponent(P.default).lenImgName=n.getComponent(P.default).lenImgName,t.parking.car=t,t.parking.isEmpty=!1,cc.resources.load(o,function(o,i){n.destroy(),i&&(t.getChildByName("car").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(i)),t.active=!0,e.dict.helicopterRoot.opacity=0,e.remove(),e.scheduleOnce(function(){e.isRemove=!1,e.removePropUsing=!1,e.isTransportCarMove=!0,e.dict.carRoot.getComponent(N.default)&&(e.dict.carRoot.getComponent(N.default).isTransportCarMove=!0),e.updateTransportAmount(),cc.game.emit("isRemove",!1);for(var t=0;t<e.carRoot.children.length;t++){var o=e.carRoot.children[t];(o.getComponent(P.default).prevCar||o.getComponent(P.default).nextCar||o.getChildByName("key")||o.getChildByName("lock"))&&(o.opacity=255)}},1)})}).start()},e.prototype.func_revive=function(){if(this.func_hasLockParking()){for(var t=0;t<this.dict.parkingRoot.children.length;t++){var e=this.dict.parkingRoot.children[t];if(e.getChildByName("videoLock")&&e.getChildByName("videoLock").active){e.getChildByName("videoLock").destroy(),e.getChildByName("empty").active=!0,this.playUnlockSpine(e),e.isEmpty=!0,this.parkingNodes.push(e);break}}cc.game.emit("gamelog_Thinking",p.ShuShuConst.reward_btn,{lv:h.User.getTempData(i.TempData.CURRENT_LEVEL_ID),mode:h.User.getTempData(i.TempData.CURRENT_MODE),queue:h.User.getTempData(i.TempData.CURRENT_LEVEL),id:8,sort:g.default.get(f.default.ConfigSuffix)}),this.revive()}else cc.game.emit("gamelog_Thinking",p.ShuShuConst.reward_btn,{lv:h.User.getTempData(i.TempData.CURRENT_LEVEL_ID),mode:h.User.getTempData(i.TempData.CURRENT_MODE),queue:h.User.getTempData(i.TempData.CURRENT_LEVEL),id:9,sort:g.default.get(f.default.ConfigSuffix)}),this.revive()},e.prototype.func_hasLockParking=function(){for(var t=0;t<this.dict.parkingRoot.children.length;t++){var e=this.dict.parkingRoot.children[t];if(e.getChildByName("videoLock")&&e.getChildByName("videoLock").active)return!0}return!1},e.prototype.func_endPause=function(){for(var t=0;t<this.dict.personRoot.children.length;t++)this.dict.personRoot.children[t].pauseAllActions()},e.prototype.func_resume=function(){for(var t=0;t<this.dict.personRoot.children.length;t++)this.dict.personRoot.children[t].resumeAllActions()},__decorate([O],e.prototype,"isDebug",void 0),__decorate([O],e.prototype,"boundary",void 0),__decorate([O],e.prototype,"isWaterMode",void 0),__decorate([O],e.prototype,"isHighSpeedRailway",void 0),__decorate([d.LimitRepeat(.3)],e.prototype,"touchStart",null),__decorate([U],e)}(S.default);o.default=F,cc._RF.pop()},{"../../scripts/AssetManager":"AssetManager","../../scripts/AudioManager":"AudioManager","../../scripts/BmsManager":"BmsManager","../../scripts/LanguageManager":"LanguageManager","../../scripts/LimitRepeat":"LimitRepeat","../../scripts/LocalStorageConst":"LocalStorageConst","../../scripts/LocalStorageManager":"LocalStorageManager","../../scripts/MemoryStorageConst":"MemoryStorageConst","../../scripts/MemoryStorageManager":"MemoryStorageManager","../../scripts/PlatformManager":"PlatformManager","../../scripts/PopupConst":"PopupConst","../../scripts/PopupManager":"PopupManager","../../scripts/ShuShuConst":"ShuShuConst","../../scripts/TipManager":"TipManager","../../scripts/ToastManager":"ToastManager","../../scripts/Tools":"Tools","../../scripts/UserConst":"UserConst","../../scripts/UserManager":"UserManager","../../scripts/Utils":"Utils","./BrainLevelBase":"BrainLevelBase","./Level-249667_bulldozer":"Level-249667_bulldozer","./Level-249667_busConfig":"Level-249667_busConfig","./Level-249667_carItem":"Level-249667_carItem","./Level-249667_carSquare":"Level-249667_carSquare","./Level-249667_carpark":"Level-249667_carpark","./Level-249667_chain":"Level-249667_chain","./Level-249667_key":"Level-249667_key","./Level-249667_oblique":"Level-249667_oblique","./Level-249667_personItem":"Level-249667_personItem","./Level-249667_turntable":"Level-249667_turntable","./Level-249667_uTransport":"Level-249667_uTransport","./MotionTrail":"MotionTrail","./PoolMgr":"PoolMgr"}],"Level-249667_carItem":[function(t,e,o){"use strict";cc._RF.push(e,"275aa06b15Bo41Bty//FBo3","Level-249667_carItem");var i=t("../../scripts/AudioManager"),n=t("./Level-249667_busConfig"),r=t("./Level-249667_chain"),a=t("./Level-249667_uTransport"),s=cc._decorator,c=s.ccclass,l=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.seatTotalAmount=4,e.railCarTurn=[],e.carColor=null,e.carID=null,e.path=0,e.emptySeatAmount=0,e.dir=0,e.colorImgName=null,e.dirImgName=null,e.lenImgName=null,e.mgr=null,e.isTransportCar=!1,e.isBlackCar=!1,e.isTurntableCar=!1,e.turntablePosIndex=-1,e.prevCar=null,e.nextCar=null,e.leftObliqueCar=!1,e.rightObliqueCar=!1,e.isUTransportCar=!1,e.isUTransportCar_noIn=!1,e.isFireEngine=!1,e.isPoliceCar=!1,e.isRichCar=!1,e.isTramcar=!1,e.tramcarPosIndex=0,e.otherCarNode=[],e.minLen=10,e.oldPos=null,e.floatPos=null,e.carState=n.CarState.Idle,e.speed=900,e.isCanClick=!0,e.isCollision=!1,e.isReadyDestroy=!1,e}var o;return __extends(e,t),o=e,e.prototype.onLoad=function(){this.emptySeatAmount=this.seatTotalAmount,this.oldPos=this.node.position,"1"==this.node.name[0]&&"2"==this.node.name[1]&&(this.isFireEngine=!0),"1"==this.node.name[0]&&"0"==this.node.name[1]&&(this.isPoliceCar=!0),"1"==this.node.name[0]&&"1"==this.node.name[1]&&(this.isRichCar=!0),"1"==this.node.name[0]&&"3"==this.node.name[1]&&(this.isTramcar=!0)},e.prototype.update=function(){if(!this.isReadyDestroy){if(this.carState==n.CarState.Normal){if(this.path>1||this.isTramcar){this.isCanClick=!1;var t=this.getWPosByNode(this.node),e=Math.round(Math.abs(this.node.angle)),i=void 0;90==e&&(i=[this.node.convertToWorldSpaceAR(cc.v2(-this.node.width/2,0)),this.node.convertToWorldSpaceAR(cc.v2(this.node.width/2,0))]);for(var r=0;r<this.otherCarNode.length;r++){var s=this.otherCarNode[r];try{if(s&&s.getComponent(o).carState==n.CarState.Idle){var c=[s.convertToWorldSpaceAR(cc.v2(0,0)),s.convertToWorldSpaceAR(cc.v2(0,-s.height))],l=[s.convertToWorldSpaceAR(cc.v2(-s.width/2,0)),s.convertToWorldSpaceAR(cc.v2(s.width/2,0))],h=[s.convertToWorldSpaceAR(cc.v2(-s.width/2,-s.height)),s.convertToWorldSpaceAR(cc.v2(s.width/2,-s.height))];if(c[0])if(90==e){if(cc.Intersection.pointLineDistance(i[0],c[0],c[1],!0)<this.minLen||cc.Intersection.pointLineDistance(i[0],l[0],l[1],!0)<this.minLen||cc.Intersection.pointLineDistance(i[0],h[0],h[1],!0)<this.minLen||cc.Intersection.pointLineDistance(i[1],c[0],c[1],!0)<this.minLen||cc.Intersection.pointLineDistance(i[1],l[0],l[1],!0)<this.minLen||cc.Intersection.pointLineDistance(i[1],h[0],h[1],!0)<this.minLen){this.checkTouch(s);break}}else if(cc.Intersection.pointLineDistance(t,c[0],c[1],!0)<this.minLen||cc.Intersection.pointLineDistance(t,l[0],l[1],!0)<this.minLen||cc.Intersection.pointLineDistance(t,h[0],h[1],!0)<this.minLen){this.checkTouch(s);break}}}catch(m){console.log(m),this.node&&this.node.destroy()}}}var d=this.mgr.dict.road.parent.convertToWorldSpaceAR(this.mgr.dict.road.position),u=this.node.parent.convertToNodeSpaceAR(d);if(this.node.y>=u.y-2*this.minLen)return console.log("\u68c0\u6d4b\u78b0\u5230\u516c\u8def"),this.isTransportCar&&(-1!==(r=this.mgr.transportCarArr.indexOf(this.node))&&this.mgr.transportCarArr.splice(r,1),this.mgr.isTransportCarMove=!0,this.mgr.updateTransportAmount()),this.isUTransportCar&&(-1!==(r=this.mgr.dict.carRoot.getComponent(a.default).carArr.indexOf(this.node))&&(this.mgr.dict.carRoot.getComponent(a.default).carArr[r]=null,this.mgr.dict.carRoot.getComponent(a.default).reduceUpdate()),this.mgr.dict.carRoot.getComponent(a.default).isTransportCarMove=!0),void(this.isCollision||(this.isCollision=!0,this.mgr.collision(this.node)));if(this.node.x<=-(this.mgr.boundary/2+this.node.width/2))return this.carState=n.CarState.GoingRoad,void this.mgr.changeCar(this.node,2);if(this.node.x>=this.mgr.boundary/2+this.node.width/2)return this.carState=n.CarState.GoingRoad,void this.mgr.changeCar(this.node,2);if(this.node.y<=-620&&this.node.x>0)return this.carState=n.CarState.OnBottomRight,void this.mgr.changeCar(this.node,1,1,"01"+this.lenImgName+"-1");if(this.node.y<=-620&&this.node.x<0)return this.carState=n.CarState.OnBottomLeft,void this.mgr.changeCar(this.node,1,2,"01"+this.lenImgName+"-0");if(this.leftObliqueCar&&this.node.x>=-189.008?(this.carState=n.CarState.GoingRoad,this.mgr.changeCar(this.node,2)):this.rightObliqueCar&&this.node.x<=189.008?(this.carState=n.CarState.GoingRoad,this.mgr.changeCar(this.node,2)):(this.isUTransportCar||this.isUTransportCar_noIn)&&(-90==Math.round(this.node.angle)||-52==Math.round(this.node.angle)||-128==Math.round(this.node.angle))&&this.node.x>=0?(this.carState=n.CarState.GoingRoad,this.node.x=0,this.mgr.changeCar(this.node,2),this.isUTransportCar&&this.mgr.dict.carRoot.getComponent(a.default).reduceUpdate()):(this.isUTransportCar||this.isUTransportCar_noIn)&&(90==Math.round(this.node.angle)||52==Math.round(this.node.angle)||128==Math.round(this.node.angle))&&this.node.x<=0&&(this.carState=n.CarState.GoingRoad,this.node.x=0,this.mgr.changeCar(this.node,2),this.isUTransportCar&&this.mgr.dict.carRoot.getComponent(a.default).reduceUpdate()),this.isTramcar&&this.railCarTurn[this.tramcarPosIndex]){var p=this.railCarTurn[this.tramcarPosIndex].name.split("-"),f=p[0],g=p[1];"0"==f?this.getWPosByNode(this.node).x<=this.getWPosByNode(this.railCarTurn[this.tramcarPosIndex]).x&&this.railCarTurnChange(g):"1"==f?this.getWPosByNode(this.node).x>=this.getWPosByNode(this.railCarTurn[this.tramcarPosIndex]).x&&this.railCarTurnChange(g):"2"==f||"3"==f&&this.getWPosByNode(this.node).y<=this.getWPosByNode(this.railCarTurn[this.tramcarPosIndex]).y&&this.railCarTurnChange(g)}}if(this.carState==n.CarState.OnBottomLeft&&this.node.x<=-(this.mgr.boundary/2+this.node.width/2))return this.carState=n.CarState.GoingRoad,void this.mgr.changeCar(this.node,2);if(this.carState==n.CarState.OnBottomRight&&this.node.x>=this.mgr.boundary/2+this.node.width/2)return this.carState=n.CarState.GoingRoad,void this.mgr.changeCar(this.node,2);this.carState==n.CarState.OutParking&&this.node.x>=cc.winSize.width/2+6*this.node.width&&(this.mgr.checkRes(),this.node.destroy()),this.carState==n.CarState.WaterSprayLeave&&this.node.x<=-(cc.winSize.width/2+this.node.height)&&(console.log("\u9500\u6bc1\u6d88\u9632\u8f66"),this.node.destroy())}},e.prototype.railCarTurnChange=function(t){this.carState=n.CarState.Normal,"up"==t?(this.tramcarPosIndex+=1,this.mgr.changeCar(this.node,2)):"leftUp"==t?(this.tramcarPosIndex+=1,this.mgr.changeCar(this.node,4,2)):"leftDown"==t?(this.tramcarPosIndex+=1,this.mgr.changeCar(this.node,5,2)):"right"==t?(this.tramcarPosIndex+=1,this.mgr.changeCar(this.node,1,1)):"left"==t?(this.tramcarPosIndex+=1,this.mgr.changeCar(this.node,1,2)):"rightUp"==t?(this.tramcarPosIndex+=1,this.mgr.changeCar(this.node,4,1)):"rightDown"==t&&(this.tramcarPosIndex+=1,this.mgr.changeCar(this.node,5,1))},e.prototype.checkTouch=function(t){var e=this;if(i.Audio.getEffectMute()||this.mgr.playLevelSound("Crash"),this.mgr.hit(this.node),this.carState=n.CarState.Idle,this.node.isCarPark&&(this.node.isWen=!0),this.node.stopAllActions(),t.runAction(this.shackAction(.1,2)),this.mgr.moveCarAmount-=1,this.isTramcar){var s=this.node.convertToWorldSpaceAR(cc.v2(0,-30)),c=this.node.parent.convertToNodeSpaceAR(s);cc.tween(this.node).to(.15,{position:c}).call(function(){e.isCanClick=!0}).start()}else cc.tween(this.node).to(.15,{position:this.oldPos}).call(function(){e.isCanClick=!0,e.isTransportCar&&(e.mgr.isTransportCarMove=!0),e.isUTransportCar&&(e.mgr.dict.carRoot.getComponent(a.default).isTransportCarMove=!0),e.float(e.node)}).start();var l=this.nextCar,h=this.prevCar;l&&(this.node.getChildByName("chain")&&0==this.node.getChildByName("chain").getComponent(r.default).linkType||l.getChildByName("chain")&&0==l.getChildByName("chain").getComponent(r.default).linkType)&&(l.stopAllActions(),l.getComponent(o).carState=n.CarState.Idle,this.mgr.moveCarAmount-=1,cc.tween(l).to(.15,{position:l.getComponent(o).oldPos}).call(function(){l.getComponent(o).isCanClick=!0}).start()),h&&(h.getChildByName("chain")&&1==h.getChildByName("chain").getComponent(r.default).linkType||this.node.getChildByName("chain")&&1==this.node.getChildByName("chain").getComponent(r.default).linkType)&&(h.getComponent(o).carState=n.CarState.Idle,h.stopAllActions(),this.mgr.moveCarAmount-=1,cc.tween(h).to(.15,{position:h.getComponent(o).oldPos}).call(function(){h.getComponent(o).isCanClick=!0}).start())},e.prototype.float=function(t){t.getComponent(o).floatPos&&cc.tween(t).to(.6,{position:t.getComponent(o).floatPos}).to(.6,{position:t.getComponent(o).oldPos}).union().repeatForever().start()},e.prototype.carBack=function(t){var e=this;i.Audio.getEffectMute()||this.mgr.playLevelSound("Crash"),this.mgr.hit(this.node),this.carState=n.CarState.Idle,this.node.isCarPark&&(this.node.isWen=!0),this.node.stopAllActions(),t.runAction(this.shackAction(.1,2)),this.mgr.moveCarAmount-=1,cc.tween(this.node).to(.15,{position:this.oldPos}).call(function(){e.isCanClick=!0,e.isTransportCar&&(e.mgr.isTransportCarMove=!0),e.isUTransportCar&&(e.mgr.dict.carRoot.getComponent(a.default).isTransportCarMove=!0)}).start();var s=this.nextCar,c=this.prevCar;s&&(this.node.getChildByName("chain")&&0==this.node.getChildByName("chain").getComponent(r.default).linkType||s.getChildByName("chain")&&0==s.getChildByName("chain").getComponent(r.default).linkType)&&(s.stopAllActions(),s.getComponent(o).carState=n.CarState.Idle,cc.tween(s).to(.15,{position:s.getComponent(o).oldPos}).call(function(){s.getComponent(o).isCanClick=!0}).start()),c&&(c.getChildByName("chain")&&1==c.getChildByName("chain").getComponent(r.default).linkType||this.node.getChildByName("chain")&&1==this.node.getChildByName("chain").getComponent(r.default).linkType)&&(c.getComponent(o).carState=n.CarState.Idle,c.stopAllActions(),cc.tween(c).to(.15,{position:c.getComponent(o).oldPos}).call(function(){c.getComponent(o).isCanClick=!0}).start())},e.prototype.shackAction=function(t,e){var o=cc.moveBy(t,e,e),i=cc.moveBy(t,-e,-e),n=cc.moveBy(.8*t,.8*e,.8*e),r=cc.moveBy(.8*t,.8*-e,.8*-e),a=cc.moveBy(.6*t,.6*e,.6*e),s=cc.moveBy(.6*t,.6*-e,.6*-e),c=cc.moveBy(.4*t,.4*e,.4*e),l=cc.moveBy(.4*t,.4*-e,.4*-e),h=cc.moveBy(.2*t,.2*e,.2*e),d=cc.moveBy(.2*t,.2*-e,.2*-e);return cc.sequence(o,i,n,r,a,s,c,l,h,d)},e.prototype.getWPosByNode=function(t){return t.parent.convertToWorldSpaceAR(t.position)},__decorate([l],e.prototype,"seatTotalAmount",void 0),__decorate([l([cc.Node])],e.prototype,"railCarTurn",void 0),o=__decorate([c],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../scripts/AudioManager":"AudioManager","./Level-249667_busConfig":"Level-249667_busConfig","./Level-249667_chain":"Level-249667_chain","./Level-249667_uTransport":"Level-249667_uTransport"}],"Level-249667_carSquare":[function(t,e,o){"use strict";cc._RF.push(e,"c6170LafoBNpoFDFCAdT/u9","Level-249667_carSquare");var i=cc._decorator,n=i.ccclass,r=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPos=cc.v2(-256,255),e.roadAmount=7,e.horizontalDistance=85,e.verticalDistance=20,e.carArr=[],e.carAmount=[],e.mgr=null,e.row=0,e.col=0,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(t,e){this.carAmount=t,this.mgr=e;for(var o=this.carAmount.reduce(function(t,e){return t+e},0),i=0;i<o;i++){var n=this.getLen(),r=cc.instantiate(this.mgr.dict.carPrefab.getChildByName("02"+(n+1)));if(this.row-1==-1)r.position=cc.v2(this.startPos.x+this.col*this.horizontalDistance,this.startPos.y);else{var a=this.carArr[this.row-1][this.col];r.position=cc.v2(this.startPos.x+this.col*this.horizontalDistance,a.y-a.height-this.verticalDistance)}this.node.addChild(r),r.carSquareCol=this.col,this.carArr[this.row]||(this.carArr[this.row]=[]),this.carArr[this.row][this.col]=r,this.col+=1,this.col>=this.roadAmount&&(this.col=0,this.row+=1)}},e.prototype.getLen=function(){for(var t=this.mgr.randomNum(0,2);!this.carAmount[t]&&0!=this.carAmount.reduce(function(t,e){return t+e},0);)t=this.mgr.randomNum(0,2);return this.carAmount[t]-=1,t},e.prototype.carMove=function(t){for(var e=t.carSquareCol,o=t.height,i=0;i<this.carArr.length;i++)for(var n=0;n<this.carArr[0].length;n++)this.carArr[i][n],this.carArr[i][n]&&this.carArr[i][n].carSquareCol==e&&cc.tween(this.carArr[i][n]).by(.3,{y:o+this.verticalDistance}).start()},__decorate([n],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],"Level-249667_carpark":[function(t,e,o){"use strict";cc._RF.push(e,"f118fN4qOtPSbiev96tlXXC","Level-249667_carpark");var i=t("./Level-249667_busConfig"),n=t("./Level-249667_carItem"),r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e.endPos=null,e.startPos=null,e.speed=0,e.carAmount=0,e.lenArr=[],e.mgr=null,e.path=0,e.carDirImg=null,e.config={"-52":1,52:0,90:0,"-90":1},e.carParkCars=[],e}return __extends(e,t),e.prototype.onLoad=function(){this.endPos=this.target.position;var t=this.target.convertToWorldSpaceAR(cc.v2(0,-70)),e=this.target.parent.convertToNodeSpaceAR(t);this.startPos=e,this.speed=this.target.getComponent(n.default).speed,this.node.getChildByName("carAmount").getComponent(cc.Label).string=""},e.prototype.initData=function(t,e){this.carDirImg=this.config[String(Math.round(this.node.angle))];var o=4;"90"!=String(Math.round(this.node.angle))&&"-90"!=String(Math.round(this.node.angle))||(o=1),this.mgr=e,this.lenArr=t,this.carAmount=t.length,this.node.getChildByName("carAmount").getComponent(cc.Label).string=""+t.length,this.path=this.target.getComponent(n.default).path+1;for(var i=0;i<t.length;i++){var r=t[i],a=this.mgr.createCarByCarPark(r,this.path+i,this.carDirImg,o);a.isCarPark=!0,a.position=this.startPos,this.carParkCars.push(a)}console.log("\u8f66\u5e93\u7684\u8f66",this.carParkCars.length)},e.prototype.update=function(){var t=this;if((this.target&&!this.target.active||!this.target)&&this.carParkCars.length>0){this.mgr.carparkIng=!0,this.target=this.carParkCars.shift(),this.node.getChildByName("carAmount").getComponent(cc.Label).string=""+this.carParkCars.length,this.target.active=!0,this.target.position=this.startPos;var e=this.startPos.sub(this.endPos).mag()/this.speed;this.scheduleOnce(function(){t.target.isWen=!0,t.target.getComponent(n.default).carState=i.CarState.Idle,t.mgr.carparkIng=!1,t.mgr.updateCarWeight()},e),cc.tween(this.target).to(e,{position:this.endPos}).call(function(){console.log("\u6d4b\u8bd5"),t.target.isWen=!0,t.mgr.carparkIng=!1}).start()}},__decorate([s(cc.Node)],e.prototype,"target",void 0),__decorate([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./Level-249667_busConfig":"Level-249667_busConfig","./Level-249667_carItem":"Level-249667_carItem"}],"Level-249667_chain":[function(t,e,o){"use strict";cc._RF.push(e,"411d2Woe0FLB7GSWgGp5uD5","Level-249667_chain");var i=t("./Level-249667_carItem"),n=cc._decorator,r=n.ccclass,a=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.next=null,e.isReverse=!1,e.linkType=0,e}return __extends(e,t),e.prototype.onLoad=function(){this.isReverse?(this.next.getComponent(i.default).nextCar=this.node.parent,this.node.parent.getComponent(i.default).prevCar=this.next):(this.next.getComponent(i.default).prevCar=this.node.parent,this.node.parent.getComponent(i.default).nextCar=this.next)},__decorate([a(cc.Node)],e.prototype,"next",void 0),__decorate([a],e.prototype,"isReverse",void 0),__decorate([a],e.prototype,"linkType",void 0),__decorate([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./Level-249667_carItem":"Level-249667_carItem"}],"Level-249667_key":[function(t,e,o){"use strict";cc._RF.push(e,"bd971b8SwtBSpR2gAQQExNG","Level-249667_key");var i=cc._decorator,n=i.ccclass,r=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lock=null,e}return __extends(e,t),__decorate([r(cc.Node)],e.prototype,"lock",void 0),__decorate([n],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],"Level-249667_oblique":[function(t,e,o){"use strict";cc._RF.push(e,"b9969P5ZXdKxLxcOjQoEc1b","Level-249667_oblique");var i=t("./Level-249667_carItem"),n=cc._decorator,r=n.ccclass,a=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPos=cc.v2(-85,245),e.roadAmount=3,e.horizontalDistance=85,e.verticalDistance=20,e.carArr=[],e.leftCarArr=[],e.rightCarArr=[],e.hideCarArr=[],e.carAmount=[],e.mgr=null,e.row=0,e.col=0,e.oblique=[],e.distance=140,e.leftObliquePos=cc.v2(-265,188),e.rightObliquePos=cc.v2(265,188),e.sum=0,e.surplusAmount=0,e.isAnim=!1,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(t,e,o){this.mgr=o,this.carAmount=t,this.oblique=e,this.sum=this.carAmount.reduce(function(t,e){return t+e},0);var n=this.sum;this.sum>=9&&(n=9);for(var r=0;r<n;r++){var a=this.getLen(),s=cc.instantiate(this.mgr.dict.carPrefab.getChildByName("02"+(a+1)));if(this.row-1==-1)s.position=cc.v2(this.startPos.x+this.col*this.horizontalDistance,this.startPos.y);else{var c=this.carArr[this.row-1][this.col];s.position=cc.v2(this.startPos.x+this.col*this.horizontalDistance,c.y-this.distance-this.verticalDistance)}this.node.addChild(s),s.carSquareCol=this.col,s.carSquareRow=this.row,this.carArr[this.row]||(this.carArr[this.row]=[]),this.carArr[this.row][this.col]=s,this.col+=1,this.col>=this.roadAmount&&(this.col=0,this.row+=1)}if(this.surplusAmount=this.sum-n,this.mgr.dict.queueAmount.getComponent(cc.Label).string=""+this.surplusAmount,this.surplusAmount>0)for(r=0;r<this.sum-n;r++){a=this.getLen(),s=cc.instantiate(this.mgr.dict.carPrefab.getChildByName("02"+(a+1)));var l=cc.view.getFrameSize().width/cc.view.getFrameSize().height;s.position=l<.5?cc.v2(0,-339-(this.distance+this.verticalDistance)*r):cc.v2(0,-289-(this.distance+this.verticalDistance)*r),this.node.addChild(s),this.hideCarArr.push(s),0==r&&(s.obliqueHead=!0),0!=r&&(s.opacity=0)}if(this.oblique[0].length)for(r=0;r<this.oblique[0].length;r++)if(0!=(a=this.oblique[0][r])){if(s=cc.instantiate(this.mgr.dict.carPrefab.getChildByName("04"+a+"-1")),this.node.addChild(s),s.position=cc.v2(this.leftObliquePos.x,this.leftObliquePos.y-99*r),2==a){var h=s.convertToWorldSpaceAR(cc.v2(0,-10)),d=s.parent.convertToNodeSpaceAR(h);s.position=d}else 1==a&&(h=s.convertToWorldSpaceAR(cc.v2(0,-20)),d=s.parent.convertToNodeSpaceAR(h),s.position=d);s.path=1,s.getComponent(i.default).leftObliqueCar=!0,this.leftCarArr.push(s)}if(this.oblique[1].length)for(r=0;r<this.oblique[1].length;r++)0!=(a=this.oblique[1][r])&&(s=cc.instantiate(this.mgr.dict.carPrefab.getChildByName("04"+a+"-0")),this.node.addChild(s),s.position=cc.v2(this.rightObliquePos.x,this.rightObliquePos.y-99*r),2==a?(h=s.convertToWorldSpaceAR(cc.v2(0,-10)),d=s.parent.convertToNodeSpaceAR(h),s.position=d):1==a&&(h=s.convertToWorldSpaceAR(cc.v2(0,-20)),d=s.parent.convertToNodeSpaceAR(h),s.position=d),s.path=1,s.getComponent(i.default).rightObliqueCar=!0,this.rightCarArr.push(s))},e.prototype.getLen=function(){for(var t=this.mgr.randomNum(0,2);!this.carAmount[t]&&0!=this.carAmount.reduce(function(t,e){return t+e},0);)t=this.mgr.randomNum(0,2);return this.carAmount[t]-=1,t},e.prototype.carMove=function(t){var e=this;if(null!=t.carSquareCol||null!=t.carSquareRow){this.isAnim=!0;for(var o=t.carSquareCol,i=t.carSquareRow,n=(t.height,0);n<this.carArr.length;n++)for(var r=0;r<this.carArr[0].length;r++)this.carArr[n][r]&&this.carArr[n][r].carSquareCol==o&&cc.tween(this.carArr[n][r]).by(.3,{y:this.distance+this.verticalDistance}).start();this.hideCarArr.length?this.scheduleOnce(function(){var t=e.hideCarArr.shift();if(t.position,console.log("\u540e\u9762\u8f66\u8865\u5145"),t.carSquareCol=o,t.carSquareRow=i,cc.tween(t).to(.3,{position:cc.v2(e.startPos.x+o*e.horizontalDistance,e.startPos.y-2*(e.distance+e.verticalDistance))}).call(function(){t.obliqueHead=!1,console.log("this.carArr[carSquareRow][carSquareCol]",i,o),e.carArr[i][o]=t}).start(),e.surplusAmount-=1,e.mgr.dict.queueAmount.getComponent(cc.Label).string=""+e.surplusAmount,e.hideCarArr.length>0)for(var n=function(t){var o=e.hideCarArr[t];0==t&&(o.opacity=255),cc.tween(o).by(.3,{y:e.distance+e.verticalDistance}).call(function(){t==e.hideCarArr.length-1?(e.isAnim=!1,console.log("isAnim-\u7ed3\u675f")):0==t&&(console.log("\u8f66\u5934"),o.obliqueHead=!0)}).start()},r=0;r<e.hideCarArr.length;r++)n(r);else e.isAnim=!1},.4):this.isAnim=!1}},__decorate([r],e)}(cc.Component));o.default=a,cc._RF.pop()},{"./Level-249667_carItem":"Level-249667_carItem"}],"Level-249667_personItem":[function(t,e,o){"use strict";cc._RF.push(e,"d477f/1J1xGmL9svfSYkXxw","Level-249667_personItem");var i=cc._decorator,n=i.ccclass,r=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.personColor=null,e.dir=0,e.colorImgName=null,e.dirImgName=null,e.isMoving=!1,e.isThief=!1,e}return __extends(e,t),__decorate([n],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],"Level-249667_turntable":[function(t,e,o){"use strict";cc._RF.push(e,"00c5acbTbJFJI3NT/VXvQ6w","Level-249667_turntable");var i=t("../../scripts/AudioManager"),n=t("../../scripts/LimitRepeat"),r=t("./Collision"),a=t("./Level-249667_busConfig"),s=t("./Level-249667_carItem"),c=cc._decorator,l=c.ccclass,h=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pressSpriteFrame=null,e.oldSpriteFrame=null,e.mgr=null,e.cars=[],e.amount=0,e.isTouch=!1,e}return __extends(e,t),e.prototype.onLoad=function(){this.oldSpriteFrame=this.node.getChildByName("rotateBtn").getComponent(cc.Sprite).spriteFrame,this.node.getChildByName("pos").active=!1,this.node.getChildByName("rotateBtn").on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.getChildByName("rotateBtn").on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.getChildByName("rotateBtn").on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this),this.node.getComponent(r.default).onCollisionEnter=this.onCollisionEnter.bind(this)},e.prototype.onCollisionEnter=function(t,e){if(t.node.parent!=e.node){if(!t.node.canCollision)return;var o=t.node.parent,n=o.getComponent(s.default);if(!n.mgr)return;console.log("\u649e\u5230"),i.Audio.getEffectMute()||n.mgr.playLevelSound("Crash"),n.mgr.hit(o),n.carState=a.CarState.Idle,n.node.isCarPark&&(n.node.isWen=!0),n.node.stopAllActions(),cc.tween(n.node).to(.15,{position:n.oldPos}).call(function(){n.isCanClick=!0,n.isTransportCar&&(n.mgr.isTransportCarMove=!0)}).start();var r=n.nextCar;r&&(r.stopAllActions(),cc.tween(r).to(.15,{position:r.getComponent(s.default).oldPos}).start())}},e.prototype.init=function(t){this.mgr=t;for(var e=0;e<this.node.children.length;e++){var o=this.node.children[e];if(o.zIndex=e,o.childrenCount>0&&"pos"!=o.name){this.cars.push(o),o.getComponent(s.default).isTurntableCar=!0;for(var i=0;i<this.node.getChildByName("pos").children.length;i++){var n=this.node.getChildByName("pos").children[i],r=n.parent.convertToWorldSpaceAR(n.position),a=o.getChildByName("car").getComponent(cc.PolygonCollider);cc.Intersection.pointInPolygon(r,this.mgr.getWPosByPolygon(a))&&(o.getComponent(s.default).turntablePosIndex=Number(n.name),this.correctCarPos(n,o))}}}},e.prototype.correctCarPos=function(t,e){var o=t.convertToWorldSpaceAR(cc.v2(0,e.height/2)),i=e.parent.convertToNodeSpaceAR(o);e.position=i},e.prototype.getCars=function(){return this.cars},e.prototype.touchStart=function(){var t=this;if(!this.mgr.isRemove&&!this.isTouch){this.isTouch=!0,this.amount=0,this.node.getChildByName("rotateBtn").getComponent(cc.Sprite).spriteFrame=this.pressSpriteFrame;var e=this.cars.length;this.mgr.isRotateCreate=!0;for(var o=0;o<e;o++){var i=this.cars[o];if(i&&i.getComponent(s.default)){var n=i.getComponent(s.default).turntablePosIndex,r=n+2;6==n&&(r=0),7==n&&(r=1),this.changeCarByTurntable(o,i,r,function(){if(t.amount+=1,t.amount>=e){t.mgr.updateTurntableCar(),t.mgr.updateCarWeight();for(var o=0;o<t.node.children.length;o++){var i=t.node.children[o];i.childrenCount>0&&"pos"!=i.name?i.getComponent(s.default).turntablePosIndex<=3?i.zIndex=i.getComponent(s.default).turntablePosIndex:i.zIndex=i.getComponent(s.default).turntablePosIndex+2:"column"==i.name?i.zIndex=4:"rotateBtn"==i.name&&(i.zIndex=5)}t.mgr.isRotateCreate=!1}})}}}},e.prototype.changeCarByTurntable=function(t,e,o,i){var n,r,c,l,h=this,d=e.getComponent(s.default).colorImgName,u=e.getComponent(s.default).lenImgName,p=e.parent.getChildByName("pos");switch(o){case a.TurntablePosDir.LeftTop:c=4,r="04"+u+"-0";break;case a.TurntablePosDir.Top:c=2,r="02"+u;break;case a.TurntablePosDir.RightTop:c=4,r="04"+u+"-1";break;case a.TurntablePosDir.Right:c=1,r="01"+u+"-1";break;case a.TurntablePosDir.RightBottom:c=5,r="05"+u+"-1";break;case a.TurntablePosDir.Bottom:c=3,r="03"+u;break;case a.TurntablePosDir.LeftBottom:c=5,r="05"+u+"-0";break;case a.TurntablePosDir.Left:c=1,r="01"+u+"-0"}if((n=cc.instantiate(this.mgr.dict.carPrefab.getChildByName(r))).active=!1,this.node.addChild(n),n.getComponent(s.default).mgr=this.mgr,n.getComponent(s.default).colorImgName=d,n.getComponent(s.default).lenImgName=u,n.getComponent(s.default).dirImgName=c,n.getComponent(s.default).carColor=e.getComponent(s.default).carColor,n.getComponent(s.default).isTurntableCar=!0,n.getComponent(s.default).turntablePosIndex=o,this.mgr.isDebug){var f=new cc.Node;f.name="path",f.color=cc.Color.WHITE,f.addComponent(cc.Label),n.addChild(f),f.position=cc.v2(-13.105,-26.21)}var g=p.children[o].convertToWorldSpaceAR(cc.v2(0,n.height/2)),m=n.parent.convertToNodeSpaceAR(g);n.position=m;var v=""+d+c+u;l="texture/"+this.mgr.folder+"/"+this.mgr.folder+"_"+v,cc.resources.load(l,function(o,r){e.destroy(),o||(r&&(n.getChildByName("car").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(r)),n.active=!0,h.cars[t]=n,i())})},e.prototype.load=function(t,e,o){return new Promise(function(i){cc.resources.load(t,function(t,n){e.destroy(),n&&(o.getChildByName("car").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n)),o.active=!0,i(1)})})},e.prototype.touchEnd=function(){this.isTouch=!1,this.node.getChildByName("rotateBtn").getComponent(cc.Sprite).spriteFrame=this.oldSpriteFrame},__decorate([h(cc.SpriteFrame)],e.prototype,"pressSpriteFrame",void 0),__decorate([n.LimitRepeat(.3)],e.prototype,"touchStart",null),__decorate([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../scripts/AudioManager":"AudioManager","../../scripts/LimitRepeat":"LimitRepeat","./Collision":"Collision","./Level-249667_busConfig":"Level-249667_busConfig","./Level-249667_carItem":"Level-249667_carItem"}],"Level-249667_uTransport":[function(t,e,o){"use strict";var i;cc._RF.push(e,"caaabhux1pPnb1FyIhYvGtP","Level-249667_uTransport");var n,r=t("./Level-249667_carItem"),a=cc._decorator,s=a.ccclass;a.property,(n=i||(i={}))[n.Stop=0]="Stop",n[n.Down=1]="Down",n[n.Up=2]="Up",n[n.Left=3]="Left",n[n.DownHide=4]="DownHide";var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPos=cc.v2(277,177),e.config=[],e.mgr=null,e.carArr=[],e.distance=140,e.horizontalDistance=85,e.carAmount=0,e.isStart=!1,e.speed=50,e.isTransportCarMove=!0,e}return __extends(e,t),e.prototype.init=function(t,e){var o=this;this.config=t,this.mgr=e,this.carAmount=this.config.length,this.mgr.dict.uTransportAmount.getComponent(cc.Label).string=""+this.carAmount;for(var n=0;n<this.config.length;n++){var a=this.config[n],s=cc.instantiate(this.mgr.dict.carPrefab.getChildByName("01"+a+"-0"));this.node.addChild(s),s.getComponent(r.default).isUTransportCar=!0,s.getComponent(r.default).path=99,s.uTransportState=i.Stop,s.position=cc.v2(this.startPos.x,this.startPos.y+70*n),this.updatePos(a,s),this.carArr.push(s),s.opacity=0}this.scheduleOnce(function(){switch(console.log("len",o.carArr[0].getComponent(r.default).lenImgName),o.carArr[0].getComponent(r.default).lenImgName){case 1:o.carArr[0].x=o.startPos.x+23;break;case 2:o.carArr[0].x=o.startPos.x+7}o.carArr[0].opacity=255,o.carArr[0].uTransportState=i.Down;for(var t=0;t<o.carArr.length;t++){var e=o.carArr[t];0!=t&&(e.uTransportState=i.DownHide)}o.isStart=!0},.5)},e.prototype.reduceUpdate=function(){this.carAmount-=1,this.mgr.dict.uTransportAmount.getComponent(cc.Label).string=""+this.carAmount},e.prototype.updatePos=function(t,e){if(2==t){var o=e.convertToWorldSpaceAR(cc.v2(0,-10)),i=e.parent.convertToNodeSpaceAR(o);e.position=i}else 1==t&&(o=e.convertToWorldSpaceAR(cc.v2(0,-20)),i=e.parent.convertToNodeSpaceAR(o),e.position=i)},e.prototype.update=function(t){if(this.isStart&&this.isTransportCarMove)for(var e=0;e<this.carArr.length;e++)if(this.carArr[e]&&this.carArr[e].active){var o=this.carArr[e];if(o.uTransportState==i.Down)o.y-=this.speed*t,o.y<=-345&&(o.uTransportState=i.Left,this.changeCar(e,o));else if(o.uTransportState==i.DownHide)o.y-=this.speed*t,o.y<=this.startPos.y&&(o.opacity=255,o.uTransportState=i.Down);else if(o.uTransportState==i.Left)o.x-=this.speed*t,o.x<=-276&&(o.uTransportState=i.Up,this.changeCar(e,o));else if((o.uTransportState=i.Up)&&(o.y+=this.speed*t,o.y>=this.startPos.y)){var n=this.filterCar(o);n?(o.uTransportState=i.DownHide,this.changeCar(e,o,n.position.y+70)):(o.opacity=255,o.uTransportState=i.Down,this.changeCar(e,o))}}},e.prototype.stop=function(t){this.isTransportCarMove=!1,this.unschedule(this.setTransportCarMove),this.scheduleOnce(this.setTransportCarMove,1),this.mgr.checkHasCollision(t)||this.mgr.addTailGasSpine(t)},e.prototype.setTransportCarMove=function(){this.isTransportCarMove=!0},e.prototype.filterCar=function(t){for(var e=[],o=0;o<this.carArr.length;o++){var n=this.carArr[o];n&&n!=t&&n.uTransportState==i.DownHide&&e.push(n)}return 0==e.length?null:e.reduce(function(t,e){return(t.y||0)>(e.y||0)?t:e})},e.prototype.changeCar=function(t,e,o){var n,a,s,c=this;this.carArr[t]=null;var l=e.getComponent(r.default).colorImgName,h=e.getComponent(r.default).lenImgName;if(e.uTransportState==i.Left?(n=2,(a=cc.instantiate(this.mgr.dict.carPrefab.getChildByName("02"+h))).position=cc.v2(351,-345)):e.uTransportState==i.Up?(n=1,(a=cc.instantiate(this.mgr.dict.carPrefab.getChildByName("01"+h+"-1"))).position=cc.v2(-276,-400)):e.uTransportState==i.Down?(n=1,(a=cc.instantiate(this.mgr.dict.carPrefab.getChildByName("01"+h+"-0"))).position=this.startPos):e.uTransportState==i.DownHide&&(n=1,(a=cc.instantiate(this.mgr.dict.carPrefab.getChildByName("01"+h+"-0"))).position=cc.v2(this.startPos.x,o),a.opacity=0),a.uTransportState=e.uTransportState,a.active=!1,this.node.addChild(a),this.updatePos(h,a),a.getComponent(r.default).mgr=this.mgr,a.getComponent(r.default).colorImgName=l,a.getComponent(r.default).lenImgName=h,a.getComponent(r.default).dirImgName=n,a.getComponent(r.default).carColor=e.getComponent(r.default).carColor,a.getComponent(r.default).isUTransportCar=!0,a.getComponent(r.default).path=99,this.mgr.isDebug){var d=new cc.Node;d.name="path",d.color=cc.Color.WHITE,d.addComponent(cc.Label),a.addChild(d),d.position=cc.v2(-13.105,-26.21)}var u=""+l+n+h;s="texture/"+this.mgr.folder+"/"+this.mgr.folder+"_"+u,cc.resources.load(s,function(o,i){e.destroy(),o||(i&&(a.getChildByName("car").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(i)),a.active=!0,c.carArr[t]=a)})},__decorate([s],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./Level-249667_carItem":"Level-249667_carItem"}],"Level-287490_boxItem":[function(t,e,o){"use strict";cc._RF.push(e,"f5bcdoYfqFOFqCToNE6a3PW","Level-287490_boxItem");var i=t("./LevelUtil"),n=t("./Level-287490_config"),r=t("./Level-287490_waitItem"),a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ctl=null,e.layer=0,e.index=0,e.colorType=null,e.posCount=0,e.boxType="h",e.state=n.BoxState.Idle,e.coverCount=0,e.putCount=0,e.waitNode=null,e.isAnim=!1,e.speed=1e3,e}return __extends(e,t),e.prototype.init=function(t,e){var o=e.name,i=e.layer,n=e.index,r=e.x,a=e.y;this.ctl=t,this.layer=i,this.index=n,this.node.position=cc.v3(r,a,0);var s=o.split("_");this.posCount=Number(s[0]),this.boxType=s[1],this.node.zIndex=100*i+n},e.prototype.setColor=function(t,e){this.colorType=t,this.node.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("f28749_"+n.BoxImageName[this.node.name]+"0"+(t+1))},e.prototype.move=function(t){var e=this;this.isAnim=!0,this.waitNode=t,this.waitNode.getComponent(r.default).placeBox=this.node,this.state=n.BoxState.OnDesk;var o=i.default.convertPosition(this.waitNode,this.node);cc.tween(this.node).to(.2,{position:cc.v3(o.x,o.y,0)}).call(function(){e.isAnim=!1;var t=n.BoxOpenImageName[e.node.name]+e.colorType+1;e.node.getComponent(cc.Sprite).spriteFrame=e.ctl.mgr.boxAtlas.getSpriteFrame("f28749_"+t),e.ctl.mgr.checkDrinkMove()}).start()},e.prototype.getPosNode=function(){for(var t=0;t<this.node.children.length;t++){var e=this.node.children[t];if(!e.active)return e}return null},__decorate([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{"./Level-287490_config":"Level-287490_config","./Level-287490_waitItem":"Level-287490_waitItem","./LevelUtil":"LevelUtil"}],"Level-287490_config":[function(t,e,o){"use strict";var i;cc._RF.push(e,"9ba9a+AATxOvYGe2XJdEySZ","Level-287490_config"),o.GameState=o.DrinkPosArr=o.ColorType=o.ColorName=o.DrinkState=o.BoxOpenImageName=o.BoxImageName=o.BoxState=o.BoxSpineAnimation=o.BoxName=void 0,o.BoxName={"2-2":"4_v","2-2-2":"4_h","3-2":"6_v","3-2-2":"6_h","4-2":"8_v","4-2-2":"8_h"},o.BoxSpineAnimation={4:"1",6:"2",8:"3"},(i=o.BoxState||(o.BoxState={}))[i.Idle=0]="Idle",i[i.OnDesk=1]="OnDesk",i[i.Packaged=2]="Packaged",o.BoxImageName={"4_v":"1","4_h":"2","6_v":"3","6_h":"4","8_v":"5","8_h":"6"},o.BoxOpenImageName={"4_v":1100,"4_h":1100,"6_v":1300,"6_h":1300,"8_v":1500,"8_h":1500},function(t){t[t.Idle=0]="Idle",t[t.Packaged=1]="Packaged"}(o.DrinkState||(o.DrinkState={})),o.ColorName=["\u7ea2\u82720","\u7d2b\u82721","\u7c89\u82722","\u9ec4\u82723","\u68d5\u82724","\u7eff\u82725","\u6d45\u84dd\u82726","\u84dd\u82727"],function(t){t[t.Red=0]="Red",t[t.Purple=1]="Purple",t[t.Pink=2]="Pink",t[t.Yellow=3]="Yellow",t[t.Brown=4]="Brown",t[t.Green=5]="Green",t[t.LightBlue=6]="LightBlue",t[t.Blue=7]="Blue"}(o.ColorType||(o.ColorType={})),o.DrinkPosArr=[[219.21,163.03],[219.21,119.03],[219.21,75.03],[219.21,31.03],[164.71,31.03],[110.21,31.03],[55.71,31.03],[1.21,31.03],[-53.29,31.03],[-107.79,31.03],[-162.29,31.03],[-216.79,31.03],[-216.79,-12.97],[-216.79,-56.97],[-162.29,-56.97],[-107.79,-56.97],[-53.29,-56.97],[1.21,-56.97],[55.71,-56.97],[110.21,-56.97],[164.71,-56.97],[219.21,-56.97],[219.21,-100.97],[219.21,-144.97],[164.71,-144.97],[110.21,-144.97],[55.71,-144.97],[1.21,-144.97],[1.21,-194.97]],function(t){t[t.None=0]="None"}(o.GameState||(o.GameState={})),cc._RF.pop()},{}],"Level-287490_containerControl":[function(t,e,o){"use strict";cc._RF.push(e,"042d9c603NG8JyHDrds8I2x","Level-287490_containerControl");var i=t("./LevelUtil"),n=t("./Level-287490_boxItem"),r=t("./Level-287490_config"),a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mgr=null,e.boxData=[],e.boxMap=new Map,e.boxQueue=[],e.lastBoxColorType=-1,e.boxColorGroup={},e.isAnim=!1,e}return __extends(e,t),e.prototype.init=function(t){var e=this;this.mgr=t;var o=this.mgr.levelData.boxConfig;this.mgr.levelData.box_config_editor.split("*")[1].split("#").forEach(function(t){var o=t.split("_");e.boxData.push({name:r.BoxName[o[0]],layer:Number(o[1]),index:Number(o[2]),x:Number(o[3]),y:Number(o[4])})}),this.boxData.reverse(),this.boxData.forEach(function(t){e.boxMap.get(t.layer)||e.boxMap.set(t.layer,[])}),console.log("\u76d2\u5b50\u6570\u636e",this.boxData),this.boxData.forEach(function(t){return e.createBox(t)}),this.boxMap.forEach(function(t){return t.forEach(function(t){return e.boxQueue.push(t)})});for(var a={},s=0;s<this.boxQueue.length;s++)for(var c=Math.round((s+1)/this.boxQueue.length*100),l=0;l<o.length;l++){var h=o[l][0],d=o[l][1];if(c<=h){for(var u=this.mgr.randomNum(d[0]-1,d[1]-1),p=this.mgr.colorType[u];p==this.lastBoxColorType;)u=this.mgr.randomNum(d[0]-1,d[1]-1),p=this.mgr.colorType[u];this.lastBoxColorType=p,this.boxQueue[s].getComponent(n.default).setColor(p,this.mgr.boxAtlas),a[p]||(a[p]=[]),a[p].push(this.boxQueue[s].getComponent(n.default).posCount);break}}console.log("\u6bcf\u79cd\u989c\u8272\u6570\u91cf",a);var f=function(t){var o=[];a[t].forEach(function(t){for(var i=[],n=0;n<t;){var r=e.mgr.randomNum(1,t/2);if((n+=r)<=t)i.push(r);else{var a=t-(n-=r);i.push(a),n+=a}}i.forEach(function(t){return o.push(t)})});var i=Number(t);g.boxColorGroup[i]=[],o.forEach(function(t){return e.boxColorGroup[i].push(Number(t))})},g=this;for(var m in a)f(m);console.log("\u5f00\u59cb\u5207\u7247\u7ed3\u679c",i.default.deepCopy(this.boxColorGroup)),this.updateBoxState(),this.playStartAnim()},e.prototype.playStartAnim=function(){var t=this,e=__spreadArrays(this.node.children);e.sort(function(t,e){return t.y+1e3*t.getComponent(n.default).layer-(e.y+1e3*e.getComponent(n.default).layer)}).forEach(function(o,i){var n=cc.winSize.height/2+o.width,r=o.y;o.y=n,cc.tween(o).delay(.02*i).to(.8,{y:r}).by(.1,{y:-5}).by(.1,{y:8}).by(.1,{y:-3}).call(function(){i==e.length-1&&(t.isAnim=!0)}).start()})},e.prototype.createBox=function(t){var e=t.name,o=t.layer,i=(t.index,t.x,t.y,this.mgr.prefabRoot.getChildByName(e)),r=cc.instantiate(i);r.parent=this.node,r.getComponent(n.default).init(this,t),this.mgr.drinkCount+=r.getComponent(n.default).posCount;var a=this.boxMap.get(o);a.push(r),this.boxMap.set(o,a)},e.prototype.updateBoxState=function(){var t=this,e=[];this.boxMap.forEach(function(t,o){e.push(o)});for(var o=function(o){var a=e[o],s=i.boxMap.get(a);0===o?s.forEach(function(t){t.getComponent(n.default).state==r.BoxState.Idle&&(t.getComponent(n.default).coverCount=1)}):s.forEach(function(i){if(i.getComponent(n.default).state==r.BoxState.Idle){i.getComponent(n.default).coverCount=1;for(var a=t.mgr.getBoxBoundingBox(i),s=o-1;s>=0;s--){var c=e[s];t.boxMap.get(c).forEach(function(e){if(e.getComponent(n.default).state==r.BoxState.Idle){var o=t.mgr.getBoxBoundingBox(e);a.intersects(o)&&(i.getComponent(n.default).coverCount+=e.getComponent(n.default).coverCount)}})}}}),s.forEach(function(t){t.active&&(1===t.getComponent(n.default).coverCount?t.color=cc.Color.WHITE:t.color=cc.color().fromHEX("#828282"))})},i=this,a=0;a<e.length;a++)o(a)},e.prototype.getBoxGroup=function(t,e){if(void 0===e&&(e=-1),e<0)return this.boxColorGroup[t].shift()},e.prototype.checkHasItemByColor=function(t){return!!this.boxColorGroup[t]&&!!this.boxColorGroup[t].length},__decorate([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{"./Level-287490_boxItem":"Level-287490_boxItem","./Level-287490_config":"Level-287490_config","./LevelUtil":"LevelUtil"}],"Level-287490_drinkItem":[function(t,e,o){"use strict";cc._RF.push(e,"c0db9JsXfREWp6Z20bey7FX","Level-287490_drinkItem");var i=t("./Level-287490_boxItem"),n=t("./Level-287490_config"),r=cc._decorator,a=r.ccclass,s=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mgr=null,e.targetPosIndex=-1,e.colorType=null,e.currentPosIndex=-1,e.state=n.DrinkState.Idle,e.delayMoveTime=0,e.isAnim=!1,e.speed=1e3,e}return __extends(e,t),e.prototype.init=function(t,e,o){var i=this;this.mgr=t,this.node.position=cc.v3(219.21,208.03),this.currentPosIndex=this.mgr.drinkPosArr.length,this.targetPosIndex=o,this.colorType=e.color,this.node.zIndex=this.mgr.drinkPosArr.length-this.targetPosIndex,this.delayMoveTime=54.5/this.speed,this.node.getComponent(cc.Sprite).spriteFrame=this.mgr.drinkAtlas.getSpriteFrame("f28749_1"+(this.colorType+1)),this.targetPosIndex>=this.mgr.drinkPosArr.length||this.scheduleOnce(function(){i.move()},this.delayMoveTime*this.targetPosIndex)},e.prototype.move=function(){var t=this;this.isAnim=!0;var e=this.mgr.drinkPosArr[this.currentPosIndex-1],o=this.node.position.sub(cc.v3(e[0],e[1])).mag();cc.tween(this.node).to(o/this.speed,{position:cc.v3(e[0],e[1])}).call(function(){t.currentPosIndex-=1,t.currentPosIndex!=t.targetPosIndex?t.move():0==t.currentPosIndex&&(console.log("\u5230\u4f4d"),t.isAnim=!1,t.mgr.isReady=!0)}).start()},e.prototype.moveToBox=function(t){var e,o,r,a=this;this.isAnim=!0,this.state=n.DrinkState.Packaged;var s=t.getComponent(i.default).getPosNode();s&&(e=s.parent.convertToWorldSpaceAR(s.position),o=this.node.parent.convertToNodeSpaceAR(e),r=this.node.position.sub(o).mag()),cc.tween(this.node).to(r/this.speed,{position:o}).call(function(){var t=a.node.getComponent(cc.Sprite).spriteFrame.name;s.getComponent(cc.Sprite).spriteFrame=a.mgr.drinkAtlas.getSpriteFrame(t+"-1"),s.active=!0,a.node.destroy()}).start()},__decorate([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{"./Level-287490_boxItem":"Level-287490_boxItem","./Level-287490_config":"Level-287490_config"}],"Level-287490_gameControl":[function(t,e,o){"use strict";cc._RF.push(e,"4b7eb/QwuVBsYoVlJy/xl73","Level-287490_gameControl");var i=t("./BrainLevelBase"),n=t("./LevelUtil"),r=t("./Level-287490_boxItem"),a=t("./Level-287490_config"),s=t("./Level-287490_containerControl"),c=t("./Level-287490_drinkItem"),l=t("./Level-287490_waitItem"),h=cc._decorator,d=h.ccclass,u=h.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boxAtlas=null,e.drinkAtlas=null,e.drinkRoot=null,e.drinkShadowRoot=null,e.waitRoot=null,e.boxRoot=null,e.prefabRoot=null,e.reviveStarSpine=null,e.progress=null,e.containerControl=null,e.isReady=!1,e.colorType=[],e.levelData=null,e.boxData=[],e.boxMap=new Map,e.drinkPosArr=[],e.boxQueue=[],e.drinkQueue=[],e.lastBoxColorType=-1,e.drinkCount=0,e.boxColorGroup={},e.isAnim=!1,e}return __extends(e,t),e.prototype.changeBg=function(){},e.prototype.onLoad=function(){this.changeBg(),t.prototype.onLoad.call(this),this.initNode()},e.prototype.initNode=function(){this.drinkRoot=this.dict.drinkRoot,this.drinkShadowRoot=this.dict.drinkShadowRoot,this.waitRoot=this.dict.waitRoot,this.boxRoot=this.dict.boxRoot,this.prefabRoot=this.dict.prefabRoot,this.reviveStarSpine=this.dict.reviveStarSpine.getComponent(sp.Skeleton),this.progress=this.dict.progress.getComponent(cc.Label);var t=cc.view.getFrameSize();t.width,t.height},e.prototype.onLevelReady=function(){this.initData(),this.initWait(),this.containerControl=this.boxRoot.getComponent(s.default),this.containerControl.init(this),this.initDrink(),this.initEvent()},e.prototype.getWaitEmptyNode=function(){for(var t=[],e=0;e<this.waitRoot.childrenCount;e++){var o=this.waitRoot.children[e];o.getComponent(l.default).placeBox||o.getChildByName("video")||t.push(o)}return t},e.prototype.initEvent=function(){var t=this,e=null;n.default.touchEvent(this.dict.bg,{sFunc:function(o){if(t.isAnim&&t.isReady){t.playClickSound();var i=o.getLocation();if(e=t.getTouchTarget(i)){if(e.getComponent(r.default).coverCount>1)return e.runAction(t.shackAction(.1,2));var n=t.getWaitEmptyNode()[0];if(!n)return e.runAction(t.shackAction(.1,2));if(e.getComponent(r.default).isAnim)return;e.getComponent(r.default).move(n),t.updateBoxState()}}}})},e.prototype.getTouchTarget=function(t){for(var e=[],o=0;o<this.boxRoot.children.length;o++){var i=this.boxRoot.children[o];i.getComponent(r.default).state==a.BoxState.Idle&&i.getBoundingBoxToWorld().contains(t)&&e.push(i)}return e.sort(function(t,e){return e.getComponent(r.default).layer-t.getComponent(r.default).layer||e.getComponent(r.default).index-t.getComponent(r.default).index}),e[0]},e.prototype.shackAction=function(t,e){var o=cc.moveBy(t,e,e),i=cc.moveBy(t,-e,-e),n=cc.moveBy(.8*t,.8*e,.8*e),r=cc.moveBy(.8*t,.8*-e,.8*-e),a=cc.moveBy(.6*t,.6*e,.6*e),s=cc.moveBy(.6*t,.6*-e,.6*-e),c=cc.moveBy(.4*t,.4*e,.4*e),l=cc.moveBy(.4*t,.4*-e,.4*-e),h=cc.moveBy(.2*t,.2*e,.2*e),d=cc.moveBy(.2*t,.2*-e,.2*-e);return cc.sequence(o,i,n,r,a,s,c,l,h,d)},e.prototype.initData=function(){this.levelData=n.default.deepCopy(this.levelJSON.json[this.levelID]),this.colorType=Array.from({length:a.ColorName.length},function(t,e){return e}),n.default.fisherYatesShuffle(this.colorType),console.log("\u989c\u8272\u987a\u5e8f",this.colorType),this.drinkPosArr=n.default.deepCopy(a.DrinkPosArr).reverse()},e.prototype.initWait=function(){for(var t=0;t<this.waitRoot.childrenCount;t++)this.waitRoot.children[t].getComponent(l.default).init(this,t)},e.prototype.initBox=function(){},e.prototype.initDrink=function(){for(console.log("\u996e\u6599\u603b\u6570",this.drinkCount),this.progress.string=""+this.drinkCount;this.drinkQueue.length<this.drinkPosArr.length;){var t=this.getDrinkColor(-1);if(!t)break;t.color;for(var e=t.amount,o=0;o<e;o++){var i=cc.instantiate(this.prefabRoot.getChildByName("drinkItem"));i.parent=this.drinkRoot,i.getComponent(c.default).init(this,t,this.drinkQueue.length),this.drinkQueue.push(i)}}},e.prototype.getDrinkColor=function(t){var e=this.getWeight();if(e){for(var o=this.levelData.limitRank,i=Math.min(o,e.length),n=[],r=0,a=0;a<i;a++){var s=e[a].split("_")[1];n.push(Number(s))}n.forEach(function(t){r+=Number(t)});for(var c=this.randomNum(1,r),l=0,h=0,d=0;d<n.length;d++)if((l+=n[d])>=c&&this.containerControl.checkHasItemByColor(e[d].split("_")[0])){h=d;break}var u=e[h].split("_")[0],p=this.containerControl.getBoxGroup(Number(u),t);return{color:Number(u),amount:Number(p)}}},e.prototype.getWaitAllBox=function(){for(var t=[],e=0;e<this.waitRoot.childrenCount;e++){var o=this.waitRoot.children[e];o.getComponent(l.default).placeBox&&t.push(o.getComponent(l.default).placeBox)}return t},e.prototype.getWeight=function(t){void 0===t&&(t=!1);var e={};this.colorType.forEach(function(t){return e[t]=0});var o=this.levelData.blockWeight;this.boxQueue.forEach(function(t){var i=t.getComponent(r.default);if(i.state==a.BoxState.Idle){var n,s=i.colorType,c=i.coverCount;n=1===c?o[0]:2==c?o[1]:o[2],e[s]+=n*i.posCount}});var i=this.levelData.waitWeight;if(this.getWaitAllBox().forEach(function(t){var o=t.getComponent(r.default),n=o.colorType,a=(o.posCount-o.putCount)*i;e[n]+=a}),t){var n=this.levelData.queueWeight;this.drinkQueue.forEach(function(t){var o=t.getComponent(c.default).colorType,i=n;e[o]-=i})}var s=[];for(var l in e){var h=l+"_"+e[l];s.push(h)}return s&&s.sort(function(t,e){var o=t.split("_"),i=Number(o[1]),n=e.split("_");return Number(n[1])-i}),s},e.prototype.playItemsIn=function(){var t=this,e=__spreadArrays(this.boxRoot.children);e.sort(function(t,e){return t.y+1e3*t.getComponent(r.default).layer-(e.y+1e3*e.getComponent(r.default).layer)}).forEach(function(o,i){var n=cc.winSize.height/2+o.width,r=o.y;o.y=n,cc.tween(o).delay(.02*i).to(.8,{y:r}).by(.1,{y:-5}).by(.1,{y:8}).by(.1,{y:-3}).call(function(){i==e.length-1&&(t.isAnim=!0)}).start()})},e.prototype.randomNum=function(t,e){var o=e-t,i=Math.random();return t+Math.round(i*o)},e.prototype.createBox=function(t){var e=t.name,o=t.layer,i=(t.index,t.x,t.y,this.prefabRoot.getChildByName(e)),n=cc.instantiate(i);n.parent=this.boxRoot,n.getComponent(r.default).init(this,t),this.drinkCount+=n.getComponent(r.default).posCount;var a=this.boxMap.get(o);a.push(n),this.boxMap.set(o,a)},e.prototype.updateBoxState=function(){var t=this,e=[];this.boxMap.forEach(function(t,o){e.push(o)});for(var o=function(o){var n=e[o],s=i.boxMap.get(n);0===o?s.forEach(function(t){t.getComponent(r.default).state==a.BoxState.Idle&&(t.getComponent(r.default).coverCount=1)}):s.forEach(function(i){if(i.getComponent(r.default).state==a.BoxState.Idle){i.getComponent(r.default).coverCount=1;for(var n=t.getBoxBoundingBox(i),s=o-1;s>=0;s--){var c=e[s];t.boxMap.get(c).forEach(function(e){if(e.getComponent(r.default).state==a.BoxState.Idle){var o=t.getBoxBoundingBox(e);n.intersects(o)&&(i.getComponent(r.default).coverCount+=e.getComponent(r.default).coverCount)}})}}}),s.forEach(function(t){t.active&&(1===t.getComponent(r.default).coverCount?t.color=cc.Color.WHITE:t.color=cc.color().fromHEX("#828282"))})},i=this,n=0;n<e.length;n++)o(n)},e.prototype.getBoxBoundingBox=function(t){var e=t.getBoundingBoxToWorld();return cc.rect(e.x,e.y,e.width-6,e.height-6)},e.prototype.checkDrinkMove=function(){var t=this.drinkQueue[0];if(t.getComponent(c.default).state==a.DrinkState.Idle&&!t.getComponent(c.default).isAnim)for(var e=this.getWaitAllBox(),o=0;o<e.length;o++){var i=e[o];if(t.getComponent(c.default).colorType==i.getComponent(r.default).colorType)return this.drinkQueue.shift(),void t.getComponent(c.default).moveToBox(i)}},__decorate([u(cc.SpriteAtlas)],e.prototype,"boxAtlas",void 0),__decorate([u(cc.SpriteAtlas)],e.prototype,"drinkAtlas",void 0),__decorate([d],e)}(i.default);o.default=p,cc._RF.pop()},{"./BrainLevelBase":"BrainLevelBase","./Level-287490_boxItem":"Level-287490_boxItem","./Level-287490_config":"Level-287490_config","./Level-287490_containerControl":"Level-287490_containerControl","./Level-287490_drinkItem":"Level-287490_drinkItem","./Level-287490_waitItem":"Level-287490_waitItem","./LevelUtil":"LevelUtil"}],"Level-287490_waitItem":[function(t,e,o){"use strict";cc._RF.push(e,"25508MJl99JoKklR9LzU7Ic","Level-287490_waitItem");var i=t("./LevelConstant"),n=t("./LevelUtil"),r=cc._decorator,a=r.ccclass,s=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mgr=null,e.placeBox=null,e.posIndex=-1,e}return __extends(e,t),e.prototype.init=function(t,e){var o=this;this.mgr=t,this.posIndex=e,this.node.name="wait_"+e,this.node.getChildByName("video")&&n.default.onClickEvent(this.node,function(){cc.game.emit(i.LEVEL_EVENT.REWARDVIDEO,function(t){0===t&&o.unlockWait()})})},e.prototype.unlockWait=function(){this.node.getChildByName("video").destroy()},__decorate([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{"./LevelConstant":"LevelConstant","./LevelUtil":"LevelUtil"}],"Level-28749_transport":[function(t,e,o){"use strict";cc._RF.push(e,"f9c93/Bn3JKz64/+R7btOvq","Level-28749_transport");var i=t("./Level-28749"),n=cc._decorator,r=n.ccclass,a=n.property,s={1:"2-2",2:"3-2",3:"4-2"},c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.road0=null,e.road1=null,e.isMove=!1,e.isInit=!1,e.currentCarAmount=0,e.speed=50,e.allBox=[],e.distanceInterval=110,e.mgr=null,e.config=[],e}return __extends(e,t),e.prototype.init=function(t,e){this.mgr=t,this.config=e,this.isInit=!0,this.currentCarAmount=e.length,this.node.getChildByName("transportBoxAmount").getComponent(cc.Label).string=this.currentCarAmount.toString()},e.prototype.reduceCarAmount=function(t){var e=this.allBox.indexOf(t);-1!==e&&this.allBox.splice(e,1),t.getChildByName("shadow0")&&t.getChildByName("shadow0").destroy(),this.currentCarAmount-=1,this.node.getChildByName("transportBoxAmount").getComponent(cc.Label).string=this.currentCarAmount.toString()},e.prototype.createBox=function(){for(var t=this.node.convertToWorldSpaceAR(this.node.getChildByName("4-2").position),e=this.mgr.dict.boxLayer.convertToNodeSpaceAR(t),o=this.node.convertToWorldSpaceAR(this.node.getChildByName("3-2").position),i=this.mgr.dict.boxLayer.convertToNodeSpaceAR(o),n=this.node.convertToWorldSpaceAR(this.node.getChildByName("2-2").position),r=this.mgr.dict.boxLayer.convertToNodeSpaceAR(n),a=0;a<this.config.length;a++){var c=this.config[a],l=this.mgr.dict.boxPrefab.getChildByName(s[c]),h=cc.instantiate(l);this.mgr.dict.boxLayer.addChild(h),h.position=e,h.isTransportBox=!0,this.allBox.push(h),h.x=e.x+a*this.distanceInterval,h.y="2-2"==s[c]?r.y:"3-2"==s[c]?i.y:e.y,h.name=l.name,h[this.mgr.m_hierarchy]=1,h[this.mgr.m_index]=1,h.name=l.name,this.mgr.setBoxIndex(h),h.getChildByName("sp").zIndex=0;var d=this.mgr.boxMap.get(1);d.push(h),this.mgr.boxMap.set(1,d);var u=null;h.name.includes("4-2")?(u=cc.instantiate(this.mgr.dict.boxShadow_2)).position=cc.v2(-7,3):h.name.includes("3-2")?(u=cc.instantiate(this.mgr.dict.boxShadow_1)).position=cc.v2(-7,3):(u=cc.instantiate(this.mgr.dict.boxShadow_0)).position=cc.v2(-7,3),u.name="shadow0",u.parent=h,h.children[0].zIndex=2,u.zIndex=1}},e.prototype.update=function(t){if(this.isInit&&this.isMove){this.road0.x-=t*this.speed,this.road1.x-=t*this.speed,this.road0.x<=-(315+this.road0.width)&&(this.road0.x=this.road1.x+this.road0.width),this.road1.x<=-(315+this.road0.width)&&(this.road1.x=this.road0.x+this.road0.width);for(var e=0;e<this.allBox.length;e++){var o=this.allBox[e];if(o&&o[this.mgr.m_state]==i.BoxState.Empty){var n=o.x-t*this.speed;if(n<=-350&&this.getMaxXTransportCar()){var r=this.getMaxXTransportCar().x+this.distanceInterval;n=r<=this.node.getChildByName("4-2").x?this.node.getChildByName("4-2").x:r}o.x=n}}}},e.prototype.getMaxXTransportCar=function(){for(var t=this.allBox[0],e=0;e<this.allBox.length;e++){var o=this.allBox[e];o&&o.x>t.x&&(t=o)}return t},__decorate([a(cc.Node)],e.prototype,"road0",void 0),__decorate([a(cc.Node)],e.prototype,"road1",void 0),__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./Level-28749":"Level-28749"}],"Level-28749":[function(t,e,o){"use strict";var i;cc._RF.push(e,"56335XIFHRHuKgN3o8zcILd","Level-28749"),o.BoxState=void 0;var n,r,a,s,c=t("./BrainLevelBase"),l=t("./LevelConstant"),h=t("./levelReviveHelper"),d=t("./LevelUtil"),u=t("./PoolMgr"),p=t("./Level-28749_transport"),f=cc._decorator,g=f.ccclass;f.property,(n=i||(i={}))[n.none=0]="none",n[n.init=1]="init",n[n.waitTouch=2]="waitTouch",n[n.checkWin=3]="checkWin",n[n.prop_clear=4]="prop_clear",n[n.prop_sort=5]="prop_sort",n[n.over=6]="over";var m={"2-2":[[-15,24],[14,24],[-15,-6],[14,-6]],"3-2":[[-14.5,39],[15,39],[-14.5,9],[15,9],[-14.5,-21],[15,-21]],"4-2":[[-15,54],[13,54],[-15,24],[13,24],[-15,-5.5],[13,-5.5],[-15,-34.5],[13,-34.5]]};(function(t){t[t.None=0]="None",t[t.Empty=1]="Empty",t[t.Occupy=2]="Occupy",t[t.OccupyAnimation=3]="OccupyAnimation",t[t.FinishAnimation=4]="FinishAnimation",t[t.Finish=5]="Finish"})(r=o.BoxState||(o.BoxState={})),function(t){t[t.None=0]="None",t[t.Idle=1]="Idle",t[t.WaitClick=2]="WaitClick",t[t.Wait=3]="Wait",t[t.Box=4]="Box",t[t.Animation=5]="Animation",t[t.Suc=6]="Suc"}(a||(a={})),function(t){t[t.Lock=0]="Lock",t[t.Empty=1]="Empty",t[t.Occupy=2]="Occupy"}(s||(s={}));var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._state=i.waitTouch,e.m_hierarchy=Symbol("m_hierarchy"),e.m_index=Symbol("m_index"),e.m_posIndex=Symbol("m_posIndex"),e.m_id=Symbol("m_id"),e.mTween=Symbol("mTween"),e.m_state=Symbol("m_state"),e.mStartPos=Symbol("mStartPos"),e.m_occupy=Symbol("m_occupy"),e.m_items=Symbol("m_items"),e.m_wait=Symbol("m_wait"),e.m_block=Symbol("m_block"),e.effectLayer=null,e.gridLayer=null,e.itemLayer=null,e.propLayer=null,e.pres=null,e.isDebug=!1,e.bg=null,e.grid_bg=null,e.nodeDict={},e.container=null,e.labProgress=null,e.pre_box=null,e.image=null,e.waitLayer=null,e.boxLayer=null,e.boxSpine=null,e.waitList=[],e.itemFirstPos=null,e.shadowLayer=null,e.pre_item=null,e.time=1.5,e.clearAmount=0,e.lastGood=null,e.guideNodes=[],e.currentGuideNode=null,e.guideText=["\u70b9\u51fb\u76d2\u5b50\u53ef\u4e0a\u53bb\u88c5\u5bf9\u5e94\u989c\u8272\u7684\u996e\u6599","\u5927\u76d2\u5b50\u53ef\u4ee5\u88c58\u676f\u996e\u6599","\u4e2d\u76d2\u5b50\u53ef\u4ee5\u88c56\u676f\u996e\u6599","\u5c0f\u76d2\u5b50\u53ef\u4ee5\u88c54\u676f\u996e\u6599"],e.guidedNodes=[],e.types=[],e.levelTotal=0,e.level_config=null,e.boxDataObjects=[],e.itemPosList=[],e.guideLevelColor=[6,1,4,8],e.boxMap=new Map,e.boxQueue=[],e.boxTypeGroup={},e._canTouch=!1,e.nextNeedAdd2Index=0,e.nextNeedAdd2=[],e.maxBlockIndex=1,e.isCheck=!1,e.drinkArr=[],e.itemQueue=[],e.noAmount=[],e.clearNum=0,e.poolMgr=new u.default,e.nextNeedAdd_new=[],e.isReviving=!1,e.nextNeedAdd=[],e}return __extends(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t},enumerable:!1,configurable:!0}),e.prototype.printData=function(){var t=[];this.dict.gridLayer.children.map(function(e){t.push({x:e.x,y:e.y})}),cc.log(JSON.stringify(t))},e.prototype.changeBg=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(){try{(t=game.currentLevel||1)>40&&(t%=40),console.log("\u6d4b\u8bd5\u4fee\u6539\u80cc\u666f",t,game.currentLevel),t>=31?(console.log("\u7d2b\u8272"),cc.find("game/bg/8",this.node).name="3-1",(e=cc.find("game/container/7=cover",this.node)).name="3-2=cover",e.children[0].active=!1):t>=21?(console.log("\u6d77\u8fb9"),cc.find("game/bg/8",this.node).name="2-1",(e=cc.find("game/container/7=cover",this.node)).name="2-2=cover",e.y-=125,e.children[0].active=!1):t>=11&&(console.log("\u6761\u7eb9"),cc.find("game/bg/8",this.node).name="1-1",(e=cc.find("game/container/7=cover",this.node)).name="1-2=cover",e.children[0].active=!1)}catch(o){return console.log(o),[2]}return[2]})})},e.prototype.createSpine=function(){var t=function(t,e){if(!t.getChildByName(e)){var o=new cc.Node(e);return t.addChild(o),o.addComponent(sp.Skeleton),o.getComponent(sp.Skeleton).premultipliedAlpha=!1,o}},e=cc.find("game/image",this.node);t(e,"good"),t(e,"jiesuo")},e.prototype.startClearTimer=function(){this.clearAmount+=1,this.unschedule(this.timer),this.scheduleOnce(this.timer,this.time);var t=null;if(this.clearAmount>=5?t="animation3":this.clearAmount>=4?t="animation2":this.clearAmount>=3?t="animation1":this.clearAmount>=2&&(t="animation0"),t){console.log("\u6d4b\u8bd5\u6548\u679c");var e=cc.instantiate(this.dict.good);this.node.getChildByName("game").addChild(e),this.lastGood&&this.lastGood.destroy(),this.lastGood=e,e.getComponent(sp.Skeleton).setAnimation(0,t,!1),e.position=cc.v2(),e.y=100}},e.prototype.timer=function(){this.clearAmount=0},e.prototype.createSprite=function(){this.folder||(this.folder="f28749");var t=function(t,e){if(!t.getChildByName(e)){var o=new cc.Node(e);return t.addChild(o),o.addComponent(cc.Sprite),o}},e=(cc.find("game/image",this.node),cc.find("game/pres",this.node));t(e,"20=boxShadow0"),t(e,"21=boxShadow1"),t(e,"22=boxShadow2"),t(e,"28=boxShadow_0"),t(e,"29=boxShadow_1"),t(e,"30=boxShadow_2")},e.prototype.onLoad=function(){this.createSprite(),this.createSpine(),this.changeBg(),t.prototype.onLoad.call(this),this.initLevel(),this.dict.game.active=!1,this.dict.prop_clear_box.x=-88.236,this.dict[9].x=0,this.cwNode.opacity=0,this.dict.shadow.opacity=150},e.prototype.initLevel=function(){this.bg=this.dict.bg,this.itemLayer=this.dict.itemLayer,this.effectLayer=this.dict.effectLayer,this.gridLayer=this.dict.gridLayer,this.labProgress=this.dict.labProgress.getComponent(cc.Label),this.image=this.dict.image,this.waitLayer=this.dict.waitLayer,this.boxLayer=this.dict.boxLayer,this.boxSpine=this.dict.boxSpine,this.pre_item=this.dict.pre_item,cc.view.getFrameSize().width/cc.view.getFrameSize().height<.5&&(this.dict.boxLayer.y-=40,this.dict.transportBg&&(this.dict.transportBg.y-=80,this.dict.transportLayer.y-=80)),this.shadowLayer=this.dict.shadowLayer},e.prototype.init=function(){this.initData(),this.initGridLayer(),this.initWaitLayer(),this.initBoxLayer(),this.initItemLayer(),this.initEvent(),this.initPool(),this.initProgress(),this.dict.game.active=!0,this.dict.game.getComponent(cc.Mask).enabled=!0},e.prototype.handPos=function(){var t=this.currentGuideNode.parent.convertToWorldSpaceAR(this.currentGuideNode.position),e=this.guideNodes.indexOf(this.currentGuideNode);this.dict.handText.getComponent(cc.Label).string=this.guideText[e];var o=this.dict.hand.parent.convertToNodeSpaceAR(t);this.dict.hand.position=o},e.prototype.initData=function(){var t=this,e=d.default.deepCopy(this.levelJSON.json[this.levelID]);if(this.level_config=e,this.types=Array.from({length:8},function(t,e){return e+1}),d.default.fisherYatesShuffle(this.types),e){var o=e.box_config_editor;d.default.deepCopy(o).split("*")[1].split("#").forEach(function(e){var o=e.split("_"),i={name:o[0],hierarchy:Number(o[1]),index:Number(o[2]),x:Number(o[3]),y:Number(o[4])};t.boxDataObjects.push(i)}),this.boxDataObjects.reverse()}this.level_config&&this.level_config.transport&&this.dict.transportLayer.getComponent(p.default).init(this,this.level_config.transport),-28807==this.levelID&&(this.level_config={boxConfig:[[25,[1,4]],[100,[1,6]]],blockWeight:[50,10,1],waitWeight:10,queueWeight:10,limitRank:4,lastTypeWeight:0},this.boxDataObjects=[{name:"3-2-2",hierarchy:1,index:0,x:-50.721,y:112.009},{name:"2-2-2",hierarchy:1,index:1,x:74.796,y:112.009},{name:"4-2",hierarchy:1,index:2,x:-75.404,y:-37.424},{name:"4-2",hierarchy:1,index:3,x:75.1,y:-39.981}]),this.boxDataObjects.forEach(function(e){var o=e.hierarchy;t.boxMap.get(o)||t.boxMap.set(o,[])}),y.forEach(function(e){t.itemPosList.push(cc.v2(e.x,e.y))}),this.itemPosList.reverse()},e.prototype.shuffleArray=function(t){for(var e,o=t.length-1;o>0;o--){var i=Math.floor(Math.random()*(o+1));e=[t[i],t[o]],t[o]=e[0],t[i]=e[1]}return t},e.prototype.initBoxLayer=function(){var t=this;if(this.boxDataObjects.forEach(function(e){t.createBox(e)}),this.level_config.transport&&this.dict.transportLayer.getComponent(p.default).createBox(),this.dict.hand){var e=this.boxLayer;this.guideNodes.push(e.children[3]),this.guideNodes.push(e.children[2]),this.guideNodes.push(e.children[0]),this.guideNodes.push(e.children[1]),this.currentGuideNode=this.guideNodes[0],this.handPos()}var o=this.level_config.boxConfig,i=[];this.boxMap.forEach(function(e){e.forEach(function(e){i.push(e),t.boxQueue.push(e)})});for(var n=Array.from({length:i.length},function(){return 0}),r=n.length,a=function(e,i){var n=o.findIndex(function(t){var o=t[0];return e<=r*o/100});if(n>=0){for(var a=o[n][1],s=[],c=a[0];c<=a[1];c++)s.push(c);s=t.shuffleArray(s);for(var l=d.default.getRandomValueInArray(s);l===i;)l=d.default.getRandomValueInArray(s);return l}},s=-1,c=0;c<n.length;c++)if(0===n[c]){var l=a(c,s);n[c]=l,s=l}var h={};n.forEach(function(e,o){var n=t.types[e-1],r=i[o];-28807==t.levelID&&(n=t.guideLevelColor[o]),t.setBoxData(r,n);var a=t.getBoxOccupyPos(r).length;t.levelTotal+=a,h[n]||(h[n]=[]),h[n].push(a)}),console.log("type_numArr====",h),cc.log("\u996e\u6599\u603b\u6570\uff1a",this.levelTotal);var u=function(e){var o=[];h[e].forEach(function(e){for(var i=[],n=0;n<e;){var r=t.getRandomInteger(1,e/2);if((n+=r)<=e)i.push(r);else{var a=e-(n-=r);i.push(a),n+=a}}i.forEach(function(t){return o.push(t)})});var i=Number(e);f.boxTypeGroup[i]=[],o.forEach(function(e){return t.boxTypeGroup[i].push(Number(e))})},f=this;for(var g in h)u(g);-28807==this.levelID&&(this.nextNeedAdd2=[8,4,6,1,8,4,6,1,8,4],this.boxTypeGroup={1:[1,3],4:[2,4,2],6:[3,3],8:[4,2,2]}),this.updateBoxState(),this.playItemsIn()},e.prototype.addShadow=function(t,e,o){console.log("this.image",this.image);var i=this.image.getChildByName(e),n=cc.instantiate(i);n.name="shadow",n.active=!0,n.parent=this.shadowLayer;var r=t.convertToWorldSpaceAR(o);n.position=n.parent.convertToNodeSpaceAR(r),n.scale=t.scale,n.shadow_target=t,t.shadow_target=n;var a=t.parent.convertToWorldSpaceAR(t.position);n.m_follow_vec=a.sub(r)},e.prototype.playItemsIn=function(){var t=this;this.boxLayer.zIndex=101,this.itemLayer.zIndex=100,this.dict.cover.zIndex=102,this.dict.testLayer.zIndex=103,this.effectLayer.zIndex=104,this.dict.transportLayer&&(this.dict.transportBg.zIndex=99,this.boxLayer.zIndex=101,this.dict.transportLayer.zIndex=102,this.itemLayer.zIndex=100,this.dict.cover.zIndex=103,this.dict.testLayer.zIndex=104,this.effectLayer.zIndex=105);var e=__spreadArrays(this.boxLayer.children);(e=e.filter(function(t){return!t.isTransportBox})).sort(function(e,o){return e.y+1e3*e[t.m_hierarchy]-(o.y+1e3*o[t.m_hierarchy])}).forEach(function(o,i){var n=cc.winSize.height/2+3*o.width,r=o.y;o.y=n,cc.tween(o).delay(.02*i).to(.8,{y:r}).by(.1,{y:-5}).by(.1,{y:8}).by(.1,{y:-3}).call(function(){i==e.length-1&&(t._canTouch=!0,t.boxLayer.zIndex=100,t.itemLayer.zIndex=101,t.dict.cover.zIndex=102,t.dict.testLayer.zIndex=103,t.effectLayer.zIndex=104,t.dict.transportLayer&&(t.dict.transportBg.zIndex=98,t.boxLayer.zIndex=99,t.dict.transportLayer.zIndex=100,t.itemLayer.zIndex=101,t.dict.cover.zIndex=102,t.dict.testLayer.zIndex=103,t.effectLayer.zIndex=104),t.level_config&&t.level_config.transport&&(t.dict.transportLayer.getComponent(p.default).isMove=!0))}).start()})},e.prototype.getBoxCloseSFName=function(t,e){var o=0;switch(t){case"2-2":o=100;break;case"2-2-2":o=200;break;case"3-2":o=300;break;case"3-2-2":o=400;break;case"4-2":o=500;break;case"4-2-2":o=600}return String(o+e)},e.prototype.getBoxOpenSFName=function(t,e){var o=0;switch(t){case"2-2":case"2-2-2":o=100;break;case"3-2":case"3-2-2":o=300;break;case"4-2":case"4-2-2":o=500}var i=o+Number(e)+1e3;return String(i)},e.prototype.getBoxAnimId=function(t){var e=0;switch(t){case"2-2":case"2-2-2":e=1;break;case"3-2":case"3-2-2":e=2;break;case"4-2":case"4-2-2":e=3}return String(e)},e.prototype.createBox=function(t){var e=t.name,o=t.hierarchy,i=t.index,n=t.x,r=t.y,a=this.boxLayer,s=this.dict.boxPrefab.getChildByName(e),c=cc.v2(n,r),l=cc.instantiate(s);l.parent=a,l.position=c,l[this.m_hierarchy]=o,l[this.m_index]=i,l.name=s.name,this.setBoxIndex(l),l.getChildByName("sp").zIndex=0;var h=this.boxMap.get(o);return h.push(l),this.boxMap.set(o,h),l},e.prototype.setBoxData=function(t,e,o){if(void 0===o&&(o=!1),e){var i=e;t[this.m_id]=i,t[this.m_state]=r.Empty,t[this.m_occupy]=0,t[this.m_items]=[],t[this.m_items].length=0,this.setBoxSP(t,this.getBoxCloseSFName(t.name,e))}},e.prototype.setBoxSP=function(t,e){var o=t.getChildByName("sp").getComponent(cc.Sprite);try{o.spriteFrame=game.boxAtlas.getSpriteFrame(this.folder+"_"+e)}catch(i){o.spriteFrame=this.loadSpriteFrame(e)}},e.prototype.setBoxIndex=function(t,e){if(void 0===e&&(e=1),1==e){var o=t[this.m_hierarchy],i=t[this.m_index];t.zIndex=100*o+i}else 2==e?t.zIndex=4e3+this.clearNum:3==e&&(t.zIndex=3e3+this.clearNum)},e.prototype.updateBoxState=function(){var t=this,e=[];this.boxMap.forEach(function(t,o){e.includes(o)||e.push(o)});for(var o=function(o){var n=e[o],a=i.boxMap.get(n);console.log("hierarchyLevels",e),0===o?a.forEach(function(e){e[t.m_state]===r.Empty&&(e[t.m_block]=1)}):a.forEach(function(i){if(i[t.m_state]===r.Empty){i[t.m_block]=1;for(var n=t.getBoxBoundingBox(i),a=o-1;a>=0;a--){var s=e[a];t.boxMap.get(s).forEach(function(e){if(e[t.m_state]===r.Empty){var o=t.getBoxBoundingBox(e);n.intersects(o)&&(i[t.m_block]+=e[t.m_block],i[t.m_block]>=t.maxBlockIndex&&(t.maxBlockIndex=i[t.m_block]))}})}}}),a.forEach(function(e){e.active&&(1===e[t.m_block]?e.getChildByName("sp").color=cc.Color.WHITE:e.getChildByName("sp").color=cc.color().fromHEX("#828282"))})},i=this,n=0;n<e.length;n++)o(n)},e.prototype.getBoxBoundingBox=function(t){var e=t.getChildByName("sp").getBoundingBoxToWorld();return cc.rect(e.x,e.y,e.width-6,e.height-6)},e.prototype.setBoxToWait=function(t,e){var o=this;e&&(e[this.m_state]=s.Occupy,t[this.m_wait]=e),this.addToArray(t,this.waitList),this.boxFly(t,e,function(){o.checkBoxTakeItem(t)||(cc.log("checkIsFail setBoxToWait"),o.checkIsFail())})},e.prototype.checkBoxTakeItem=function(t){if(!t.flySuc)return!1;var e=this.getItemData(t);if(e&&e.item){var o=e.item;return this.isCheck=!0,e.inFirstPos&&(this.deleteFromArray(o,this.itemQueue),this.setItemToBox(o,t,!0),this.itemSupply(),this.updateItemQueue()),!0}return!1},e.prototype.getItemData=function(t){if(0===this.itemQueue.length)return null;var e=this.getBoxOccupyPos(t).length-t[this.m_occupy],o=this.itemQueue[0],i=!1;if(o[this.m_state]===a.Idle&&o[this.m_id]===t[this.m_id]&&e>0&&(i=!0),i){var n=o.position.sub(this.itemFirstPos).mag();return{item:o,inFirstPos:n<5}}return null},e.prototype.clearBox=function(t){var e=this,o=this.getBoxOccupyPos(t).length;t[this.m_state]=r.Finish,t.zIndex=10,t.getChildByName("sp").active=!1;for(var i=t.getChildByName("item");i.childrenCount;)this.putItemToPool(i.children[0]);this.setBoxIndex(t,3);var n=cc.instantiate(this.boxSpine);n.name="spine",n.parent=t,n.position=cc.v2(),n.scale=1.2,n.active=!0;var a=t[this.m_id];this.scheduleOnce(function(){var i=n.getComponent(sp.Skeleton),r="skin"+Number(a);i.setSkin(r);var c=e.getBoxAnimId(t.name);i.timeScale=1.3,i.setAnimation(0,"daiji"+c,!0);var l=function(){d.default.playSpineCallBack(i,"dabao"+c,!1,function(){e.playLevelSound("Full"),e.playEffect(t),e.setClearNum(o),e.startClearTimer(),cc.tween(t).delay(.3).by(.2,{x:1e3}).call(function(){t.active=!1,t.destroy(),t.parent=null,e.checkWin()}).start()}),e.scheduleOnce(function(){e.deleteFromArray(t,e.waitList),t[e.m_wait]&&(t[e.m_wait][e.m_state]=s.Empty,t[e.m_wait]=null)},.1)};t.isClearBox?l():cc.tween(t).by(.1,{y:-150}).call(function(){l()}).start()})},e.prototype.playEffect=function(t){var e=cc.instantiate(this.dict.guangquan);e.parent=this.effectLayer,e.active=!0,e.name="effect",e.position=d.default.convertPosition(t,e),d.default.playSpineCallBack(e,"animation",!1,function(){e.active=!1,e.removeFromParent(!0)})},e.prototype.boxFly=function(t,e,o){var i=this,n=t.getChildByName("item");n||((n=new cc.Node("item")).parent=t,n.position=cc.v2(),n.zIndex=2);var r=t.getChildByName("shadow");r||(t.name.includes("4-2")?(r=cc.instantiate(this.dict.boxShadow2)).position=cc.v2(-13.831,21):t.name.includes("3-2")?(r=cc.instantiate(this.dict.boxShadow1)).position=cc.v2(5-17.906,18.094):(r=cc.instantiate(this.dict.boxShadow0)).position=cc.v2(-21.968,14.023),r.name="shadow",r.parent=t,t.children[0].zIndex=2,r.zIndex=1),e?(this.setBoxIndex(t,2),cc.tween(t).to(.2,{position:d.default.convertPosition(e,t)}).call(function(){t.flySuc=!0;var e=i.getBoxOpenSFName(t.name,t[i.m_id]);i.setBoxSP(t,e),o&&o()}).start()):o&&o()},e.prototype.getBoxOccupyPos=function(t){var e=this.getBoxTypeByName(t.name);return m[e]},e.prototype.getBoxTypeByName=function(t){var e=t.split("-");return e[0]+"-"+e[1]},e.prototype.boxIsEmpty=function(t){return t[this.m_state]===r.Empty},e.prototype.getBoxGroup=function(t,e){void 0===e&&(e=-1),this.boxTypeGroup[t]&&(this.boxTypeGroup[t]=this.filterBoxTypeGroupArr(this.boxTypeGroup[t]));var o=0,n=e;if(e<0)try{o=this.boxTypeGroup[t].shift()}catch(i){}else{for(var r=__spreadArrays(this.boxTypeGroup[t]),a=0;a<r.length;a++){var s=r[a];if(s>=n){r[a]-=n,n=0;break}n-=s,r[a]=0}for(var c=!0;c;)r[0]<=0?r.shift():c=!1;this.boxTypeGroup[t].length=0,this.boxTypeGroup[t]=__spreadArrays(r),o=e}return o},e.prototype.initItemLayer=function(){this.drinkArr=new Array(this.levelTotal).fill(-1);var t=0,e=this.itemPosList.length;for(console.log("\u996e\u6599\uff1a\u521d\u59cb\u5316",e);t<e;){var o=this.getItemType(-1);if(!o)break;for(var i=o.type,n=o.num,r=0;r<n;r++){var a;a=t+r>=e?e-1:t+r,this.createItem(a,Number(i))}t+=n}this.itemFirstPos=this.itemQueue[0].position},e.prototype.itemSupply=function(t){if(void 0===t&&(t=-1),!(this.itemQueue.length>this.itemPosList.length))if(this.nextNeedAdd.length>0){console.log("\u590d\u6d3b","\u996e\u6599\u65b0\u589e");var e=this.nextNeedAdd.shift();this.boxTypeGroup[e][0]-=1,0==this.boxTypeGroup[e][0]&&this.boxTypeGroup[e].shift();for(var o=0;o<1;o++){var i=this.itemPosList.length-1;this.createItem(i,e)}}else{var n=this.getItemType(t);if(n&&n.type&&n.num){e=n.type;var r=n.num;for(o=0;o<r;o++)i=this.itemPosList.length-1,this.createItem(i,e)}}},e.prototype.updateItemQueue=function(t){var e=this;void 0===t&&(t=0);for(var o=this.itemQueue,n=this.itemPosList,r=1,s=function(){if(++r>=o.length){e.state===i.prop_sort&&(e.state=i.waitTouch),e.itemQueue.forEach(function(t){t[e.m_state]=a.Idle}),e.waitList.sort(function(t,o){return e.getBoxOccupyPos(t).length-t[e.m_occupy]-(e.getBoxOccupyPos(o).length-o[e.m_occupy])});for(var t=!1,n=0;n<e.waitList.length;n++){var s=e.waitList[n];if(e.checkBoxTakeItem(s)){t=!0;break}}t||(e.isCheck=!1,e.checkIsFail())}},c=function(e){var i=o[e];if(i.stopAllActions(),cc.tween(i).stop(),e>n.length-1)i.opacity=255,s();else{i.opacity=255;for(var r=[],a=e,c=i[l.m_posIndex]-1;c>=a;c--)r.push(c);r.length&&l.itemMove(i,r,0,function(){s()},t*e)}},l=this,h=0;h<o.length;h++)c(h)},e.prototype.itemMove=function(t,e,o,i,n){var r=this;if(void 0===i&&(i=null),void 0===n&&(n=0),o>=e.length)i&&i();else{t[this.m_state]=a.Animation;var s=e[o],c=t.position,l=this.itemPosList[s];c.sub(l).mag(),cc.tween(t).delay(n).to(.055,{position:l}).call(function(){n>0&&(n=0),r.setItemIndex(t),t[r.m_posIndex]=s,o+=1,r.itemMove(t,e,o,i)}).start()}},e.prototype.setItemToBox=function(t,e,o){var i=this;if(void 0===o&&(o=!1),t[this.m_state]!=a.Box){var n=this.getBoxOccupyPos(e),s=n.length,c=n[e[this.m_occupy]],l=cc.v2(c[0],c[1]),h=e.getChildByName("item"),d=e.convertToWorldSpaceAR(l),u=t.parent.convertToNodeSpaceAR(d);e[this.m_occupy]++,e[this.m_occupy]>=s&&(e[this.m_occupy]=s,e[this.m_state]=r.FinishAnimation,this.deleteFromArray(e,this.boxQueue)),t[this.m_state]=a.Box,this.setItemIndex(t,2),this.deleteFromArray(t,this.itemQueue);var p,f=t.position,g=u.sub(f).mag()/1e3;t.stopAllActions(),p=u.x>f.x?1:-1;var m=f.add(cc.v2(100*p,150));t.m_shadow.active=!1,console.log("time",g),cc.tween(t).bezierTo(g,f,m,u).call(function(){i.playLevelSound("Get_on");var e=t.getChildByName("sp").getComponent(cc.Sprite),o=10+t[i.m_id];try{var n=game.drinkAtlas;e.spriteFrame=n.getSpriteFrame(i.folder+"_"+o+"-1")}catch(c){var r=i.image.getChildByName(o+"-1").getComponent(cc.Sprite).spriteFrame;e.spriteFrame=r}i.changeParent(t,h)}).to(.1,{scale:1}).call(function(){i.addToArray(t,e[i.m_items]),e[i.m_items].length>=s&&(e.getChildByName("shadow")&&e.getChildByName("shadow").destroy(),i.clearBox(e)),t.stopAllActions()}).start()}},e.prototype.getItemType=function(t){void 0===t&&(t=-1);var e=this.level_config,o=this.getWeight();if(cc.log("\u6743\u91cd\uff1a",o),o.length){for(var i=e.limitRank,n=Math.min(i,o.length),r=[],a=0,s=0;s<n;s++){var c=o[s].split("_")[1];r.push(Number(c))}r.forEach(function(t){a+=Number(t)});for(var l=this.getRandomInteger(1,a),h=0,d=0,u=0;u<r.length;u++)if((h+=r[u])>=l&&this.checkHasItemByColor(o[u].split("_")[0])){d=u;break}var p=o[d].split("_")[0];if(-28807==this.levelID&&(p=this.nextNeedAdd2[this.nextNeedAdd2Index],this.nextNeedAdd2Index+=1,null==p))return null;var f=this.getBoxGroup(Number(p),t);return{type:Number(p),num:Number(f)}}return null},e.prototype.checkHasItemByColor=function(t){return!!this.boxTypeGroup[t]&&!!this.boxTypeGroup[t].length},e.prototype.createItem=function(t,e,o){void 0===o&&(o=null);var i=this.itemPosList[t];o&&i.addSelf(o);var n=String(Number(e)+10),r=this.itemLayer,s=this.poolMgr.get(this.pre_item,"pre_item");s.parent=r,s.position=i,s[this.m_index]=this.itemLayer.childrenCount,s[this.m_state]=a.Idle,s[this.m_id]=e,s[this.m_posIndex]=t,s.name=String(e);var c=s.getChildByName("sp");try{var l=game.drinkAtlas;c.getComponent(cc.Sprite).spriteFrame=l.getSpriteFrame(this.folder+"_"+n)}catch(f){var h=this.image.getChildByName(n);c.getComponent(cc.Sprite).spriteFrame=h.getComponent(cc.Sprite).spriteFrame}this.setItemIndex(s),this.itemQueue.push(s);var d=s.getChildByName("shadow");d.active=!0,d.setPosition(-18,-18),this.changeParent(d,this.shadowLayer),d.m_follow=s;var u=d.parent.convertToWorldSpaceAR(d.position),p=s.parent.convertToWorldSpaceAR(s.position);return d.m_follow_wVec=p.sub(u),s.m_shadow=d,s},e.prototype.setItemIndex=function(t,e){switch(void 0===e&&(e=1),e){case 1:t.zIndex=5e3-t.y;break;case 2:t.zIndex=9999}},e.prototype.getWeight=function(t){var e=this;void 0===t&&(t=!0);var o=this.level_config,i={};this.types.forEach(function(t){return i[t]=0});var n=o.blockWeight;this.boxQueue.forEach(function(t){if(e.boxIsEmpty(t)){var o=t[e.m_id],r=t[e.m_block],a=0;a=1===r?n[0]:2==r?n[1]:n[2],t.isTransportBox&&(a=n[1]),i[o]+=a*e.getBoxOccupyPos(t).length}});var r=o.waitWeight;if(this.waitList.forEach(function(t){var o=t[e.m_id],n=(e.getBoxOccupyPos(t).length-t[e.m_occupy])*r;i[o]+=n}),t){var a=o.queueWeight;this.itemQueue.forEach(function(t){var o=t[e.m_id],n=a;i[o]-=n})}var s=[];for(var c in i){var l=c+"_"+i[c];s.push(l)}return s&&s.sort(function(t,e){var o=t.split("_"),i=Number(o[1]),n=e.split("_");return Number(n[1])-i}),s},e.prototype.initWaitLayer=function(){for(var t=this,e=function(e){var i=o.waitLayer.children[e];i.name="wait_"+e;var n=i.getChildByName("video");(null==n?void 0:n.active)?(i[o.m_state]=s.Lock,d.default.onClickEvent(i,function(){n.active&&cc.game.emit(l.LEVEL_EVENT.REWARDVIDEO,function(e){0===e&&t.unlockWait(i)})})):i[o.m_state]=s.Empty},o=this,i=0;i<this.waitLayer.children.length;i++)e(i)},e.prototype.unlockWait=function(t){var e=this;void 0===t&&(t=null),t||(t=this.waitLayer.children.find(function(t){return t[e.m_state]===s.Lock}));var o=t.getChildByName("video");o.active=!1;var i=cc.instantiate(this.dict.jiesuo);i.position=cc.v2(),o.parent.addChild(i),i.getComponent(sp.Skeleton).premultipliedAlpha=!1,i.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),o.removeFromParent(!0),t[this.m_state]=s.Empty},e.prototype.func_check_unlockWait=function(){for(var t=null,e=0;e<this.waitLayer.children.length;e++){var o=this.waitLayer.children[e];o.name=String(e);var i=o.getChildByName("video");if(i&&i.active){t=o;break}}return t},e.prototype.func_unlockWait=function(){var t=this.func_check_unlockWait();t&&this.unlockWait(t)},e.prototype.getWait=function(){for(var t=0;t<this.waitLayer.children.length;t++){var e=this.waitLayer.children[t];if(e.active&&e[this.m_state]===s.Empty)return e}return null},e.prototype.getRandomInteger=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},e.prototype.loadSpriteFrame=function(t){return this.image.getChildByName(t).getComponent(cc.Sprite).spriteFrame},e.prototype.checkIsFail=function(){if(this.state!==i.over){for(var t=0,e=0;e<this.waitLayer.children.length;e++)this.waitLayer.children[e][this.m_state]!==s.Lock&&(t+=1);var o=0;for(e=0;e<this.waitList.length;e++)(a=this.waitList[e])[this.m_state]===r.Occupy&&(o+=1);if(t==o?cc.game.emit("checkTipText",1):t-1==o&&cc.game.emit("checkTipText",0),!this.isCheck&&o===t){var n=!1;for(e=0;e<this.waitList.length;e++){var a=this.waitList[e],c=this.getItemData(a);if(c&&c.item){n=!0;break}}n||this.fail(1)}}},e.prototype.update=function(){this.state!=i.none&&this.updateShadow()},e.prototype.updateShadow=function(){var t=this;this.shadowLayer.children.map(function(e){if(e.active){var o=e.m_follow;if(o&&o.active&&o[t.m_state]!=a.Box){var i=o.parent.convertToWorldSpaceAR(o.position).sub(e.m_follow_wVec),n=e.parent.convertToNodeSpaceAR(i);e.position=n}}})},e.prototype.initGuidence=function(){if(-28391===this.levelID){var t=this.dict.sz;cc.tween(t).to(.2,{scale:.8}).to(.2,{scale:1}).union().repeatForever().start()}},e.prototype.updateGuidence=function(){if(-28391===this.levelID){var t=this.dict.sz;t.active&&(t.active=!1)}},e.prototype.initGridLayer=function(){this.gridLayer.active=!1},e.prototype.getTouchNode=function(t){for(var e=this,o=this.boxLayer.children,i=[],n=0;n<o.length;n++)(s=o[n])[this.m_state]===r.Empty&&(s[this.m_block]>1||s.getBoundingBoxToWorld().contains(t)&&i.push(s));var a=[];for(n=0;n<o.length;n++){var s;(s=o[n]).getBoundingBoxToWorld().contains(t)&&a.push(s)}return!i.length&&a.length&&(a.sort(function(t,o){return o[e.m_index]-t[e.m_index]}),a[0].runAction(this.shackAction(.1,2))),i.length?(i.sort(function(t,o){return o[e.m_index]-t[e.m_index]}),i[0]):null},e.prototype.initEvent=function(){var t=this,e=null;d.default.touchEvent(this.dict.touchNode,{sFunc:function(o){if(t._canTouch&&(t.playClickSound(),t.state===i.waitTouch||t.state===i.prop_clear)){var n=o.getLocation();if(e=t.getTouchNode(n))if(t.state==i.waitTouch){if(t.dict.hand&&t.dict.hand.active&&(t.guidedNodes.push(e),t.currentGuideNode==e)){for(var a=!1,s=0;s<t.guideNodes.length;s++){var c=t.guideNodes[s];if(-1==t.guidedNodes.indexOf(c)){t.currentGuideNode=c,t.handPos(),a=!0;break}}a||(t.dict.hand.active=!1,t.dict.handText.active=!1,t.dict.handText.parent.active=!1)}var l=t.getWait();l?(e[t.m_state]=r.Occupy,t.updateBoxState(),t.setBoxToWait(e,l),e.isTransportBox&&t.dict.transportLayer.getComponent(p.default).reduceCarAmount(e)):e.runAction(t.shackAction(.1,2))}else t.state==i.prop_clear&&(e[t.m_state]=r.Finish,t.updateBoxState(),t.scheduleOnce(function(){cc.game.emit("isRemove",!1)},.2),t.setBoxToPropClear(e),e.isTransportBox&&t.dict.transportLayer.getComponent(p.default).reduceCarAmount(e))}},mFunc:function(){},eFunc:function(){}}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.enterKeyInput,this)},e.prototype.setClearNum=function(t){this.clearNum+=t,this.clearNum<0&&(this.clearNum=0),this.updateProgress()},e.prototype.initProgress=function(){this.clearNum=0,this.updateProgress()},e.prototype.updateProgress=function(){var t=this.levelTotal,e=t-this.clearNum,o=(this.clearNum/t).toFixed(2),i=Number(o);i*=100,(i=Math.floor(i))>100&&(i=100),this.labProgress.string=""+e,cc.game.emit("allPersonAmount",e,t),console.log("allPersonAmount",e,t),game.totalAmount=this.levelTotal,game.remainingAmount=e},e.prototype.checkWin=function(){this.boxLayer.children.some(function(t){return t.active})||this.suc(1)},e.prototype.onLevelReady=function(){this.init()},e.prototype.shackAction=function(t,e){var o=cc.moveBy(t,e,e),i=cc.moveBy(t,-e,-e),n=cc.moveBy(.8*t,.8*e,.8*e),r=cc.moveBy(.8*t,.8*-e,.8*-e),a=cc.moveBy(.6*t,.6*e,.6*e),s=cc.moveBy(.6*t,.6*-e,.6*-e),c=cc.moveBy(.4*t,.4*e,.4*e),l=cc.moveBy(.4*t,.4*-e,.4*-e),h=cc.moveBy(.2*t,.2*e,.2*e),d=cc.moveBy(.2*t,.2*-e,.2*-e);return cc.sequence(o,i,n,r,a,s,c,l,h,d)},e.prototype.suc=function(t){var e=this;void 0===t&&(t=1),cc.log("suc"),this.state!=i.over&&(this.state=i.over,this.scheduleOnce(function(){e.playRight(null,1)},t))},e.prototype.lose=function(t,e,o,n){if(void 0===e&&(e=!0),void 0===n&&(n=1),this.state!=i.over){if(t)if(t instanceof cc.Node){var r=cc.instantiate(t);r.x+=70,r.y-=70,r.parent=t.parent,r.active=!1,e?this.playError(r):this.playErrorOnce(r),r.destroy()}else e?this.playError(t):this.playErrorOnce(t);else e?this.playError():this.playErrorOnce();this.scheduleOnce(function(){o&&o()},n)}},e.prototype.fail=function(t,e){var o=this;void 0===t&&(t=1),void 0===e&&(e=null),cc.log("fail"),this.lose(null,!1,function(){cc.log("levelReviveHelper"),h.default.levelFailEvent("\u662f\u5426\u9700\u8981\u590d\u6d3b",function(){o.func_revive()})}),this.state=i.over},e.prototype.getWordPos=function(t){return t.parent.convertToWorldSpaceAR(t.position)},e.prototype.getDistance=function(t,e){var o=d.default.convertPosition(t,e);return e.position.sub(o).mag()},e.prototype.deleteFromArray=function(t,e){var o=e.indexOf(t);-1!==o&&e.splice(o,1)},e.prototype.addToArray=function(t,e){-1===e.indexOf(t)&&e.push(t)},e.prototype.changeParent=function(t,e){var o=t.parent.convertToWorldSpaceAR(t.position);t.parent=e,t.position=t.parent.convertToNodeSpaceAR(o)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),cc.director.getCollisionManager().enabled=!1,cc.director.getCollisionManager().enabledDebugDraw=!1,this.unscheduleAllCallbacks(),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.enterKeyInput,this)},e.prototype.initPool=function(){for(var t=0;t<4;t++)this.poolMgr.put(cc.instantiate(this.pre_item),"pre_item")},e.prototype.putItemToPool=function(t){t.active=!1;var e=t.m_shadow;e.m_follow=null,this.changeParent(e,t),this.poolMgr.put(t,"pre_item")},e.prototype.func_chooseClear=function(){this.state!=i.prop_clear&&(cc.log("\u9053\u5177\uff1a\u9009\u62e9\u6d88\u9664"),this.state=i.prop_clear,cc.game.emit("isRemove",!0))},e.prototype.getBoxRemainNum=function(t){return this.getBoxTotalNum(t)-t[this.m_occupy]},e.prototype.getBoxTotalNum=function(t){return this.getBoxOccupyPos(t).length},e.prototype.setBoxToPropClear=function(t,e){var o=this;void 0===e&&(e=!0);var n=null;e&&(n=this.dict.prop_clear_box),t.isClearBox=!0;var r=this.getBoxRemainNum(t),a=[],s=__spreadArrays(this.itemQueue),c=t[this.m_id];cc.log("\u53d6\uff1a\u4e4b\u524d",r,a.length,this.itemQueue.length);for(var l=0;l<s.length&&(c!==(f=s[l])[this.m_id]||(a.push(f),this.deleteFromArray(f,this.itemQueue),0!=--r));l++);if(cc.log("\u53d6\uff1a\u4e4b\u540e",r,a.length,this.itemQueue.length),r>0){cc.log("\u53d62222\uff1a\u4e4b\u524d",this.boxTypeGroup[c]);for(var h=this.itemPosList.length-1,d=cc.v2(),u=this.getBoxGroup(c,r),p=0;p<u;p++){var f;d=cc.v2(0,30*(p+1)),(f=this.createItem(h,c,d)).opacity=0,a.push(f)}cc.log("\u53d62222\uff1a\u4e4b\u540e",this.boxTypeGroup[c])}this.boxFly(t,n,function(){a.forEach(function(e){e.opacity=255,e.stopAllActions(),o.setItemToBox(e,t,!0)});for(var e=o.getBoxTotalNum(t),n=0;n<e;n++)o.itemSupply();o.itemQueue.forEach(function(t){return t.stopAllActions()}),o.updateItemQueue(),o.state=i.waitTouch})},e.prototype.func_sort=function(){this.state=i.prop_sort;var t=this.getWeight(!0);if(cc.log("\u9053\u5177\uff1a\u6392\u5e8f"),cc.log("\u6392\u5e8f\uff1a\u6743\u91cd\uff1a",t),cc.log("\u961f\u5217\uff1a",this.itemQueue.length),t.length){for(var e=this.itemPosList.length-1,o=this.itemPosList[e],n=[],r=0;r<t.length;r++)for(var a=t[r],s=Number(a.split("_")[0]),c=0;c<this.itemQueue.length;c++){var l=this.itemQueue[c];s===l[this.m_id]&&(l[this.m_posIndex]=e,l.position=o,n.push(l))}this.itemQueue.length=0,this.itemQueue=__spreadArrays(n),this.updateItemQueue(.05)}},e.prototype.func_revive=function(){this.state=i.waitTouch,cc.log("\u9053\u5177\uff1a\u590d\u6d3b");var t=this.func_check_unlockWait();t?(this.unlockWait(t),cc.game.emit("gamelog_Thinking_reward_btn",8)):cc.game.emit("gamelog_Thinking_reward_btn",9),this.newReviveAnim()},e.prototype.clear=function(t){var e=this;t.isClearBox=!0;var o=this.dict.prop_clear_box;this.boxFly(t,o,function(){var o=e.getBoxOccupyPos(t).length,n=o;n-=t[e.m_occupy],console.log("\u6d88\u9664\u9053\u5177",n);var r=t[e.m_id],a=[],s=new Array(n).fill(r);cc.log("getBoxGroup start ",d.default.deepCopy(e.boxTypeGroup));for(var c=0;c<n;c++){var l=(p=e.itemQueue[c])[e.m_id];e.boxTypeGroup[l].length||(e.boxTypeGroup[l]=[0]),e.boxTypeGroup[l][0]+=1,a.push(p)}cc.log("getBoxGroup start2 ",d.default.deepCopy(e.boxTypeGroup)),console.log("colorSort",s);var h=[];for(c=0;c<s.length;c++){var u=s[c];if(e.itemQueue[c]){var p=e.itemQueue[c],f=String(Number(u)+10);p[e.m_id]=u,p.name=String(u);var g=p.getChildByName("sp"),m=e.image.getChildByName(f);g.getComponent(cc.Sprite).spriteFrame=m.getComponent(cc.Sprite).spriteFrame,e.boxTypeGroup[u].length?(e.boxTypeGroup[u][0]-=1,e.boxTypeGroup[u][0]<=0&&e.boxTypeGroup[u].shift()):h.push(u)}}for(c=0;c<h.length;c++){var v=h[c];console.log("\u6ca1\u6709\u8fd9\u4e2a\u989c\u8272\u4e86\uff0c\u8981\u627e\u5230\u573a\u4e0a\u7684\u989c\u8272\u4fee\u6539\u6210\u6709\u7684",v),e.setSurplusColor(v,s)}for(cc.log("getBoxGroup start3 ",d.default.deepCopy(e.boxTypeGroup)),a.forEach(function(o){e.setItemToBox(o,t,!0)}),c=0;c<o;c++)e.itemSupply();e.updateItemQueue(),e.state=i.waitTouch})},e.prototype.setSurplusColor=function(t,e){for(var o=0;o<this.itemQueue.length;o++)if(!e[o]){var i=this.itemQueue[o];if(t==i[this.m_id]){var n=this.getSurplusColor();if(n){console.log("\u8fd8\u5269\u4f59\u6709",n),this.boxTypeGroup[n][0]-=1,i[this.m_id]=n;var r=String(Number(n)+10),a=i.getChildByName("sp"),s=this.image.getChildByName(r);return void(a.getComponent(cc.Sprite).spriteFrame=s.getComponent(cc.Sprite).spriteFrame)}}}},e.prototype.filterBoxTypeGroupArr=function(t){return t.filter(function(t){return 0!=t})},e.prototype.newReviveAnim=function(){var t=this;this.isReviving||(this.isReviving=!0,this.dict.starSpine.active=!0,this.schedule(function(){for(var e=0;e<t.itemQueue.length;e++){var o=t.itemQueue[e],i=d.default.getRandomInt(1,8);t.setColorItemImg_revive(i,o)}},.2,2.2),cc.tween(this.node).delay(1.5).call(function(){t.dict.starSpine.active=!1;for(var e=Math.min(4,t.waitList.length),o=[],i=0;i<e;i++){var n=t.waitList[i],r=t.getBoxOccupyPos(n).length;r-=n[t.m_occupy];var a=n[t.m_id];o=o.concat(new Array(r).fill(a))}var s={};for(i=0;i<t.itemQueue.length;i++)s[c=(g=t.itemQueue[i])[t.m_id]]||(s[c]=0),s[c]+=1;for(var c in s)s[c]&&t.boxTypeGroup[c].push(s[c]);for(console.log("colorSort",o),console.log("itemQueue",t.itemQueue.length),i=0;i<t.itemQueue.length;i++)(g=t.itemQueue[i]).m_shadow.active=!1,g.destroy();t.itemQueue=[],t.nextNeedAdd_new=o;for(var l=0,h=t.itemPosList.length;l<h;){var d=void 0,u=void 0;if(t.nextNeedAdd_new.length>0)d=t.nextNeedAdd_new.shift(),u=1,t.getBoxGroup(d,1);else{var p=t.getItemType(-1);if(d=p.type,u=p.num,!p)break}for(i=0;i<u;i++){var f,g=t.createItem(f,Number(d));f=l+i>=h?h-1:l+i}l+=u}for(i=0;i<e&&(n=t.waitList[i],!t.checkBoxTakeItem(n));i++);t.isReviving=!1}).start())},e.prototype.reviveAnim=function(){var t=this;this.isReviving||(this.isReviving=!0,this.dict.starSpine.active=!0,this.schedule(function(){for(var e=0;e<t.itemQueue.length;e++){var o=t.itemQueue[e],i=d.default.getRandomInt(1,8);t.setColorItemImg_revive(i,o)}},.2,2.2),cc.tween(this.node).delay(1.5).call(function(){t.dict.starSpine.active=!1;for(var e=Math.min(4,t.waitList.length),o=[],i=0;i<e;i++){var n=t.waitList[i],r=t.getBoxOccupyPos(n).length;r-=n[t.m_occupy];var a=n[t.m_id];o=o.concat(new Array(r).fill(a))}for(i=0;i<t.itemQueue.length;i++)a=(c=t.itemQueue[i])[t.m_id],t.boxTypeGroup[a].length||(t.boxTypeGroup[a]=[0]),o[i]&&(t.boxTypeGroup[a][0]+=1);for(console.log("colorSort",o),console.log("itemQueue",t.itemQueue.length),i=0;i<o.length;i++){var s=o[i];if(t.itemQueue[i]){var c=t.itemQueue[i],l=String(Number(s)+10);c[t.m_id]=s,c.name=String(s);var h=c.getChildByName("sp"),u=t.image.getChildByName(l);h.getComponent(cc.Sprite).spriteFrame=u.getComponent(cc.Sprite).spriteFrame,t.boxTypeGroup[s][0]-=1,0==t.boxTypeGroup[s][0]&&t.boxTypeGroup[s].shift()}else t.nextNeedAdd.push(s)}var p=t.itemQueue.length;for(console.log("\u6d4b\u8bd5",t.getSurplusColor()),i=0;i<p;i++)c=t.itemQueue[i],o[i]||(s=c[t.m_id],t.boxTypeGroup[s].length&&t.boxTypeGroup[s][0]||(s=t.getSurplusColor(),console.log("\u8fd8\u5269\u4f59\u6709",s),t.boxTypeGroup[s][0]-=1),c[t.m_id]=s,l=String(Number(s)+10),h=c.getChildByName("sp"),u=t.image.getChildByName(l),h.getComponent(cc.Sprite).spriteFrame=u.getComponent(cc.Sprite).spriteFrame);for(cc.log(" end2",d.default.deepCopy(t.boxTypeGroup)),cc.log(" nextNeedAdd",t.nextNeedAdd),i=0;i<e&&(n=t.waitList[i],!t.checkBoxTakeItem(n));i++);t.isReviving=!1}).start())},e.prototype.getSurplusColor=function(){console.log("this.boxTypeGroup",this.boxTypeGroup);for(var t=1;t<9;t++){var e=this.boxTypeGroup[t];if(e&&e[0])for(var o=0;o<e.length;o++)if(e[o])return t}},e.prototype.setColorItemImg_revive=function(t,e){var o=String(Number(t)+10),i=e.getChildByName("sp"),n=game.drinkAtlas;i.getComponent(cc.Sprite).spriteFrame=n.getSpriteFrame(this.folder+"_"+o)},e.prototype.getSpriteFrameByAtlas=function(t,e){var o=this;return new Promise(function(i,n){cc.resources.load("zqddn_zhb/texture/"+t,cc.SpriteAtlas,function(t,r){if(t)return console.error(e+"\u4e0d\u5b58\u5728"),n(null);i(r.getSpriteFrame(o.folder+"_"+e))})})},e.prototype.enterKeyInput=function(t){switch(t.keyCode){case cc.macro.KEY.a:return this.func_chooseClear();case cc.macro.KEY.s:return this.func_sort();case cc.macro.KEY.x:return this.func_revive()}},__decorate([g],e)}(c.default);o.default=v;var y=[{x:220,y:865},{x:220,y:800},{x:220,y:735},{x:165,y:735},{x:110,y:735},{x:55,y:735},{x:0,y:735},{x:-55,y:735},{x:-110,y:735},{x:-165,y:735},{x:-220,y:735},{x:-220,y:695},{x:-220,y:645},{x:-165,y:645},{x:-110,y:645},{x:-55,y:645},{x:0,y:645},{x:55,y:645},{x:110,y:645},{x:165,y:645},{x:220,y:645},{x:220,y:600.223},{x:220,y:560},{x:165,y:560},{x:110,y:560},{x:55,y:560},{x:0,y:560},{x:0,y:500.732}];cc._RF.pop()},{"./BrainLevelBase":"BrainLevelBase","./Level-28749_transport":"Level-28749_transport","./LevelConstant":"LevelConstant","./LevelUtil":"LevelUtil","./PoolMgr":"PoolMgr","./levelReviveHelper":"levelReviveHelper"}],"Level-28955":[function(t,e,o){"use strict";var i;cc._RF.push(e,"b4837H2TbBAnolxxDKYSXyK","Level-28955");var n,r,a,s,c=t("./BrainLevelBase"),l=t("./LevelConstant"),h=t("./levelReviveHelper"),d=t("./LevelUtil"),u=t("./PoolMgr"),p=cc._decorator,f=p.ccclass,g=p.property;(n=i||(i={}))[n.none=0]="none",n[n.init=1]="init",n[n.waitTouch=2]="waitTouch",n[n.checkWin=3]="checkWin",n[n.prop_clear=4]="prop_clear",n[n.prop_sort=5]="prop_sort",n[n.over=6]="over";var m={"1-1":[[0,16]],"2-1":[[0,35.7],[0,-4.5]],"3-1":[[0,55],[0,15.5],[0,-24.4]],"2-2":[[-18.6,35.5],[20.3,35.5],[-18.6,-4.5],[20.3,-4.5]],"3-2":[[-18.6,55.6],[20.2,55.6],[-18.6,15.6],[20.2,15.6],[-18.6,-24.5],[20.2,-24.5]],"4-2":[[-18.6,75.5],[20.8,75.5],[-18.6,35.4],[20.8,35.4],[-18.6,-4.6],[20.8,-4.6],[-18.6,-44.5],[20.8,-44.5]]};(function(t){t[t.None=0]="None",t[t.Empty=1]="Empty",t[t.Occupy=2]="Occupy",t[t.OccupyAnimation=3]="OccupyAnimation",t[t.FinishAnimation=4]="FinishAnimation",t[t.Finish=5]="Finish"})(r||(r={})),function(t){t[t.None=0]="None",t[t.Idle=1]="Idle",t[t.WaitClick=2]="WaitClick",t[t.Wait=3]="Wait",t[t.Box=4]="Box",t[t.Animation=5]="Animation",t[t.Suc=6]="Suc"}(a||(a={})),function(t){t[t.Lock=0]="Lock",t[t.Empty=1]="Empty",t[t.Occupy=2]="Occupy"}(s||(s={}));var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boxItemScale=1,e._state=i.waitTouch,e.m_hierarchy=Symbol("m_hierarchy"),e.m_index=Symbol("m_index"),e.m_posIndex=Symbol("m_posIndex"),e.m_id=Symbol("m_id"),e.mTween=Symbol("mTween"),e.m_state=Symbol("m_state"),e.mStartPos=Symbol("mStartPos"),e.m_occupy=Symbol("m_occupy"),e.m_items=Symbol("m_items"),e.m_wait=Symbol("m_wait"),e.m_block=Symbol("m_block"),e.effectLayer=null,e.gridLayer=null,e.itemLayer=null,e.propLayer=null,e.pres=null,e.isDebug=!1,e.bg=null,e.grid_bg=null,e.nodeDict={},e.container=null,e.labProgress=null,e.pre_box=null,e.image=null,e.waitLayer=null,e.boxLayer=null,e.boxSpine=null,e.waitList=[],e.itemFirstPos=null,e.shadowLayer=null,e.pre_item=null,e.time=1.5,e.clearAmount=0,e.lastGood=null,e.guideNodes=[],e.currentGuideNode=null,e.guideText=["\u70b9\u51fb\u76d8\u5b50\u53ef\u653e\u7f6e\u5bf9\u5e94\u989c\u8272\u7684\u996e\u6599","\u8fd9\u79cd\u76d8\u5b50\u5b50\u53ef\u4ee5\u88c54\u676f\u996e\u6599","\u8fd9\u79cd\u76d8\u5b50\u5b50\u53ef\u4ee5\u88c53\u676f\u996e\u6599","\u8fd9\u79cd\u76d8\u5b50\u5b50\u53ef\u4ee5\u88c56\u676f\u996e\u6599"],e.guidedNodes=[],e.types=[],e.levelTotal=0,e.level_config=null,e.boxDataObjects=[],e.itemPosList=[],e.guideLevelColor=[6,1,4,8],e.guideLevelColor2=[4,1,6,8],e.boxMap=new Map,e.boxQueue=[],e.boxTypeGroup={},e.nextNeedAdd2Index=0,e.nextNeedAdd2=[],e.isCheck=!1,e.drinkArr=[],e.itemQueue=[],e.noAmount=[],e.clearNum=0,e.poolMgr=new u.default,e.nextNeedAdd_new=[],e.reviveArr=[],e.isReviving=!1,e.nextNeedAdd=[],e}return __extends(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t},enumerable:!1,configurable:!0}),e.prototype.printData=function(){var t=[];this.dict.gridLayer.children.map(function(e){t.push({x:e.x,y:e.y})}),cc.log(JSON.stringify(t))},e.prototype.createSpine=function(){var t=function(t,e){if(!t.getChildByName(e)){var o=new cc.Node(e);return t.addChild(o),o.addComponent(sp.Skeleton),o.getComponent(sp.Skeleton).premultipliedAlpha=!1,o}},e=cc.find("game/image",this.node);t(e,"good"),t(e,"jiesuo")},e.prototype.startClearTimer=function(){this.clearAmount+=1,this.unschedule(this.timer),this.scheduleOnce(this.timer,this.time);var t=null;if(this.clearAmount>=5?t="animation3":this.clearAmount>=4?t="animation2":this.clearAmount>=3?t="animation1":this.clearAmount>=2&&(t="animation0"),t){console.log("\u6d4b\u8bd5\u6548\u679c");var e=cc.instantiate(this.dict.good);this.node.getChildByName("game").addChild(e),this.lastGood&&this.lastGood.destroy(),this.lastGood=e,e.getComponent(sp.Skeleton).setAnimation(0,t,!1),e.position=cc.v2(),e.y=100}},e.prototype.timer=function(){this.clearAmount=0},e.prototype.createSprite=function(){this.folder||(this.folder="f28749");var t=function(t,e){if(!t.getChildByName(e)){var o=new cc.Node(e);return t.addChild(o),o.addComponent(cc.Sprite),o}},e=cc.find("game/image",this.node);t(e,"1-s"),t(e,"3-s"),t(e,"5-s"),t(e,"6-s"),t(e,"8-s"),t(e,"10-s")},e.prototype.onLoad=function(){this.createSprite(),this.createSpine(),t.prototype.onLoad.call(this),this.initLevel(),this.dict.game.active=!1,this.dict.prop_clear_box.x=-88.236,this.dict.waitLayer.y=330.487,this.dict[9]&&(this.dict[9].x=0),this.cwNode.opacity=0,this.dict.shadow.opacity=150},e.prototype.initLevel=function(){this.bg=this.dict.bg,this.itemLayer=this.dict.itemLayer,this.effectLayer=this.dict.effectLayer,this.gridLayer=this.dict.gridLayer,this.labProgress=this.dict.labProgress.getComponent(cc.Label),this.image=this.dict.image,this.waitLayer=this.dict.waitLayer,this.boxLayer=this.dict.boxLayer,this.boxSpine=this.dict.boxSpine,this.pre_item=this.dict.pre_item,cc.view.getFrameSize().width/cc.view.getFrameSize().height<.5&&(this.dict.boxLayer.y-=40),this.shadowLayer=this.dict.shadowLayer},e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return this.initData(),this.initGridLayer(),this.initWaitLayer(),this.initBoxLayer(),this.initItemLayer(),this.initEvent(),this.initPool(),this.initProgress(),this.dict.game.active=!0,this.dict.game.getComponent(cc.Mask).enabled=!0,[2]})})},e.prototype.handPos=function(){var t=this.currentGuideNode.parent.convertToWorldSpaceAR(this.currentGuideNode.position),e=this.guideNodes.indexOf(this.currentGuideNode);this.dict.handText.getComponent(cc.Label).string=this.guideText[e];var o=this.dict.hand.parent.convertToNodeSpaceAR(t);this.dict.hand.position=o},e.prototype.initData=function(){var t=this,e=d.default.deepCopy(this.levelJSON.json[this.levelID]);if(this.level_config=e,this.types=Array.from({length:8},function(t,e){return e+1}),d.default.fisherYatesShuffle(this.types),e){var o=e.box_config_editor,i=d.default.deepCopy(o).split("*");i[1].split("#").forEach(function(e){var o=e.split("_"),i={name:o[0],hierarchy:Number(o[1]),index:Number(o[2]),x:Number(o[3]),y:Number(o[4])};t.boxDataObjects.push(i)}),this.boxDataObjects.reverse();var n=i[2];if(n){var r=n.split("_");cc.log("\u6837\u5f0f\u4e3a\uff1a",Number(r[1]))}}-28807==this.levelID&&(this.level_config={boxConfig:[[25,[1,4]],[100,[1,6]]],blockWeight:[50,10,1],waitWeight:10,queueWeight:10,limitRank:4,lastTypeWeight:0},this.boxDataObjects=[{name:"3-2-2",hierarchy:1,index:0,x:-50.721,y:112.009},{name:"2-2-2",hierarchy:1,index:1,x:74.796,y:112.009},{name:"4-2",hierarchy:1,index:2,x:-75.404,y:-37.424},{name:"4-2",hierarchy:1,index:3,x:75.1,y:-39.981}]),-29055==this.levelID&&(this.level_config={boxConfig:[[10,[6,8]],[20,[5,8]],[30,[6,8]],[40,[5,8]],[50,[4,8]],[60,[4,8]],[70,[3,8]],[80,[3,8]],[90,[2,8]],[100,[1,8]]],blockWeight:[50,10,1],waitWeight:10,queueWeight:10,limitRank:3,lastTypeWeight:0},this.boxDataObjects=[{name:"2-2",hierarchy:1,index:0,x:-75.404,y:112.009},{name:"1-3",hierarchy:1,index:1,x:89.796,y:117.009+20},{name:"2-2",hierarchy:1,index:2,x:-75.404,y:-24.424},{name:"3-2",hierarchy:1,index:3,x:110.1,y:30-39.981+15}]),this.boxDataObjects.forEach(function(e){var o=e.hierarchy;t.boxMap.get(o)||t.boxMap.set(o,[])}),y.forEach(function(e){t.itemPosList.push(cc.v2(e.x,e.y))}),this.itemPosList.reverse()},e.prototype.shuffleArray=function(t){for(var e,o=t.length-1;o>0;o--){var i=Math.floor(Math.random()*(o+1));e=[t[i],t[o]],t[o]=e[0],t[i]=e[1]}return t},e.prototype.initBoxLayer=function(){var t=this;if(this.boxDataObjects.forEach(function(e){t.createBox(e)}),this.dict.hand){var e=this.boxLayer;-28807==this.levelID?(this.guideNodes.push(e.children[3]),this.guideNodes.push(e.children[2]),this.guideNodes.push(e.children[0]),this.guideNodes.push(e.children[1])):(this.guideNodes.push(e.children[2]),this.guideNodes.push(e.children[0]),this.guideNodes.push(e.children[1]),this.guideNodes.push(e.children[3])),this.currentGuideNode=this.guideNodes[0],this.handPos()}var o=this.level_config.boxConfig,i=[];this.boxMap.forEach(function(e){e.forEach(function(e){i.push(e),t.boxQueue.push(e)})});for(var n=Array.from({length:i.length},function(){return 0}),r=n.length,a=function(e,i){var n=o.findIndex(function(t){var o=t[0];return e<=r*o/100});if(n>=0){for(var a=o[n][1],s=[],c=a[0];c<=a[1];c++)s.push(c);s=t.shuffleArray(s);for(var l=d.default.getRandomValueInArray(s);l===i;)l=d.default.getRandomValueInArray(s);return l}},s=-1,c=0;c<n.length;c++)if(0===n[c]){var l=a(c,s);n[c]=l,s=l}var h={};n.forEach(function(e,o){var n=t.types[e-1],r=i[o];-28807==t.levelID&&(n=t.guideLevelColor[o]),-29055==t.levelID&&(n=t.guideLevelColor2[o]),t.setBoxData(r,n);var a=t.getBoxOccupyPos(r).length;t.levelTotal+=a,h[n]||(h[n]=[]),h[n].push(a)}),cc.log("\u996e\u6599\u603b\u6570\uff1a",this.levelTotal);var u=function(e){var o=[];h[e].forEach(function(e){for(var i=[],n=0;n<e;){var r=t.getRandomInteger(1,e/2);if((n+=r)<=e)i.push(r);else{var a=e-(n-=r);i.push(a),n+=a}}i.forEach(function(t){return o.push(t)})});var i=Number(e);p.boxTypeGroup[i]=[],o.forEach(function(e){return t.boxTypeGroup[i].push(Number(e))})},p=this;for(var f in h)u(f);-28807==this.levelID&&(this.nextNeedAdd2=[8,4,6,1,8,4,6,1,8,4],this.boxTypeGroup={1:[1,3],4:[2,4,2],6:[3,3],8:[4,2,2]}),-29055==this.levelID&&(this.nextNeedAdd2=[6,4,1,8,6,8,1,4,6],this.boxTypeGroup={1:[1,2],4:[2,2],6:[2,1,1],8:[3,3]}),this.updateBoxState();var g=__spreadArrays(this.boxLayer.children);g.sort(function(t,e){return t.x-e.x}),g.forEach(function(t,e){t.scale=0,cc.tween(t).delay(.01*e).to(.1,{scale:1}).start()})},e.prototype.getBoxCloseSFName=function(t,e){var o=0;switch(t){case"1-1":o=100;break;case"1-2":o=200;break;case"2-1":o=300;break;case"1-3":o=400;break;case"3-1":o=500;break;case"2-2":o=600;break;case"2-3":o=700;break;case"3-2":o=800;break;case"2-4":o=900;break;case"4-2":o=1e3}return String(o+e)},e.prototype.getBoxOpenSFName=function(t,e){var o=0;switch(t){case"1-1":o=100;break;case"1-2":case"2-1":o=300;break;case"1-3":case"3-1":o=500;break;case"2-2":o=600;break;case"2-3":case"3-2":o=800;break;case"2-4":case"4-2":o=1e3}return String(o+e)},e.prototype.getBoxAnimId=function(t){var e=0;switch(t){case"2-2":case"2-2-2":e=1;break;case"3-2":case"3-2-2":e=2;break;case"4-2":case"4-2-2":e=3}return String(e)},e.prototype.createBox=function(t){var e=t.name,o=t.hierarchy,i=t.index,n=t.x,r=t.y,a=this.boxLayer,s=this.dict.boxPrefab.getChildByName(e),c=cc.v2(n,r),l=cc.instantiate(s);l.parent=a,l.position=c,l[this.m_hierarchy]=o,l[this.m_index]=i,l.name=s.name,this.setBoxIndex(l);var h=l.getChildByName("sp");h.zIndex=0,h.scale=this.boxItemScale;var d=this.boxMap.get(o);return d.push(l),this.boxMap.set(o,d),l},e.prototype.setBoxData=function(t,e,o){if(void 0===o&&(o=!1),e){var i=e;t[this.m_id]=i,t[this.m_state]=r.Empty,t[this.m_occupy]=0,t[this.m_items]=[],t[this.m_items].length=0,this.setBoxSP(t,this.getBoxCloseSFName(t.name,e))}},e.prototype.setBoxSP=function(t,e){t.getChildByName("sp").getComponent(cc.Sprite).spriteFrame=game.plateAtlas.getSpriteFrame(this.folder+"_"+e)},e.prototype.setBoxIndex=function(t,e){if(void 0===e&&(e=1),1==e){var o=t[this.m_hierarchy],i=t[this.m_index];t.zIndex=100*o+i}else 2==e?t.zIndex=4e3+this.clearNum:3==e&&(t.zIndex=3e3+this.clearNum)},e.prototype.updateBoxState=function(){var t=this,e=[];this.boxMap.forEach(function(t,o){e.includes(o)||e.push(o)});for(var o=function(o){var n=e[o],a=i.boxMap.get(n);0===o?a.forEach(function(e){e[t.m_state]===r.Empty&&(e[t.m_block]=1)}):a.forEach(function(i){if(i[t.m_state]===r.Empty){i[t.m_block]=1;for(var n=t.getBoxBoundingBox(i),a=o-1;a>=0;a--){var s=e[a];t.boxMap.get(s).forEach(function(e){if(e[t.m_state]===r.Empty){var o=t.getBoxBoundingBox(e);n.intersects(o)&&(i[t.m_block]+=e[t.m_block])}})}}}),a.forEach(function(e){e.active&&(1===e[t.m_block]?e.getChildByName("sp").color=cc.Color.WHITE:e.getChildByName("sp").color=cc.color().fromHEX("#828282"))})},i=this,n=0;n<e.length;n++)o(n)},e.prototype.getBoxBoundingBox=function(t){var e=t.getChildByName("sp").getBoundingBoxToWorld();return cc.rect(e.x,e.y,e.width-6,e.height-6)},e.prototype.setBoxToWait=function(t,e){var o=this;e&&(e[this.m_state]=s.Occupy,t[this.m_wait]=e),this.addToArray(t,this.waitList),this.boxFly(t,e,function(){o.checkBoxTakeItem(t)||(cc.log("checkIsFail setBoxToWait"),o.checkIsFail())})},e.prototype.checkBoxTakeItem=function(t){if(!t.flySuc)return!1;var e=this.getItemData(t);if(e&&e.item){var o=e.item;return this.isCheck=!0,e.inFirstPos&&(this.deleteFromArray(o,this.itemQueue),this.setItemToBox(o,t,!0),this.itemSupply(),this.updateItemQueue()),!0}return!1},e.prototype.getItemData=function(t){if(0===this.itemQueue.length)return null;var e=this.getBoxOccupyPos(t).length-t[this.m_occupy],o=this.itemQueue[0],i=!1;if(o[this.m_state]===a.Idle&&o[this.m_id]===t[this.m_id]&&e>0&&(i=!0),i){var n=o.position.sub(this.itemFirstPos).mag();return{item:o,inFirstPos:n<5}}return null},e.prototype.clearBox=function(t){var e=this,o=this.getBoxOccupyPos(t).length;t[this.m_state]=r.Finish,t.zIndex=10,this.setBoxIndex(t,3),t[this.m_id],this.scheduleOnce(function(){t.isClearBox,e.playEffect(t,function(){e.playLevelSound("Full"),t.getChildByName("sp").active=!1;for(var i=t.getChildByName("item");i.childrenCount;)e.putItemToPool(i.children[0]);e.setClearNum(o),t.active=!1,t.destroy(),t.parent=null,e.checkWin(),e.startClearTimer()}),e.scheduleOnce(function(){e.deleteFromArray(t,e.waitList),t[e.m_wait]&&(t[e.m_wait][e.m_state]=s.Empty,t[e.m_wait]=null)},.1)})},e.prototype.playEffect=function(t,e){t.zIndex=1e4;var o=this.getBoxOccupyPos(t).length,i=this.dict.xiangzi_xiao;o>=4&&o<6?i=this.dict.xiangzi_zhong:o>=6&&(i=this.dict.xiangzi_da);var n=cc.instantiate(i);n.scale=1.05,n.active=!0,n.name="effect",this.effectLayer.addChild(n),n.position=d.default.convertPosition(cc.find("point",t),n),n.zIndex=300,n.getComponent(sp.Skeleton).timeScale=1.6,d.default.playSpineCallBack(n,"animation",!1,function(){e&&e(),cc.tween(n).by(3,{x:7500}).call(function(){n.active=!1,n.removeFromParent(!0)}).start()})},e.prototype.boxFly=function(t,e,o){var i=this,n=t.getChildByName("item");n||((n=new cc.Node("item")).parent=t,n.position=cc.v2(),n.zIndex=2);var r=t.getChildByName("shadow");r||("1-1"==t.name?(r=cc.instantiate(this.dict["1-s"])).position=cc.v2(-5,2):"1-3"==t.name||"3-1"==t.name?(r=cc.instantiate(this.dict["5-s"])).position=cc.v2(-5,2):"2-2"==t.name?(r=cc.instantiate(this.dict["6-s"])).position=cc.v2(-5,2):"2-3"==t.name||"3-2"==t.name?(r=cc.instantiate(this.dict["8-s"])).position=cc.v2(-5,2):"2-4"!=t.name&&"4-2"!=t.name||((r=cc.instantiate(this.dict["10-s"])).position=cc.v2(-5,2)),r.name="shadow",r.parent=t,t.children[0].zIndex=2,r.zIndex=1,r.scale=.85),e?(this.setBoxIndex(t,2),cc.tween(t).to(.2,{position:d.default.convertPosition(e,t)}).call(function(){t.flySuc=!0;var e=i.getBoxOpenSFName(t.name,t[i.m_id]);i.setBoxSP(t,e);var n=t.getChildByName("sp");cc.tween(n).to(.2,{scale:.85}).start(),o&&o()}).start()):o&&o()},e.prototype.getBoxOccupyPos=function(t){var e=this.getBoxTypeByName(t.name),o=m[e];return o||(e=this.getBoxTypeByName(t.name,!0),o=m[e]),o||(console.warn("No occupy positions found for box type: "+e),[])},e.prototype.getBoxTypeByName=function(t,e){void 0===e&&(e=!1);var o=t.split("-"),i=o[0]+"-"+o[1];return e&&(i=o[1]+"-"+o[0]),i},e.prototype.boxIsEmpty=function(t){return t[this.m_state]===r.Empty},e.prototype.getBoxGroup=function(t,e){void 0===e&&(e=-1),this.boxTypeGroup[t]&&(this.boxTypeGroup[t]=this.filterBoxTypeGroupArr(this.boxTypeGroup[t]));var o=0,n=e;if(e<0)try{o=this.boxTypeGroup[t].shift()}catch(i){}else{for(var r=__spreadArrays(this.boxTypeGroup[t]),a=0;a<r.length;a++){var s=r[a];if(s>=n){r[a]-=n,n=0;break}n-=s,r[a]=0}for(var c=!0;c;)r[0]<=0?r.shift():c=!1;this.boxTypeGroup[t].length=0,this.boxTypeGroup[t]=__spreadArrays(r),o=e}return o},e.prototype.initItemLayer=function(){this.drinkArr=new Array(this.levelTotal).fill(-1);for(var t=0,e=this.itemPosList.length;t<e;){var o=this.getItemType(-1);if(!o)break;for(var i=o.type,n=o.num,r=0;r<n;r++){var a;a=t+r>=e?e-1:t+r,this.createItem(a,Number(i))}t+=n}this.itemFirstPos=this.itemQueue[0].position},e.prototype.itemSupply=function(t){if(void 0===t&&(t=-1),!(this.itemQueue.length>this.itemPosList.length))if(this.reviveArr.length){var e=this.reviveArr.shift();cc.log("\u590d\u6d3b-\u65b0\u589e",e,1,this.itemQueue.length);for(var o=0;o<1;o++){var i=this.itemPosList.length-1;this.createItem(i,e)}}else if(this.nextNeedAdd.length>0)for(console.log("\u590d\u6d3b","\u996e\u6599\u65b0\u589e"),e=this.nextNeedAdd.shift(),this.boxTypeGroup[e][0]-=1,0==this.boxTypeGroup[e][0]&&this.boxTypeGroup[e].shift(),o=0;o<1;o++)i=this.itemPosList.length-1,this.createItem(i,e);else{var n=this.getItemType(t);if(n&&n.type&&n.num){e=n.type;var r=n.num;for(o=0;o<r;o++)i=this.itemPosList.length-1,this.createItem(i,e)}}},e.prototype.updateItemQueue=function(t){var e=this;void 0===t&&(t=0);for(var o=this.itemQueue,n=this.itemPosList,r=1,s=function(){if(++r>=o.length){e.state===i.prop_sort&&(e.state=i.waitTouch),e.itemQueue.forEach(function(t){t[e.m_state]=a.Idle}),e.waitList.sort(function(t,o){return e.getBoxOccupyPos(t).length-t[e.m_occupy]-(e.getBoxOccupyPos(o).length-o[e.m_occupy])});for(var t=!1,n=0;n<e.waitList.length;n++){var s=e.waitList[n];if(e.checkBoxTakeItem(s)){t=!0;break}}t||(e.isCheck=!1,e.checkIsFail())}},c=function(e){var i=o[e];if(i.stopAllActions(),cc.tween(i).stop(),e>n.length-1)i.opacity=255,s();else{i.opacity=255;for(var r=[],a=e,c=i[l.m_posIndex]-1;c>=a;c--)r.push(c);r.length&&l.itemMove(i,r,0,function(){s()},t*e)}},l=this,h=0;h<o.length;h++)c(h)},e.prototype.itemMove=function(t,e,o,i,n){var r=this;if(void 0===i&&(i=null),void 0===n&&(n=0),o>=e.length)i&&i();else{t[this.m_state]=a.Animation;var s=e[o],c=t.position,l=this.itemPosList[s];c.sub(l).mag(),cc.tween(t).delay(n).to(.055,{position:l}).call(function(){n>0&&(n=0),r.setItemIndex(t),t[r.m_posIndex]=s,o+=1,r.itemMove(t,e,o,i)}).start()}},e.prototype.setItemToBox=function(t,e,o){var i=this;if(void 0===o&&(o=!1),t[this.m_state]!=a.Box){var n=this.getBoxOccupyPos(e),s=n.length,c=n[e[this.m_occupy]],l=cc.v2(c[0],c[1]),h=e.getChildByName("item"),d=e.convertToWorldSpaceAR(l),u=t.parent.convertToNodeSpaceAR(d);e[this.m_occupy]++,e[this.m_occupy]>=s&&(e[this.m_occupy]=s,e[this.m_state]=r.FinishAnimation,this.deleteFromArray(e,this.boxQueue)),t[this.m_state]=a.Box,this.setItemIndex(t,2),this.deleteFromArray(t,this.itemQueue);var p,f=t.position,g=u.sub(f).mag()/1e3;t.stopAllActions(),p=u.x>f.x?1:-1;var m=f.add(cc.v2(100*p,150));t.m_shadow.active=!1,cc.tween(t).bezierTo(g,f,m,u).call(function(){i.playLevelSound("Get_on");var e=t.getChildByName("sp").getComponent(cc.Sprite),o=10+t[i.m_id];e.spriteFrame=game.plateAtlas.getSpriteFrame(i.folder+"_"+o+"_1"),i.changeParent(t,h)}).to(.1,{scale:1}).call(function(){i.addToArray(t,e[i.m_items]),e[i.m_items].length>=s&&(e.getChildByName("shadow")&&e.getChildByName("shadow").destroy(),i.clearBox(e)),t.stopAllActions()}).start()}},e.prototype.getItemType=function(t){void 0===t&&(t=-1);var e=this.level_config,o=this.getWeight();if(cc.log("\u6743\u91cd\uff1a",o),o.length){for(var i=e.limitRank,n=Math.min(i,o.length),r=[],a=0,s=0;s<n;s++){var c=o[s].split("_")[1];r.push(Number(c))}r.forEach(function(t){a+=Number(t)});for(var l=this.getRandomInteger(1,a),h=0,d=0,u=0;u<r.length;u++)if((h+=r[u])>=l&&this.checkHasItemByColor(o[u].split("_")[0])){d=u;break}var p=o[d].split("_")[0];if((-28807==this.levelID||-29055==this.levelID)&&(p=this.nextNeedAdd2[this.nextNeedAdd2Index],this.nextNeedAdd2Index+=1,null==p))return null;var f=this.getBoxGroup(Number(p),t);return{type:Number(p),num:Number(f)}}return null},e.prototype.checkHasItemByColor=function(t){return!!this.boxTypeGroup[t]&&!!this.boxTypeGroup[t].length},e.prototype.createItem=function(t,e,o){void 0===o&&(o=null);var i=this.itemPosList[t];o&&i.addSelf(o);var n=String(Number(e)+10),r=this.itemLayer,s=this.poolMgr.get(this.pre_item,"pre_item");s.parent=r,s.position=i,s[this.m_index]=this.itemLayer.childrenCount,s[this.m_state]=a.Idle,s[this.m_id]=e,s[this.m_posIndex]=t,s.name=String(e),s.getChildByName("sp").getComponent(cc.Sprite).spriteFrame=game.plateAtlas.getSpriteFrame(this.folder+"_"+n),this.setItemIndex(s),this.itemQueue.push(s);var c=s.getChildByName("shadow");c.active=!0,c.setPosition(-18,-18),this.changeParent(c,this.shadowLayer),c.m_follow=s;var l=c.parent.convertToWorldSpaceAR(c.position),h=s.parent.convertToWorldSpaceAR(s.position);return c.m_follow_wVec=h.sub(l),s.m_shadow=c,s},e.prototype.setItemIndex=function(t,e){switch(void 0===e&&(e=1),e){case 1:t.zIndex=5e3-t.y;break;case 2:t.zIndex=9999}},e.prototype.getWeight=function(t){var e=this;void 0===t&&(t=!0);var o=this.level_config,i={};this.types.forEach(function(t){return i[t]=0});var n=o.blockWeight;this.boxQueue.forEach(function(t){if(e.boxIsEmpty(t)){var o,r=t[e.m_id],a=t[e.m_block];o=1===a?n[0]:2==a?n[1]:n[2],i[r]+=o*e.getBoxOccupyPos(t).length}});var r=o.waitWeight;if(this.waitList.forEach(function(t){var o=t[e.m_id],n=(e.getBoxOccupyPos(t).length-t[e.m_occupy])*r;i[o]+=n}),t){var a=o.queueWeight;this.itemQueue.forEach(function(t){var o=t[e.m_id],n=a;i[o]-=n})}var s=[];for(var c in i){var l=c+"_"+i[c];s.push(l)}return s&&s.sort(function(t,e){var o=t.split("_"),i=Number(o[1]),n=e.split("_");return Number(n[1])-i}),s},e.prototype.initWaitLayer=function(){for(var t=this,e=function(e){var i=o.waitLayer.children[e];i.name="wait_"+e;var n=i.getChildByName("video");(null==n?void 0:n.active)?(i[o.m_state]=s.Lock,d.default.onClickEvent(i,function(){n.active&&cc.game.emit(l.LEVEL_EVENT.REWARDVIDEO,function(e){0===e&&t.unlockWait(i)})})):i[o.m_state]=s.Empty},o=this,i=0;i<this.waitLayer.children.length;i++)e(i)},e.prototype.unlockWait=function(t){var e=this;void 0===t&&(t=null),t||(t=this.waitLayer.children.find(function(t){return t[e.m_state]===s.Lock}));var o=t.getChildByName("video");o.active=!1;var i=cc.instantiate(this.dict.jiesuo);i.position=cc.v2(),o.parent.addChild(i),i.getComponent(sp.Skeleton).premultipliedAlpha=!1,i.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),o.removeFromParent(!0),t[this.m_state]=s.Empty},e.prototype.func_check_unlockWait=function(){for(var t=null,e=0;e<this.waitLayer.children.length;e++){var o=this.waitLayer.children[e];o.name=String(e);var i=o.getChildByName("video");if(i&&i.active){t=o;break}}return t},e.prototype.func_unlockWait=function(){var t=this.func_check_unlockWait();t&&this.unlockWait(t)},e.prototype.getWait=function(){for(var t=0;t<this.waitLayer.children.length;t++){var e=this.waitLayer.children[t];if(e.active&&e[this.m_state]===s.Empty)return e}return null},e.prototype.getRandomInteger=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},e.prototype.loadSpriteFrame=function(t){return this.image.getChildByName(t).getComponent(cc.Sprite).spriteFrame},e.prototype.checkIsFail=function(){if(this.state!==i.over){for(var t=0,e=0;e<this.waitLayer.children.length;e++)this.waitLayer.children[e][this.m_state]!==s.Lock&&(t+=1);var o=0;for(e=0;e<this.waitList.length;e++)(a=this.waitList[e])[this.m_state]===r.Occupy&&(o+=1);if(t==o?cc.game.emit("checkTipText",1):t-1==o&&cc.game.emit("checkTipText",0),!this.isCheck&&o===t){var n=!1;for(e=0;e<this.waitList.length;e++){var a=this.waitList[e],c=this.getItemData(a);if(c&&c.item){n=!0;break}}n||this.fail(1)}}},e.prototype.update=function(){this.state!=i.none&&this.updateShadow()},e.prototype.updateShadow=function(){var t=this;this.shadowLayer.children.map(function(e){if(e.active){var o=e.m_follow;if(o&&o.active&&o[t.m_state]!=a.Box){var i=o.parent.convertToWorldSpaceAR(o.position).sub(e.m_follow_wVec),n=e.parent.convertToNodeSpaceAR(i);e.position=n}}})},e.prototype.initGuidence=function(){if(-28391===this.levelID){var t=this.dict.sz;cc.tween(t).to(.2,{scale:.8}).to(.2,{scale:1}).union().repeatForever().start()}},e.prototype.updateGuidence=function(){if(-28391===this.levelID){var t=this.dict.sz;t.active&&(t.active=!1)}},e.prototype.initGridLayer=function(){this.gridLayer.active=!1},e.prototype.getTouchNode=function(t){for(var e=this,o=this.boxLayer.children,i=[],n=0;n<o.length;n++)(s=o[n])[this.m_state]===r.Empty&&(s[this.m_block]>1||s.getBoundingBoxToWorld().contains(t)&&i.push(s));var a=[];for(n=0;n<o.length;n++){var s;(s=o[n]).getBoundingBoxToWorld().contains(t)&&a.push(s)}return!i.length&&a.length&&(a.sort(function(t,o){return o[e.m_index]-t[e.m_index]}),a[0].runAction(this.shackAction(.1,2))),i.length?(i.sort(function(t,o){return o[e.m_index]-t[e.m_index]}),i[0]):null},e.prototype.initEvent=function(){var t=this,e=null;d.default.touchEvent(this.dict.touchNode,{sFunc:function(o){if(t.playClickSound(),t.state===i.waitTouch||t.state===i.prop_clear){var n=o.getLocation();if(e=t.getTouchNode(n))if(t.state==i.waitTouch){if(t.dict.hand&&t.dict.hand.active&&(t.guidedNodes.push(e),t.currentGuideNode==e)){for(var a=!1,s=0;s<t.guideNodes.length;s++){var c=t.guideNodes[s];if(-1==t.guidedNodes.indexOf(c)){t.currentGuideNode=c,t.handPos(),a=!0;break}}a||(t.dict.hand.active=!1,t.dict.handText.active=!1,t.dict.handText.parent.active=!1)}var l=t.getWait();l?(e[t.m_state]=r.Occupy,t.updateBoxState(),t.setBoxToWait(e,l)):e.runAction(t.shackAction(.1,2))}else t.state==i.prop_clear&&(e[t.m_state]=r.Finish,t.updateBoxState(),t.scheduleOnce(function(){cc.game.emit("isRemove",!1)},.2),t.setBoxToPropClear(e))}},mFunc:function(){},eFunc:function(){}}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.enterKeyInput,this)},e.prototype.setClearNum=function(t){this.clearNum+=t,this.clearNum<0&&(this.clearNum=0),this.updateProgress()},e.prototype.initProgress=function(){this.clearNum=0,this.updateProgress()},e.prototype.updateProgress=function(){var t=this.levelTotal,e=t-this.clearNum,o=(this.clearNum/t).toFixed(2),i=Number(o);i*=100,(i=Math.floor(i))>100&&(i=100),this.labProgress.string=""+e,cc.game.emit("allPersonAmount",e,t),console.log("allPersonAmount",e,t),game.totalAmount=this.levelTotal,game.remainingAmount=e},e.prototype.checkWin=function(){this.boxLayer.children.some(function(t){return t.active})||this.suc(1)},e.prototype.onLevelReady=function(){this.init()},e.prototype.shackAction=function(t,e){var o=cc.moveBy(t,e,e),i=cc.moveBy(t,-e,-e),n=cc.moveBy(.8*t,.8*e,.8*e),r=cc.moveBy(.8*t,.8*-e,.8*-e),a=cc.moveBy(.6*t,.6*e,.6*e),s=cc.moveBy(.6*t,.6*-e,.6*-e),c=cc.moveBy(.4*t,.4*e,.4*e),l=cc.moveBy(.4*t,.4*-e,.4*-e),h=cc.moveBy(.2*t,.2*e,.2*e),d=cc.moveBy(.2*t,.2*-e,.2*-e);return cc.sequence(o,i,n,r,a,s,c,l,h,d)},e.prototype.suc=function(t){var e=this;void 0===t&&(t=1),cc.log("suc"),this.state!=i.over&&(this.state=i.over,this.scheduleOnce(function(){e.playRight(null,1)},t))},e.prototype.lose=function(t,e,o,n){if(void 0===e&&(e=!0),void 0===n&&(n=1),this.state!=i.over){if(t)if(t instanceof cc.Node){var r=cc.instantiate(t);r.x+=70,r.y-=70,r.parent=t.parent,r.active=!1,e?this.playError(r):this.playErrorOnce(r),r.destroy()}else e?this.playError(t):this.playErrorOnce(t);else e?this.playError():this.playErrorOnce();this.scheduleOnce(function(){o&&o()},n)}},e.prototype.fail=function(t,e){var o=this;void 0===t&&(t=1),void 0===e&&(e=null),cc.log("fail"),this.lose(null,!1,function(){cc.log("levelReviveHelper"),h.default.levelFailEvent("\u662f\u5426\u9700\u8981\u590d\u6d3b",function(){o.func_revive()})}),this.state=i.over},e.prototype.getWordPos=function(t){return t.parent.convertToWorldSpaceAR(t.position)},e.prototype.getDistance=function(t,e){var o=d.default.convertPosition(t,e);return e.position.sub(o).mag()},e.prototype.deleteFromArray=function(t,e){var o=e.indexOf(t);-1!==o&&e.splice(o,1)},e.prototype.addToArray=function(t,e){-1===e.indexOf(t)&&e.push(t)},e.prototype.changeParent=function(t,e){var o=t.parent.convertToWorldSpaceAR(t.position);t.parent=e,t.position=t.parent.convertToNodeSpaceAR(o)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),cc.director.getCollisionManager().enabled=!1,cc.director.getCollisionManager().enabledDebugDraw=!1,this.unscheduleAllCallbacks(),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.enterKeyInput,this)},e.prototype.initPool=function(){for(var t=0;t<4;t++)this.poolMgr.put(cc.instantiate(this.pre_item),"pre_item")},e.prototype.putItemToPool=function(t){t.active=!1;var e=t.m_shadow;e.m_follow=null,this.changeParent(e,t),this.poolMgr.put(t,"pre_item")},e.prototype.func_chooseClear=function(){this.state!=i.prop_clear&&(cc.log("\u9053\u5177\uff1a\u9009\u62e9\u6d88\u9664"),this.state=i.prop_clear,cc.game.emit("isRemove",!0))},e.prototype.getBoxRemainNum=function(t){return this.getBoxTotalNum(t)-t[this.m_occupy]},e.prototype.getBoxTotalNum=function(t){return this.getBoxOccupyPos(t).length},e.prototype.setBoxToPropClear=function(t,e){var o=this;void 0===e&&(e=!0);var n=null;e&&(n=this.dict.prop_clear_box),t.isClearBox=!0;for(var r=this.getBoxRemainNum(t),a=[],s=__spreadArrays(this.itemQueue),c=t[this.m_id],l=0;l<s.length&&(c!==(f=s[l])[this.m_id]||(a.push(f),this.deleteFromArray(f,this.itemQueue),0!=--r));l++);if(r>0)for(var h=this.itemPosList.length-1,d=cc.v2(),u=this.getBoxGroup(c,r),p=0;p<u;p++){var f;d=cc.v2(0,30*(p+1)),(f=this.createItem(h,c,d)).opacity=0,a.push(f)}this.boxFly(t,n,function(){a.forEach(function(e){e.opacity=255,e.stopAllActions(),o.setItemToBox(e,t,!0)});for(var e=o.getBoxTotalNum(t),n=0;n<e;n++)o.itemSupply();o.itemQueue.forEach(function(t){return t.stopAllActions()}),o.updateItemQueue(),o.state=i.waitTouch})},e.prototype.func_sort=function(){this.state=i.prop_sort;var t=this.getWeight(!0);if(cc.log("\u9053\u5177\uff1a\u6392\u5e8f"),cc.log("\u6392\u5e8f\uff1a\u6743\u91cd\uff1a",t),cc.log("\u961f\u5217\uff1a",this.itemQueue.length),t.length){for(var e=this.itemPosList.length-1,o=this.itemPosList[e],n=[],r=0;r<t.length;r++)for(var a=t[r],s=Number(a.split("_")[0]),c=0;c<this.itemQueue.length;c++){var l=this.itemQueue[c];s===l[this.m_id]&&(l[this.m_posIndex]=e,l.position=o,n.push(l))}this.itemQueue.length=0,this.itemQueue=__spreadArrays(n),this.updateItemQueue(.05)}},e.prototype.func_revive=function(){this.state=i.waitTouch,cc.log("\u9053\u5177\uff1a\u590d\u6d3b");var t=this.func_check_unlockWait();t&&this.unlockWait(t),this.newReviveAnim()},e.prototype.clear=function(t){var e=this;t.isClearBox=!0;var o=this.dict.prop_clear_box;this.boxFly(t,o,function(){var o=e.getBoxOccupyPos(t).length;o-=t[e.m_occupy],console.log("\u6d88\u9664\u9053\u5177",o);var n=t[e.m_id],r=[],a=new Array(o).fill(n);cc.log("getBoxGroup start ",d.default.deepCopy(e.boxTypeGroup));for(var s=0;s<o;s++){var c=e.itemQueue[s];r.push(c)}for(s=0;s<e.itemQueue.length;s++){var l=(c=e.itemQueue[s])[e.m_id];e.boxTypeGroup[n].length||(e.boxTypeGroup[n]=[0]),e.boxTypeGroup[n][0]+=1,l!=n&&a.push(l)}for(console.log("\u8fd8\u5269\u4f59\u6709----",a.length,e.itemQueue.length);a.length<e.itemQueue.length;)l=e.getSurplusColor(),console.log("\u8fd8\u5269\u4f59\u6709",l),e.boxTypeGroup[l][0]-=1,a.push(l);for(cc.log("getBoxGroup start2 ",d.default.deepCopy(e.boxTypeGroup)),console.log("colorSort",a),s=0;s<a.length;s++){var h=a[s];if(e.itemQueue[s]){c=e.itemQueue[s];var u=String(Number(h)+10);c[e.m_id]=h,c.name=String(h);var p=c.getChildByName("sp"),f=e.image.getChildByName(u);p.getComponent(cc.Sprite).spriteFrame=f.getComponent(cc.Sprite).spriteFrame}}cc.log("getBoxGroup start3 ",d.default.deepCopy(e.boxTypeGroup)),r.forEach(function(o){e.setItemToBox(o,t,!0)}),e.updateItemQueue(),e.state=i.waitTouch})},e.prototype.setSurplusColor=function(t,e){for(var o=0;o<this.itemQueue.length;o++)if(!e[o]){var i=this.itemQueue[o];if(t==i[this.m_id]){var n=this.getSurplusColor();if(n){console.log("\u8fd8\u5269\u4f59\u6709",n),this.boxTypeGroup[n][0]-=1,i[this.m_id]=n;var r=String(Number(n)+10),a=i.getChildByName("sp"),s=this.image.getChildByName(r);return void(a.getComponent(cc.Sprite).spriteFrame=s.getComponent(cc.Sprite).spriteFrame)}}}},e.prototype.filterBoxTypeGroupArr=function(t){return t.filter(function(t){return 0!=t})},e.prototype.newReviveAnim=function(){var t=this;this.isReviving||(this.isReviving=!0,this.dict.starSpine.active=!0,this.schedule(function(){for(var e=0;e<t.itemQueue.length;e++){var o=t.itemQueue[e],i=d.default.getRandomInt(1,8);t.setColorItemImg_revive(i,o)}},.2,2.2),cc.tween(this.node).delay(1.5).call(function(){t.dict.starSpine.active=!1;for(var e=Math.min(4,t.waitList.length),o=[],i=0;i<e;i++){var n=t.waitList[i],r=t.getBoxOccupyPos(n).length;r-=n[t.m_occupy];var a=n[t.m_id];o=o.concat(new Array(r).fill(a))}var s={};for(i=0;i<t.itemQueue.length;i++)s[c=(g=t.itemQueue[i])[t.m_id]]||(s[c]=0),s[c]+=1;for(var c in s)s[c]&&t.boxTypeGroup[c].push(s[c]);for(console.log("colorSort",o),console.log("itemQueue",t.itemQueue.length),i=0;i<t.itemQueue.length;i++)(g=t.itemQueue[i]).m_shadow.active=!1,g.destroy();t.itemQueue=[],t.nextNeedAdd_new=o;for(var l=0,h=t.itemPosList.length;l<h;){var d=void 0,u=void 0;if(t.nextNeedAdd_new.length>0)d=t.nextNeedAdd_new.shift(),u=1,t.getBoxGroup(d,1);else{var p=t.getItemType(-1);if(d=p.type,u=p.num,!p)break}for(i=0;i<u;i++){var f,g=t.createItem(f,Number(d));f=l+i>=h?h-1:l+i}l+=u}for(i=0;i<e&&(n=t.waitList[i],!t.checkBoxTakeItem(n));i++);t.isReviving=!1}).start())},e.prototype.getSurplusColor=function(){console.log("this.boxTypeGroup",this.boxTypeGroup);for(var t=1;t<9;t++){this.boxTypeGroup[t]=this.filterBoxTypeGroupArr(this.boxTypeGroup[t]);var e=this.boxTypeGroup[t];if(e&&e[0])for(var o=0;o<e.length;o++)if(e[o])return t}},e.prototype.setColorItemImg_revive=function(t,e){var o=String(Number(t)+10),i=e.getChildByName("sp");game.drinkAtlas,i.getComponent(cc.Sprite).spriteFrame=game.plateAtlas.getSpriteFrame(this.folder+"_"+o)},e.prototype.enterKeyInput=function(t){switch(t.keyCode){case cc.macro.KEY.a:return this.func_chooseClear();case cc.macro.KEY.s:return this.func_sort();case cc.macro.KEY.x:return this.func_revive()}},__decorate([g],e.prototype,"boxItemScale",void 0),__decorate([f],e)}(c.default);o.default=v;var y=[{x:220,y:865},{x:220,y:800},{x:220,y:735},{x:165,y:735},{x:110,y:735},{x:55,y:735},{x:0,y:735},{x:-55,y:735},{x:-110,y:735},{x:-165,y:735},{x:-220,y:735},{x:-220,y:695},{x:-220,y:645},{x:-165,y:645},{x:-110,y:645},{x:-55,y:645},{x:0,y:645},{x:55,y:645},{x:110,y:645},{x:165,y:645},{x:220,y:645},{x:220,y:600.223},{x:220,y:560},{x:165,y:560},{x:110,y:560},{x:55,y:560},{x:0,y:560},{x:0,y:500.732}];cc._RF.pop()},{"./BrainLevelBase":"BrainLevelBase","./LevelConstant":"LevelConstant","./LevelUtil":"LevelUtil","./PoolMgr":"PoolMgr","./levelReviveHelper":"levelReviveHelper"}],"Level-29071":[function(t,e,o){"use strict";var i;cc._RF.push(e,"f99f1RwUnVPL64T4RHubkY+","Level-29071");var n,r,a,s,c=t("./BrainLevelBase"),l=t("./LevelConstant"),h=t("./levelReviveHelper"),d=t("./LevelUtil"),u=t("./PoolMgr"),p=cc._decorator,f=p.ccclass,g=p.property;(n=i||(i={}))[n.none=0]="none",n[n.init=1]="init",n[n.waitTouch=2]="waitTouch",n[n.checkWin=3]="checkWin",n[n.prop_clear=4]="prop_clear",n[n.prop_sort=5]="prop_sort",n[n.over=6]="over";var m={"3-1":[[0,60.8],[0,14],[0,-33.5]],"2-2":[[-22,37],[22.8,37],[-22,-8.8],[22.8,-8.8]],"3-2":[[-22.5,60.5],[22.5,60.5],[-22.5,13.5],[22.5,13.5],[-22.5,-33],[22.5,-33]]};(function(t){t[t.None=0]="None",t[t.Empty=1]="Empty",t[t.Animation=2]="Animation",t[t.Occupy=3]="Occupy",t[t.OccupyAnimation=4]="OccupyAnimation",t[t.FinishAnimation=5]="FinishAnimation",t[t.Finish=6]="Finish"})(r||(r={})),function(t){t[t.None=0]="None",t[t.Idle=1]="Idle",t[t.WaitClick=2]="WaitClick",t[t.Wait=3]="Wait",t[t.Box=4]="Box",t[t.Animation=5]="Animation",t[t.Suc=6]="Suc"}(a||(a={})),function(t){t[t.Lock=0]="Lock",t[t.Empty=1]="Empty",t[t.Occupy=2]="Occupy"}(s||(s={}));var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lines=5,e.cols=4,e._state=i.waitTouch,e.m_hierarchy=Symbol("m_hierarchy"),e.m_index=Symbol("m_index"),e.m_posIndex=Symbol("m_posIndex"),e.m_type=Symbol("m_type"),e.mTween=Symbol("mTween"),e.m_state=Symbol("m_state"),e.mStartPos=Symbol("mStartPos"),e.m_place=Symbol("m_place"),e.m_arrive=Symbol("m_arrive"),e.m_have=Symbol("m_have"),e.m_limit=Symbol("m_limit"),e.m_wait=Symbol("m_wait"),e.m_block=Symbol("m_block"),e.m_col=Symbol("m_col"),e.effectLayer=null,e.gridLayer=null,e.itemLayer=null,e.propLayer=null,e.pres=null,e.isDebug=!1,e.bg=null,e.grid_bg=null,e.nodeDict={},e.container=null,e.labProgress=null,e.pre_box=null,e.image=null,e.waitLayer=null,e.boxLayer=null,e.boxSpine=null,e.waitList=[],e.itemFirstPos=null,e.shadowLayer=null,e.pre_item=null,e.standLayer=null,e.placeLayer=null,e.touchNode=null,e.guideNodes=[],e.currentGuideNode=null,e.guideText=["\u70b9\u51fb\u76d2\u5b50\u53ef\u4e0a\u53bb\u88c5\u5bf9\u5e94\u989c\u8272\u7684\u996e\u6599","\u5927\u76d2\u5b50\u53ef\u4ee5\u88c58\u676f\u996e\u6599","\u4e2d\u76d2\u5b50\u53ef\u4ee5\u88c56\u676f\u996e\u6599","\u5c0f\u76d2\u5b50\u53ef\u4ee5\u88c54\u676f\u996e\u6599"],e.guidedNodes=[],e.types=[],e.levelTotal=0,e.level_config=null,e.boxDataObjects=[],e.itemPosList=[],e.boxNumArr=[],e.boxTypeArr=[],e.boxMap=new Map,e.boxQueue=[],e.boxTypeGroup={},e.boxGrids=null,e.boxGridPos=[],e.box_spacing_y=0,e.boxPosList=[],e.boxUnitTime=.2,e.guideLevelColor=[6,1,4,8],e.nextNeedAdd2Index=0,e.nextNeedAdd2=[],e.isCheck=!1,e.drinkArr=[],e.itemQueue=[],e.noAmount=[],e.clearNum=0,e.poolMgr=new u.default,e.isReviving=!1,e.nextNeedAdd=[],e.nextNeedAdd_new=[],e}return __extends(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t},enumerable:!1,configurable:!0}),e.prototype.printData=function(){var t=[];this.dict.boxGrids.children.map(function(e){t.push({x:e.x,y:e.y})}),cc.log(JSON.stringify(t))},e.prototype.createSprite=function(){this.folder||(this.folder="f28749");var t=function(t,e){if(!t.getChildByName(e)){var o=new cc.Node(e);return t.addChild(o),o.addComponent(cc.Sprite),o}},e=cc.find("game/image",this.node),o=function(o,i,n){void 0===n&&(n=0);for(var r=o;r<=i;r++)t(e,String(r));if(0!=n)for(r=o+n;r<=i+n;r++)t(e,String(r))};o(11,18),function(){for(var o=11;o<=18;o++)t(e,String(o)+"_1")}(),o(101,103),o(201,203),o(301,303),o(401,403),o(501,503),o(601,603),o(701,703),o(801,803),cc.find("game/pres",this.node)},e.prototype.onLoad=function(){this.createSprite(),t.prototype.onLoad.call(this),this.initLevel(),this.dict.prop_clear_box.x=-88.236,this.cwNode.opacity=0,this.dict.shadow.opacity=150},e.prototype.initLevel=function(){var t=this;this.bg=this.dict.bg,this.itemLayer=this.dict.itemLayer,this.effectLayer=this.dict.effectLayer,this.gridLayer=this.dict.gridLayer,this.labProgress=this.dict.labProgress.getComponent(cc.Label),this.image=this.dict.image,this.waitLayer=this.dict.waitLayer,this.boxLayer=this.dict.boxLayer,this.boxSpine=this.dict.boxSpine,this.pre_item=this.dict.pre_item,this.standLayer=this.dict.standLayer,this.placeLayer=this.dict.placeLayer,this.placeLayer.children.forEach(function(t){return t.active=!1}),this.touchNode=this.dict.touchNode,this.standLayer.children.forEach(function(e){return e[t.m_state]===s.Empty}),cc.view.getFrameSize().width/cc.view.getFrameSize().height<.5&&(this.dict.boxLayer.y-=40),this.shadowLayer=this.dict.shadowLayer},e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return this.initData(),this.initGridLayer(),this.initWaitLayer(),this.initBoxLayer(),this.initItemLayer(),this.initEvent(),this.initProgress(),this.dict.game.getComponent(cc.Mask).enabled=!0,[2]})})},e.prototype.handPos=function(){var t=this.currentGuideNode.parent.convertToWorldSpaceAR(this.currentGuideNode.position),e=this.guideNodes.indexOf(this.currentGuideNode);this.dict.handText.getComponent(cc.Label).string=this.guideText[e];var o=this.dict.hand.parent.convertToNodeSpaceAR(t);this.dict.hand.position=o},e.prototype.initData=function(){var t=this,e=d.default.deepCopy(this.levelJSON.json[this.levelID]);if(this.level_config=e,this.types=Array.from({length:8},function(t,e){return e+1}),d.default.fisherYatesShuffle(this.types),e){for(var o=[],i=e.centersquare,n=[3,4,6],r=0;r<i.length;r++)for(var a=i[r],s=0;s<a;s++){var c=n[r];o.push(c)}var l=e.boxConfig,h=Array.from({length:o.length},function(){return 0}),u=h.length,p=function(e,o){var i=l.findIndex(function(t){var o=t[0];return e<=u*o/100});if(i>=0){for(var n=l[i][1],r=[],a=n[0];a<=n[1];a++)r.push(a);r=t.shuffleArray(r);for(var s=d.default.getRandomValueInArray(r);s===o;)s=d.default.getRandomValueInArray(r);return s}},f=-1;for(r=0;r<h.length;r++)0===h[r]&&(c=p(r,f),h[r]=c,f=c);d.default.fisherYatesShuffle(o),this.boxNumArr=__spreadArrays(o),this.boxTypeArr=__spreadArrays(h),cc.log("\u76d2\u5b50 \u6570\u91cf\uff1a",d.default.deepCopy(this.boxNumArr)),cc.log("\u76d2\u5b50 \u7c7b\u578b\uff1a",d.default.deepCopy(this.boxTypeArr));var g={};h.forEach(function(e,i){var n=o[i];t.levelTotal+=n,-28807==t.levelID&&(e=t.guideLevelColor[i]),g[e]||(g[e]=[]),g[e].push(n)}),cc.log("\u996e\u6599\u603b\u6570\uff1a",this.levelTotal);var m=function(e){var o=[];g[e].forEach(function(e){for(var i=[],n=0;n<e;){var r=t.getRandomInteger(1,e/2);if((n+=r)<=e)i.push(r);else{var a=e-(n-=r);i.push(a),n+=a}}i.forEach(function(t){return o.push(t)})});var i=Number(e);v.boxTypeGroup[i]=[],o.forEach(function(e){return t.boxTypeGroup[i].push(Number(e))})},v=this;for(var y in g)m(y)}_.forEach(function(e){t.itemPosList.push(cc.v2(e.x,e.y))}),this.itemPosList.reverse()},e.prototype.initBoxLayer=function(){var t=this;this.boxGrids=this.dict.boxGrids;var e=[];y.forEach(function(t){e.push(cc.v2(t.x,t.y))}),0===this.boxGridPos.length&&(this.boxGridPos=__spreadArrays(e)),this.box_spacing_y=120,this.boxGridPos.forEach(function(e){var o=t.boxGrids.convertToWorldSpaceAR(e),i=t.boxLayer.convertToNodeSpaceAR(o).add(cc.v2(0,0));t.boxPosList.push(i);var n=t.createBox(i);t.scheduleOnce(function(){t.goInMap(n)})}),this.touchNode.active=!1,this.scheduleOnce(function(){t.touchNode.active=!0},(this.lines+1)*this.boxUnitTime)},e.prototype.goInMap=function(t,e){var o=this;void 0===e&&(e=0);var i,n=this.lines,r=this.boxUnitTime;i=e>0?e:n*r;var a=t.y;t.y=a-this.box_spacing_y*n,t.opacity=255,this.boxRun(t),cc.tween(t).to(i,{y:a}).call(function(){o.boxIdle(t)}).start()},e.prototype.createBox=function(t){if(0!==this.boxTypeArr.length&&0!==this.boxNumArr.length){var e=this.boxTypeArr.shift(),o=this.boxNumArr.shift(),i=1;switch(e){case 1:i=2;break;case 2:i=8;break;case 3:i=1;break;case 4:i=3;break;case 5:i=4;break;case 6:i=6;break;case 7:i=7;break;case 8:i=5}var n=String(e),a=this.boxLayer,s=this.dict.pre_box,c=cc.instantiate(s);return c.parent=a,c.position=t,c.name=n,c.m_spineID=this.getSpineIDByNum(o),this.scheduleOnce(function(){var t=c.getChildByName("spine").getComponent(sp.Skeleton);t.setSkin("skin"+i),t.setAnimation(0,"daiji"+c.m_spineID,!0)}),c[this.m_limit]=o,c[this.m_have]=0,c[this.m_arrive]=[],c[this.m_block]=this.getBlock(c),c[this.m_state]=r.Empty,c[this.m_type]=e,c[this.m_index]=a.childrenCount,c[this.m_col]=this.getBoxCol(c),c.opacity=0,this.setBoxIndex(c,3),this.boxQueue.push(c),c}},e.prototype.getBoxLine=function(t){var e=this.boxPosList[0],o=this.boxPosList[this.cols],i=t.y,n=function(t){return Math.abs(t.y-i)};return n(e)<5?1:n(o)<5?2:3},e.prototype.getBoxCol=function(t){for(var e=0;e<this.cols;e++){var o=this.boxPosList[e];if(Math.abs(t.x-o.x)<5)return e}return-1},e.prototype.getColsBox=function(t){var e=this,o=this.getColFirstPos(t).x,i=[];return this.boxLayer.children.map(function(n){if(t!=n&&t[e.m_state]!=r.Empty){var a=n.x-o;Math.abs(a)<5&&i.push(n)}}),i},e.prototype.getColFirstPos=function(t){var e=t[this.m_col];return this.boxPosList[e]},e.prototype.updateBoxColView=function(t){var e=this,o=this.box_spacing_y,i=this.getColFirstPos(t),n=this.boxUnitTime,a=this.getColsBox(t);if(a.length){a.sort(function(t,o){return t[e.m_index]-o[e.m_index]}),a.forEach(function(t){i.y,e.box_spacing_y,t[e.m_state]=r.Animation,e.boxRun(t),cc.tween(t).by(n,{y:o}).call(function(){e.boxIdle(t),t[e.m_block]=e.getBlock(t),t[e.m_state]=r.Empty}).start()});var s=__spreadArrays(a);s.sort(function(t,e){return t.y-e.y});var c=i.x,l=s[0].y,h=this.createBox(cc.v2(c,l));h&&this.scheduleOnce(function(){e.goInMap(h,e.boxUnitTime)})}},e.prototype.getBlock=function(t){return this.getBoxLine(t)},e.prototype.setBoxIndex=function(t,e){void 0===e&&(e=1),1==e?t.zIndex=3e3-t.y:2==e?t.zIndex=4e3-t.y+this.clearNum:3==e&&(t.zIndex=5e3-t.y+this.clearNum)},e.prototype.getSpineIDByNum=function(t){return[3,4,6].indexOf(t)+1},e.prototype.shuffleArray=function(t){for(var e,o=t.length-1;o>0;o--){var i=Math.floor(Math.random()*(o+1));e=[t[i],t[o]],t[o]=e[0],t[i]=e[1]}return t},e.prototype.getBoxCloseSFName=function(t,e){var o=0;switch(t){case"2-2":o=100;break;case"2-2-2":o=200;break;case"3-2":o=300;break;case"3-2-2":o=400;break;case"4-2":o=500;break;case"4-2-2":o=600}return String(o+e)},e.prototype.getBoxOpenSFName=function(t,e){var o=0;switch(t){case"2-2":case"2-2-2":o=100;break;case"3-2":case"3-2-2":o=300;break;case"4-2":case"4-2-2":o=500}var i=o+Number(e)+1e3;return String(i)},e.prototype.getBoxAnimId=function(t){var e=0;switch(t){case"2-2":case"2-2-2":e=1;break;case"3-2":case"3-2-2":e=2;break;case"4-2":case"4-2-2":e=3}return String(e)},e.prototype.setBoxSP=function(t,e){t.getChildByName("sp").getComponent(cc.Sprite).spriteFrame=this.loadSpriteFrame(e)},e.prototype.updateBoxState=function(){var t=this,e=[];this.boxMap.forEach(function(t,o){e.includes(o)||e.push(o)});for(var o=function(o){var n=e[o],a=i.boxMap.get(n);0===o?a.forEach(function(e){e[t.m_state]===r.Empty&&(e[t.m_block]=1)}):a.forEach(function(i){if(i[t.m_state]===r.Empty){i[t.m_block]=1;for(var n=t.getBoxBoundingBox(i),a=o-1;a>=0;a--){var s=e[a];t.boxMap.get(s).forEach(function(e){if(e[t.m_state]===r.Empty){var o=t.getBoxBoundingBox(e);n.intersects(o)&&(i[t.m_block]+=e[t.m_block])}})}}}),a.forEach(function(e){e.active&&(1===e[t.m_block]?e.getChildByName("sp").color=cc.Color.WHITE:e.getChildByName("sp").color=cc.color().fromHEX("#B2B1B1"))})},i=this,n=0;n<e.length;n++)o(n)},e.prototype.getBoxBoundingBox=function(t){var e=t.getChildByName("sp").getBoundingBoxToWorld();return cc.rect(e.x,e.y,e.width-6,e.height-6)},e.prototype.setBoxToWait=function(t,e){var o=this;e&&(e[this.m_state]=s.Occupy,t[this.m_wait]=e),this.addToArray(t,this.waitList),this.boxFly(t,e,function(){o.checkBoxTakeItem(t)||(cc.log("checkIsFail setBoxToWait"),o.checkIsFail())})},e.prototype.checkBoxTakeItem=function(t){if(!t.flySuc)return!1;var e=this.getItemData(t);if(e&&e.item){var o=e.item;return this.isCheck=!0,e.inFirstPos&&(this.deleteFromArray(o,this.itemQueue),this.setItemToBox(o,t,!0),this.itemSupply(),this.updateItemQueue()),!0}return!1},e.prototype.getItemData=function(t){if(0===this.itemQueue.length)return null;var e=this.getBoxRemainNum(t),o=this.itemQueue[0],i=!1;if(o[this.m_state]===a.Idle&&o[this.m_type]===t[this.m_type]&&e>0&&(i=!0),i){var n=o.position.sub(this.itemFirstPos).mag();return{item:o,inFirstPos:n<5}}return null},e.prototype.clearBox=function(t){var e=this,o=this.getBoxOccupyPos(t).length;t[this.m_state]=r.Finish,t.zIndex=10,this.setBoxIndex(t,2),this.scheduleOnce(function(){t.isClearBox,e.playLevelSound("Full"),e.playEffect(t,function(){e.deleteFromArray(t,e.waitList),t[e.m_wait]&&(t[e.m_wait][e.m_state]=s.Empty,t[e.m_wait]=null),e.setClearNum(o);var i=t.getChildByName("spine");i.scaleX=-1,d.default.playSpineCallBack(i,"likai",!0),cc.tween(t).by(.5,{x:1e3}).call(function(){t.active=!1,t.destroy(),t.parent=null,e.checkWin()}).start()})})},e.prototype.playEffect=function(t,e){var o=this;t.zIndex=1e4;var i=this.getBoxOccupyPos(t).length,n=this.dict.packingBox1;i>=4&&i<6?n=this.dict.packingBox2:i>=6&&(n=this.dict.packingBox3);var r=cc.instantiate(n);r.scale=1.05,r.active=!0,r.name="effect";var a=t[this.m_wait];this.effectLayer.addChild(r),r.position=d.default.convertPosition(a,r),r.zIndex=300;var s=r.children[0].getComponent(sp.Skeleton);s.timeScale=1.5,d.default.playSpineCallBack(s,"animation",!1,function(){}),this.scheduleOnce(function(){var i=t[o.m_place];i.active=!1;for(var n=i.getChildByName("item");n.childrenCount;)o.putItemToPool(n.children[0]);o.setBoxIndex(t,1),o.boxRun(t),cc.tween(t).by(.2,{y:100}).call(function(){r.active=!1,r.removeFromParent(!0),e&&e()}).start()},.4)},e.prototype.boxFly=function(t,e,o){var i=this,n=t.getChildByName("item");if(n||((n=new cc.Node("item")).parent=t,n.position=cc.v2(),n.zIndex=2),e){var r=e[this.m_index],a=this.standLayer.children[r],s=this.placeLayer.children[r];t[this.m_place]=s;var c=100*t[this.m_type]+this.getSpineIDByNum(t[this.m_limit]);this.setBoxIndex(t,1);var l=d.default.convertPosition(a,t);this.boxRun(t),cc.tween(t).to(.4,{position:l.add(cc.v2(0,10))}).call(function(){i.setBoxIndex(t,1),d.default.playSpineCallBack(t.getChildByName("spine"),"zhan",!0),t.flySuc=!0,s.active=!0,s.getChildByName("sp").getComponent(cc.Sprite).spriteFrame=i.loadSpriteFrame(String(c)),o&&o()}).start()}else o&&o()},e.prototype.boxRun=function(t){d.default.playSpineCallBack(t.getChildByName("spine"),"pao"+t.m_spineID,!0)},e.prototype.boxIdle=function(t){d.default.playSpineCallBack(t.getChildByName("spine"),"daiji"+t.m_spineID,!0)},e.prototype.getBoxOccupyPos=function(t){var e=this.getBoxTypeByName(t[this.m_limit]);return m[e]},e.prototype.getBoxTypeByName=function(t){var e="";return 3===t?e="3-1":4===t?e="2-2":6===t&&(e="3-2"),e},e.prototype.boxIsEmpty=function(t){return t[this.m_state]===r.Empty},e.prototype.getBoxGroup=function(t,e){void 0===e&&(e=-1);var o=0,n=e;if(e<0)try{o=this.boxTypeGroup[t].shift()}catch(i){}else{for(var r=__spreadArrays(this.boxTypeGroup[t]),a=0;a<r.length;a++){var s=r[a];if(s>=n){r[a]-=n,n=0;break}n-=s,r[a]=0}for(var c=!0;c;)r[0]<=0?r.shift():c=!1;this.boxTypeGroup[t].length=0,this.boxTypeGroup[t]=__spreadArrays(r),o=e}return o},e.prototype.initItemLayer=function(){this.drinkArr=new Array(this.levelTotal).fill(-1);var t=0,e=this.itemPosList.length;for(console.log("\u996e\u6599\uff1atotal",e);t<e;){var o=this.getItemType(-1);if(!o)break;for(var i=o.type,n=o.num,r=0;r<n;r++){var a;a=t+r>=e?e-1:t+r,this.createItem(a,Number(i))}t+=n}this.itemFirstPos=this.itemQueue[0].position},e.prototype.itemSupply=function(t){if(void 0===t&&(t=-1),!(this.itemQueue.length>this.itemPosList.length))if(this.nextNeedAdd.length>0){console.log("\u590d\u6d3b","\u996e\u6599\u65b0\u589e");var e=this.nextNeedAdd.shift();this.boxTypeGroup[e][0]-=1,0==this.boxTypeGroup[e][0]&&this.boxTypeGroup[e].shift();for(var o=0;o<1;o++){var i=this.itemPosList.length-1;this.createItem(i,e)}}else{var n=this.getItemType(t);if(n&&n.type&&n.num){e=n.type;var r=n.num;for(o=0;o<r;o++)i=this.itemPosList.length-1,this.createItem(i,e)}}},e.prototype.updateItemQueue=function(t){var e=this;void 0===t&&(t=0);for(var o=this.itemQueue,n=this.itemPosList,r=1,s=function(){if(++r>=o.length){e.state===i.prop_sort&&(e.state=i.waitTouch),e.itemQueue.forEach(function(t){t[e.m_state]=a.Idle}),e.waitList.sort(function(t,o){return e.getBoxOccupyPos(t).length-t[e.m_have]-(e.getBoxOccupyPos(o).length-o[e.m_have])});for(var t=!1,n=0;n<e.waitList.length;n++){var s=e.waitList[n];if(e.checkBoxTakeItem(s)){t=!0;break}}t||(e.isCheck=!1,e.checkIsFail())}},c=function(e){var i=o[e];if(i.stopAllActions(),cc.tween(i).stop(),e>n.length-1)i.opacity=255,s();else{i.opacity=255;for(var r=[],a=e,c=i[l.m_posIndex]-1;c>=a;c--)r.push(c);r.length&&l.itemMove(i,r,0,function(){s()},t*e)}},l=this,h=0;h<o.length;h++)c(h)},e.prototype.itemMove=function(t,e,o,i,n){var r=this;if(void 0===i&&(i=null),void 0===n&&(n=0),o>=e.length)i&&i();else{t[this.m_state]=a.Animation;var s=e[o],c=t.position,l=this.itemPosList[s];c.sub(l).mag(),cc.tween(t).delay(n).to(.055,{position:l}).call(function(){n>0&&(n=0),r.setItemIndex(t),t[r.m_posIndex]=s,o+=1,r.itemMove(t,e,o,i)}).start()}},e.prototype.setItemToBox=function(t,e,o){var i=this;if(void 0===o&&(o=!1),t[this.m_state]!=a.Box){var n=e[this.m_place].getChildByName("item"),s=this.getBoxOccupyPos(e),c=s.length,l=s[e[this.m_have]],h=cc.v2(l[0],l[1]),d=n.convertToWorldSpaceAR(h),u=t.parent.convertToNodeSpaceAR(d);e[this.m_have]++,this.getBoxRemainNum(e)<=0&&(e[this.m_state]=r.FinishAnimation,this.deleteFromArray(e,this.boxQueue)),t[this.m_state]=a.Box,this.setItemIndex(t,2),this.deleteFromArray(t,this.itemQueue);var p,f=t.position,g=u.sub(f).mag()/1e3;t.stopAllActions(),p=u.x>f.x?1:-1;var m=f.add(cc.v2(100*p,150));t.m_shadow.active=!1,cc.tween(t).bezierTo(g,f,m,u).call(function(){i.playLevelSound("Get_on");var e=t.getChildByName("sp").getComponent(cc.Sprite),o=10+t[i.m_type];e.spriteFrame=i.loadSpriteFrame(o+"_1"),i.changeParent(t,n)}).to(.1,{scale:1}).call(function(){i.addToArray(t,e[i.m_arrive]),e[i.m_arrive].length>=c&&(e.getChildByName("shadow")&&e.getChildByName("shadow").destroy(),i.clearBox(e)),t.stopAllActions()}).start()}},e.prototype.getItemType=function(t){void 0===t&&(t=-1);var e=this.level_config,o=this.getWeight();if(o.length){for(var i=e.limitRank,n=Math.min(i,o.length),r=[],a=0,s=0;s<n;s++){var c=o[s].split("_")[1];r.push(Number(c))}r.forEach(function(t){a+=Number(t)});for(var l=this.getRandomInteger(1,a),h=0,d=0,u=0;u<r.length;u++)if((h+=r[u])>=l&&this.checkHasItemByColor(o[u].split("_")[0])){d=u;break}var p=o[d].split("_")[0];if(-28807==this.levelID&&(p=this.nextNeedAdd2[this.nextNeedAdd2Index],this.nextNeedAdd2Index+=1,null==p))return null;var f=this.getBoxGroup(Number(p),t);return{type:Number(p),num:Number(f)}}return null},e.prototype.checkHasItemByColor=function(t){return!!this.boxTypeGroup[t]&&!!this.boxTypeGroup[t].length},e.prototype.createItem=function(t,e,o){void 0===o&&(o=null);var i=this.itemPosList[t];o&&i.addSelf(o);var n=String(Number(e)+10),r=this.itemLayer,s=this.poolMgr.get(this.pre_item,"pre_item");s.parent=r,s.position=i,s[this.m_index]=this.itemLayer.childrenCount,s[this.m_state]=a.Idle,s[this.m_type]=e,s[this.m_posIndex]=t,s.name=String(e);var c=s.getChildByName("sp"),l=this.image.getChildByName(n);c.getComponent(cc.Sprite).spriteFrame=l.getComponent(cc.Sprite).spriteFrame,this.setItemIndex(s),this.itemQueue.push(s);var h=s.getChildByName("shadow");h.active=!0,h.setPosition(-18,-18),this.changeParent(h,this.shadowLayer),h.m_follow=s;var d=h.parent.convertToWorldSpaceAR(h.position),u=s.parent.convertToWorldSpaceAR(s.position);return h.m_follow_wVec=u.sub(d),s.m_shadow=h,s},e.prototype.setItemIndex=function(t,e){switch(void 0===e&&(e=1),e){case 1:t.zIndex=5e3-t.y;break;case 2:t.zIndex=9999}},e.prototype.getWeight=function(t){var e=this;void 0===t&&(t=!1);var o=this.level_config,i={};this.types.forEach(function(t){return i[t]=0});var n=o.blockWeight;this.boxQueue.forEach(function(t){if(e.boxIsEmpty(t)){var o,r=t[e.m_type],a=t[e.m_block];o=1===a?n[0]:2==a?n[1]:n[2],i[r]+=o*t[e.m_limit]}});var r=o.waitWeight;if(this.waitList.forEach(function(t){var o=t[e.m_type],n=(t[e.m_limit]-t[e.m_have])*r;i[o]+=n}),t){var a=o.queueWeight;this.itemQueue.forEach(function(t){var o=t[e.m_type],n=a;i[o]-=n})}var s=[];for(var c in i){var l=c+"_"+i[c];s.push(l)}return s&&s.sort(function(t,e){var o=t.split("_"),i=Number(o[1]),n=e.split("_");return Number(n[1])-i}),s},e.prototype.initWaitLayer=function(){for(var t=this,e=function(e){var i=o.waitLayer.children[e];i[o.m_index]=e,i.name="wait_"+e;var n=i.getChildByName("video");(null==n?void 0:n.active)?(i[o.m_state]=s.Lock,d.default.onClickEvent(i,function(){n.active&&cc.game.emit(l.LEVEL_EVENT.REWARDVIDEO,function(e){0===e&&t.unlockWait(i)})})):i[o.m_state]=s.Empty;var r=o.placeLayer.children[e];r||((r=cc.instantiate(o.placeLayer.children[0])).parent=o.placeLayer),r.position=d.default.convertPosition(i,r),r.active=!1},o=this,i=0;i<this.waitLayer.children.length;i++)e(i);this.placeLayer.active=!0},e.prototype.unlockWait=function(t){var e=this;void 0===t&&(t=null),t||(t=this.waitLayer.children.find(function(t){return t[e.m_state]===s.Lock}));var o=t.getChildByName("video");o.active=!1,o.removeFromParent(!0),t[this.m_state]=s.Empty;var i=this.standLayer.children[t[this.m_index]];i.active=!0,i.scale=0,cc.tween(i).to(.1,{scale:1}).start();var n=cc.instantiate(this.dict.jiesuo);n.active=!0,n.parent=t,n.position=cc.v2(),d.default.playSpineCallBack(n,"animation",!1,function(){n.active=!0,n.removeFromParent(!0)})},e.prototype.func_check_unlockWait=function(){for(var t=null,e=0;e<this.waitLayer.children.length;e++){var o=this.waitLayer.children[e];o.name=String(e);var i=o.getChildByName("video");if(i&&i.active){t=o;break}}return t},e.prototype.func_unlockWait=function(){var t=this.func_check_unlockWait();t&&this.unlockWait(t)},e.prototype.getWait=function(){for(var t=0;t<this.waitLayer.children.length;t++){var e=this.waitLayer.children[t];if(e.active&&e[this.m_state]===s.Empty)return e}return null},e.prototype.getRandomInteger=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},e.prototype.loadSpriteFrame=function(t){return this.image.getChildByName(t).getComponent(cc.Sprite).spriteFrame},e.prototype.checkIsFail=function(){if(this.state!==i.over){for(var t=0,e=0;e<this.waitLayer.children.length;e++)this.waitLayer.children[e][this.m_state]!==s.Lock&&(t+=1);var o=0;for(e=0;e<this.waitList.length;e++)(a=this.waitList[e])[this.m_state]===r.Occupy&&(o+=1);if(t==o?cc.game.emit("checkTipText",1):t-1==o&&cc.game.emit("checkTipText",0),!this.isCheck&&o===t){var n=!1;for(e=0;e<this.waitList.length;e++){var a=this.waitList[e],c=this.getItemData(a);if(c&&c.item){n=!0;break}}n||this.fail(1)}}},e.prototype.update=function(){this.state!=i.none&&this.updateShadow()},e.prototype.updateShadow=function(){var t=this;this.shadowLayer.children.map(function(e){if(e.active){var o=e.m_follow;if(o&&o.active&&o[t.m_state]!=a.Box){var i=o.parent.convertToWorldSpaceAR(o.position).sub(e.m_follow_wVec),n=e.parent.convertToNodeSpaceAR(i);e.position=n}}})},e.prototype.initGuidence=function(){if(-28391===this.levelID){var t=this.dict.sz;cc.tween(t).to(.2,{scale:.8}).to(.2,{scale:1}).union().repeatForever().start()}},e.prototype.updateGuidence=function(){if(-28391===this.levelID){var t=this.dict.sz;t.active&&(t.active=!1)}},e.prototype.initGridLayer=function(){this.gridLayer.active=!1},e.prototype.getTouchNode=function(t){for(var e=this,o=this.boxLayer.children,i=[],n=[],a=0;a<o.length;a++){var s=o[a];s[this.m_state]===r.Empty&&s.getChildByName("box").getBoundingBoxToWorld().contains(t)&&(1==s[this.m_block]?i.push(s):n.push(s))}return i.length?(i.sort(function(t,o){return t[e.m_index]-o[e.m_index]}),i[0]):(n.length&&(n.sort(function(t,o){return o[e.m_index]-t[e.m_index]}),n[0].runAction(this.shackAction(.1,2))),null)},e.prototype.initEvent=function(){var t=this,e=null;d.default.touchEvent(this.touchNode,{sFunc:function(o){if(t.playClickSound(),t.state===i.waitTouch||t.state===i.prop_clear){var n=o.getLocation();if(e=t.getTouchNode(n))if(t.state==i.waitTouch){var a=t.getWait();a?(e[t.m_state]=r.Occupy,t.updateBoxState(),t.setBoxToWait(e,a),t.updateBoxColView(e)):e.runAction(t.shackAction(.1,2))}else t.state==i.prop_clear&&(e[t.m_state]=r.Finish,t.updateBoxState(),t.scheduleOnce(function(){cc.game.emit("isRemove",!1)},.2),t.setBoxToPropClear(e))}},mFunc:function(){},eFunc:function(){}}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.enterKeyInput,this)},e.prototype.setClearNum=function(t){this.clearNum+=t,this.clearNum<0&&(this.clearNum=0),this.updateProgress()},e.prototype.initProgress=function(){this.clearNum=0,this.updateProgress()},e.prototype.updateProgress=function(){var t=this.levelTotal,e=t-this.clearNum,o=(this.clearNum/t).toFixed(2),i=Number(o);i*=100,(i=Math.floor(i))>100&&(i=100),this.labProgress.string=""+e,cc.game.emit("allPersonAmount",e,t),console.log("allPersonAmount",e,t)},e.prototype.checkWin=function(){this.boxLayer.children.some(function(t){return t.active})||this.suc(1)},e.prototype.onLevelReady=function(){this.init()},e.prototype.shackAction=function(t,e){var o=cc.moveBy(t,e,e),i=cc.moveBy(t,-e,-e),n=cc.moveBy(.8*t,.8*e,.8*e),r=cc.moveBy(.8*t,.8*-e,.8*-e),a=cc.moveBy(.6*t,.6*e,.6*e),s=cc.moveBy(.6*t,.6*-e,.6*-e),c=cc.moveBy(.4*t,.4*e,.4*e),l=cc.moveBy(.4*t,.4*-e,.4*-e),h=cc.moveBy(.2*t,.2*e,.2*e),d=cc.moveBy(.2*t,.2*-e,.2*-e);return cc.sequence(o,i,n,r,a,s,c,l,h,d)},e.prototype.suc=function(t){var e=this;void 0===t&&(t=1),cc.log("suc"),this.state!=i.over&&(this.state=i.over,this.scheduleOnce(function(){e.playRight(null,1)},t))},e.prototype.lose=function(t,e,o,n){if(void 0===e&&(e=!0),void 0===n&&(n=1),this.state!=i.over){if(t)if(t instanceof cc.Node){var r=cc.instantiate(t);r.x+=70,r.y-=70,r.parent=t.parent,r.active=!1,e?this.playError(r):this.playErrorOnce(r),r.destroy()}else e?this.playError(t):this.playErrorOnce(t);else e?this.playError():this.playErrorOnce();this.scheduleOnce(function(){o&&o()},n)}},e.prototype.fail=function(t,e){var o=this;void 0===t&&(t=1),void 0===e&&(e=null),cc.log("fail"),this.lose(null,!1,function(){cc.log("levelReviveHelper"),h.default.levelFailEvent("\u662f\u5426\u9700\u8981\u590d\u6d3b",function(){o.func_revive()})}),this.state=i.over},e.prototype.getWordPos=function(t){return t.parent.convertToWorldSpaceAR(t.position)},e.prototype.getDistance=function(t,e){var o=d.default.convertPosition(t,e);return e.position.sub(o).mag()},e.prototype.deleteFromArray=function(t,e){var o=e.indexOf(t);-1!==o&&e.splice(o,1)},e.prototype.addToArray=function(t,e){-1===e.indexOf(t)&&e.push(t)},e.prototype.changeParent=function(t,e){var o=t.parent.convertToWorldSpaceAR(t.position);t.parent=e,t.position=t.parent.convertToNodeSpaceAR(o)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),cc.director.getCollisionManager().enabled=!1,cc.director.getCollisionManager().enabledDebugDraw=!1,this.unscheduleAllCallbacks(),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.enterKeyInput,this)},e.prototype.initPool=function(){for(var t=0;t<4;t++)this.poolMgr.put(cc.instantiate(this.pre_item),"pre_item")},e.prototype.putItemToPool=function(t){t.active=!1;var e=t.m_shadow;e.m_follow=null,this.changeParent(e,t),this.poolMgr.put(t,"pre_item")},e.prototype.func_chooseClear=function(){this.state!=i.prop_clear&&(cc.log("\u9053\u5177\uff1a\u9009\u62e9\u6d88\u9664"),this.state=i.prop_clear,cc.game.emit("isRemove",!0))},e.prototype.getBoxRemainNum=function(t){return t[this.m_limit]-t[this.m_have]},e.prototype.setBoxToPropClear=function(t,e){var o=this;void 0===e&&(e=!0);var n=null;e&&(n=this.dict.prop_clear_box),t.isClearBox=!0;for(var r=this.getBoxRemainNum(t),a=[],s=__spreadArrays(this.itemQueue),c=t[this.m_type],l=0;l<s.length&&(c!==(f=s[l])[this.m_type]||(a.push(f),this.deleteFromArray(f,this.itemQueue),0!=--r));l++);if(r>0)for(var h=this.itemPosList.length-1,d=cc.v2(),u=this.getBoxGroup(c,r),p=0;p<u;p++){var f;d=cc.v2(0,30*(p+1)),(f=this.createItem(h,c,d)).opacity=0,a.push(f)}this.boxFly(t,n,function(){a.forEach(function(e){e.opacity=255,e.stopAllActions(),o.setItemToBox(e,t,!0)});for(var e=t[o.m_limit],n=0;n<e;n++)o.itemSupply();o.itemQueue.forEach(function(t){return t.stopAllActions()}),o.updateItemQueue(),o.state=i.waitTouch})},e.prototype.func_sort=function(){this.state=i.prop_sort;var t=this.getWeight(!0);if(cc.log("\u9053\u5177\uff1a\u6392\u5e8f"),cc.log("\u6392\u5e8f\uff1a\u6743\u91cd\uff1a",t),cc.log("\u961f\u5217\uff1a",this.itemQueue.length),t.length){for(var e=this.itemPosList.length-1,o=this.itemPosList[e],n=[],r=0;r<t.length;r++)for(var a=t[r],s=Number(a.split("_")[0]),c=0;c<this.itemQueue.length;c++){var l=this.itemQueue[c];s===l[this.m_type]&&(l[this.m_posIndex]=e,l.position=o,n.push(l))}this.itemQueue.length=0,this.itemQueue=__spreadArrays(n),this.updateItemQueue(.05)}},e.prototype.func_revive=function(){this.state=i.waitTouch,cc.log("\u9053\u5177\uff1a\u590d\u6d3b");var t=this.func_check_unlockWait();t&&this.unlockWait(t),this.newReviveAnim()},e.prototype.clear=function(t){var e=this;t.isClearBox=!0;var o=this.dict.prop_clear_box;this.boxFly(t,o,function(){var o=e.getBoxOccupyPos(t).length;o-=t[e.m_have],console.log("\u6d88\u9664\u9053\u5177",o);for(var n=t[e.m_type],r=[],a=new Array(o).fill(n),s=0;s<o;s++){var c=e.itemQueue[s];r.push(c)}for(s=0;s<e.itemQueue.length;s++){var l=(c=e.itemQueue[s])[e.m_type];e.boxTypeGroup[n].length||(e.boxTypeGroup[n]=[0]),e.boxTypeGroup[n][0]+=1,l!=n&&a.push(l)}for(console.log("\u8fd8\u5269\u4f59\u6709----",a.length,e.itemQueue.length);a.length<e.itemQueue.length;)l=e.getSurplusColor(),console.log("\u8fd8\u5269\u4f59\u6709",l),e.boxTypeGroup[l][0]-=1,a.push(l);for(cc.log("getBoxGroup start2 ",d.default.deepCopy(e.boxTypeGroup)),console.log("colorSort",a),s=0;s<a.length;s++){var h=a[s];if(e.itemQueue[s]){c=e.itemQueue[s];var u=String(Number(h)+10);c[e.m_type]=h,c.name=String(h);var p=c.getChildByName("sp"),f=e.image.getChildByName(u);p.getComponent(cc.Sprite).spriteFrame=f.getComponent(cc.Sprite).spriteFrame}}cc.log("getBoxGroup start3 ",d.default.deepCopy(e.boxTypeGroup)),r.forEach(function(o){e.setItemToBox(o,t,!0)}),e.updateItemQueue(),e.state=i.waitTouch})},e.prototype.setSurplusColor=function(t,e){for(var o=0;o<this.itemQueue.length;o++)if(!e[o]){var i=this.itemQueue[o];if(t==i[this.m_type]){var n=this.getSurplusColor();console.log("\u8fd8\u5269\u4f59\u6709",n),this.boxTypeGroup[n][0]-=1,i[this.m_type]=n;var r=String(Number(n)+10),a=i.getChildByName("sp"),s=this.image.getChildByName(r);return void(a.getComponent(cc.Sprite).spriteFrame=s.getComponent(cc.Sprite).spriteFrame)}}},e.prototype.reviveAnim=function(){var t=this;this.isReviving||(this.isReviving=!0,this.dict.starSpine.active=!0,this.schedule(function(){for(var e=0;e<t.itemQueue.length;e++){var o=t.itemQueue[e],i=d.default.getRandomInt(1,8);t.setColorItemImg_revive(i,o)}},.2,2.2),cc.tween(this.node).delay(1.5).call(function(){t.dict.starSpine.active=!1;for(var e=Math.min(4,t.waitList.length),o=[],i=0;i<e;i++){var n=t.waitList[i],r=t.getBoxOccupyPos(n).length;r-=n[t.m_have];var a=n[t.m_type];o=o.concat(new Array(r).fill(a))}for(i=0;i<t.itemQueue.length;i++)a=(c=t.itemQueue[i])[t.m_type],t.boxTypeGroup[a].length||(t.boxTypeGroup[a]=[0]),o[i]&&(t.boxTypeGroup[a][0]+=1);for(console.log("colorSort",o),console.log("itemQueue",t.itemQueue.length),i=0;i<o.length;i++){var s=o[i];if(t.itemQueue[i]){var c=t.itemQueue[i],l=String(Number(s)+10);c[t.m_type]=s,c.name=String(s);var h=c.getChildByName("sp"),u=t.image.getChildByName(l);h.getComponent(cc.Sprite).spriteFrame=u.getComponent(cc.Sprite).spriteFrame,t.boxTypeGroup[s][0]-=1,0==t.boxTypeGroup[s][0]&&t.boxTypeGroup[s].shift()}else t.nextNeedAdd.push(s)}var p=t.itemQueue.length;for(console.log("\u6d4b\u8bd5",t.getSurplusColor()),i=0;i<p;i++)c=t.itemQueue[i],o[i]||(s=c[t.m_type],t.boxTypeGroup[s].length&&t.boxTypeGroup[s][0]||(s=t.getSurplusColor(),console.log("\u8fd8\u5269\u4f59\u6709",s),t.boxTypeGroup[s][0]-=1),c[t.m_type]=s,l=String(Number(s)+10),h=c.getChildByName("sp"),u=t.image.getChildByName(l),h.getComponent(cc.Sprite).spriteFrame=u.getComponent(cc.Sprite).spriteFrame);for(cc.log(" end2",d.default.deepCopy(t.boxTypeGroup)),cc.log(" nextNeedAdd",t.nextNeedAdd),i=0;i<e&&(n=t.waitList[i],!t.checkBoxTakeItem(n));i++);t.isReviving=!1}).start())},e.prototype.newReviveAnim=function(){var t=this;this.isReviving||(this.isReviving=!0,this.dict.starSpine.active=!0,this.schedule(function(){for(var e=0;e<t.itemQueue.length;e++){var o=t.itemQueue[e],i=d.default.getRandomInt(1,8);t.setColorItemImg_revive(i,o)}},.2,2.2),cc.tween(this.node).delay(1.5).call(function(){t.dict.starSpine.active=!1;for(var e=Math.min(4,t.waitList.length),o=[],i=0;i<e;i++){var n=t.waitList[i],r=t.getBoxOccupyPos(n).length;r-=n[t.m_have];var a=n[t.m_type];o=o.concat(new Array(r).fill(a))}var s={};for(i=0;i<t.itemQueue.length;i++)s[c=(g=t.itemQueue[i])[t.m_type]]||(s[c]=0),s[c]+=1;for(var c in s)s[c]&&t.boxTypeGroup[c].push(s[c]);for(console.log("colorSort",o),console.log("itemQueue",t.itemQueue.length),i=0;i<t.itemQueue.length;i++)(g=t.itemQueue[i]).m_shadow.active=!1,g.destroy();t.itemQueue=[],t.nextNeedAdd_new=o;for(var l=0,h=t.itemPosList.length;l<h;){var d=void 0,u=void 0;if(t.nextNeedAdd_new.length>0)d=t.nextNeedAdd_new.shift(),u=1,t.getBoxGroup(d,1);else{var p=t.getItemType(-1);if(d=p.type,u=p.num,!p)break}for(i=0;i<u;i++){var f,g=t.createItem(f,Number(d));f=l+i>=h?h-1:l+i}l+=u}for(i=0;i<e&&(n=t.waitList[i],!t.checkBoxTakeItem(n));i++);t.isReviving=!1}).start())},e.prototype.getSurplusColor=function(){for(var t=1;t<=8;t++){var e=this.boxTypeGroup[t];if(e)for(var o=0;o<e.length;o++)if(e[o])return t}},e.prototype.setColorItemImg_revive=function(t,e){var o=String(Number(t)+10),i=e.getChildByName("sp"),n=this.image.getChildByName(o);i.getComponent(cc.Sprite).spriteFrame=n.getComponent(cc.Sprite).spriteFrame},e.prototype.testLabel=function(t,e){var o=t.getChildByName("labelNode");o||((o=new cc.Node).name="labelNode",o.parent=t,o.position=cc.v2());var i=o.getComponent(cc.Label);i||(i=o.addComponent(cc.Label)),i.string=e},e.prototype.enterKeyInput=function(t){switch(t.keyCode){case cc.macro.KEY.a:case cc.macro.KEY.s:return this.func_sort();case cc.macro.KEY.x:}},__decorate([g({type:cc.Integer,tooltip:"\u884c"})],e.prototype,"lines",void 0),__decorate([g({type:cc.Integer,tooltip:"\u5217"})],e.prototype,"cols",void 0),__decorate([f],e)}(c.default);o.default=v;var y=[{x:-240,y:-50},{x:-80,y:-50},{x:80,y:-50},{x:240,y:-50},{x:-240,y:-170},{x:-80,y:-170},{x:80,y:-170},{x:240,y:-170},{x:-240,y:-290},{x:-80,y:-290},{x:80,y:-290},{x:240,y:-290},{x:-240,y:-410},{x:-80,y:-410},{x:80,y:-410},{x:240,y:-410},{x:-240,y:-530},{x:-80,y:-530},{x:80,y:-530},{x:240,y:-530},{x:-240,y:-650},{x:-80,y:-650},{x:80,y:-650},{x:240,y:-650}],_=[{x:220,y:930},{x:220,y:865},{x:220,y:800},{x:220,y:735},{x:165,y:735},{x:110,y:735},{x:55,y:735},{x:0,y:735},{x:-55,y:735},{x:-110,y:735},{x:-165,y:735},{x:-220,y:735},{x:-220,y:695},{x:-220,y:645},{x:-165,y:645},{x:-110,y:645},{x:-55,y:645},{x:0,y:645},{x:55,y:645},{x:110,y:645},{x:165,y:645},{x:220,y:645},{x:220,y:600.223},{x:220,y:560},{x:165,y:560},{x:110,y:560},{x:55,y:560},{x:0,y:560},{x:0,y:500.732}];cc._RF.pop()},{"./BrainLevelBase":"BrainLevelBase","./LevelConstant":"LevelConstant","./LevelUtil":"LevelUtil","./PoolMgr":"PoolMgr","./levelReviveHelper":"levelReviveHelper"}],"Level-290760_BoxItem":[function(t,e,o){"use strict";cc._RF.push(e,"650e4GS/elGAKA3Vt23Wydw","Level-290760_BoxItem");var i=t("./Level-290760_Enum"),n=cc._decorator,r=n.ccclass,a=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mgr=null,e.ID=null,e.path=null,e.dir=null,e.seat=null,e.state=i.BoxState.Idle,e.percent=0,e.color=null,e}return __extends(e,t),e.prototype.init=function(t){this.mgr=t;var e=this.node.name.split("_");this.dir=e[0],this.seat=Number(e[1])},e.prototype.showPathAndID=function(){var t=new cc.Node;t.name="path",t.addComponent(cc.Label).string=""+this.path,t.color=cc.Color.BLACK,this.node.addChild(t),t.position=cc.v3(-13.105,-26.21);var e=cc.instantiate(t);e.position=cc.v3(0,-20),e.parent=this.node,e.color=cc.Color.GREEN,e.getComponent(cc.Label).string="ID-"+this.ID,e.getComponent(cc.Label).fontSize=20},e.prototype.setBoxImg=function(t,e){this.color=t,this.node.getChildByName("car").getComponent(cc.Sprite).spriteFrame=this.mgr.mgr.boxAtlas.getSpriteFrame("f29076_"+(e[this.node.name]+t+1))},__decorate([r],e)}(cc.Component));o.default=a,cc._RF.pop()},{"./Level-290760_Enum":"Level-290760_Enum"}],"Level-290760_Box":[function(t,e,o){"use strict";cc._RF.push(e,"82a8a/u50FDQKC8SY5xwQ10","Level-290760_Box");var i=t("./Level-290760_BoxItem"),n=t("./Level-290760_Enum"),r=cc._decorator,a=r.ccclass,s=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isTest=!1,e.mgr=null,e.boxArrByIDSort=[],e.batchMap={},e}return __extends(e,t),e.prototype.init=function(t){var e=this;this.mgr=t,this.isTest=!1,this.node.children.forEach(function(t){t.addComponent(i.default).init(e)}),this.node.children.forEach(function(t){e.boxArrByIDSort.push(t),t.getComponent(i.default).path=e.getPath(t),e.mgr.model.drinkAmount+=t.getComponent(i.default).seat}),this.setBoxID()},e.prototype.getPath=function(t){if(t.getComponent(i.default).path)return t.getComponent(i.default).path;for(var e=t.width,o=t.convertToWorldSpaceAR(cc.v2(-e/2,0)),n=t.convertToWorldSpaceAR(cc.v2(-e/2,3*cc.winSize.height)),r=t.convertToWorldSpaceAR(cc.v2(e/2,0)),a=t.convertToWorldSpaceAR(cc.v2(e/2,3*cc.winSize.height)),s=this.getOtherBoxArrByDistance(t),c=!1,l=1,h=0;h<s.length;h++){var d=s[h];if(d!=t){var u,p,f,g,m,v,y=d.width,_=d.height;u=d.convertToWorldSpaceAR(cc.v2(-y/2,-_)),p=d.convertToWorldSpaceAR(cc.v2(-y/2,0)),f=d.convertToWorldSpaceAR(cc.v2(y/2,-_)),g=d.convertToWorldSpaceAR(cc.v2(y/2,0)),m=d.convertToWorldSpaceAR(cc.v2(y/2+2,0)),v=d.convertToWorldSpaceAR(cc.v2(-y/2-2,0)),(cc.Intersection.lineLine(o,n,u,p)||cc.Intersection.lineLine(o,n,f,g)||cc.Intersection.lineLine(r,a,u,p)||cc.Intersection.lineLine(r,a,f,g)||cc.Intersection.lineLine(o,n,m,v)||cc.Intersection.lineLine(o,n,m,v)||cc.Intersection.lineLine(r,a,m,v)||cc.Intersection.lineLine(r,a,m,v))&&(c=!0,d.getComponent(i.default).path?l+=d.getComponent(i.default).path:l+=this.getPath(d))}}return c?(t.getComponent(i.default).path=l,l):(t.getComponent(i.default).path=1,1)},e.prototype.getOtherBoxArrByDistance=function(t){for(var e=[],o=0;o<this.node.children.length;o++){var r=this.node.children[o];r&&r!=t&&r.active&&r.getComponent(i.default).state==n.BoxState.Idle&&e.push(r)}var a=t.convertToWorldSpaceAR(cc.v2(0,0));return e.sort(function(t,e){var o=[t.convertToWorldSpaceAR(cc.v2(0,0)),t.convertToWorldSpaceAR(cc.v2(0,-t.height))],i=[e.convertToWorldSpaceAR(cc.v2(0,0)),e.convertToWorldSpaceAR(cc.v2(0,-e.height))];return cc.Intersection.pointLineDistance(a,o[0],o[1],!0)-cc.Intersection.pointLineDistance(a,i[0],i[1],!0)}),e},e.prototype.setBoxID=function(){var t=this;this.boxArrByIDSort.sort(function(t,e){return t.getComponent(i.default).path-e.getComponent(i.default).path}),this.boxArrByIDSort.forEach(function(e,o){e.getComponent(i.default).ID=o,e.getComponent(i.default).percent=Math.round((o+1)/t.boxArrByIDSort.length*100),t.isTest&&e.getComponent(i.default).showPathAndID(),t.setBoxColor(e.getComponent(i.default))})},e.prototype.setBoxColor=function(t){for(var e=this.mgr.model.config.carColor,o=this.mgr.model.colorSort,i=this.mgr.model.boxNameMap,n=0;n<e.length;n++){var r=e[n],a=r[2];if(t.percent<=r[1]&&t.percent>=r[0]){this.batchMap[n]||(this.batchMap[n]=[]);for(var s=this.mgr.randomNum(a[0],a[1]),c=o[s];this.batchMap[n].includes(c)&&this.batchMap[n].length<a[1]-a[0]+1;)c=o[s=this.mgr.randomNum(a[0],a[1])];this.batchMap[n].push(c),t.setBoxImg(c,i);break}}},__decorate([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{"./Level-290760_BoxItem":"Level-290760_BoxItem","./Level-290760_Enum":"Level-290760_Enum"}],"Level-290760_Controller":[function(t,e,o){"use strict";cc._RF.push(e,"2d9527YnMpNn4MqmpCbRoLB","Level-290760_Controller");var i=t("./BrainLevelBase"),n=t("./Level-290760_Box"),r=t("./Level-290760_Drink"),a=t("./Level-290760_Model"),s=t("./Level-290760_Wait"),c=cc._decorator,l=c.ccclass,h=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.drinkAtlas=null,e.boxAtlas=null,e.model=new a.default,e.drinkRoot=null,e.waitRoot=null,e.boxRoot=null,e.amount=null,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.drinkRoot=this.dict.drinkRoot,this.boxRoot=this.dict.boxRoot,this.waitRoot=this.dict.waitRoot,this.amount=this.dict.amount.getComponent(cc.Label),this.setCollisionManager(!0,!1),this.dict.propBtnRoot.active=!1},e.prototype.onLevelReady=function(){this.model.init(this.levelJSON.json[this.levelID]),this.boxRoot.addComponent(n.default).init(this),this.drinkRoot.addComponent(r.default).init(this),this.waitRoot.addComponent(s.default).init(this),this.updateDrinkAmountView()},e.prototype.updateDrinkAmountView=function(){this.amount.string=(this.model.drinkAmount-this.model.removeDrinkAmount).toString()},e.prototype.randomNum=function(t,e,o){var i=e-t,n=o||Math.random();return t+Math.round(n*i)},__decorate([h(cc.SpriteAtlas)],e.prototype,"drinkAtlas",void 0),__decorate([h(cc.SpriteAtlas)],e.prototype,"boxAtlas",void 0),__decorate([l],e)}(i.default);o.default=d,cc._RF.pop()},{"./BrainLevelBase":"BrainLevelBase","./Level-290760_Box":"Level-290760_Box","./Level-290760_Drink":"Level-290760_Drink","./Level-290760_Model":"Level-290760_Model","./Level-290760_Wait":"Level-290760_Wait"}],"Level-290760_DrinkItem":[function(t,e,o){"use strict";cc._RF.push(e,"330fazGr8ZJsa+otKH6nqNo","Level-290760_DrinkItem");var i=t("./Level-290760_BoxItem"),n=t("./Level-290760_Enum"),r=cc._decorator,a=r.ccclass,s=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mgr=null,e.targetPosIndex=-1,e.colorType=null,e.currentPosIndex=-1,e.state=n.DrinkState.Idle,e.delayMoveTime=0,e.speed=1e3,e.isAnim=!1,e}return __extends(e,t),e.prototype.init=function(t,e,o){var i=this;this.mgr=t,this.node.position=cc.v3(219.21,208.03),this.currentPosIndex=this.mgr.drinkPos.length,this.targetPosIndex=o,this.colorType=e.color,this.node.zIndex=this.mgr.drinkPos.length-this.targetPosIndex,this.delayMoveTime=54.5/this.speed,this.node.getComponent(cc.Sprite).spriteFrame=this.mgr.mgr.drinkAtlas.getSpriteFrame("f28749_1"+(this.colorType+1)),this.targetPosIndex>=this.mgr.drinkPos.length||this.scheduleOnce(function(){i.move()},this.delayMoveTime*this.targetPosIndex)},e.prototype.move=function(){var t=this;this.isAnim=!0;var e=this.mgr.drinkPos[this.currentPosIndex-1],o=this.node.position.sub(cc.v3(e[0],e[1])).mag();cc.tween(this.node).to(o/this.speed,{position:cc.v3(e[0],e[1])}).call(function(){t.currentPosIndex-=1,t.currentPosIndex!=t.targetPosIndex?t.move():0==t.currentPosIndex&&(console.log("\u5230\u4f4d"),t.isAnim=!1,t.mgr.isReady=!0)}).start()},e.prototype.moveToBox=function(t){var e,o,r,a=this;this.isAnim=!0,this.state=n.DrinkState.Packaged;var s=t.getComponent(i.default).getPosNode();s&&(e=s.parent.convertToWorldSpaceAR(s.position),o=this.node.parent.convertToNodeSpaceAR(e),r=this.node.position.sub(o).mag()),cc.tween(this.node).to(r/this.speed,{position:o}).call(function(){var t=a.node.getComponent(cc.Sprite).spriteFrame.name;s.getComponent(cc.Sprite).spriteFrame=a.mgr.mgr.drinkAtlas.getSpriteFrame(t+"-1"),s.active=!0,a.node.destroy()}).start()},__decorate([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{"./Level-290760_BoxItem":"Level-290760_BoxItem","./Level-290760_Enum":"Level-290760_Enum"}],"Level-290760_Drink":[function(t,e,o){"use strict";cc._RF.push(e,"474d8t1y2JK4aH2Y1fXmENR","Level-290760_Drink");var i=t("./Level-290760_DrinkItem"),n=cc._decorator,r=n.ccclass,a=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.drinkPos=[],e.drinkQueue=[],e.mgr=null,e.isReady=!1,e}return __extends(e,t),e.prototype.init=function(t){for(this.mgr=t,this.drinkPos=JSON.parse(JSON.stringify(this.mgr.model.drinkPos)).reverse();this.drinkQueue.length<this.drinkPos.length;){var e=this.getDrinkColor(-1);if(!e)break;e.color;for(var o=e.amount,n=0;n<o;n++){var r=cc.instantiate(this.mgr.dict.drinkPrefab);r.parent=this.node,r.addComponent(i.default).init(this,e,this.drinkQueue.length),this.drinkQueue.push(r.getComponent(i.default))}}},e.prototype.getDrinkColor=function(t){var e=this.getWeight();if(e){for(var o=this.mgr.model.config.limitRank,i=Math.min(o,e.length),n=[],r=0,a=0;a<i;a++){var s=e[a].split("_")[1];n.push(Number(s))}n.forEach(function(t){r+=Number(t)});for(var c=this.mgr.randomNum(1,r),l=0,h=0,d=0;d<n.length;d++)if((l+=n[d])>=c&&this.containerControl.checkHasItemByColor(e[d].split("_")[0])){h=d;break}var u=e[h].split("_")[0],p=this.containerControl.getBoxGroup(Number(u),t);return{color:Number(u),amount:Number(p)}}},e.prototype.getWeight=function(t){void 0===t&&(t=!1);var e={};this.colorType.forEach(function(t){return e[t]=0});var o=this.levelData.blockWeight;this.boxQueue.forEach(function(t){var i=t.getComponent(BoxItem);if(i.state==BoxState.Idle){var n,r=i.colorType,a=i.coverCount;n=1===a?o[0]:2==a?o[1]:o[2],e[r]+=n*i.posCount}});var n=this.levelData.waitWeight;if(this.getWaitAllBox().forEach(function(t){var o=t.getComponent(BoxItem),i=o.colorType,r=(o.posCount-o.putCount)*n;e[i]+=r}),t){var r=this.levelData.queueWeight;this.drinkQueue.forEach(function(t){var o=t.getComponent(i.default).colorType,n=r;e[o]-=n})}var a=[];for(var s in e){var c=s+"_"+e[s];a.push(c)}return a&&a.sort(function(t,e){var o=t.split("_"),i=Number(o[1]),n=e.split("_");return Number(n[1])-i}),a},__decorate([r],e)}(cc.Component));o.default=a,cc._RF.pop()},{"./Level-290760_DrinkItem":"Level-290760_DrinkItem"}],"Level-290760_Enum":[function(t,e,o){"use strict";var i;cc._RF.push(e,"153b2Gl4j1NO71+r7z39wfU","Level-290760_Enum"),o.ColorType=o.DrinkState=o.BoxState=void 0,(i=o.BoxState||(o.BoxState={}))[i.Idle=0]="Idle",i[i.OnWait=1]="OnWait",i[i.Packaged=2]="Packaged",function(t){t[t.Idle=0]="Idle",t[t.Packaged=1]="Packaged"}(o.DrinkState||(o.DrinkState={})),function(t){t[t.Red=0]="Red",t[t.Purple=1]="Purple",t[t.Pink=2]="Pink",t[t.Yellow=3]="Yellow",t[t.Brown=4]="Brown",t[t.Green=5]="Green",t[t.LightBlue=6]="LightBlue",t[t.Blue=7]="Blue"}(o.ColorType||(o.ColorType={})),cc._RF.pop()},{}],"Level-290760_Model":[function(t,e,o){"use strict";cc._RF.push(e,"03c60k5QXNC36tN/i+UinF0","Level-290760_Model");var i=function(){function t(){this.drinkPos=[[219.21,163.03],[219.21,119.03],[219.21,75.03],[219.21,31.03],[164.71,31.03],[110.21,31.03],[55.71,31.03],[1.21,31.03],[-53.29,31.03],[-107.79,31.03],[-162.29,31.03],[-216.79,31.03],[-216.79,-12.97],[-216.79,-56.97],[-162.29,-56.97],[-107.79,-56.97],[-53.29,-56.97],[1.21,-56.97],[55.71,-56.97],[110.21,-56.97],[164.71,-56.97],[219.21,-56.97],[219.21,-100.97],[219.21,-144.97],[164.71,-144.97],[110.21,-144.97],[55.71,-144.97],[1.21,-144.97],[1.21,-194.97]],this.colors=["\u7ea20","\u7d2b1","\u7c892","\u9ec43","\u68d54","\u7eff5","\u6d45\u84dd6","\u84dd7"],this.colorSort=[0,3,4,7,1,2,5,6],this.boxNameMap={right_4:300,right_6:600,right_8:900},this.config=null,this.carWeight=[],this.extraWeight=[],this.waitWeight=[],this.sortWeight=[],this.drinkAmount=null,this.removeDrinkAmount=0}return t.prototype.fill=function(t){return new Array(t).fill(0)},t.prototype.init=function(t){this.config=JSON.parse(JSON.stringify(t)),this.colorSort=this.shuffleArray(this.colorSort),this.carWeight=this.fill(this.colors.length),this.extraWeight=this.fill(this.colors.length),this.waitWeight=this.fill(this.colors.length),this.sortWeight=this.fill(this.colors.length)},t.prototype.shuffleArray=function(t){for(var e,o=t.length-1;o>0;o--){var i=Math.floor(Math.random()*(o+1));e=[t[i],t[o]],t[o]=e[0],t[i]=e[1]}return t},t}();o.default=i,cc._RF.pop()},{}],"Level-290760_WaitItem":[function(t,e,o){"use strict";cc._RF.push(e,"81207odu/xAIpCU7vp0pxiX","Level-290760_WaitItem");var i=cc._decorator,n=i.ccclass,r=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mgr=null,e.path=1,e}return __extends(e,t),e.prototype.init=function(t){this.mgr=t},__decorate([n],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],"Level-290760_Wait":[function(t,e,o){"use strict";cc._RF.push(e,"ce842y6GPdLbJwf0jes8p+u","Level-290760_Wait");var i=t("./Level-290760_WaitItem"),n=cc._decorator,r=n.ccclass,a=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mgr=null,e}return __extends(e,t),e.prototype.init=function(t){var e=this;this.mgr=t,this.node.children.forEach(function(t){t.addComponent(i.default).init(e)})},__decorate([r],e)}(cc.Component));o.default=a,cc._RF.pop()},{"./Level-290760_WaitItem":"Level-290760_WaitItem"}],"Level-29076_boxCarItem":[function(t,e,o){"use strict";cc._RF.push(e,"e87d1ZTFUdOKoUxDxjvcQmw","Level-29076_boxCarItem");var i=t("../../scripts/AudioManager"),n=t("./Level-249667_busConfig"),r=t("./Level-249667_chain"),a=t("./Level-249667_uTransport"),s=cc._decorator,c=s.ccclass,l=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.seatTotalAmount=4,e.railCarTurn=[],e.carColor=null,e.carID=null,e.path=0,e.emptySeatAmount=0,e.dir=0,e.colorImgName=null,e.dirImgName=null,e.lenImgName=null,e.mgr=null,e.isTransportCar=!1,e.isBlackCar=!1,e.isTurntableCar=!1,e.turntablePosIndex=-1,e.prevCar=null,e.nextCar=null,e.leftObliqueCar=!1,e.rightObliqueCar=!1,e.isUTransportCar=!1,e.isUTransportCar_noIn=!1,e.isFireEngine=!1,e.isPoliceCar=!1,e.isRichCar=!1,e.isTramcar=!1,e.tramcarPosIndex=0,e.otherCarNode=[],e.minLen=10,e.oldPos=null,e.floatPos=null,e.carState=n.CarState.Idle,e.speed=1170,e.isCanClick=!0,e.isCollision=!1,e.isReadyDestroy=!1,e}var o;return __extends(e,t),o=e,e.prototype.onLoad=function(){this.emptySeatAmount=this.seatTotalAmount,this.oldPos=this.node.position,"1"==this.node.name[0]&&"2"==this.node.name[1]&&(this.isFireEngine=!0),"1"==this.node.name[0]&&"0"==this.node.name[1]&&(this.isPoliceCar=!0),"1"==this.node.name[0]&&"1"==this.node.name[1]&&(this.isRichCar=!0),"1"==this.node.name[0]&&"3"==this.node.name[1]&&(this.isTramcar=!0)},e.prototype.update=function(){if(!this.isReadyDestroy){if(this.carState==n.CarState.Normal){if(this.path>1||this.isTramcar){this.isCanClick=!1;var t=this.getWPosByNode(this.node);90==Math.round(Math.abs(this.node.angle))&&(this.node.convertToWorldSpaceAR(cc.v2(-this.node.width/2,0)),this.node.convertToWorldSpaceAR(cc.v2(this.node.width/2,0)));for(var e=0;e<this.otherCarNode.length;e++){var i=this.otherCarNode[e];try{if(i&&i.getComponent(o).carState==n.CarState.Idle){var r=[i.convertToWorldSpaceAR(cc.v2(-i.width/2,0)),i.convertToWorldSpaceAR(cc.v2(-i.width/2,-i.height))],s=[i.convertToWorldSpaceAR(cc.v2(i.width/2,0)),i.convertToWorldSpaceAR(cc.v2(i.width/2,-i.height))],c=[i.convertToWorldSpaceAR(cc.v2(-i.width/2,0)),i.convertToWorldSpaceAR(cc.v2(i.width/2,0))],l=[i.convertToWorldSpaceAR(cc.v2(-i.width/2,-i.height)),i.convertToWorldSpaceAR(cc.v2(i.width/2,-i.height))];if(cc.Intersection.pointLineDistance(t,c[0],c[1],!0)<this.minLen||cc.Intersection.pointLineDistance(t,l[0],l[1],!0)<this.minLen||cc.Intersection.pointLineDistance(t,r[0],r[1],!0)<this.minLen||cc.Intersection.pointLineDistance(t,s[0],s[1],!0)<this.minLen){this.checkTouch(i);break}}}catch(g){console.log(g),this.node&&this.node.destroy()}}}var h=this.mgr.dict.road.parent.convertToWorldSpaceAR(this.mgr.dict.road.position),d=this.node.parent.convertToNodeSpaceAR(h);if(this.node.y>=d.y-2*this.minLen)return console.log("\u68c0\u6d4b\u78b0\u5230\u516c\u8def"),this.isUTransportCar&&(-1!==(e=this.mgr.dict.carRoot.getComponent(a.default).carArr.indexOf(this.node))&&(this.mgr.dict.carRoot.getComponent(a.default).carArr[e]=null,this.mgr.dict.carRoot.getComponent(a.default).reduceUpdate()),this.mgr.dict.carRoot.getComponent(a.default).isTransportCarMove=!0),void(this.isCollision||(this.isCollision=!0,this.mgr.collision(this.node)));if(this.node.x<=-(this.mgr.boundary/2+this.node.width/2))return this.carState=n.CarState.GoingRoad,void this.mgr.changeCar(this.node,2);if(this.node.x>=this.mgr.boundary/2+this.node.width/2)return this.carState=n.CarState.GoingRoad,void this.mgr.changeCar(this.node,2);if(this.node.y<=-620&&this.node.x>0)return this.carState=n.CarState.OnBottomRight,void this.mgr.changeCar(this.node,1,1,"01"+this.lenImgName+"-1");if(this.node.y<=-620&&this.node.x<0)return this.carState=n.CarState.OnBottomLeft,void this.mgr.changeCar(this.node,1,2,"01"+this.lenImgName+"-0");if(this.leftObliqueCar&&this.node.x>=-189.008?(this.carState=n.CarState.GoingRoad,this.mgr.changeCar(this.node,2)):this.rightObliqueCar&&this.node.x<=189.008?(this.carState=n.CarState.GoingRoad,this.mgr.changeCar(this.node,2)):(this.isUTransportCar||this.isUTransportCar_noIn)&&(-90==Math.round(this.node.angle)||-52==Math.round(this.node.angle)||-128==Math.round(this.node.angle))&&this.node.x>=0?(this.carState=n.CarState.GoingRoad,this.node.x=0,this.mgr.changeCar(this.node,2),this.isUTransportCar&&this.mgr.dict.carRoot.getComponent(a.default).reduceUpdate()):(this.isUTransportCar||this.isUTransportCar_noIn)&&(90==Math.round(this.node.angle)||52==Math.round(this.node.angle)||128==Math.round(this.node.angle))&&this.node.x<=0&&(this.carState=n.CarState.GoingRoad,this.node.x=0,this.mgr.changeCar(this.node,2),this.isUTransportCar&&this.mgr.dict.carRoot.getComponent(a.default).reduceUpdate()),this.isTramcar&&this.railCarTurn[this.tramcarPosIndex]){var u=this.railCarTurn[this.tramcarPosIndex].name.split("-"),p=u[0],f=u[1];"0"==p?this.getWPosByNode(this.node).x<=this.getWPosByNode(this.railCarTurn[this.tramcarPosIndex]).x&&this.railCarTurnChange(f):"1"==p?this.getWPosByNode(this.node).x>=this.getWPosByNode(this.railCarTurn[this.tramcarPosIndex]).x&&this.railCarTurnChange(f):"2"==p||"3"==p&&this.getWPosByNode(this.node).y<=this.getWPosByNode(this.railCarTurn[this.tramcarPosIndex]).y&&this.railCarTurnChange(f)}}if(this.carState==n.CarState.OnBottomLeft&&this.node.x<=-(this.mgr.boundary/2+this.node.width/2))return this.carState=n.CarState.GoingRoad,void this.mgr.changeCar(this.node,2);if(this.carState==n.CarState.OnBottomRight&&this.node.x>=this.mgr.boundary/2+this.node.width/2)return this.carState=n.CarState.GoingRoad,void this.mgr.changeCar(this.node,2);this.carState==n.CarState.OutParking&&this.node.x>=cc.winSize.width/2+6*this.node.width&&(this.mgr.checkRes(),this.node.destroy()),this.carState==n.CarState.WaterSprayLeave&&this.node.x<=-(cc.winSize.width/2+this.node.height)&&(console.log("\u9500\u6bc1\u6d88\u9632\u8f66"),this.node.destroy())}},e.prototype.railCarTurnChange=function(t){this.carState=n.CarState.Normal,"up"==t?(this.tramcarPosIndex+=1,this.mgr.changeCar(this.node,2)):"leftUp"==t?(this.tramcarPosIndex+=1,this.mgr.changeCar(this.node,4,2)):"leftDown"==t?(this.tramcarPosIndex+=1,this.mgr.changeCar(this.node,5,2)):"right"==t?(this.tramcarPosIndex+=1,this.mgr.changeCar(this.node,1,1)):"left"==t?(this.tramcarPosIndex+=1,this.mgr.changeCar(this.node,1,2)):"rightUp"==t?(this.tramcarPosIndex+=1,this.mgr.changeCar(this.node,4,1)):"rightDown"==t&&(this.tramcarPosIndex+=1,this.mgr.changeCar(this.node,5,1))},e.prototype.checkTouch=function(t){var e=this;if(i.Audio.getEffectMute()||this.mgr.playRemoteSound("audio/f27312/f27312_Crash"),this.mgr.hit(this.node),this.carState=n.CarState.Idle,this.node.isCarPark&&(this.node.isWen=!0),this.node.stopAllActions(),t.runAction(this.shackAction(.1,2)),this.mgr.moveCarAmount-=1,this.isTramcar){var s=this.node.convertToWorldSpaceAR(cc.v2(0,-30)),c=this.node.parent.convertToNodeSpaceAR(s);cc.tween(this.node).to(.15,{position:c}).call(function(){e.isCanClick=!0}).start()}else cc.tween(this.node).to(.15,{position:this.oldPos}).call(function(){e.isCanClick=!0,e.isTransportCar&&(e.mgr.isTransportCarMove=!0),e.isUTransportCar&&(e.mgr.dict.carRoot.getComponent(a.default).isTransportCarMove=!0),e.float(e.node)}).start();var l=this.nextCar,h=this.prevCar;l&&(this.node.getChildByName("chain")&&0==this.node.getChildByName("chain").getComponent(r.default).linkType||l.getChildByName("chain")&&0==l.getChildByName("chain").getComponent(r.default).linkType)&&(l.stopAllActions(),l.getComponent(o).carState=n.CarState.Idle,this.mgr.moveCarAmount-=1,cc.tween(l).to(.15,{position:l.getComponent(o).oldPos}).call(function(){l.getComponent(o).isCanClick=!0}).start()),h&&(h.getChildByName("chain")&&1==h.getChildByName("chain").getComponent(r.default).linkType||this.node.getChildByName("chain")&&1==this.node.getChildByName("chain").getComponent(r.default).linkType)&&(h.getComponent(o).carState=n.CarState.Idle,h.stopAllActions(),this.mgr.moveCarAmount-=1,cc.tween(h).to(.15,{position:h.getComponent(o).oldPos}).call(function(){h.getComponent(o).isCanClick=!0}).start())},e.prototype.float=function(t){t.getComponent(o).floatPos&&cc.tween(t).to(.6,{position:t.getComponent(o).floatPos}).to(.6,{position:t.getComponent(o).oldPos}).union().repeatForever().start()},e.prototype.carBack=function(t){var e=this;i.Audio.getEffectMute()||this.mgr.playRemoteSound("audio/f27312/f27312_Crash"),this.mgr.hit(this.node),this.carState=n.CarState.Idle,this.node.isCarPark&&(this.node.isWen=!0),this.node.stopAllActions(),t.runAction(this.shackAction(.1,2)),this.mgr.moveCarAmount-=1,cc.tween(this.node).to(.15,{position:this.oldPos}).call(function(){e.isCanClick=!0,e.isTransportCar&&(e.mgr.isTransportCarMove=!0),e.isUTransportCar&&(e.mgr.dict.carRoot.getComponent(a.default).isTransportCarMove=!0)}).start();var s=this.nextCar,c=this.prevCar;s&&(this.node.getChildByName("chain")&&0==this.node.getChildByName("chain").getComponent(r.default).linkType||s.getChildByName("chain")&&0==s.getChildByName("chain").getComponent(r.default).linkType)&&(s.stopAllActions(),s.getComponent(o).carState=n.CarState.Idle,cc.tween(s).to(.15,{position:s.getComponent(o).oldPos}).call(function(){s.getComponent(o).isCanClick=!0}).start()),c&&(c.getChildByName("chain")&&1==c.getChildByName("chain").getComponent(r.default).linkType||this.node.getChildByName("chain")&&1==this.node.getChildByName("chain").getComponent(r.default).linkType)&&(c.getComponent(o).carState=n.CarState.Idle,c.stopAllActions(),cc.tween(c).to(.15,{position:c.getComponent(o).oldPos}).call(function(){c.getComponent(o).isCanClick=!0}).start())},e.prototype.shackAction=function(t,e){var o=cc.moveBy(t,e,e),i=cc.moveBy(t,-e,-e),n=cc.moveBy(.8*t,.8*e,.8*e),r=cc.moveBy(.8*t,.8*-e,.8*-e),a=cc.moveBy(.6*t,.6*e,.6*e),s=cc.moveBy(.6*t,.6*-e,.6*-e),c=cc.moveBy(.4*t,.4*e,.4*e),l=cc.moveBy(.4*t,.4*-e,.4*-e),h=cc.moveBy(.2*t,.2*e,.2*e),d=cc.moveBy(.2*t,.2*-e,.2*-e);return cc.sequence(o,i,n,r,a,s,c,l,h,d)},e.prototype.getWPosByNode=function(t){return t.parent.convertToWorldSpaceAR(t.position)},__decorate([l],e.prototype,"seatTotalAmount",void 0),__decorate([l([cc.Node])],e.prototype,"railCarTurn",void 0),o=__decorate([c],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../scripts/AudioManager":"AudioManager","./Level-249667_busConfig":"Level-249667_busConfig","./Level-249667_chain":"Level-249667_chain","./Level-249667_uTransport":"Level-249667_uTransport"}],"Level-29076_config":[function(t,e,o){"use strict";var i;cc._RF.push(e,"6e1f36RlFxOt7tVeGlkmqam","Level-29076_config"),o.BulldozerState=o.LinkType=o.TurntablePosDir=o.CarState=o.DrinkPosArr=o.CarLenImg=o.ParkingImg=o.getCarImgByColor=o.CarDirImg=o.CarDir=o.colorDes=o.CarColor=o.sortColor=o.levelData=void 0,o.levelData={"-29076":{carColor:[[0,10,[1,3]],[11,20,[1,3]],[21,30,[1,4]],[31,40,[1,4]],[41,50,[1,5]],[51,60,[1,5]],[61,70,[1,6]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[30,5,1,1,0,0],parkingWeight:5,sortWeight:5,limitRank:3,hardPoints:[[70,80]]},"-29077":{carColor:[[0,10,[1,3]],[11,20,[1,3]],[21,30,[1,4]],[31,40,[1,4]],[41,50,[1,5]],[51,60,[1,5]],[61,70,[1,6]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[30,5,1,1,0,0],parkingWeight:5,sortWeight:5,limitRank:3,hardPoints:[[70,80]]},"-29078":{carColor:[[0,10,[1,3]],[11,20,[1,3]],[21,30,[1,4]],[31,40,[1,4]],[41,50,[1,5]],[51,60,[1,5]],[61,70,[1,6]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[30,5,1,1,0,0],parkingWeight:5,sortWeight:5,limitRank:3,hardPoints:[[70,80]]},"-29079":{carColor:[[0,10,[1,3]],[11,20,[1,3]],[21,30,[1,4]],[31,40,[1,4]],[41,50,[1,5]],[51,60,[1,5]],[61,70,[1,6]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[30,5,1,1,0,0],parkingWeight:5,sortWeight:5,limitRank:3,hardPoints:[[70,80]]},"-29080":{carColor:[[0,10,[1,3]],[11,20,[1,3]],[21,30,[1,4]],[31,40,[1,4]],[41,50,[1,5]],[51,60,[1,5]],[61,70,[1,6]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[30,5,1,1,0,0],parkingWeight:5,sortWeight:5,limitRank:3,hardPoints:[[70,80]]},"-29081":{carColor:[[0,10,[1,3]],[11,20,[1,3]],[21,30,[1,4]],[31,40,[1,4]],[41,50,[1,5]],[51,60,[1,5]],[61,70,[1,6]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[30,5,1,1,0,0],parkingWeight:5,sortWeight:5,limitRank:3,hardPoints:[[70,80]]},"-29082":{carColor:[[0,10,[1,3]],[11,20,[1,3]],[21,30,[1,4]],[31,40,[1,4]],[41,50,[1,5]],[51,60,[1,5]],[61,70,[1,6]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[30,5,1,1,0,0],parkingWeight:5,sortWeight:5,limitRank:3,hardPoints:[[70,80]]},"-29083":{carColor:[[0,10,[1,3]],[11,20,[1,3]],[21,30,[1,4]],[31,40,[1,4]],[41,50,[1,5]],[51,60,[1,5]],[61,70,[1,6]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[30,5,1,1,0,0],parkingWeight:5,sortWeight:5,limitRank:3,hardPoints:[[70,80]]},"-29084":{carColor:[[0,10,[1,3]],[11,20,[1,3]],[21,30,[1,4]],[31,40,[1,4]],[41,50,[1,5]],[51,60,[1,5]],[61,70,[1,6]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[30,5,1,1,0,0],parkingWeight:5,sortWeight:5,limitRank:3,hardPoints:[[70,80]]},"-29085":{carColor:[[0,100,[1,4]]],carWeight:[30,0,0,0,0,0],parkingWeight:0,sortWeight:0,limitRank:4,hardPoints:[]}},o.sortColor=[0,3,4,7,1,2,5,6],(i=o.CarColor||(o.CarColor={}))[i.Red=0]="Red",i[i.Purple=1]="Purple",i[i.Pink=2]="Pink",i[i.Yellow=3]="Yellow",i[i.Brown=4]="Brown",i[i.Green=5]="Green",i[i.LightBlue=6]="LightBlue",i[i.Blue=7]="Blue",o.colorDes=["\u7ea20","\u7d2b1","\u7c892","\u9ec43","\u68d54","\u7eff5","\u6d45\u84dd6","\u84dd7"],o.CarDir=[1,1],o.CarDirImg={52:4,128:5,90:1,0:2,180:3},o.getCarImgByColor=function(t,e){var o;return o=Number(t.name[2]),""+(e+1+100*(t.name.includes("-")?3+3*(o-1):"2"==t.name[1]?1+3*(o-1):2+3*(o-1)))},o.ParkingImg={4:11,6:13,8:15},o.CarLenImg={4:1,6:2,8:3},o.DrinkPosArr=[[219.21,163.03],[219.21,119.03],[219.21,75.03],[219.21,31.03],[164.71,31.03],[110.21,31.03],[55.71,31.03],[1.21,31.03],[-53.29,31.03],[-107.79,31.03],[-162.29,31.03],[-216.79,31.03],[-216.79,-12.97],[-216.79,-56.97],[-162.29,-56.97],[-107.79,-56.97],[-53.29,-56.97],[1.21,-56.97],[55.71,-56.97],[110.21,-56.97],[164.71,-56.97],[219.21,-56.97],[219.21,-100.97],[219.21,-144.97],[164.71,-144.97],[110.21,-144.97],[55.71,-144.97],[1.21,-144.97],[1.21,-194.97]],function(t){t[t.Idle=-1]="Idle",t[t.Normal=0]="Normal",t[t.NormalNoObstruct=1]="NormalNoObstruct",t[t.GoingRoad=2]="GoingRoad",t[t.InRoadRight=3]="InRoadRight",t[t.InRoadLeft=4]="InRoadLeft",t[t.GoingParking=5]="GoingParking",t[t.Parking=6]="Parking",t[t.GoingOutParking=7]="GoingOutParking",t[t.OutParking=8]="OutParking",t[t.OnBottomLeft=9]="OnBottomLeft",t[t.OnBottomRight=10]="OnBottomRight",t[t.WaterSpray=11]="WaterSpray",t[t.WaterSprayLeave=12]="WaterSprayLeave"}(o.CarState||(o.CarState={})),function(t){t[t.LeftTop=0]="LeftTop",t[t.Top=1]="Top",t[t.RightTop=2]="RightTop",t[t.Right=3]="Right",t[t.RightBottom=4]="RightBottom",t[t.Bottom=5]="Bottom",t[t.LeftBottom=6]="LeftBottom",t[t.Left=7]="Left"}(o.TurntablePosDir||(o.TurntablePosDir={})),function(t){t[t.FrontBack=0]="FrontBack",t[t.Parallel=1]="Parallel"}(o.LinkType||(o.LinkType={})),function(t){t[t.Idle=0]="Idle",t[t.Normal=1]="Normal",t[t.OnRoad=2]="OnRoad",t[t.Remove=3]="Remove"}(o.BulldozerState||(o.BulldozerState={})),cc._RF.pop()},{}],"Level-29076_control":[function(t,e,o){"use strict";cc._RF.push(e,"bd6afGRw+pDqLAezH7s2PsJ","Level-29076_control");var i=t("../../scripts/UserConst"),n=t("../../scripts/AudioManager"),r=t("../../scripts/LanguageManager"),a=t("../../scripts/PlatformManager"),s=t("../../scripts/TipManager"),c=t("../../scripts/UserManager"),l=t("../../scripts/LimitRepeat"),h=t("../../scripts/ShuShuConst"),d=t("../../scripts/LocalStorageConst"),u=t("../../scripts/LocalStorageManager"),p=t("../../scripts/MemoryStorageConst"),f=t("../../scripts/MemoryStorageManager"),g=t("../../scripts/AssetManager"),m=t("../../scripts/PopupConst"),v=t("../../scripts/PopupManager"),y=t("./BrainLevelBase"),_=t("./PoolMgr"),C=t("./Level-29076_config"),b=t("./Level-249667_personItem"),S=t("./Level-29076_boxCarItem"),w=t("./MotionTrail"),A=cc._decorator,k=A.ccclass,P=A.property,T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.box2SpriteAtlas=null,e.isDebug=!1,e.boundary=750,e.carRoot=null,e.colorTypeAmount=C.colorDes.length,e.lastCar=null,e.oldSortAmount=0,e.guideNodes=[],e.guideText=["\u6c7d\u8f66\u4f1a\u671d\u7740\u7bad\u5934\u65b9\u5411\u79fb\u52a8","\u5927\u5df4\u8f66\u53ef\u4ee5\u8f7d10\u4e2a\u540c\u8272\u5c0f\u4eba","\u5c0f\u5df4\u58eb\u53ef\u4ee5\u8f7d6\u4e2a\u540c\u8272\u5c0f\u4eba","\u8f7f\u8f66\u53ef\u4ee5\u8f7d4\u4e2a\u540c\u8272\u5c0f\u4eba"],e.currentGuideNode=null,e.guidedNodes=[],e.poolMgr=new _.default,e.sortColor_new=[],e.levelDataJSON={},e.parkingNodes=[],e.between2_4CarArr=[],e.highSpeedRailSpeed=600,e.turntableCarArr=[],e.isTransportCarMove=!1,e.transportSpeed=50,e.colorPersonArr=[],e.unlockParkingTarget=null,e.carparkIng=!1,e.isRotateCreate=!1,e.moveCarAmount=0,e.allPersonAmount=0,e.allPersonAmount2=0,e.extraWeightConst=0,e.extraWeight=[],e.carWeight=[],e.parkingWeight=[],e.sortWeight=[],e.allWeight=[],e.colorPersonAmountArr=[],e.colorPersonAmountArrIndex=[],e.colorPersonIndexArr=[],e.uiShowPersonAmount=20,e.currentPersonColorAmount=[],e.sortPersonNodes=[],e.times=0,e.isCanStartClick=!1,e.isCheck=!1,e.isFail=!1,e.timeIDArr=[],e.isWin=!1,e.personSpeed=1200,e.policeIndex=0,e.goldIndex=0,e.policeSkinName="a",e.goldSkinName="a",e.isReviveAmount=0,e.lastExtraIndexArr=[],e.randomColorArr=[],e.randomColorNum=[],e.batchMap={},e.pathArr=[],e.carIndex=[],e.carNodeArr=[],e.carAllAmount=0,e.weightLimitIndex=0,e.hardPointsIndexs=[],e.localData={},e.reviveArr=[],e.firstSortIndexArr=[],e.firstSortAmountArr=[],e.isSorting=!1,e.isSortAnim=!1,e.isRemove=!1,e.tipRemove=null,e.removePropUsing=!1,e.transportCarArr=[],e}return __extends(e,t),e.prototype.onLoad=function(){return __awaiter(this,void 0,void 0,function(){var e,o,i;return __generator(this,function(){for(t.prototype.onLoad.call(this),this.dict.carRoot.active=!1,this.dict.road.y=168.789,this.dict["1-2"].y=-200.347,this.dict.carRoot.y=47.5,cc.view.getFrameSize().width,cc.view.getFrameSize().height,e=0;e<C.DrinkPosArr.length;e++)o=new cc.Node(""+e),this.dict.personPosRoot.addChild(o),i=C.DrinkPosArr[e],o.position=cc.v3(i[0],i[1]);return this.uiShowPersonAmount=C.DrinkPosArr.length,this.carWeight=new Array(this.colorTypeAmount).fill(0),this.extraWeight=new Array(this.colorTypeAmount).fill(0),this.lastExtraIndexArr=new Array(this.colorTypeAmount).fill(0),this.parkingWeight=new Array(this.colorTypeAmount).fill(0),this.sortWeight=new Array(this.colorTypeAmount).fill(0),this.allWeight=new Array(this.colorTypeAmount).fill(0),this.colorPersonIndexArr=new Array(this.colorTypeAmount).fill(0),this.currentPersonColorAmount=new Array(this.colorTypeAmount).fill(0),this.colorPersonArr=new Array(this.colorTypeAmount).fill(0),this.levelDataJSON=JSON.parse(JSON.stringify(C.levelData[this.levelID])),this.setCollisionManager(!0,!1),this.carRoot=this.dict.carRoot,this.dict.btns&&(this.dict.btns.active=!1),this.dict.hitSpine.scale=.4,this.dict.tailGas.getComponent(w.default)&&(this.dict.tailGas.getComponent(w.default).length=25,this.dict.tailGas.getComponent(w.default).headWidth=35,this.dict.tailGas.getComponent(w.default).tailWidth=20,this.dict.tailGas.getComponent(w.default).headOpacity=230,this.dict.tailGas.getComponent(w.default).tailOpacity=40),this.dict.hand&&(this.guideNodes.push(this.dict.carRoot.children[3]),this.guideNodes.push(this.dict.carRoot.children[0]),this.guideNodes.push(this.dict.carRoot.children[1]),this.guideNodes.push(this.dict.carRoot.children[2]),this.currentGuideNode=this.guideNodes[0],this.handPos()),[2]})})},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this);try{for(var e=0;e<this.timeIDArr.length;e++){var o=this.timeIDArr[e];clearInterval(o)}}catch(i){console.log(i)}},e.prototype.handPos=function(){var t=cc.v2(0,-20);t="053-1"==this.currentGuideNode.name?cc.v2(-15,-35):"053-0"==this.currentGuideNode.name?cc.v2(15,-35):"042-0"==this.currentGuideNode.name?cc.v2(15,-50):cc.v2(-15,-20);var e=this.currentGuideNode.convertToWorldSpaceAR(t),o=this.guideNodes.indexOf(this.currentGuideNode);this.dict.handText.getComponent(cc.Label).string=this.guideText[o];var i=this.dict.hand.parent.convertToNodeSpaceAR(e);this.dict.hand.position=i},e.prototype.shackAction=function(t,e){var o=cc.moveBy(t,e,e),i=cc.moveBy(t,-e,-e),n=cc.moveBy(.8*t,.8*e,.8*e),r=cc.moveBy(.8*t,.8*-e,.8*-e),a=cc.moveBy(.6*t,.6*e,.6*e),s=cc.moveBy(.6*t,.6*-e,.6*-e),c=cc.moveBy(.4*t,.4*e,.4*e),l=cc.moveBy(.4*t,.4*-e,.4*-e),h=cc.moveBy(.2*t,.2*e,.2*e),d=cc.moveBy(.2*t,.2*-e,.2*-e);return cc.sequence(o,i,n,r,a,s,c,l,h,d)},e.prototype.changeCar=function(t,e,o,i){return void 0===o&&(o=0),__awaiter(this,void 0,void 0,function(){var n,r,a,s,c,l,h,d=this;return __generator(this,function(){return t.getComponent(S.default).isReadyDestroy=!0,n=t.getComponent(S.default).colorImgName,r=t.getComponent(S.default).lenImgName,i?(console.log("changeCar-carName",i),(a=cc.instantiate(this.dict.carPrefab.getChildByName(i))).parking=t.parking):(console.log("`02${lenImgName}`","02"+r),a=cc.instantiate(this.dict.carPrefab.getChildByName("02"+r))),t.getComponent(S.default).carState!=C.CarState.InRoadRight&&t.getComponent(S.default).carState!=C.CarState.InRoadLeft||this.updateCarWeight(),a.getComponent(S.default).carState=t.getComponent(S.default).carState,a.active=!1,this.carRoot.addChild(a),a.getComponent(S.default).mgr=this,a.getComponent(S.default).colorImgName=n,a.getComponent(S.default).lenImgName=r,a.getComponent(S.default).dirImgName=e,a.getComponent(S.default).carColor=t.getComponent(S.default).carColor,4==e||5==e?(a.position=cc.v2(t.x,t.y),c=a.convertToWorldSpaceAR(cc.v2(0,t.height/2)),s=a.parent.convertToNodeSpaceAR(c),a.position=cc.v2(s.x,s.y)):0==o?a.position=cc.v2(t.x,t.y+t.height/2):a.getComponent(S.default).carState==C.CarState.OnBottomLeft?a.position=cc.v2(t.x-t.width/2,t.y):a.getComponent(S.default).carState==C.CarState.OnBottomRight?a.position=cc.v2(t.x+t.width/2,t.y):1==o?(c=this.dict.road.parent.convertToWorldSpaceAR(this.dict.road.position),s=a.parent.convertToNodeSpaceAR(c),a.position=cc.v2(t.x+t.width/2,s.y)):(c=this.dict.road.parent.convertToWorldSpaceAR(this.dict.road.position),s=a.parent.convertToNodeSpaceAR(c),a.position=cc.v2(t.x-t.width/2,s.y)),a.getComponent(S.default).carState==C.CarState.GoingParking&&(l=a.parking.convertToWorldSpaceAR(cc.v2(0,a.height/2-127.469)),s=a.parent.convertToNodeSpaceAR(l),a.position=cc.v2(s.x,s.y)),h=this.folder+"_"+C.getCarImgByColor(a,t.getComponent(S.default).carColor),a.stopAllActions(),function(){t.getChildByName("tailGasSpine")&&d.poolMgr.put(t.getChildByName("tailGasSpine"),"tailGasSpine"),t.getChildByName("tailGas")&&t.getChildByName("tailGas").destroy();var e=t.getComponent(S.default).nextCar;try{e&&e.getComponent(S.default)&&(e.getComponent(S.default).carState=C.CarState.Normal)}catch(f){}t.destroy(),a.getChildByName("car").getComponent(cc.Sprite).spriteFrame=d.box2SpriteAtlas.getSpriteFrame(h),a.active=!0;var o=a.convertToWorldSpaceAR(cc.v2(0,2250)),i=a.parent.convertToNodeSpaceAR(o);if(a.getComponent(S.default).carState==C.CarState.InRoadRight||a.getComponent(S.default).carState==C.CarState.InRoadLeft){var n,r=a.parent.convertToWorldSpaceAR(a.position),s=void 0;if(a.getComponent(S.default).isFireEngine){var c=a.parking.getChildByName("fireCarPos").position;s=a.parking.convertToWorldSpaceAR(c)}else s=a.parking.convertToWorldSpaceAR(cc.v2(0,-142.893));n=a.parent.convertToNodeSpaceAR(s);var l=Math.abs(s.x-r.x);d.addTailGasSpine(a),cc.tween(a).to(l/a.getComponent(S.default).speed,{x:n.x}).call(function(){a.getComponent(S.default).carState=C.CarState.GoingParking,console.log("isRichCar",a.getComponent(S.default).isRichCar),a.getComponent(S.default).isRichCar?d.changeCar(a,6,0,"116"+a.getComponent(S.default).lenImgName):a.getComponent(S.default).isTramcar?d.changeCar(a,6,0,"136"+a.getComponent(S.default).lenImgName):d.changeCar(a,6,0,"06"+a.getComponent(S.default).lenImgName)}).start()}else if(a.getComponent(S.default).carState==C.CarState.GoingParking){if(r=d.getWPosByNode(a),s=void 0,a.parking){s=1==a.getComponent(S.default).lenImgName?a.parking.convertToWorldSpaceAR(cc.v2(0,a.height/2+20)):2==a.getComponent(S.default).lenImgName?a.parking.convertToWorldSpaceAR(cc.v2(0,a.height/2+15)):a.parking.convertToWorldSpaceAR(cc.v2(0,a.height/2+17));var u=a.parent.convertToNodeSpaceAR(s);a.getComponent(S.default).carState=C.CarState.Parking,a.stopAllActions(),l=u.sub(a.position).mag(),cc.tween(a).to(l/a.getComponent(S.default).speed,{position:u}).call(function(){a.parking.car=a;var t=a.getComponent(S.default).seatTotalAmount,e=a.getComponent(S.default).carColor;a.getChildByName("sd").active=!1,a.getChildByName("shadow").active=!0,a.getChildByName("car").getComponent(cc.Sprite).spriteFrame=game.boxAtlas.getSpriteFrame("f28749_"+(100*C.ParkingImg[t]+e+1)),d.putTailGas(a),d.checkPerson(!0)}).start()}}else if(a.getComponent(S.default).carState==C.CarState.GoingRoad){r=d.dict.road.parent.convertToWorldSpaceAR(d.dict.road.position);var p=a.parent.convertToWorldSpaceAR(a.position);l=Math.abs(p.y-r.y),d.addTailGasSpine(a),cc.tween(a).by(l/a.getComponent(S.default).speed,{y:l}).call(function(){d.collision(a)}).start()}else d.addTailGasSpine(a),cc.tween(a).to(2250/a.getComponent(S.default).speed,{position:i}).start()}(),[2]})})},e.prototype.load=function(t){return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(e,o){cc.resources.load(t,function(t,i){return t?(cc.warn(t),o(t)):e(new cc.SpriteFrame(i))})})]})})},e.prototype.getWPosByNode=function(t){return t.parent.convertToWorldSpaceAR(t.position)},e.prototype.putTailGas=function(t){t.getChildByName("tailGas")&&this.poolMgr.put(t.getChildByName("tailGas"),"tailGas")},e.prototype.hit=function(t){var e=cc.instantiate(this.dict.hitSpine);e&&(t.addChild(e),e.position=cc.v2(0,0),this.scheduleOnce(function(){e.destroy()},1))},e.prototype.collision=function(t){if(!t.getComponent(S.default).isFireEngine){for(var e=t,o=void 0,i=0;i<this.parkingNodes.length;i++){var n=this.parkingNodes[i];if(n.isEmpty){n.isEmpty=!1,e.parking=n,o=n;break}}if(o){var r=e.parent.convertToWorldSpaceAR(e.position),a=o.convertToWorldSpaceAR(cc.v2(0,-142.893));r.x>=a.x?(e.getComponent(S.default).carState=C.CarState.InRoadLeft,e.getComponent(S.default).isRichCar?(e.getComponent(S.default).lenImgName=1,this.changeCar(e,1,2,"111"+e.getComponent(S.default).lenImgName+"-0")):this.changeCar(e,1,2,"01"+e.getComponent(S.default).lenImgName+"-0")):(e.getComponent(S.default).carState=C.CarState.InRoadRight,e.getComponent(S.default).isRichCar?(e.getComponent(S.default).lenImgName=1,this.changeCar(e,1,1,"111"+e.getComponent(S.default).lenImgName+"-1")):this.changeCar(e,1,1,"01"+e.getComponent(S.default).lenImgName+"-1"))}}},e.prototype.onLevelReady=function(){this.initView()},e.prototype.initView=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,i,n,r,a,s,c,l,h,d,u,p,f,m=this;return __generator(this,function(v){switch(v.label){case 0:for(this.dict.guide&&this.scheduleOnce(function(){m.dict.guide.active=!1},6),l=0;l<this.dict.parkingRoot.childrenCount;l++)(h=this.dict.parkingRoot.children[l]).active&&h.getChildByName("empty").active&&!h.getChildByName("fireSpine")&&(h.isEmpty=!0,this.parkingNodes.push(h)),h.getChildByName("videoLock")&&(h.getChildByName("videoLock").getChildByName("icon").scale=.8);if(this.isDebug)for(t=[],l=0;l<this.carRoot.childrenCount;l++){for(h=this.carRoot.children[l],p=0;p<t.length;p++)c=t[p],h.x==c[0]&&h.y==c[1]&&console.error("\u540c\u4e00\u4e2a\u4f4d\u7f6e\u590d\u5236\u591a\u8f86\u8f66",h.name,l);t.push([h.x,h.y])}for(e=this.getLocal("blackCar")||[],o=this.carRoot.children.concat(this.turntableCarArr),l=0;l<o.length;l++)h=o[l],this.carNodeArr.push(h),h.getComponent(S.default).mgr=this,h.indexID=""+l,i=this.getPath(h),this.levelDataJSON.blackAmount&&!e.length&&i>=2&&i<=4&&this.between2_4CarArr.push(h),h.getComponent(S.default).path=i,this.isDebug&&((n=new cc.Node).name="path",n.addComponent(cc.Label).string=""+i,n.color=cc.Color.WHITE,h.addChild(n),n.position=cc.v2(-13.105,-26.21)),this.allPersonAmount+=h.getComponent(S.default).seatTotalAmount;if(this.allPersonAmount2=this.allPersonAmount,this.dict.personAmount.getComponent(cc.Label).string=""+this.allPersonAmount,cc.game.emit("allPersonAmount",this.allPersonAmount,this.allPersonAmount2),this.setCarID(),this.levelDataJSON.blackAmount&&!e.length){if(this.levelDataJSON.blackAmount>=this.between2_4CarArr.length)for(p=0;p<this.between2_4CarArr.length;p++)(c=this.between2_4CarArr[p]).getComponent(S.default).isBlackCar=!0,e.push(c.getComponent(S.default).carID);else for(r=this.getRandomDistinctElements(this.between2_4CarArr,this.levelDataJSON.blackAmount),p=0;p<r.length;p++)(c=r[p]).getComponent(S.default).isBlackCar=!0,e.push(c.getComponent(S.default).carID);this.setLocal("blackCar",e)}if(a=[],-27361==this.levelID&&(a=[7,4,0,3]),this.sortColor_new=C.sortColor,console.log("\u968f\u673a\u6253\u4e71\u989c\u8272",this.sortColor_new),0==a.length){for(a=[],s=this.levelDataJSON.carColor,p=0;p<s.length;p++)c=s[p],this.randomColorArr.push(this.getArrByLen([0,1,2,3,4,5,6,7],c[2])),this.randomColorNum[p]||(this.randomColorNum[p]=0);for(l=0;l<this.carNodeArr.length;l++)h=this.carNodeArr[l],d=this.getCarColor(l,s),a.push(d),this.setCarColorImg(h,d),null==(u=this.levelDataJSON.carWeight[h.getComponent(S.default).path-1])&&(u=0),this.carWeight[d]+=u*h.getComponent(S.default).emptySeatAmount;this.setLocal("colorConfig",a)}else for(l=0;l<this.carNodeArr.length;l++)h=this.carNodeArr[l],d=a[l],e.includes(h.getComponent(S.default).carID)&&(h.getComponent(S.default).isBlackCar=!0),this.setCarColorImg(h,d),null==(u=this.levelDataJSON.carWeight[h.getComponent(S.default).path-1])&&(u=0),this.carWeight[d]+=u*h.getComponent(S.default).emptySeatAmount;for(console.log("\u8f66\u8f86\u6743\u91cd",this.carWeight),console.log("\u989c\u8272",C.colorDes),console.log("\u4eba\u6570",this.colorPersonArr),p=0;p<C.colorDes.length;p++)this.getAmountByColor(p);return console.log("this.colorPersonAmountArr",this.colorPersonAmountArr),console.log("this.colorPersonAmountArrIndex",this.colorPersonAmountArrIndex),-27361==this.levelID&&(this.colorPersonAmountArr=[[4,4,2],[],[],[3,3],[1,3],[],[],[2,4,4]],this.firstSortIndexArr=[0,7,3,4,0,7,3,4,0,7]),"f27597"!=this.folder?[3,2]:[4,g.default.getRes("ttBundle","prefab/blockMan/Person",cc.Prefab)];case 1:f=v.sent(),this.dict.personPrefab=cc.instantiate(f),this.dict.personPrefab.scale=.7,v.label=2;case 2:return this.createPerson(),this.personMove(),this.onTouch(),this.scheduleOnce(function(){m.isCanStartClick=!0},2),this.isTransportCarMove=!0,this.schedule(function(){return __awaiter(m,void 0,void 0,function(){var t,e;return __generator(this,function(o){switch(o.label){case 0:return this.isFail?[3,9]:this.checkCarFull()?[4,this.timer(.1)]:[3,9];case 1:return o.sent()?this.checkHasPersonMove()?[3,8]:[3,2]:[3,8];case 2:return[4,this.timer(.1)];case 3:return o.sent()?this.checkHasCarMove()?[3,8]:[3,4]:[3,8];case 4:return t=this.allPersonAmount,[4,this.timer(1)];case 5:return o.sent()?t!=this.allPersonAmount?[3,8]:this.isFail?[3,7]:(this.isFail=!0,e=this.allPersonAmount,[4,this.timer(.5)]):[3,8];case 6:o.sent()&&(this.check(e)?cc.game.emit("levelFailEvent"):this.isFail=!1),o.label=7;case 7:return[3,8];case 8:return[3,9];case 9:return[2]}})})},.4),[2]}})})},e.prototype.check=function(t){return this.checkCarFull()&&!this.checkHasPersonMove()&&!this.checkHasCarMove()&&t==this.allPersonAmount},e.prototype.func_checkCanUseSort=function(){return!(this.checkHasPersonMove()||this.checkHasCarMove()||this.moveCarAmount>=this.parkingNodes.length)},e.prototype.timer=function(t){var e=this;return new Promise(function(o){e.scheduleOnce(function(){o(1)},t)})},e.prototype.checkCarFull=function(){for(var t=!0,e=0;e<this.parkingNodes.length;e++)this.parkingNodes[e].car||(t=!1);return t},e.prototype.checkHasPersonMove=function(){for(var t=!1,e=0;e<this.sortPersonNodes.length;e++)if(this.sortPersonNodes[e].getComponent(b.default).isMoving){t=!0;break}return t},e.prototype.checkHasCarMove=function(){for(var t=!1,e=this.carRoot.children.concat(this.turntableCarArr),o=0;o<e.length;o++){var i=e[o];if(i.getComponent(S.default).carState!=C.CarState.Idle&&i.getComponent(S.default).carState!=C.CarState.Normal&&i.getComponent(S.default).carState!=C.CarState.Parking){t=!0;break}}return t},e.prototype.checkHasCarMoveAmount=function(){for(var t=0,e=this.carRoot.children.concat(this.turntableCarArr),o=0;o<e.length;o++){var i=e[o];i&&cc.isValid(i,!0)&&i.active&&i.getComponent(S.default).carState!=C.CarState.Idle&&i.getComponent(S.default).carState!=C.CarState.OutParking&&(t+=1)}return t},e.prototype.onTouch=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this);for(var t=0;t<this.dict.parkingRoot.children.length;t++){var e=this.dict.parkingRoot.children[t];e.getChildByName("videoLock")&&e.on(cc.Node.EventType.TOUCH_START,this.touchStart_parking,this)}},e.prototype.touchStart_parking=function(t){var e=this;if(!this.isRemove&&!this.removePropUsing){var o=t.target;if(this.unlockParkingTarget=o,o.getChildByName("videoLock")){var n=u.default.get(d.default.UnlockParking)||0;if(n)return u.default.set(d.default.UnlockParking,n-1),o.getChildByName("videoLock").destroy(),o.getChildByName("empty").active=!0,o.isEmpty=!0,this.parkingNodes.push(o),cc.game.emit("gamelog_Thinking",h.ShuShuConst.Booster_use,{lv:c.User.getTempData(i.TempData.CURRENT_LEVEL_ID),queue:c.User.getTempData(i.TempData.CURRENT_LEVEL),mode:c.User.getTempData(i.TempData.CURRENT_MODE),id:4,or:1,sort:u.default.get(d.default.ConfigSuffix)}),void this.playUnlockSpine(o);u.default.get(d.default.cardAmount)?(f.default.set(p.default.propIndex,4),v.default.show(m.PopupConst.Prop)):a.Platform.showRewardAds(function(t){0==t&&(o.getChildByName("videoLock").destroy(),o.getChildByName("empty").active=!0,o.isEmpty=!0,e.parkingNodes.push(o),cc.game.emit("gamelog_Thinking",h.ShuShuConst.reward_btn,{lv:c.User.getTempData(i.TempData.CURRENT_LEVEL_ID),mode:c.User.getTempData(i.TempData.CURRENT_MODE),queue:c.User.getTempData(i.TempData.CURRENT_LEVEL),id:4,sort:u.default.get(d.default.ConfigSuffix)}),e.playUnlockSpine(o))})}}},e.prototype.playUnlockSpine=function(t){var e=cc.instantiate(this.dict.jiesuo);this.node.addChild(e);var o=t.parent.convertToWorldSpaceAR(t.position),i=this.node.convertToNodeSpaceAR(o);e.position=i,e.getComponent(sp.Skeleton).premultipliedAlpha=!1,e.getComponent(sp.Skeleton).setAnimation(0,"animation",!1)},e.prototype.func_unlockParking=function(){this.playUnlockSpine(this.unlockParkingTarget),this.unlockParkingTarget.getChildByName("videoLock").destroy(),this.unlockParkingTarget.getChildByName("empty").active=!0,this.unlockParkingTarget.isEmpty=!0,this.parkingNodes.push(this.unlockParkingTarget)},e.prototype.checkHasCollision=function(t){var e,o,i,n,r,a,s=t.width,c=t.height;e=t.convertToWorldSpaceAR(cc.v2(-s/2,-c)),o=t.convertToWorldSpaceAR(cc.v2(-s/2,2250)),i=t.convertToWorldSpaceAR(cc.v2(s/2,-c)),n=t.convertToWorldSpaceAR(cc.v2(s/2,2250)),r=t.convertToWorldSpaceAR(cc.v2(0,-c)),a=t.convertToWorldSpaceAR(cc.v2(0,2250));for(var l=this.carRoot.children.concat(this.turntableCarArr),h=0;h<l.length;h++){var d=l[h];if(d&&d!=t&&d.getComponent(S.default).carState==C.CarState.Idle&&d.active&&!d.getComponent(S.default).isTransportCar&&!d.getComponent(S.default).isUTransportCar){var u,p,f,g,m,v,y=d.width,_=d.height;if(u=d.convertToWorldSpaceAR(cc.v2(-y/2,-_)),p=d.convertToWorldSpaceAR(cc.v2(-y/2,0)),f=d.convertToWorldSpaceAR(cc.v2(y/2,-_)),g=d.convertToWorldSpaceAR(cc.v2(y/2,0)),m=d.convertToWorldSpaceAR(cc.v2(y/2+1,0)),v=d.convertToWorldSpaceAR(cc.v2(-y/2-1,0)),cc.Intersection.lineLine(e,o,u,p)||cc.Intersection.lineLine(e,o,f,g)||cc.Intersection.lineLine(i,n,u,p)||cc.Intersection.lineLine(i,n,f,g)||cc.Intersection.lineLine(e,o,m,v)||cc.Intersection.lineLine(r,a,m,v))return!0}}return!1},e.prototype.touchStart=function(t){if(this.isCanStartClick){t.target;var e=t.getLocation();if(this.carparkIng)return console.log("\u9650\u5236\u8f66\u5e93\u8f66\u70b9\u51fb");if(this.isRotateCreate)return console.log("\u6b63\u5728\u65cb\u8f6c\u751f\u6210");for(var o=this.carRoot.children.concat(this.turntableCarArr),i=0;i<o.length;i++){var a=o[i],c=a.getChildByName("car").getComponent(cc.PolygonCollider);if(cc.Intersection.pointInPolygon(e,this.getWPosByPolygon(c))){if(console.log("\u65b0\u589e\u9650\u5236\u5feb\u901f\u70b9\u51fb",this.moveCarAmount,this.parkingNodes.length),this.moveCarAmount>=this.parkingNodes.length)return console.log("\u9650\u5236\u5feb\u901f\u70b9\u51fb"),this.show(r.default.formatStr("\u6682\u65f6\u6ca1\u6709\u66f4\u591a\u4f4d\u7f6e\u4e86"));var l=a.getComponent(S.default).nextCar,h=a.getComponent(S.default).prevCar;if((l||h)&&this.moveCarAmount>=this.parkingNodes.length-1)return console.log("\u9650\u5236\u5feb\u901f\u70b9\u51fb2"),this.show(r.default.formatStr("\u9700\u8981\u4e24\u4e2a\u505c\u8f66\u4f4d"),.8,1);if(255!=a.opacity)return;if(a.getChildByName("lock"))return s.Tip.show(r.default.formatStr("\u9700\u8981\u94a5\u5319\u89e3\u9501")),void a.runAction(a.getComponent(S.default).shackAction(.1,2));if(a.isScaleAnim)return;if(this.isSortAnim)return;if(a.isCarPark&&!a.isWen)return console.log("\u9650\u5236\u8f66\u5e93\u8f66,\u6ca1\u505c\u7a33");if(this.isRemove&&a.getComponent(S.default).carState==C.CarState.Idle&&!this.removePropUsing&&!a.obliqueHead&&!a.getComponent(S.default).isFireEngine)return void this.removeCar(a);if(this.removePropUsing)return;if(!a.getComponent(S.default).isCanClick)return;if(a.getComponent(S.default).carState!=C.CarState.Idle)return;if(a.getComponent(S.default).isTransportCar&&(a.x>267||a.x<-267))return;if(a.obliqueHead)return void a.runAction(this.shackAction(.1,2));if(this.dict.hand&&this.dict.hand.active&&(this.guidedNodes.push(a),this.currentGuideNode==a)){for(var d=!1,u=0;u<this.guideNodes.length;u++){var p=this.guideNodes[u];if(-1==this.guidedNodes.indexOf(p)){this.currentGuideNode=p,this.handPos(),d=!0;break}}d||(this.dict.hand.active=!1,this.dict.handText.active=!1,this.dict.handText.parent.active=!1)}var f=!1;for(u=0;u<this.parkingNodes.length;u++)if(this.parkingNodes[u].isEmpty){f=!0;break}if(!f)return console.log("\u6240\u6709\u8f66\u4f4d\u90fd\u88ab\u5360\u7528\u4e86"),this.show(r.default.formatStr("\u76ee\u524d\u4f4d\u7f6e\u5df2\u6ee1"),.8,1);if(l||h){var g=0;for(u=0;u<this.parkingNodes.length;u++)this.parkingNodes[u].isEmpty&&(g+=1);if(g<=1)return console.log("\u62c9\u94fe\u8f66-\u6240\u6709\u8f66\u4f4d\u90fd\u88ab\u5360\u7528\u4e86"),this.show(r.default.formatStr("\u9700\u8981\u4e24\u4e2a\u505c\u8f66\u4f4d"),.8,1)}if(this.checkHasCarMoveAmount()>=this.parkingNodes.length)return console.log("\u6709\u76f8\u7b49\u4e8e\u8f66\u4f4d\u603b\u91cf\u7684\u8f66\u5728\u8fd0\u52a8\uff0c\u65e0\u6cd5\u51fa\u8f66"),this.show(r.default.formatStr("\u6682\u65f6\u6ca1\u6709\u66f4\u591a\u4f4d\u7f6e\u4e86"));if(console.log("\u6709"+this.checkHasCarMoveAmount()+"\u8f86\u8f66\u5728\u52a8\uff01",this.parkingNodes.length),(l||h)&&this.parkingNodes.length-this.checkHasCarMoveAmount()<=1)return console.log("\u62c9\u94fe\u8f66\u4e0d\u80fd\u51fa\u8f66"),this.show(r.default.formatStr("\u6682\u65f6\u6ca1\u6709\u66f4\u591a\u4f4d\u7f6e\u4e86"));a.stopAllActions();var m=a.convertToWorldSpaceAR(cc.v2(0,2250)),v=a.parent.convertToNodeSpaceAR(m);a.getComponent(S.default).otherCarNode=this.getOtherCarByDistance(a),a.getComponent(S.default).oldPos=a.position,l&&(l.getComponent(S.default).otherCarNode=this.getOtherCarByDistance(l,!0),l.getComponent(S.default).oldPos=l.position),h&&(h.getComponent(S.default).otherCarNode=this.getOtherCarByDistance(h,!0),h.getComponent(S.default).oldPos=h.position),a.getComponent(S.default).carState==C.CarState.Idle&&(a.getComponent(S.default).carState=C.CarState.Normal,a.getComponent(S.default).isFireEngine||(this.moveCarAmount+=1),cc.tween(a).to(2250/a.getComponent(S.default).speed,{position:v}).start()),a.getComponent(S.default).isTransportCar||a.getComponent(S.default).isUTransportCar||1!=a.getComponent(S.default).path||(this.addTailGasSpine(a),n.Audio.getEffectMute()||this.playRemoteSound("audio/f27312/f27312_Engine2"));break}}}},e.prototype.getAngle=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI+90},e.prototype.addStarSpine=function(t){var e=this,o=cc.instantiate(this.poolMgr.get(this.dict.mixSpine,"mixSpine"));this.node.addChild(o);var i=t.convertToWorldSpaceAR(cc.v2(0,0)),n=o.parent.convertToNodeSpaceAR(i);o.position=n,this.scheduleOnce(function(){e.poolMgr.put(o,"mixSpine")},2)},e.prototype.addTailGasSpine=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(){return e=cc.instantiate(this.dict.tailGas),t.addChild(e),e.position=cc.v2(0,-t.height),e.getComponent(w.default)&&(e.getComponent(w.default).active=!0),[2]})})},e.prototype.getNodeWorldEulerAngles=function(t){for(var e=0,o=t;o;)e+=o.angle,o=o.parent;return console.log("worldEulerAngles",e),console.log("worldEulerAngles2",e%360),e%360},e.prototype.fun=function(t,e,o){if(t&&e)for(var i=0;i<o.length;i++){var n=o[i];console.log("item2.position",e.position),cc.tween(n).stop().to(.05*i+.02,{position:e.position}).start()}else this.unschedule(this.fun)},e.prototype.getWPosByPolygon=function(t){for(var e=t.points,o=[],i=0;i<e.length;i++){var n=cc.v2(e[i].x+t.offset.x,e[i].y+t.offset.y),r=t.node.convertToWorldSpaceAR(n);o.push(r)}return o},e.prototype.getRandomDistinctElements=function(t,e){for(var o=[],i=0;i<e;i++){var n=Math.floor(Math.random()*(t.length-i));o.includes(t[n])||(o.push(t[n]),t[n]=t[t.length-i-1])}return o},e.prototype.setCarColorImg=function(t,e){var o,i=t.getComponent(S.default);i.carColor=e,this.colorPersonArr[e]||(this.colorPersonArr[e]=0),this.colorPersonArr[e]+=i.seatTotalAmount,i.colorImgName=e+1,i.dirImgName=C.CarDirImg[Math.round(Math.abs(t.angle))],i.lenImgName=C.CarLenImg[i.seatTotalAmount],o=this.folder+"_"+C.getCarImgByColor(t,e),t.parent.active=!0,t.active=!0,t.getChildByName("car").getComponent(cc.Sprite).spriteFrame=this.box2SpriteAtlas.getSpriteFrame(o),this.levelDataJSON.carWeight[i.path]||(this.levelDataJSON.carWeight[i.path]=0)},e.prototype.setCarColorImg_2=function(t,e){var o,i=t.getComponent(S.default);i.carColor=e,i.colorImgName=e+1;var n=""+i.colorImgName+i.dirImgName+i.lenImgName;o="texture/"+this.folder+"/"+this.folder+"_"+n,cc.resources.load(o,function(e,o){t.getChildByName("car").getComponent(cc.Sprite).enabled=!0,o&&(t.getChildByName("car").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o))})},e.prototype.updateCarWeight=function(){var t=this;this.carWeight=new Array(this.colorTypeAmount).fill(0);for(var e=this.carRoot.children.concat(this.turntableCarArr),o=function(o){var n=e[o];if(n&&n.getComponent(S.default)&&n.getComponent(S.default).carState==C.CarState.Idle&&!n.getComponent(S.default).isTransportCar&&!n.getComponent(S.default).isUTransportCar){n.path=null;var r=i.getPath(n);n.getComponent(S.default).path=r,1==r&&n.getComponent(S.default).isBlackCar&&!n.isNoBlack&&(n.isScaleAnim=!0,cc.tween(n).to(.2,{scale:1.2}).to(.2,{scale:1}).call(function(){n.isScaleAnim=!1,n.getChildByName("dir").active=!1;var e="texture/"+t.folder+"/"+t.folder+"_3";128==Math.round(Math.abs(n.angle))?e="texture/"+t.folder+"/"+t.folder+"_4":90==Math.round(Math.abs(n.angle))?e="texture/"+t.folder+"/"+t.folder+"_2":0==Math.round(Math.abs(n.angle))&&(e="texture/"+t.folder+"/"+t.folder+"_1"),cc.resources.load(e,function(t,e){t||(n.getChildByName("dir").active=!0,e&&(n.getChildByName("dir").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e)))});var o=n.getComponent(S.default),i=""+o.colorImgName+o.dirImgName+o.lenImgName,r="texture/"+t.folder+"/"+t.folder+"_"+i;n.getChildByName("car").active=!1,n.isNoBlack=!0,cc.resources.load(r,function(t,e){t||(n.getChildByName("car").active=!0,e&&(n.getChildByName("car").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e)))})}).start()),i.isDebug&&n.getChildByName("path")&&(n.getChildByName("path").getComponent(cc.Label).string=""+r);var a=i.levelDataJSON.carWeight[r-1];null==a&&(a=0),i.carWeight[n.getComponent(S.default).carColor]+=a*n.getComponent(S.default).emptySeatAmount}},i=this,n=0;n<e.length;n++)o(n)},e.prototype.createPerson=function(t,e){void 0===t&&(t=!1);for(var o=0,i=0;i<this.currentPersonColorAmount.length;i++)o+=l=this.currentPersonColorAmount[i];if(!(o>=this.allPersonAmount2)){for(var n=0;this.sortPersonNodes.length<this.uiShowPersonAmount;){var r=this.getPersonColor(),a=(i=this.colorPersonIndexArr[r],this.colorPersonAmountArr[r][i]);if(this.isReviveAmount&&(a=1),this.colorPersonAmountArrIndex[r]&&this.colorPersonAmountArrIndex[r][i]==this.lastExtraIndexArr[r]?this.extraWeight[r]=this.extraWeightConst:this.extraWeight[r]=0,this.lastExtraIndexArr[r]=this.colorPersonAmountArrIndex[r][i],!a){for(var s=[],c=0;c<this.colorPersonIndexArr.length;c++){var l=this.colorPersonIndexArr[c];this.colorPersonAmountArr[c][l]&&s.push(c)}if(!s.length)return void(e&&e());r=s[this.randomNum(0,s.length-1)],i=this.colorPersonIndexArr[r],a=this.colorPersonAmountArr[r][i]}this.currentPersonColorAmount[r]+=a,this.isReviveAmount||(this.colorPersonIndexArr[r]+=1),t&&(this.goldIndex=0,this.policeIndex=0);for(var h=0;h<a;h++)if(t){var d=void 0;(d=cc.instantiate(this.dict.personPrefab)).oldPosIndex=-1,this.dict.personRoot.addChild(d),d.getComponent(b.default).personColor=r,r+1==10?(this.setColorPersonImg(r,d,2,this.policeSkinName),"a"==this.policeSkinName?this.policeSkinName="b":this.policeSkinName="a"):r+1==11?(this.setColorPersonImg(r,d,2,this.goldSkinName),this.goldSkinName="a"==this.goldSkinName?"b":"a"):this.setColorPersonImg(r,d);var u=this.dict.personPosRoot.childrenCount-1-n;u<0?d.position=this.dict.doorOutside.position:(d.position=this.dict.personPosRoot.children[u].position,d.zIndex=this.dict.personPosRoot.childrenCount-this.sortPersonNodes.length,d.oldPosIndex=u,u>=5&&this.setColorPersonImg(d.getComponent(b.default).personColor,d,1)),this.sortPersonNodes.push(d),n+=1}else d=void 0,(d=cc.instantiate(this.dict.personPrefab)).oldPosIndex=-1,this.dict.personRoot.addChild(d),d.position=this.dict.doorOutside.position,d.getComponent(b.default).personColor=r,r+1==10?(this.setColorPersonImg(r,d,2,this.policeSkinName),this.policeSkinName="a"==this.policeSkinName?"b":"a"):r+1==11?(this.setColorPersonImg(r,d,2,this.goldSkinName),this.goldSkinName="a"==this.goldSkinName?"b":"a"):this.setColorPersonImg(r,d),this.sortPersonNodes.push(d),n+=1}e&&e()}},e.prototype.personMove=function(){var t=this,e=this.sortPersonNodes.length;e>=this.uiShowPersonAmount&&(e=this.uiShowPersonAmount);for(var o=function(e){var o=i.sortPersonNodes[e];i.scheduleOnce(function(){o.oldPosIndex=0,o.position=t.dict.personPosRoot.children[0].position,e!=t.uiShowPersonAmount-1&&(o.zIndex=t.dict.personPosRoot.childrenCount-e,t.move(0,o,t.dict.personPosRoot.childrenCount-1-e,null,!0))},.1*e)},i=this,n=0;n<e;n++)o(n)},e.prototype.updateParkingWeight=function(){this.parkingWeight=new Array(this.colorTypeAmount).fill(0);for(var t=0;t<this.dict.parkingRoot.children.length;t++){var e=this.dict.parkingRoot.children[t];try{if(e.active&&e.car){var o=e.car,i=o.getComponent(S.default).carColor;if(o&&o.getComponent(S.default))for(var n=0;n<o.getChildByName("seatRoot").children.length;n++){var r=o.getChildByName("seatRoot").children[n];r.active||r.targetPerson||(this.parkingWeight[i]+=this.levelDataJSON.parkingWeight)}}}catch(a){}}},e.prototype.checkPerson=function(t){var e=this;if(void 0===t&&(t=!1),t&&this.checkTipText(),!this.isCheck)for(var o=this.sortPersonNodes[0].getComponent(b.default).personColor,i=null,r=function(t){var r=a.dict.parkingRoot.children[t];if(r.active&&r.car){var s=r.car;if(s.getComponent(S.default).carColor==o)for(var c=function(t){var r=s.getChildByName("seatRoot").children[t];if(!r.active&&!r.targetPerson&&(r.targetPerson=!0,i=r)){a.isCheck=!0;var c=a.sortPersonNodes.shift();c.targetSeat=i,a.setColorPersonImg(o,c),a.createPerson();var l=a.sortPersonNodes.length;l>=a.uiShowPersonAmount&&(l=a.uiShowPersonAmount);for(var h=function(t){var o=a.sortPersonNodes[t];o.zIndex=l-t,o.getComponent(b.default).isMoving=!0,a.move(o.oldPosIndex,o,o.oldPosIndex+1,function(){o.getComponent(b.default).isMoving=!1,t==l-1&&e.scheduleOnce(function(){e.isCheck=!1,e.checkPerson()},.005)})},d=0;d<l;d++)h(d);a.allPersonAmount-=1,a.dict.personAmount.getComponent(cc.Label).string=""+a.allPersonAmount,cc.game.emit("allPersonAmount",a.allPersonAmount,a.allPersonAmount2);var u,p=c.position,f=i.parent.convertToWorldSpaceAR(i.position),g=c.parent.convertToNodeSpaceAR(f),m=g.sub(p).mag()/1e3;console.log("time",m),u=g.x>p.x?1:-1;var v=p.add(cc.v3(100*u,150));return c.stopAllActions(),cc.tween(c).bezierTo(m,p,v,g).call(function(){e.setColorPersonImg_seat(o,i,3),n.Audio.getEffectMute()||e.playRemoteSound("audio/f28749/f28749_Get_on"),i.active=!0,s.getComponent(S.default).emptySeatAmount-=1,e.carAnim(i),c.destroy(),e.checkCarGo()}).start(),{value:void 0}}},l=0;l<s.getChildByName("seatRoot").children.length;l++){var h=c(l);if("object"==typeof h)return h}}},a=this,s=0;s<this.dict.parkingRoot.children.length;s++){var c=r(s);if("object"==typeof c)return c.value}},e.prototype.carAnim=function(t){t.isCarAnim||(t.isCarAnim=!0,cc.tween(t.parent.parent).to(.1,{scale:.9}).to(.1,{scale:1}).call(function(){t.isCarAnim=!1}).start())},e.prototype.checkTipText=function(){for(var t=0,e=0;e<this.parkingNodes.length;e++)this.parkingNodes[e].isEmpty||(t+=1);t==this.parkingNodes.length?cc.game.emit("checkTipText",1):t==this.parkingNodes.length-1&&cc.game.emit("checkTipText",0)},e.prototype.checkCarGo=function(){for(var t=this,e=function(e){var i=o.dict.parkingRoot.children[e];if(i.car){var r=i.car;if(!r.setInterval){for(var a=r.getChildByName("seatRoot"),s=0,c=0;c<a.children.length;c++)a.children[c].active&&(s+=1);if(s>=a.childrenCount){o.moveCarAmount-=1;var l=r.convertToWorldSpaceAR(cc.v2(0,-142.893)),h=r.parent.convertToNodeSpaceAR(l);r.setInterval=!0;var d=setInterval(function(){if(!t.checkCarBlock(h)){clearInterval(d),i.car=null,n.Audio.getEffectMute()||t.playRemoteSound("audio/f28749/f28749_Full"),t.addStarSpine(i),r.GoingOutParking_nPos=h,r.getComponent(S.default).carState=C.CarState.GoingOutParking,0==e&&(i.active=!1),i.isEmpty=!0;var o=Number(r.name[2]),a=r.getComponent(S.default).carColor;r.getChildByName("car").active=!1,r.getChildByName("sd").active=!1,r.getChildByName("shadow").active=!1,r.getChildByName("boxSpine").active=!0,r.getChildByName("boxSpine").getComponent(sp.Skeleton).timeScale=2,r.getChildByName("boxSpine").getComponent(sp.Skeleton).setSkin("skin"+(a+1)),r.getChildByName("boxSpine").getComponent(sp.Skeleton).setAnimation(0,"dabao"+o,!1),r.getChildByName("boxSpine").getComponent(sp.Skeleton).setCompleteListener(function(){cc.tween(r).to(r.height/2/r.getComponent(S.default).speed*1.3,{position:h}).call(function(){t.checkRes(),r.getComponent(S.default).carState=C.CarState.OutParking,t.changeCar(r,1,1,"01"+r.getComponent(S.default).lenImgName+"-1")}).start()})}},.5);o.timeIDArr.push(d)}}}},o=this,i=0;i<this.dict.parkingRoot.children.length;i++)e(i)},e.prototype.checkCarBlock=function(t){for(var e=this.carRoot.children.concat(this.turntableCarArr),o=0;o<e.length;o++){var i=e[o];if(i.getComponent(S.default).carState==C.CarState.OutParking&&i.position.sub(t).mag()<400)return!0;if(i.getComponent(S.default).carState==C.CarState.GoingOutParking){var n=i.GoingOutParking_nPos;if(n&&n.sub(t).mag()<400)return!0}}return!1},e.prototype.checkRes=function(){if(!this.isWin&&0==this.allPersonAmount){if(a.Platform.getConfig().hasCoin){var t=u.default.get(d.default.coin)||0;t+=this.allPersonAmount2,u.default.set(d.default.coin,t),console.log("\u6dfb\u52a0\u672c\u5730\u91d1\u5e01",t,this.allPersonAmount2)}this.isWin=!0,this.playRight()}},e.prototype.func_addResource=function(){var t=u.default.get(d.default.BuildResource)||0;t+=this.carAllAmount,u.default.set(d.default.BuildResource,t)},e.prototype.move=function(t,e,o,i,n){var r=this;void 0===t&&(t=0),e.position.sub(this.dict.personPosRoot.children[t+1].position).mag(),this.personSpeed,n&&this.personSpeed,cc.tween(e).to(.055,{position:this.dict.personPosRoot.children[t+1].position}).call(function(){e.oldPosIndex=t+1,t+1==5&&r.setColorPersonImg(e.getComponent(b.default).personColor,e,1),t+1==o?i&&i():r.move(t+1,e,o)}).start()},e.prototype.setColorPersonImg=function(t,e,o,i){void 0===o&&(o=2),void 0===i&&(i=""),e.getComponent(cc.Sprite).spriteFrame=game.drinkAtlas.getSpriteFrame("f28749_"+(t+1+10))},e.prototype.setColorPersonImg_sort=function(t,e,o){void 0===o&&(o=2),e.getComponent(cc.Sprite).spriteFrame=game.drinkAtlas.getSpriteFrame("f28749_"+(t+1+10))},e.prototype.setColorPersonImg_seat=function(t,e,o){void 0===o&&(o=2),e.getComponent(cc.Sprite).spriteFrame=game.drinkAtlas.getSpriteFrame("f28749_"+(t+1+10)+"-1")},e.prototype.shuffleArray=function(t){for(var e,o=t.length-1;o>0;o--){var i=Math.floor(Math.random()*(o+1));e=[t[i],t[o]],t[o]=e[0],t[i]=e[1]}return t},e.prototype.getAmountByColor=function(t){if(!this.colorPersonAmountArr[t]){this.colorPersonAmountArr[t]=[];for(var e=[],o=[],i=0;i<this.carNodeArr.length;i++){var n=this.carNodeArr[i].getComponent(S.default);if(n.carColor==t){for(var r=[],a=[],s=n.seatTotalAmount;s>0;){var c=this.randomNum(1,s);r.push(c),a.push(e.length),s-=c}e.push(r),o.push(a)}}if(e.length){var l=this.flatten(e),h=this.flatten(o);this.colorPersonAmountArr[t]=l,this.colorPersonAmountArrIndex[t]=h}return e}},e.prototype.flatten=function(t){var e=this;return t.reduce(function(t,o){return Array.isArray(o)?t.concat(e.flatten(o)):t.concat(o)},[])},e.prototype.consoleWeight=function(t,e){for(var o=JSON.parse(JSON.stringify(e)),i=0;i<o.length;i++){var n=o[i];n=C.colorDes[i]+":"+n,o[i]=n}console.log(t,o)},e.prototype.getPersonColor=function(){if(this.reviveArr.length){var t=this.reviveArr.shift();return this.isReviveAmount=1,t}if(this.isReviveAmount=0,this.firstSortIndexArr.length)return this.firstSortIndexArr.shift();this.updateParkingWeight(),this.updateSortWeight();for(var e=0;e<this.colorTypeAmount;e++)this.allWeight[e]=0,this.allWeight[e]+=this.carWeight[e],this.allWeight[e]+=this.parkingWeight[e],this.allWeight[e]+=this.extraWeight[e],this.allWeight[e]-=this.sortWeight[e],this.allWeight[e]<0&&(this.allWeight[e]=0),0!=this.currentPersonColorAmount[e]&&this.currentPersonColorAmount[e]>=this.colorPersonArr[e]&&(console.log(C.colorDes[e]+"\u989c\u8272\u5df2\u7ecf\u6ee1\u5143"),this.allWeight[e]=0);return this.randomByWeight(new Array(C.colorDes.length).fill(1).map(function(t,e){return e}),this.allWeight)},e.prototype.updateSortWeight=function(){this.sortWeight=new Array(this.colorTypeAmount).fill(0);for(var t=0;t<this.sortPersonNodes.length;t++){var e=this.sortPersonNodes[t].getComponent(b.default).personColor;this.sortWeight[e]+=this.levelDataJSON.sortWeight}},e.prototype.getCarColor=function(t,e){for(var o=this.carNodeArr.length,i=Math.round((t+1)/o*100),n=0;n<e.length;n++){var r=e[n];if(i<=r[1]&&i>=r[0]){this.batchMap[n]||(this.batchMap[n]=[]);for(var a=this.randomNum(0,this.randomColorArr[n].length-1),s=this.randomColorArr[n][a];this.batchMap[n].includes(s)&&this.randomColorNum[n]<this.randomColorArr[n].length;)a=this.randomNum(0,this.randomColorArr[n].length-1),s=this.randomColorArr[n][a];return this.randomColorNum[n]+=1,this.batchMap[n].push(s),s}}},e.prototype.setCarID=function(){var t=this;this.carNodeArr.sort(function(t,e){return t.getComponent(S.default).path-e.getComponent(S.default).path}),this.carNodeArr.forEach(function(e,o){if(e.getComponent(S.default).carID=o,t.isDebug){var i=cc.instantiate(e.getChildByName("path"));i.position=cc.v2(0,-20),i.parent=e,i.getComponent(cc.Label).string="ID"+o,i.getComponent(cc.Label).fontSize=20}}),this.carAllAmount=this.carNodeArr.length},e.prototype.getArrByLen=function(t,e){t=this.sortColor_new;for(var o=[],i=0;i<t.length;i++){var n=t[i];i>=e[0]-1&&i<=e[1]-1&&o.push(n)}return o},e.prototype.getOtherCarByDistance=function(t,e){void 0===e&&(e=!1);for(var o=[],i=this.carRoot.children.concat(this.turntableCarArr),n=0;n<i.length;n++){var r=i[n];r&&r!=t&&r.getComponent(S.default).carState==C.CarState.Idle&&r.active&&!r.getComponent(S.default).isTransportCar&&!r.getComponent(S.default).isUTransportCar&&o.push(r)}var a=t.convertToWorldSpaceAR(cc.v2(0,0));return o.sort(function(t,e){var o=t,i=e,n=[o.convertToWorldSpaceAR(cc.v2(0,0)),o.convertToWorldSpaceAR(cc.v2(0,-o.height))],r=[i.convertToWorldSpaceAR(cc.v2(0,0)),i.convertToWorldSpaceAR(cc.v2(0,-i.height))];return cc.Intersection.pointLineDistance(a,n[0],n[1],!0)-cc.Intersection.pointLineDistance(a,r[0],r[1],!0)}),o},e.prototype.getPath=function(t){var e,o,i,n,r,a,s=t;if(s.path)return s.path;var c=s.width,l=s.height;e=s.convertToWorldSpaceAR(cc.v2(-c/2,-l)),o=s.convertToWorldSpaceAR(cc.v2(-c/2,2250)),i=s.convertToWorldSpaceAR(cc.v2(c/2,-l)),n=s.convertToWorldSpaceAR(cc.v2(c/2,2250)),r=s.convertToWorldSpaceAR(cc.v2(0,-l)),a=s.convertToWorldSpaceAR(cc.v2(0,2250));var h=this.getOtherCarByDistance(s),d=!1;s.collisionArr||(s.collisionArr=[]);for(var u=1,p=0;p<h.length;p++){var f=h[p];if(f!=s){var g,m,v,y,_,C,b=f.width,S=f.height;g=f.convertToWorldSpaceAR(cc.v2(-b/2,-S)),m=f.convertToWorldSpaceAR(cc.v2(-b/2,0)),v=f.convertToWorldSpaceAR(cc.v2(b/2,-S)),y=f.convertToWorldSpaceAR(cc.v2(b/2,0)),_=f.convertToWorldSpaceAR(cc.v2(b/2+1,0)),C=f.convertToWorldSpaceAR(cc.v2(-b/2-1,0)),(cc.Intersection.lineLine(e,o,g,m)||cc.Intersection.lineLine(e,o,v,y)||cc.Intersection.lineLine(i,n,g,m)||cc.Intersection.lineLine(i,n,v,y)||cc.Intersection.lineLine(e,o,_,C)||cc.Intersection.lineLine(i,n,_,C)||cc.Intersection.lineLine(r,a,_,C))&&(d=!0,f.path?u+=f.path:u+=this.getPath(f))}}return d?(s.path=u,u):(s.path=1,1)},e.prototype.hasCommonElement=function(t,e){return t.some(function(t){return e.includes(t)})},e.prototype.areAllNumbersSmallerThan=function(t,e){return t.every(function(t){return t<e})},e.prototype.checkWeightLimit=function(t,e){void 0===e&&(e=0),this.weightLimitIndex=e;for(var o=0,i=0;i<t.length;i++)t[i]<this.levelDataJSON.weightLimit[e]&&(o+=1);return o>=t.length?this.levelDataJSON.weightLimit[e+1]?this.checkWeightLimit(t,e+1):-1:this.weightLimitIndex},e.prototype.fetchMaxIndex=function(t,e){return t.map(function(t,e){return{key:e,value:t}}).sort(function(t,e){return e.value-t.value}).filter(function(t,o){return o<e}).map(function(t){return t.key})},e.prototype.getLevelProgressByCar=function(){for(var t=this.carRoot.children.concat(this.turntableCarArr),e=0,o=0;o<t.length;o++){var i=t[o];i&&i.active&&i.getComponent(S.default).carState==C.CarState.Idle&&(e+=1)}var n=(this.carAllAmount-e)/this.carAllAmount*100;if(this.levelDataJSON.hardPoints)for(o=0;o<this.levelDataJSON.hardPoints.length;o++){var r=this.levelDataJSON.hardPoints[o];if(!this.hardPointsIndexs.includes(o)&&r[0]<=n&&r[1]>=n)return console.log("\u89e6\u53d1\u5361\u70b9",r),this.hardPointsIndexs.push(o),!0}return!1},e.prototype.randomByWeight=function(t,e){if(t.length!=e.length)return console.warn("random2\u8f93\u5165\u4e0d\u5408\u6cd5: resultArr.length != weightArr.length"),null;if(this.getLevelProgressByCar()){console.log("\u53d6\u6743\u91cd\u4e0d\u4e3a0\u4f46\u6700\u5c0f\u7684\u989c\u8272");for(var o=0,i=e[0],n=0;n<e.length;n++){var r=e[n];(r<i&&0!=r||0==i&&0!=r)&&(o=n,i=r)}for(console.log("minIndex",o),console.log("\u5361\u70b9\u8fc7\u6ee4\u524d\u6743\u91cd",JSON.stringify(e)),n=0;n<e.length;n++)n!=o&&(e[n]=0);console.log("\u5361\u70b9\u8fc7\u6ee4\u540e\u6743\u91cd",JSON.stringify(e))}else{var a=this.fetchMaxIndex(e,this.levelDataJSON.limitRank||C.colorDes.length);for(n=0;n<e.length;n++)e[n],a.includes(n)||(e[n]=0)}if(this.arraysEqual(e,new Array(C.colorDes.length).fill(0))){console.log("TODO");var s=[];for(n=0;n<C.colorDes.length;n++)this.colorPersonAmountArr[n].length&&this.currentPersonColorAmount[n]<this.colorPersonArr[n]&&s.push(n);if(console.log("TODO",s),s.length)return s[this.randomNum(0,s.length-1)]}for(var c=0,l=0,h=Math.random(),d=e.length-1;d>=0;d--)c+=e[d];for(h*=c,d=e.length-1;d>=0;d--)if(h<=(l+=e[d]))return t[d];return null},e.prototype.arraysEqual=function(t,e){if(t.length!==e.length)return!1;for(var o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0},e.prototype.randomNum=function(t,e,o){var i=e-t,n=o||Math.random();return t+Math.round(n*i)},e.prototype.getLocal=function(t){if(this.localData[t])return this.localData[t];var e=cc.sys.localStorage.getItem(""+this.levelID+t);return e?JSON.parse(e):null},e.prototype.setLocal=function(t,e){this.localData[t]=e,cc.sys.localStorage.setItem(""+this.levelID+t,JSON.stringify(e))},e.prototype.show=function(t,e,o){void 0===e&&(e=.8),void 0===o&&(o=0);var i=cc.instantiate(this.dict.tipPrefab);this.dict.game.addChild(i),i.active=!0,i.stopAllActions(),i.children[1].getComponent(cc.Label).string=r.default.formatStr(t),i.setPosition(cc.v2(0,-60)),i.opacity=0,cc.tween(i).by(.3,{position:cc.v3(0,60),opacity:255}).delay(e).by(.3,{position:cc.v3(0,60),opacity:-255}).call(function(){i.destroy()}).start()},e.prototype.func_sort2=function(){this.func_sort()},e.prototype.func_sort=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,i=this;return __generator(this,function(n){switch(n.label){case 0:return this.isSorting?[2]:(this.isSorting=!0,this.isSortAnim=!0,t=1.5,[4,g.default.getRes("gameBundle","prefab/item/StarPrefab",cc.Prefab)]);case 1:return e=n.sent(),o=cc.instantiate(e),this.dict.tailGas.parent.addChild(o),this.schedule(function(){for(var t=0;t<i.sortPersonNodes.length;t++){var e=i.sortPersonNodes[t],o=i.randomNum(0,C.colorDes.length-1);i.setColorPersonImg_sort(o,e)}},.2,(t-1)/.2-.3),cc.tween(this.node).delay(t).call(function(){i.isSortAnim=!1,o.destroy(),i.isFail=!1,i.consoleWeight("\u603b\u6743\u91cd",i.allWeight),console.log("\u6392\u961f\u989c\u8272\u987a\u5e8f",i.fetchMaxIndex(i.allWeight,C.colorDes.length));for(var t=i.fetchMaxIndex(i.allWeight,C.colorDes.length),e=new Array(C.colorDes.length).fill(0),n=0;n<i.sortPersonNodes.length;n++)e[(a=i.sortPersonNodes[n]).getComponent(b.default).personColor]+=1;var r=0;for(n=0;n<i.sortPersonNodes.length;n++){for(var a=i.sortPersonNodes[n],s=t[r];0==e[s]&&(s=t[r+=1],!(r>=C.colorDes.length-1)););e[s]-=1,a.getComponent(b.default).personColor=s,i.setColorPersonImg_sort(s,a),console.log(C.colorDes[s])}i.checkPerson(),i.isSorting=!1}).start(),[2]}})})},e.prototype.remove=function(){console.log("start=====",JSON.parse(JSON.stringify(this.colorPersonAmountArr)));for(var t=[],e=0;e<this.sortPersonNodes.length;e++){var o=(d=this.sortPersonNodes[e]).getComponent(b.default).personColor;t.push(o)}console.log("\u6d88\u9664",t);var i=this.dict.parkingRoot.children[0].car,n=i.getComponent(S.default).carColor,r=i.getComponent(S.default).emptySeatAmount,a=[],s=[];for(e=0;e<t.length;e++)a.length<r&&t[e]==n?a.push(t[e]):s.push(t[e]);var c=a.concat(s);console.log("\u65b0\u6392\u5e8f",JSON.stringify(c));var l=r-a.length;if(console.log("add",l),l>0){console.log("start",JSON.stringify(this.colorPersonAmountArr[n]));for(var h=0;h<l;h++)c.unshift(n),console.log("\u6267\u884c");for(e=this.colorPersonAmountArr[n].length-1;e>=0;e--)if(this.colorPersonAmountArr[n][e]>0){if(l<=this.colorPersonAmountArr[n][e]){this.colorPersonAmountArr[n][e]-=l,l=0;break}l-=this.colorPersonAmountArr[n][e],this.colorPersonAmountArr[n][e]=0}}for(console.log("end",JSON.stringify(this.colorPersonAmountArr[n])),console.log("\u65b0\u6392\u5e8f2",JSON.stringify(c)),e=0;e<c.length;e++){var d=this.sortPersonNodes[e],u=c[e];if(d)d.getComponent(b.default).personColor=u,this.setColorPersonImg_sort(u,d);else{var p=this.colorPersonAmountArr[u].length-1;this.colorPersonAmountArr[u][p]+=1,console.log("\u56de\u6536",C.colorDes[u]),this.currentPersonColorAmount[u]-=1}}console.log("end=====",JSON.parse(JSON.stringify(this.colorPersonAmountArr))),this.checkPerson()},e.prototype.revive=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,i=this;return __generator(this,function(n){switch(n.label){case 0:return this.isSorting?[2]:(this.isSorting=!0,this.isSortAnim=!0,t=1.5,[4,g.default.getRes("gameBundle","prefab/item/StarPrefab",cc.Prefab)]);case 1:return e=n.sent(),o=cc.instantiate(e),this.dict.tailGas.parent.addChild(o),this.schedule(function(){for(var t=0;t<i.sortPersonNodes.length;t++){var e=i.sortPersonNodes[t],o=i.randomNum(0,C.colorDes.length-1);i.setColorPersonImg_sort(o,e)}},.2,(t-1)/.2-.3),cc.tween(this.node).delay(t).call(function(){i.isFail=!1,i.policeIndex=0,i.goldIndex=0,i.isSortAnim=!1,o.destroy();for(var t=0,e={},n=[],r=0;r<i.parkingNodes.length;r++){var a=(f=i.parkingNodes[r]).car;if(!f.isEmpty&&a&&t<4){t+=1;var s=a.getComponent(S.default),c=new Array(s.emptySeatAmount).fill(s.carColor);if(n=n.concat(c),e[s.carColor]){var l=e[s.carColor];l+=s.emptySeatAmount,e[s.carColor]=l}else e[s.carColor]=s.emptySeatAmount}}console.log("\u9700\u8981\u4ece\u540e\u9762\u51cf\u6389",JSON.parse(JSON.stringify(e)));var h=[];for(r=0;r<i.sortPersonNodes.length;r++){var d=(f=i.sortPersonNodes[r]).getComponent(b.default).personColor;n.includes(d)?0==(l=e[d])?h.push(d):(l-=1,e[d]=l):h.push(d)}for(var u in n=n.concat(h),console.log("\u9700\u8981\u4ece\u540e\u9762\u51cf\u6389222",JSON.parse(JSON.stringify(e))),console.log("start",JSON.parse(JSON.stringify(i.colorPersonAmountArr))),e){var p=e[u];if(d=Number(u),p>0)for(r=i.colorPersonAmountArr[d].length-1;r>=0;r--)if(i.colorPersonAmountArr[d][r]>0){if(p<=i.colorPersonAmountArr[d][r]){i.colorPersonAmountArr[d][r]-=p,p=0;break}p-=i.colorPersonAmountArr[d][r],i.colorPersonAmountArr[d][r]=0}}for(console.log("end",JSON.parse(JSON.stringify(i.colorPersonAmountArr))),i.reviveArr.length?i.reviveArr=n.concat(i.reviveArr):i.reviveArr=n,r=0;r<n.length;r++){var f=i.sortPersonNodes[r];d=n[r],f?(f.getComponent(b.default).personColor=d,i.setColorPersonImg_sort(d,f)):console.log("\u662f\u5426\u56de\u6536",C.colorDes[d])}for(console.log("start-reviveArr",JSON.parse(JSON.stringify(i.reviveArr))),r=0;r<n.length;r++)if(f=i.sortPersonNodes[r],d=n[r],!f){i.reviveArr=i.reviveArr.splice(r);break}console.log("end-reviveArr",JSON.parse(JSON.stringify(i.reviveArr))),i.checkPerson(),i.isSorting=!1}).start(),[2]}})})},e.prototype.revive2=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,i=this;return __generator(this,function(n){switch(n.label){case 0:return this.isSorting?[2]:(this.isSorting=!0,this.isSortAnim=!0,t=1.5,[4,g.default.getRes("gameBundle","prefab/item/StarPrefab",cc.Prefab)]);case 1:return e=n.sent(),o=cc.instantiate(e),this.dict.tailGas.parent.addChild(o),this.schedule(function(){for(var t=0;t<i.sortPersonNodes.length;t++){var e=i.sortPersonNodes[t],o=i.randomNum(0,C.colorDes.length-1);i.setColorPersonImg_sort(o,e)}},.2,(t-1)/.2-.3),cc.tween(this.node).delay(t).call(function(){i.isFail=!1,i.policeIndex=0,i.goldIndex=0,i.isSortAnim=!1,o.destroy();for(var t=0,e={},n=[],r=0;r<i.parkingNodes.length;r++){var a=(f=i.parkingNodes[r]).car;if(!f.isEmpty&&a&&t<4){t+=1;var s=a.getComponent(S.default),c=new Array(s.emptySeatAmount).fill(s.carColor);if(n=n.concat(c),e[s.carColor]){var l=e[s.carColor];l+=s.emptySeatAmount,e[s.carColor]=l}else e[s.carColor]=s.emptySeatAmount}}console.log("\u9700\u8981\u4ece\u540e\u9762\u51cf\u6389",JSON.parse(JSON.stringify(e)));var h=[];for(r=0;r<i.sortPersonNodes.length;r++){var d=(f=i.sortPersonNodes[r]).getComponent(b.default).personColor;n.includes(d)?0==(l=e[d])?h.push(d):(l-=1,e[d]=l):h.push(d)}for(var u in n=n.concat(h),console.log("\u9700\u8981\u4ece\u540e\u9762\u51cf\u6389222",JSON.parse(JSON.stringify(e))),console.log("start",JSON.parse(JSON.stringify(i.colorPersonAmountArr))),e){var p=e[u];if(d=Number(u),p>0)for(r=i.colorPersonAmountArr[d].length-1;r>=0;r--)if(i.colorPersonAmountArr[d][r]>0){if(p<=i.colorPersonAmountArr[d][r]){i.colorPersonAmountArr[d][r]-=p,p=0;break}p-=i.colorPersonAmountArr[d][r],i.colorPersonAmountArr[d][r]=0}}for(console.log("end",JSON.parse(JSON.stringify(i.colorPersonAmountArr))),i.reviveArr.length?i.reviveArr=n.concat(i.reviveArr):i.reviveArr=n,r=0;r<n.length;r++){var f=i.sortPersonNodes[r];d=n[r],f?(f.getComponent(b.default).personColor=d,i.setColorPersonImg_sort(d,f)):console.log("\u662f\u5426\u56de\u6536",C.colorDes[d])}for(console.log("start-reviveArr",JSON.parse(JSON.stringify(i.reviveArr))),r=0;r<n.length;r++)if(f=i.sortPersonNodes[r],d=n[r],!f){i.reviveArr=i.reviveArr.splice(r);break}console.log("end-reviveArr",JSON.parse(JSON.stringify(i.reviveArr))),i.checkPerson(),i.isSorting=!1}).start(),[2]}})})},e.prototype.func_sortOld=function(t){return void 0===t&&(t=!1),__awaiter(this,void 0,void 0,function(){var e,o,i,n=this;return __generator(this,function(r){switch(r.label){case 0:return this.isSorting?[2]:(this.isSorting=!0,this.isSortAnim=!0,e=1.5,[4,g.default.getRes("gameBundle","prefab/item/StarPrefab",cc.Prefab)]);case 1:return o=r.sent(),i=cc.instantiate(o),this.dict.tailGas.parent.addChild(i),this.schedule(function(){for(var t=0;t<n.sortPersonNodes.length;t++){var e=n.sortPersonNodes[t],o=n.randomNum(0,C.colorDes.length-1);n.setColorPersonImg_sort(o,e)}},.2,(e-1)/.2-.3),this.scheduleOnce(function(){n.policeIndex=0,n.goldIndex=0,n.isSortAnim=!1,i.destroy(),n.isFail=!1,n.firstSortIndexArr=[],n.firstSortAmountArr=[];var e=[],o=[];if(t){var r=n.dict.parkingRoot.children[0].car;e.push(r.getComponent(S.default).carColor),o.push(r.getComponent(S.default).emptySeatAmount);for(var a=0;a<n.parkingNodes.length;a++){var s=(d=n.parkingNodes[a]).car;!d.isEmpty&&s&&e.length<3&&(e.push(s.getComponent(S.default).carColor),o.push(s.getComponent(S.default).emptySeatAmount))}}else for(a=0;a<n.parkingNodes.length;a++)r=(d=n.parkingNodes[a]).car,!d.isEmpty&&r&&e.length<4&&(e.push(r.getComponent(S.default).carColor),o.push(r.getComponent(S.default).emptySeatAmount));if(0==e.length){var c=new Array(n.colorTypeAmount).fill(0);for(a=0;a<n.sortPersonNodes.length;a++)c[h=(d=n.sortPersonNodes[a]).getComponent(b.default).personColor]+=1,n.currentPersonColorAmount[h]-=1,!n.firstSortIndexArr.includes(h)&&n.firstSortIndexArr.length<2&&n.firstSortIndexArr.push(h);for(var l=new Array(n.colorTypeAmount).fill([]),h=0;h<n.colorPersonAmountArr.length;h++){var d=n.colorPersonAmountArr[h],u=void 0;u=n.colorPersonIndexArr[h]==d.length?[]:d.slice(-(d.length-n.colorPersonIndexArr[h])),l[h]=u}for(a=0;a<l.length;a++)0!=c[a]&&l[a].push(c[a]);for(a=0;a<n.firstSortIndexArr.length;a++){h=n.firstSortIndexArr[a];var p=void 0;p=(m=n.colorPersonArr[h]-n.currentPersonColorAmount[h])>=10?10:m;var f=0;if((v=l[h])[v.length-1]>p)f=p,v[v.length-1]-=p,v.unshift(p);else if(v[v.length-1]==p)v.pop(),v.unshift(p);else{for(;f<p;)(f+=v[v.length-1])>p?v[v.length-1]=f-p:v.pop();v.unshift(p)}l[h]=v}for(a=0;a<n.sortPersonNodes.length;a++)(v=n.sortPersonNodes[a]).destroy();n.sortPersonNodes=[],n.colorPersonIndexArr=new Array(n.colorTypeAmount).fill(0),n.colorPersonAmountArr=l,n.createPerson(!0),n.isSorting=!1}else if(1==e.length||2==e.length){var g=e.length;for(n.firstSortIndexArr=e,n.firstSortAmountArr=o,c=new Array(n.colorTypeAmount).fill(0),a=0;a<n.sortPersonNodes.length;a++)c[h=(d=n.sortPersonNodes[a]).getComponent(b.default).personColor]+=1,n.currentPersonColorAmount[h]-=1,n.firstSortIndexArr.length<g+1&&n.firstSortIndexArr.push(h);if(t);else if(n.firstSortIndexArr.length<g+1)for(a=0;a<n.colorPersonArr.length;a++)(v=n.colorPersonArr[a])-n.currentPersonColorAmount[a]&&n.firstSortIndexArr.length<g+1&&n.firstSortIndexArr.push(a);for(l=new Array(n.colorTypeAmount).fill([]),h=0;h<n.colorPersonAmountArr.length;h++)d=n.colorPersonAmountArr[h],u=void 0,u=n.colorPersonIndexArr[h]==d.length?[]:d.slice(-(d.length-n.colorPersonIndexArr[h])),l[h]=u;for(a=0;a<l.length;a++)0!=c[a]&&l[a].push(c[a]);for(a=0;a<n.firstSortIndexArr.length;a++){if(h=n.firstSortIndexArr[a],(p=n.firstSortAmountArr[a])||(p=10),(m=n.colorPersonArr[h]-n.currentPersonColorAmount[h])<10&&(p=m),f=0,(v=l[h])[v.length-1]>p)f=p,v[v.length-1]-=p,v.unshift(p);else if(v[v.length-1]==p)v.pop(),v.unshift(p);else{for(;f<p;)(f+=v[v.length-1])>p?v[v.length-1]=f-p:v.pop();v.unshift(p)}l[h]=v}for(a=0;a<n.sortPersonNodes.length;a++)(v=n.sortPersonNodes[a]).destroy();n.sortPersonNodes=[],n.colorPersonIndexArr=new Array(n.colorTypeAmount).fill(0),n.colorPersonAmountArr=l,n.createPerson(!0,function(){n.checkPerson(),n.isSorting=!1})}else{for(n.firstSortIndexArr=e,n.firstSortAmountArr=o,c=new Array(n.colorTypeAmount).fill(0),a=0;a<n.sortPersonNodes.length;a++)c[h=(d=n.sortPersonNodes[a]).getComponent(b.default).personColor]+=1,n.currentPersonColorAmount[h]-=1;for(l=new Array(n.colorTypeAmount).fill([]),h=0;h<n.colorPersonAmountArr.length;h++)d=n.colorPersonAmountArr[h],u=void 0,u=n.colorPersonIndexArr[h]==d.length?[]:d.slice(-(d.length-n.colorPersonIndexArr[h])),l[h]=u;for(a=0;a<l.length;a++)0!=c[a]&&l[a].push(c[a]);for(a=0;a<n.firstSortIndexArr.length;a++){h=n.firstSortIndexArr[a],p=n.firstSortAmountArr[a];var m=n.colorPersonArr[h]-n.currentPersonColorAmount[h];if(f=0,(v=l[h])[v.length-1]>p)f=p,v[v.length-1]-=p,v.unshift(p);else if(v[v.length-1]==p)v.pop(),v.unshift(p);else{for(;f<p;)(f+=v[v.length-1])>p?v[v.length-1]=f-p:v.pop();v.unshift(p)}l[h]=v}for(a=0;a<n.sortPersonNodes.length;a++){var v;(v=n.sortPersonNodes[a]).destroy()}n.sortPersonNodes=[],n.colorPersonIndexArr=new Array(n.colorTypeAmount).fill(0),n.colorPersonAmountArr=l,n.createPerson(!0,function(){n.checkPerson(),n.isSorting=!1})}},e),[2]}})})},e.prototype.func_updateCar=function(){for(var t=[],e=this.carRoot.children.concat(this.turntableCarArr),o=0;o<e.length;o++)!(l=e[o]).active||l.getComponent(S.default).carState!=C.CarState.Idle||l.getComponent(S.default).isTransportCar||l.getComponent(S.default).isUTransportCar||l.getComponent(S.default).isBlackCar||t.push(l);for(var i=0;i<t.length;i++)for(var n=t[i],r=0;r<t.length;r++){var a=t[r];if(n!=a&&n.getComponent(S.default).seatTotalAmount==a.getComponent(S.default).seatTotalAmount&&n.getComponent(S.default).carColor!=a.getComponent(S.default).carColor&&!n.isExchange&&!a.isExchange&&1==this.randomNum(0,1)){var s=n.getComponent(S.default).carColor,c=a.getComponent(S.default).carColor;n.getComponent(S.default).carColor=c,a.getComponent(S.default).carColor=s,n.isExchange=!0,a.isExchange=!0,this.setCarColorImg(n,n.getComponent(S.default).carColor),this.setCarColorImg(a,a.getComponent(S.default).carColor);break}}for(o=0;o<e.length;o++){var l;(l=e[o]).isExchange=!1}},e.prototype.func_chooseClear=function(){this.isTransportCarMove=!1;var t=cc.instantiate(this.dict.tipPrefab);this.dict.tipPrefab.parent.addChild(t),this.tipRemove=t,t.children[1].getComponent(cc.Label).string=r.default.formatStr("\u53ef\u62ce\u51fa\u4efb\u610f\u4e00\u4e2a\u76d2\u5b50\u81f3VIP\u4f4d\u7f6e\u6d88\u9664"),t.y=301.643,t.active=!0,this.isRemove=!0,cc.game.emit("isRemove",!0);for(var e=0;e<this.carRoot.children.length;e++){var o=this.carRoot.children[e];(o.getComponent(S.default).prevCar||o.getComponent(S.default).nextCar||o.getChildByName("key")||o.getChildByName("lock"))&&(o.opacity=100)}},e.prototype.removeCarOld=function(t){var e=this;this.removePropUsing=!0,this.tipRemove.destroy();var o=t.convertToWorldSpaceAR(cc.v2(0,-t.height/2));this.dict.helicopterRoot.position=cc.v3(434,-614,0);var i=this.dict.helicopterRoot.parent.convertToNodeSpaceAR(o),n=this.dict.helicopterRoot.position.sub(i).mag();this.dict.helicopterSpine.getComponent(sp.Skeleton).setAnimation(0,"animation2",!0),this.dict.parkingRoot.children[0].active=!0;var r=this.dict.parkingRoot.children[0].convertToWorldSpaceAR(cc.v2(0,-this.dict.parkingRoot.children[0].height/2)),a=this.dict.helicopterRoot.parent.convertToNodeSpaceAR(r),s=i.sub(a).mag();this.dict.helicopterRoot.active=!0,this.dict.helicopterRoot.opacity=255,cc.tween(this.dict.helicopterRoot).to(n/500,{position:i}).to(.3,{scale:.9}).call(function(){var o=cc.instantiate(t);if(o.getChildByName("car").getComponent(cc.PolygonCollider).enabled=!1,o.getComponent(S.default).lenImgName=t.getComponent(S.default).lenImgName,o.getComponent(S.default).colorImgName=t.getComponent(S.default).colorImgName,o.getComponent(S.default).carColor=t.getComponent(S.default).carColor,t.getComponent(S.default).isTransportCar){var i=e.transportCarArr.indexOf(t);-1!==i&&e.transportCarArr.splice(i,1)}t.destroy(),e.dict.helicopterRoot.getChildByName("car").addChild(o);var n=t.convertToWorldSpaceAR(cc.v2(0,0));o.position=e.dict.helicopterRoot.getChildByName("car").parent.convertToNodeSpaceAR(n)}).delay(.3).to(.3,{scale:1}).to(s/500,{position:a}).to(.3,{scale:.9}).call(function(){var t,o,n=e.dict.helicopterRoot.getChildByName("car").children[0],r=n.getComponent(S.default).colorImgName,a=n.getComponent(S.default).lenImgName;(t=cc.instantiate(e.dict.carPrefab.getChildByName("06"+a))).parking=e.dict.parkingRoot.children[0],t.getChildByName("car").getComponent(cc.PolygonCollider).enabled=!1,t.active=!1,e.carRoot.addChild(t);var s=t.parking.convertToWorldSpaceAR(cc.v2(0,0));i=t.parent.convertToNodeSpaceAR(s),t.position=cc.v2(i.x,i.y);var c=""+r+6+a;o="texture/"+e.folder+"/"+e.folder+"_"+c,t.getComponent(S.default).carColor=n.getComponent(S.default).carColor,t.getComponent(S.default).colorImgName=n.getComponent(S.default).colorImgName,t.getComponent(S.default).lenImgName=n.getComponent(S.default).lenImgName,t.parking.car=t,t.parking.isEmpty=!1,cc.resources.load(o,function(o,i){n.destroy(),i&&(t.getChildByName("car").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(i)),t.active=!0,e.dict.helicopterRoot.opacity=0,e.remove(),e.scheduleOnce(function(){e.isRemove=!1,e.removePropUsing=!1,e.isTransportCarMove=!0,cc.game.emit("isRemove",!1);for(var t=0;t<e.carRoot.children.length;t++){var o=e.carRoot.children[t];(o.getComponent(S.default).prevCar||o.getComponent(S.default).nextCar||o.getChildByName("key")||o.getChildByName("lock"))&&(o.opacity=255)}},1)})}).start()},e.prototype.removeCar=function(t){var e,o=this;this.removePropUsing=!0,this.tipRemove.destroy(),this.dict.parkingRoot.children[0].active=!0,e=1==t.getComponent(S.default).lenImgName?this.dict.parkingRoot.children[0].convertToWorldSpaceAR(cc.v2(0,t.height/2+5)):2==t.getComponent(S.default).lenImgName?this.dict.parkingRoot.children[0].convertToWorldSpaceAR(cc.v2(0,t.height/2)):this.dict.parkingRoot.children[0].convertToWorldSpaceAR(cc.v2(0,t.height/2+2));var i=t.parent.convertToNodeSpaceAR(e);cc.tween(t).to(.3,{position:i}).call(function(){var e,n=t.getComponent(S.default).lenImgName;(e=cc.instantiate(o.dict.carPrefab.getChildByName("06"+n))).parking=o.dict.parkingRoot.children[0],e.getChildByName("car").getComponent(cc.PolygonCollider).enabled=!1,e.active=!1,o.carRoot.addChild(e),e.position=i,e.getComponent(S.default).carColor=t.getComponent(S.default).carColor,e.getComponent(S.default).colorImgName=t.getComponent(S.default).colorImgName,e.getComponent(S.default).lenImgName=t.getComponent(S.default).lenImgName,e.parking.car=e,e.parking.isEmpty=!1,t.destroy();var r=e.getComponent(S.default).seatTotalAmount,a=e.getComponent(S.default).carColor;e.getChildByName("car").getComponent(cc.Sprite).spriteFrame=game.boxAtlas.getSpriteFrame("f28749_"+(100*C.ParkingImg[r]+a+1)),e.active=!0,o.remove(),o.scheduleOnce(function(){o.isRemove=!1,o.removePropUsing=!1,o.isTransportCarMove=!0,cc.game.emit("isRemove",!1)},1)}).start()},e.prototype.func_revive=function(){if(this.func_hasLockParking()){for(var t=0;t<this.dict.parkingRoot.children.length;t++){var e=this.dict.parkingRoot.children[t];if(e.getChildByName("videoLock")&&e.getChildByName("videoLock").active){e.getChildByName("videoLock").destroy(),e.getChildByName("empty").active=!0,this.playUnlockSpine(e),e.isEmpty=!0,this.parkingNodes.push(e);break}}cc.game.emit("gamelog_Thinking",h.ShuShuConst.reward_btn,{lv:c.User.getTempData(i.TempData.CURRENT_LEVEL_ID),mode:c.User.getTempData(i.TempData.CURRENT_MODE),queue:c.User.getTempData(i.TempData.CURRENT_LEVEL),id:8,sort:u.default.get(d.default.ConfigSuffix)}),this.func_sortOld()}else cc.game.emit("gamelog_Thinking",h.ShuShuConst.reward_btn,{lv:c.User.getTempData(i.TempData.CURRENT_LEVEL_ID),mode:c.User.getTempData(i.TempData.CURRENT_MODE),queue:c.User.getTempData(i.TempData.CURRENT_LEVEL),id:9,sort:u.default.get(d.default.ConfigSuffix)}),this.func_sortOld()},e.prototype.func_hasLockParking=function(){for(var t=0;t<this.dict.parkingRoot.children.length;t++){var e=this.dict.parkingRoot.children[t];if(e.getChildByName("videoLock")&&e.getChildByName("videoLock").active)return!0}return!1},e.prototype.func_endPause=function(){for(var t=0;t<this.dict.personRoot.children.length;t++)this.dict.personRoot.children[t].pauseAllActions()},e.prototype.func_resume=function(){for(var t=0;t<this.dict.personRoot.children.length;t++)this.dict.personRoot.children[t].resumeAllActions()},__decorate([P(cc.SpriteAtlas)],e.prototype,"box2SpriteAtlas",void 0),__decorate([P],e.prototype,"isDebug",void 0),__decorate([P],e.prototype,"boundary",void 0),__decorate([l.LimitRepeat(.3)],e.prototype,"touchStart",null),__decorate([k],e)}(y.default);o.default=T,cc._RF.pop()},{"../../scripts/AssetManager":"AssetManager","../../scripts/AudioManager":"AudioManager","../../scripts/LanguageManager":"LanguageManager","../../scripts/LimitRepeat":"LimitRepeat","../../scripts/LocalStorageConst":"LocalStorageConst","../../scripts/LocalStorageManager":"LocalStorageManager","../../scripts/MemoryStorageConst":"MemoryStorageConst","../../scripts/MemoryStorageManager":"MemoryStorageManager","../../scripts/PlatformManager":"PlatformManager","../../scripts/PopupConst":"PopupConst","../../scripts/PopupManager":"PopupManager","../../scripts/ShuShuConst":"ShuShuConst","../../scripts/TipManager":"TipManager","../../scripts/UserConst":"UserConst","../../scripts/UserManager":"UserManager","./BrainLevelBase":"BrainLevelBase","./Level-249667_personItem":"Level-249667_personItem","./Level-29076_boxCarItem":"Level-29076_boxCarItem","./Level-29076_config":"Level-29076_config","./MotionTrail":"MotionTrail","./PoolMgr":"PoolMgr"}],"Level-29086_boxCarItem":[function(t,e,o){"use strict";cc._RF.push(e,"53e1bbd1FhHG5X+t6tsCBMT","Level-29086_boxCarItem");var i=t("../../scripts/AudioManager"),n=t("./Level-249667_chain"),r=t("./Level-249667_uTransport"),a=t("./Level-29086_config"),s=cc._decorator,c=s.ccclass,l=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.seatTotalAmount=4,e.railCarTurn=[],e.carColor=null,e.carID=null,e.path=0,e.emptySeatAmount=0,e.dir=0,e.colorImgName=null,e.dirImgName=null,e.lenImgName=null,e.mgr=null,e.isTransportCar=!1,e.isBlackCar=!1,e.isTurntableCar=!1,e.turntablePosIndex=-1,e.prevCar=null,e.nextCar=null,e.leftObliqueCar=!1,e.rightObliqueCar=!1,e.isUTransportCar=!1,e.isUTransportCar_noIn=!1,e.isFireEngine=!1,e.isPoliceCar=!1,e.isRichCar=!1,e.isTramcar=!1,e.tramcarPosIndex=0,e.otherCarNode=[],e.minLen=10,e.oldPos=null,e.floatPos=null,e.carState=a.CarState.Idle,e.speed=750,e.isCanClick=!0,e.isCollision=!1,e.isReadyDestroy=!1,e}var o;return __extends(e,t),o=e,e.prototype.onLoad=function(){this.emptySeatAmount=this.seatTotalAmount,this.oldPos=this.node.position,"1"==this.node.name[0]&&"2"==this.node.name[1]&&(this.isFireEngine=!0),"1"==this.node.name[0]&&"0"==this.node.name[1]&&(this.isPoliceCar=!0),"1"==this.node.name[0]&&"1"==this.node.name[1]&&(this.isRichCar=!0),"1"==this.node.name[0]&&"3"==this.node.name[1]&&(this.isTramcar=!0)},e.prototype.update=function(){if(!this.isReadyDestroy){if(this.carState==a.CarState.Normal){if(this.path>1||this.isTramcar){this.isCanClick=!1;var t=this.getWPosByNode(this.node),e=Math.round(Math.abs(this.node.angle)),i=void 0;90==e&&(i=[this.node.convertToWorldSpaceAR(cc.v2(-this.node.width/2,0)),this.node.convertToWorldSpaceAR(cc.v2(this.node.width/2,0))]);for(var n=0;n<this.otherCarNode.length;n++){var s=this.otherCarNode[n];try{if(s&&s.getComponent(o).carState==a.CarState.Idle){var c=[s.convertToWorldSpaceAR(cc.v2(0,0)),s.convertToWorldSpaceAR(cc.v2(0,-s.height))],l=[s.convertToWorldSpaceAR(cc.v2(-s.width/2,0)),s.convertToWorldSpaceAR(cc.v2(s.width/2,0))],h=[s.convertToWorldSpaceAR(cc.v2(-s.width/2,-s.height)),s.convertToWorldSpaceAR(cc.v2(s.width/2,-s.height))];if(c[0])if(90==e){if(cc.Intersection.pointLineDistance(i[0],c[0],c[1],!0)<this.minLen||cc.Intersection.pointLineDistance(i[0],l[0],l[1],!0)<this.minLen||cc.Intersection.pointLineDistance(i[0],h[0],h[1],!0)<this.minLen||cc.Intersection.pointLineDistance(i[1],c[0],c[1],!0)<this.minLen||cc.Intersection.pointLineDistance(i[1],l[0],l[1],!0)<this.minLen||cc.Intersection.pointLineDistance(i[1],h[0],h[1],!0)<this.minLen){this.checkTouch(s);break}}else if(cc.Intersection.pointLineDistance(t,c[0],c[1],!0)<this.minLen||cc.Intersection.pointLineDistance(t,l[0],l[1],!0)<this.minLen||cc.Intersection.pointLineDistance(t,h[0],h[1],!0)<this.minLen){this.checkTouch(s);break}}}catch(m){console.log(m)}}}var d=this.mgr.dict.road.parent.convertToWorldSpaceAR(this.mgr.dict.road.position),u=this.node.parent.convertToNodeSpaceAR(d);if(this.node.y>=u.y-2*this.minLen)return console.log("\u68c0\u6d4b\u78b0\u5230\u516c\u8def"),this.isUTransportCar&&(-1!==(n=this.mgr.dict.carRoot.getComponent(r.default).carArr.indexOf(this.node))&&(this.mgr.dict.carRoot.getComponent(r.default).carArr[n]=null,this.mgr.dict.carRoot.getComponent(r.default).reduceUpdate()),this.mgr.dict.carRoot.getComponent(r.default).isTransportCarMove=!0),void(this.isCollision||(this.isCollision=!0,this.mgr.collision(this.node)));if(this.node.x<=-(this.mgr.boundary/2+this.node.width/2))return this.carState=a.CarState.GoingRoad,void this.mgr.changeCar(this.node,2);if(this.node.x>=this.mgr.boundary/2+this.node.width/2)return this.carState=a.CarState.GoingRoad,void this.mgr.changeCar(this.node,2);if(this.node.y<=-620&&this.node.x>0)return this.carState=a.CarState.OnBottomRight,void this.mgr.changeCar(this.node,1,1,"01"+this.lenImgName+"-1");if(this.node.y<=-620&&this.node.x<0)return this.carState=a.CarState.OnBottomLeft,void this.mgr.changeCar(this.node,1,2,"01"+this.lenImgName+"-0");if(this.leftObliqueCar&&this.node.x>=-189.008?(this.carState=a.CarState.GoingRoad,this.mgr.changeCar(this.node,2)):this.rightObliqueCar&&this.node.x<=189.008?(this.carState=a.CarState.GoingRoad,this.mgr.changeCar(this.node,2)):(this.isUTransportCar||this.isUTransportCar_noIn)&&(-90==Math.round(this.node.angle)||-52==Math.round(this.node.angle)||-128==Math.round(this.node.angle))&&this.node.x>=0?(this.carState=a.CarState.GoingRoad,this.node.x=0,this.mgr.changeCar(this.node,2),this.isUTransportCar&&this.mgr.dict.carRoot.getComponent(r.default).reduceUpdate()):(this.isUTransportCar||this.isUTransportCar_noIn)&&(90==Math.round(this.node.angle)||52==Math.round(this.node.angle)||128==Math.round(this.node.angle))&&this.node.x<=0&&(this.carState=a.CarState.GoingRoad,this.node.x=0,this.mgr.changeCar(this.node,2),this.isUTransportCar&&this.mgr.dict.carRoot.getComponent(r.default).reduceUpdate()),this.isTramcar&&this.railCarTurn[this.tramcarPosIndex]){var p=this.railCarTurn[this.tramcarPosIndex].name.split("-"),f=p[0],g=p[1];"0"==f?this.getWPosByNode(this.node).x<=this.getWPosByNode(this.railCarTurn[this.tramcarPosIndex]).x&&this.railCarTurnChange(g):"1"==f?this.getWPosByNode(this.node).x>=this.getWPosByNode(this.railCarTurn[this.tramcarPosIndex]).x&&this.railCarTurnChange(g):"2"==f||"3"==f&&this.getWPosByNode(this.node).y<=this.getWPosByNode(this.railCarTurn[this.tramcarPosIndex]).y&&this.railCarTurnChange(g)}}if(this.carState==a.CarState.OnBottomLeft&&this.node.x<=-(this.mgr.boundary/2+this.node.width/2))return this.carState=a.CarState.GoingRoad,void this.mgr.changeCar(this.node,2);if(this.carState==a.CarState.OnBottomRight&&this.node.x>=this.mgr.boundary/2+this.node.width/2)return this.carState=a.CarState.GoingRoad,void this.mgr.changeCar(this.node,2);this.carState==a.CarState.OutParking&&this.node.x>=cc.winSize.width/2+6*this.node.width&&(this.mgr.checkRes(),this.node.destroy()),this.carState==a.CarState.WaterSprayLeave&&this.node.x<=-(cc.winSize.width/2+this.node.height)&&(console.log("\u9500\u6bc1\u6d88\u9632\u8f66"),this.node.destroy())}},e.prototype.railCarTurnChange=function(t){this.carState=a.CarState.Normal,"up"==t?(this.tramcarPosIndex+=1,this.mgr.changeCar(this.node,2)):"leftUp"==t?(this.tramcarPosIndex+=1,this.mgr.changeCar(this.node,4,2)):"leftDown"==t?(this.tramcarPosIndex+=1,this.mgr.changeCar(this.node,5,2)):"right"==t?(this.tramcarPosIndex+=1,this.mgr.changeCar(this.node,1,1)):"left"==t?(this.tramcarPosIndex+=1,this.mgr.changeCar(this.node,1,2)):"rightUp"==t?(this.tramcarPosIndex+=1,this.mgr.changeCar(this.node,4,1)):"rightDown"==t&&(this.tramcarPosIndex+=1,this.mgr.changeCar(this.node,5,1))},e.prototype.checkTouch=function(t){var e=this;if(i.Audio.getEffectMute()||this.mgr.playRemoteSound("audio/f27312/f27312_Crash"),this.mgr.hit(this.node),this.carState=a.CarState.Idle,this.node.isCarPark&&(this.node.isWen=!0),this.node.stopAllActions(),t.runAction(this.shackAction(.1,2)),this.mgr.moveCarAmount-=1,this.isTramcar){var s=this.node.convertToWorldSpaceAR(cc.v2(0,-30)),c=this.node.parent.convertToNodeSpaceAR(s);cc.tween(this.node).to(.15,{position:c}).call(function(){e.isCanClick=!0}).start()}else cc.tween(this.node).to(.15,{position:this.oldPos}).call(function(){e.isCanClick=!0,e.isTransportCar&&(e.mgr.isTransportCarMove=!0),e.isUTransportCar&&(e.mgr.dict.carRoot.getComponent(r.default).isTransportCarMove=!0),e.float(e.node)}).start();var l=this.nextCar,h=this.prevCar;l&&(this.node.getChildByName("chain")&&0==this.node.getChildByName("chain").getComponent(n.default).linkType||l.getChildByName("chain")&&0==l.getChildByName("chain").getComponent(n.default).linkType)&&(l.stopAllActions(),l.getComponent(o).carState=a.CarState.Idle,this.mgr.moveCarAmount-=1,cc.tween(l).to(.15,{position:l.getComponent(o).oldPos}).call(function(){l.getComponent(o).isCanClick=!0}).start()),h&&(h.getChildByName("chain")&&1==h.getChildByName("chain").getComponent(n.default).linkType||this.node.getChildByName("chain")&&1==this.node.getChildByName("chain").getComponent(n.default).linkType)&&(h.getComponent(o).carState=a.CarState.Idle,h.stopAllActions(),this.mgr.moveCarAmount-=1,cc.tween(h).to(.15,{position:h.getComponent(o).oldPos}).call(function(){h.getComponent(o).isCanClick=!0}).start())},e.prototype.float=function(t){t.getComponent(o).floatPos&&cc.tween(t).to(.6,{position:t.getComponent(o).floatPos}).to(.6,{position:t.getComponent(o).oldPos}).union().repeatForever().start()},e.prototype.carBack=function(t){var e=this;i.Audio.getEffectMute()||this.mgr.playRemoteSound("audio/f27312/f27312_Crash"),this.mgr.hit(this.node),this.carState=a.CarState.Idle,this.node.isCarPark&&(this.node.isWen=!0),this.node.stopAllActions(),t.runAction(this.shackAction(.1,2)),this.mgr.moveCarAmount-=1,cc.tween(this.node).to(.15,{position:this.oldPos}).call(function(){e.isCanClick=!0,e.isTransportCar&&(e.mgr.isTransportCarMove=!0),e.isUTransportCar&&(e.mgr.dict.carRoot.getComponent(r.default).isTransportCarMove=!0)}).start();var s=this.nextCar,c=this.prevCar;s&&(this.node.getChildByName("chain")&&0==this.node.getChildByName("chain").getComponent(n.default).linkType||s.getChildByName("chain")&&0==s.getChildByName("chain").getComponent(n.default).linkType)&&(s.stopAllActions(),s.getComponent(o).carState=a.CarState.Idle,cc.tween(s).to(.15,{position:s.getComponent(o).oldPos}).call(function(){s.getComponent(o).isCanClick=!0}).start()),c&&(c.getChildByName("chain")&&1==c.getChildByName("chain").getComponent(n.default).linkType||this.node.getChildByName("chain")&&1==this.node.getChildByName("chain").getComponent(n.default).linkType)&&(c.getComponent(o).carState=a.CarState.Idle,c.stopAllActions(),cc.tween(c).to(.15,{position:c.getComponent(o).oldPos}).call(function(){c.getComponent(o).isCanClick=!0}).start())},e.prototype.shackAction=function(t,e){var o=cc.moveBy(t,e,e),i=cc.moveBy(t,-e,-e),n=cc.moveBy(.8*t,.8*e,.8*e),r=cc.moveBy(.8*t,.8*-e,.8*-e),a=cc.moveBy(.6*t,.6*e,.6*e),s=cc.moveBy(.6*t,.6*-e,.6*-e),c=cc.moveBy(.4*t,.4*e,.4*e),l=cc.moveBy(.4*t,.4*-e,.4*-e),h=cc.moveBy(.2*t,.2*e,.2*e),d=cc.moveBy(.2*t,.2*-e,.2*-e);return cc.sequence(o,i,n,r,a,s,c,l,h,d)},e.prototype.getWPosByNode=function(t){return t.parent.convertToWorldSpaceAR(t.position)},__decorate([l],e.prototype,"seatTotalAmount",void 0),__decorate([l([cc.Node])],e.prototype,"railCarTurn",void 0),o=__decorate([c],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../scripts/AudioManager":"AudioManager","./Level-249667_chain":"Level-249667_chain","./Level-249667_uTransport":"Level-249667_uTransport","./Level-29086_config":"Level-29086_config"}],"Level-29086_carParkItem":[function(t,e,o){"use strict";cc._RF.push(e,"5ba02okK55O6o76osydvkPZ","Level-29086_carParkItem");var i=t("./Level-29086_boxCarItem"),n=t("./Level-29086_config"),r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e.mgr=null,e.config=[],e.startPos=null,e.endPos=null,e.speed=0,e.carParkCars=[],e.busCom=null,e}return __extends(e,t),e.prototype.onLoad=function(){if(this.target){var t=this.target.convertToWorldSpaceAR(cc.v2(0,-70)),e=this.target.parent.convertToNodeSpaceAR(t);this.startPos=e,this.endPos=this.target.position,this.speed=this.target.getComponent(i.default).speed}this.node.getChildByName("carAmount").getComponent(cc.Label).string=""},e.prototype.init=function(t,e){this.mgr=t,this.config=e,this.busCom=this.mgr.mgr;var o=this.node.name;if(this.target){for(var n=this.busCom.getPath(this.target),r=0;r<this.config.length;r++){var a=this.config[r],s=void 0;switch(o){case"left":s="01"+a+"-0";break;case"right":s="01"+a+"-1";break;case"top":s="02"+a;break;case"bottom":s="03"+a}var c=this.busCom.dict.carPrefab.getChildByName(s),l=cc.instantiate(c);this.busCom.dict.carRoot.addChild(l),l.isCarPark=!0,l.belongToCarPark=this.node,l.name=c.name,l.position=cc.v3(),this.carParkCars.push(l),l.getComponent(i.default).path=n+r,l.path=n+r,l.active=!1}this.node.getChildByName("carAmount").getComponent(cc.Label).string=""+this.config.length}},e.prototype.update=function(){var t=this;if((this.target&&!this.target.active||!this.target)&&this.carParkCars.length>0){this.busCom.carparkIng=!0,this.target=this.carParkCars.shift(),this.node.getChildByName("carAmount").getComponent(cc.Label).string=""+this.carParkCars.length,this.target.active=!0,this.target.position=this.startPos;var e=this.startPos.sub(this.endPos).mag()/this.speed;this.scheduleOnce(function(){t.target.isWen=!0,t.target.getComponent(i.default).carState=n.CarState.Idle,t.busCom.carparkIng=!1,t.busCom.updateCarWeight()},e),cc.tween(this.target).to(e,{position:this.endPos}).call(function(){t.target.isWen=!0,t.busCom.carparkIng=!1}).start()}},__decorate([s(cc.Node)],e.prototype,"target",void 0),__decorate([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./Level-29086_boxCarItem":"Level-29086_boxCarItem","./Level-29086_config":"Level-29086_config"}],"Level-29086_carPark":[function(t,e,o){"use strict";cc._RF.push(e,"ca2bf6FfIlJh6ZcXSVFE9/o","Level-29086_carPark");var i=t("./Level-29086_carParkItem"),n=cc._decorator,r=n.ccclass,a=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mgr=null,e.config=[],e}return __extends(e,t),e.prototype.init=function(t,e){this.mgr=t,this.config=e;for(var o=0;o<this.node.children.length;o++){var n=this.node.children[o],r=this.config[o];n.getComponent(i.default).init(this,r)}},__decorate([r],e)}(cc.Component));o.default=a,cc._RF.pop()},{"./Level-29086_carParkItem":"Level-29086_carParkItem"}],"Level-29086_config":[function(t,e,o){"use strict";var i;cc._RF.push(e,"2aff18RJy5Bp7+dDiPR4mZz","Level-29086_config"),o.BulldozerState=o.LinkType=o.TurntablePosDir=o.CarState=o.DrinkPosArr102_2=o.DrinkPosArr102_1=o.DrinkPosArr101_2=o.DrinkPosArr101_1=o.DrinkPosArr10=o.DrinkPosArr9=o.DrinkPosArr8=o.DrinkPosArr7=o.DrinkPosArr6=o.DrinkPosArr5=o.DrinkPosArr4=o.DrinkPosArr3=o.DrinkPosArr2=o.DrinkPosArr=o.CarLenImg=o.ParkingImg=o.getCarBodyImgByColor=o.getCarImgByColor=o.CarDirImg=o.CarDir=o.colorDes=o.CarColor=o.sortColor=o.MapParam=o.levelData=void 0,o.levelData={"-29086":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[30,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[20,30],[35,45],[50,60],[65,75],[80,90]],moveSpeed:[200,1300,2800],item:[[20,25,3],[50,55,2],[70,75,5]],addSpeed:[20,80,5,1]},"-29087":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1900,3800],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,2]},"-29088":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1400,2800],item:[[20,25,3],[50,55,2],[70,75,5]],addSpeed:[20,80,5,2]},"-29089":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1300,2500],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,3]},"-29090":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1600,3200],item:[[20,25,3],[50,55,2],[70,75,5]],addSpeed:[20,80,5,3]},"-29091":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1600,2800],item:[[20,25,2],[40,45,5],[50,55,3],[80,85,1]],addSpeed:[20,80,5,3]},"-29092":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1500,3e3],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,3]},"-29093":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1400,2800],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,3]},"-29094":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1200,2500],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,3]},"-29095":{carColor:[[0,100,[1,4]]],carWeight:[30,0,0,0,0,0],parkingWeight:0,sortWeight:0,limitRank:4,hardPoints:[],moveSpeed:[250,800,8e3],addSpeed:[0,0,0,0]},"-29290":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[30,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:5,hardPoints:[[25,35],[40,50],[55,65],[70,80]],moveSpeed:[200,1500,3e3],item:[[20,25,2],[50,55,4],[70,75,3]],addSpeed:[20,80,5,1]},"-29291":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1500,3e3],item:[[20,25,3],[50,55,2],[70,75,5]],addSpeed:[20,80,5,1]},"-29292":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1400,2800],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,3]},"-29293":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,600,1200],item:[[20,25,3],[50,55,2],[70,75,5]],addSpeed:[20,80,5,3]},"-29294":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[300,1800,3600],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,2]},"-29295":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1300,2500],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,2]},"-29296":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1500,3e3],item:[[20,25,2],[40,45,5],[50,55,3],[80,85,1]],addSpeed:[20,80,5,2]},"-29297":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1400,2800],item:[[20,25,3],[50,55,2],[70,75,5]],addSpeed:[20,80,5,3]},"-29298":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1500,3e3],item:[[20,25,3],[50,55,2],[70,75,5]],addSpeed:[20,80,5,3]},"-29299":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1700,3400],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,3]},"-29300":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[300,1800,3600],item:[[20,25,3],[50,55,2],[70,75,5]],addSpeed:[20,80,5,3]},"-29301":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1300,2500],item:[[20,25,2],[40,45,5],[50,55,3],[80,85,1]],addSpeed:[20,80,5,3]},"-29302":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1500,3e3],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,3]},"-29303":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1600,3200],item:[[20,25,3],[50,55,2],[70,75,5]],addSpeed:[20,80,5,3]},"-29304":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1200,2500],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,3]},"-29305":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[5,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[30,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[20,35],[30,35],[40,45],[50,55],[60,65],[70,75],[80,85]],moveSpeed:[200,1600,2800],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,1],carpark:[[3,1,1,3,2,3]]},"-29306":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[5,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1500,3e3],item:[[20,25,2],[40,45,5],[50,55,3],[80,85,1]],addSpeed:[20,80,5,2],carpark:[[2,3,1,3,2,3]]},"-29307":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[5,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1400,2800],item:[[20,25,2],[40,45,5],[50,55,3],[80,85,1]],addSpeed:[20,80,5,1],carpark:[[1,3,1,3,3,3],[2,3,2,1,2,3]]},"-29308":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[5,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1600,3200],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,2],carpark:[[2,3,1,3,1,3],[3,1,2,1,2,3]]},"-29309":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[5,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1400,2800],item:[[20,25,3],[50,55,2],[70,75,5]],addSpeed:[20,80,5,2],carpark:[[2,3,1,3,1,3],[1,2,3,3,2,1],[3,1,2,1,2,3]]},"-29310":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[5,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1700,3400],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,2],carpark:[[1,2,3,3,2,1]]},"-29311":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[5,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,900,1800],item:[[20,25,3],[50,55,2],[70,75,5]],addSpeed:[20,80,5,2],carpark:[[2,3,1,3,1,3],[1,2,3,3,2,1],[3,1,2,1,2,3],[2,2,2,3,1,3]]},"-29312":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,6]],[31,40,[1,6]],[41,50,[1,7]],[51,60,[5,8]],[61,70,[1,8]],[71,80,[1,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,900,1800],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,2],transport:[1,2,3,3,2,1,3,2,3,2,1,1,2,3,1]},"-29313":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,6]],[31,40,[1,6]],[41,50,[1,7]],[51,60,[5,8]],[61,70,[1,8]],[71,80,[1,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,600,1200],item:[[20,25,3],[50,55,2],[70,75,5]],addSpeed:[20,80,5,3],transport:[2,3,3,1,2,3,3,2,1,3,2,3,2,1,1,2,3,1]},"-29314":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,6]],[31,40,[1,6]],[41,50,[1,7]],[51,60,[5,8]],[61,70,[1,8]],[71,80,[1,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1200,2500],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,3],transport:[1,2,3,2,3,3,1,2,3,3,2,1,3,2,3,2,1,1,2,3,1]},"-29315":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,6]],[31,40,[1,6]],[41,50,[1,7]],[51,60,[5,8]],[61,70,[1,8]],[71,80,[1,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1600,2800],item:[[20,25,3],[50,55,2],[70,75,5]],addSpeed:[20,80,5,3],transport:[2,1,3,3,3,3,1,2,3,3,2,1,3,2,3,2,1,1,2,3,1]},"-29316":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,6]],[31,40,[1,6]],[41,50,[1,7]],[51,60,[5,8]],[61,70,[1,8]],[71,80,[1,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[300,1800,3600],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,3],transport:[1,1,3,2,3,3,1,2,3,3,2,1,3,2,3,2,1,1,2,3,1]},"-29317":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,6]],[31,40,[1,6]],[41,50,[1,7]],[51,60,[5,8]],[61,70,[1,8]],[71,80,[1,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,600,1200],item:[[20,25,2],[40,45,5],[50,55,3],[80,85,1]],addSpeed:[20,80,5,3],transport:[3,3,3,2,3,3,1,2,3,3,2,1,3,2,3,2,1,1,2,3,1]},"-29318":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,6]],[31,40,[1,6]],[41,50,[1,7]],[51,60,[5,8]],[61,70,[1,8]],[71,80,[1,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1900,3800],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,3],transport:[1,2,3,3,3,3,2,3,3,1,2,3,3,2,1,3,2,3,2,1,1,2,3,1]},"-29319":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,6]],[31,40,[1,6]],[41,50,[1,7]],[51,60,[5,8]],[61,70,[1,8]],[71,80,[1,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,900,1800],item:[[20,25,3],[50,55,2],[70,75,5]],addSpeed:[20,80,5,3],transport:[2,2,1,3,3,3,2,3,3,1,2,3,3,2,1,3,2,3,2,1,1,2,3,1]},"-29454":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1600,2800],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,3]},"-29455":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1500,3e3],item:[[20,25,3],[50,55,2],[70,75,5]],addSpeed:[20,80,5,3]},"-29456":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[300,1800,3600],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,3]},"-29457":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1400,2800],item:[[20,25,2],[40,45,5],[50,55,3],[80,85,1]],addSpeed:[20,80,5,3]},"-29458":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1500,3e3],item:[[20,25,3],[50,55,2],[70,75,5]],addSpeed:[20,80,5,3]},"-29459":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1600,3200],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,3]},"-29460":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1700,3400],item:[[20,25,3],[50,55,2],[70,75,5]],addSpeed:[20,80,5,3]},"-29461":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1600,2800],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,3]},"-29462":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,900,1800],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,3]},"-29463":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[300,1800,3600],item:[[20,25,2],[40,45,5],[50,55,3],[80,85,1]],addSpeed:[20,80,5,3]},"-29464":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[5,8]],[71,80,[1,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1900,3800],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,3],carpark:[[2,3,1,3,1,3,3],[1,2,3,3,2,1,1],[3,1,2,1,2,3,3]]},"-29465":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[5,8]],[71,80,[1,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1400,2800],item:[[20,25,3],[50,55,2],[70,75,5]],addSpeed:[20,80,5,3],carpark:[[2,3,1,3,1,3,3],[3,1,2,1,2,3,3]]},"-29466":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[5,8]],[71,80,[1,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1300,2500],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,3],carpark:[[1,3,1,3,1,3,3],[2,1,2,1,2,3,3]]},"-29467":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[5,8]],[71,80,[1,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1200,2500],item:[[20,25,3],[50,55,2],[70,75,5]],addSpeed:[20,80,5,3],carpark:[[1,3,1,3,1,3,3],[2,3,3,3,1,1,3],[2,1,2,1,2,3,3]]},"-29468":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[5,8]],[71,80,[1,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1500,3e3],item:[[20,25,2],[40,45,5],[50,55,3],[80,85,1]],addSpeed:[20,80,5,3],carpark:[[1,3,1,3,1,3,3],[2,2,3,3,1,1,3],[3,3,1,1,2,1,3],[2,1,2,1,2,3,3]]},"-29469":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,6]],[31,40,[1,6]],[41,50,[1,7]],[51,60,[5,8]],[61,70,[1,8]],[71,80,[1,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1700,3400],item:[[20,25,2],[40,45,5],[50,55,3],[80,85,1]],addSpeed:[20,80,5,4],transport:[2,2,1,3,3,3,2,3,3,1,2,3,3,2,1,3,2,3,2,1,1,2,3,1,2,3,3]},"-29470":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,6]],[31,40,[1,6]],[41,50,[1,7]],[51,60,[5,8]],[61,70,[1,8]],[71,80,[1,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,900,1800],item:[[20,25,3],[50,55,2],[70,75,5]],addSpeed:[20,80,5,4],transport:[1,2,1,3,1,3,2,3,2,1,2,3,3,2,1,3,2,3,2,1,1,2,3,1,2,3,3]},"-29471":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,6]],[31,40,[1,6]],[41,50,[1,7]],[51,60,[5,8]],[61,70,[1,8]],[71,80,[1,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,600,1200],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,4],transport:[3,2,1,3,3,1,2,3,3,1,2,3,3,2,1,3,2,3,2,1,1,2,3,1,2,3,3]},"-29472":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,6]],[31,40,[1,6]],[41,50,[1,7]],[51,60,[5,8]],[61,70,[1,8]],[71,80,[1,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1900,3800],item:[[20,25,2],[40,45,5],[50,55,3],[80,85,1]],addSpeed:[20,80,5,4],transport:[3,3,1,2,3,3,2,3,3,1,2,3,3,2,1,3,2,3,2,1,1,2,3,1,2,3,3]},"-29473":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,6]],[31,40,[1,6]],[41,50,[1,7]],[51,60,[5,8]],[61,70,[1,8]],[71,80,[1,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1400,2800],item:[[20,25,2],[50,55,3],[70,75,1]],addSpeed:[20,80,5,4],transport:[1,2,1,3,3,3,2,3,2,1,2,3,3,2,1,3,2,3,2,1,1,2,3,1,2,3,3]},"-290940":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[5,8]],[81,90,[1,8]],[91,100,[1,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:10,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1500,3e3],item:[[10,10,2],[20,20,2],[30,30,2],[50,50,2],[60,60,2],[40,40,4]],addSpeed:[20,80,5,2],transport:[2,2,1,3,3,3,2,3,3,1,2,3,3,2,1,3,2,3,2,1,1,2,3,1]},"-29629":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1300,2500],item:[[20,25,2],[40,45,5],[50,55,3],[80,85,1]],addSpeed:[20,80,5,2]},"-29630":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1400,2800],item:[[20,25,2],[40,45,5],[50,55,3],[80,85,1]],addSpeed:[20,80,5,2]},"-29631":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1600,3200],item:[[20,25,2],[40,45,5],[50,55,3],[80,85,1]],addSpeed:[20,80,5,3]},"-29632":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1400,2800],item:[[20,25,2],[40,45,5],[50,55,3],[80,85,1]],addSpeed:[20,80,5,3]},"-29633":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1600,3200],item:[[20,25,2],[40,45,5],[50,55,3],[80,85,1]],addSpeed:[20,80,5,3]},"-29634":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[300,1800,3600],item:[[20,25,2],[40,45,5],[50,55,3],[80,85,1]],addSpeed:[20,80,5,3]},"-29635":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1600,3200],item:[[20,25,2],[40,45,5],[50,55,3],[80,85,1]],addSpeed:[20,80,5,3]},"-29636":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,1600,2800],item:[[20,25,2],[40,45,5],[50,55,3],[80,85,1]],addSpeed:[20,80,5,3]},"-29637":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[200,900,1800],item:[[20,25,2],[40,45,5],[50,55,3],[80,85,1]],addSpeed:[20,80,5,3]},"-29638":{carColor:[[0,10,[1,5]],[11,20,[1,5]],[21,30,[1,5]],[31,40,[1,6]],[41,50,[1,6]],[51,60,[1,7]],[61,70,[1,7]],[71,80,[1,7]],[81,90,[1,8]],[91,100,[5,8]]],carWeight:[20,10,10,1,1,1],parkingWeight:0,sortWeight:0,limitRank:8,hardPoints:[[10,15],[20,25],[30,35],[40,45],[50,55],[60,65],[70,75]],moveSpeed:[300,1800,3600],item:[[20,25,2],[40,45,5],[50,55,3],[80,85,1]],addSpeed:[20,80,5,3]}},o.MapParam={0:{warnPoints:[123,146],roleWarn:[89,123],rolePoint:[120,150,166],speedIndexList:[0,51,146],cannonAttackList:[[70,166]],roleOffset:cc.v2(-90,-30),mapOrigin:cc.v2(0,453.031),noTouchAndStop:120},1:{warnPoints:[121,146],roleWarn:[85,123],rolePoint:[120,150,166],speedIndexList:[0,70,146],cannonAttackList:[[70,166]],roleOffset:cc.v2(-90,-30),mapOrigin:cc.v2(0,453.031),noTouchAndStop:999},2:{warnPoints:[70,100],roleWarn:[50,90],rolePoint:[63,100,102],speedIndexList:[0,50,99],cannonAttackList:[[50,102]],roleOffset:cc.v2(-80,-20),mapOrigin:cc.v2(0,462.529),noTouchAndStop:999},3:{warnPoints:[128,153],roleWarn:[125,153],rolePoint:[150,154,156],speedIndexList:[0,104,151],cannonAttackList:[[35,56],[150,156]],roleOffset:cc.v2(-80,0),mapOrigin:cc.v2(0,413.19),noTouchAndStop:999},4:{warnPoints:[110,154],roleWarn:[90,125],rolePoint:[106,154,175],speedIndexList:[0,72,154],cannonAttackList:[[72,175]],roleOffset:cc.v2(90,-20),mapOrigin:cc.v2(0,371.771),noTouchAndStop:999},5:{warnPoints:[90,123],roleWarn:[96,120],rolePoint:[120,124,126],speedIndexList:[0,86,120],cannonAttackList:[[49,55],[120,126]],roleOffset:cc.v2(-80,0),mapOrigin:cc.v2(0,399.888),noTouchAndStop:999},6:{warnPoints:[66,88],roleWarn:[44,86],rolePoint:[55,88,89],speedIndexList:[0,44,87],cannonAttackList:[[2,22],[44,66],[88,89]],roleOffset:cc.v2(60,-20),mapOrigin:cc.v2(0,399.888),noTouchAndStop:999},7:{warnPoints:[66,84],roleWarn:[0],rolePoint:[98,99],speedIndexList:[0,51,84],cannonAttackList:[[51,99]],roleOffset:cc.v2(-70,-55),mapOrigin:cc.v2(0,442.063),noTouchAndStop:999},8:{warnPoints:[100,138],roleWarn:[0],rolePoint:[152,153],speedIndexList:[0,62,138],cannonAttackList:[[65,153]],roleOffset:cc.v2(70,-100),mapOrigin:cc.v2(0,354.588),noTouchAndStop:999},9:{warnPoints:[130,168],roleWarn:[0],rolePoint:[188,189],speedIndexList:[0,80,160],cannonAttackList:[[61,96],[158,189]],roleOffset:cc.v2(80,-25),mapOrigin:cc.v2(-49.862,380),noTouchAndStop:999},10:{warnPoints:[138,240],roleWarn:[0],rolePoint:[287,288],speedIndexList:[0,138,240],cannonAttackList:[[30,50],[138,180],[262,288]],roleOffset:cc.v2(-90,-30),mapOrigin:cc.v2(0,418.633),noTouchAndStop:999},101:{warnPoints:[136,166],roleWarn:[0],rolePoint:[191,192],speedIndexList:[0,110,166],cannonAttackList:[[82,192]],roleOffset:cc.v2(100,-35),mapOrigin:cc.v2(0,440),noTouchAndStop:999},102:{warnPoints:[110,134],roleWarn:[0],rolePoint:[146,147],speedIndexList:[0,96,134],cannonAttackList:[[96,147]],roleOffset:cc.v2(-80,-35),mapOrigin:cc.v2(0,450),noTouchAndStop:999}},o.sortColor=[0,1,2,3,4,5,6,7],(i=o.CarColor||(o.CarColor={}))[i.Red=0]="Red",i[i.Yellow=1]="Yellow",i[i.LightBlue=2]="LightBlue",i[i.Blue=3]="Blue",i[i.Green=4]="Green",i[i.Purple=5]="Purple",i[i.Pink=6]="Pink",i[i.Brown=7]="Brown",o.colorDes=["\u7ea20","\u9ec41","\u6d45\u84dd2","\u84dd3","\u7eff4","\u7d2b5","\u7c896","\u68d57"],o.CarDir=[1,1],o.CarDirImg={52:4,128:5,90:1,0:2,180:3},o.getCarImgByColor=function(t,e){var o,i;return i=Number(t.name[2]),o=t.name.includes("-")?3+3*(i-1):"2"==t.name[1]||"6"==t.name[1]?1+3*(i-1):2+3*(i-1),t.name.includes("05")?6100+200*(i-1)+e+1:t.name.includes("04")?6e3+200*(i-1)+e+1:""+(e+1+100*o)},o.getCarBodyImgByColor=function(t,e){var o,i;return i=Number(t.name[2]),t.name.includes("-")?1==i?o=11:2==i?o=12:3==i&&(o=14):1==i?o=11:2==i?o=13:3==i&&(o=15),""+(e+1+100*o)},o.ParkingImg={4:11,6:13,10:15},o.CarLenImg={4:1,6:2,10:3},o.DrinkPosArr=[[249.319,608.572],[243.738,603.957],[236.879,599.988],[228.621,596.619],[218.846,593.803],[207.432,591.494],[194.26,589.646],[179.209,588.212],[162.161,587.145],[121.59,585.932],[71.588,585.633],[-60.551,586.299],[-144.606,586.521],[-241.933,586.176],[-241.933,586.176],[-247.941,580.266],[-253.229,574.364],[-257.821,568.485],[-261.739,562.642],[-265.007,556.848],[-267.649,551.119],[-269.688,545.467],[-271.149,539.908],[-272.055,534.454],[-272.428,529.119],[-272.294,523.918],[-271.676,518.864],[-270.596,513.971],[-269.08,509.254],[-267.149,504.725],[-264.829,500.4],[-262.143,496.291],[-259.114,492.414],[-255.766,488.781],[-252.122,485.406],[-248.207,482.304],[-244.043,479.488],[-235.065,474.772],[-225.378,471.367],[-220.327,470.192],[-215.17,469.387],[-209.93,468.965],[-204.63,468.941],[-199.295,469.328],[-193.948,470.141],[-193.948,470.141],[87.46,470.84],[142.763,471.266],[145.738,471.13],[270.161,470.141],[270.161,470.141],[276.912,469.878],[283.281,468.933],[289.262,467.351],[294.849,465.179],[300.035,462.46],[304.813,459.239],[309.178,455.563],[313.122,451.475],[316.641,447.021],[319.726,442.246],[322.372,437.194],[324.572,431.912],[326.32,426.444],[327.61,420.834],[328.435,415.129],[328.789,409.373],[328.665,403.611],[328.056,397.888],[326.958,392.249],[325.362,386.74],[323.263,381.405],[320.655,376.289],[317.53,371.437],[313.883,366.895],[309.707,362.708],[304.996,358.92],[299.743,355.577],[293.942,352.723],[287.587,350.404],[280.67,348.664],[273.187,347.549],[265.13,347.104],[265.13,347.104],[-51.517,347.366],[-131.379,346.979],[-145.785,346.405],[-266.06,346.104],[-266.06,346.104],[-273.526,345.767],[-280.542,344.788],[-287.101,343.21],[-293.2,341.077],[-298.832,338.432],[-303.992,335.319],[-308.675,331.78],[-312.875,327.86],[-316.588,323.601],[-319.807,319.047],[-322.528,314.242],[-324.745,309.229],[-326.453,304.051],[-327.646,298.751],[-328.32,293.373],[-328.468,287.961],[-328.086,282.558],[-327.169,277.207],[-325.71,271.951],[-323.705,266.835],[-321.148,261.9],[-318.034,257.192],[-314.358,252.752],[-310.114,248.626],[-305.297,244.855],[-299.901,241.483],[-293.923,238.554],[-287.355,236.112],[-280.192,234.198],[-272.43,232.858],[-264.064,232.134],[-255.086,232.07],[-255.086,232.07],[72.226,231.206],[169.026,231.194],[184.051,231.37],[266.04,231.069],[266.04,231.069],[274.026,230.55],[281.48,229.4],[288.406,227.661],[294.803,225.374],[300.675,222.584],[306.024,219.33],[310.851,215.657],[315.159,211.606],[318.95,207.22],[322.225,202.54],[324.987,197.61],[327.238,192.471],[328.98,187.166],[330.214,181.737],[330.943,176.226],[331.169,170.676],[330.894,165.129],[330.12,159.627],[328.849,154.213],[327.083,148.928],[324.823,143.816],[322.073,138.918],[318.834,134.276],[315.107,129.934],[310.896,125.933],[306.202,122.315],[301.027,119.123],[295.374,116.4],[289.243,114.187],[282.638,112.527],[275.559,111.461],[268.01,111.033],[268.01,111.033],[232.162,109.589],[199.207,108.875],[141.655,108.794],[94.699,109.114],[74.989,108.9],[57.682,108.157],[42.697,106.676]],o.DrinkPosArr2=[[233.747,733.005],[237.283,661.355],[238.214,592.31],[238.214,592.31],[237.305,577.836],[235.554,564.728],[232.957,552.923],[229.51,542.355],[225.21,532.96],[220.054,524.673],[214.038,517.429],[207.157,511.164],[199.41,505.814],[190.791,501.313],[181.298,497.596],[170.928,494.6],[159.676,492.26],[147.538,490.51],[134.513,489.287],[120.595,488.525],[90.069,488.128],[55.932,488.801],[-23.287,491.29],[-68.427,492.071],[-117.291,491.854],[-143.128,491.209],[-169.907,490.12],[-197.632,488.524],[-226.305,486.354],[-226.305,486.354],[-237.62,485.844],[-248.123,484.424],[-257.819,482.155],[-266.715,479.097],[-274.818,475.312],[-282.134,470.859],[-288.671,465.8],[-294.435,460.195],[-299.432,454.104],[-303.67,447.589],[-307.156,440.71],[-309.895,433.528],[-311.895,426.103],[-313.162,418.496],[-313.704,410.768],[-313.526,402.979],[-312.636,395.19],[-311.04,387.462],[-308.745,379.855],[-305.758,372.43],[-302.086,365.248],[-297.734,358.369],[-292.711,351.854],[-287.022,345.764],[-280.674,340.158],[-273.675,335.099],[-266.03,330.646],[-257.747,326.861],[-248.832,323.803],[-239.292,321.534],[-229.134,320.114],[-218.365,319.604],[-218.365,319.604],[4.899,318.953],[114.67,318.976],[225.557,319.604],[225.557,319.604],[236.721,319.084],[247.093,317.635],[256.679,315.319],[265.486,312.198],[273.52,308.334],[280.787,303.789],[287.294,298.624],[293.047,292.902],[298.053,286.684],[302.317,280.034],[305.846,273.011],[308.646,265.679],[310.723,258.099],[312.085,250.333],[312.737,242.444],[312.685,234.492],[311.936,226.541],[310.497,218.651],[308.372,210.885],[305.57,203.306],[302.096,195.973],[297.956,188.951],[293.157,182.3],[287.704,176.082],[281.606,170.36],[274.866,165.196],[267.493,160.65],[259.492,156.786],[250.87,153.665],[241.633,151.349],[231.787,149.9],[221.339,149.38],[221.339,149.38],[-18.303,148.729],[-125.166,148.752],[-239.706,149.38]],o.DrinkPosArr3=[[532.074,703.911],[530.161,677.179],[528.964,650.07],[527.608,594.858],[526.898,566.823],[525.8,538.548],[524.037,510.067],[521.334,481.415],[517.414,452.625],[514.912,438.189],[512.002,423.731],[508.651,409.257],[504.823,394.769],[500.484,380.273],[495.6,365.773],[490.136,351.272],[484.057,336.776],[477.33,322.288],[469.919,307.813],[461.791,293.354],[452.911,278.918],[443.244,264.506],[432.755,250.125],[432.755,250.125],[428.484,242.88],[423.973,235.991],[419.223,229.452],[414.231,223.253],[408.996,217.386],[403.518,211.842],[397.795,206.614],[391.826,201.693],[385.61,197.071],[379.145,192.738],[365.465,184.911],[350.776,178.145],[335.069,172.372],[318.335,167.526],[300.564,163.54],[281.746,160.347],[261.872,157.881],[240.931,156.074],[218.915,154.859],[195.814,154.17],[171.619,153.94],[119.905,154.588],[63.698,156.268],[-62.505,160.585],[-132.654,162.152],[-207.604,162.611],[-246.902,162.258],[-287.43,161.427],[-329.197,160.052],[-372.211,158.065],[-372.211,158.065],[-384.155,160.817],[-395.566,163.89],[-406.452,167.273],[-416.821,170.952],[-426.68,174.918],[-436.038,179.158],[-444.902,183.661],[-453.28,188.415],[-461.181,193.408],[-468.612,198.629],[-475.58,204.066],[-482.095,209.708],[-488.163,215.543],[-493.792,221.559],[-498.991,227.745],[-503.768,234.089],[-508.129,240.579],[-512.084,247.205],[-515.639,253.953],[-518.803,260.814],[-521.584,267.774],[-523.99,274.822],[-527.706,289.138],[-530.015,303.668],[-530.98,318.319],[-530.663,332.998],[-529.129,347.613],[-526.439,362.07],[-522.657,376.276],[-517.846,390.138],[-512.069,403.564],[-505.388,416.46],[-497.868,428.733],[-489.571,440.291],[-480.559,451.041],[-470.897,460.889],[-460.646,469.743],[-449.871,477.509],[-438.634,484.095],[-426.998,489.407],[-415.025,493.354],[-408.933,494.786],[-402.78,495.841],[-396.575,496.508],[-390.326,496.776],[-390.326,496.776],[-377.029,500.535],[-362.599,503.761],[-347.119,506.483],[-330.673,508.731],[-313.342,510.535],[-295.212,511.925],[-276.365,512.93],[-256.884,513.58],[-216.357,513.935],[-174.297,513.229],[-131.371,511.7],[-88.246,509.586],[-4.068,504.56],[72.901,500.056],[107.015,498.597],[137.326,497.984],[163.166,498.455],[174.202,499.172],[183.87,500.25],[183.87,500.25],[195.369,498.818],[205.791,496.583],[215.17,493.601],[223.544,489.926],[230.948,485.616],[237.417,480.725],[242.988,475.308],[247.696,469.422],[251.578,463.122],[254.669,456.464],[257.005,449.503],[258.623,442.294],[259.557,434.894],[259.845,427.357],[259.521,419.74],[258.622,412.098],[257.183,404.487],[255.241,396.961],[252.831,389.577],[249.99,382.391],[246.753,375.457],[243.156,368.832],[239.234,362.57],[235.025,356.728],[230.563,351.361],[225.885,346.525],[221.027,342.275],[216.024,338.667],[210.912,335.756],[205.728,333.598],[200.506,332.248],[195.284,331.763],[195.284,331.763],[-12.658,331.546],[-114.581,331.135],[-251.865,330.026]],o.DrinkPosArr4=[[-487.099,463.773],[-470.82,475.859],[-454.393,487.405],[-437.83,498.419],[-421.14,508.909],[-404.333,518.882],[-387.419,528.347],[-370.408,537.312],[-353.309,545.785],[-336.133,553.773],[-318.889,561.284],[-301.588,568.327],[-284.239,574.91],[-266.852,581.039],[-249.437,586.724],[-232.005,591.973],[-214.564,596.792],[-197.125,601.19],[-179.698,605.176],[-162.292,608.756],[-144.918,611.939],[-110.304,617.147],[-75.935,620.86],[-41.89,623.145],[-8.249,624.063],[24.909,623.679],[57.506,622.056],[89.461,619.257],[120.696,615.346],[151.131,610.387],[180.688,604.443],[209.286,597.577],[236.847,589.853],[263.291,581.335],[288.539,572.087],[312.513,562.17],[335.132,551.65],[356.317,540.59],[375.989,529.053],[394.07,517.102],[410.479,504.802],[425.137,492.215],[437.966,479.406],[437.966,479.406],[445.247,474.356],[451.483,468.759],[456.711,462.67],[460.969,456.147],[464.296,449.246],[466.728,442.023],[468.304,434.535],[469.061,426.839],[469.038,418.991],[468.271,411.048],[466.799,403.065],[464.66,395.101],[461.892,387.21],[458.532,379.45],[454.617,371.877],[450.187,364.549],[445.278,357.52],[439.929,350.848],[434.177,344.589],[428.06,338.8],[421.616,333.538],[414.882,328.858],[407.897,324.817],[400.698,321.473],[393.324,318.881],[385.811,317.098],[378.198,316.18],[370.522,316.185],[362.822,317.167],[355.135,319.185],[347.498,322.295],[339.951,326.552],[339.951,326.552],[324.956,335.974],[309.937,344.901],[294.902,353.342],[279.854,361.305],[264.801,368.796],[249.749,375.825],[234.702,382.398],[219.667,388.524],[204.649,394.21],[189.655,399.464],[174.69,404.294],[159.761,408.709],[144.872,412.715],[130.031,416.32],[100.511,422.361],[71.249,426.894],[42.29,429.981],[13.683,431.685],[-14.527,432.069],[-42.293,431.195],[-69.568,429.126],[-96.305,425.924],[-122.458,421.652],[-147.98,416.372],[-172.825,410.147],[-196.945,403.04],[-220.293,395.113],[-242.824,386.428],[-264.491,377.049],[-285.246,367.038],[-305.043,356.457],[-323.835,345.369],[-341.576,333.836],[-358.219,321.922],[-373.718,309.688],[-388.024,297.197],[-401.093,284.512],[-412.876,271.696],[-423.328,258.81],[-423.328,258.81],[-427.029,252.183],[-430.01,245.419],[-432.296,238.548],[-433.918,231.598],[-434.901,224.6],[-435.274,217.583],[-435.065,210.577],[-434.301,203.61],[-433.009,196.713],[-431.219,189.915],[-428.957,183.245],[-426.251,176.733],[-423.128,170.409],[-419.618,164.301],[-415.746,158.44],[-411.542,152.854],[-407.032,147.574],[-402.244,142.629],[-397.207,138.048],[-391.947,133.86],[-386.493,130.096],[-380.873,126.785],[-375.113,123.956],[-369.242,121.639],[-363.287,119.863],[-357.276,118.658],[-351.238,118.053],[-345.198,118.077],[-339.186,118.761],[-333.229,120.134],[-327.355,122.224],[-321.591,125.063],[-321.591,125.063],[-316.274,125.163],[-311.347,125.836],[-306.739,127.05],[-302.377,128.77],[-298.191,130.964],[-294.108,133.597],[-285.964,140.048],[-267.753,156.751],[-256.537,166.468],[-243.148,176.738],[-235.459,181.996],[-227.011,187.292],[-217.732,192.593],[-207.551,197.864],[-196.396,203.073],[-184.194,208.185],[-170.875,213.168],[-156.365,217.987],[-140.594,222.61],[-123.49,227.003],[-104.98,231.132],[-84.993,234.964],[-63.456,238.465],[-40.3,241.603],[-15.45,244.342],[11.164,246.651]],o.DrinkPosArr5=[[-.745,653.104],[99.015,653.732],[190.819,653.756],[356.328,653.104],[356.328,653.104],[365.293,652.827],[373.95,652.08],[382.303,650.887],[390.354,649.271],[398.105,647.253],[405.558,644.857],[412.718,642.106],[419.584,639.022],[426.161,635.629],[432.451,631.949],[444.18,623.819],[454.789,614.815],[464.3,605.12],[472.732,594.916],[480.105,584.386],[486.439,573.712],[491.754,563.076],[496.07,552.661],[499.408,542.65],[501.787,533.225],[503.227,524.568],[503.227,524.568],[503.723,390.386],[504.219,290.076],[504.219,290.076],[504.272,298.815],[503.152,290.595],[501.555,281.561],[498.945,270.011],[495.085,256.518],[489.733,241.657],[482.652,226.002],[478.388,218.057],[473.601,210.128],[468.262,202.288],[462.34,194.608],[455.807,187.161],[448.631,180.018],[440.783,173.25],[432.234,166.931],[422.952,161.13],[412.908,155.921],[402.073,151.375],[390.415,147.564],[377.906,144.559],[364.516,142.432],[364.516,142.432],[-369.234,140.695],[-369.234,140.695],[-386.836,148.34],[-403.174,156.656],[-418.261,165.596],[-432.113,175.113],[-444.743,185.158],[-456.165,195.685],[-466.394,206.647],[-475.442,217.995],[-483.325,229.682],[-490.056,241.661],[-495.65,253.883],[-500.12,266.303],[-503.481,278.872],[-505.746,291.542],[-506.929,304.267],[-507.045,316.999],[-506.108,329.69],[-504.131,342.292],[-501.129,354.759],[-497.116,367.043],[-492.106,379.096],[-486.112,390.871],[-479.15,402.321],[-471.232,413.397],[-462.373,424.053],[-452.587,434.241],[-441.888,443.913],[-430.29,453.023],[-417.807,461.521],[-404.454,469.362],[-390.243,476.498],[-375.19,482.88],[-375.19,482.88],[3.316,482.88],[268.484,482.88],[268.484,482.88],[278.83,482.365],[288.379,480.931],[297.145,478.638],[305.139,475.549],[312.375,471.724],[318.864,467.225],[324.618,462.113],[329.651,456.449],[333.974,450.295],[337.6,443.712],[340.541,436.762],[342.81,429.504],[344.419,422.002],[345.379,414.316],[345.705,406.507],[345.408,398.637],[344.499,390.767],[342.993,382.958],[340.901,375.271],[338.235,367.769],[335.008,360.512],[331.231,353.561],[326.919,346.978],[322.082,340.824],[316.734,335.16],[310.886,330.048],[304.551,325.549],[297.741,321.725],[290.469,318.635],[282.747,316.343],[274.588,314.908],[266.003,314.393],[266.003,314.393],[188.428,313.311],[81.076,313.09],[-43.862,313.521],[-174.198,314.393]],o.DrinkPosArr6=[[-386.354,656.578],[-350.835,545.551],[-312.688,428.382],[-232.508,185.857],[-232.508,185.857],[-229.715,180.609],[-226.579,176.076],[-223.146,172.255],[-219.461,169.142],[-215.572,166.735],[-211.523,165.029],[-207.362,164.022],[-203.134,163.71],[-198.886,164.091],[-194.664,165.16],[-190.514,166.915],[-186.482,169.352],[-182.614,172.468],[-178.957,176.259],[-175.556,180.723],[-172.458,185.857],[-172.458,185.857],[-134.183,374.97],[-111.533,481.275],[-82.88,609.68],[-82.88,609.68],[-80.336,615.443],[-77.311,620.492],[-73.877,624.817],[-70.105,628.41],[-66.067,631.264],[-61.834,633.369],[-57.479,634.717],[-53.073,635.3],[-48.686,635.11],[-44.392,634.137],[-40.261,632.375],[-36.366,629.814],[-32.777,626.446],[-29.567,622.263],[-26.806,617.256],[-24.568,611.417],[-24.568,611.417],[1.859,506.605],[27.169,402.979],[52.479,299.354],[78.906,194.542],[78.906,194.542],[80.781,188.95],[83.112,184.049],[85.841,179.848],[88.913,176.361],[92.272,173.6],[95.861,171.577],[99.623,170.302],[103.503,169.79],[107.444,170.051],[111.39,171.097],[115.284,172.941],[119.07,175.594],[122.692,179.069],[126.093,183.377],[129.217,188.531],[132.008,194.542],[132.008,194.542],[155.178,283.131],[174.626,362.16],[197.33,459.427],[230.271,602.732],[230.271,602.732],[233.292,609.048],[236.481,614.463],[239.82,618.987],[243.29,622.629],[246.874,625.399],[250.553,627.306],[254.309,628.36],[258.124,628.569],[261.98,627.944],[265.858,626.494],[269.741,624.228],[273.61,621.156],[277.447,617.287],[281.233,612.631],[284.952,607.197],[288.583,600.995],[288.583,600.995],[308.795,499.657],[330.984,392.992],[385.109,140.695]],o.DrinkPosArr7=[[278.909,698.266],[278.951,665.291],[278.412,650.678],[277.408,637.251],[275.87,624.96],[273.73,613.759],[270.918,603.598],[267.366,594.431],[263.006,586.208],[257.768,578.881],[251.584,572.403],[244.385,566.726],[236.102,561.8],[226.667,557.579],[216.01,554.014],[204.063,551.057],[190.758,548.659],[176.026,546.773],[159.797,545.351],[142.003,544.344],[101.445,543.384],[53.803,543.508],[-64.935,545.469],[-137.131,546.537],[-218.612,547.148],[-218.612,547.148],[-229.302,546.529],[-239.229,544.79],[-248.399,542.006],[-256.82,538.253],[-264.497,533.606],[-271.438,528.138],[-277.647,521.927],[-283.132,515.045],[-287.9,507.569],[-291.955,499.574],[-295.306,491.133],[-297.958,482.323],[-299.918,473.218],[-301.192,463.893],[-301.787,454.423],[-301.708,444.884],[-300.963,435.349],[-299.557,425.895],[-297.498,416.596],[-294.792,407.526],[-291.444,398.762],[-287.462,390.377],[-282.851,382.448],[-277.619,375.048],[-271.772,368.253],[-265.315,362.138],[-258.256,356.778],[-250.601,352.247],[-242.356,348.621],[-233.527,345.975],[-224.122,344.384],[-214.146,343.922],[-214.146,343.922],[-113.626,344.306],[-8.686,343.922],[102.767,343.538],[222.828,343.922],[222.828,343.922],[232.739,343.317],[241.956,341.621],[250.481,338.906],[258.316,335.244],[265.463,330.708],[271.925,325.37],[277.703,319.303],[282.8,312.579],[287.219,305.27],[290.96,297.45],[294.027,289.189],[296.421,280.562],[298.145,271.64],[299.201,262.495],[299.591,253.2],[299.317,243.828],[298.382,234.451],[296.787,225.142],[294.535,215.971],[291.629,207.014],[288.069,198.34],[283.859,190.024],[279,182.137],[273.495,174.753],[267.346,167.942],[260.555,161.778],[253.124,156.333],[245.056,151.68],[236.352,147.891],[227.015,145.039],[217.047,143.195],[206.451,142.432],[206.451,142.432],[165.325,141.323],[115.104,140.912],[-27.049,140.695]],o.DrinkPosArr8=[[-448.885,414.27],[-438.593,423.254],[-427.997,431.963],[-417.106,440.396],[-405.933,448.555],[-382.777,464.048],[-358.611,478.445],[-333.518,491.748],[-307.58,503.957],[-280.881,515.077],[-253.503,525.108],[-225.529,534.052],[-197.041,541.912],[-168.122,548.69],[-138.854,554.388],[-109.321,559.008],[-79.604,562.551],[-49.787,565.021],[-19.953,566.418],[9.817,566.746],[39.44,566.005],[68.832,564.199],[97.911,561.329],[126.594,557.398],[154.8,552.407],[182.445,546.358],[209.446,539.254],[235.721,531.096],[261.187,521.887],[285.762,511.628],[309.362,500.322],[331.906,487.971],[342.756,481.404],[353.311,474.577],[363.56,467.489],[373.493,460.141],[383.1,452.534],[392.37,444.667],[392.37,444.667],[400.176,438.876],[406.849,432.68],[412.431,426.133],[416.962,419.285],[420.486,412.19],[423.044,404.9],[424.676,397.467],[425.426,389.942],[425.335,382.379],[424.444,374.829],[422.796,367.345],[420.431,359.979],[417.392,352.784],[413.72,345.81],[409.458,339.112],[404.645,332.74],[399.326,326.747],[393.54,321.186],[387.33,316.108],[380.738,311.567],[373.805,307.613],[366.573,304.299],[359.083,301.678],[351.378,299.801],[343.498,298.722],[335.487,298.492],[327.384,299.163],[319.233,300.788],[311.074,303.418],[302.95,307.107],[294.903,311.906],[286.973,317.867],[286.973,317.867],[271.59,327.56],[255.589,336.822],[239.001,345.623],[221.86,353.932],[204.197,361.718],[186.044,368.951],[167.435,375.601],[148.4,381.637],[128.973,387.029],[109.185,391.746],[89.068,395.758],[68.656,399.034],[47.98,401.544],[27.073,403.258],[5.966,404.144],[-15.308,404.173],[-36.717,403.314],[-58.229,401.537],[-79.811,398.81],[-101.431,395.104],[-123.057,390.389],[-144.656,384.633],[-166.197,377.806],[-187.648,369.878],[-208.975,360.818],[-230.147,350.596],[-251.131,339.181],[-271.896,326.544],[-292.408,312.652],[-312.637,297.477],[-332.549,280.987],[-352.112,263.152],[-352.112,263.152],[-359.903,256.331],[-366.611,249.312],[-372.278,242.132],[-376.943,234.827],[-380.646,227.433],[-383.428,219.984],[-385.33,212.518],[-386.391,205.069],[-386.653,197.674],[-386.154,190.368],[-384.937,183.187],[-383.041,176.168],[-380.506,169.344],[-377.373,162.753],[-373.682,156.43],[-369.474,150.412],[-364.789,144.732],[-359.667,139.429],[-354.149,134.536],[-348.274,130.09],[-342.084,126.128],[-335.619,122.683],[-328.919,119.793],[-322.024,117.493],[-314.975,115.819],[-307.813,114.807],[-300.576,114.492],[-293.307,114.91],[-286.045,116.096],[-278.83,118.088],[-271.703,120.92],[-264.705,124.628],[-264.705,124.628],[-243.807,141.087],[-224.156,156.092],[-205.589,169.659],[-187.94,181.803],[-171.045,192.541],[-154.74,201.887],[-138.861,209.859],[-123.242,216.471],[-107.721,221.74],[-92.131,225.681],[-76.31,228.31],[-60.092,229.644],[-43.313,229.697],[-25.809,228.486],[-7.415,226.026],[12.033,222.333]],o.DrinkPosArr9=[[356.204,536.727],[350.411,541.094],[343.955,545.433],[329.142,553.989],[311.941,562.321],[292.527,570.36],[271.073,578.034],[247.754,585.27],[222.744,591.999],[196.218,598.149],[168.35,603.648],[139.315,608.425],[109.287,612.408],[78.441,615.527],[46.95,617.71],[14.989,618.886],[-17.267,618.983],[-49.644,617.93],[-81.968,615.656],[-114.063,612.089],[-145.757,607.158],[-161.398,604.159],[-176.874,600.792],[-192.161,597.049],[-207.24,592.919],[-222.086,588.396],[-236.68,583.469],[-250.998,578.129],[-265.02,572.369],[-278.724,566.178],[-292.087,559.548],[-305.087,552.47],[-317.704,544.935],[-329.915,536.934],[-341.699,528.459],[-353.033,519.5],[-363.895,510.048],[-374.265,500.095],[-384.121,489.631],[-393.439,478.648],[-402.199,467.137],[-410.379,455.089],[-417.957,442.495],[-424.912,429.345],[-431.22,415.632],[-436.862,401.346],[-441.814,386.478],[-441.814,386.478],[-443.369,369.643],[-443.955,353.408],[-443.555,337.774],[-442.155,322.744],[-439.738,308.32],[-436.291,294.504],[-431.798,281.299],[-426.243,268.706],[-419.612,256.729],[-411.888,245.37],[-403.058,234.63],[-393.105,224.512],[-382.015,215.019],[-369.772,206.152],[-356.361,197.914],[-341.767,190.308],[-325.975,183.335],[-308.968,176.998],[-290.733,171.299],[-271.254,166.24],[-250.516,161.825],[-228.503,158.054],[-205.2,154.931],[-180.593,152.457],[-154.665,150.635],[-127.402,149.467],[-98.788,148.956],[-68.808,149.104],[-37.447,149.912],[-4.69,151.385],[29.478,153.522],[65.074,156.328],[65.074,156.328],[85.929,160.815],[105.89,166.168],[124.92,172.339],[142.982,179.276],[160.041,186.93],[176.06,195.249],[191.005,204.185],[204.838,213.686],[217.524,223.703],[229.028,234.184],[239.311,245.081],[248.34,256.342],[256.078,267.917],[262.489,279.756],[267.536,291.809],[271.185,304.026],[273.398,316.355],[274.14,328.748],[273.949,334.952],[273.376,341.153],[272.417,347.345],[271.068,353.521],[269.325,359.675],[267.182,365.801],[264.635,371.893],[261.68,377.943],[258.312,383.947],[254.528,389.897],[250.321,395.787],[245.688,401.612],[235.126,413.038],[222.804,424.124],[208.688,434.822],[192.741,445.08],[174.927,454.848],[155.21,464.075],[133.555,472.713],[109.924,480.709],[109.924,480.709],[92.305,484.441],[74.8,487.645],[57.435,490.323],[40.233,492.474],[23.219,494.1],[6.419,495.201],[-10.143,495.778],[-26.443,495.83],[-42.455,495.359],[-58.156,494.365],[-73.52,492.849],[-88.523,490.811],[-103.139,488.252],[-117.345,485.172],[-131.116,481.572],[-144.427,477.452],[-157.253,472.813],[-169.569,467.656],[-181.352,461.981],[-192.576,455.788],[-203.216,449.079],[-213.248,441.853],[-222.647,434.111],[-231.389,425.855],[-239.449,417.083],[-246.802,407.797],[-253.423,397.998],[-259.288,387.686],[-264.372,376.861],[-268.651,365.524],[-272.099,353.676],[-274.693,341.316],[-274.693,341.316],[-274.929,328.015],[-274.037,314.975],[-272.063,302.207],[-269.049,289.721],[-265.04,277.528],[-260.079,265.639],[-254.211,254.065],[-247.479,242.815],[-239.927,231.9],[-231.6,221.331],[-222.541,211.119],[-212.794,201.273],[-202.403,191.805],[-191.412,182.726],[-179.866,174.045],[-167.807,165.773],[-155.28,157.921],[-142.328,150.5],[-128.997,143.519],[-115.329,136.99],[-101.368,130.923],[-87.159,125.329],[-72.746,120.218],[-58.172,115.6],[-43.481,111.487],[-28.717,107.889],[-13.925,104.817],[.852,102.28],[15.57,100.29],[30.185,98.857],[44.654,97.992],[58.931,97.705],[58.931,97.705],[119.107,97.438],[167.011,98.031],[204.982,98.787],[235.358,99.008]],o.DrinkPosArr10=[[-66.75,451.18],[-59.985,453.777],[-53.07,455.709],[-46.042,456.999],[-38.939,457.67],[-31.801,457.746],[-24.664,457.249],[-17.568,456.203],[-10.55,454.631],[-3.649,452.556],[3.097,450],[9.65,446.988],[15.972,443.543],[22.024,439.686],[27.769,435.443],[33.168,430.835],[38.182,425.886],[42.774,420.618],[46.906,415.056],[50.538,409.222],[53.634,403.14],[56.154,396.831],[58.061,390.321],[59.317,383.631],[59.882,376.785],[59.72,369.806],[58.791,362.717],[57.058,355.541],[54.482,348.302],[51.025,341.022],[46.649,333.724],[41.316,326.433],[34.987,319.17],[34.987,319.17],[20.306,310.288],[5.909,302.806],[-8.19,296.664],[-21.977,291.804],[-35.438,288.165],[-48.56,285.689],[-61.329,284.316],[-73.731,283.986],[-85.753,284.641],[-97.379,286.22],[-108.597,288.665],[-119.394,291.915],[-129.754,295.912],[-139.665,300.596],[-149.112,305.908],[-158.082,311.788],[-166.56,318.177],[-174.534,325.015],[-181.989,332.244],[-188.912,339.803],[-195.289,347.633],[-201.105,355.675],[-206.348,363.87],[-211.003,372.158],[-215.057,380.479],[-218.496,388.774],[-221.305,396.985],[-223.472,405.05],[-224.982,412.912],[-225.822,420.51],[-225.978,427.786],[-225.436,434.679],[-225.436,434.679],[-225.309,445.729],[-224.612,456.48],[-223.363,466.93],[-221.579,477.075],[-219.279,486.914],[-216.478,496.444],[-213.195,505.662],[-209.447,514.565],[-205.251,523.151],[-200.625,531.416],[-195.585,539.359],[-190.15,546.977],[-184.336,554.267],[-178.162,561.227],[-171.643,567.853],[-164.799,574.143],[-157.646,580.095],[-150.201,585.706],[-142.482,590.972],[-134.506,595.893],[-126.29,600.464],[-117.852,604.683],[-109.21,608.548],[-100.38,612.055],[-91.381,615.203],[-82.228,617.988],[-72.94,620.409],[-63.534,622.461],[-54.028,624.143],[-44.438,625.453],[-34.783,626.386],[-25.079,626.941],[-15.344,627.115],[-5.595,626.905],[4.151,626.309],[13.875,625.324],[23.562,623.948],[33.192,622.177],[42.75,620.009],[52.217,617.441],[61.577,614.471],[70.811,611.097],[79.904,607.314],[88.836,603.122],[97.591,598.516],[106.152,593.495],[114.501,588.056],[122.62,582.196],[130.493,575.913],[138.103,569.203],[145.43,562.065],[152.46,554.495],[159.173,546.491],[165.552,538.05],[171.581,529.169],[177.242,519.847],[182.518,510.08],[187.391,499.865],[191.843,489.201],[195.858,478.083],[199.418,466.511],[202.506,454.48],[205.104,441.989],[207.195,429.034],[207.195,429.034],[206.86,411.149],[205.705,394.032],[203.748,377.671],[201.008,362.054],[197.504,347.17],[193.254,333.006],[188.277,319.55],[182.592,306.791],[176.216,294.716],[169.17,283.314],[161.471,272.573],[153.138,262.48],[144.19,253.025],[134.645,244.194],[124.522,235.976],[113.84,228.358],[102.618,221.33],[90.873,214.879],[78.625,208.994],[65.892,203.661],[52.693,198.87],[39.046,194.608],[24.971,190.863],[10.485,187.624],[-4.392,184.878],[-19.642,182.614],[-35.247,180.82],[-51.187,179.483],[-67.444,178.592],[-83.999,178.135],[-100.834,178.1],[-117.93,178.475],[-117.93,178.475],[-134.2,178.417],[-149.72,179.499],[-164.505,181.664],[-178.571,184.857],[-191.935,189.022],[-204.612,194.103],[-216.619,200.045],[-227.972,206.793],[-238.686,214.289],[-248.778,222.48],[-258.263,231.308],[-267.159,240.719],[-275.48,250.657],[-283.242,261.065],[-290.463,271.889],[-297.157,283.073],[-303.342,294.561],[-309.032,306.297],[-314.244,318.226],[-318.994,330.293],[-323.297,342.44],[-327.171,354.613],[-333.693,378.814],[-338.687,402.449],[-342.282,425.074],[-344.605,446.243],[-345.785,465.51],[-345.785,465.51],[-344.712,477.163],[-342.257,492.902],[-338.097,512.024],[-331.911,533.826],[-327.958,545.513],[-323.377,557.606],[-318.13,570.018],[-312.175,582.661],[-305.473,595.446],[-297.983,608.286],[-289.664,621.094],[-280.478,633.78],[-270.383,646.258],[-259.34,658.44],[-247.308,670.237],[-234.247,681.562],[-220.117,692.326],[-204.878,702.443],[-188.489,711.824],[-170.911,720.381],[-152.103,728.027],[-132.024,734.673],[-110.636,740.231],[-87.897,744.615],[-63.767,747.735],[-38.207,749.504],[-24.877,749.855],[-11.175,749.834],[2.905,749.433],[17.367,748.638],[17.367,748.638],[26.855,748.576],[37.037,748.117],[47.848,747.232],[59.223,745.893],[71.097,744.074],[83.406,741.746],[96.084,738.881],[109.066,735.452],[122.289,731.43],[135.685,726.789],[149.192,721.5],[162.743,715.536],[176.274,708.869],[189.719,701.47],[203.015,693.313],[216.096,684.37],[228.897,674.612],[241.353,664.012],[253.4,652.543],[264.971,640.176],[276.003,626.884],[286.431,612.639],[296.189,597.413],[305.213,581.179],[313.438,563.908],[320.798,545.573],[327.229,526.146],[332.666,505.6],[337.044,483.906],[340.298,461.038],[342.363,436.966],[343.174,411.664],[343.174,411.664],[343.077,393.003],[342.447,374.869],[341.263,357.266],[339.505,340.196],[337.153,323.661],[334.187,307.663],[330.587,292.205],[326.333,277.289],[321.404,262.918],[315.78,249.094],[309.442,235.82],[302.368,223.097],[294.54,210.928],[285.936,199.315],[276.536,188.261],[266.321,177.769],[255.27,167.84],[243.363,158.477],[230.579,149.683],[216.9,141.459],[202.304,133.808],[186.771,126.733],[170.281,120.235],[152.815,114.318],[134.351,108.983],[114.871,104.233],[94.352,100.071],[72.776,96.498],[50.122,93.518],[26.371,91.131],[1.501,89.342],[-24.507,88.152]],o.DrinkPosArr101_1=[[-362.036,760.797],[-359.019,761.429],[-355.208,761.778],[-345.398,761.686],[-332.984,760.641],[-318.348,758.765],[-283.925,753.007],[-245.163,745.381],[-166.766,728.415],[-107.445,715.635],[-107.445,715.635],[-100.379,712.527],[-93.832,708.84],[-87.803,704.617],[-82.288,699.904],[-77.283,694.746],[-72.787,689.187],[-68.795,683.272],[-65.304,677.046],[-62.312,670.553],[-59.815,663.839],[-57.81,656.948],[-56.294,649.924],[-55.264,642.814],[-54.717,635.66],[-54.649,628.509],[-55.057,621.404],[-55.939,614.391],[-57.29,607.515],[-59.109,600.819],[-61.392,594.35],[-64.135,588.151],[-67.336,582.267],[-70.992,576.744],[-75.098,571.625],[-79.653,566.956],[-84.653,562.782],[-90.095,559.146],[-95.975,556.095],[-102.292,553.672],[-109.04,551.922],[-116.219,550.891],[-123.823,550.622],[-123.823,550.622],[-137.876,552.685],[-153.733,555.521],[-189.375,562.107],[-208.417,565.152],[-227.779,567.564],[-247.089,568.99],[-256.609,569.223],[-265.976,569.078],[-275.145,568.51],[-284.07,567.477],[-292.703,565.932],[-300.998,563.834],[-308.91,561.137],[-316.391,557.798],[-323.395,553.773],[-329.876,549.017],[-335.788,543.488],[-341.083,537.14],[-345.716,529.929],[-349.641,521.813],[-352.81,512.747],[-355.178,502.686],[-356.697,491.587],[-357.323,479.406],[-357.323,479.406],[-356.42,463.439],[-354.404,449.406],[-351.338,437.2],[-347.286,426.713],[-344.91,422.081],[-342.311,417.838],[-339.497,413.972],[-336.477,410.467],[-333.257,407.312],[-329.846,404.493],[-322.483,399.808],[-314.45,396.303],[-305.81,393.873],[-296.628,392.409],[-286.967,391.803],[-276.889,391.948],[-266.458,392.737],[-255.738,394.062],[-244.792,395.814],[-222.474,400.174],[-200.011,404.955],[-177.911,409.297],[-167.155,411.034],[-156.679,412.339],[-146.547,413.103],[-136.822,413.22],[-127.568,412.582],[-118.848,411.081],[-110.725,408.609],[-103.263,405.059],[-96.524,400.323],[-93.446,397.477],[-90.573,394.294],[-90.573,394.294],[-86.072,391.626],[-82.012,388.285],[-78.395,384.328],[-75.22,379.808],[-72.487,374.781],[-70.196,369.3],[-68.348,363.421],[-66.942,357.197],[-65.978,350.685],[-65.456,343.937],[-65.378,337.01],[-65.741,329.957],[-66.547,322.833],[-67.796,315.693],[-69.487,308.592],[-71.621,301.583],[-74.198,294.722],[-77.218,288.063],[-80.68,281.661],[-84.585,275.57],[-88.933,269.845],[-93.725,264.541],[-98.959,259.712],[-104.636,255.414],[-110.756,251.699],[-117.319,248.624],[-124.326,246.242],[-131.776,244.609],[-139.669,243.778],[-148.005,243.806],[-156.785,244.745],[-166.008,246.651],[-166.008,246.651],[-198.869,253.389],[-214.864,256.25],[-230.42,258.515],[-245.424,259.989],[-259.766,260.478],[-273.333,259.788],[-279.792,258.94],[-286.015,257.724],[-291.988,256.117],[-297.699,254.093],[-303.132,251.63],[-308.274,248.701],[-313.111,245.284],[-317.629,241.353],[-321.814,236.885],[-325.651,231.856],[-329.128,226.24],[-332.23,220.014],[-334.943,213.154],[-337.253,205.635],[-339.147,197.433],[-340.61,188.524],[-341.628,178.883],[-342.188,168.487],[-342.188,168.487],[-341.89,162.335],[-341.171,156.449],[-340.044,150.824],[-338.524,145.454],[-336.625,140.334],[-334.362,135.459],[-331.75,130.824],[-328.802,126.423],[-325.534,122.251],[-321.959,118.302],[-313.948,111.055],[-304.887,104.639],[-294.89,99.012],[-284.073,94.13],[-272.552,89.953],[-260.444,86.437],[-247.863,83.54],[-234.926,81.22],[-221.748,79.434],[-208.445,78.14],[-195.134,77.296],[-168.947,76.785],[-144.114,77.565],[-121.562,79.294],[-102.217,81.634],[-87.006,84.246],[-76.854,86.791],[-73.965,87.933],[-72.689,88.93],[-72.692,89.361],[-73.141,89.741],[-75.438,90.323]],o.DrinkPosArr101_2=[[362.036,760.797],[359.019,761.429],[355.208,761.778],[345.398,761.686],[332.984,760.641],[318.348,758.765],[283.925,753.007],[245.163,745.381],[166.766,728.415],[107.445,715.635],[107.445,715.635],[100.379,712.527],[93.832,708.84],[87.803,704.617],[82.288,699.904],[77.283,694.746],[72.787,689.187],[68.795,683.272],[65.304,677.046],[62.312,670.553],[59.815,663.839],[57.81,656.948],[56.294,649.924],[55.264,642.814],[54.717,635.66],[54.649,628.509],[55.057,621.404],[55.939,614.391],[57.29,607.515],[59.109,600.819],[61.392,594.35],[64.135,588.151],[67.336,582.267],[70.992,576.744],[75.098,571.625],[79.653,566.956],[84.653,562.782],[90.095,559.146],[95.975,556.095],[102.292,553.672],[109.04,551.922],[116.219,550.891],[123.823,550.622],[123.823,550.622],[137.876,552.685],[153.733,555.521],[189.375,562.107],[208.417,565.152],[227.779,567.564],[247.089,568.99],[256.609,569.223],[265.976,569.078],[275.145,568.51],[284.07,567.477],[292.703,565.932],[300.998,563.834],[308.91,561.137],[316.391,557.798],[323.395,553.773],[329.876,549.017],[335.788,543.488],[341.083,537.14],[345.716,529.929],[349.641,521.813],[352.81,512.747],[355.178,502.686],[356.697,491.587],[357.323,479.406],[357.323,479.406],[356.42,463.439],[354.404,449.406],[351.338,437.2],[347.286,426.713],[344.91,422.081],[342.311,417.838],[339.497,413.972],[336.477,410.467],[333.257,407.312],[329.846,404.493],[322.483,399.808],[314.45,396.303],[305.81,393.873],[296.628,392.409],[286.967,391.803],[276.889,391.948],[266.458,392.737],[255.738,394.062],[244.792,395.814],[222.474,400.174],[200.011,404.955],[177.911,409.297],[167.155,411.034],[156.679,412.339],[146.547,413.103],[136.822,413.22],[127.568,412.582],[118.848,411.081],[110.725,408.609],[103.263,405.059],[96.524,400.323],[93.446,397.477],[90.573,394.294],[90.573,394.294],[86.072,391.626],[82.012,388.285],[78.395,384.328],[75.22,379.808],[72.487,374.781],[70.196,369.3],[68.348,363.421],[66.942,357.197],[65.978,350.685],[65.456,343.937],[65.378,337.01],[65.741,329.957],[66.547,322.833],[67.796,315.693],[69.487,308.592],[71.621,301.583],[74.198,294.722],[77.218,288.063],[80.68,281.661],[84.585,275.57],[88.933,269.845],[93.725,264.541],[98.959,259.712],[104.636,255.414],[110.756,251.699],[117.319,248.624],[124.326,246.242],[131.776,244.609],[139.669,243.778],[148.005,243.806],[156.785,244.745],[166.008,246.651],[166.008,246.651],[198.869,253.389],[214.864,256.25],[230.42,258.515],[245.424,259.989],[259.766,260.478],[273.333,259.788],[279.792,258.94],[286.015,257.724],[291.988,256.117],[297.699,254.093],[303.132,251.63],[308.274,248.701],[313.111,245.284],[317.629,241.353],[321.814,236.885],[325.651,231.856],[329.128,226.24],[332.23,220.014],[334.943,213.154],[337.253,205.635],[339.147,197.433],[340.61,188.524],[341.628,178.883],[342.188,168.487],[342.188,168.487],[341.89,162.335],[341.171,156.449],[340.044,150.824],[338.524,145.454],[336.625,140.334],[334.362,135.459],[331.75,130.824],[328.802,126.423],[325.534,122.251],[321.959,118.302],[313.948,111.055],[304.887,104.639],[294.89,99.012],[284.073,94.13],[272.552,89.953],[260.444,86.437],[247.863,83.54],[234.926,81.22],[221.748,79.434],[208.445,78.14],[195.134,77.296],[168.947,76.785],[144.114,77.565],[121.562,79.294],[102.217,81.634],[87.006,84.246],[76.854,86.791],[73.965,87.933],[72.689,88.93],[72.692,89.361],[73.141,89.741],[75.438,90.323]],o.DrinkPosArr102_1=[[-367.247,781.641],[-359.104,784.405],[-347.847,786.896],[-333.699,789.096],[-316.88,790.99],[-297.611,792.563],[-276.115,793.797],[-252.61,794.677],[-227.32,795.187],[-200.464,795.312],[-172.264,795.034],[-142.942,794.338],[-112.717,793.208],[-81.812,791.628],[-50.446,789.583],[-18.843,787.055],[12.779,784.029],[44.196,780.489],[75.19,776.42],[105.537,771.804],[135.018,766.626],[163.41,760.871],[190.494,754.521],[216.047,747.562],[239.85,739.976],[261.68,731.749],[271.786,727.39],[281.317,722.864],[290.243,718.17],[298.539,713.305],[306.176,708.268],[313.126,703.056],[319.362,697.668],[324.856,692.101],[329.58,686.354],[333.508,680.424],[336.611,674.31],[338.862,668.01],[340.232,661.521],[340.695,654.841],[340.695,654.841],[340.696,641.252],[340.015,628.231],[338.608,615.771],[336.429,603.865],[333.433,592.504],[329.574,581.681],[324.806,571.388],[319.084,561.618],[312.362,552.362],[304.596,543.614],[295.738,535.364],[285.745,527.606],[274.57,520.332],[262.167,513.534],[248.492,507.205],[233.499,501.336],[217.141,495.919],[199.375,490.949],[180.154,486.415],[159.432,482.311],[137.164,478.63],[113.305,475.362],[87.809,472.501],[60.63,470.039],[31.724,467.968],[1.044,466.28],[-31.455,464.969],[-65.819,464.025],[-140.323,463.209],[-222.831,463.773],[-222.831,463.773],[-235.9,463.247],[-248.36,461.467],[-260.145,458.517],[-271.189,454.481],[-281.43,449.443],[-290.801,443.485],[-299.237,436.692],[-306.675,429.146],[-313.049,420.932],[-318.293,412.134],[-322.345,402.834],[-325.138,393.116],[-326.607,383.064],[-326.689,372.761],[-325.317,362.292],[-322.428,351.738],[-320.394,346.456],[-317.956,341.185],[-315.107,335.934],[-311.837,330.715],[-308.139,325.538],[-304.005,320.413],[-299.427,315.35],[-294.397,310.361],[-282.946,300.643],[-269.588,291.343],[-254.259,282.544],[-236.894,274.33],[-217.427,266.785],[-195.794,259.992],[-171.929,254.034],[-145.77,248.995],[-117.249,244.959],[-86.303,242.01],[-52.867,240.23],[-16.875,239.703],[-16.875,239.703],[21.158,239.721],[56.47,238.905],[89.1,237.309],[119.09,234.987],[146.48,231.995],[171.31,228.387],[193.623,224.218],[213.457,219.542],[230.854,214.413],[245.855,208.887],[258.5,203.018],[268.829,196.861],[273.139,193.691],[276.885,190.47],[280.072,187.204],[282.706,183.9],[284.792,180.565],[286.334,177.206],[287.338,173.829],[287.81,170.441],[287.753,167.05],[287.173,163.661],[286.076,160.283],[284.466,156.921],[282.348,153.583],[279.728,150.275],[273,143.777],[264.323,137.482],[253.738,131.445],[241.284,125.721],[227.004,120.363],[210.936,115.428],[193.123,110.968],[173.605,107.039],[152.422,103.696],[129.616,100.993],[105.226,98.985],[79.294,97.726],[51.859,97.271]],o.DrinkPosArr102_2=[[367.247,781.641],[359.104,784.405],[347.847,786.896],[333.699,789.096],[316.88,790.99],[297.611,792.563],[276.115,793.797],[252.61,794.677],[227.32,795.187],[200.464,795.312],[172.264,795.034],[142.942,794.338],[112.717,793.208],[81.812,791.628],[50.446,789.583],[18.843,787.055],[-12.779,784.029],[-44.196,780.489],[-75.19,776.42],[-105.537,771.804],[-135.018,766.626],[-163.41,760.871],[-190.494,754.521],[-216.047,747.562],[-239.85,739.976],[-261.68,731.749],[-271.786,727.39],[-281.317,722.864],[-290.243,718.17],[-298.539,713.305],[-306.176,708.268],[-313.126,703.056],[-319.362,697.668],[-324.856,692.101],[-329.58,686.354],[-333.508,680.424],[-336.611,674.31],[-338.862,668.01],[-340.232,661.521],[-340.695,654.841],[-340.695,654.841],[-340.696,641.252],[-340.015,628.231],[-338.608,615.771],[-336.429,603.865],[-333.433,592.504],[-329.574,581.681],[-324.806,571.388],[-319.084,561.618],[-312.362,552.362],[-304.596,543.614],[-295.738,535.364],[-285.745,527.606],[-274.57,520.332],[-262.167,513.534],[-248.492,507.205],[-233.499,501.336],[-217.141,495.919],[-199.375,490.949],[-180.154,486.415],[-159.432,482.311],[-137.164,478.63],[-113.305,475.362],[-87.809,472.501],[-60.63,470.039],[-31.724,467.968],[-1.044,466.28],[31.455,464.969],[65.819,464.025],[140.323,463.209],[222.831,463.773],[222.831,463.773],[235.9,463.247],[248.36,461.467],[260.145,458.517],[271.189,454.481],[281.43,449.443],[290.801,443.485],[299.237,436.692],[306.675,429.146],[313.049,420.932],[318.293,412.134],[322.345,402.834],[325.138,393.116],[326.607,383.064],[326.689,372.761],[325.317,362.292],[322.428,351.738],[320.394,346.456],[317.956,341.185],[315.107,335.934],[311.837,330.715],[308.139,325.538],[304.005,320.413],[299.427,315.35],[294.397,310.361],[282.946,300.643],[269.588,291.343],[254.259,282.544],[236.894,274.33],[217.427,266.785],[195.794,259.992],[171.929,254.034],[145.77,248.995],[117.249,244.959],[86.303,242.01],[52.867,240.23],[16.875,239.703],[16.875,239.703],[-21.158,239.721],[-56.47,238.905],[-89.1,237.309],[-119.09,234.987],[-146.48,231.995],[-171.31,228.387],[-193.623,224.218],[-213.457,219.542],[-230.854,214.413],[-245.855,208.887],[-258.5,203.018],[-268.829,196.861],[-273.139,193.691],[-276.885,190.47],[-280.072,187.204],[-282.706,183.9],[-284.792,180.565],[-286.334,177.206],[-287.338,173.829],[-287.81,170.441],[-287.753,167.05],[-287.173,163.661],[-286.076,160.283],[-284.466,156.921],[-282.348,153.583],[-279.728,150.275],[-273,143.777],[-264.323,137.482],[-253.738,131.445],[-241.284,125.721],[-227.004,120.363],[-210.936,115.428],[-193.123,110.968],[-173.605,107.039],[-152.422,103.696],[-129.616,100.993],[-105.226,98.985],[-79.294,97.726],[-51.859,97.271]],function(t){t[t.Idle=-1]="Idle",t[t.Normal=0]="Normal",t[t.NormalNoObstruct=1]="NormalNoObstruct",t[t.GoingRoad=2]="GoingRoad",t[t.InRoadRight=3]="InRoadRight",t[t.InRoadLeft=4]="InRoadLeft",t[t.GoingParking=5]="GoingParking",t[t.Parking=6]="Parking",t[t.GoingOutParking=7]="GoingOutParking",t[t.OutParking=8]="OutParking",t[t.OnBottomLeft=9]="OnBottomLeft",t[t.OnBottomRight=10]="OnBottomRight",t[t.WaterSpray=11]="WaterSpray",t[t.WaterSprayLeave=12]="WaterSprayLeave"}(o.CarState||(o.CarState={})),function(t){t[t.LeftTop=0]="LeftTop",t[t.Top=1]="Top",t[t.RightTop=2]="RightTop",t[t.Right=3]="Right",t[t.RightBottom=4]="RightBottom",t[t.Bottom=5]="Bottom",t[t.LeftBottom=6]="LeftBottom",t[t.Left=7]="Left"}(o.TurntablePosDir||(o.TurntablePosDir={})),function(t){t[t.FrontBack=0]="FrontBack",t[t.Parallel=1]="Parallel"}(o.LinkType||(o.LinkType={})),function(t){t[t.Idle=0]="Idle",t[t.Normal=1]="Normal",t[t.OnRoad=2]="OnRoad",t[t.Remove=3]="Remove"}(o.BulldozerState||(o.BulldozerState={})),cc._RF.pop()},{}],"Level-29086_control":[function(t,e,o){"use strict";var i,n;cc._RF.push(e,"da5bc1iDY1HtYXnseJZZXbN","Level-29086_control");var r,a=t("./BrainLevelBase"),s=t("./PoolMgr"),c=t("./Level-29086_config"),l=t("./Level-29086_boxCarItem"),h=t("./MotionTrail"),d=t("./Level-29086_dragonItem"),u=t("./LevelUtils"),p=t("./LevelConstant"),f=t("./Level-29086_transport"),g=t("./Level-29086_carPark"),m=t("./levelReviveHelper"),v=t("../../scripts/PlatformManager"),y=t("../../scripts/ShuShuConst"),_=t("../../scripts/UserManager"),C=t("../../scripts/UserConst"),b=t("../../scripts/LocalStorageManager"),S=t("../../scripts/LocalStorageConst"),w=t("../../scripts/LanguageManager"),A=cc._decorator,k=A.ccclass,P=A.property;(r=i||(i={}))[r.map1=1]="map1",r[r.map2=2]="map2",r[r.map3=3]="map3",r[r.map4=4]="map4",r[r.map5=5]="map5",r[r.map6=6]="map6",r[r.map7=7]="map7",r[r.map8=8]="map8",r[r.map9=9]="map9",r[r.map10=10]="map10",r[r.map101=101]="map101",r[r.map102=102]="map102",function(t){t[t.normal=0]="normal",t[t.back=1]="back",t[t.slowStart=2]="slowStart",t[t.item1Start=3]="item1Start",t[t.item2Start=4]="item2Start",t[t.item3Start=5]="item3Start",t[t.revive=6]="revive"}(n||(n={}));var T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.box2SpriteAtlas=null,e.isDebug=!1,e.boundary=750,e.mapType=i.map1,e.carRoot=null,e.cannonRoot=null,e.dragonRoot=null,e.warnNode=null,e.roleNode=null,e._cannonNum=Symbol("_cannonNum"),e._cannonType=Symbol("_cannonType"),e._cannonState=Symbol("_cannonState"),e._cannonList=[],e._keepDistance=30,e._moveSpeed=[50,500,700],e._speedIndexList=[0,70,160],e._addSpeed=[0,0,5,2],e.cannonAttackList=[[70,179]],e._bulletModelList=[],e._bulletMoveList=[],e._bulletTarget=Symbol("_bulletTarget"),e._dragonTarget=Symbol("_dragonTarget"),e._itemType=Symbol("_itemType"),e._itemNode=Symbol("_itemNode"),e._itemDepend=Symbol("_itemDepend"),e._turnBackDestroy=Symbol("_turnBackDestroy"),e._moveEnd=Symbol("_moveEnd"),e.createFinish=!1,e._slowTime=12,e._slowCur=0,e._slowStart=!1,e._warning=!1,e._rolePointIndex=0,e._mapConfig=[],e._mapConfig2=[],e._item1Time=5,e._item1Cur=0,e._item1Start=!1,e._item1BigSpineList=new cc.NodePool,e._item1SmallSpineList=new cc.NodePool,e._item2Time=2,e._item2Cur=0,e._item2Start=!1,e._item3Time=5,e._item3Cur=0,e._item3Start=!1,e._item4Time=8,e._item4Cur=0,e._item4Start=!1,e._item4SpineList=new cc.NodePool,e._item5Time=12,e._item5Cur=0,e._item5Start=!1,e._item5SpineList=new cc.NodePool,e._itemCreatedList=[],e._warningIndex=0,e._itemPoolList=[],e._itemNodeList=[],e._itemNameList=["\u51b0\u5c01","\u51fb\u9000","\u5de8\u9f99\u51cf\u901f","\u5c04\u901f\u52a0\u5feb","\u5c04\u7a0b\u589e\u52a0","\u5c11\u91cf\u91d1\u5e01","\u5927\u91cf\u91d1\u5e01"],e._itemTipsList=["\u51b0\u51bb\u6548\u679c\u751f\u6548\u4e2d","","\u51cf\u901f\u6548\u679c\u751f\u6548\u4e2d","\u5c04\u901f\u52a0\u5feb\u4e2d","\u5c04\u7a0b\u589e\u52a0\u4e2d","",""],e._itemTipsNode=null,e._touchBegin=!1,e.colorTypeAmount=c.colorDes.length,e._dragonSkin=0,e._roleSkin=0,e._roleHp=1,e._roleCurHp=1,e._roleLevel=1,e._dragonAttackInterval=3,e._roleLevel2Time=3,e._roleLevel2CurTime=0,e._roleLevel2Count=0,e._roleLevel5Count=0,e._roleLevel10Time=3,e._roleLevel10CurTime=0,e._roleLevel10Count=0,e._removeStage=!1,e._removeClick=!1,e._tipRemove=null,e._feidan=new cc.NodePool,e._feidanYanwu=new cc.NodePool,e._feidanBaozha=new cc.NodePool,e.personPosRoot2=null,e.isTransportCarMove=!1,e.oldSortAmount=0,e.guideNodes=[],e.guideText=["\u7bb1\u5b50\u4f1a\u671d\u7740\u7bad\u5934\u65b9\u5411\u79fb\u52a8","\u8fd9\u79cd\u7bb1\u5b50\u53ef\u4ee5\u53d1\u5c0410\u9897\u70ae\u5f39","\u8fd9\u79cd\u7bb1\u5b50\u53ef\u4ee5\u53d1\u5c046\u9897\u70ae\u5f39","\u8fd9\u79cd\u7bb1\u5b50\u53ef\u4ee5\u53d1\u5c044\u9897\u70ae\u5f39"],e.currentGuideNode=null,e.guidedNodes=[],e.poolMgr=new s.default,e.sortColor_new=[],e.levelDataJSON={},e.parkingNodes=[],e.between2_4CarArr=[],e.highSpeedRailSpeed=600,e.turntableCarArr=[],e.colorPersonArr=[],e.unlockParkingTarget=null,e.carparkIng=!1,e.moveCarAmount=0,e.allPersonAmount=0,e.allPersonAmount2=0,e.curCreatePersonAmount=0,e.extraWeightConst=0,e.extraWeight=[],e.carWeight=[],e.parkingWeight=[],e.sortWeight=[],e.allWeight=[],e.colorPersonAmountArr=[],e.colorPersonAmountArrIndex=[],e.colorPersonIndexArr=[],e.uiShowPersonAmount=0,e.currentPersonColorAmount=[],e.sortPersonNodes=[],e.sortPersonNodes2=[],e.times=0,e.createNum=0,e.isCanStartClick=!1,e._curLastBoxItemNode=null,e._curLastBoxItemNode2=null,e._mBodyMoveBackDis=Symbol("_mBodyMoveBackDis"),e._mBodyMoveDis=Symbol("_mBodyMoveDis"),e._mBodyEven=Symbol("_mBodyEven"),e._curMoveState=n.normal,e._curMoveState2=n.normal,e._curvePoints=[],e._curvePoints2=[],e.isFail=!1,e.isWin=!1,e.isDragonAttack=!1,e.isDragonAttacking=!1,e.isDragonAttack2=!1,e.isDragonAttacking2=!1,e.isReviveAmount=0,e.lastExtraIndexArr=[],e.randomColorArr=[],e.randomColorNum=[],e.batchMap={},e.pathArr=[],e.carIndex=[],e.carNodeArr=[],e.carAllAmount=0,e.carMap={},e.hardPointsIndexs=[],e.localData={},e.reviveArr=[],e.reviveRemoveArr=[],e.firstSortIndexArr=[],e.isSorting=!1,e.isSortAnim=!1,e.isReviveBack=!1,e.isReviveSort=!1,e}return __extends(e,t),e.prototype.onLoad=function(){return __awaiter(this,void 0,void 0,function(){var e,o,n,r,a,s,l,d,u,p,f,g,m,v,y;return __generator(this,function(){for(g=0;g<Object.keys(i).length;g++)e=g+1,this.dict["map"+e]&&e!=this.mapType&&(this.dict["map"+e].removeFromParent(),this.dict["mapBg"+e].removeFromParent());for(t.prototype.onLoad.call(this),this.dict.carRoot.active=!1,this._itemTipsNode=new cc.Node,this._itemTipsNode.parent=this.dict.game,this._itemTipsNode.position=cc.v2(374.169,360),this._itemTipsNode.anchorX=1,(o=this._itemTipsNode.addComponent(cc.Label)).fontSize=22,o.lineHeight=30,(n=this._itemTipsNode.addComponent(cc.LabelOutline)).color=cc.Color.BLACK,n.width=2,cc.view.getFrameSize().width/cc.view.getFrameSize().height<.5&&(this.dict.element.y-=80,this._itemTipsNode.y-=80,this.dict.topMask.active=!0,this.dict.topMask.y=504,this.dict.topMask.height=642),this.dict.warnNode.height=cc.winSize.height,this.dict.warnNode.y=-1*this.dict.game.y,r=[],a=[],this.mapType==i.map1?r=c.DrinkPosArr:this.mapType==i.map2?r=c.DrinkPosArr2:this.mapType==i.map3?r=c.DrinkPosArr3:this.mapType==i.map4?r=c.DrinkPosArr4:this.mapType==i.map5?r=c.DrinkPosArr5:this.mapType==i.map6?r=c.DrinkPosArr6:this.mapType==i.map7?r=c.DrinkPosArr7:this.mapType==i.map8?r=c.DrinkPosArr8:this.mapType==i.map9?r=c.DrinkPosArr9:this.mapType==i.map10?r=c.DrinkPosArr10:this.mapType==i.map101?(r=c.DrinkPosArr101_1,a=c.DrinkPosArr101_2):this.mapType==i.map102&&(r=c.DrinkPosArr102_1,a=c.DrinkPosArr102_2),s=c.MapParam[this.mapType].mapOrigin,l=this.dict["map"+this.mapType].position.sub(s),g=0;g<r.length;g++)f=r[g],this._mapConfig.push([f[0]+l.x,f[1]+l.y]);for(g=0;g<a.length;g++)f=a[g],this._mapConfig2.push([f[0]+l.x,f[1]+l.y]),d=this.dict.personPosRoot,this.personPosRoot2=cc.instantiate(d),this.personPosRoot2.parent=d.parent,this.personPosRoot2.position=d.position,this.personPosRoot2.setSiblingIndex(d.getSiblingIndex());for(u=0;u<this._mapConfig.length;u++)p=new cc.Node(""+u),this.dict.personPosRoot.addChild(p),f=this._mapConfig[u],p.position=cc.v2(f[0],f[1]);for(g=1;g<this.dict.personPosRoot.children.length;g++)m=this.dict.personPosRoot.children[g-1].position,v=this.dict.personPosRoot.children[g].position,y=m.sub(v),this._curvePoints.push({position:v,distance:y.len(),mapIndex:g});for(u=0;u<this._mapConfig2.length;u++)p=new cc.Node(""+u),this.personPosRoot2.addChild(p),f=this._mapConfig2[u],p.position=cc.v2(f[0],f[1]);if(this.personPosRoot2)for(g=1;g<this.personPosRoot2.children.length;g++)m=this.personPosRoot2.children[g-1].position,v=this.personPosRoot2.children[g].position,y=m.sub(v),this._curvePoints2.push({position:v,distance:y.len(),mapIndex:g});return this.carWeight=new Array(this.colorTypeAmount).fill(0),this.extraWeight=new Array(this.colorTypeAmount).fill(0),this.lastExtraIndexArr=new Array(this.colorTypeAmount).fill(0),this.parkingWeight=new Array(this.colorTypeAmount).fill(0),this.sortWeight=new Array(this.colorTypeAmount).fill(0),this.allWeight=new Array(this.colorTypeAmount).fill(0),this.colorPersonIndexArr=new Array(this.colorTypeAmount).fill(0),this.currentPersonColorAmount=new Array(this.colorTypeAmount).fill(0),this.colorPersonArr=new Array(this.colorTypeAmount).fill(0),this.levelDataJSON=JSON.parse(JSON.stringify(c.levelData[this.levelID])),this.levelDataJSON.moveSpeed&&(this._moveSpeed=this.levelDataJSON.moveSpeed),this.levelDataJSON.addSpeed&&(this._addSpeed=this.levelDataJSON.addSpeed),this.levelDataJSON.item&&(this._itemConfig=this.levelDataJSON.item),this._speedIndexList=c.MapParam[this.mapType].speedIndexList,-29095==this.levelID&&(this._speedIndexList=c.MapParam[0].speedIndexList),this.cannonAttackList=c.MapParam[this.mapType].cannonAttackList,this.setCollisionManager(!0,!1),this.carRoot=this.dict.carRoot,this.cannonRoot=this.dict.cannonRoot,this.dragonRoot=this.dict.dragonRoot,this.warnNode=this.dict.warnNode,this.roleNode=this.dict.roleNode,this.dict.btns&&(this.dict.btns.active=!1),this.dict.hitSpine.scale=.4,this.dict.tailGas.getComponent(h.default)&&(this.dict.tailGas.getComponent(h.default).length=25,this.dict.tailGas.getComponent(h.default).headWidth=35,this.dict.tailGas.getComponent(h.default).tailWidth=20,this.dict.tailGas.getComponent(h.default).headOpacity=230,this.dict.tailGas.getComponent(h.default).tailOpacity=40),this.dict.hand&&this.dict.hand.active&&(this.guideNodes.push(this.dict.carRoot.children[1]),this.guideNodes.push(this.dict.carRoot.children[0]),this.guideNodes.push(this.dict.carRoot.children[3]),this.guideNodes.push(this.dict.carRoot.children[2]),this.currentGuideNode=this.guideNodes[0],this.handPos()),this.roleNode._moveIndex=c.MapParam[this.mapType].rolePoint[0],-29095==this.levelID&&(this.roleNode._moveIndex=c.MapParam[0].rolePoint[0]),[2]})})},e.prototype.handPos=function(){var t=cc.v2(-20,-20);"012-1"==this.currentGuideNode.name?t=cc.v2(0,-20):"023"==this.currentGuideNode.name?t=cc.v2(0,-80):"031"==this.currentGuideNode.name&&(t=cc.v2(-15,-20));var e=this.currentGuideNode.convertToWorldSpaceAR(t),o=this.guideNodes.indexOf(this.currentGuideNode);this.dict.handText.getComponent(cc.Label).string=this.guideText[o];var i=this.dict.hand.parent.convertToNodeSpaceAR(e);this.dict.hand.position=i,this.dict.hand.children[0].getComponent(cc.Animation).play(),cc.tween(this.dict.sz).to(.6,{scale:1}).to(.6,{scale:1.1}).union().repeatForever().start()},e.prototype.shackAction=function(t,e){var o=cc.moveBy(t,e,e),i=cc.moveBy(t,-e,-e),n=cc.moveBy(.8*t,.8*e,.8*e),r=cc.moveBy(.8*t,.8*-e,.8*-e),a=cc.moveBy(.6*t,.6*e,.6*e),s=cc.moveBy(.6*t,.6*-e,.6*-e),c=cc.moveBy(.4*t,.4*e,.4*e),l=cc.moveBy(.4*t,.4*-e,.4*-e),h=cc.moveBy(.2*t,.2*e,.2*e),d=cc.moveBy(.2*t,.2*-e,.2*-e);return cc.sequence(o,i,n,r,a,s,c,l,h,d)},e.prototype.changeCar=function(t,e,o,i){return void 0===o&&(o=0),__awaiter(this,void 0,void 0,function(){var n,r,a,s,h,d,u,p,g=this;return __generator(this,function(){return t.getComponent(l.default).isReadyDestroy=!0,n=t.getComponent(l.default).colorImgName,r=t.getComponent(l.default).lenImgName,i?(a=cc.instantiate(this.dict.carPrefab.getChildByName(i))).parking=t.parking:a=cc.instantiate(this.dict.carPrefab.getChildByName("02"+r)),a.getComponent(l.default).carState=t.getComponent(l.default).carState,a.active=!1,this.carRoot.addChild(a),a.getComponent(l.default).mgr=this,a.getComponent(l.default).colorImgName=n,a.getComponent(l.default).lenImgName=r,a.getComponent(l.default).dirImgName=e,a.getComponent(l.default).carColor=t.getComponent(l.default).carColor,4==e||5==e?(a.position=cc.v2(t.x,t.y),h=a.convertToWorldSpaceAR(cc.v2(0,t.height/2)),s=a.parent.convertToNodeSpaceAR(h),a.position=cc.v2(s.x,s.y)):0==o?a.position=cc.v2(t.x,t.y+t.height/2):a.getComponent(l.default).carState==c.CarState.OnBottomLeft?a.position=cc.v2(t.x-t.width/2,t.y):a.getComponent(l.default).carState==c.CarState.OnBottomRight?a.position=cc.v2(t.x+t.width/2,t.y):1==o?(h=this.dict.road.parent.convertToWorldSpaceAR(this.dict.road.position),s=a.parent.convertToNodeSpaceAR(h),a.position=cc.v2(t.x+t.width/2,s.y)):(h=this.dict.road.parent.convertToWorldSpaceAR(this.dict.road.position),s=a.parent.convertToNodeSpaceAR(h),a.position=cc.v2(t.x-t.width/2,s.y)),a.getComponent(l.default).carState==c.CarState.GoingParking&&(d=a.parking.convertToWorldSpaceAR(cc.v2(0,0)),s=a.parent.convertToNodeSpaceAR(d),a.position=cc.v2(s.x,s.y)),u="f29086_"+c.getCarImgByColor(a,t.getComponent(l.default).carColor),p="f29086_"+c.getCarBodyImgByColor(a,t.getComponent(l.default).carColor),a.stopAllActions(),function(){t.getChildByName("tailGasSpine")&&g.poolMgr.put(t.getChildByName("tailGasSpine"),"tailGasSpine"),t.getChildByName("tailGas")&&t.getChildByName("tailGas").destroy();var e=t.getComponent(l.default).nextCar;try{e&&e.getComponent(l.default)&&(e.getComponent(l.default).carState=c.CarState.Normal)}catch(y){}t.isTransportBox&&g.dict.transportLayer.getComponent(f.default).reduceCarAmount(t),t.destroy(),a.getChildByName("car").getComponent(cc.Sprite).spriteFrame=g.box2SpriteAtlas.getSpriteFrame(u),a.getChildByName("body")&&(a.getChildByName("body").getComponent(cc.Sprite).spriteFrame=g.box2SpriteAtlas.getSpriteFrame(p)),a.active=!0;var o=a.convertToWorldSpaceAR(cc.v2(0,2250)),i=a.parent.convertToNodeSpaceAR(o);if(a.getComponent(l.default).carState==c.CarState.InRoadRight||a.getComponent(l.default).carState==c.CarState.InRoadLeft){var n,r=a.parent.convertToWorldSpaceAR(a.position),s=void 0;if(a.getComponent(l.default).isFireEngine){var h=a.parking.getChildByName("fireCarPos").position;s=a.parking.convertToWorldSpaceAR(h)}else s=a.parking.currentParkingWPos;a.setSiblingIndex(0),n=a.parking.currentParkingNPos;var d=Math.abs(s.x-r.x);g.addTailGasSpine(a),cc.tween(a).to(d/a.getComponent(l.default).speed,{x:n.x}).call(function(){a.getComponent(l.default).carState=c.CarState.GoingParking,console.log("isRichCar",a.getComponent(l.default).isRichCar),a.getComponent(l.default).isRichCar?g.changeCar(a,6,0,"116"+a.getComponent(l.default).lenImgName):a.getComponent(l.default).isTramcar?g.changeCar(a,6,0,"136"+a.getComponent(l.default).lenImgName):g.changeCar(a,6,0,"06"+a.getComponent(l.default).lenImgName)}).start()}else if(a.getComponent(l.default).carState==c.CarState.GoingParking){if(s=void 0,a.parking){s=a.parking.convertToWorldSpaceAR(cc.v2(0,a.parking.height/2));var m=a.parent.convertToNodeSpaceAR(s);a.getComponent(l.default).carState=c.CarState.Parking,a.stopAllActions(),a.getChildByName("car").getComponent(cc.Sprite).spriteFrame=g.box2SpriteAtlas.getSpriteFrame(u),a.getChildByName("body")&&(a.getChildByName("body").getComponent(cc.Sprite).spriteFrame=g.box2SpriteAtlas.getSpriteFrame(p)),d=m.sub(a.position).mag(),cc.tween(a).to(d/a.getComponent(l.default).speed,{position:m}).call(function(){g.updateCarWeight(),a.parking.car=a;var t=a.getComponent(l.default).seatTotalAmount;a.getChildByName("sd").active=!1,a.getChildByName("shadow").active=!0;var e=Number(a.name[2]),o=a.getComponent(l.default).carColor;a.getChildByName("body")&&(a.getChildByName("body").active=!1),a.getChildByName("car").active=!1,a.getChildByName("sd").active=!1,a.getChildByName("shadow").active=!1,a.getChildByName("boxSpine").active=!0,a.getChildByName("boxSpine").getComponent(sp.Skeleton).timeScale=2,a.getChildByName("boxSpine").getComponent(sp.Skeleton).setSkin("skin"+(o+1)),a.getChildByName("boxSpine").getComponent(sp.Skeleton).setAnimation(0,"open"+(3-e+1),!1),a.getChildByName("boxSpine").getComponent(sp.Skeleton).setCompleteListener(function(){a.getComponent(l.default).carState=c.CarState.OutParking;var e=g.getCannon();g._item4Start&&g.showItem4Spine(e),g._item5Start&&g.showItem5Spine(e),g.dict.cannonRoot.addChild(e),e.position=e.parent.convertToNodeSpaceAR(a.parking.convertToWorldSpaceAR(cc.v2(0,0))),e.getChildByName("body").getComponent(cc.Sprite).spriteFrame=g.box2SpriteAtlas.getSpriteFrame("f29086_"+(o+1+2e3)),e.getChildByName("bullet").getComponent(cc.Sprite).spriteFrame=g.box2SpriteAtlas.getSpriteFrame("f29086_"+(o+1+2200)),e.getChildByName("num").getComponent(cc.Label).string="x"+t,e.parking=a.parking,e[g._cannonType]=o,e[g._cannonNum]=t,e[g._cannonState]=0,e.getChildByName("cannon").getComponent(sp.Skeleton).setSkin("skin"+(o+1)),e.getChildByName("cannon").getComponent(sp.Skeleton).setAnimation(0,"enter",!1),e.getChildByName("cannon").getComponent(sp.Skeleton).setCompleteListener(function(){e[g._cannonState]=1,e.getChildByName("cannon").getComponent(sp.Skeleton).setAnimation(0,"idle",!0)})}),g.putTailGas(a)}).start()}}else if(a.getComponent(l.default).carState==c.CarState.GoingRoad){r=g.dict.road.parent.convertToWorldSpaceAR(g.dict.road.position);var v=a.parent.convertToWorldSpaceAR(a.position);d=Math.abs(v.y-r.y),g.addTailGasSpine(a),cc.tween(a).by(d/a.getComponent(l.default).speed,{y:d}).call(function(){g.collision(a)}).start()}else g.addTailGasSpine(a),cc.tween(a).to(2250/a.getComponent(l.default).speed,{position:i}).start()}(),[2]})})},e.prototype.load=function(t){return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(e,o){cc.resources.load(t,function(t,i){return t?(cc.warn(t),o(t)):e(new cc.SpriteFrame(i))})})]})})},e.prototype.putTailGas=function(t){t.getChildByName("tailGas")&&this.poolMgr.put(t.getChildByName("tailGas"),"tailGas")},e.prototype.hit=function(t){var e=cc.instantiate(this.dict.hitSpine);e&&(t.addChild(e),e.position=cc.v2(0,0),this.scheduleOnce(function(){e.destroy()},1))},e.prototype.collision=function(t){if(t.getComponent(l.default).isReadyDestroy=!0,!t.getComponent(l.default).isFireEngine){for(var e=t,o=void 0,i=0;i<this.parkingNodes.length;i++){var n=this.parkingNodes[i];if(n.isEmpty){n.isEmpty=!1,e.parking=n,o=n;break}}if(o){var r=e.parent.convertToWorldSpaceAR(e.position),a=o.currentParkingWPos;r.x>=a.x?(e.getComponent(l.default).carState=c.CarState.InRoadLeft,e.getComponent(l.default).isRichCar?(e.getComponent(l.default).lenImgName=1,this.changeCar(e,1,2,"111"+e.getComponent(l.default).lenImgName+"-0")):this.changeCar(e,1,2,"01"+e.getComponent(l.default).lenImgName+"-0")):(e.getComponent(l.default).carState=c.CarState.InRoadRight,e.getComponent(l.default).isRichCar?(e.getComponent(l.default).lenImgName=1,this.changeCar(e,1,1,"111"+e.getComponent(l.default).lenImgName+"-1")):this.changeCar(e,1,1,"01"+e.getComponent(l.default).lenImgName+"-1"))}}},e.prototype.saveParkingWPos=function(){for(var t=0;t<this.dict.parkingRoot.children.length;t++){var e=this.dict.parkingRoot.children[t];e.currentParkingWPos=e.convertToWorldSpaceAR(cc.v2(0,-168.549)),e.currentParkingNPos=this.dict.carRoot.convertToNodeSpaceAR(e.currentParkingWPos)}console.log("\u521d\u59cb\u7b97\u597d\u6bcf\u4e2a\u8f66\u4f4d\u7684\u505c\u8f66\u70b9\u7684\u4e16\u754c\u5750\u6807")},e.prototype.onLevelReady=function(){var t=this;this.saveParkingWPos(),this.dict.carRoot.children.forEach(function(e){if(e.childrenCount>=3){var o="";71==e.children[0].width&&88==e.children[0].height?o="f29076_1-s":70==e.children[0].width&&117==e.children[0].height?o="f29076_4-s":100==e.children[0].width&&87==e.children[0].height?o="f29076_6-s":70==e.children[0].width&&147==e.children[0].height?o="f29076_7-s":130==e.children[0].width&&88==e.children[0].height&&(o="f29076_9-s"),e.children[0].getComponent(cc.Sprite).spriteFrame=t.box2SpriteAtlas.getSpriteFrame(o)}}),this.dict.carPrefab.children.forEach(function(e){if(e.childrenCount>=3){var o="";71==e.children[0].width&&88==e.children[0].height?o="f29076_1-s":70==e.children[0].width&&117==e.children[0].height?o="f29076_4-s":100==e.children[0].width&&87==e.children[0].height?o="f29076_6-s":70==e.children[0].width&&147==e.children[0].height?o="f29076_7-s":130==e.children[0].width&&88==e.children[0].height&&(o="f29076_9-s"),e.children[0].getComponent(cc.Sprite).spriteFrame=t.box2SpriteAtlas.getSpriteFrame(o)}}),window.f29086_LevelData&&(this._roleLevel!=window.f29086_LevelData.heroLevel&&(this._roleLevel=window.f29086_LevelData.heroLevel),this._roleSkin!=window.f29086_LevelData.useSkin[0]&&(this._roleSkin=window.f29086_LevelData.useSkin[0]),this._dragonSkin!=window.f29086_LevelData.useSkin[1]&&(this._dragonSkin=window.f29086_LevelData.useSkin[1])),this._roleLevel>=7?this._roleHp+=2:this._roleLevel>=4&&(this._roleHp+=1),this._roleLevel>=8&&(this._roleLevel2Time+=2),this._roleCurHp=this._roleHp,this.updateRoleHp(),this.initView()},e.prototype.initView=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,i,n,r,a,s,h,p,m,v,y,_,C,b,S,w,A,k,P,T,B,M,I=this;return __generator(this,function(){for(this.dict.guide&&this.scheduleOnce(function(){I.dict.guide.active=!1},6),this.levelDataJSON.transport&&this.dict.transportLayer.getComponent(f.default).init(this,this.levelDataJSON.transport),_=0;_<this.dict.parkingRoot.childrenCount;_++)!(t=this.dict.parkingRoot.children[_]).active||t.getChildByName("videoLock")||t.getChildByName("fireSpine")||(t.isEmpty=!0,this.parkingNodes.push(t)),t.getChildByName("videoLock")&&(t.getChildByName("videoLock").active=!0,t.getChildByName("videoLock").getChildByName("text").getComponent(cc.Label).overflow=cc.Label.Overflow.SHRINK,t.getChildByName("videoLock").getChildByName("text").width=80,t.getChildByName("videoLock").getChildByName("text").scale=.85);if(this.isDebug)for(e=[],_=0;_<this.carRoot.childrenCount;_++){for(o=this.carRoot.children[_],w=0;w<e.length;w++)v=e[w],o.x==v[0]&&o.y==v[1]&&console.error("\u540c\u4e00\u4e2a\u4f4d\u7f6e\u590d\u5236\u591a\u8f86\u8f66",o.name,_);e.push([o.x,o.y])}for(this.levelDataJSON.carpark&&this.dict.carParkRoot.getComponent(g.default).init(this,this.levelDataJSON.carpark),i=this.getLocal("blackCar")||[],n=this.carRoot.children.concat(this.turntableCarArr),_=0;_<n.length;_++)r=n[_],this.carNodeArr.push(r),r.getComponent(l.default).mgr=this,r.indexID=""+_,a=this.getPath(r),this.levelDataJSON.blackAmount&&!i.length&&a>=2&&a<=4&&this.between2_4CarArr.push(r),r.getComponent(l.default).path=a,this.isDebug&&((s=new cc.Node).name="path",s.addComponent(cc.Label).string=""+a,s.color=cc.Color.WHITE,r.addChild(s),s.position=cc.v2(-13.105,-26.21)),this.allPersonAmount+=r.getComponent(l.default).seatTotalAmount;if(console.log("\u603b\u4e0a\u8f66\u4eba\u6570",this.allPersonAmount),this.allPersonAmount2=this.allPersonAmount,cc.game.emit("allPersonAmount",this.allPersonAmount,this.allPersonAmount2),this.mapType<100?window.f29086_dragonBall=1:window.f29086_dragonBall=2,window.f29086_coin=this.allPersonAmount2,this.setCarID(),this.levelDataJSON.blackAmount&&!i.length){if(this.levelDataJSON.blackAmount>=this.between2_4CarArr.length)for(w=0;w<this.between2_4CarArr.length;w++)(v=this.between2_4CarArr[w]).getComponent(l.default).isBlackCar=!0,i.push(v.getComponent(l.default).carID);else for(h=this.getRandomDistinctElements(this.between2_4CarArr,this.levelDataJSON.blackAmount),w=0;w<h.length;w++)(v=h[w]).getComponent(l.default).isBlackCar=!0,i.push(v.getComponent(l.default).carID);this.setLocal("blackCar",i)}if(p=this.getLocal("colorConfig")||[],-29095==this.levelID?p=[4,1,3,0]:this.sortColor_new=this.shuffleArray(JSON.parse(JSON.stringify(c.sortColor))),0==p.length){for(m=this.levelDataJSON.carColor,w=0;w<m.length;w++)v=m[w],this.randomColorArr.push(this.getArrByLen([0,1,2,3,4,5,6,7],v[2])),this.randomColorNum[w]||(this.randomColorNum[w]=0);for(_=0;_<this.carNodeArr.length;_++)y=this.carNodeArr[_],b=this.getCarColor(_,m),p.push(b),this.setCarColorImg(y,b),(S=this.levelDataJSON.carWeight[y.getComponent(l.default).path-1])||(S=1),this.carWeight[b]+=S*y.getComponent(l.default).emptySeatAmount;this.setLocal("colorConfig",p)}else for(_=0;_<this.carNodeArr.length;_++)C=this.carNodeArr[_],b=p[_],i.includes(C.getComponent(l.default).carID)&&(C.getComponent(l.default).isBlackCar=!0),this.setCarColorImg(C,b),(S=this.levelDataJSON.carWeight[C.getComponent(l.default).path-1])||(S=1),this.carWeight[b]+=S*C.getComponent(l.default).emptySeatAmount;for(console.log("\u8f66\u8f86\u6743\u91cd",this.carWeight),console.log("\u989c\u8272",c.colorDes),console.log("\u4eba\u6570",this.colorPersonArr),w=0;w<c.colorDes.length;w++)this.getAmountByColor(w);return console.log("this.colorPersonAmountArr",this.colorPersonAmountArr),console.log("this.colorPersonAmountArrIndex",this.colorPersonAmountArrIndex),-29095==this.levelID&&(this.colorPersonAmountArr=[[3,3],[4,6],[],[3,1],[3,3,4],[],[],[]],this.firstSortIndexArr=[1,4,0,3,4,3,0,1,4]),(A=cc.instantiate(this.dict.longtou)).getComponent(d.default).dragonColor=1,this.dragonRoot.addChild(A,999),A.longtou=!0,A.position=cc.v3(this._mapConfig[0][0],this._mapConfig[0][1]),A._moveIndex=0,A[this._mBodyMoveDis]=0,A[this._mBodyMoveBackDis]=0,A[this._mBodyEven]=!0,A.active=!1,this.changeDragonSkin(A,function(){A.active=!0}),this.updateBodyPos(A),this.dict.hpPrefab.parent=A,this.dict.hpPrefab.position=cc.v2(),this.dict.hpPrefab.active=!1,cc.tween(A).delay(u.default.getRandomInt(3,8)).call(function(){I.isWin||I.isReviveBack||I._item1Start||(A.getComponent(sp.Skeleton).setAnimation(0,"angry",!1),A.getComponent(sp.Skeleton).addAnimation(0,"angry",!1),A.getComponent(sp.Skeleton).addAnimation(0,"idle1",!0))}).delay(1.5).union().repeatForever().start(),this._curLastBoxItemNode=A,this.personPosRoot2&&((k=cc.instantiate(this.dict.longtou)).getComponent(d.default).dragonColor=1,this.dragonRoot.addChild(k,999),k.longtou=!0,k.position=cc.v3(this._mapConfig[0][0],this._mapConfig[0][1]),k._moveIndex=0,k[this._mBodyMoveDis]=0,k[this._mBodyMoveBackDis]=0,k[this._mBodyEven]=!1,k.active=!1,this.changeDragonSkin(k,function(){k.active=!0}),this.updateBodyPos(k),cc.tween(k).delay(u.default.getRandomInt(3,8)).call(function(){I.isWin||I.isReviveBack||I._item1Start||(k.getComponent(sp.Skeleton).setAnimation(0,"angry",!1),k.getComponent(sp.Skeleton).addAnimation(0,"angry",!1),k.getComponent(sp.Skeleton).addAnimation(0,"idle1",!0))}).delay(1.5).union().repeatForever().start(),this._curLastBoxItemNode2=k),this.createPerson(!1,function(){I.createFinish=!0}),this.sortPersonNodes.unshift(A),k&&this.sortPersonNodes2.unshift(k),P=this._mapConfig[this.roleNode._moveIndex],T=cc.v2(P[0],P[1]),T=this.dict.personPosRoot.convertToWorldSpaceAR(T),this.roleNode.active=!1,this.changeRoleSkin(this.roleNode,function(){I.roleNode.active=!0}),this.roleNode.position=this.roleNode.parent.convertToNodeSpaceAR(T).add(cc.v2(0,-20)),this.updateRoleHp(),this.updateRoleHpPos(),(B=this.dict.roleText).active=!0,B.scale=0,this.dict.roleHpNode.active=!1,cc.tween(B).to(.3,{scale:1}).delay(1).to(.05,{angle:-10}).to(.05,{angle:10}).to(.05,{angle:-10}).to(.05,{angle:10}).to(.05,{angle:0}).delay(1).to(.05,{angle:-10}).to(.05,{angle:10}).to(.05,{angle:-10}).to(.05,{angle:10}).to(.05,{angle:0}).delay(.8).to(.3,{scale:0}).call(function(){I.dict.roleHpNode.active=!0}).start(),this.roleNode._targetPos=this.roleNode.position,M=cc.v2(this._mapConfig[0][0],this._mapConfig[0][1]),M=this.dict.personPosRoot.convertToWorldSpaceAR(M),this.dict["f29086.48"].position=this.dict["f29086.48"].parent.convertToNodeSpaceAR(M).add(cc.v2(0,0)),this.dict["f29086.csm"].position=this.dict["f29086.csm"].parent.convertToNodeSpaceAR(M).add(cc.v2(0,0)),this.dict["f29086.48"].scale=1,this.dict["f29086.csm"].scale=.8,this.updateHp(),this.onTouch(),this.isCanStartClick=!0,[2]})})},e.prototype.checkHasCarMove=function(){for(var t=!1,e=this.carRoot.children.concat(this.turntableCarArr),o=0;o<e.length;o++){var i=e[o];if(i.getComponent(l.default).carState!=c.CarState.Idle&&i.getComponent(l.default).carState!=c.CarState.Normal&&i.getComponent(l.default).carState!=c.CarState.Parking){t=!0;break}}return t},e.prototype.checkHasCarMoveAmount=function(){for(var t=0,e=this.carRoot.children.concat(this.turntableCarArr),o=0;o<e.length;o++){var i=e[o];i&&cc.isValid(i,!0)&&i.active&&i.getComponent(l.default).carState!=c.CarState.Idle&&i.getComponent(l.default).carState!=c.CarState.OutParking&&(t+=1)}return t},e.prototype.onTouch=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this);for(var t=0;t<this.dict.parkingRoot.children.length;t++){var e=this.dict.parkingRoot.children[t];e.getChildByName("videoLock")&&e.on(cc.Node.EventType.TOUCH_START,this.touchStart_parking,this)}},e.prototype.fun_unlockNewPos=function(){for(var t=0;t<this.dict.parkingRoot.children.length;t++){var e=this.dict.parkingRoot.children[t];if(e.getChildByName("videoLock"))return this.unlockParkingTarget=e,e.getChildByName("videoLock").destroy(),e.getChildByName("empty").active=!0,e.isEmpty=!0,this.parkingNodes.push(e),void this.playUnlockSpine(e)}},e.prototype.touchStart_parking=function(t){var e=this;if(!this.isWin&&!this._removeStage){var o=t.target;v.Platform.showRewardAds(function(t){0==t&&o.getChildByName("videoLock")&&(o.getChildByName("videoLock").destroy(),o.getChildByName("empty").active=!0,o.isEmpty=!0,e.parkingNodes.push(o),cc.game.emit("gamelog_Thinking",y.ShuShuConst.reward_btn,{lv:_.User.getTempData(C.TempData.CURRENT_LEVEL_ID),mode:_.User.getTempData(C.TempData.CURRENT_MODE),queue:_.User.getTempData(C.TempData.CURRENT_LEVEL),id:1,sort:b.default.get(S.default.ConfigSuffix)}),e.playUnlockSpine(o))})}},e.prototype.playUnlockSpine=function(t){var e=cc.instantiate(this.dict.jiesuo);this.node.addChild(e);var o=t.convertToWorldSpaceAR(cc.v2(0,0)),i=this.node.convertToNodeSpaceAR(o);e.position=i,e.getComponent(sp.Skeleton).premultipliedAlpha=!1,e.getComponent(sp.Skeleton).setAnimation(0,"animation",!1);var n=t.getChildByName("unlockTips");n&&(n.removeFromParent(),n.active=!1),cc.game.emit("unlockVideoLock",this.func_hasLockParking())},e.prototype.func_unlockParking=function(){this.playUnlockSpine(this.unlockParkingTarget),this.unlockParkingTarget.getChildByName("videoLock").destroy(),this.unlockParkingTarget.getChildByName("empty").active=!0,this.unlockParkingTarget.isEmpty=!0,this.parkingNodes.push(this.unlockParkingTarget)},e.prototype.touchStart=function(t){if(this.isCanStartClick){t.target;var e=t.getLocation();if(this.carparkIng)return console.log("\u9650\u5236\u8f66\u5e93\u8f66\u70b9\u51fb");for(var o=this.carRoot.children.concat(this.turntableCarArr),i=0;i<o.length;i++){var n=o[i],r=n.getChildByName("car").getComponent(cc.PolygonCollider);if(n.active&&cc.Intersection.pointInPolygon(e,this.getWPosByPolygon(r))){if(this._touchBegin=!0,this._removeStage&&!this._removeClick&&n.getComponent(l.default).carState==c.CarState.Idle&&!n.obliqueHead&&!n.getComponent(l.default).isFireEngine)return void this.remove(n);if(console.log("\u65b0\u589e\u9650\u5236\u5feb\u901f\u70b9\u51fb",this.moveCarAmount,this.parkingNodes.length),this.moveCarAmount>=this.parkingNodes.length)return console.log("\u9650\u5236\u5feb\u901f\u70b9\u51fb"),this.show("\u9700\u8981\u89e3\u9501\u66f4\u591a\u70ae\u53f0\u4f4d\u7f6e");var a=n.getComponent(l.default).nextCar,s=n.getComponent(l.default).prevCar;if((a||s)&&this.moveCarAmount>=this.parkingNodes.length-1)return console.log("\u9650\u5236\u5feb\u901f\u70b9\u51fb2"),this.show("\u9700\u8981\u4e24\u4e2a\u505c\u8f66\u4f4d",.8,1);if(255!=n.opacity)return;if(n.getChildByName("lock"))return void n.runAction(n.getComponent(l.default).shackAction(.1,2));if(n.isScaleAnim)return;if(this.isSortAnim)return;if(n.isCarPark&&!n.isWen)return console.log("\u9650\u5236\u8f66\u5e93\u8f66,\u6ca1\u505c\u7a33");if(!n.getComponent(l.default).isCanClick)return;if(n.getComponent(l.default).carState!=c.CarState.Idle)return;if(n.obliqueHead)return void n.runAction(this.shackAction(.1,2));if(this.dict.hand&&this.dict.hand.active&&(this.guidedNodes.push(n),this.currentGuideNode==n)){for(var h=!1,d=0;d<this.guideNodes.length;d++){var u=this.guideNodes[d];if(-1==this.guidedNodes.indexOf(u)){this.currentGuideNode=u,this.handPos(),h=!0;break}}h||(this.dict.hand.active=!1,this.dict.handText.active=!1,this.dict.handText.parent.active=!1)}var p=!1;for(d=0;d<this.parkingNodes.length;d++)if(this.parkingNodes[d].isEmpty){p=!0;break}if(!p)return console.log("\u6240\u6709\u8f66\u4f4d\u90fd\u88ab\u5360\u7528\u4e86"),this.show("\u76ee\u524d\u8f66\u4f4d\u5df2\u6ee1",.8,1);if(a||s){var g=0;for(d=0;d<this.parkingNodes.length;d++)this.parkingNodes[d].isEmpty&&(g+=1);if(g<=1)return console.log("\u62c9\u94fe\u8f66-\u6240\u6709\u8f66\u4f4d\u90fd\u88ab\u5360\u7528\u4e86"),this.show("\u9700\u8981\u4e24\u4e2a\u505c\u8f66\u4f4d",.8,1)}if(this.checkHasCarMoveAmount()>=this.parkingNodes.length)return console.log("\u6709\u76f8\u7b49\u4e8e\u8f66\u4f4d\u603b\u91cf\u7684\u8f66\u5728\u8fd0\u52a8\uff0c\u65e0\u6cd5\u51fa\u8f66"),this.show("\u9700\u8981\u89e3\u9501\u66f4\u591a\u70ae\u53f0\u4f4d\u7f6e");if(console.log("\u6709"+this.checkHasCarMoveAmount()+"\u8f86\u8f66\u5728\u52a8\uff01",this.parkingNodes.length),(a||s)&&this.parkingNodes.length-this.checkHasCarMoveAmount()<=1)return console.log("\u62c9\u94fe\u8f66\u4e0d\u80fd\u51fa\u8f66"),this.show("\u9700\u8981\u89e3\u9501\u66f4\u591a\u70ae\u53f0\u4f4d\u7f6e");n.stopAllActions(),n.isTransportBox&&this.dict.transportLayer.getComponent(f.default).setTransportCarNoMove(n);var m=n.convertToWorldSpaceAR(cc.v2(0,2250)),v=n.parent.convertToNodeSpaceAR(m);n.getComponent(l.default).otherCarNode=this.getOtherCarByDistance(n),n.getComponent(l.default).oldPos=n.position,a&&(a.getComponent(l.default).otherCarNode=this.getOtherCarByDistance(a,!0),a.getComponent(l.default).oldPos=a.position),s&&(s.getComponent(l.default).otherCarNode=this.getOtherCarByDistance(s,!0),s.getComponent(l.default).oldPos=s.position),n.getComponent(l.default).carState==c.CarState.Idle&&(n.getComponent(l.default).carState=c.CarState.Normal,n.getComponent(l.default).isFireEngine||(this.moveCarAmount+=1),cc.tween(n).to(2250/n.getComponent(l.default).speed,{position:v}).start()),n.isTransportBox||n.getComponent(l.default).isUTransportCar||1!=n.getComponent(l.default).path||(this.addTailGasSpine(n),this.playRemoteSound("audio/f27312/f27312_Engine2"));break}}}},e.prototype.checkHasCollision=function(t){var e,o,i,n,r,a,s=t.width,h=t.height;e=t.convertToWorldSpaceAR(cc.v2(-s/2,-h)),o=t.convertToWorldSpaceAR(cc.v2(-s/2,2250)),i=t.convertToWorldSpaceAR(cc.v2(s/2,-h)),n=t.convertToWorldSpaceAR(cc.v2(s/2,2250)),r=t.convertToWorldSpaceAR(cc.v2(0,-h)),a=t.convertToWorldSpaceAR(cc.v2(0,2250));for(var d=this.carRoot.children.concat(this.turntableCarArr),u=0;u<d.length;u++){var p=d[u];if(p&&p!=t&&p.getComponent(l.default).carState==c.CarState.Idle&&p.active&&!p.isTransportBox){var f,g,m,v,y,_,C=p.width,b=p.height;if(f=p.convertToWorldSpaceAR(cc.v2(-C/2,-b)),g=p.convertToWorldSpaceAR(cc.v2(-C/2,0)),m=p.convertToWorldSpaceAR(cc.v2(C/2,-b)),v=p.convertToWorldSpaceAR(cc.v2(C/2,0)),y=p.convertToWorldSpaceAR(cc.v2(C/2+1,0)),_=p.convertToWorldSpaceAR(cc.v2(-C/2-1,0)),cc.Intersection.lineLine(e,o,f,g)||cc.Intersection.lineLine(e,o,m,v)||cc.Intersection.lineLine(i,n,f,g)||cc.Intersection.lineLine(i,n,m,v)||cc.Intersection.lineLine(e,o,y,_)||cc.Intersection.lineLine(r,a,y,_))return!0}}return!1},e.prototype.addTailGasSpine=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(){return e=cc.instantiate(this.dict.tailGas),t.addChild(e),e.position=cc.v2(0,-t.height),e.getComponent(h.default)&&(e.getComponent(h.default).active=!0),[2]})})},e.prototype.getWPosByPolygon=function(t){for(var e=t.points,o=[],i=0;i<e.length;i++){var n=cc.v2(e[i].x+t.offset.x,e[i].y+t.offset.y),r=t.node.convertToWorldSpaceAR(n);o.push(r)}return o},e.prototype.getRandomDistinctElements=function(t,e){for(var o=[],i=0;i<e;i++){var n=Math.floor(Math.random()*(t.length-i));o.includes(t[n])||(o.push(t[n]),t[n]=t[t.length-i-1])}return o},e.prototype.setCarColorImg=function(t,e){var o,i,n=t.getComponent(l.default);n.carColor=e,this.colorPersonArr[e]||(this.colorPersonArr[e]=0),this.colorPersonArr[e]+=n.seatTotalAmount,n.colorImgName=e+1,n.dirImgName=c.CarDirImg[Math.round(Math.abs(t.angle))],n.lenImgName=c.CarLenImg[n.seatTotalAmount],o="f29086_"+c.getCarImgByColor(t,e),i="f29086_"+c.getCarBodyImgByColor(t,e),t.parent.active=!0,t.active=!0,t.getChildByName("car").getComponent(cc.Sprite).spriteFrame=this.box2SpriteAtlas.getSpriteFrame(o),t.getChildByName("body")&&(t.getChildByName("body").getComponent(cc.Sprite).spriteFrame=this.box2SpriteAtlas.getSpriteFrame(i)),this.levelDataJSON.carWeight[n.path]||(this.levelDataJSON.carWeight[n.path]=0),t.isCarPark&&(t.active=!1)},e.prototype.updateCarWeight=function(){var t=this;this.carWeight=new Array(this.colorTypeAmount).fill(0);for(var e=this.carRoot.children.concat(this.turntableCarArr),o=function(o){var n=e[o];if(n&&n.getComponent(l.default)&&n.getComponent(l.default).carState==c.CarState.Idle&&!n.isTransportBox&&!n.getComponent(l.default).isUTransportCar){n.path=null;var r=i.getPath(n);n.getComponent(l.default).path=r,1==r&&n.getComponent(l.default).isBlackCar&&!n.isNoBlack&&(n.isScaleAnim=!0,cc.tween(n).to(.2,{scale:1.2}).to(.2,{scale:1}).call(function(){n.isScaleAnim=!1,n.getChildByName("dir").active=!1;var e="texture/"+t.folder+"/"+t.folder+"_3";128==Math.round(Math.abs(n.angle))?e="texture/"+t.folder+"/"+t.folder+"_4":90==Math.round(Math.abs(n.angle))?e="texture/"+t.folder+"/"+t.folder+"_2":0==Math.round(Math.abs(n.angle))&&(e="texture/"+t.folder+"/"+t.folder+"_1"),cc.resources.load(e,function(t,e){t||(n.getChildByName("dir").active=!0,e&&(n.getChildByName("dir").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e)))});var o=n.getComponent(l.default),i=""+o.colorImgName+o.dirImgName+o.lenImgName,r="texture/"+t.folder+"/"+t.folder+"_"+i;n.getChildByName("car").active=!1,n.isNoBlack=!0,cc.resources.load(r,function(t,e){t||(n.getChildByName("car").active=!0,e&&(n.getChildByName("car").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e)))})}).start()),i.isDebug&&n.getChildByName("path")&&(n.getChildByName("path").getComponent(cc.Label).string=""+r);var a=i.levelDataJSON.carWeight[r-1];a||(a=1),i.carWeight[n.getComponent(l.default).carColor]+=a*n.getComponent(l.default).emptySeatAmount}},i=this,n=0;n<e.length;n++)o(n)},e.prototype.createPerson=function(t,e){void 0===t&&(t=!1);for(var o=0,i=0;i<this.currentPersonColorAmount.length;i++)o+=u=this.currentPersonColorAmount[i];if(this.curCreatePersonAmount=o,o>=this.allPersonAmount2){var n,r;this.sortPersonNodes[this.sortPersonNodes.length-1].longwei||((n=cc.instantiate(this.dict.longwei)).getComponent(d.default).dragonColor=1,this.dragonRoot.addChild(n,0),n.longwei=!0,n.position=cc.v3(this._mapConfig[0][0],this._mapConfig[0][1]),n._moveIndex=0,n[this._mBodyMoveDis]=this._curLastBoxItemNode[this._mBodyMoveDis]-(this._curLastBoxItemNode.longtou?1.7*this._keepDistance:1.5*this._keepDistance),n[this._mBodyMoveBackDis]=0,n[this._mBodyEven]=!0,n.active=!1,this.changeDragonSkin(n,function(){n.active=!0}),this.sortPersonNodes.push(n),this._curLastBoxItemNode=n),this.personPosRoot2&&!this.sortPersonNodes2[this.sortPersonNodes2.length-1].longwei&&((r=cc.instantiate(this.dict.longwei)).getComponent(d.default).dragonColor=1,this.dragonRoot.addChild(r,0),r.longwei=!0,r.position=cc.v3(this._mapConfig[0][0],this._mapConfig[0][1]),r._moveIndex=0,r[this._mBodyMoveDis]=this._curLastBoxItemNode2[this._mBodyMoveDis]-(this._curLastBoxItemNode2.longtou?1.7*this._keepDistance:1.5*this._keepDistance),r[this._mBodyMoveBackDis]=0,r[this._mBodyEven]=!1,r.active=!1,this.changeDragonSkin(r,function(){r.active=!0}),this.sortPersonNodes2.push(r),this._curLastBoxItemNode2=r)}else{for(;this.sortPersonNodes.length+this.sortPersonNodes2.length<this.uiShowPersonAmount;){var a=this.getPersonColor(),s=(i=this.colorPersonIndexArr[a],this.colorPersonAmountArr[a][i]),c=Math.floor(o/this.allPersonAmount2*100);if(this.isReviveAmount&&(s=1),null!=a){if(this.colorPersonAmountArrIndex[a][i]==this.lastExtraIndexArr[a]?this.extraWeight[a]=this.extraWeightConst:this.extraWeight[a]=0,this.lastExtraIndexArr[a]=this.colorPersonAmountArrIndex[a][i],!s){for(var l=[],h=0;h<this.colorPersonIndexArr.length;h++){var u=this.colorPersonIndexArr[h];this.colorPersonAmountArr[h][u]&&l.push(h)}if(!l.length)return void(e&&e());a=l[this.randomNum(0,l.length-1)],i=this.colorPersonIndexArr[a],s=this.colorPersonAmountArr[a][i]}this.currentPersonColorAmount[a]+=s,this.isReviveAmount||(this.colorPersonIndexArr[a]+=1);for(var p=!0,f=0;f<s;f++){var g=0;if(this._itemConfig)for(var m=0;m<this._itemConfig.length;m++){var v=this._itemConfig[m];if(c>=v[0]&&c<=v[1]&&!this._itemCreatedList.includes(m)){g=v[2],this._itemCreatedList.push(m);break}}if(this.personPosRoot2&&(this.sortPersonNodes.length||this.sortPersonNodes2.length?this.sortPersonNodes.length&&!this.sortPersonNodes2.length?p=!1:this.sortPersonNodes.length&&this.sortPersonNodes2.length&&(p=!(this.sortPersonNodes.length>this.sortPersonNodes2.length)):p=!0),t){var y=void 0;y=cc.instantiate(this.dict.dragonPrefab),this.dragonRoot.addChild(y),y.getComponent(d.default).dragonColor=a,this.setColorPersonImg(a,y),y.position=cc.v3(this._mapConfig[0][0],this._mapConfig[0][1]),y._moveIndex=0,y[this._itemType]=g,y[this._mBodyMoveBackDis]=0,(_=this.createItem(g))&&(_.position=y.position,y[this._itemNode]=_,_[this._itemDepend]=y,this._itemNodeList.push(_)),this.createNum++,y.zIndex=999-this.createNum,p?(y[this._mBodyMoveDis]=this._curLastBoxItemNode[this._mBodyMoveDis]-(this._curLastBoxItemNode.longtou?1.7*this._keepDistance:1.5*this._keepDistance),y[this._mBodyEven]=!0,this.sortPersonNodes.push(y),this._curLastBoxItemNode=y):(y[this._mBodyMoveDis]=this._curLastBoxItemNode2[this._mBodyMoveDis]-(this._curLastBoxItemNode2.longtou?1.7*this._keepDistance:1.5*this._keepDistance),y[this._mBodyEven]=!1,this.sortPersonNodes2.push(y),this._curLastBoxItemNode2=y)}else{var _;y=void 0,y=cc.instantiate(this.dict.dragonPrefab),this.dragonRoot.addChild(y),y.getComponent(d.default).dragonColor=a,this.setColorPersonImg(a,y),y.position=cc.v3(this._mapConfig[0][0],this._mapConfig[0][1]),y._moveIndex=0,y[this._itemType]=g,y[this._mBodyMoveBackDis]=0,(_=this.createItem(g))&&(_.position=y.position,y[this._itemNode]=_,_[this._itemDepend]=y,this._itemNodeList.push(_)),this.createNum++,y.zIndex=999-this.createNum,p?(y[this._mBodyMoveDis]=this._curLastBoxItemNode[this._mBodyMoveDis]-(this._curLastBoxItemNode.longtou?1.7*this._keepDistance:1.5*this._keepDistance),y[this._mBodyEven]=!0,this.sortPersonNodes.push(y),this._curLastBoxItemNode=y):(y[this._mBodyMoveDis]=this._curLastBoxItemNode2[this._mBodyMoveDis]-(this._curLastBoxItemNode2.longtou?1.7*this._keepDistance:1.5*this._keepDistance),y[this._mBodyEven]=!1,this.sortPersonNodes2.push(y),this._curLastBoxItemNode2=y)}}}}e&&e(),this.uiShowPersonAmount&&(this.sortPersonNodes2.length&&this.sortPersonNodes2[0].longtou&&this.sortPersonNodes2[0].setSiblingIndex(999),this.sortPersonNodes.length&&this.sortPersonNodes[0].longtou&&this.sortPersonNodes[0].setSiblingIndex(999))}},e.prototype.createItem=function(t){if(!t)return null;var e;(e=this._itemPoolList.length?this._itemPoolList.shift():cc.instantiate(this.dict.itemPrefab)).getChildByName("itemImg").getComponent(cc.Sprite).spriteFrame=this.box2SpriteAtlas.getSpriteFrame("f29086_"+(t+5e3)),e.getChildByName("itemName").getComponent(cc.Label).string=w.default.formatStr(this._itemNameList[t-1]),e.parent=this.dict.itemRoot,e.active=!0;var o=e.getChildByName("spine");if(o&&(o.active=!1),1==t||5==t)if(e.getChildByName("spine"))o.active=!0;else{var i=cc.instantiate(this.dict["f29086.jn_texiao"]);i.name="spine",i.parent=e,i.active=!0,i.position=cc.v2(0,90)}return e},e.prototype.update=function(t){if(game.dragonMoving&&(t=.016,!this.isWin&&this.createFinish&&!this.isSorting&&!this._removeStage&&(this.sortPersonNodes.length||this.sortPersonNodes2.length))){var e=this.sortPersonNodes[0],o=this.sortPersonNodes2[0],i=c.MapParam[this.mapType].noTouchAndStop;if(-29095==this.levelID&&(i=c.MapParam[0].noTouchAndStop),!(!this._touchBegin&&e&&e._moveIndex>=i)){if(this._roleLevel2Count&&this._roleLevel2CurTime<=this._roleLevel2Time&&this._roleLevel>=2&&(this._roleLevel2CurTime+=t,this._roleLevel2CurTime>=this._roleLevel2Time&&(!this._roleLevel5Count&&this._roleLevel>=5?(this._roleLevel5Count++,this.itemActive(2),this.isDragonAttack&&(this.isDragonAttack=!1,this.isDragonAttacking=!1,this.sortPersonNodes.length&&(this.sortPersonNodes[0][this._moveEnd]=!1,this.sortPersonNodes[0].stopAllActions())),this.isDragonAttack2&&(this.isDragonAttack2=!1,this.isDragonAttacking2=!1,this.sortPersonNodes2.length&&(this.sortPersonNodes2[0][this._moveEnd]=!1,this.sortPersonNodes2[0].stopAllActions())),this.hideWudi(!0)):this.hideWudi())),this._roleLevel10Count&&this._roleLevel10CurTime<=this._roleLevel10Time&&this._roleLevel>=10&&(this._roleLevel10CurTime+=t,this._roleLevel10CurTime>=this._roleLevel10Time)){for(var n=0;n<this.sortPersonNodes.length;n++)(C=this.sortPersonNodes[n]).parent&&(C.longtou||C.longwei?this.hideItem1BigSpine(C):this.hideItem1SmallSpine(C));for(n=0;n<this.sortPersonNodes2.length;n++)(C=this.sortPersonNodes2[n]).parent&&(C.longtou||C.longwei?this.hideItem1BigSpine(C):this.hideItem1SmallSpine(C))}if(this._slowStart&&(this._slowCur+=t,this._slowCur>=this._slowTime&&(this._slowCur=0,this._slowStart=!1)),this._item1Start&&(this._item1Cur+=t,this._item1Cur>=this._item1Time)){for(this._item1Cur=0,this._item1Start=!1,n=0;n<this.sortPersonNodes.length;n++)(C=this.sortPersonNodes[n]).parent&&(C.longtou||C.longwei?this.hideItem1BigSpine(C):this.hideItem1SmallSpine(C));for(n=0;n<this.sortPersonNodes2.length;n++)(C=this.sortPersonNodes2[n]).parent&&(C.longtou||C.longwei?this.hideItem1BigSpine(C):this.hideItem1SmallSpine(C))}if(this._item2Start&&(this._item2Cur+=t,this._item2Cur>=this._item2Time&&(this._item2Cur=0,this._item2Start=!1)),this._item3Start&&(this._item3Cur+=t,this._item3Cur>=this._item3Time&&(this._item3Cur=0,this._item3Start=!1)),this._item4Start&&(this._item4Cur+=t,this._item4Cur>=this._item4Time))for(this._item4Cur=0,this._item4Start=!1,n=0;n<this.cannonRoot.children.length;n++){var r=this.cannonRoot.children[n];this.hideItem4Spine(r)}if(this._item5Start&&(this._item5Cur+=t,this._item5Cur>=this._item5Time))for(this._item5Cur=0,this._item5Start=!1,n=0;n<this.cannonRoot.children.length;n++)r=this.cannonRoot.children[n],this.hideItem5Spine(r);this.updateItemTips();var a=this.sortPersonNodes[this.sortPersonNodes.length-1];if(this.sortPersonNodes2[this.sortPersonNodes2.length-1],this.isReviveBack){if(!this.isReviveSort&&(e&&0==e[this._mBodyMoveBackDis]||!e)&&(o&&0==o[this._mBodyMoveBackDis]||!o)){if(e&&0==e[this._mBodyMoveBackDis]){for(n=this.sortPersonNodes.length-1;n>=0;n--)!(C=this.sortPersonNodes[n]).parent||C.longtou||C.longwei||C[this._turnBackDestroy]&&((s=C[this._itemNode])&&(s.removeFromParent(),s[this._itemDepend]=null,this._itemNodeList.splice(this._itemNodeList.indexOf(s),1),this._itemPoolList.push(s)),this.sortPersonNodes.splice(n,1),C.destroy());for(n=0;n<this.sortPersonNodes.length;n++)(C=this.sortPersonNodes[n]).parent&&(C[this._mBodyMoveDis]=n*-(0==n?1.7*this._keepDistance:1.5*this._keepDistance),C[this._mBodyMoveBackDis]=0);this._curLastBoxItemNode=this.sortPersonNodes[this.sortPersonNodes.length-1],e.getComponent(sp.Skeleton).setAnimation(0,"idle1",!0)}if(o&&0==o[this._mBodyMoveBackDis]){for(n=this.sortPersonNodes2.length-1;n>=0;n--){var s;!(C=this.sortPersonNodes2[n]).parent||C.longtou||C.longwei||C[this._turnBackDestroy]&&((s=C[this._itemNode])&&(s.removeFromParent(),s[this._itemDepend]=null,this._itemNodeList.splice(this._itemNodeList.indexOf(s),1),this._itemPoolList.push(s)),this.sortPersonNodes2.splice(n,1),C.destroy())}for(n=0;n<this.sortPersonNodes2.length;n++)(C=this.sortPersonNodes2[n]).parent&&(C[this._mBodyMoveDis]=n*-(0==n?1.7*this._keepDistance:1.5*this._keepDistance),C[this._mBodyMoveBackDis]=0);this._curLastBoxItemNode2=this.sortPersonNodes2[this.sortPersonNodes2.length-1],o.getComponent(sp.Skeleton).setAnimation(0,"idle1",!0)}return void((e&&0==e[this._mBodyMoveBackDis]||!e)&&(o&&0==o[this._mBodyMoveBackDis]||!o)&&(this.isReviveBack=!1,this.checkRes()))}return this.moveInUpdate(t,0),this.moveInUpdate2(t,0),void this.itemNodeMove()}(a[this._mBodyMoveDis]>0&&!a.longwei||a.longtou)&&(this.uiShowPersonAmount+=1,this.createPerson());var l=0;for(n=0;n<this._speedIndexList.length;n++)(k=this._speedIndexList[n])<=e._moveIndex?l=n:e._moveIndex>=this._speedIndexList[this._speedIndexList.length-1]&&(l=this._speedIndexList.length-1);var h=1/this._moveSpeed[l]*1e5*t,u=0;if(o)for(n=0;n<this._speedIndexList.length;n++)(k=this._speedIndexList[n])<=o._moveIndex?u=n:o._moveIndex>=this._speedIndexList[this._speedIndexList.length-1]&&(u=this._speedIndexList.length-1);var p=1/this._moveSpeed[u]*1e5*t;if(0!=h){if(e&&(e._moveIndex>=this._mapConfig.length-1&&e.position.sub(this._curvePoints[this._curvePoints.length-1].position).mag()<=0&&0==e[this._mBodyMoveBackDis]?(e[this._moveEnd]=!0,this.isDragonAttack=!0,this.doDragonAttack()):(this.checkWarning(e._moveIndex),this.checkRole(e._moveIndex))),o&&(o._moveIndex>=this._mapConfig2.length-1&&o.position.sub(this._curvePoints2[this._curvePoints2.length-1].position).mag()<=0&&0==o[this._mBodyMoveBackDis]?(o[this._moveEnd]=!0,this.isDragonAttack2=!0,this.doDragonAttack()):(this.checkWarning(o._moveIndex),this.checkRole(o._moveIndex))),this.moveInUpdate(t,h),o&&this.moveInUpdate2(t,p),!this.isReviveBack&&!this.isSorting)for(n=0;n<this.cannonRoot.children.length;n++){r=this.cannonRoot.children[n];var f,g,m=void 0,v=null,y=null;this.sortPersonNodes.length>2&&(v=this.sortPersonNodes[0]),this.sortPersonNodes2.length>2&&(y=this.sortPersonNodes2[0]),g=(f=v&&y?v._moveIndex>=y._moveIndex:!!v)?this.sortPersonNodes.length:this.sortPersonNodes2.length;for(var _=0;_<g;_++){var C;if(!(C=f?this.sortPersonNodes[_]:this.sortPersonNodes2[_]).longtou&&!C.longwei&&!C[this._bulletTarget]&&C[this._mBodyMoveDis]>0&&(this._item5Start||this.checkCannonAttack(C._moveIndex))&&C.getComponent(d.default).dragonColor==r[this._cannonType]){m=C;break}}1==r[this._cannonState]&&m&&this.cannonAttack(r,m)}for(n=this._bulletMoveList.length-1;n>=0;n--){var b=this._bulletMoveList[n],S=b[this._dragonTarget];if(S&&S.parent)if(b.position.sub(S.position).mag()<=10)this.bulletArrived(b,n);else{var w={x:S.x-b.x,y:S.y-b.y},A=Math.sqrt(w.x*w.x+w.y*w.y);A>0&&(w.x/=A,w.y/=A);var k=10;this._item4Start&&(k+=.3*k),b.x+=w.x*k,b.y+=w.y*k;var P=Math.atan2(w.y,w.x)-Math.atan2(-1,0);b.angle=P*(180/Math.PI)-180}}this.itemNodeMove()}}}},e.prototype.moveInUpdate=function(t,e){var o;if(!this.isWin){var i=this.sortPersonNodes[0];if(i&&!i[this._moveEnd])for(var r=0;r<this.sortPersonNodes.length;r++){var a=this.sortPersonNodes[r];if(!this.isReviveBack||0!=a[this._mBodyMoveBackDis]){var s,c=!1;if((s=null!==(o=a[this._mBodyMoveBackDis])&&void 0!==o?o:0)<0&&(c=!0,s+=l=this.getMoveDis(e,this.isReviveBack?n.revive:n.back),a[this._mBodyMoveDis]-=l-(s>0?s:0),a[this._mBodyMoveBackDis]=Math.min(0,s)),this._item1Start||this._roleLevel10Count&&this._roleLevel10CurTime<=this._roleLevel10Time){var l=this.getMoveDis(e,n.item1Start);a[this._mBodyMoveDis]+=l}else this._slowStart?(l=this.getMoveDis(e,n.slowStart),a[this._mBodyMoveDis]+=l):this._item3Start?(l=this.getMoveDis(e,n.item3Start),a[this._mBodyMoveDis]+=l):(l=this.getMoveDis(e),a[this._mBodyMoveDis]+=l);a[this._mBodyMoveDis]>0&&this.updateBodyPos(a,c)}}}},e.prototype.moveInUpdate2=function(t,e){var o;if(!this.isWin){var i=this.sortPersonNodes2[0];if(i&&!i[this._moveEnd])for(var r=0;r<this.sortPersonNodes2.length;r++){var a=this.sortPersonNodes2[r];if(!this.isReviveBack||0!=a[this._mBodyMoveBackDis]){var s,c=!1;if((s=null!==(o=a[this._mBodyMoveBackDis])&&void 0!==o?o:0)<0&&(c=!0,s+=l=this.getMoveDis(e,this.isReviveBack?n.revive:n.back),a[this._mBodyMoveDis]-=l-(s>0?s:0),a[this._mBodyMoveBackDis]=Math.min(0,s)),this._item1Start||this._roleLevel10Count&&this._roleLevel10CurTime<=this._roleLevel10Time){var l=this.getMoveDis(e,n.item1Start);a[this._mBodyMoveDis]+=l}else this._slowStart?(l=this.getMoveDis(e,n.slowStart),a[this._mBodyMoveDis]+=l):this._item3Start?(l=this.getMoveDis(e,n.item3Start),a[this._mBodyMoveDis]+=l):(l=this.getMoveDis(e),a[this._mBodyMoveDis]+=l);a[this._mBodyMoveDis]>0&&this.updateBodyPos(a,c)}}}},e.prototype.getMoveDis=function(t,e){void 0===e&&(e=this._curMoveState);var o=this.getAddSpeed();return e==n.normal?t=t:e==n.back?t<5?t=5:t*=3:e==n.slowStart?t*=.2:e==n.item3Start?t*=.7:e==n.item1Start?t=0:e==n.revive&&(t=30),o&&(t*=1+o/100),t},e.prototype.getAddSpeed=function(){if(!this._addSpeed[0]&&!this._addSpeed[1])return 0;var t=0,e=Math.floor(this.curCreatePersonAmount/this.allPersonAmount2*100);return e>=this._addSpeed[0]&&e<=this._addSpeed[1]?t+=Math.floor(Math.floor(e-this._addSpeed[0])/this._addSpeed[2])*this._addSpeed[3]:e>=this._addSpeed[1]&&(t+=Math.floor(Math.floor(this._addSpeed[1]-this._addSpeed[0])/this._addSpeed[2])*this._addSpeed[3]),t},e.prototype.updateBodyPos=function(t,e){var o;void 0===e&&(e=!1),o=t[this._mBodyEven]?this.getPosByDis(t[this._mBodyMoveDis]):this.getPos2ByDis(t[this._mBodyMoveDis]),Math.abs(t.y-o[0].y)<=10&&(t._moveIndex>o[2].mapIndex?t.x>o[0].x?(t.scaleX=.9,t.longtou&&this.dict.hpPrefab&&(this.dict.hpPrefab.scaleX=-1)):t.x<o[0].x&&(t.scaleX=-.9,t.longtou&&this.dict.hpPrefab&&(this.dict.hpPrefab.scaleX=1)):t._moveIndex<o[2].mapIndex&&(t.x>o[0].x?(t.scaleX=-.9,t.longtou&&this.dict.hpPrefab&&(this.dict.hpPrefab.scaleX=1)):t.x<o[0].x&&(t.scaleX=.9,t.longtou&&this.dict.hpPrefab&&(this.dict.hpPrefab.scaleX=-1)))),t._moveIndex=o[2].mapIndex,t.setPosition(o[0])},e.prototype.getPosByDis=function(t){if(t<0)return this._curvePoints.length>0?[this._curvePoints[0].position,this._curvePoints[0],this._curvePoints[1],1]:[cc.Vec2.ZERO];for(var e=t,o=1;o<this._curvePoints.length;o++){var i=this._curvePoints[o-1],n=this._curvePoints[o];if(e<=n.distance){var r=e/n.distance,a=n.position.sub(i.position);return[i.position.add(a.normalize().mulSelf(a.len()*r)),i,n,r]}e-=n.distance}return[this._curvePoints[this._curvePoints.length-1].position,this._curvePoints[this._curvePoints.length-2],this._curvePoints[this._curvePoints.length-1],1]},e.prototype.getPos2ByDis=function(t){if(t<0)return this._curvePoints2.length>0?[this._curvePoints2[0].position,this._curvePoints2[0],this._curvePoints2[1],1]:[cc.Vec2.ZERO];for(var e=t,o=1;o<this._curvePoints2.length;o++){var i=this._curvePoints2[o-1],n=this._curvePoints2[o];if(e<=n.distance){var r=e/n.distance,a=n.position.sub(i.position);return[i.position.add(a.normalize().mulSelf(a.len()*r)),i,n,r]}e-=n.distance}return[this._curvePoints2[this._curvePoints2.length-1].position,this._curvePoints2[this._curvePoints2.length-2],this._curvePoints2[this._curvePoints2.length-1],1]},e.prototype.moveBodyBack=function(){var t=this;if(this.sortPersonNodes.length){var e=.5*this.sortPersonNodes[0][this._mBodyMoveDis];this.sortPersonNodes.forEach(function(o){o[t._mBodyMoveBackDis]-=e})}if(this.sortPersonNodes2.length){var o=.5*this.sortPersonNodes2[0][this._mBodyMoveDis];this.sortPersonNodes2.forEach(function(e){e[t._mBodyMoveBackDis]=-o})}},e.prototype.moveBodyRevive=function(){var t=this;this.sortPersonNodes.length&&(this.sortPersonNodes[0][this._mBodyMoveDis],this.sortPersonNodes.forEach(function(e){e[t._mBodyMoveBackDis]-=e[t._mBodyMoveDis]})),this.sortPersonNodes2.length&&(this.sortPersonNodes2[0][this._mBodyMoveDis],this.sortPersonNodes2.forEach(function(e){e[t._mBodyMoveBackDis]-=e[t._mBodyMoveDis]}))},e.prototype.removeBody=function(t){var e=this.sortPersonNodes.indexOf(t);-1!==e&&(this.sortPersonNodes.splice(e,1),this.backBodyWithPick2(t,e));var o=this.sortPersonNodes2.indexOf(t);-1!==o&&(this.sortPersonNodes2.splice(o,1),this.backBodyWithPick3(t,o))},e.prototype.backBodyWithPick2=function(t,e){var o=this;this.sortPersonNodes.slice(0,e).forEach(function(t){var e;t[o._mBodyMoveBackDis]=(null!==(e=t[o._mBodyMoveBackDis])&&void 0!==e?e:0)-1.5*o._keepDistance}),t.destroy(),this.isDragonAttack&&(this.isDragonAttack=!1,this.isDragonAttacking=!1,this.sortPersonNodes[0][this._moveEnd]=!1,this.sortPersonNodes[0].stopAllActions())},e.prototype.backBodyWithPick3=function(t,e){var o=this;this.sortPersonNodes2.slice(0,e).forEach(function(t){var e;t[o._mBodyMoveBackDis]=(null!==(e=t[o._mBodyMoveBackDis])&&void 0!==e?e:0)-1.5*o._keepDistance}),t.destroy(),this.isDragonAttack2&&(this.isDragonAttack2=!1,this.isDragonAttacking2=!1,this.sortPersonNodes2[0][this._moveEnd]=!1,this.sortPersonNodes2[0].stopAllActions())},e.prototype.itemNodeMove=function(){for(var t=0;t<this._itemNodeList.length;t++){var e=this._itemNodeList[t];e[this._itemDepend]&&(e.position=e[this._itemDepend].position)}},e.prototype.checkCannonAttack=function(t){for(var e=0;e<this.cannonAttackList.length;e++){var o=this.cannonAttackList[e];if(t>=o[0]&&t<=o[1])return!0}return!1},e.prototype.cannonAttack=function(t,e){var o=this;this.playRemoteSound(p.domain+"audio/f29086/f29086_Shoot.mp3",!1),t[this._cannonState]=2,t.parking.car.getComponent(l.default).emptySeatAmount=t.parking.car.getComponent(l.default).emptySeatAmount-1;var i={x:e.x-t.x,y:e.y-t.y},n=Math.sqrt(i.x*i.x+i.y*i.y);n>0&&(i.x/=n,i.y/=n);var r=Math.atan2(i.y,i.x)-Math.atan2(-1,0);t.getChildByName("cannon").angle=r*(180/Math.PI)-180;var a=this.getBullet();a.position=this.transformPosition(t,a).add(cc.v2(0,10)),a.getChildByName("bullet").getComponent(cc.Sprite).spriteFrame=this.box2SpriteAtlas.getSpriteFrame("f29086_"+(t[this._cannonType]+1+2200)),a.getChildByName("xiaochu").getComponent(sp.Skeleton).setSkin("skin"+(t[this._cannonType]+1)),a.active=!1,e[this._bulletTarget]=a,a[this._dragonTarget]=e,t.getChildByName("cannon").getComponent(sp.Skeleton).setAnimation(0,"attack",!1),cc.tween(t).delay(.1).call(function(){t[o._cannonNum]--,t.getChildByName("num").getComponent(cc.Label).string="x"+t[o._cannonNum],a.active=!0,o._bulletMoveList.push(a)}).start(),this._item4Start?t.getChildByName("cannon").getComponent(sp.Skeleton).timeScale=1.3:t.getChildByName("cannon").getComponent(sp.Skeleton).timeScale=1,t.getChildByName("cannon").getComponent(sp.Skeleton).setCompleteListener(function(){t.getChildByName("cannon").getComponent(sp.Skeleton).setCompleteListener(null),t[o._cannonNum]<=0?(t.getChildByName("cannon").getComponent(sp.Skeleton).setAnimation(0,"exit",!1),t.getChildByName("cannon").getComponent(sp.Skeleton).setCompleteListener(function(){t.getChildByName("cannon").getComponent(sp.Skeleton).setCompleteListener(null),t.active=!1,t.removeFromParent(!0),o._cannonList.push(t),t.parking.isEmpty=!0,t.parking.car=null,o.moveCarAmount-=1})):(t.getChildByName("cannon").getComponent(sp.Skeleton).setAnimation(0,"idle",!0),t[o._cannonState]=1)})},e.prototype.bulletArrived=function(t,e){var o=this;this.playRemoteSound(p.domain+"audio/f29086/f29086_Blow.mp3",!1),this._bulletMoveList.splice(e,1),this.allPersonAmount--,cc.game.emit("allPersonAmount",this.allPersonAmount,this.allPersonAmount2),this.uiShowPersonAmount--,this.updateHp(),t.getChildByName("bullet").active=!1,t.getChildByName("xiaochu").opacity=255,t.getChildByName("xiaochu").getComponent(sp.Skeleton).setAnimation(0,"animation",!1);var i=t[this._dragonTarget],n=i[this._itemType];n&&this.itemActive(n),cc.tween(t).delay(.1).call(function(){var t=i[o._itemNode];if(t){var e=cc.instantiate(o.dict["f29086.xiaoshi"]);e.parent=o.dict["f29086.xiaoshi"].parent,e.position=o.transformPosition(t.children[0],e),e.active=!0,e.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),e.getComponent(sp.Skeleton).setCompleteListener(function(){e.destroy()}),t.removeFromParent(),t[o._itemDepend]=null,o._itemNodeList.splice(o._itemNodeList.indexOf(t),1),o._itemPoolList.push(t)}o.hideItem1BigSpine(i),o.hideItem1SmallSpine(i),o.hideItem4Spine(i),o.hideItem5Spine(i),o.removeBody(i),o.checkRes()}).start(),t.getChildByName("xiaochu").getComponent(sp.Skeleton).setCompleteListener(function(){t.getChildByName("xiaochu").getComponent(sp.Skeleton).setCompleteListener(null),t.active=!1,o._bulletModelList.push(t)})},e.prototype.itemActive=function(t,e){switch(t){case 1:this.func_item1();break;case 2:this._item2Cur=0,this._item2Start=!0,this.moveBodyBack();break;case 3:this._item3Cur=0,this._item3Start=!0;break;case 4:this._item4Cur=0,this._item4Start=!0;for(var o=0;o<this.cannonRoot.children.length;o++){var i=this.cannonRoot.children[o];this.showItem4Spine(i)}break;case 5:this.func_item5();break;case 6:this.func_item6(e);break;case 7:this.func_item7(e)}},e.prototype.checkWarning=function(t){for(var e=c.MapParam[this.mapType].warnPoints,o=0,i=e.length-1;i>=0;i--)if(t>=e[i]){o=i+1;break}var n=0;if(this._warningIndex!=o){if(this._warningIndex=o,o&&this.func_hasLockParking()){for(var r=0;r<this.dict.parkingRoot.children.length;r++)if((s=this.dict.parkingRoot.children[r]).getChildByName("videoLock")&&s.getChildByName("videoLock").active){(l=this.dict.unlockTips).active=!0,l.parent=s,l.position=cc.v2(20,50),l.stopAllActions(),l.scale=1,cc.tween(l).to(.5,{scale:1.2}).to(.5,{scale:1}).union().repeatForever().start();break}}else if(!o||!this.func_hasLockParking())for(var a=0;a<this.dict.parkingRoot.children.length;a++){var s;if((s=this.dict.parkingRoot.children[a]).getChildByName("videoLock")&&s.getChildByName("videoLock").active){var l;(l=this.dict.unlockTips)&&(l.removeFromParent(),l.active=!1);break}}o>=e.length&&0==this._roleLevel10Count&&this._roleLevel>=10&&this.doRoleLevel10Skill(),cc.game.emit("f29086_warningIndex",this._warningIndex)}!this._warning&&o?(this._warning=!0,n=(1==o?3:2==o?1.5:0)/2,this.warnNode.stopAllActions(),cc.tween(this.warnNode).to(n,{opacity:255}).to(n,{opacity:0}).union().repeatForever().start()):this._warning&&!o&&(this.warnNode.stopAllActions(),this.warnNode.opacity=0,this._warning=!1)},e.prototype.checkRole=function(t){var e=c.MapParam[this.mapType].roleWarn;-29095==this.levelID&&(e=c.MapParam[0].roleWarn);var o=c.MapParam[this.mapType].rolePoint;t>=e[this._rolePointIndex]&&this.roleNode._moveIndex>=o[this._rolePointIndex]&&(this._rolePointIndex+=1,this.roleNode.moving=!0);var i=this.roleNode.getChildByName("role").getComponent(sp.Skeleton);this.roleNode.moving&&(this.roleMoving(),this.updateRoleHpPos(),this.roleNode._moveIndex>=o[this._rolePointIndex]&&(this.roleNode.moving=!1)),this.roleNode.moving&&"zou"!=i.animation?this.roleNode.getChildByName("role").getComponent(sp.Skeleton).setAnimation(0,"zou",!0):this.roleNode.moving||"haipa"==i.animation||this.roleNode.getChildByName("role").getComponent(sp.Skeleton).setAnimation(0,"haipa",!0)},e.prototype.roleMoving=function(){var t=this.roleNode,e=this._mapConfig,o=t._moveIndex;if(!(0===e.length||o>=e.length-1)){var i=t.position,n=e[o+1],r=cc.v2(n[0],n[1]);r=this.dict.personPosRoot.convertToWorldSpaceAR(r);var a=this.roleNode.parent.convertToNodeSpaceAR(r).add(cc.v2(0,-20));if(t._moveIndex==e.length-2&&a.addSelf(c.MapParam[this.mapType].roleOffset),!n)return t._moveIndex=e.length-1,void(t.getChildByName("role").scaleX=1);var s=a.x-i.x,l=a.y-i.y,h=Math.sqrt(s*s+l*l);if(h<=this._keepDistance)t._moveIndex++,t._moveIndex==e.length-1&&(t.getChildByName("role").scaleX=1);else{var d=this._keepDistance/h/10;t._targetPos.x=i.x+s*d,t._targetPos.y=i.y+l*d}Math.abs(t.x-t._targetPos.x)>=1&&(t.x>t._targetPos.x&&Math.abs(t.y-t._targetPos.y)<=10?t.getChildByName("role").scaleX=-1:t.x<t._targetPos.x&&Math.abs(t.y-t._targetPos.y)<=10&&(t.getChildByName("role").scaleX=1)),t._targetPos&&(t.position=t._targetPos)}},e.prototype.getBullet=function(){var t;return(t=this._bulletModelList.length?this._bulletModelList.shift():cc.instantiate(this.dict.bulletPrefab)).parent=this.dict.bulletRoot,t.angle=0,t.getChildByName("bullet").active=!0,t.getChildByName("xiaochu").opacity=0,t[this._dragonTarget]=null,t},e.prototype.getCannon=function(){var t;return(t=this._cannonList.length?this._cannonList.shift():cc.instantiate(this.dict.cannonPrefab)).getChildByName("cannon").angle=0,t.getChildByName("num").getComponent(cc.Label).string="",t.getChildByName("body").active=!0,t.active=!0,!this._item4Start&&t.getChildByName("item4Spine")&&this.hideItem4Spine(t),!this._item5Start&&t.getChildByName("item5Spine")&&this.hideItem5Spine(t),t},e.prototype.updateItemTips=function(){var t=[[this._item1Cur,1],[this._item2Cur,2],[this._item3Cur,3],[this._item4Cur,4],[this._item5Cur,5]].sort(function(t,e){return e[0]-t[0]});if(t[0][0]){var e=t[0][1],o=this._itemTipsList[e-1];o&&(this._itemTipsNode.active=!0,this._itemTipsNode.getComponent(cc.Label).string=w.default.formatStr(o+"%dS",this["_item"+e+"Time"]-Math.round(t[0][0])))}else this._itemTipsNode.active=!1},e.prototype.updateParkingWeight=function(){this.parkingWeight=new Array(this.colorTypeAmount).fill(0);for(var t=0;t<this.dict.parkingRoot.children.length;t++){var e=this.dict.parkingRoot.children[t];try{if(e.active&&e.car){var o=e.car,i=o.getComponent(l.default).carColor;if(o&&o.getComponent(l.default))for(var n=0;n<o.getChildByName("seatRoot").children.length;n++){var r=o.getChildByName("seatRoot").children[n];r.active||r.targetPerson||(this.parkingWeight[i]+=this.levelDataJSON.parkingWeight)}}}catch(a){}}},e.prototype.updateHp=function(){var t=this.allPersonAmount,e=this.allPersonAmount2;this.dict.hpCount.getComponent(cc.Label).string=""+t,this.dict.hpImg.getComponent(cc.Sprite).fillRange=t/e},e.prototype.carAnim=function(t){t.isCarAnim||(t.isCarAnim=!0,cc.tween(t.parent.parent).to(.1,{scale:.9}).to(.1,{scale:1}).call(function(){t.isCarAnim=!1}).start())},e.prototype.checkTipText=function(){for(var t=0,e=0;e<this.parkingNodes.length;e++)this.parkingNodes[e].isEmpty||(t+=1);t==this.parkingNodes.length?cc.game.emit("checkTipText",1):t==this.parkingNodes.length-1&&cc.game.emit("checkTipText",0)},e.prototype.checkRes=function(){var t=this;if(!this.isWin&&0==this.allPersonAmount){this.isWin=!0;for(var e=null,o=null,i=0;i<this.sortPersonNodes.length;i++)((n=this.sortPersonNodes[i]).longtou||n.longwei)&&(n.getComponent(sp.Skeleton).setAnimation(0,"die",!1),cc.tween(n).to(.5,{opacity:0}).start(),n.longtou&&(e=n));for(i=0;i<this.sortPersonNodes2.length;i++){var n;((n=this.sortPersonNodes2[i]).longtou||n.longwei)&&(n.getComponent(sp.Skeleton).setAnimation(0,"die",!1),cc.tween(n).to(.5,{opacity:0}).start(),n.longtou&&(o=n))}e&&this.showDragonBall(e,function(){t.roleNode.getChildByName("role").getComponent(sp.Skeleton).setAnimation(0,"shengli",!0),t.playRight()}),o&&this.showDragonBall(o)}},e.prototype.setColorPersonImg=function(t,e){e.getComponent(cc.Sprite).spriteFrame=this.box2SpriteAtlas.getSpriteFrame("f29086_"+(t+1+4e3+100*this._dragonSkin))},e.prototype.shuffleArray=function(t){for(var e,o=t.length-1;o>0;o--){var i=Math.floor(Math.random()*(o+1));e=[t[i],t[o]],t[o]=e[0],t[i]=e[1]}return t},e.prototype.getAmountByColor=function(t){if(!this.colorPersonAmountArr[t]){this.colorPersonAmountArr[t]=[];for(var e=[],o=[],i=0;i<this.carNodeArr.length;i++){var n=this.carNodeArr[i].getComponent(l.default);if(n.carColor==t){for(var r=[],a=[],s=n.seatTotalAmount;s>0;){var c=this.randomNum(1,s);r.push(c),a.push(e.length),s-=c}e.push(r),o.push(a)}}if(e.length){var h=this.flatten(e),d=this.flatten(o);this.colorPersonAmountArr[t]=h,this.colorPersonAmountArrIndex[t]=d}return e}},e.prototype.flatten=function(t){var e=this;return t.reduce(function(t,o){return Array.isArray(o)?t.concat(e.flatten(o)):t.concat(o)},[])},e.prototype.consoleWeight=function(t,e){for(var o=JSON.parse(JSON.stringify(e)),i=0;i<o.length;i++){var n=o[i];n=c.colorDes[i]+":"+n,o[i]=n}console.log(t,o)},e.prototype.getPersonColor=function(){if(this.reviveArr.length){var t=this.reviveArr.shift();return this.isReviveAmount=1,t}if(this.isReviveAmount=0,this.firstSortIndexArr.length)return this.firstSortIndexArr.shift();this.updateParkingWeight(),this.updateSortWeight();for(var e=0;e<this.colorTypeAmount;e++)this.allWeight[e]=0,this.allWeight[e]+=this.carWeight[e],this.allWeight[e]+=this.parkingWeight[e],this.allWeight[e]+=this.extraWeight[e],this.allWeight[e]-=this.sortWeight[e],this.allWeight[e]<0&&(this.allWeight[e]=0),0!=this.currentPersonColorAmount[e]&&this.currentPersonColorAmount[e]>=this.colorPersonArr[e]&&(this.allWeight[e]=0);return this.randomByWeight(new Array(c.colorDes.length).fill(1).map(function(t,e){return e}),this.allWeight)},e.prototype.updateSortWeight=function(){this.sortWeight=new Array(this.colorTypeAmount).fill(0);for(var t=0;t<this.sortPersonNodes.length;t++)if(!(o=this.sortPersonNodes[t]).longtou&&!o.longwei&&o.parent){var e=o.getComponent(d.default).dragonColor;this.sortWeight[e]+=this.levelDataJSON.sortWeight}for(t=0;t<this.sortPersonNodes2.length;t++){var o;(o=this.sortPersonNodes2[t]).longtou||o.longwei||!o.parent||(e=o.getComponent(d.default).dragonColor,this.sortWeight[e]+=this.levelDataJSON.sortWeight)}},e.prototype.getCarColor=function(t,e){for(var o=this.carNodeArr.length,i=Math.round((t+1)/o*100),n=0;n<e.length;n++){var r=e[n];if(i<=r[1]&&i>=r[0]){this.batchMap[n]||(this.batchMap[n]=[]);for(var a=this.randomNum(0,this.randomColorArr[n].length-1),s=this.randomColorArr[n][a];this.batchMap[n].includes(s)&&this.randomColorNum[n]<this.randomColorArr[n].length;)a=this.randomNum(0,this.randomColorArr[n].length-1),s=this.randomColorArr[n][a];return this.randomColorNum[n]+=1,this.batchMap[n].push(s),s}}},e.prototype.setCarID=function(){var t=this;this.carNodeArr.sort(function(t,e){return t.getComponent(l.default).path-e.getComponent(l.default).path}),this.carNodeArr.forEach(function(e,o){if(e.getComponent(l.default).carID=o,t.isDebug){var i=cc.instantiate(e.getChildByName("path"));i.position=cc.v2(0,-20),i.parent=e,i.getComponent(cc.Label).string="ID"+o,i.getComponent(cc.Label).fontSize=20}}),this.carAllAmount=this.carNodeArr.length},e.prototype.getArrByLen=function(t,e){t=this.sortColor_new;for(var o=[],i=0;i<t.length;i++){var n=t[i];i>=e[0]-1&&i<=e[1]-1&&o.push(n)}return o},e.prototype.getOtherCarByDistance=function(t,e){void 0===e&&(e=!1);for(var o=[],i=this.carRoot.children.concat(this.turntableCarArr),n=0;n<i.length;n++){var r=i[n];!r||r==t||r.getComponent(l.default).isReadyDestroy||r.getComponent(l.default).carState!=c.CarState.Idle||!r.active||r.isTransportBox||r.getComponent(l.default).isUTransportCar||o.push(r)}var a=t.convertToWorldSpaceAR(cc.v2(0,0));return o.sort(function(t,e){var o=t,i=e,n=[o.convertToWorldSpaceAR(cc.v2(0,0)),o.convertToWorldSpaceAR(cc.v2(0,-o.height))],r=[i.convertToWorldSpaceAR(cc.v2(0,0)),i.convertToWorldSpaceAR(cc.v2(0,-i.height))];return cc.Intersection.pointLineDistance(a,n[0],n[1],!0)-cc.Intersection.pointLineDistance(a,r[0],r[1],!0)}),o},e.prototype.getPath=function(t){if(t.path)return t.path;var e,o,i,n,r=t.width,a=t.height;this.carMap[t.uuid]||(this.carMap[t.uuid]={}),this.carMap[t.uuid].a1?e=this.carMap[t.uuid].a1:(e=t.convertToWorldSpaceAR(cc.v2(-r/2,-a)),this.carMap[t.uuid].a1=e),this.carMap[t.uuid].a2?o=this.carMap[t.uuid].a2:(o=t.convertToWorldSpaceAR(cc.v2(-r/2,2250)),this.carMap[t.uuid].a2=o),this.carMap[t.uuid].b1?(i=this.carMap[t.uuid].b1,n=this.carMap[t.uuid].b2):(i=t.convertToWorldSpaceAR(cc.v2(r/2,-a)),n=t.convertToWorldSpaceAR(cc.v2(r/2,2250)),this.carMap[t.uuid].b1=i,this.carMap[t.uuid].b2=n);var s=this.getOtherCarByDistance(t),c=!1;t.collisionArr||(t.collisionArr=[]);for(var l=1,h=0;h<s.length;h++){var d=s[h];if(d!=t){var u=void 0,p=void 0,f=void 0,g=void 0,m=d.width,v=d.height;this.carMap[d.uuid]||(this.carMap[d.uuid]={}),this.carMap[d.uuid].a1?u=this.carMap[d.uuid].a1:(u=d.convertToWorldSpaceAR(cc.v2(-m/2,-v)),this.carMap[d.uuid].a1=u),this.carMap[d.uuid].elementA2?p=this.carMap[d.uuid].elementA2:(p=d.convertToWorldSpaceAR(cc.v2(-m/2,0)),this.carMap[d.uuid].elementA2=p),this.carMap[d.uuid].elementC1?(f=this.carMap[d.uuid].elementC1,g=this.carMap[d.uuid].elementC2):(f=d.convertToWorldSpaceAR(cc.v2(m/2+1,0)),g=d.convertToWorldSpaceAR(cc.v2(-m/2-1,0)),this.carMap[d.uuid].elementC1=f,this.carMap[d.uuid].elementC2=g),(cc.Intersection.lineLine(e,o,u,p)||cc.Intersection.lineLine(i,n,u,p)||cc.Intersection.lineLine(e,o,f,g)||cc.Intersection.lineLine(i,n,f,g))&&(c=!0,d.path?l+=d.path:l+=this.getPath(d))}}return c?(t.path=l,l):(t.path=1,1)},e.prototype.fetchMaxIndex=function(t,e){return t.map(function(t,e){return{key:e,value:t}}).sort(function(t,e){return e.value-t.value}).filter(function(t,o){return o<e}).map(function(t){return t.key})},e.prototype.getLevelProgressByCar=function(){for(var t=this.carRoot.children.concat(this.turntableCarArr),e=0,o=0;o<t.length;o++){var i=t[o];i&&i.active&&i.getComponent(l.default).carState==c.CarState.Idle&&(e+=1)}var n=(this.carAllAmount-e)/this.carAllAmount*100;if(this.levelDataJSON.hardPoints)for(o=0;o<this.levelDataJSON.hardPoints.length;o++){var r=this.levelDataJSON.hardPoints[o];if(!this.hardPointsIndexs.includes(o)&&r[0]<=n&&r[1]>=n)return console.log("\u89e6\u53d1\u5361\u70b9",r),this.hardPointsIndexs.push(o),!0}return!1},e.prototype.randomByWeight=function(t,e){if(t.length!=e.length)return console.warn("random2\u8f93\u5165\u4e0d\u5408\u6cd5: resultArr.length != weightArr.length"),null;if(this.getLevelProgressByCar()){for(var o=0,i=e[0],n=0;n<e.length;n++){var r=e[n];(r<i&&0!=r||0==i&&0!=r)&&(o=n,i=r)}for(n=0;n<e.length;n++)n!=o&&(e[n]=0)}else{var a=this.fetchMaxIndex(e,this.levelDataJSON.limitRank||c.colorDes.length);for(n=0;n<e.length;n++)e[n],a.includes(n)||(e[n]=0)}if(this.arraysEqual(e,new Array(c.colorDes.length).fill(0))){var s=[];for(n=0;n<c.colorDes.length;n++)this.colorPersonAmountArr[n].length&&this.currentPersonColorAmount[n]<this.colorPersonArr[n]&&s.push(n);if(s.length)return s[this.randomNum(0,s.length-1)]}for(var l=0,h=0,d=Math.random(),u=e.length-1;u>=0;u--)l+=e[u];for(d*=l,u=e.length-1;u>=0;u--)if(d<=(h+=e[u]))return t[u];return null},e.prototype.arraysEqual=function(t,e){if(t.length!==e.length)return!1;for(var o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0},e.prototype.randomNum=function(t,e,o){var i=e-t,n=o||Math.random();return t+Math.round(n*i)},e.prototype.getLocal=function(t){if(this.localData[t])return this.localData[t];var e=cc.sys.localStorage.getItem(""+this.levelID+t);return e?JSON.parse(e):null},e.prototype.setLocal=function(t,e){this.localData[t]=e,cc.sys.localStorage.setItem(""+this.levelID+t,JSON.stringify(e))},e.prototype.show=function(t,e,o){void 0===e&&(e=.8),void 0===o&&(o=0);var i=cc.instantiate(this.dict.tipPrefab);this.dict.game.addChild(i),i.active=!0,i.stopAllActions(),i.children[1].getComponent(cc.Label).string=t,i.setPosition(cc.v2(0,-60)),i.opacity=0,cc.tween(i).by(.3,{position:cc.v2(0,60),opacity:255}).delay(e).by(.3,{position:cc.v2(0,60),opacity:-255}).call(function(){i.destroy()}).start()},e.prototype.transformPosition=function(t,e){return e.parent.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.Vec2.ZERO))},e.prototype.func_sort=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,i,n=this;return __generator(this,function(){if(this.isSorting)return[2];for(this.isSorting=!0,this.isSortAnim=!0,t=this._bulletMoveList.length-1;t>=0;t--)e=this._bulletMoveList[t],o=e[this._dragonTarget],this._bulletMoveList.splice(t,1),this.allPersonAmount--,this.uiShowPersonAmount--,this.updateHp(),e.stopAllActions(),(i=o[this._itemNode])&&(i.removeFromParent(),i[this._itemDepend]=null,this._itemNodeList.splice(this._itemNodeList.indexOf(i),1),this._itemPoolList.push(i)),this.hideItem1BigSpine(o),this.hideItem1SmallSpine(o),this.hideItem4Spine(o),this.hideItem5Spine(o),this.removeBody(o),this.checkRes(),e.active=!1,this._bulletModelList.push(e);return this.schedule(function(){for(var t=0;t<n.sortPersonNodes.length;t++)if(!((o=n.sortPersonNodes[t]).longtou||o.longwei||o[n._bulletTarget])&&o.parent){var e=n.randomNum(0,c.colorDes.length-1);n.setColorPersonImg(e,o)}for(t=0;t<n.sortPersonNodes2.length;t++){var o;(o=n.sortPersonNodes2[t]).longtou||o.longwei||o[n._bulletTarget]||!o.parent||(e=n.randomNum(0,c.colorDes.length-1),n.setColorPersonImg(e,o))}},.2,2.2),cc.tween(this.node).delay(1.5).call(function(){n.isSortAnim=!1,n.isWin=!1,n.consoleWeight("\u603b\u6743\u91cd",n.allWeight),console.log("\u6392\u961f\u989c\u8272\u987a\u5e8f",n.fetchMaxIndex(n.allWeight,c.colorDes.length));for(var t=n.fetchMaxIndex(n.allWeight,c.colorDes.length),e=new Array(c.colorDes.length).fill(0),o=0;o<n.sortPersonNodes.length;o++)(h=n.sortPersonNodes[o]).longtou||h.longwei||h[n._bulletTarget]||!h.parent||(e[h.getComponent(d.default).dragonColor]+=1);for(o=0;o<n.sortPersonNodes2.length;o++)(h=n.sortPersonNodes2[o]).longtou||h.longwei||h[n._bulletTarget]||!h.parent||(e[h.getComponent(d.default).dragonColor]+=1);var i=0,r=n.sortPersonNodes.length+n.sortPersonNodes2.length,a=!0,s=0,l=0;for(o=0;o<r;o++){n.personPosRoot2&&(s||l?s&&!l?a=!1:s&&l&&(a=!(!n.sortPersonNodes[s]||n.sortPersonNodes2[l]&&s>l)):a=!0);var h=void 0;if(a?(h=n.sortPersonNodes[s],s++):(h=n.sortPersonNodes2[l],l++),!(h.longtou||h.longwei||h[n._bulletTarget])&&h.parent){for(var u=t[i];0==e[u]&&(u=t[i+=1],!(i>=c.colorDes.length-1)););e[u]-=1,h.getComponent(d.default).dragonColor=u,n.setColorPersonImg(u,h),console.log(c.colorDes[u])}}n.isSorting=!1}).start(),[2]})})},e.prototype.revive=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,i,n,r=this;return __generator(this,function(){if(this.isReviveBack)return[2];for(this._roleCurHp<=0&&(this._roleCurHp=1,this.updateRoleHp()),t=this._bulletMoveList.length-1;t>=0;t--)e=this._bulletMoveList[t],o=e[this._dragonTarget],e.stopAllActions(),this._bulletMoveList.splice(t,1),this.allPersonAmount--,this.uiShowPersonAmount--,this.updateHp(),(i=o[this._itemNode])&&(i.removeFromParent(),i[this._itemDepend]=null,this._itemNodeList.splice(this._itemNodeList.indexOf(i),1),this._itemPoolList.push(i)),this.hideItem1BigSpine(o),this.hideItem1SmallSpine(o),this.hideItem4Spine(o),this.hideItem5Spine(o),this.removeBody(o),e.active=!1,this._bulletModelList.push(e);return this.isDragonAttack=!1,this.isDragonAttacking=!1,this.isDragonAttack2=!1,this.isDragonAttacking2=!1,this.sortPersonNodes.length&&(this.sortPersonNodes[0][this._moveEnd]=!1,this.sortPersonNodes[0].stopAllActions()),this.sortPersonNodes2.length&&(this.sortPersonNodes2[0][this._moveEnd]=!1,this.sortPersonNodes2[0].stopAllActions()),this.moveBodyRevive(),this.isReviveBack=!0,this.isReviveSort=!0,this.reviveArr=[],n=function(t,e,o){var i;i=e?r.sortPersonNodes:r.sortPersonNodes2;for(var n=0;n<i.length;n++){var a=i[n];if(!a.longtou&&!a.longwei&&!a[r._turnBackDestroy]&&a.getComponent(d.default).dragonColor==o){t=a,e=!e;break}}return{dragon:t,inputList1:e}},this.scheduleOnce(function(){r.isWin=!1;for(var t=!0,e=function(e){for(var o=r.cannonRoot.children[e],i=o[r._cannonType],a=0;a<o[r._cannonNum];a++){var s,c=void 0;if(r.personPosRoot2){if(c=(s=n(c,t,i)).dragon,t=s.inputList1,!c){var l=n(c,t,i);c=l.dragon,t=l.inputList1}}else c=(s=n(c,t,i)).dragon,t=!0;if(c)c[r._turnBackDestroy]=!0;else{r.currentPersonColorAmount[i]+=1;var h=r.colorPersonAmountArr[i].length-1;r.colorPersonAmountArr[i][h]>0&&(r.colorPersonAmountArr[i][h]-=1),0==r.colorPersonAmountArr[i][h]&&r.colorPersonAmountArr[i].pop()}r.allPersonAmount--,r.updateHp()}cc.tween(o).delay(.05*e).call(function(){o.getChildByName("cannon").getComponent(sp.Skeleton).setAnimation(0,"exit",!1),o.getChildByName("cannon").getComponent(sp.Skeleton).setCompleteListener(function(){o.getChildByName("cannon").getComponent(sp.Skeleton).setCompleteListener(null),o.getChildByName("body").active=!1;var t=null;o.getChildByName("xiaoshi")?t=o.getChildByName("xiaoshi"):((t=cc.instantiate(r.dict["f29086.xiaoshi"])).name="xiaoshi",t.parent=o,t.position=cc.v2()),t.active=!0,t.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),cc.tween(o).delay(.5).call(function(){o.active=!1,o.removeFromParent(!0),r._cannonList.push(o),o.parking.isEmpty=!0,o.parking.car=null,r.moveCarAmount-=1}).start()})}).start()},o=r.cannonRoot.children.length-1;o>=0;o--)e(o);r.scheduleOnce(function(){r.isReviveSort=!1,r.roleNode.getChildByName("role").getComponent(sp.Skeleton).setAnimation(0,"haipa",!0)})}),[2]})})},e.prototype.func_revive=function(){var t=this;if(!(this.isReviveBack||this.isReviveSort||this.dict.dazhao.active))if(this.func_hasLockParking()){for(var e=0;e<this.dict.parkingRoot.children.length;e++){var o=this.dict.parkingRoot.children[e];if(o.getChildByName("videoLock")&&o.getChildByName("videoLock").active){o.getChildByName("videoLock").destroy(),o.getChildByName("empty").active=!0,this.playUnlockSpine(o);var i=o.getChildByName("unlockTips");i&&(i.removeFromParent(),i.active=!1),o.isEmpty=!0,this.parkingNodes.push(o),cc.game.emit("unlockVideoLock",this.func_hasLockParking());break}}this.reviveAnim(function(){t.revive()})}else this.reviveAnim(function(){t.revive()})},e.prototype.reviveAnim=function(t){var e=this;this.isWin=!0,this.dict.dazhao.active=!0,this.dict.dazhao.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),this.dict.dazhao.getComponent(sp.Skeleton).setCompleteListener(function(){e.dict.dazhao.getComponent(sp.Skeleton).setCompleteListener(null),e.dict.dazhao.active=!1}),this.scheduleOnce(function(){t&&t()},.6)},e.prototype.func_hasLockParking=function(){for(var t=0;t<this.dict.parkingRoot.children.length;t++){var e=this.dict.parkingRoot.children[t];if(e.getChildByName("videoLock")&&e.getChildByName("videoLock").active)return!0}return!1},e.prototype.func_checkSlowDown=function(){if(!this.isWin&&!this._removeStage&&!this._slowStart)return!0},e.prototype.func_slowDown=function(){this._slowStart=!0,this._slowCur=0},e.prototype.func_item1=function(){cc.game.emit("f29086_item1")},e.prototype.func_item5=function(){cc.game.emit("f29086_item5")},e.prototype.func_item6=function(t){cc.game.emit("f29086_addCoin",20,t)},e.prototype.func_item7=function(t){cc.game.emit("f29086_addCoin",500,t)},e.prototype.func_item1CB=function(){this._item1Cur=0,this._item1Start=!0;for(var t=0;t<this.sortPersonNodes.length;t++)(e=this.sortPersonNodes[t]).parent&&(e.longtou||e.longwei?this.showItem1BigSpine(e):t%5==0&&this.showItem1SmallSpine(e));for(t=0;t<this.sortPersonNodes2.length;t++){var e;(e=this.sortPersonNodes2[t]).parent&&(e.longtou||e.longwei?this.showItem1BigSpine(e):t%5==0&&this.showItem1SmallSpine(e))}},e.prototype.func_item5CB=function(){this._item5Cur=0,this._item5Start=!0;for(var t=0;t<this.cannonRoot.children.length;t++){var e=this.cannonRoot.children[t];this.showItem5Spine(e)}},e.prototype.showItem1BigSpine=function(t){var e=t.getChildByName("item1BigSpine");if(e)e.active=!0;else{var o=void 0;(o=this._item1BigSpineList.size()?this._item1BigSpineList.get():cc.instantiate(this.dict["f29086.bingkuai_da"])).name="item1BigSpine",o.parent=t,o.active=!0,o.position=cc.v2(0,0)}},e.prototype.hideItem1BigSpine=function(t){var e=t.getChildByName("item1BigSpine");e&&(e.active=!1)},e.prototype.showItem1SmallSpine=function(t){if(!t.getChildByName("item1SmallSpine")){var e=void 0;(e=this._item1SmallSpineList.size()?this._item1SmallSpineList.get():cc.instantiate(this.dict["f29086.bingkuai_xiao"])).name="item1SmallSpine",e.parent=t,e.active=!0,e.position=cc.v2(0,0)}},e.prototype.hideItem1SmallSpine=function(t){var e=t.getChildByName("item1SmallSpine");e&&(e.active=!1,e.removeFromParent(),this._item1SmallSpineList.put(e))},e.prototype.showItem4Spine=function(t){if(!t.getChildByName("item4Spine")){var e=void 0;(e=this._item4SpineList.size()?this._item4SpineList.get():cc.instantiate(this.dict["f29086.pt_texiao1"])).name="item4Spine",e.parent=t,e.active=!0,e.position=cc.v2(0,-35)}},e.prototype.hideItem4Spine=function(t){var e=t.getChildByName("item4Spine");e&&(e.active=!1,e.removeFromParent(),this._item4SpineList.put(e))},e.prototype.showItem5Spine=function(t){if(!t.getChildByName("item5Spine")){var e=void 0;(e=this._item5SpineList.size()?this._item5SpineList.get():cc.instantiate(this.dict["f29086.pt_texiao2"])).name="item5Spine",e.parent=t,e.active=!0,e.position=cc.v2(0,-35)}},e.prototype.hideItem5Spine=function(t){var e=t.getChildByName("item5Spine");e&&(e.active=!1,e.removeFromParent(),this._item5SpineList.put(e))},e.prototype.showWudi=function(){var t=this.roleNode.getChildByName("wudi");if(t)t.active=!0;else{var e=cc.instantiate(this.dict["f29086.wudi"]);e.name="wudi",e.parent=this.roleNode,e.position=cc.v2(),e.active=!0}},e.prototype.hideWudi=function(t){void 0===t&&(t=!1);var e=this.roleNode.getChildByName("wudi");e&&(t?cc.tween(e).to(.2,{scale:1.8*e.scale}).call(function(){e.active=!1}).start():e.active=!1)},e.prototype.changeDragonSkin=function(t,e){if(this._dragonSkin){var o,i,n=null;switch(this._dragonSkin){case 1:t.longtou?i="f29086.longtou_ys,idle1":t.longwei&&(i="f29086.longwei_ys,idle1"),o=this.dict[i]}if(o){var r=i.split(",");r.length>=2&&(n=r[1]);var a=o.getComponent(sp.Skeleton),s=t.getComponent(sp.Skeleton);s.skeletonData=a.skeletonData,s.defaultSkin=a.defaultSkin,s.defaultAnimation=n||a.skeletonData.getRuntimeData().animations[0].name,s.setAnimation(0,n||a.skeletonData.getRuntimeData().animations[0].name,s.loop);var c=this.dict["f29086.xiaochu_ys"].getComponent(sp.Skeleton),l=this.dict.bulletPrefab.getChildByName("xiaochu").getComponent(sp.Skeleton);l.skeletonData=c.skeletonData,l.defaultSkin=c.defaultSkin,l.defaultAnimation=c.skeletonData.getRuntimeData().animations[0].name,l.setAnimation(0,c.skeletonData.getRuntimeData().animations[0].name,s.loop)}e&&e()}else e&&e()},e.prototype.changeRoleSkin=function(t,e){if(this._roleSkin){var o,i,n=null;switch(this._roleSkin){case 1:i="f29086.gongzhu1",o=this.dict[i];break;case 2:i="f29086.gongzhu2",o=this.dict[i];break;case 3:i="f29086.gongzhu3",o=this.dict[i];break;case 4:i="f29086.guowang",o=this.dict[i];break;case 5:i="f29086.wangzi",o=this.dict[i];break;case 6:i="f29086.huakucha",o=this.dict[i]}if(o){var r=i.split(",");r.length>=2&&(n=r[1]);var a=o.getComponent(sp.Skeleton),s=t.getChildByName("role").getComponent(sp.Skeleton);s.skeletonData=a.skeletonData,s.defaultSkin=a.defaultSkin,s.defaultAnimation=n||a.skeletonData.getRuntimeData().animations[0].name,s.setAnimation(0,n||a.skeletonData.getRuntimeData().animations[0].name,s.loop)}e&&e()}else e&&e()},e.prototype.updateRoleHp=function(){var t=this.dict.roleHpNode,e=t.getChildByName("list"),o=this.dict.roleHpImg;if(e.childrenCount){if(this._roleCurHp<e.childrenCount)for(i=e.childrenCount-1;i>=this._roleCurHp;i--)e.children[i].removeFromParent(!0)}else for(var i=0;i<this._roleCurHp;i++){var n=cc.instantiate(o);n.parent=t.getChildByName("list"),n.position=cc.v2(),n.active=!0}if(1==this._roleCurHp){for(i=0;i<e.childrenCount;i)e.children[i].removeFromParent(!0);e.width=0}else e.width=o.width*this._roleCurHp;e.getComponent(cc.Layout).updateLayout()},e.prototype.updateRoleHpPos=function(){this.dict.roleHpNode.position=this.transformPosition(this.roleNode,this.dict.roleHpNode)},e.prototype.showDragonBall=function(t,e){var o=cc.instantiate(this.dict.dragonBallImg),i=cc.instantiate(this.dict.dragonBallBg);o.parent=this.dict.dragonBallImg.parent,i.parent=this.dict.dragonBallBg.parent,o.active=!0,i.active=!0,i.scale=.5,o.setSiblingIndex(999),o.position=this.transformPosition(t,o),i.position=this.transformPosition(t,i),cc.tween(i).to(1,{angle:360}).call(function(){i.angle=0}).union().repeatForever().start(),cc.tween(o).delay(1).to(.5,{position:this.transformPosition(this.roleNode,o)}).call(function(){e&&e(),o.active=!1,o.stopAllActions()}).start(),cc.tween(i).delay(1).to(.5,{position:this.transformPosition(this.roleNode,i)}).call(function(){i.active=!1,i.stopAllActions()}).start()},e.prototype.doRoleLevel10Skill=function(){this._roleLevel10Count=1;for(var t=0;t<this.sortPersonNodes.length;t++)(e=this.sortPersonNodes[t]).parent&&(e.longtou||e.longwei?this.showItem1BigSpine(e):t%5==0&&this.showItem1SmallSpine(e));for(t=0;t<this.sortPersonNodes2.length;t++){var e;(e=this.sortPersonNodes2[t]).parent&&(e.longtou||e.longwei?this.showItem1BigSpine(e):t%5==0&&this.showItem1SmallSpine(e))}},e.prototype.doDragonAttack=function(){var t=this;if(!this.isDragonAttacking){this.isDragonAttacking=!0;var e=this.sortPersonNodes[0];if(e){var o=this.transformPosition(this.roleNode,e);o.x>=e.x?e.scaleX=.9:e.scaleX=-.9,cc.tween(e).call(function(){!t._roleLevel2Count&&t._roleLevel>=2&&(t._roleLevel2Count++,t.showWudi()),e.getComponent(sp.Skeleton).setAnimation(0,"angry",!1),e.getComponent(sp.Skeleton).addAnimation(0,"idle1",!0),t._roleLevel2Count&&t._roleLevel2CurTime<t._roleLevel2Time||(t._roleCurHp--,t.updateRoleHp(),t._roleCurHp<=0?(t.roleNode.getChildByName("role").getComponent(sp.Skeleton).setAnimation(0,"shibai",!0),t.scheduleOnce(function(){e.getComponent(sp.Skeleton).setAnimation(0,"idle2",!0),e.stopAllActions(),t.isWin=!0,cc.log("levelReviveHelper"),m.default.levelFailEvent("\u662f\u5426\u9700\u8981\u590d\u6d3b",function(){t.func_revive()})},1.5)):(t.roleNode.getChildByName("role").getComponent(sp.Skeleton).setAnimation(0,"shibai",!1),t.roleNode.getChildByName("role").getComponent(sp.Skeleton).addAnimation(0,"haipa",!0)))}).delay(this._dragonAttackInterval).union().repeatForever().start()}}if(!this.isDragonAttacking2){this.isDragonAttacking2=!0;var i=this.sortPersonNodes[0];i&&((o=this.transformPosition(this.roleNode,i)).x>=i.x?i.scaleX=.9:i.scaleX=-.9,cc.tween(i).call(function(){!t._roleLevel2Count&&t._roleLevel>=2&&(t._roleLevel2Count++,t.showWudi()),i.getComponent(sp.Skeleton).setAnimation(0,"angry",!1),i.getComponent(sp.Skeleton).addAnimation(0,"idle1",!0),t._roleLevel2Count&&t._roleLevel2CurTime<t._roleLevel2Time||(t._roleCurHp--,t.updateRoleHp(),t._roleCurHp<=0?(t.roleNode.getChildByName("role").getComponent(sp.Skeleton).setAnimation(0,"shibai",!0),t.scheduleOnce(function(){i.getComponent(sp.Skeleton).setAnimation(0,"idle2",!0),i.stopAllActions(),t.isWin=!0,cc.log("levelReviveHelper"),m.default.levelFailEvent("\u662f\u5426\u9700\u8981\u590d\u6d3b",function(){t.func_revive()})},1.5)):(t.roleNode.getChildByName("role").getComponent(sp.Skeleton).setAnimation(0,"shibai",!1),t.roleNode.getChildByName("role").getComponent(sp.Skeleton).addAnimation(0,"haipa",!0)))}).delay(this._dragonAttackInterval).union().repeatForever().start())}},e.prototype.func_checkRemove=function(){if(!this.isWin&&!this._removeStage&&this.carRoot.children.length&&!(this.carRoot.children.length-this.parkingNodes.length<=0))return!0},e.prototype.func_remove=function(){if(this.func_checkRemove())if(this.dict.transportLayer&&(this.dict.transportLayer.getComponent(f.default).isMove=!1),this._removeStage=!0,this._tipRemove)this._tipRemove.active=!0;else{var t=cc.instantiate(this.dict.tipPrefab);t.parent=this.dict.tipPrefab.parent,t.width=500,cc.view.getFrameSize().width/cc.view.getFrameSize().height<.5?t.y=100:t.y=188,t.scale=.8,t.active=!0,t.children[1].getComponent(cc.Label).string="\u8bf7\u9009\u62e9\u7bb1\u5b50",this._tipRemove=t}},e.prototype.remove=function(t){var e,o=this,i=function(t,e,i){var n;n=e?o.sortPersonNodes:o.sortPersonNodes2;for(var r=0;r<n.length;r++){var a=n[r];if(!(a.longtou||a.longwei||a[o._bulletTarget]||a[o._turnBackDestroy]||a.readyDestroy||a.getComponent(d.default).dragonColor!=i)){t=a,e=!e;break}}return{dragon:t,inputList1:e}};this._removeClick=!0,this._tipRemove.active=!1;for(var n=!0,r=t.getComponent(l.default).carColor,a=[],s=0;s<t.getComponent(l.default).emptySeatAmount;s++){var c,h=void 0;if(this.personPosRoot2){if(h=(c=i(h,n,r)).dragon,n=c.inputList1,!h){var u=i(h,n,r);h=u.dragon,n=u.inputList1}}else h=(c=i(h,n,r)).dragon,n=!0;if(h)h.readyDestroy=!0,a.push(h);else{this.currentPersonColorAmount[r]+=1;var p=this.colorPersonAmountArr[r].length-1;this.colorPersonAmountArr[r][p]>0&&(this.colorPersonAmountArr[r][p]-=1),0==this.colorPersonAmountArr[r][p]&&this.colorPersonAmountArr[r].pop()}this.allPersonAmount--,this.updateHp()}e=this.personPosRoot2?Math.random()<.5?this.sortPersonNodes[0]:this.sortPersonNodes2[0]:this.sortPersonNodes[0],t.active=!1;var g=this.getFeidan(),m=this.getFeidanYanwu(),v=this.getFeidanBaozha();g.position=this.transformPosition(t.getChildByName("car"),g),g.y-=t.getChildByName("car").height/2,g.active=!0,m.position=this.transformPosition(t.getChildByName("car"),m),m.y-=t.getChildByName("car").height/2,m.active=!0,m.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),m.getComponent(sp.Skeleton).setCompleteListener(function(){m.getComponent(sp.Skeleton).setCompleteListener(null),m.active=!1,o._feidanYanwu.put(m)}),v.position=this.transformPosition(e,v);var y=this.transformPosition(e,g),_=this.getAngle(g.position,y)-90;g.angle=_,cc.tween(g).to(.5,{position:y}).call(function(){cc.game.emit("needLimitNoHandle",!1),o.dict.transportLayer&&(o.dict.transportLayer.getComponent(f.default).isMove=!0),g.active=!1,o._feidan.put(g),v.active=!0,v.getComponent(sp.Skeleton).setAnimation(0,"zha_da",!1),v.getComponent(sp.Skeleton).setCompleteListener(function(){v.getComponent(sp.Skeleton).setCompleteListener(null),v.active=!1,o._feidanBaozha.put(v)});for(var e=a.length-1;e>=0;e--){var i=a[e],n=i[o._itemNode];n&&(n.removeFromParent(),n[o._itemDepend]=null,o._itemNodeList.splice(o._itemNodeList.indexOf(n),1),o._itemPoolList.push(n)),o.removeBody(i)}t.isTransportBox&&o.dict.transportLayer.getComponent(f.default).reduceCarAmount(t),t.destroy(),o._removeClick=!1,o._removeStage=!1,o.checkRes()}).start()},e.prototype.getFeidan=function(){var t;return(t=this._feidan.size()>0?this._feidan.get():cc.instantiate(this.dict["f29086.feidan"])).parent=this.dict["f29086.feidan"].parent,t.active=!1,t},e.prototype.getFeidanYanwu=function(){var t;return(t=this._feidanYanwu.size()>0?this._feidanYanwu.get():cc.instantiate(this.dict["f29086.feidan_yanwu"])).parent=this.dict["f29086.feidan_yanwu"].parent,t.active=!1,t},e.prototype.getFeidanBaozha=function(){var t;return(t=this._feidanBaozha.size()>0?this._feidanBaozha.get():cc.instantiate(this.dict["f29086.baozha"])).parent=this.dict["f29086.baozha"].parent,t.active=!1,t},e.prototype.getAngle=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},__decorate([P(cc.SpriteAtlas)],e.prototype,"box2SpriteAtlas",void 0),__decorate([P],e.prototype,"isDebug",void 0),__decorate([P],e.prototype,"boundary",void 0),__decorate([P({type:cc.Enum(i),tooltip:"\u5730\u56fe"})],e.prototype,"mapType",void 0),__decorate([k],e)}(a.default);o.default=T,cc._RF.pop()},{"../../scripts/LanguageManager":"LanguageManager","../../scripts/LocalStorageConst":"LocalStorageConst","../../scripts/LocalStorageManager":"LocalStorageManager","../../scripts/PlatformManager":"PlatformManager","../../scripts/ShuShuConst":"ShuShuConst","../../scripts/UserConst":"UserConst","../../scripts/UserManager":"UserManager","./BrainLevelBase":"BrainLevelBase","./Level-29086_boxCarItem":"Level-29086_boxCarItem","./Level-29086_carPark":"Level-29086_carPark","./Level-29086_config":"Level-29086_config","./Level-29086_dragonItem":"Level-29086_dragonItem","./Level-29086_transport":"Level-29086_transport","./LevelConstant":"LevelConstant","./LevelUtils":"LevelUtils","./MotionTrail":"MotionTrail","./PoolMgr":"PoolMgr","./levelReviveHelper":"levelReviveHelper"}],"Level-29086_dragonItem":[function(t,e,o){"use strict";cc._RF.push(e,"23130kGZzdPDqpiX5zo509n","Level-29086_dragonItem");var i=cc._decorator,n=i.ccclass,r=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dragonColor=null,e.dir=0,e.colorImgName=null,e.dirImgName=null,e.isMoving=!1,e}return __extends(e,t),__decorate([n],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],"Level-29086_manager":[function(t,e,o){"use strict";var i;cc._RF.push(e,"20244ElwtpK0KZcHmzOwLAz","Level-29086_manager");var n,r=t("./BrainLevelBase"),a=cc._decorator,s=a.ccclass,c=a.property;(n=i||(i={}))[n.map1=1]="map1",n[n.map2=2]="map2",n[n.map3=3]="map3",n[n.map4=4]="map4",n[n.map5=5]="map5",n[n.map6=6]="map6",n[n.map7=7]="map7",n[n.map8=8]="map8",n[n.map9=9]="map9",n[n.map10=10]="map10",n[n.map101=101]="map101",n[n.map102=102]="map102";var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mapType=i.map1,e}return __extends(e,t),e.prototype.onAssetLoadedAllFinishHandle=function(){},e.prototype.btnLoadMap=function(){var t=this.dict["Editbox Level"].getComponent(cc.EditBox).string||"";t&&this.loadMap(t)},e.prototype.loadMap=function(t){var e=this;return new Promise(function(o){cc.loader.loadRes("zqddn_zhb/prefab/level/zqddn_zhb_level"+t,function(t,i){if(t)return o();var n=cc.instantiate(i);n.position=cc.Vec2.ZERO;var r=n._components,a=!0;r.forEach(function(t){void 0!==t.onLevelReady&&(a=!1,t.onLevelReadyCopy=t.onLevelReady,t.onLevelReady=function(){t.onLevelReadyCopy(),e.scheduleOnce(function(){e.dict["Button Jump"].active=!1,e.dict["Editbox Level"].active=!1,o()})})}),n.parent=e.node,n.active=!1,a&&e.scheduleOnce(function(){e.dict["Button Jump"].active=!1,e.dict["Editbox Level"].active=!1,o()})})})},__decorate([c({type:cc.Enum(i),tooltip:"\u5730\u56fe"})],e.prototype,"mapType",void 0),__decorate([s],e)}(r.default);o.default=l,cc._RF.pop()},{"./BrainLevelBase":"BrainLevelBase"}],"Level-29086_transport":[function(t,e,o){"use strict";cc._RF.push(e,"484ecNRUtZIrZ3wKnXMzeMt","Level-29086_transport");var i=t("./Level-29086_boxCarItem"),n=t("./Level-29086_config"),r=cc._decorator,a=r.ccclass,s=r.property,c={1:"021",2:"022",3:"023"},l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.road0=null,e.road1=null,e.isMove=!1,e.isInit=!1,e.currentCarAmount=0,e.speed=50,e.allBox=[],e.distanceInterval=80,e.mgr=null,e.config=[],e}return __extends(e,t),e.prototype.init=function(t,e){var o=this;this.mgr=t,this.config=e,this.isInit=!0,this.currentCarAmount=e.length,this.node.getChildByName("transportBoxAmount").getComponent(cc.Label).string=this.currentCarAmount.toString(),this.createBox(),this.scheduleOnce(function(){o.isMove=!0},1)},e.prototype.reduceCarAmount=function(t){var e=this.allBox.indexOf(t);-1!==e&&this.allBox.splice(e,1),t.getChildByName("shadow0")&&t.getChildByName("shadow0").destroy(),this.currentCarAmount-=1,this.node.getChildByName("transportBoxAmount").getComponent(cc.Label).string=this.currentCarAmount.toString()},e.prototype.createBox=function(){for(var t=this.node.convertToWorldSpaceAR(this.node.getChildByName("023").position),e=this.mgr.dict.carRoot.convertToNodeSpaceAR(t),o=this.node.convertToWorldSpaceAR(this.node.getChildByName("022").position),n=this.mgr.dict.carRoot.convertToNodeSpaceAR(o),r=this.node.convertToWorldSpaceAR(this.node.getChildByName("021").position),a=this.mgr.dict.carRoot.convertToNodeSpaceAR(r),s=0;s<this.config.length;s++){var l=this.config[s],h=this.mgr.dict.carPrefab.getChildByName(c[l]),d=cc.instantiate(h);this.mgr.dict.carRoot.addChild(d),d.position=e,d.isTransportBox=!0,this.allBox.push(d),d.x=e.x+s*this.distanceInterval,d.y="021"==c[l]?a.y:"022"==c[l]?n.y:e.y,d.name=h.name,d.getComponent(i.default).path=99,d.path=99}},e.prototype.update=function(t){if(this.isInit&&this.isMove){this.road0.x-=t*this.speed,this.road1.x-=t*this.speed,this.road0.x<=-(315+this.road0.width)&&(this.road0.x=this.road1.x+this.road0.width),this.road1.x<=-(315+this.road0.width)&&(this.road1.x=this.road0.x+this.road0.width);for(var e=0;e<this.allBox.length;e++){var o=this.allBox[e];if(o&&o.getComponent(i.default).carState==n.CarState.Idle){var r=o.x-t*this.speed;if(r<=-380&&this.getMaxXTransportCar()){var a=this.getMaxXTransportCar().x+this.distanceInterval;r=a<=this.node.getChildByName("023").x?this.node.getChildByName("023").x:a}o.x=r}}}},e.prototype.getMaxXTransportCar=function(){for(var t=this.allBox[0],e=0;e<this.allBox.length;e++){var o=this.allBox[e];o&&o.x>t.x&&(t=o)}return t},e.prototype.timerTransportMove=function(t){void 0===t&&(t=1.2),this.unschedule(this.setTransportCarMove),this.scheduleOnce(this.setTransportCarMove,t)},e.prototype.setTransportCarMove=function(){this.isMove=!0},e.prototype.setTransportCarNoMove=function(t){this.isMove=!1,this.timerTransportMove(.6),this.mgr.checkHasCollision(t)||this.mgr.addTailGasSpine(t)},__decorate([s(cc.Node)],e.prototype,"road0",void 0),__decorate([s(cc.Node)],e.prototype,"road1",void 0),__decorate([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./Level-29086_boxCarItem":"Level-29086_boxCarItem","./Level-29086_config":"Level-29086_config"}],LevelConstant:[function(t,e,o){"use strict";cc._RF.push(e,"10b6fsQhudHR5IhFZ79Zwh8","LevelConstant"),o.LEVEL_EVENT=o.FONT_URL=o.AUDIO_URL=o.ASSET_LOCAL_BUNDLE=o.domain_local=o.domain=void 0,o.domain="https://static.zuiqiangyingyu.net/wb_webview/brain_level_asset_depository/",o.domain_local="http://192.168.20.143/",o.ASSET_LOCAL_BUNDLE="resources",o.AUDIO_URL={CLICK:"audio/common/click.mp3",RIGHT:"audio/common/right.mp3",ERROR:"audio/common/error.mp3",BOBO:"audio/common/bobo.mp3",HANDCLAP:"audio/common/handclap.mp3",HIT:"audio/common/Hit.mp3",FIGHT:"audio/common/fight.mp3",BALL_COLLIDE:"audio/common/ball_collide.mp3",PULLDOWN_WOOD:"audio/common/putdownWood.mp3",XIU:"audio/common/xiu.mp3",SUC:"audio/common/suc.mp3",STAR:"audio/common/zqddn_zhb_star.mp3",MIX:"audio/common/mix.mp3",DANGER:"audio/common/danger.mp3",SHUTTER_SOUND:"audio/common/shutter_sound.mp3",BALLON_BOOM:"audio/common/ballonboom.mp3",FIREWORK:"audio/common/firework.mp3",LIGHTNINGSTROKE:"audio/common/leiji.mp3",ELIMINATE:"audio/common/Eliminate.mp3",BOOM:"audio/common/boom1.mp3",BOX:"audio/common/boxing.mp3",JUMPSCARE:"audio/common/jumpscare.mp3",SLAPFACE:"audio/common/bazhang.mp3",COLLISION:"audio/common/collisionObstacle.mp3",SMOKE:"audio/common/smoke.mp3",Door:"audio/common/door.mp3",GLASS_BREAK:"audio/common/glass_break.mp3",GIRL_CRY:"audio/common/nvjianjiao.mp3",DROP:"audio/common/drop.mp3",BGM:"audio/common/bgm.mp3",BGM2:"audio/common/bgm2.mp3",BGM3:"audio/common/bgm3.mp3",BGM4:"audio/common/bgm4.mp3",BGM5:"audio/common/bgm5.mp3",BGM6:"audio/common/bgm6.mp3",BGM7:"audio/common/bgm7.mp3",BGM8:"audio/common/bgm8.mp3",BGM9:"audio/common/bgm9.mp3"},o.FONT_URL={TX:"font/ttzhuncuyuanja.ttf"},o.LEVEL_EVENT={GAME_HIDEBG:"game_hidebg",GAME_SHOWBG:"game_showbg",GAME_CHANGEBG:"game_changebg",GAME_ASSET_DOWNDOWN_FAIL:"game_asset_download_fail",REWARDVIDEO:"rewardVideo",WZZC_OPEN_INPUTBOX:"wzzc_open_inputbox",WZZC_PAUSE_GAME:"wzzc_pause_game",WZZC_RESUME_GAME:"wzzc_resume_game",GAME_SHOWTIPBTN:"game_showTipBtn",GAME_HIDETIPBTN:"game_hideTipBtn",GAME_RESHOWTIPBTNVIDEOICON:"game_reShowTipBtnVideoIcon"},cc._RF.pop()},{}],LevelSelectItem:[function(t,e,o){"use strict";var i;cc._RF.push(e,"466fbW6yrRKyI46Ig0klIh0","LevelSelectItem");var n,r=t("./SceneConst"),a=t("./UserConst"),s=t("./PlatformManager"),c=t("./SceneManager"),l=t("./UserManager"),h=cc._decorator,d=h.ccclass,u=h.property;(n=i||(i={}))[n.Normal=0]="Normal",n[n.Finish=1]="Finish",n[n.Lock=2]="Lock";var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pass=null,e.level=null,e.new=null,e.lock=null,e.videoIcon=null,e.param=null,e.state=null,e.starAmount=0,e}return __extends(e,t),e.prototype.setData=function(t){this.param=t,this.node.zIndex=this.param.index,this.refresh()},e.prototype.refresh=function(){var t=this.param.index+1;this.new.active=!1,this.lock.active=!1,this.pass.active=!1,this.videoIcon.active=!1,this.level.string=t+"",-1!=s.Platform.getConfig().flag.indexOf("tt")?-1!=this.param.currentAlreadyPlay.indexOf(t)?(this.pass.active=!0,this.level.node.active=!0):-1!=this.param.currentAlreadyUnlock.indexOf(t)?(this.new.active=!0,this.level.node.active=!0):(this.lock.active=!0,this.videoIcon.active=!0):t==this.param.currentLevel?(this.new.active=!0,this.level.node.active=!0):t>this.param.currentLevel?this.lock.active=!0:(this.pass.active=!0,this.level.node.active=!0)},e.prototype.clickEnter=function(){var t=this;this.lock.active?this.videoIcon.active&&s.Platform.showRewardAds(function(e){if(0==e){cc.game.emit("gamelog","rewarde_btn012"),l.User.setTempData(a.TempData.CURRENT_LEVEL,t.param.index+1);var o=l.User.getTempData(a.TempData.CURRENT_MODE),i=l.User.get(a.UserData.ALREADY_UNLOCK);-1==i[o].indexOf(t.param.index+1)&&i[o].push(t.param.index+1),l.User.set(a.UserData.ALREADY_UNLOCK,i);var n=t.param.index+1,s=l.User.get(a.UserData.LEVEL_LIST);n>s[o]&&(s[o]=n,l.User.set(a.UserData.LEVEL_LIST,s)),c.default.loadScene(r.SceneConst.GAME)}}):(l.User.setTempData(a.TempData.CURRENT_LEVEL,this.param.index+1),c.default.loadScene(r.SceneConst.GAME))},e.state=i,__decorate([u(cc.Node)],e.prototype,"pass",void 0),__decorate([u(cc.Label)],e.prototype,"level",void 0),__decorate([u(cc.Node)],e.prototype,"new",void 0),__decorate([u(cc.Node)],e.prototype,"lock",void 0),__decorate([u(cc.Node)],e.prototype,"videoIcon",void 0),__decorate([d],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./PlatformManager":"PlatformManager","./SceneConst":"SceneConst","./SceneManager":"SceneManager","./UserConst":"UserConst","./UserManager":"UserManager"}],LevelSelect:[function(t,e,o){"use strict";cc._RF.push(e,"c7db1FPZVBGSZBHiKGhYuSS","LevelSelect");var i=t("./BaseUI"),n=t("./RecycleScroll"),r=t("./AudioConst"),a=t("./EventConst"),s=t("./PlatformConst"),c=t("./SceneConst"),l=t("./UserConst"),h=t("./AudioManager"),d=t("./EventManager"),u=t("./PlatformManager"),p=t("./ResManager"),f=t("./SceneManager"),g=t("./UserManager"),m=t("./LevelSelectItem"),v=t("./ConfigUtils"),y=t("./XMADUtils"),_=t("./VIVOADUtils"),C=cc._decorator,b=C.ccclass,S=C.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scroll=null,e._data=null,e.itemsData=[],e.childrenLength=6,e.currentUnlockLevel=1,e.currentAlreadyPlay=[],e.currentAlreadyUnlock=[],e.isLoadingScene=!1,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.initView()},e.prototype.onEnable=function(){d.Event.on(a.default.CLICK_BACK,this.clickBack,this),u.Platform.is(s.EPlatform.XIAOMI_ANDROID)?y.XMAD.showBannerFeed():u.Platform.is(s.EPlatform.VIVO)&&_.VIVOAD.showCustomAd_1()},e.prototype.onDisable=function(){d.Event.off(a.default.CLICK_BACK,this.clickBack,this),u.Platform.is(s.EPlatform.XIAOMI_ANDROID)&&u.Platform.removeBannerFeed(),u.Platform.hideCustomAd(),u.Platform.hideCustomAd_1(),u.Platform.hideCustomAd_2()},e.prototype.initView=function(){var t=this,e=g.User.getTempData(l.TempData.CURRENT_MODE),o=g.User.get(l.UserData.LEVEL_LIST),i=g.User.get(l.UserData.ALREADY_PLAY),n=g.User.get(l.UserData.ALREADY_UNLOCK),a=1,s=1;o[e]&&(a=o[e],this.currentUnlockLevel=a,this.currentAlreadyPlay=i[e],this.currentAlreadyUnlock=n[e]),cc.resources.load("texture/banner/"+e,function(e,o){if(e)return console.log(e);t.dict.icon.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o)}),v.ConfigUtils.getDataByID(e,function(e){console.log("res - ",e),s=e.amount,a>=s&&(a=s),t.dict.name.getComponent(cc.Label).string=e.themeName,t.dict.level.getComponent(cc.Label).string=a+"/"+s,t.scroll.onItemRender=t.onItemRender.bind(t),t.scroll.onItemClicked=t.onItemClicked.bind(t),t.scroll.numItems=s}),p.Res.load("prefab/item/TopBar").then(function(e){console.log("\u6d4b\u8bd5\u52a0\u8f7d");var o=cc.instantiate(e);t.node.addChild(o)}),h.Audio.playMusic(r.AudioConst.BGM_MAIN)},e.prototype.onItemRender=function(t,e){var o=e.getComponent(m.default),i=(m.default.state.Normal,{index:t,currentLevel:this.currentUnlockLevel,currentAlreadyPlay:this.currentAlreadyPlay,currentAlreadyUnlock:this.currentAlreadyUnlock});o.setData(i)},e.prototype.onItemClicked=function(){},e.prototype.clickBack=function(){this.isLoadingScene||(this.isLoadingScene=!0,cc.game.emit("gamelog","btn008"),f.default.loadScene(c.SceneConst.MAIN))},__decorate([S(n.default)],e.prototype,"scroll",void 0),__decorate([b],e)}(i.default);o.default=w,cc._RF.pop()},{"./AudioConst":"AudioConst","./AudioManager":"AudioManager","./BaseUI":"BaseUI","./ConfigUtils":"ConfigUtils","./EventConst":"EventConst","./EventManager":"EventManager","./LevelSelectItem":"LevelSelectItem","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./RecycleScroll":"RecycleScroll","./ResManager":"ResManager","./SceneConst":"SceneConst","./SceneManager":"SceneManager","./UserConst":"UserConst","./UserManager":"UserManager","./VIVOADUtils":"VIVOADUtils","./XMADUtils":"XMADUtils"}],LevelUtils:[function(t,e,o){"use strict";cc._RF.push(e,"217d1kPV+tBrp6jPSQkh/Se","LevelUtils");var i=function(){function t(){}return t.getRandomInt=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),Math.floor(Math.random()*(e-t+1)+t)},t.getRandomFloat=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),Math.random()*(e-t+1)+t},t.getRandomValueInArray=function(t){return t[Math.floor(Math.random()*t.length)]},t.getTwoPosAngle=function(t,e){return Math.atan((e.y-t.y)/(e.x-t.x))},t.getTwoPosDistance=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},t.getAngleByTwoPoint=function(t,e){var o=e.sub(t).normalize();return o.equals(cc.v2(0,0))?0:o.signAngle(cc.v2(1,0))/Math.PI*180+90},t.convertAngleToRadian=function(t){return t*Math.PI/180},t.convertRadianToAngle=function(t){return t/(Math.PI/180)},t.isHex=function(t){return/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t)},t.convertHexToRGBA=function(t){return this.isHex(t)?{r:parseInt(t.substr(1,2),16)||0,g:parseInt(t.substr(3,2),16)||0,b:parseInt(t.substr(5,2),16)||0,a:parseInt(t.substr(7,2),16)||255}:null},t.convertRGBAToHex=function(t){var e=(256|t.r).toString(16).slice(1),o=(256|t.g).toString(16).slice(1),i=(256|t.b).toString(16).slice(1);return null==t.a?("#"+e+o+i).toUpperCase():("#"+e+o+i+(256|t.a).toString(16).slice(1)).toUpperCase()},t.prototype.copyAny=function(t){return JSON.parse(JSON.stringify(t))},t.shuffle=function(t){for(var e=t.length;e;){var o=Math.floor(Math.random()*e--),i=t[e];t[e]=t[o],t[o]=i}return t},t}();o.default=i,cc._RF.pop()},{}],LevelUtil:[function(t,e,o){"use strict";cc._RF.push(e,"3415doaFZ1BJ6EMUzqMmFQS","LevelUtil");var i=cc._decorator,n=i.ccclass,r=(i.property,function(){function t(){}return t.log=function(t,e){this.isShowLog&&(e?cc.log("%c "+t+" %c "+e+" ","background: #35495E;padding: 1px;border-radius: 2px 0 0 2px;color: #fff;","background: #409EFF;padding: 1px;border-radius: 0 2px 2px 0;color: #fff;"):cc.log("%c "+t+" ","background: #409EFF;padding: 1px;border-radius: 0 2px 2px 0;color: #fff;"))},t.setProjectBg=function(t){var e;void 0===t&&(t=cc.Color.GRAY);for(var o=0;o<cc.Camera.cameras.length;o++){var i=cc.Camera.cameras[o];"Main Camera"==i.node.name&&(e=i)}if(e){var n=e.node.parent.getChildByName("Sprite Background");n&&(cc.log("\u66f4\u6539\u9879\u76ee\u80cc\u666f\u56fe \u6d4b\u8bd5\u78b0\u649e"),n.color=t)}},t.touchEvent=function(t,e){var o={start:function(t){e.sFunc&&e.sFunc(t)},move:function(t){e.mFunc&&e.mFunc(t)},end:function(t){e.eFunc&&e.eFunc(t)}};e.sFunc&&t.on(cc.Node.EventType.TOUCH_START,o.start,this),e.mFunc&&t.on(cc.Node.EventType.TOUCH_MOVE,o.move,this),e.eFunc&&(t.on(cc.Node.EventType.TOUCH_END,o.end,this),t.on(cc.Node.EventType.TOUCH_CANCEL,o.end,this)),this.touchList[t.uuid]={target:t,func:o}},t.clearEvent=function(t,e){if(void 0===e&&(e=!1),e)for(var o=0,i=Object.entries(this.touchList);o<i.length;o++){var n=i[o],r=n[0],a=(n[1],this.touchList[r]),s=a.func,c=a.target;c.off(cc.Node.EventType.TOUCH_START,s.start,this),c.off(cc.Node.EventType.TOUCH_MOVE,s.move,this),c.off(cc.Node.EventType.TOUCH_END,s.end,this),c.off(cc.Node.EventType.TOUCH_CANCEL,s.end,this),delete this.touchList[r]}else{if(!t)return void cc.log("[LevelUtil.clearEvent] target\u4e3a\u7a7a");this.touchList[t.uuid]&&(s=this.touchList[t.uuid].func,t.off(cc.Node.EventType.TOUCH_START,s.start,this),t.off(cc.Node.EventType.TOUCH_MOVE,s.move,this),t.off(cc.Node.EventType.TOUCH_END,s.end,this),t.off(cc.Node.EventType.TOUCH_CANCEL,s.end,this),delete this.touchList[t.uuid])}},t.onClickEvent=function(t,e,o){void 0===o&&(o=!0);var i={start:function(){},move:function(){},end:function(){}};o?(i.start=function(t){e&&e(t)},t.on(cc.Node.EventType.TOUCH_START,i.start,this)):(i.end=function(t){e&&e(t)},t.on(cc.Node.EventType.TOUCH_END,i.end,this)),this.touchList[t.uuid]={target:t,func:i}},t.setRigidBodyType=function(t,e,o){if(void 0===o&&(o=!1),t){var i=null;i=t instanceof cc.Node?t.getComponent(cc.RigidBody):t,e.scheduleOnce(function(){i.type=o?cc.RigidBodyType.Static:cc.RigidBodyType.Dynamic})}},t.removePhysics=function(t,e){e.scheduleOnce(function(){t.removeComponent(cc.PhysicsCollider),t.removeComponent(cc.RigidBody)})},t.playSpineCallBack=function(t,e,o,i){var n;void 0===o&&(o=!1),void 0===i&&(i=null),t&&(n=t instanceof sp.Skeleton?t:t.getComponent(sp.Skeleton))&&(n.setAnimation(0,e,o),n.setCompleteListener(function(t){t.animation.name==e&&i&&i()}))},t.convertPosition=function(t,e){return e.parent.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.Vec2.ZERO))},t.getWorldPos=function(t){return t.parent.convertToWorldSpaceAR(t.position)},t.getObj=function(t,e){var o=null,i=this.poolMap[t];return(o=i&&i.size()?i.get():cc.instantiate(e)).active=!0,o},t.putObj=function(t,e){e.active=!1;var o=this.poolMap[t];if(o)o.put(e);else{var i=new cc.NodePool;this.poolMap[t]=i,i.put(e)}},t.clearObj=function(){this.poolMap.clear},t.loadByFrame=function(t,e,o,i){var n=0;(function r(){for(var a=0;a<o;a++)e&&e(n++);n<i&&t.scheduleOnce(function(){return r()})})()},t.setChildrenActive=function(t,e){t&&t.children.forEach(function(t,o){t.active=e==o})},t.deepCopy=function(t){if(null==t||"object"!=typeof t)return t;var e=null;if(t instanceof Date)return(e=new Date).setTime(t.getTime()),e;if(t instanceof Array){e=[];for(var o=0,i=t.length;o<i;o++)e[o]=this.deepCopy(t[o]);return e}if(t instanceof Object){for(var n in e={},t)t.hasOwnProperty(n)&&(e[n]=this.deepCopy(t[n]));return e}console.warn("\u4e0d\u652f\u6301\u7684\u7c7b\u578b\uff1a"+e)},t.getRandomInt=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),Math.floor(Math.random()*(e-t)+t)},t.getAngle=function(t,e){return Math.atan((e.y-t.y)/(e.x-t.x))},t.getDistance=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},t.angleToRadian=function(t){return t*Math.PI/180},t.addSafely=function(t,e){var o=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,n=Math.pow(10,Math.max(o,i));return(t*n+e*n)/n},t.getRandomValueInArray=function(t){return t[Math.floor(Math.random()*t.length)]},t.copyArray=function(t){for(var e=[],o=0;o<t.length;o++)e.push(t[o]);return e},t.copy2DArray=function(t){for(var e=[],o=0;o<t.length;o++)e.push(t[o].concat());return e},t.fisherYatesShuffle=function(t){for(var e=t.length;e;){var o=Math.floor(Math.random()*e--),i=t[e];t[e]=t[o],t[o]=i}return t},t.isHex=function(t){return/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t)},t.hexToRgba=function(t){return this.isHex(t)?{r:parseInt(t.substr(1,2),16)||0,g:parseInt(t.substr(3,2),16)||0,b:parseInt(t.substr(5,2),16)||0,a:parseInt(t.substr(7,2),16)||255}:null},t.rgbaToHex=function(t){var e=(256|t.r).toString(16).slice(1),o=(256|t.g).toString(16).slice(1),i=(256|t.b).toString(16).slice(1);return null==t.a?("#"+e+o+i).toUpperCase():("#"+e+o+i+(256|t.a).toString(16).slice(1)).toUpperCase()},t.createCircleData=function(t,e,o){void 0===o&&(o=60);for(var i=[],n=360,r=0,a=0;a<o;a++){r=(n-=360/o)*Math.PI/180;var s=t*Math.sin(r)+e.x,c=t*Math.cos(r)+e.y;i.push(cc.v2(s,c))}return i},t.getWorldPointsByPolygonComp=function(t){var e=t.getComponent(cc.PolygonCollider);e||(e=t.getComponent(cc.PhysicsPolygonCollider));var o=[],i=[];if(e){o=e.points;var n=e.offset;o.forEach(function(e){var o=cc.v2(e.x+n.x,e.y+n.y);i.push(t.convertToWorldSpaceAR(o))})}return i},t.getAreaByPoints=function(t){for(var e=t.length,o=0,i=0,n=0;n<e-1;++n)o+=t[n].x*t[n+1].y,i+=t[n+1].x*t[n].y;return.5*((o+=t[e-1].x*t[0].y)-(i+t[0].x*t[e-1].y))},t.optimizePoints=function(t){for(var e=[],o=0;o<t.length;o++){var i=t[o],n=Math.floor(1*i.x)/1,r=Math.floor(1*i.y)/1;e.push(cc.v2(n,r))}return e},t.handleOneByOne=function(t,e){return __awaiter(this,void 0,void 0,function(){var o=this;return __generator(this,function(){return this.canHandle?(console.log("\u5e72\u4ed6",(new Date).getTime()),this.canHandle=!1,e&&e(),t.scheduleOnce(function(){o.canHandle=!0;var e=o.missionArr.shift();e&&o.handleOneByOne(t,e)},this.duration)):this.missionArr.push(e),[2]})})},t.isShowLog=!0,t.touchList={},t.poolMap={},t.duration=.1,t.missionArr=[],t.canHandle=!0,__decorate([n],t)}());o.default=r,cc._RF.pop()},{}],LimitRepeat:[function(t,e,o){"use strict";cc._RF.push(e,"67bfbM5sWxPB75KF6nsc/hw","LimitRepeat"),o.LimitRepeat=void 0,o.LimitRepeat=function(t){return void 0===t&&(t=.2),function(e,o,i){var n=i.value,r=!1;i.value=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];if(!r)return r=!0,setTimeout(function(){r=!1},1e3*t),n.apply(this,e),i;console.log("isLocking")}}},cc._RF.pop()},{}],LimitWelfare:[function(t,e,o){"use strict";cc._RF.push(e,"c2580nmbydEqrWYU1DMYQGa","LimitWelfare");var i=t("./BaseUI"),n=t("./EventConst"),r=t("./PlatformConst"),a=t("./UserConst"),s=t("./EventManager"),c=t("./PlatformManager"),l=t("./PopupManager"),h=t("./TipManager"),d=t("./UserManager"),u=t("./OPPOAndroidAdUtils"),p=t("./OPPOMiniADUtils"),f=t("./XMADUtils"),g=t("./ShuShuConst"),m=t("./LocalStorageManager"),v=t("./LocalStorageConst"),y=cc._decorator,_=y.ccclass,C=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=0,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("yesBtn",this.yesBtn,this),this.initView()},e.prototype.initView=function(){var t=d.User.get(a.UserData.EnterSidebar)||0;this.dict.lock.active=1!=t},e.prototype.onEnable=function(){c.Platform.is(r.EPlatform.XIAOMI_ANDROID)?f.XMAD.showBannerFeed():c.Platform.is(r.EPlatform.OPPO_ANDROID)?u.OPPOAndroidAd.showLargeFeed():c.Platform.is(r.EPlatform.OPPO)&&p.OPPOMiniAD.showLargeFeed(),s.Event.on(n.default.EnterSidebar,this.initView,this)},e.prototype.onDisable=function(){c.Platform.is(r.EPlatform.OPPO_ANDROID)&&u.OPPOAndroidAd.removeLargePicFeed(),c.Platform.hideNativeAds(),c.Platform.hideCustomAd1(),c.Platform.hideCustomAd2(),c.Platform.hideCustomAd_1(),c.Platform.hideCustomAd_2(),s.Event.off(n.default.EnterSidebar,this.initView,this)},e.prototype.yesBtn=function(){if(cc.game.emit("gamelog_Thinking",g.ShuShuConst.btn,{id:"010"}),this.dict.lock.active)h.Tip.show("\u8bf7\u4ece\u4fa7\u8fb9\u680f\u8fdb\u5165\u6e38\u620f");else{d.User.set(a.UserData.EnterSidebar,2),h.Tip.show("\u6392\u5e8f\u9053\u5177\u6570\u91cf+1");var t=m.default.get(v.default.SortAmount)||0;t+=1,m.default.set(v.default.SortAmount,t),cc.game.emit("updateSort"),s.Event.emit(n.default.hideLimitWelfareBtn),cc.game.emit("gamelog_Thinking","Sidebar_Reward",{state:"collect"}),l.default.hide()}},e.prototype.noBtn=function(){l.default.hide()},__decorate([_],e)}(i.default));o.default=C,cc._RF.pop()},{"./BaseUI":"BaseUI","./EventConst":"EventConst","./EventManager":"EventManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./OPPOAndroidAdUtils":"OPPOAndroidAdUtils","./OPPOMiniADUtils":"OPPOMiniADUtils","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager","./ShuShuConst":"ShuShuConst","./TipManager":"TipManager","./UserConst":"UserConst","./UserManager":"UserManager","./XMADUtils":"XMADUtils"}],LoadingManager:[function(t,e,o){"use strict";cc._RF.push(e,"750acfRluZDq6HBqxs7/vQJ","LoadingManager"),o.LoadingMgr=void 0;var i=function(){function t(){}return t.prototype.show=function(){cc.find("Canvas/LoadingRoot").active=!0},t.prototype.hide=function(){cc.find("Canvas/LoadingRoot").active=!1},t}();o.LoadingMgr=new i,cc._RF.pop()},{}],Loading:[function(t,e,o){"use strict";cc._RF.push(e,"4284b2heb5DPrSxSLGTf+FE","Loading");var i=t("./EventConst"),n=t("./PlatformConst"),r=t("./PopupConst"),a=t("./SceneConst"),s=t("./EventManager"),c=t("./LanguageManager"),l=t("./PlatformManager"),h=t("./PopupManager"),d=t("./SceneManager"),u=cc._decorator,p=u.ccclass,f=u.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.age=null,e.copyright=null,e.title=null,e.content=null,e.ageSpriteFrame=[],e.logo=null,e.isLoad=!1,e.loginNode=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this,e=l.Platform.getConfig(),o=e.ageTipType;o!=n.AgeTipType.NO&&(this.age.getComponent(cc.Sprite).spriteFrame=this.ageSpriteFrame[o],this.age.active=!0),e.hasCopyright&&(this.copyright.active=!0);var i=this.copyright.getComponent(cc.Label).string.replace(/2020SR0057230/g,e.registerNumber).replace(/\u5e7f\u5dde\u5c0f\u8d1d\u79d1\u6280\u6709\u9650\u516c\u53f8/g,e.registerPerson);this.copyright.getComponent(cc.Label).string=i,console.log("loading",c.default.instance.lan),l.Platform.is(n.EPlatform.ANDROID_GOOGLE)&&("zh"==c.default.instance.lan?l.Platform.getConfig().logoType=n.LogoType.DreamSetUp_TC:"tc"==c.default.instance.lan?l.Platform.getConfig().logoType=n.LogoType.DreamSetUp_TC:l.Platform.getConfig().logoType=n.LogoType.DreamSetUp_EN),cc.resources.load("texture/logo/logo"+e.logoType,function(e,o){if(e)return console.log(e);t.logo.spriteFrame=new cc.SpriteFrame(o)}),e.hasHealthy&&(this.title.active=!0,this.content.active=!0),this.node.getChildByName("recordNumber").getComponent(cc.Label).string=""+e.recordNumber},e.prototype.onEnable=function(){s.Event.on(i.default.ENTER_MAIN,this.enterMain,this),cc.game.on("androidSignInClose",this.androidSignInClose,this),cc.game.on("androidSignInSuc",this.androidSignInSuc,this)},e.prototype.onDisable=function(){s.Event.off(i.default.ENTER_MAIN,this.enterMain,this),cc.game.targetOff(this)},e.prototype.androidSignInClose=function(){var t=this;console.log("\u8c03\u7528\u5b89\u5353\u767b\u5f55\u5931\u8d25"),this.isLoad?this.loginNode&&(this.loginNode.active=!0):(this.isLoad=!0,console.log("\u8c03\u7528\u5b89\u5353\u767b\u5f55\u5931\u8d251"),cc.loader.loadRes("prefab/popup/Login",cc.Prefab,function(e,o){if(e)return console.error("",e);t.loginNode=cc.instantiate(o),t.node.addChild(t.loginNode)}))},e.prototype.androidSignInSuc=function(){console.log("\u5b89\u5353\u56de\u8c03\u767b\u5f55\u6210\u529f"),cc.sys.localStorage.setItem("fknd_login",1),this.loginNode&&(this.loginNode.active=!1),d.default.loadScene(a.SceneConst.Home)},e.prototype.enterMain=function(){var t=this;l.Platform.getConfig().loginType!=n.LoginType.HW?l.Platform.getConfig().loginType!=n.LoginType.HWAndriod?l.Platform.getConfig().privacyPolicyType!=n.PrivacyPolicyType.MINI_GAME&&l.Platform.getConfig().privacyPolicyType!=n.PrivacyPolicyType.MINI_GAME_XM||cc.sys.localStorage.getItem("superBrain_privacypolicy")?this.scheduleOnce(function(){d.default.loadScene(a.SceneConst.Home)},l.Platform.getConfig().loadingDelay):cc.resources.load("prefab/popup/PrivacyPolicy",function(e,o){if(e)return console.error("",e);var i=cc.instantiate(o);t.node.addChild(i),i.getComponent("PrivacyPolicy").open(function(){d.default.loadScene(a.SceneConst.MAIN)})}):cc.sys.localStorage.getItem("fknd_login")?l.Platform.signIn():cc.loader.loadRes("prefab/popup/Login",cc.Prefab,function(e,o){if(e)return console.error("",e);t.loginNode=cc.instantiate(o),t.node.addChild(t.loginNode)}):l.Platform.login().then(function(){console.log("\u767b\u5f55\u6210\u529f"),console.log("\u672c\u5730\u6570\u636e",cc.sys.localStorage.getItem("superBrain_privacypolicy")),cc.sys.localStorage.getItem("superBrain_privacypolicy")?d.default.loadScene(a.SceneConst.MAIN):cc.loader.loadRes("prefab/popup/PrivacyPolicy",cc.Prefab,function(e,o){if(e)return console.error("",e);var i=cc.instantiate(o);t.node.addChild(i),i.getComponent("PrivacyPolicy").open(function(){d.default.loadScene(a.SceneConst.MAIN)})})}).catch(function(e){console.log("\u767b\u5f55\u5931\u8d25",e),cc.loader.loadRes("prefab/popup/Login",cc.Prefab,function(e,o){if(e)return console.error("",e);t.loginNode=cc.instantiate(o),t.node.addChild(t.loginNode)})})},e.prototype.clickAge=function(){h.default.show(r.PopupConst.AGE_TIP)},__decorate([f(cc.Node)],e.prototype,"age",void 0),__decorate([f(cc.Node)],e.prototype,"copyright",void 0),__decorate([f(cc.Node)],e.prototype,"title",void 0),__decorate([f(cc.Node)],e.prototype,"content",void 0),__decorate([f([cc.SpriteFrame])],e.prototype,"ageSpriteFrame",void 0),__decorate([f(cc.Sprite)],e.prototype,"logo",void 0),__decorate([p],e)}(cc.Component);o.default=g,cc._RF.pop()},{"./EventConst":"EventConst","./EventManager":"EventManager","./LanguageManager":"LanguageManager","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./SceneConst":"SceneConst","./SceneManager":"SceneManager"}],LocalStorageConst:[function(t,e,o){"use strict";var i,n;cc._RF.push(e,"5964f5pdjpAapPv2gUSFg6Y","LocalStorageConst"),(n=i||(i={})).offlineTime="offlineTime",n.cardAmount="cardAmount",n.backTimes="backTimes",n.vipStartTime="vipStartTime",n.vipType="vipType",n.isReceiveVIP="isReceiveVIP",n.hasSpecialBtn="hasSpecialBtn",n.isNoAD="isNoAD",n.todayPassTimes="todayPassTimes",n.todayPlayTime="todayPlayTime",n.todayRewardTimes="todayRewardTimes",n.todayPay="todayPay",n.todayPayEvent="todayPayEvent",n.todayClickShip="todayClickShip",n.canTurntableTimes="canTurntableTimes",n.isFirstTurntable="isFirstTurntable",n.allShipName="allShipName",n.allShipRank="allShipRank",n.otherShipForwardTimes="otherShipForwardTimes",n.shipAICount="shipAICount",n.lastTimeHasForward="lastTimeHasForward",n.shipStartTime="shipStartTime",n.shipLevel="shipLevel",n.forwardTimes="forwardTimes",n.allShipUIPos="allShipUIPos",n.todayShipExpire="todayShipExpire",n.openShip="openShip",n.todayClickPlan="todayClickPlan",n.todayClickChallenge="todayClickChallenge",n.challengeStartTime="challengeStartTime",n.challengeUnlockAmount="challengeUnlockAmount",n.challengeReceive="challengeReceive",n.metalAmount="metalAmount",n.planReceive="planReceive",n.planReceive2="planReceive2",n.todayReceiveCard="todayReceiveCard",n.master_pass="master_pass",n.piggy_bank="piggy_bank",n.starter_pack="starter_pack",n.value_pack="value_pack",n.tempCoin="tempCoin",n.newHandBtn="newHandBtn",n.supervalueBtn="supervalueBtn",n.NoFirstAllHole="NoFirstAllHole",n.Collect="collect",n.IsNoFirstRevive="isNoFirstRevive",n.IsNoFirstFail="IsNoFirstFail",n.IsNoFirstProp="IsNoFirstProp",n.IsNoFirstBack="IsNoFirstBack",n.LoopLevelIDArr="LoopLevelIDArr",n.ConfigSuffix="configSuffix",n.HasConfirmLevel="HasConfirmLevel",n.Remove="remove",n.UnlockParking="unlockParking",n.Refresh="refresh",n.BranchVideo="branchVideo",n.CityList="cityList",n.CityListCompatible="cityListCompatible",n.signInDays="signInDays",n.todaySignIn="todaySignIn",n.todaySignInVideo="todaySignInVideo",n.todayOpenSignIn="todayOpenSignIn",n.SkinList="skinList",n.UseSkin="useSkin",n.SkinUnlockVideo="skinUnlockVideo",n.HeroLevel="heroLevel",n.DragonBall="dragonBall",n.Coin="coin",n.SlowDown="slowDown",n.UnlockPos="unlockPos",n.SortAmount="sortAmount",n.Clear="clear",n.FullScreenAttack="fullScreenAttack",o.default=i,cc._RF.pop()},{}],LocalStorageManager:[function(t,e,o){"use strict";cc._RF.push(e,"95077rH7rBOAKUxdnAjyC8H","LocalStorageManager");var i=t("./LocalStorageConst"),n=new(function(){function t(){this.data={},this.gameName="oldDriver_"}return t.prototype.init=function(t,e){var o=this.get(i.default.offlineTime)||(new Date).getTime();this.set(i.default.offlineTime,o),this.nextDayRefresh(t,e)},t.prototype.nextDayRefresh=function(t,e){var o=(new Date).getTime(),n=this.data[i.default.offlineTime];if(!this.isSameMonth()&&e)for(var r in e)this.set(r,e[r]);if(!this.isSameDay()&&o>n){if(this.set(i.default.offlineTime,o),!t)return;for(var r in t)this.set(r,t[r])}},t.prototype.isSameDay=function(){var t=new Date,e=new Date(this.data[i.default.offlineTime]);return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()},t.prototype.isSameMonth=function(){var t=new Date,e=new Date(this.data[i.default.offlineTime]);return t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()},t.prototype.set=function(t,e,o,i){void 0===o&&(o=!0),void 0===i&&(i=!0),this.data[t]=e,i&&cc.sys.localStorage.setItem(""+this.gameName+t,JSON.stringify(e)),o&&cc.game.emit("localStorage_"+t,e)},t.prototype.get=function(t){if(this.data[t])return this.data[t];var e=cc.sys.localStorage.getItem(""+this.gameName+t);return e?JSON.parse(e):null},t.prototype.remove=function(t){delete this.data[t],cc.sys.localStorage.removeItem(""+this.gameName+t)},t.prototype.clear=function(){this.data={},cc.sys.localStorage.clear()},t.prototype.console=function(t){console.log(this.data[t])},t}());o.default=n,cc._RF.pop()},{"./LocalStorageConst":"LocalStorageConst"}],LocalStorage:[function(t,e,o){"use strict";cc._RF.push(e,"378999TrJ9MRoImyJdkFZ4z","LocalStorage");var i=t("./StorageSync"),n=function(){function t(){}return t.getItem=function(t){return void 0===window.localStorage?i.default.getItem(t):window.localStorage.getItem(t)},t.setItem=function(t,e){return void 0===window.localStorage?i.default.setItem(t,e):window.localStorage.setItem(t,e)},t.removeItem=function(t){return void 0===window.localStorage?i.default.removeItem(t):window.localStorage.removeItem(t)},t}();o.default=n,cc._RF.pop()},{"./StorageSync":"StorageSync"}],Logger:[function(t,e,o){"use strict";function i(t,e){var o={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours()%12==0?12:t.getHours()%12,"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(e)&&(e=e.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"\u661f\u671f":"\u5468":"")+"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".charAt(t.getDay()))),o)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?o[i]:("00"+o[i]).substr((""+o[i]).length)));return e}cc._RF.push(e,"eb9750DVjdITq4LPJ9lzjKK","Logger"),o.isLegalLogLevel=o.LOG_LEVEL=void 0,o.LOG_LEVEL={VERBOSE:"verbose",INFO:"info",WARNING:"warning",ERROR:"error",NONE:"none"},o.isLegalLogLevel=function(t){return[o.LOG_LEVEL.VERBOSE,o.LOG_LEVEL.INFO,o.LOG_LEVEL.WARNING,o.LOG_LEVEL.ERROR,o.LOG_LEVEL.NONE].includes(t)};var n=function(){function t(e,o){void 0===e&&(e="none"),void 0===o&&(o="LOG"),this.level=e,this.prefix=o,this.id=t.id}return t.isLegalLogLevel=function(t){return[o.LOG_LEVEL.VERBOSE,o.LOG_LEVEL.INFO,o.LOG_LEVEL.WARNING,o.LOG_LEVEL.ERROR,o.LOG_LEVEL.NONE].includes(t)},t.prototype.getPrintPrefix=function(t){return this.id++,"[wonder-js-sdk] "+i(new Date,"yyyy-MM-ddThh:mm:ss.SZ")+" ["+t.toLocaleUpperCase()+"]["+this.prefix+"#"+this.id+"]:"},t.prototype.setLogLevel=function(t){return this.level=t},t.prototype.getLogLevel=function(){return this.level},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=["info"];o.includes(this.level)&&console.log.apply(console,__spreadArrays([this.getPrintPrefix("info")],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=["info","warn"];o.includes(this.level)&&console.warn.apply(console,__spreadArrays([this.getPrintPrefix("warn")],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=["info","warn","error","verbose"];o.includes(this.level)&&console.error.apply(console,__spreadArrays([this.getPrintPrefix("error")],t))},t.prototype.verbose=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=["info","warn","error","verbose"];o.includes(this.level)&&console.error.apply(console,__spreadArrays([this.getPrintPrefix("verbose")],t))},t.id=0,t.LOG_LEVEL={VERBOSE:"verbose",INFO:"info",WARNING:"warning",ERROR:"error",NONE:"none"},t}();o.default=n,cc._RF.pop()},{}],Login2:[function(t,e,o){"use strict";cc._RF.push(e,"4b51afq9lJMyKxr9pPxCS8x","Login2");var i=t("./PlatformConst"),n=t("./SceneConst"),r=t("./PlatformManager"),a=t("./SceneManager"),s=cc._decorator,c=s.ccclass,l=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mask=null,e.content=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.mask.getComponent(cc.Button).enabled=!1},e.prototype.clickLogin=function(){var t=this;console.log("\u70b9\u51fb\u767b\u5f55"),r.Platform.getConfig().loginType==i.LoginType.HWAndriod?r.Platform.signIn():r.Platform.getConfig().loginType==i.LoginType.HW&&r.Platform.login().then(function(){t.content.active=!1,cc.sys.localStorage.getItem("superBrain_privacypolicy")?a.default.loadScene(n.SceneConst.MAIN):cc.loader.loadRes("prefab/popup/PrivacyPolicy",cc.Prefab,function(e,o){if(e)return console.error("",e);var i=cc.instantiate(o);t.node.addChild(i),i.getComponent("PrivacyPolicy").open(function(){a.default.loadScene(n.SceneConst.MAIN)})})}).catch(function(){t.content.active=!1,t.mask.getComponent(cc.Button).enabled=!0})},e.prototype.clickCancel=function(){console.log("\u70b9\u51fb\u53d6\u6d88"),this.content.active=!1,this.mask.getComponent(cc.Button).enabled=!0,console.log("\u70b9\u51fb\u53d6\u6d880")},e.prototype.clickShowContent=function(){this.content.active=!0},__decorate([l(cc.Node)],e.prototype,"mask",void 0),__decorate([l(cc.Node)],e.prototype,"content",void 0),__decorate([c],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./SceneConst":"SceneConst","./SceneManager":"SceneManager"}],Login:[function(t,e,o){"use strict";cc._RF.push(e,"ab35dAQdupCxpxGtt20wS0X","Login");var i=function(){function t(){}return t.prototype.login=function(t){window.tt&&window.wxapi.login(t)},t}();o.default=new i,cc._RF.pop()},{}],LuckTurntable:[function(t,e,o){"use strict";cc._RF.push(e,"d2305ltsO9Pqqx4LbEvyV+I","LuckTurntable");var i=t("./FrameAnim"),n=t("./Turntable"),r=t("./EventConst"),a=t("./PopupConst"),s=t("./UIBase"),c=t("./LocalStorageConst"),l=t("./LocalStorageManager"),h=t("./MemoryStorageConst"),d=t("./MemoryStorageManager"),u=t("./BmsManager"),p=t("./EventManager"),f=t("./LanguageManager"),g=t("./PlatformManager"),m=t("./PopupManager"),v=t("./UserManager"),y=t("./Utils"),_=t("./ShuShuConst"),C=cc._decorator,b=C.ccclass,S=(C.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.reward=[[0,1,10],[1,100,40],[0,1,9],[1,100,32.5],[0,2,.5],[1,300,5],[0,3,.5],[1,500,2.5]],e._isRunning=!1,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.node.setContentSize(cc.winSize),this.addBtnOn("yesBtn",this.yesBtn,this),this.addBtnOn("noBtn",this.noBtn,this),cc.game.emit("gamelog_Thinking",_.ShuShuConst.Activity_page,{id:1}),this.initView()},e.prototype.initView=function(){this.dict["title_"+f.default.instance.lan]&&(this.dict["title_"+f.default.instance.lan].active=!0)},e.prototype.yesBtn=function(){var t=this;if(!this._isRunning){this._isRunning=!0;var e,o=[];this.reward.forEach(function(t,e){o.push([e,t[2]])});var r=l.default.get(c.default.isFirstTurntable)||0,s=l.default.get(c.default.canTurntableTimes)||0;r?(e=y.Utils.randomByWeight(o),s-=8):(l.default.set(c.default.isFirstTurntable,1),e=2,s-=6),console.log("\u6743\u91cd",o,e),l.default.set(c.default.canTurntableTimes,s),cc.game.emit("canTurntableTimes"),this.node.getComponent(n.default).startRun(e,function(){var o;console.log("\u7ed3\u675f"),t.dict.light.getComponent(i.default).stopAnim(),t._isRunning=!1;var n=t.reward[e][0],r=t.reward[e][1];0==n?(o=[["card",r]],t.cardReward(r)):(o=[["coin",r]],t.coinReward(r)),t.noBtn(),d.default.set(h.default.rewardType,"LuckTurntable"),d.default.set(h.default.reward,o),cc.game.emit("gamelog_Thinking",_.ShuShuConst.Activity_get,{id:1}),m.default.show(a.PopupConst.Get)}),this.dict.light.getComponent(i.default).playLoop()}},e.prototype.cardReward=function(t){var e=(l.default.get(c.default.cardAmount)||0)+t;l.default.set(c.default.cardAmount,e)},e.prototype.coinReward=function(t){var e=(v.User.get("coin")||0)+t;v.User.set("coin",e),p.Event.emit(r.default.COIN_UPDATE),cc.game.emit("updateCoin"),this.saveServerData("coin",e)},e.prototype.saveServerData=function(t,e){e=e.toString(),u.BMS.saveServerData(g.Platform.getConfig().flag,v.User.get("googleID")||v.User.get("uuid"),t,e).then(function(){console.log("\u4fdd\u5b58"+t+"\u6210\u529f:"+e)})},e.prototype.noBtn=function(){m.default.hide()},__decorate([b],e)}(s.default));o.default=S,cc._RF.pop()},{"./BmsManager":"BmsManager","./EventConst":"EventConst","./EventManager":"EventManager","./FrameAnim":"FrameAnim","./LanguageManager":"LanguageManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./MemoryStorageConst":"MemoryStorageConst","./MemoryStorageManager":"MemoryStorageManager","./PlatformManager":"PlatformManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./ShuShuConst":"ShuShuConst","./Turntable":"Turntable","./UIBase":"UIBase","./UserManager":"UserManager","./Utils":"Utils"}],MD5Type:[function(t,e,o){"use strict";cc._RF.push(e,"89eb2Dgc1BMBbs4hH3Ak6dv","MD5Type"),o.Md5=void 0;var i=function(){function t(){}return t.prototype.safeAdd=function(t,e){var o=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(o>>16)<<16|65535&o},t.prototype.bitRotateLeft=function(t,e){return t<<e|t>>>32-e},t.prototype.md5cmn=function(t,e,o,i,n,r){return this.safeAdd(this.bitRotateLeft(this.safeAdd(this.safeAdd(e,t),this.safeAdd(i,r)),n),o)},t.prototype.md5ff=function(t,e,o,i,n,r,a){return this.md5cmn(e&o|~e&i,t,e,n,r,a)},t.prototype.md5gg=function(t,e,o,i,n,r,a){return this.md5cmn(e&i|o&~i,t,e,n,r,a)},t.prototype.md5hh=function(t,e,o,i,n,r,a){return this.md5cmn(e^o^i,t,e,n,r,a)},t.prototype.md5ii=function(t,e,o,i,n,r,a){return this.md5cmn(o^(e|~i),t,e,n,r,a)},t.prototype.binlMD5=function(t,e){var o,i,n,r,a;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var s=1732584193,c=-271733879,l=-1732584194,h=271733878;for(o=0;o<t.length;o+=16)i=s,n=c,r=l,a=h,s=this.md5ff(s,c,l,h,t[o],7,-680876936),h=this.md5ff(h,s,c,l,t[o+1],12,-389564586),l=this.md5ff(l,h,s,c,t[o+2],17,606105819),c=this.md5ff(c,l,h,s,t[o+3],22,-1044525330),s=this.md5ff(s,c,l,h,t[o+4],7,-176418897),h=this.md5ff(h,s,c,l,t[o+5],12,1200080426),l=this.md5ff(l,h,s,c,t[o+6],17,-1473231341),c=this.md5ff(c,l,h,s,t[o+7],22,-45705983),s=this.md5ff(s,c,l,h,t[o+8],7,1770035416),h=this.md5ff(h,s,c,l,t[o+9],12,-1958414417),l=this.md5ff(l,h,s,c,t[o+10],17,-42063),c=this.md5ff(c,l,h,s,t[o+11],22,-1990404162),s=this.md5ff(s,c,l,h,t[o+12],7,1804603682),h=this.md5ff(h,s,c,l,t[o+13],12,-40341101),l=this.md5ff(l,h,s,c,t[o+14],17,-1502002290),c=this.md5ff(c,l,h,s,t[o+15],22,1236535329),s=this.md5gg(s,c,l,h,t[o+1],5,-165796510),h=this.md5gg(h,s,c,l,t[o+6],9,-1069501632),l=this.md5gg(l,h,s,c,t[o+11],14,643717713),c=this.md5gg(c,l,h,s,t[o],20,-373897302),s=this.md5gg(s,c,l,h,t[o+5],5,-701558691),h=this.md5gg(h,s,c,l,t[o+10],9,38016083),l=this.md5gg(l,h,s,c,t[o+15],14,-660478335),c=this.md5gg(c,l,h,s,t[o+4],20,-405537848),s=this.md5gg(s,c,l,h,t[o+9],5,568446438),h=this.md5gg(h,s,c,l,t[o+14],9,-1019803690),l=this.md5gg(l,h,s,c,t[o+3],14,-187363961),c=this.md5gg(c,l,h,s,t[o+8],20,1163531501),s=this.md5gg(s,c,l,h,t[o+13],5,-1444681467),h=this.md5gg(h,s,c,l,t[o+2],9,-51403784),l=this.md5gg(l,h,s,c,t[o+7],14,1735328473),c=this.md5gg(c,l,h,s,t[o+12],20,-1926607734),s=this.md5hh(s,c,l,h,t[o+5],4,-378558),h=this.md5hh(h,s,c,l,t[o+8],11,-2022574463),l=this.md5hh(l,h,s,c,t[o+11],16,1839030562),c=this.md5hh(c,l,h,s,t[o+14],23,-35309556),s=this.md5hh(s,c,l,h,t[o+1],4,-1530992060),h=this.md5hh(h,s,c,l,t[o+4],11,1272893353),l=this.md5hh(l,h,s,c,t[o+7],16,-155497632),c=this.md5hh(c,l,h,s,t[o+10],23,-1094730640),s=this.md5hh(s,c,l,h,t[o+13],4,681279174),h=this.md5hh(h,s,c,l,t[o],11,-358537222),l=this.md5hh(l,h,s,c,t[o+3],16,-722521979),c=this.md5hh(c,l,h,s,t[o+6],23,76029189),s=this.md5hh(s,c,l,h,t[o+9],4,-640364487),h=this.md5hh(h,s,c,l,t[o+12],11,-421815835),l=this.md5hh(l,h,s,c,t[o+15],16,530742520),c=this.md5hh(c,l,h,s,t[o+2],23,-995338651),s=this.md5ii(s,c,l,h,t[o],6,-198630844),h=this.md5ii(h,s,c,l,t[o+7],10,1126891415),l=this.md5ii(l,h,s,c,t[o+14],15,-1416354905),c=this.md5ii(c,l,h,s,t[o+5],21,-57434055),s=this.md5ii(s,c,l,h,t[o+12],6,1700485571),h=this.md5ii(h,s,c,l,t[o+3],10,-1894986606),l=this.md5ii(l,h,s,c,t[o+10],15,-1051523),c=this.md5ii(c,l,h,s,t[o+1],21,-2054922799),s=this.md5ii(s,c,l,h,t[o+8],6,1873313359),h=this.md5ii(h,s,c,l,t[o+15],10,-30611744),l=this.md5ii(l,h,s,c,t[o+6],15,-1560198380),c=this.md5ii(c,l,h,s,t[o+13],21,1309151649),s=this.md5ii(s,c,l,h,t[o+4],6,-145523070),h=this.md5ii(h,s,c,l,t[o+11],10,-1120210379),l=this.md5ii(l,h,s,c,t[o+2],15,718787259),c=this.md5ii(c,l,h,s,t[o+9],21,-343485551),s=this.safeAdd(s,i),c=this.safeAdd(c,n),l=this.safeAdd(l,r),h=this.safeAdd(h,a);return[s,c,l,h]},t.prototype.binl2rstr=function(t){var e,o="",i=32*t.length;for(e=0;e<i;e+=8)o+=String.fromCharCode(t[e>>5]>>>e%32&255);return o},t.prototype.rstr2binl=function(t){var e,o=[];for(o[(t.length>>2)-1]=void 0,e=0;e<o.length;e+=1)o[e]=0;var i=8*t.length;for(e=0;e<i;e+=8)o[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return o},t.prototype.rstrMD5=function(t){return this.binl2rstr(this.binlMD5(this.rstr2binl(t),8*t.length))},t.prototype.rstrHMACMD5=function(t,e){var o,i,n=this.rstr2binl(t),r=[],a=[];for(r[15]=a[15]=void 0,n.length>16&&(n=this.binlMD5(n,8*t.length)),o=0;o<16;o+=1)r[o]=909522486^n[o],a[o]=1549556828^n[o];return i=this.binlMD5(r.concat(this.rstr2binl(e)),512+8*e.length),this.binl2rstr(this.binlMD5(a.concat(i),640))},t.prototype.rstr2hex=function(t){var e,o,i="";for(o=0;o<t.length;o+=1)e=t.charCodeAt(o),i+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(15&e);return i},t.prototype.str2rstrUTF8=function(t){return unescape(encodeURIComponent(t))},t.prototype.rawMD5=function(t){return this.rstrMD5(this.str2rstrUTF8(t))},t.prototype.hexMD5=function(t){return this.rstr2hex(this.rawMD5(t))},t.prototype.rawHMACMD5=function(t,e){return this.rstrHMACMD5(this.str2rstrUTF8(t),this.str2rstrUTF8(e))},t.prototype.hexHMACMD5=function(t,e){return this.rstr2hex(this.rawHMACMD5(t,e))},t.prototype.md5=function(t,e,o){return e?o?this.rawHMACMD5(e,t):this.hexHMACMD5(e,t):o?this.rawMD5(t):this.hexMD5(t)},t}();o.Md5=i,cc._RF.pop()},{}],MainVideoTip:[function(t,e,o){"use strict";cc._RF.push(e,"4e58eZKPJNAtKS2GCLrjH1a","MainVideoTip");var i=t("./BaseUI"),n=t("./EventConst"),r=t("./PlatformConst"),a=t("./UserConst"),s=t("./BmsManager"),c=t("./EventManager"),l=t("./PlatformManager"),h=t("./PopupManager"),d=t("./UserManager"),u=t("./OPPOAndroidAdUtils"),p=t("./OPPOMiniADUtils"),f=t("./VIVOADUtils"),g=t("./XMADUtils"),m=cc._decorator,v=m.ccclass,y=m.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text=null,e.iconSp=[],e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("shareBtn",this.clickShare,this),this.addBtnOn("noBtn",this.noBtn,this),cc.game.on("shareSuc_",this.shareSuc_,this),this.initView()},e.prototype.onDestroy=function(){cc.game.off("shareSuc_",this.shareSuc_,this)},e.prototype.shareSuc_=function(){this.noBtn()},e.prototype.clickShare=function(){var t=s.BMS.getKey("isItems"),e=s.BMS.getKey("itemNum"),o=d.User.get("nation"),i=0;l.Platform.showRewardAds(function(r){if(0==r){switch(d.User.getTempData("mainVideoTip")){case"bore":c.Event.emit(n.default.boreBtn),i=3;break;case"restart":cc.game.emit("onRestartBtn"),i=0;break;case"tip":cc.game.emit("tipSuc"),i=2;break;case"chehui":window.levelContent._components[0].func_reBackOne(),i=1}var s=d.User.get(a.UserData.todayShareOrVideoTimes)||0;if(s+=1,d.User.set(a.UserData.todayShareOrVideoTimes,s),cc.game.emit("updateTodayShareOrVideoTimes"),t.includes(o)){var l=e[i];if(l>1)if(1==i){var u=d.User.get("backTimes")||0;u+=l-1,d.User.set("backTimes",u),cc.game.emit("updateBackView")}else 2==i?(u=d.User.get(a.UserData.tipTimes)||0,u+=l-1,d.User.set(a.UserData.tipTimes,u),cc.game.emit("updateTipTimesView")):3==i?(u=d.User.get(a.UserData.boreTimes)||0,u+=l-1,d.User.set(a.UserData.boreTimes,u),cc.game.emit("updateBoreView")):0==i&&(u=d.User.get("restartTimes")||0,u+=l-1,d.User.set("restartTimes",u),cc.game.emit("updateRestartView"))}h.default.hide()}})},e.prototype.noBtn=function(){h.default.hide()},e.prototype.onEnable=function(){l.Platform.is(r.EPlatform.XIAOMI_ANDROID)?(g.XMAD.showLargeFeed(),g.XMAD.showInterstitialFeed_result()):l.Platform.is(r.EPlatform.OPPO_ANDROID)?(u.OPPOAndroidAd.showLargeFeed(),u.OPPOAndroidAd.showInterstitialFeed_result()):l.Platform.is(r.EPlatform.OPPO)?(p.OPPOMiniAD.showLargeFeed(),p.OPPOMiniAD.showInterstitialFeed_result()):l.Platform.is(r.EPlatform.VIVO)&&f.VIVOAD.showCustomAd_1(function(){f.VIVOAD.showCustomAd_2()})},e.prototype.onDisable=function(){l.Platform.is(r.EPlatform.XIAOMI_ANDROID)?g.XMAD.removeLargePicFeed():l.Platform.is(r.EPlatform.OPPO_ANDROID)&&u.OPPOAndroidAd.removeLargePicFeed(),l.Platform.hideNativeAds(),l.Platform.hideCustomAd1(),l.Platform.hideCustomAd2(),l.Platform.hideCustomAd_1(),l.Platform.hideCustomAd_2()},e.prototype.initView=function(){switch(d.User.getTempData("mainVideoTip")){case"bore":this.dict.text.getComponent(cc.Label).string="\u6253\u5f00\u4e00\u4e2a\u65b0\u5b54\u4f4d",this.dict.title.getComponent(cc.Label).string="\u6253\u5b54",this.dict.icon.getComponent(cc.Sprite).spriteFrame=this.iconSp[2];break;case"restart":this.dict.text.getComponent(cc.Label).string="\u91cd\u7f6e\u672c\u5c0f\u5173",this.dict.title.getComponent(cc.Label).string="\u91cd\u7f6e",this.dict.icon.getComponent(cc.Sprite).spriteFrame=this.iconSp[0];break;case"tip":this.dict.text.getComponent(cc.Label).string="\u83b7\u5f97\u901a\u5173\u7684\u63d0\u793a",this.dict.title.getComponent(cc.Label).string="\u63d0\u793a",this.dict.icon.getComponent(cc.Sprite).spriteFrame=this.iconSp[1];break;case"chehui":this.dict.text.getComponent(cc.Label).string="\u64a4\u56de\u5230\u4e0a\u4e00\u6b65",this.dict.title.getComponent(cc.Label).string="\u64a4\u56de",this.dict.icon.getComponent(cc.Sprite).spriteFrame=this.iconSp[3]}},__decorate([y([cc.SpriteFrame])],e.prototype,"iconSp",void 0),__decorate([v],e)}(i.default);o.default=_,cc._RF.pop()},{"./BaseUI":"BaseUI","./BmsManager":"BmsManager","./EventConst":"EventConst","./EventManager":"EventManager","./OPPOAndroidAdUtils":"OPPOAndroidAdUtils","./OPPOMiniADUtils":"OPPOMiniADUtils","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager","./UserConst":"UserConst","./UserManager":"UserManager","./VIVOADUtils":"VIVOADUtils","./XMADUtils":"XMADUtils"}],Main:[function(t,e,o){"use strict";cc._RF.push(e,"35172NoSbZPPYid4sFKUrOS","Main");var i=t("./BaseUI"),n=t("./AudioConst"),r=t("./ConfigConst"),a=t("./EventConst"),s=t("./PlatformConst"),c=t("./PopupConst"),l=t("./SceneConst"),h=t("./UserConst"),d=t("./AudioManager"),u=t("./BmsManager"),p=t("./ConfigManager"),f=t("./EventManager"),g=t("./LanguageManager"),m=t("./PlatformManager"),v=t("./PopupManager"),y=t("./SceneManager"),_=t("./UserManager"),C=t("./ChallengeHttp"),b=t("./ConfigUtils"),S=t("./OPPOAndroidAdUtils"),w=t("./VIVOADUtils"),A=t("./XMADUtils"),k=t("./ShuShuConst"),P=cc._decorator,T=P.ccclass,B=P.property,M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickTimes=0,e.ageSpriteFrame=[],e.logoSpriteFrame=[],e.secondModeData=null,e.thirdModesData=[],e.darenModesData=[],e.rankList=[],e.isLoadingScene=!1,e.isLoadPrivacy=!1,e.isEnterUgc=!1,e.isAnim=!1,e.isShow=!1,e}return __extends(e,t),e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this),this.addBtnOn("setBtn",this.clickSet,this),this.addBtnOn("startBtn",this.clickStart,this),this.addBtnOn("infinitePowerBtn",this.clickInfinitePower,this),this.addBtnOn("hotModeBtn",this.clickHotMode,this),this.addBtnOn("moreModeBtn",this.clickMoreMode,this),this.addBtnOn("ageBtn",this.clickAge,this),this.addBtnOn("privacyBtn",this.clickPrivacy,this),this.addBtnOn("appointBtn",this.clickAppoint,this),this.addBtnOn("moreGameBtn",this.clickMoreGame,this),this.addBtnOn("levelSelectBtn",this.clickLevelSelect,this),this.addBtnOn("createBtn",this.clickCreateBtn,this),this.addBtnOn("ageBtn",this.clickAgeBtn,this),this.addBtnOn("followBtn",this.clickFollowBtn,this),this.addBtnOn("secondBtn",this.clickSecondMode,this),this.addBtnOn("3Btn",this.click3Mode,this),this.addBtnOn("4Btn",this.click4Mode,this),this.addBtnOn("thirdBtn",this.clickThirdMode,this),this.addBtnOn("beeBtn",this.clickBeeBtn,this),this.addBtnOn("modeJumpBtn",this.modeJumpBtn,this),this.addBtnOn("closeDaren",this.closeDaren,this),this.addBtnOn("darenJump",this.darenJump,this),this.addBtnOn("unlockAllModeBtn",this.unlockAllModeBtn,this),this.addBtnOn("orderBtn",this.orderBtn,this),this.dict.cheats.on(cc.Node.EventType.TOUCH_START,this.clickCheats,this),this.dict.clickBg.on(cc.Node.EventType.TOUCH_START,function(){e.isShow&&e.clickThirdMode()},this),this.dict.clickBg._touchListener&&this.dict.clickBg._touchListener.setSwallowTouches(!1),this.initPlatformUI(),this.initView(),m.Platform.is(s.EPlatform.XIAOMI_ANDROID)&&A.XMAD.showInsert_must(),cc.game.emit("gamelog_Thinking",k.ShuShuConst.page,{id:"001"})},e.prototype.onEnable=function(){f.Event.on(a.default.UPDATE_INFINITE_POWER,this.updateInfinitePower,this),f.Event.on(a.default.updateUnlockAllMode,this.updateUnlockAllMode,this),f.Event.on(a.default.ENTER_ID,this.sucEnterByMode,this),m.Platform.is(s.EPlatform.XIAOMI_ANDROID)?A.XMAD.showBannerFeed():m.Platform.is(s.EPlatform.OPPO_ANDROID)?S.OPPOAndroidAd.showBannerFeed():m.Platform.is(s.EPlatform.VIVO)&&w.VIVOAD.showCustomAd_1()},e.prototype.onDisable=function(){f.Event.off(a.default.UPDATE_INFINITE_POWER,this.updateInfinitePower,this),f.Event.off(a.default.updateUnlockAllMode,this.updateUnlockAllMode,this),f.Event.off(a.default.ENTER_ID,this.sucEnterByMode,this),m.Platform.hideCustomAd_1(),m.Platform.hideCustomAd_2()},e.prototype.updateInfinitePower=function(t){this.dict.infinitePowerBtn.active=!t},e.prototype.updateUnlockAllMode=function(){this.dict.unlockAllModeBtn.active=!1},e.prototype.initView=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,i,a,s,l,f,g,y,C,b,S,w,A,k,P,T,B,M;return __generator(this,function(I){switch(I.label){case 0:return t=_.User.get(h.UserData.LEVEL_LIST)||{},[4,p.Config.get(r.ConfigConst.THEME)];case 1:for(e=I.sent(),_.User.setTempData(h.TempData.CURRENT_ALL_MODE,e),k=0;k<e.length;k++)a=e[k].theme,t[a]||(t[a]=1),2==e[k].id?this.secondModeData=e[k]:e[k].id>=3&&this.thirdModesData.push(e[k]),this.darenModesData.push(e[k]);for(_.User.set(h.UserData.LEVEL_LIST,t),o=_.User.get(h.UserData.ALREADY_PLAY)||{},k=0;k<e.length;k++)a=e[k].theme,o[a]||(o[a]=[]);for(_.User.set(h.UserData.ALREADY_PLAY,o),i=_.User.get(h.UserData.ALREADY_UNLOCK)||{},k=0;k<e.length;k++)a=e[k].theme,i[a]||(i[a]=[1]);if(_.User.set(h.UserData.ALREADY_UNLOCK,i),s=_.User.get(h.UserData.UNLOCK_ALL_MODE_VIDEO_TIMES)||0,l=_.User.get(h.UserData.UNLOCK_MODE_LIST)||[],(2==s||l.length>=e.length)&&(this.dict.unlockAllModeBtn.active=!1),_.User.setTempData(h.TempData.POWER_TYPE,1),_.User.get(h.UserData.FIRST_DAY_DATE)){if(console.log("\u8001\u7528\u6237",m.Platform.getConfig().flag.indexOf("tt")),-1!=m.Platform.getConfig().flag.indexOf("tt")&&(y=_.User.get(h.UserData.IS_COMPATIBLE_233)||0,console.log("\u662f\u5426\u5df2\u7ecf\u517c\u5bb9",y),!y)){for(w in C=_.User.get(h.UserData.LEVEL_LIST),console.log("levelList",JSON.stringify(C)),b={},S={},C){for(A=C[w],b[w]=[],S[w]=[],k=1;k<=A-1&&!(b[w].length>=580);k++)b[w].push(k);for(k=1;k<=A&&!(b[w].length>=580);k++)S[w].push(k)}console.log("\u901a\u5173\u5217\u8868",JSON.stringify(b)),console.log("\u89e3\u9501\u5217\u8868",JSON.stringify(S)),_.User.set(h.UserData.IS_COMPATIBLE_233,1),_.User.set(h.UserData.ALREADY_PLAY,b),_.User.set(h.UserData.ALREADY_UNLOCK,S)}}else{for(w in _.User.set(h.UserData.FIRST_DAY_DATE,(new Date).getDate()),f=_.User.get(h.UserData.LEVEL_LIST),g={},S={},f)g[w]=[],S[w]=[1];_.User.set(h.UserData.IS_COMPATIBLE_233,1),_.User.set(h.UserData.ALREADY_PLAY,g),_.User.set(h.UserData.ALREADY_UNLOCK,S)}return P=u.BMS.getKey("GM"),this.dict.cheats.active=!!P,T=u.BMS.getKey("ugc"),this.dict.createBtn.active=!!T,B=u.BMS.getKey("AllThemeUnlock"),this.dict.unlockAllModeBtn.active=!!B,M=u.BMS.getKey("WuxianTiLi"),this.dict.infinitePowerBtn.active=0!=M,_.User.get(h.UserData.INF_POWER_VIDEO_TIMES)>=3&&this.updateInfinitePower(!0),d.Audio.playMusic(n.AudioConst.BGM_MAIN),cc.game.emit("gamelog","page001"),this.dict.version.getComponent(cc.Label).string=m.Platform.getConfig().version,window.wrongful&&v.default.show(c.PopupConst.STOP),this.judgeMainMode(0),this.updateSkin(),[2]}})})},e.prototype.getRank=function(){var t=this,e=new Date,o=this.showTime(e.getMonth()+1),i=this.showTime(e.getDate()),n="province_"+o+i+"_"+m.Platform.getConfig().rank;"haiwai"==m.Platform.getConfig().rank&&(n="country_"+o+i+"_"+m.Platform.getConfig().rank),C.challengeHttp.getRank(n,"1").then(function(e){if(console.log("\u6392\u884c\u699c\u6570\u636e",e),e.total){var o=[],i=0;for(var a in e.list)i+=1,o.push({id:i,province:a,score:e.list[a].score});console.log("list",o),t.rankList=o}else{var s=r.ConfigConst.Rank;"haiwai"==m.Platform.getConfig().rank&&(s=r.ConfigConst.RankHW),p.Config.get(s).then(function(e){console.log("\u5047\u6570\u636e",e);for(var o=0;o<e.length;o++){var i=e[o];C.challengeHttp.incrRank(n,i.province,i.score).then(function(){console.log("\u987a\u4fbf\u4e0a\u4f20")})}t.rankList=e,t.rankList.sort(function(t,e){return e.score-t.score})})}})},e.prototype.showTime=function(t){return t>10?t:"0"+t},e.prototype.updateSkin=function(){var t={0:[0],1:[0],2:[0],3:[0],4:[0],5:[0]};m.Platform.getConfig().appID.includes("wxb5f506d7c427c834")&&(t={0:[0],1:[2],2:[3],3:[0],4:[0],5:[0]},_.User.set(h.UserData.skinList,t));var e=_.User.get(h.UserData.skinList)||t;_.User.set(h.UserData.skinList,e);var o={0:0,1:0,2:0,3:0,4:0,5:0};m.Platform.getConfig().appID.includes("wxb5f506d7c427c834")&&(o={0:0,1:2,2:3,3:0,4:0,5:0},_.User.set(h.UserData.useSkinIDList,o));var i=_.User.get(h.UserData.useSkinIDList)||o;_.User.set(h.UserData.useSkinIDList,i);var n=_.User.get(h.UserData.getLockSkinList)||{0:[],1:[],2:[],3:[],4:[],5:[]};_.User.set(h.UserData.getLockSkinList,n)},e.prototype.judgeMainMode=function(t){var e,o=this,i=_.User.get(h.UserData.mode0LevelList_stage1ID)||[],n=_.User.get(h.UserData.mode0LevelList_stage2ID)||[],a=_.User.get(h.UserData.mode1LevelList_stage1ID)||[],c=_.User.get(h.UserData.mode1LevelList_stage2ID)||[],l=(_.User.get(h.UserData.mode2LevelList_stage1ID),_.User.get(h.UserData.mode2LevelList_stage2ID),[]),d=[],f=[],g=[];0==t?p.Config.get(r.ConfigConst.THEME+0+m.Platform.getConfig().configSuffix).then(function(t){if(m.Platform.is(s.EPlatform.WEB)){for(var o=0;o<t.length;o++){var r=t[o];l.push(r.stage1ID),d.push(r.stage2ID)}_.User.set(h.UserData.mode0LevelList_stage1ID,l),_.User.set(h.UserData.mode0LevelList_stage2ID,d)}else if(t.length>i.length&&0!=i.length){for(o=0;o<t.length;o++)r=t[o],o>i.length-1&&(l.push(r.stage1ID),d.push(r.stage2ID));l.sort(function(){return.5-Math.random()}),d.sort(function(){return.5-Math.random()}),l=i.concat(l),d=n.concat(d),console.log("\u6709\u65b0\u589e\u5173\u5361"),_.User.set(h.UserData.mode0LevelList_stage1ID,l),_.User.set(h.UserData.mode0LevelList_stage2ID,d)}else if(0==i.length){var a=[],c=[],p=[],f=[],g=[],v=[],y=[],C=[];for(o=0;o<t.length;o++)r=t[o],0==o&&(e=r.stage1ID),o<5?(a.push(r.stage1ID),c.push(r.stage2ID)):o<10?(p.push(r.stage1ID),f.push(r.stage2ID)):o<50?(g.push(r.stage1ID),v.push(r.stage2ID)):(y.push(r.stage1ID),C.push(r.stage2ID));if(a.sort(function(){return.5-Math.random()}),c.sort(function(){return.5-Math.random()}),p.sort(function(){return.5-Math.random()}),f.sort(function(){return.5-Math.random()}),g.sort(function(){return.5-Math.random()}),v.sort(function(){return.5-Math.random()}),y.sort(function(){return.5-Math.random()}),C.sort(function(){return.5-Math.random()}),l=a.concat(p).concat(g).concat(y),d=c.concat(f).concat(v).concat(C),u.BMS.getKey("mainModeID"))l=p.concat(a).concat(g),d=f.concat(c).concat(v);else{var b=l.indexOf(e),S=l[0];l[0]=e,l[b]=S}console.log("\u6ca1\u6709\u65b0\u589e\u5173\u5361\u4e14\u662f\u65b0\u7528\u6237"),_.User.set(h.UserData.mode0LevelList_stage1ID,l),_.User.set(h.UserData.mode0LevelList_stage2ID,d)}else console.log("\u8001\u7528\u6237");console.log("\u6253\u87ba\u4e1d",l,d)}):1==t?p.Config.get(r.ConfigConst.THEME+1).then(function(t){if(m.Platform.is(s.EPlatform.WEB)){for(var e=0;e<t.length;e++){var o=t[e];f.push(o.stage1ID),g.push(o.stage2ID)}_.User.set(h.UserData.mode1LevelList_stage1ID,f),_.User.set(h.UserData.mode1LevelList_stage2ID,g)}else if(t.length>a.length&&0!=a.length){for(e=0;e<t.length;e++)o=t[e],e>a.length-1&&(f.push(o.stage1ID),g.push(o.stage2ID));f.sort(function(){return.5-Math.random()}),g.sort(function(){return.5-Math.random()}),f=a.concat(f),g=c.concat(g),_.User.set(h.UserData.mode1LevelList_stage1ID,f),_.User.set(h.UserData.mode1LevelList_stage2ID,g)}else if(0==a.length){var i=[],n=[],r=[],l=[];for(e=0;e<t.length;e++)o=t[e],e<5?(i.push(o.stage1ID),n.push(o.stage2ID)):(r.push(o.stage1ID),l.push(o.stage2ID));i.sort(function(){return.5-Math.random()}),n.sort(function(){return.5-Math.random()}),r.sort(function(){return.5-Math.random()}),l.sort(function(){return.5-Math.random()}),f=i.concat(r),g=n.concat(l),_.User.set(h.UserData.mode1LevelList_stage1ID,f),_.User.set(h.UserData.mode1LevelList_stage2ID,g)}else console.log("\u8001\u7528\u6237");console.log("\u6e05\u7406",f,g)}):p.Config.get(r.ConfigConst.THEME).then(function(e){e.forEach(function(e){e.theme==t&&o.handleModeByID(e.theme)})})},e.prototype.handleModeByID=function(t){var e=[],o=[],i=_.User.get("mode"+t+"LevelList_stage1ID")||[],n=_.User.get("mode"+t+"LevelList_stage2ID")||[];p.Config.get(r.ConfigConst.THEME+t).then(function(r){if(m.Platform.is(s.EPlatform.WEB)){for(var a=0;a<r.length;a++){var c=r[a];e.push(c.stage1ID),o.push(c.stage2ID)}_.User.set("mode"+t+"LevelList_stage1ID",e),_.User.set("mode"+t+"LevelList_stage2ID",o)}else if(r.length>i.length&&0!=i.length){for(a=0;a<r.length;a++)c=r[a],a>i.length-1&&(e.push(c.stage1ID),o.push(c.stage2ID));e.sort(function(){return.5-Math.random()}),o.sort(function(){return.5-Math.random()}),e=i.concat(e),o=n.concat(o),_.User.set("mode"+t+"LevelList_stage1ID",e),_.User.set("mode"+t+"LevelList_stage2ID",o)}else if(0==i.length){for(a=0;a<r.length;a++)c=r[a],e.push(c.stage1ID),o.push(c.stage2ID);e.sort(function(){return.5-Math.random()}),o.sort(function(){return.5-Math.random()}),_.User.set("mode"+t+"LevelList_stage1ID",e),_.User.set("mode"+t+"LevelList_stage2ID",o)}else console.log("\u8001\u7528\u6237")})},e.prototype.updateModeView=function(){var t=this;this.dict.secondBtn.children[0].getComponent(cc.Label).string=this.secondModeData.themeName;for(var e=function(e){var i=o.dict.moreModeBg.children[0].children[e].children[0];i.name=o.thirdModesData[e].theme+"",i.getComponent(cc.Label).string=o.thirdModesData[e].themeName,i.parent.getComponent(cc.Button)||i.parent.addComponent(cc.Button);var n=i.parent.getComponent(cc.Button);n.transition=cc.Button.Transition.SCALE,n.duration=.1,n.zoomScale=1.2,i.parent.on(cc.Node.EventType.TOUCH_END,function(){cc.game.emit("playClickAudio");var o=t.thirdModesData[e].theme;cc.game.emit("gamelog","modebtn_"+o),t.enterByMode(o)},o)},o=this,i=0;i<this.thirdModesData.length;i++)e(i);var n=function(e){var o=r.dict.darenModes.children[1].children[e].children[0];o.name=r.darenModesData[e].theme+"",o.getComponent(cc.Label).string=r.darenModesData[e].themeName,o.parent.getComponent(cc.Button)||o.parent.addComponent(cc.Button);var i=o.parent.getComponent(cc.Button);i.transition=cc.Button.Transition.SCALE,i.duration=.1,i.zoomScale=1.2,o.parent.on(cc.Node.EventType.TOUCH_END,function(){var o=t.darenModesData[e].theme;t.enterByMode2(o)},r)},r=this;for(i=0;i<this.darenModesData.length;i++)n(i)},e.prototype.initPlatformUI=function(){var t=m.Platform.getConfig();if(t.fitUIType!=s.FitUIType.TT&&t.fitUIType!=s.FitUIType.KS||(this.dict.topBar.getComponent(cc.Widget).top=70,this.dict.topBar.getComponent(cc.Widget).updateAlignment()),t.hasAgeTip){this.dict.ageBtn.active=!0;var e=m.Platform.getConfig().ageTipType;e==s.AgeTipType.AGE_12&&(this.dict.ageBtn.getComponent(cc.Sprite).spriteFrame=this.ageSpriteFrame[e])}if(this.dict.privacyBtn.active=!1,t.privacyPolicyType!=s.PrivacyPolicyType.NO&&(this.dict.privacyBtn.active=!0),this.dict.moreGameBtn.active=!1,t.hasMoreGame&&(this.dict.moreGameBtn.active=!0),this.dict.customerService.active=!1,t.hasCustomerService&&(this.dict.customerService.active=!0),m.Platform.is(s.EPlatform.ANDROID_GOOGLE)?(this.dict.logo.getComponent(cc.Sprite).spriteFrame=this.logoSpriteFrame[t.logoType],"en"==g.default.instance.lan&&(this.dict.logo.getComponent(cc.Sprite).spriteFrame=this.logoSpriteFrame[s.LogoType.PlayHammerEN],this.dict.logo.scale=1),"ja"==g.default.instance.lan&&(this.dict.logo.getComponent(cc.Sprite).spriteFrame=this.logoSpriteFrame[s.LogoType.PlayHammerJP],this.dict.logo.scale=1),"zh"==g.default.instance.lan&&(this.dict.logo.getComponent(cc.Sprite).spriteFrame=this.logoSpriteFrame[s.LogoType.Hammer],this.dict.logo.scale=.6),"tc"==g.default.instance.lan&&(this.dict.logo.getComponent(cc.Sprite).spriteFrame=this.logoSpriteFrame[s.LogoType.PlayHammerTC],this.dict.logo.scale=1),t.logoType==s.LogoType.DifficultChallenge&&(this.dict.logo.scale=1),t.logoType==s.LogoType.BigCompetition&&(this.dict.logo.scale=1)):this.dict.logo.getComponent(cc.Sprite).spriteFrame=this.logoSpriteFrame[t.logoType],m.Platform.is(s.EPlatform.OHAYOO_ANDROID)&&(this.dict.privacyBtn.children[0].getComponent(cc.Label).string="\u9690\u79c1\n\u8bbe\u7f6e"),m.Platform.is(s.EPlatform.QQ)&&(this.dict.appointBtn.active=!0),m.Platform.is(s.EPlatform.HW)&&(this.dict.privacyBtn.x-=100),m.Platform.is(s.EPlatform.WX)){var o=u.BMS.getKey("ys5x5");if(console.log("ys5x5",o),o){var i=window.wx.getSystemInfoSync().windowHeight/2-250;console.log("\u6d4b\u8bd5showBlockAds"),m.Platform.showBlockAds({top:i,left:0,id:"",hideCb:function(){m.Platform.hideBlockAds(),setTimeout(function(){},300)}},function(t){0==t||(m.Platform.hideBlockAds(),setTimeout(function(){},300))})}}t.privacyPolicyType==s.PrivacyPolicyType.MINI_GAME_XM&&(this.dict.ageBtn.active=!0),this.dict.followBtn.active=!1;var n=u.BMS.getKey("isAuditing"),r=u.BMS.getKey("PatternsState");this.dict.overlapBanner.active=!1,this.dict.screwBanner.active=!0,this.dict.startBtnText.getComponent(cc.Label).string="\u5f00\u59cb\u6e38\u620f",n&&(r?(this.dict.secondBtn.active=!0,this.dict["3Btn"].active=!0):(this.dict.secondBtn.active=!1,this.dict["3Btn"].active=!1))},e.prototype.isDOUYIN=function(){var t=window.tt&&window.tt.getSystemInfoSync();if(!t)return!1;switch(t.appName){case"Douyin":return!0;default:return!1}},e.prototype.clickSet=function(){cc.game.emit("gamelog","btn004"),v.default.show(c.PopupConst.SET)},e.prototype.clickStart=function(){if(!this.isLoadingScene)if(this.isLoadingScene=!0,u.BMS.getKey("isAuditing")){var t=1;this.dict.screwBanner.active&&(t=0),0==t?cc.game.emit("gamelog_Thinking",k.ShuShuConst.btn,{id:"001"}):cc.game.emit("gamelog_Thinking",k.ShuShuConst.btn,{id:"002"}),cc.game.emit("gamelog","btn001"),_.User.setTempData(h.TempData.CURRENT_MODE,t);var e=_.User.get(h.UserData.LEVEL_LIST);b.ConfigUtils.setNextModeID();var o=1;b.ConfigUtils.getDataByID(t,function(i){console.log("res - ",i),o=i.amount,e[t]>o?_.User.setTempData(h.TempData.CURRENT_LEVEL,1):_.User.setTempData(h.TempData.CURRENT_LEVEL,e[t]),y.default.loadScene(l.SceneConst.GAME)})}else y.default.loadScene(l.SceneConst.Home)},e.prototype.clickInfinitePower=function(){cc.game.emit("gamelog","btn007"),cc.game.emit("gamelog","page011"),v.default.show(c.PopupConst.INFINITE_POWER)},e.prototype.clickHotMode=function(){this.isLoadingScene||(this.isLoadingScene=!0,cc.game.emit("gamelog","btn002"),y.default.loadScene(l.SceneConst.MODE_SELECT,1))},e.prototype.clickMoreMode=function(){this.isLoadingScene||(this.isLoadingScene=!0,cc.game.emit("gamelog","btn003"),y.default.loadScene(l.SceneConst.MODE_SELECT,2))},e.prototype.clickCheats=function(){this.clickTimes+=1,console.log("["+this.clickTimes+"]"),this.clickTimes>=8&&(v.default.show(c.PopupConst.CHEATS),this.clickTimes=0)},e.prototype.clickAge=function(){v.default.show(c.PopupConst.AGE_TIP)},e.prototype.clickPrivacy=function(){var t=this,e=m.Platform.getConfig();if(e.privacyPolicyType==s.PrivacyPolicyType.MINI_GAME||e.privacyPolicyType==s.PrivacyPolicyType.MINI_GAME_VIVO||e.privacyPolicyType==s.PrivacyPolicyType.MINI_GAME_XM){if(this.isLoadPrivacy)return;this.isLoadPrivacy=!0,cc.resources.load("prefab/popup/PrivacyPolicy",function(e,o){if(t.isLoadPrivacy=!1,e)console.error(e);else{var i=cc.instantiate(o);t.node.addChild(i),i.getComponent("PrivacyPolicy").open()}})}else e.privacyPolicyType==s.PrivacyPolicyType.NATIVE&&m.Platform.showPrivacyPolicy()},e.prototype.clickAppoint=function(){var t=this;this.isLoadPrivacy||(this.isLoadPrivacy=!0,cc.resources.load("prefab/popup/PrivacyPolicy",function(e,o){if(t.isLoadPrivacy=!1,e)console.error(e);else{var i=cc.instantiate(o);t.node.addChild(i),i.getComponent("PrivacyPolicy").openUserPanelHandle()}}))},e.prototype.clickMoreGame=function(){m.Platform.showMoreGame()},e.prototype.clickLevelSelect=function(){this.isLoadingScene||(this.isLoadingScene=!0,cc.game.emit("gamelog","page002"),_.User.setTempData(h.TempData.CURRENT_MODE,0),y.default.loadScene(l.SceneConst.LEVEL_SELECT))},e.prototype.clickCreateBtn=function(){cc.game.emit("gamelog","btn027"),!u.BMS.getKey("ugcad")||_.User.get(h.UserData.isUnlockUgc)?this.isEnterUgc||(this.isEnterUgc=!0,y.default.loadScene(l.SceneConst.UGC)):v.default.show(c.PopupConst.UNLOCK_UGC)},e.prototype.clickAgeBtn=function(){v.default.show(c.PopupConst.AGE_TIP)},e.prototype.clickFollowBtn=function(){var t=this;m.Platform.follow(function(e){if(0==e){if(console.log("\u5173\u6ce8\u6210\u529f"),_.User.get(h.UserData.isFollow))return;t.dict.followBtn.getChildByName("keyIcon").active=!1,t.dict.followBtn.getChildByName("keyAmount").active=!1;var o=_.User.get(h.UserData.KEY);_.User.set(h.UserData.KEY,o+1),f.Event.emit(a.default.KEY_EFFECT),_.User.set(h.UserData.isFollow,1)}})},e.prototype.clickLoveDog=function(){cc.game.emit("gamelog","btn028"),this.enterByMode(1)},e.prototype.clickDogStone=function(){cc.game.emit("gamelog","btn029"),this.enterByMode(2)},e.prototype.clickSecondMode=function(){this.enterByMode(3)},e.prototype.click3Mode=function(){cc.game.emit("gamelog_Thinking",k.ShuShuConst.btn,{id:"003"}),cc.game.emit("gamelog","modebtn_5"),this.enterByMode(5)},e.prototype.click4Mode=function(){cc.game.emit("gamelog_Thinking",k.ShuShuConst.btn,{id:"004"}),cc.game.emit("gamelog","modebtn_3"),this.enterByMode(3)},e.prototype.clickThirdMode=function(){var t=this;this.isAnim||(this.isAnim=!0,cc.game.emit("gamelog","btn032"),this.dict.moreModeBg.active=!this.dict.moreModeBg.active,this.isShow?(this.dict.moreModeBg.active=!0,this.dict.moreModeBg.opacity=255,cc.tween(this.dict.moreModeBg).to(.3,{opacity:0}).call(function(){t.dict.moreModeBg.active=!1,t.isAnim=!1,t.isShow=!1}).start()):(this.dict.moreModeBg.opacity=0,this.dict.moreModeBg.active=!0,console.log("\u6d4b\u8bd5"),cc.tween(this.dict.moreModeBg).to(.3,{opacity:255}).call(function(){t.isAnim=!1,t.isShow=!0}).start()),0==this.dict.arrow.angle?this.dict.arrow.angle=180:this.dict.arrow.angle=0)},e.prototype.clickBeeBtn=function(){v.default.show(c.PopupConst.BEE)},e.prototype.unlockAllModeBtn=function(){v.default.show(c.PopupConst.UNLOCK_ALL_MODE)},e.prototype.orderBtn=function(){var t=this.dict.orderID.getComponent(cc.EditBox).string;if(console.log("\u987a\u5e8fid",t),this.isIntNum(t)){if(console.log("\u662f\u6570\u5b57"),_.User.setTempData(h.TempData.CURRENT_MODE,0),_.User.setTempData(h.TempData.CURRENT_LEVEL,Number(t)),this.isLoadingScene)return;this.isLoadingScene=!0,y.default.loadScene(l.SceneConst.GAME)}},e.prototype.modeJumpBtn=function(){this.dict.darenModes.active=!0},e.prototype.closeDaren=function(){this.dict.darenModes.active=!1},e.prototype.enterByMode=function(t){if(u.BMS.getKey("newmodead")&&-1==(_.User.get(h.UserData.UNLOCK_MODE_LIST)||[]).indexOf(t))return _.User.setTempData(h.TempData.CURRENT_MODE_UNLOCK_ID,t),void v.default.show(c.PopupConst.MODE_UNLOCK);this.sucEnterByMode(t)},e.prototype.enterByMode2=function(t){window.modeID=t,this.dict.darenModes.children[1].active=!1,this.dict.EditBox.active=!0,this.dict.darenJump.active=!0},e.prototype.darenJump=function(){var t=this.dict.EditBox.getComponent(cc.EditBox).string;this.isIntNum(t)&&(console.log("\u662f\u6570\u5b57"),_.User.setTempData(h.TempData.CURRENT_MODE,Number(window.modeID)),_.User.setTempData(h.TempData.CURRENT_LEVEL,Number(t)),y.default.loadScene(l.SceneConst.GAME))},e.prototype.isIntNum=function(t){return!isNaN(parseFloat(t))},e.prototype.sucEnterByMode=function(t){if(!this.isLoadingScene){this.isLoadingScene=!0,_.User.setTempData(h.TempData.CURRENT_MODE,t);var e=_.User.get(h.UserData.LEVEL_LIST);b.ConfigUtils.setNextModeID();var o=1;b.ConfigUtils.getDataByID(t,function(i){o=i.amount,e[t]>o?_.User.setTempData(h.TempData.CURRENT_LEVEL,1):_.User.setTempData(h.TempData.CURRENT_LEVEL,e[t]),y.default.loadScene(l.SceneConst.GAME)})}},__decorate([B([cc.SpriteFrame])],e.prototype,"ageSpriteFrame",void 0),__decorate([B([cc.SpriteFrame])],e.prototype,"logoSpriteFrame",void 0),__decorate([T],e)}(i.default);o.default=M,cc._RF.pop()},{"./AudioConst":"AudioConst","./AudioManager":"AudioManager","./BaseUI":"BaseUI","./BmsManager":"BmsManager","./ChallengeHttp":"ChallengeHttp","./ConfigConst":"ConfigConst","./ConfigManager":"ConfigManager","./ConfigUtils":"ConfigUtils","./EventConst":"EventConst","./EventManager":"EventManager","./LanguageManager":"LanguageManager","./OPPOAndroidAdUtils":"OPPOAndroidAdUtils","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./SceneConst":"SceneConst","./SceneManager":"SceneManager","./ShuShuConst":"ShuShuConst","./UserConst":"UserConst","./UserManager":"UserManager","./VIVOADUtils":"VIVOADUtils","./XMADUtils":"XMADUtils"}],Map:[function(t,e,o){"use strict";cc._RF.push(e,"d69e9b93hdBD4FzwhVLOhmm","Map");var i=t("./ConfigConst"),n=t("./UIBase"),r=t("./ConfigManager"),a=t("./LocalStorageConst"),s=t("./LocalStorageManager"),c=t("./PopupManager"),l=cc._decorator,h=l.ccclass,d=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lightSpriteFrame=null,e.propIndex=0,e.provinceAmount=34,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.node.setContentSize(cc.winSize);var e=s.default.get(a.default.CityList)||[];s.default.set(a.default.CityList,e),this.localStorageUIData[a.default.CityList]=this.updateCityList.bind(this),this.addBtnOn("noBtn",this.noBtn,this)},e.prototype.updateCityList=function(t){return __awaiter(this,void 0,void 0,function(){var e,o,n,a,s,c,l,h,d;return __generator(this,function(u){switch(u.label){case 0:return[4,r.Config.get(i.ConfigConst.City)];case 1:return(e=u.sent()).sort(function(t,e){return t.sort-e.sort}),o="",o=0==t.length?e.find(function(t){return 1==t.sort}).province:e.find(function(e){return e.id==t[t.length-1]}).province,n=[],a=e.filter(function(t){return t.province==o}).length,s=[],c="",t.forEach(function(t){var i=e.find(function(e){return e.id==t});n.includes(i.province)||n.push(i.province),i.province==o&&(s.push(i.cityID),c+=e.find(function(e){return e.id==t}).cityID+"\uff0c")}),[4,this.getLightProvince()];case 2:for(l=u.sent(),this.dict.provinceAmount.getComponent(cc.Label).string="\u5df2\u70b9\u4eae"+l.length+"\u4e2a\u7701\u4efd",this.dict.progress.getComponent(cc.Sprite).fillRange=l.length/this.provinceAmount,this.dict.progressText.getComponent(cc.Label).string=(l.length/this.provinceAmount*100).toFixed(0)+"%",this.dict.local.position=this.dict.pointRoot.children.find(function(t){return o.includes(t.name)}).position,this.dict.local.y+=25,this.dict.province.getComponent(cc.Label).string=""+o,this.dict.localProvince.getComponent(cc.Label).string="\u76ee\u524d\u5904\u4e8e\u7701\u4efd\uff1a"+o,this.dict.cityAmount.getComponent(cc.Label).string=s.length+"/"+a,this.dict.sucCity.getComponent(cc.Label).string="\u5df2\u7ecf\u5b8c\u6210\u57ce\u5e02\uff1a"+c.slice(0,-1),console.log("amountArr",l),h=0;h<this.dict.pointRoot.children.length;h++)d=this.dict.pointRoot.children[h],console.log("element.name",d.name),(l.includes(d.name)||l.includes(d.name+"\u7701"))&&(d.getComponent(cc.Sprite).spriteFrame=this.lightSpriteFrame);return t.length>=e.length&&(this.dict.sucCity.getComponent(cc.Label).string="\u5df2\u6fc0\u6d3b\u5168\u90e8\u7701\u4efd"),[2]}})})},e.prototype.getLightProvince=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,n,c;return __generator(this,function(l){switch(l.label){case 0:return t=s.default.get(a.default.CityList)||[],[4,r.Config.get(i.ConfigConst.City)];case 1:return(e=l.sent()).sort(function(t,e){return t.sort-e.sort}),o={},e.forEach(function(t){o[t.province]||(o[t.province]=0),o[t.province]+=1}),n=[],c={},t.forEach(function(t){var i=e.find(function(e){return e.id==t}).province;c[i]||(c[i]=0),c[i]+=1,c[i]>=o[i]&&n.push(i)}),[2,n]}})})},e.prototype.noBtn=function(){c.default.hide()},__decorate([d(cc.SpriteFrame)],e.prototype,"lightSpriteFrame",void 0),__decorate([h],e)}(n.default);o.default=u,cc._RF.pop()},{"./ConfigConst":"ConfigConst","./ConfigManager":"ConfigManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./PopupManager":"PopupManager","./UIBase":"UIBase"}],MemoryStorageConst:[function(t,e,o){"use strict";var i,n;cc._RF.push(e,"5d399GPBbFB9J9YQ5ZOCDsL","MemoryStorageConst"),(n=i||(i={})).isVIP="isVIP",n.propIndex="propIndex",n.reward="reward",n.rewardType="rewardType",n.remove_ads="remove_ads",n.remove_ads_pack="remove_ads_pack",n.special_pack="special_pack",n.openShipWay="openShipWay",n.planLevel="planLevel",n.master_pass="master_pass",n.piggy_bank="piggy_bank",n.rule="rule",n.ThemeType="ThemeType",n.CollectGoodsID="CollectGoodsID",n.CollectGoodsName="CollectGoodsName",n.IsFail="IsFail",n.hasLockParking="hasLockParking",n.LevelReliveCount="LevelReliveCount",n.IsDailyChallenge="isDailyChallenge",n.CurrentChallengeLevelID="CurrentChallengeLevelID",n.CurrentChallengeDay="CurrentChallengeDay",n.CurrentChallengeCity="CurrentChallengeCity",o.default=i,cc._RF.pop()},{}],MemoryStorageManager:[function(t,e,o){"use strict";cc._RF.push(e,"e9a40fYJ0JEOqiOreD6r+Db","MemoryStorageManager");var i=new(function(){function t(){this.data={}}return t.prototype.init=function(t){this.data=t},t.prototype.set=function(t,e){JSON.stringify(this.data[t])!==JSON.stringify(e)&&(this.data[t]=e,console.log("\u89e6\u53d1\uff1amemoryStorage_"+t),cc.game.emit("memoryStorage_"+t,e))},t.prototype.get=function(t){return this.data[t]},t.prototype.remove=function(t){delete this.data[t]},t.prototype.clear=function(){this.data={}},t}());o.default=i,cc._RF.pop()},{}],ModeSelectItem:[function(t,e,o){"use strict";var i;cc._RF.push(e,"a70a8sc1yVNz7MeZG+eJSCO","ModeSelectItem");var n,r=t("./SceneConst"),a=t("./UserConst"),s=t("./SceneManager"),c=t("./UserManager"),l=t("./ConfigUtils"),h=cc._decorator,d=h.ccclass,u=h.property;(n=i||(i={}))[n.Normal=0]="Normal",n[n.Finish=1]="Finish",n[n.Lock=2]="Lock";var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.level=null,e.modeName=null,e.param=null,e.state=null,e.starAmount=0,e}return __extends(e,t),e.prototype.setData=function(t){this.param=t,this.node.zIndex=this.param.index,this.refresh()},e.prototype.refresh=function(){var t=this,e=this.param.data,o=e.theme,i=c.User.get(a.UserData.LEVEL_LIST),n=1,r=1;i[o]&&(n=i[o]),l.ConfigUtils.getDataByID(e.theme,function(e){r=e.amount,n>=r&&(n=r),t.level.string=n+"/"+r}),this.modeName.string=""+e.themeName,cc.resources.load("texture/banner/"+e.theme,function(e,o){if(e)return console.log(e);t.icon.spriteFrame=new cc.SpriteFrame(o)})},e.prototype.clickEnter=function(){console.log("\u6d4b\u8bd5\u70b9\u9e21\u86cb1111");var t=this.param.data.theme;c.User.setTempData(a.TempData.CURRENT_MODE,t);var e=c.User.get(a.UserData.LEVEL_LIST);l.ConfigUtils.setNextModeID();var o=1;l.ConfigUtils.getDataByID(t,function(i){o=i.amount,e[t]>o?c.User.setTempData(a.TempData.CURRENT_LEVEL,1):c.User.setTempData(a.TempData.CURRENT_LEVEL,e[t])}),s.default.loadScene(r.SceneConst.GAME)},e.state=i,__decorate([u(cc.Sprite)],e.prototype,"icon",void 0),__decorate([u(cc.Label)],e.prototype,"level",void 0),__decorate([u(cc.Label)],e.prototype,"modeName",void 0),__decorate([d],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./ConfigUtils":"ConfigUtils","./SceneConst":"SceneConst","./SceneManager":"SceneManager","./UserConst":"UserConst","./UserManager":"UserManager"}],ModeSelect:[function(t,e,o){"use strict";cc._RF.push(e,"1b6e0dFI/FEfoLU7W3FLKWv","ModeSelect");var i=t("./BaseUI"),n=t("./RecycleScroll"),r=t("./AudioConst"),a=t("./ConfigConst"),s=t("./EventConst"),c=t("./PlatformConst"),l=t("./SceneConst"),h=t("./UserConst"),d=t("./AudioManager"),u=t("./ConfigManager"),p=t("./EventManager"),f=t("./PlatformManager"),g=t("./ResManager"),m=t("./SceneManager"),v=t("./UserManager"),y=t("./ModeSelectItem"),_=t("./XMADUtils"),C=cc._decorator,b=C.ccclass,S=C.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scroll=null,e._data=null,e.itemsData=[],e.childrenLength=6,e.isLoadingScene=!1,e}return __extends(e,t),e.prototype.onLoad=function(){this.initView()},e.prototype.onEnable=function(){p.Event.on(s.default.CLICK_BACK,this.clickBack,this),f.Platform.is(c.EPlatform.XIAOMI_ANDROID)&&_.XMAD.showLargeFeed()},e.prototype.onDisable=function(){p.Event.off(s.default.CLICK_BACK,this.clickBack,this),f.Platform.is(c.EPlatform.XIAOMI_ANDROID)&&_.XMAD.removeLargePicFeed()},e.prototype.initView=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,i,n;return __generator(this,function(s){switch(s.label){case 0:return[4,u.Config.get(a.ConfigConst.THEME)];case 1:if(t=s.sent(),e=[],2==this._data)for(o=0;o<t.length;o++)0!=o&&e.push(t[o]);else for(o=0;o<t.length;o++)t[o].isHot&&e.push(t[o]);return v.User.setTempData(h.TempData.CURRENT_ALL_MODE,e),this.itemsData=e,this.scroll.onItemRender=this.onItemRender.bind(this),this.scroll.onItemClicked=this.onItemClicked.bind(this),this.scroll.numItems=this.itemsData.length,[4,g.Res.load("prefab/item/TopBar")];case 2:return i=s.sent(),n=cc.instantiate(i),this.node.addChild(n),d.Audio.playMusic(r.AudioConst.BGM_MAIN),2==this._data?cc.game.emit("gamelog","page013"):cc.game.emit("gamelog","page012"),[2]}})})},e.prototype.onItemRender=function(t,e){var o=e.getComponent(y.default),i=(y.default.state.Normal,{index:t,data:this.itemsData[t]});o.setData(i)},e.prototype.onItemClicked=function(){console.log("\u6d4b\u8bd5\u70b9\u9e21\u86cb")},e.prototype.clickBack=function(){this.isLoadingScene||(this.isLoadingScene=!0,2==this._data?cc.game.emit("gamelog","btn010"):cc.game.emit("gamelog","btn009"),m.default.loadScene(l.SceneConst.MAIN))},__decorate([S(n.default)],e.prototype,"scroll",void 0),__decorate([b],e)}(i.default);o.default=w,cc._RF.pop()},{"./AudioConst":"AudioConst","./AudioManager":"AudioManager","./BaseUI":"BaseUI","./ConfigConst":"ConfigConst","./ConfigManager":"ConfigManager","./EventConst":"EventConst","./EventManager":"EventManager","./ModeSelectItem":"ModeSelectItem","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./RecycleScroll":"RecycleScroll","./ResManager":"ResManager","./SceneConst":"SceneConst","./SceneManager":"SceneManager","./UserConst":"UserConst","./UserManager":"UserManager","./XMADUtils":"XMADUtils"}],ModeUnlcok:[function(t,e,o){"use strict";cc._RF.push(e,"b638dnO/gBKhod9J9JtmUzQ","ModeUnlcok");var i=t("./BaseUI"),n=t("./EventConst"),r=t("./PlatformConst"),a=t("./UserConst"),s=t("./EventManager"),c=t("./LanguageManager"),l=t("./PlatformManager"),h=t("./PopupManager"),d=t("./UserManager"),u=t("./OPPOAndroidAdUtils"),p=t("./OPPOMiniADUtils"),f=t("./Utils"),g=t("./XMADUtils"),m=cc._decorator,v=m.ccclass,y=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isEnterUgc=!1,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("giveUpBtn",this.clickGiveUp,this),this.addBtnOn("videoBtn",this.clickVideo,this),this.initView()},e.prototype.onEnable=function(){l.Platform.is(r.EPlatform.XIAOMI_ANDROID)?g.XMAD.showBannerFeed():l.Platform.is(r.EPlatform.OPPO_ANDROID)?u.OPPOAndroidAd.showLargeFeed():l.Platform.is(r.EPlatform.OPPO)&&p.OPPOMiniAD.showLargeFeed()},e.prototype.onDisable=function(){l.Platform.is(r.EPlatform.OPPO_ANDROID)&&u.OPPOAndroidAd.removeLargePicFeed(),l.Platform.hideNativeAds()},e.prototype.initView=function(){var t=this;cc.game.emit("gamelog","page015");var e=f.Utils.randomNum(80,92);this.dict.rate.getComponent(cc.Label).string=c.default.formatStr("\u8d85\u8fc7%d%\u7684\u73a9\u5bb6\u89e3\u9501\u8be5\u4e3b\u9898",e);var o=d.User.getTempData(a.TempData.CURRENT_MODE_UNLOCK_ID);cc.resources.load("texture/newBanner/"+o,function(e,o){if(e)return console.log(e);t.dict.img.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o)})},e.prototype.clickGiveUp=function(){h.default.hide()},e.prototype.clickVideo=function(){var t=this;cc.game.emit("gamelog","btn031");var e=d.User.getTempData(a.TempData.CURRENT_MODE_UNLOCK_ID);l.Platform.showRewardAds(function(o){if(0==o){if(t.isEnterUgc)return;cc.game.emit("gamelog","rewarde_btn009"),t.isEnterUgc=!0;var i=d.User.get(a.UserData.UNLOCK_MODE_LIST)||[];i.push(e),d.User.set(a.UserData.UNLOCK_MODE_LIST,i),s.Event.emit(n.default.ENTER_ID,e)}})},__decorate([v],e)}(i.default));o.default=y,cc._RF.pop()},{"./BaseUI":"BaseUI","./EventConst":"EventConst","./EventManager":"EventManager","./LanguageManager":"LanguageManager","./OPPOAndroidAdUtils":"OPPOAndroidAdUtils","./OPPOMiniADUtils":"OPPOMiniADUtils","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager","./UserConst":"UserConst","./UserManager":"UserManager","./Utils":"Utils","./XMADUtils":"XMADUtils"}],MotionTrail:[function(t,e,o){"use strict";cc._RF.push(e,"234d6kBQUxIeZdnPPmR9goF","MotionTrail");var i=cc.gfx,n=function(){this.x=0,this.y=0,this.dis=0,this.cos=0,this.sin=0},r=cc._decorator,a=r.ccclass,s=r.property,c=r.playOnFocus,l=r.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.atlas=null,e._spriteFrame=null,e._active=!0,e._isWorldXY=!0,e.offset=cc.v2(0,0),e._length=20,e._headWidth=100,e._tailWidth=0,e._headOpacity=255,e._tailOpacity=0,e.renderData=null,e.meshID=0,e.capacity=0,e.verticesCount=0,e.indicesCount=0,e.$flush=null,e.$xyOffset=1e8,e.$uvOffset=1e8,e.$colorOffset=1e8,e.$step=0,e.trailData=[],e.$getVData=function(){return e.renderData.vDatas[e.meshID]},e.$getUintVData=function(){return e.renderData.uintVDatas[e.meshID]},e.$getIData=function(){return e.renderData.iDatas[e.meshID]},e}return __extends(e,t),Object.defineProperty(e.prototype,"$spriteFrame",{get:function(){return this._spriteFrame},set:function(t){this._spriteFrame=t,this.$updateSpriteFrame()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},set:function(t){this._active=t,this.enabled=t,this.$updateActive()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$isWorldXY",{get:function(){return this._isWorldXY},set:function(t){this._isWorldXY=t,this.$updateXY()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(t){this._length=Math.max(t,0),this.updateLength(),this.updateWidth(),this.$updateUV(),this.$updateColor(),this.resetPos()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headWidth",{get:function(){return this._headWidth},set:function(t){this._headWidth=Math.max(t,0),this.updateWidth()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tailWidth",{get:function(){return this._tailWidth},set:function(t){this._tailWidth=Math.max(t,0),this.updateWidth()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headOpacity",{get:function(){return this._headOpacity},set:function(t){this._headOpacity=t,this.$updateColor()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tailOpacity",{get:function(){return this._tailOpacity},set:function(t){this._tailOpacity=t,this.$updateColor()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$vDataLength",{get:function(){return this.verticesCount*this.$step},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$iDataLength",{get:function(){return this.indicesCount},enumerable:!1,configurable:!0}),e.prototype._resetAssembler=function(){var t=this._assembler=new d;t.init(this),t.updateRenderData=this.$onFlushed.bind(this),this.$flush=this.setVertsDirty;var e=this.renderData=new cc.RenderData;e.init(t),this.meshID=e.meshCount,this.$init()},e.prototype.$init=function(){this.$setVFmt(),this.updateLength(),this.updateWidth(),this.node.on(cc.Node.EventType.COLOR_CHANGED,this.$updateColor,this),this.resetPos()},e.prototype.start=function(){this.$updateSpriteFrame(),cc.director.once(cc.Director.EVENT_AFTER_DRAW,this.$updateColor,this)},e.prototype.$setVFmt=function(t){void 0===t&&(t=new i.VertexFormat([{name:i.ATTR_POSITION,type:i.ATTR_TYPE_FLOAT32,num:2},{name:i.ATTR_UV0,type:i.ATTR_TYPE_FLOAT32,num:2},{name:i.ATTR_COLOR,type:i.ATTR_TYPE_UINT8,num:4,normalize:!0}]));var e=this._assembler;cc.sys.isNative&&e.setVertexFormat(t);for(var o=t._elements,n=o.length-1;n>-1;--n)this.$step+=o[n].bytes>>2;var r=t._attr2el;this.$xyOffset=r[i.ATTR_POSITION].offset>>2,this.$uvOffset=r[i.ATTR_UV0].offset>>2,this.$colorOffset=r[i.ATTR_COLOR].offset>>2},e.prototype.$createBuffer=function(t,e,o){void 0===e&&(e=t-2),void 0===o&&(o=2),o=Math.max(o,1.5);var i=this.renderData;this.verticesCount=Math.max(t,0),this.indicesCount=Math.max(3*e,0);var n=!i.vDatas[this.meshID];if(this.verticesCount>this.capacity?(this.capacity=~~Math.max(this.capacity*o,this.verticesCount),n=!0):this.verticesCount<this.capacity/o&&(this.capacity=~~Math.max(this.capacity/o,this.verticesCount),n=!0),n){var r=new Float32Array(this.verticesCount*this.$step),a=new Uint16Array(this.indicesCount);i.updateMesh(this.meshID,r,a)}this.$updateIndice()},e.prototype.update=function(){cc.sys.isNative&&this.$updateColor(),this.$flush()},e.prototype.$onFlushed=function(){if(!1!==this.active&&null!==this.$spriteFrame&&0!==this.length){for(var t=this.trailData,e=this.length-1;e>0;--e){var o=t[e],i=t[e-1];o.x=i.x,o.y=i.y,o.sin=i.sin,o.cos=i.cos}if(this.$isWorldXY){var n=this.node._worldMatrix.m;this.node._updateWorldMatrix(),t[0].x=this.offset.x+n[12],t[0].y=this.offset.y+n[13]}else t[0].x=this.offset.x+this.node.x,t[0].y=this.offset.y+this.node.y;this.$updateXY()}},e.prototype.$updateActive=function(){this.active&&this.resetPos()},e.prototype.$updateSpriteFrame=function(){var t=this.$spriteFrame,e=this.getMaterial(0)||cc.Material.getBuiltinMaterial("2d-sprite");e.define("USE_TEXTURE",!0),e.setProperty("texture",t?t.getTexture():null),this.$updateUV()},e.prototype.$updateXY=function(){var t=this.$getVData(),e=null,o=null,i=0,n=0,r=0,a=0,s=0,c=this.$step,l=0,h=0;this.$isWorldXY||(l=this.node.x,h=this.node.y);for(var d=this.trailData,u=0,p=this.length-1;u<p;++u){if(e=d[u],o=d[u+1],i=e.x-l,n=e.y-h,r=o.x-l,a=o.y-h,0===u){var f=Math.atan2(a-n,r-i);e.sin=Math.sin(f),e.cos=Math.cos(f)}t[s]=i+e.dis*e.sin,t[s+1]=n-e.dis*e.cos,t[s+=c]=i-e.dis*e.sin,t[s+1]=n+e.dis*e.cos,s+=c}t[s]=r+o.dis*e.sin,t[s+1]=a-o.dis*e.cos,t[s+=c]=r-o.dis*e.sin,t[s+1]=a+o.dis*e.cos},e.prototype.$updateUV=function(){if(null!==this.$spriteFrame){for(var t=this.$getVData(),e=this.$step,o=1/(this.trailData.length-1),i=this.$uvOffset,n=0,r=this.$vDataLength;i<r;i+=e,++n)t[i]=1&n,t[i+1]=1-o*(n>>1);this.$fitUV()}},e.prototype.$updateColor=function(){for(var t=this.$getUintVData(),e=this.length,o=this.headOpacity,i=(o-this.tailOpacity)/(e-1),n=this.node.opacity/255,r=this.node.color.b<<16|this.node.color.g<<8|this.node.color.r,a=0,s=this.$colorOffset,c=this.$step;a<e;++a){var l=(o-i*a)*n<<24|r;t[s]=l,t[s+=c]=l,s+=c}},e.prototype.$updateIndice=function(){for(var t=this.$getIData(),e=0,o=0,i=this.$iDataLength;e<i;++o)t[e++]=o,t[e++]=o+1,t[e++]=o+2},e.prototype.updateLength=function(){var t=this.length;this.trailData=[];for(var e=0;e<t;++e)this.trailData[e]=new n;this.$createBuffer(t<<1)},e.prototype.updateWidth=function(){for(var t=this.trailData,e=this.length,o=.5*this.headWidth,i=(o-.5*this.tailWidth)/(e-1),n=0;n<e;++n)t[n].dis=o-i*n},e.prototype.resetPos=function(){var t=this.trailData,e=this.offset.x,o=this.offset.y;if(this.$isWorldXY){var i=this.node._worldMatrix.m;this.node._updateWorldMatrix(),e+=i[12],o+=i[13]}else e+=this.node.x,o+=this.node.y;for(var n=this.length-1;n>-1;--n)t[n].x=e,t[n].y=o;for(var r=this.$getVData(),a=this.$step,s=(n=0,this.$vDataLength);n<s;n+=a)r[n]=e,r[n+1]=o},e.prototype.$fitUV=function(){if(null!==this.$spriteFrame){var t=this.$step,e=this.$spriteFrame.getTexture().width,o=this.$spriteFrame.getTexture().height,i=this.$spriteFrame.getRect(),n=this.$getVData();if(this.$spriteFrame._rotated)for(var r=this.$uvOffset,a=0,s=this.$vDataLength;r<s;r+=t,++a){var c=n[r];n[r]=((1-n[r+1])*i.height+i.x)/e,n[r+1]=(c*i.width+i.y)/o}else for(r=this.$uvOffset,a=0,s=this.$vDataLength;r<s;r+=t,++a)n[r]=(n[r]*i.width+i.x)/e,n[r+1]=(n[r+1]*i.height+i.y)/o}},e.prototype.onDestroy=function(){this.node.targetOff(this)},__decorate([s({type:cc.SpriteAtlas,editorOnly:!0,readonly:!0})],e.prototype,"atlas",void 0),__decorate([s],e.prototype,"_spriteFrame",void 0),__decorate([s({type:cc.SpriteFrame})],e.prototype,"$spriteFrame",null),__decorate([s],e.prototype,"_active",void 0),__decorate([s({})],e.prototype,"active",null),__decorate([s],e.prototype,"_isWorldXY",void 0),__decorate([s({})],e.prototype,"$isWorldXY",null),__decorate([s({})],e.prototype,"offset",void 0),__decorate([s],e.prototype,"_length",void 0),__decorate([s({type:cc.Integer})],e.prototype,"length",null),__decorate([s],e.prototype,"_headWidth",void 0),__decorate([s({})],e.prototype,"headWidth",null),__decorate([s],e.prototype,"_tailWidth",void 0),__decorate([s({})],e.prototype,"tailWidth",null),__decorate([s],e.prototype,"_headOpacity",void 0),__decorate([s({type:cc.Integer,min:0,max:255,slide:!0})],e.prototype,"headOpacity",null),__decorate([s],e.prototype,"_tailOpacity",void 0),__decorate([s({type:cc.Integer,min:0,max:255,slide:!0})],e.prototype,"tailOpacity",null),__decorate([a,c,l("Comp/MotionTrail")],e)}(cc.RenderComponent);o.default=h;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.fillBuffers=function(t){var e=t.renderData.vDatas[t.meshID],o=t.renderData.iDatas[t.meshID],i=cc.renderer._handle._meshBuffer,n=i.request(t.verticesCount,t.indicesCount),r=n.byteOffset>>2,a=i._vData;e.length+r>a.length?a.set(e.subarray(0,a.length-r),r):a.set(e,r);for(var s=i._iData,c=n.indiceOffset,l=n.vertexOffset,h=0,d=o.length;h<d;h++)s[c++]=l+o[h]},e}(cc.Assembler);cc._RF.pop()},{}],Navigation:[function(t,e,o){"use strict";cc._RF.push(e,"8ba97ZazBJIh5J1y1Bvbupz","Navigation");var i=cc._decorator,n=i.ccclass,r=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=100,e.endFunc=null,e.roadData=null,e.nextStep=0,e.vx=0,e.vy=0,e.isWalking=!1,e.walkTime=0,e.passedTime=0,e}return __extends(e,t),e.prototype.initNavAgent=function(t){this.speed=t},e.prototype.navOnRoad=function(t,e){this.roadData=t,this.endFunc=e,this.isWalking=!1,this.roadData.length<2||(this.isWalking=!0,this.node.setPosition(this.roadData[0]),this.nextStep=1,this.walkToNext())},e.prototype.walkToNext=function(){if(this.nextStep>=this.roadData.length)return this.isWalking=!1,void(this.endFunc&&this.endFunc());this.isWalking=!0;var t=this.node.getPosition(),e=this.roadData[this.nextStep].sub(t),o=e.mag();this.vx=this.speed*e.x/o,this.vy=this.speed*e.y/o,this.walkTime=o/this.speed,this.passedTime=0},e.prototype.walkUpdate=function(t){this.passedTime+=t,this.passedTime>this.walkTime&&(t-=this.passedTime-this.walkTime);var e=this.node.getPosition();e.x+=this.vx*t,e.y+=this.vy*t,this.node.setPosition(e),this.passedTime>=this.walkTime&&(this.nextStep++,this.walkToNext())},e.prototype.update=function(t){this.isWalking&&this.walkUpdate(t)},e.prototype.stopNav=function(){this.isWalking=!1},__decorate([n],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],NewHandBtn:[function(t,e,o){"use strict";cc._RF.push(e,"020dcO8pXBDF4RMFaJjgLL1","NewHandBtn");var i=t("./PopupConst"),n=t("./UIBase"),r=t("./LocalStorageConst"),a=t("./PlatformManager"),s=t("./PopupManager"),c=t("./PaymentSystem"),l=cc._decorator,h=l.ccclass,d=(l.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.localStorageUIData[r.default.starter_pack]=this.updatestarter_pack.bind(this),this.node.on(cc.Node.EventType.TOUCH_END,this.newHandBtn,this),c.default.getGoodsLocalPrice(this.dict.btn_04.children[0],"starter_pack")},e.prototype.updatestarter_pack=function(t){this.node.active=!t,a.Platform.getConfig().hasPurchase||(this.node.active=!1)},e.prototype.newHandBtn=function(){c.default.clickBuy("starter_pack")},e.prototype.clickSelf=function(){s.default.show(i.PopupConst.UniversalCard)},__decorate([h],e)}(n.default));o.default=d,cc._RF.pop()},{"./LocalStorageConst":"LocalStorageConst","./PaymentSystem":"PaymentSystem","./PlatformManager":"PlatformManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./UIBase":"UIBase"}],NewHand:[function(t,e,o){"use strict";cc._RF.push(e,"0fc0dqVVv1PjZXPxiKrGj9X","NewHand");var i=t("./UIBase"),n=t("./PopupManager"),r=t("./PaymentSystem"),a=t("./ShuShuConst"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.node.setContentSize(cc.winSize),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("buyBtn",this.buyBtn,this),cc.game.emit("gamelog_Thinking",a.ShuShuConst.Gift_page,{id:2}),r.default.getGoodsLocalPrice(this.dict.price,"starter_pack")},e.prototype.onEnable=function(){cc.game.on("starter_pack",this.starter_pack,this)},e.prototype.onDisable=function(){cc.game.off("starter_pack",this.starter_pack,this)},e.prototype.starter_pack=function(){n.default.hide()},e.prototype.noBtn=function(){n.default.hide()},e.prototype.buyBtn=function(){r.default.clickBuy("starter_pack")},__decorate([c],e)}(i.default));o.default=l,cc._RF.pop()},{"./PaymentSystem":"PaymentSystem","./PopupManager":"PopupManager","./ShuShuConst":"ShuShuConst","./UIBase":"UIBase"}],NewVersion:[function(t,e,o){"use strict";cc._RF.push(e,"34bf2a1h6pNCbLvxqL/VDx0","NewVersion");var i=t("./UserConst"),n=t("./UIBase"),r=t("./LocalStorageConst"),a=t("./LocalStorageManager"),s=t("./BmsManager"),c=t("./PlatformManager"),l=t("./PopupManager"),h=t("./UserManager"),d=cc._decorator,u=d.ccclass,p=(d.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cardTimesVal=0,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.node.setContentSize(cc.winSize),this.addBtnOn("noBtn",this.noBtn,this),this.initView()},e.prototype.initView=function(){var t=this,e=h.User.get(i.UserData.boreTimes)||0,o=h.User.get(i.UserData.tipTimes)||0,n=h.User.get(i.UserData.screwBoxTimes)||0;this.dict.boreTimes.getComponent(cc.Label).string="x"+e,this.dict.tipTimes.getComponent(cc.Label).string="x"+o,this.dict.screwBoxTimes.getComponent(cc.Label).string="x"+n;var s=2*e+2*o+2*n,c=a.default.get(r.default.cardAmount)||0;a.default.set(r.default.cardAmount,c+s),h.User.set(i.UserData.boreTimes,0),h.User.set(i.UserData.tipTimes,0),h.User.set(i.UserData.screwBoxTimes,0),this.saveServerData(i.UserData.boreTimes,0),this.saveServerData(i.UserData.tipTimes,0),this.saveServerData(i.UserData.screwBoxTimes,0),this.scheduleOnce(function(){t.cardTimesVal+=2*e,cc.tween(t.dict.boreIcon).to(.3,{position:t.dict.cardIcon.position}).call(function(){t.dict.boreIcon.active=!1,t.dict.cardTimes.getComponent(cc.Label).string="x"+t.cardTimesVal,t.cardTimesVal+=2*o}).start(),cc.tween(t.dict.TipIcon).delay(.3).to(.3,{position:t.dict.cardIcon.position}).call(function(){t.dict.TipIcon.active=!1,t.dict.cardTimes.getComponent(cc.Label).string="x"+t.cardTimesVal,t.cardTimesVal+=2*n}).start(),cc.tween(t.dict.boxIcon).delay(.6).to(.3,{position:t.dict.cardIcon.position}).call(function(){t.dict.boxIcon.active=!1,t.dict.cardTimes.getComponent(cc.Label).string="x"+t.cardTimesVal,t.dict.noBtn.active=!0}).start()},1.3)},e.prototype.saveServerData=function(t,e){e=e.toString(),s.BMS.saveServerData(c.Platform.getConfig().flag,h.User.get("googleID")||h.User.get("uuid"),t,e).then(function(){console.log("\u4fdd\u5b58"+t+"\u6210\u529f:"+e)})},e.prototype.onEnable=function(){},e.prototype.onDisable=function(){},e.prototype.noBtn=function(){l.default.hide()},__decorate([u],e)}(n.default));o.default=p,cc._RF.pop()},{"./BmsManager":"BmsManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager","./UIBase":"UIBase","./UserConst":"UserConst","./UserManager":"UserManager"}],NoADBtn:[function(t,e,o){"use strict";cc._RF.push(e,"04ef7knxCdEc4pZmdU3U0P4","NoADBtn");var i=t("./PopupConst"),n=t("./UIBase"),r=t("./LocalStorageConst"),a=t("./PlatformManager"),s=t("./PopupManager"),c=cc._decorator,l=c.ccclass,h=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.localStorageUIData[r.default.isNoAD]=this.isNoAD.bind(this),this.node.on(cc.Node.EventType.TOUCH_END,this.newHandBtn,this),this.node.scale=.8},e.prototype.isNoAD=function(t){this.node.active=!t,a.Platform.getConfig().hasPurchase||(this.node.active=!1)},e.prototype.newHandBtn=function(){},e.prototype.clickSelf=function(){s.default.show(i.PopupConst.UniversalCard)},__decorate([l],e)}(n.default));o.default=h,cc._RF.pop()},{"./LocalStorageConst":"LocalStorageConst","./PlatformManager":"PlatformManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./UIBase":"UIBase"}],NoAD:[function(t,e,o){"use strict";cc._RF.push(e,"f8349AE5+ZPpZvR8AKR4YL7","NoAD");var i=t("./UIBase"),n=t("./LocalStorageConst"),r=t("./LanguageManager"),a=t("./PlatformManager"),s=t("./PopupManager"),c=t("./PaymentSystem"),l=t("./ShuShuConst"),h=cc._decorator,d=h.ccclass,u=h.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentVIP=0,e.bgSF=[],e.iconSF=[],e.bg2SF=[],e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.node.setContentSize(cc.winSize),this.localStorageUIData[n.default.isNoAD]=this.updateIsNoAD.bind(this),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("noADBtn",this.noADBtn,this),this.addBtnOn("noADBtn1",this.noADBtn1,this),this.initView()},e.prototype.updateIsNoAD=function(t){t&&s.default.hide()},e.prototype.initView=function(){this.dict.skin.getComponent(cc.Label).string=r.default.formatStr("\u83b7\u5f97\u76ae\u80a4\uff1a%s","\u7535\u97f3\u9489"),cc.game.emit("gamelog_Thinking",l.ShuShuConst.Gift_page,{id:1}),c.default.getGoodsLocalPrice(this.dict.money0,"remove_ads"),c.default.getGoodsLocalPrice(this.dict.money1,"remove_ads_pack")},e.prototype.noBtn=function(){window.hideIsNeedInsert&&(window.hideIsNeedInsert=!1,a.Platform.showInsert()),s.default.hide()},e.prototype.noADBtn=function(){c.default.clickBuy("remove_ads")},e.prototype.noADBtn1=function(){c.default.clickBuy("remove_ads_pack")},__decorate([u([cc.SpriteFrame])],e.prototype,"bgSF",void 0),__decorate([u([cc.SpriteFrame])],e.prototype,"iconSF",void 0),__decorate([u([cc.SpriteFrame])],e.prototype,"bg2SF",void 0),__decorate([d],e)}(i.default);o.default=p,cc._RF.pop()},{"./LanguageManager":"LanguageManager","./LocalStorageConst":"LocalStorageConst","./PaymentSystem":"PaymentSystem","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager","./ShuShuConst":"ShuShuConst","./UIBase":"UIBase"}],OPPOADMediatorUtils:[function(t,e,o){"use strict";cc._RF.push(e,"895a1BFzz5MH6OyXUznT/8m","OPPOADMediatorUtils"),o.OPPOADMediator=void 0;var i=t("./OPPOAndroidAdUtils"),n=function(){function t(){}return t.prototype.showRewardVideo=function(t){i.OPPOAndroidAd.showRewardVideo(t)},t.prototype.showLargeFeed=function(){i.OPPOAndroidAd.showLargeFeed()},t.prototype.removeLargePicFeed=function(){i.OPPOAndroidAd.removeLargePicFeed()},t.prototype.showInterstitialFeed=function(){i.OPPOAndroidAd.showInterstitialFeed()},t.prototype.showInterstitialFeed_must=function(){i.OPPOAndroidAd.showInterstitialFeed_must()},t.prototype.showInterstitialFeed_result=function(){i.OPPOAndroidAd.showInterstitialFeed_result()},t}();o.OPPOADMediator=new n,cc._RF.pop()},{"./OPPOAndroidAdUtils":"OPPOAndroidAdUtils"}],OPPOAndroidAdUtils:[function(t,e,o){"use strict";cc._RF.push(e,"62b2a5PwkNLEbNtulzNmmeO","OPPOAndroidAdUtils"),o.OPPOAndroidAd=void 0;var i=t("./PlatformConst"),n=t("./BmsManager"),r=t("./PlatformManager"),a=function(){function t(){}return t.prototype.showLargeFeed=function(){var t=n.BMS.getKey("isCheck");console.log("[isCheck-\u539f\u58f0\u5927\u56febanner]",t),t||(console.log("DownDT",n.BMS.getKey("DownDT")),this.getResByChance(n.BMS.getKey("DownDT")[0])&&r.Platform.showLargeFeed(this.getPosID(),n.BMS.getKey("DownDT")[1]))},t.prototype.showSplash=function(){var t=n.BMS.getKey("isCheck");console.log("[isCheck-showSplash]",t),t||n.BMS.getKey("openkp")&&r.Platform.showSplash()},t.prototype.getPosID=function(){var t,e=this.randomNum(0,2);return 0==e?t=n.BMS.getKey("natId1"):1==e?t=n.BMS.getKey("natId2"):2==e&&(t=n.BMS.getKey("natId3")),this.posID=t,console.log("\u3010\u5e7f\u544aid\u3011\uff1a",e,t),t},t.prototype.getPosID2=function(){var t,e=this.randomNum(0,2);return 0==e?t=n.BMS.getKey("natId1"):1==e?t=n.BMS.getKey("natId2"):2==e&&(t=n.BMS.getKey("natId3")),this.posID2=t,console.log("\u3010\u5e7f\u544aid\u3011\uff1a",e,t),t},t.prototype.randomNum=function(t,e,o){var i=e-t,n=o||Math.random();return t+Math.round(n*i)},t.prototype.showBannerFeed=function(){var t=n.BMS.getKey("isCheck");console.log("[isCheck-\u539f\u58f0banner]",t),t||1==t?console.log("oppo\u5b89\u5353 banner"):(console.log("oppo\u5b89\u5353 showBannerFeed"),n.BMS.getKey("isbanner"))},t.prototype.removeLargePicFeed=function(){null!=this.posID&&r.Platform.removeLargePicFeed(this.posID)},t.prototype.showInterstitialFeed=function(){var t=n.BMS.getKey("isCheck");if(console.log("[isCheck-\u539f\u751f\u63d2\u5c4f]",t),t);else{var e=n.BMS.getKey("fullCloseChance"),o=n.BMS.getKey("fullAdChance"),i=n.BMS.getKey("fullChance");console.log("fullChance",i),this.getResByChance(i)&&r.Platform.showInterstitialFeed(this.getPosID2(),3,e,o)}},t.prototype.removeInterstitialFeed=function(){null!=this.posID2&&r.Platform.removeInterstitialFeed(this.posID2)},t.prototype.showInterstitialFeed_must=function(){var t=n.BMS.getKey("isCheck");if(console.log("[isCheck-\u539f\u751f\u63d2\u5c4f\u7ed3\u7b97]",t),t);else{var e=n.BMS.getKey("fullCloseChance"),o=n.BMS.getKey("fullAdChance");r.Platform.showInterstitialFeed(this.getPosID2(),3,e,o)}},t.prototype.showInterstitialFeed_result=function(){var t=n.BMS.getKey("isCheck");if(console.log("[isCheck-\u539f\u751f\u63d2\u5c4f\u7ed3\u7b97]",t),t);else{var e=n.BMS.getKey("fullCloseChance"),o=n.BMS.getKey("fullAdChance");console.log("fullSettleChance",n.BMS.getKey("fullSettleChance")),this.getResByChance(n.BMS.getKey("fullSettleChance"))&&r.Platform.showInterstitialFeed(this.getPosID2(),3,e,o)}},t.prototype.showRewardVideo=function(t){var e=this,o=n.BMS.getKey("isCheck");if(console.log("[isCheck-\u89c6\u9891]",o),o)r.Platform.showRewardAds_xiaomi(function(e){0==e&&t(0)});else if(r.Platform.getConfig(),r.Platform.is(i.EPlatform.OPPO_ANDROID)){if(n.BMS.getKey("videoEx"))return this.sucCB_video=t,new Promise(function(){cc.game.on("onInterstitialFeedShow",e.onInterstitialFeedShow,e),cc.game.on("onInterstitialFeedShowFailed",e.onInterstitialFeedShowFailed,e),e.removeLargePicFeed();var t=n.BMS.getKey("fullCloseChance"),o=n.BMS.getKey("fullAdChance");r.Platform.showInterstitialFeed(e.getPosID(),3,t,o),console.log("\u89c6\u9891\u53d8\u6210\u63d2\u5c4f")});r.Platform.showRewardAds_xiaomi(function(e){0==e&&t(0)})}else r.Platform.showRewardAds_xiaomi(function(e){0==e&&t(0)})},t.prototype.onInterstitialFeedShow=function(){this.sucCB_video(0),cc.game.off("onInterstitialFeedShow",this.onInterstitialFeedShow,this),cc.game.off("onInterstitialFeedShowFailed",this.onInterstitialFeedShowFailed,this)},t.prototype.onInterstitialFeedShowFailed=function(){var t=this;r.Platform.showRewardAds_xiaomi(function(e){0==e&&t.sucCB_video(0)}),cc.game.off("onInterstitialFeedShow",this.onInterstitialFeedShow,this),cc.game.off("onInterstitialFeedShowFailed",this.onInterstitialFeedShowFailed,this)},t.prototype.getResByChance=function(t){var e=100*Math.random(),o=!1;return console.log("\u968f\u673a\u6570",e),console.log("\u5f53\u524d\u914d\u7f6e\u6982\u7387:"+t),0==t?o:(t>=e&&(o=!0),o)},t}();o.OPPOAndroidAd=new a,cc._RF.pop()},{"./BmsManager":"BmsManager","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager"}],OPPOMiniADMediatorUtils:[function(t,e,o){"use strict";cc._RF.push(e,"feb23I2kxNP44tXfUt3hKgQ","OPPOMiniADMediatorUtils"),o.OPPOMiniADMediator=void 0;var i=t("./OPPOMiniADUtils"),n=function(){function t(){}return t.prototype.showRewardVideo=function(t){i.OPPOMiniAD.showRewardVideo(t)},t.prototype.showLargeFeed=function(){i.OPPOMiniAD.showLargeFeed()},t.prototype.removeLargePicFeed=function(){i.OPPOMiniAD.removeLargePicFeed()},t.prototype.showInterstitialFeed=function(){i.OPPOMiniAD.showInterstitialFeed()},t.prototype.showInterstitialFeed_must=function(){i.OPPOMiniAD.showInterstitialFeed_must()},t.prototype.showInterstitialFeed_result=function(){i.OPPOMiniAD.showInterstitialFeed_result()},t}();o.OPPOMiniADMediator=new n,cc._RF.pop()},{"./OPPOMiniADUtils":"OPPOMiniADUtils"}],OPPOMiniADUtils:[function(t,e,o){"use strict";cc._RF.push(e,"afebeFBmt1Fl77XbcrDR+Q7","OPPOMiniADUtils"),o.OPPOMiniAD=void 0;var i=t("./PlatformConst"),n=t("./BmsManager"),r=t("./PlatformManager"),a=function(){function t(){}return t.prototype.showLargeFeed=function(){var t=n.BMS.getKey("isCheck");if(console.log("[isCheck-\u539f\u58f0\u5927\u56febanner]",t),t);else if(console.log("DownDT",n.BMS.getKey("DownDT")),this.getResByChance(n.BMS.getKey("DownDT")[0])){var e=this.getResByChance(n.BMS.getKey("DownDT")[1]);r.Platform.showNativeAds({type:0,isMistakeClose:e,container:cc.find("Canvas").parent.getChildByName("myPersistRootNode").getChildByName("nativeBannerNode")})}},t.prototype.clickAdJump=function(){var t=n.BMS.getKey("isCheck");console.log("[isCheck-\u89e6\u53d1\u70b9\u51fb\u5e7f\u544a\u8df3\u8f6c]",t),t||(console.log("nextAdChange",n.BMS.getKey("nextAdChange")),this.getResByChance(n.BMS.getKey("nextAdChange"))&&r.Platform.clickAdJump())},t.prototype.showSplash=function(){var t=n.BMS.getKey("isCheck");console.log("[isCheck-showSplash]",t),t||n.BMS.getKey("openkp")&&r.Platform.showSplash()},t.prototype.getPosID=function(){var t=n.BMS.getKey("natId1");return this.posID=t,console.log("\u3010\u5e7f\u544aid\u3011\uff1a",t),t},t.prototype.getPosID2=function(){var t=n.BMS.getKey("natId1");return this.posID=t,console.log("\u3010\u5e7f\u544aid\u3011\uff1a",t),t},t.prototype.randomNum=function(t,e,o){var i=e-t,n=o||Math.random();return t+Math.round(n*i)},t.prototype.showBannerFeed=function(){var t=n.BMS.getKey("isCheck");if(console.log("[isCheck-\u539f\u58f0banner]",t),t||1==t)console.log("oppo\u5c0f\u6e38\u620f banner");else if(console.log("oppo\u5c0f\u6e38\u620f showBannerFeed"),n.BMS.getKey("isbanner")){var e=this.getResByChance(n.BMS.getKey("banCloseChance"));r.Platform.showNativeAds({type:0,isMistakeClose:e,container:cc.find("Canvas").parent.getChildByName("myPersistRootNode").getChildByName("nativeBannerNode")})}},t.prototype.removeLargePicFeed=function(){null!=this.posID&&r.Platform.hideNativeAds()},t.prototype.showInterstitialFeed=function(){var t=n.BMS.getKey("isCheck");if(console.log("[isCheck-\u539f\u751f\u63d2\u5c4f]",t),t);else{var e=n.BMS.getKey("fullCloseChance"),o=n.BMS.getKey("fullAdChance"),i=n.BMS.getKey("fullChance");if(console.log("fullChance",i,this.getResByChance(i)),this.getResByChance(i)){var a=this.getResByChance(e),s=this.getResByChance(o);r.Platform.hideNativeAds(),console.log("\u8c03\u7528\u663e\u793a-\u539f\u751f\u63d2\u5c4f"),r.Platform.showNativeAds({type:1,isMistakeClose:a,isMistakeClose_blank:s,container:cc.find("Canvas").parent.getChildByName("myPersistRootNode").getChildByName("nativeInsertNode")})}}},t.prototype.removeInterstitialFeed=function(){null!=this.posID2&&r.Platform.hideNativeAds()},t.prototype.showInterstitialFeed_must=function(){var t=n.BMS.getKey("isCheck");if(console.log("[isCheck-\u539f\u751f\u63d2\u5c4f\u7ed3\u7b97]",t),t);else{var e=n.BMS.getKey("fullCloseChance"),o=n.BMS.getKey("fullAdChance"),i=this.getResByChance(e),a=this.getResByChance(o);r.Platform.hideNativeAds(),r.Platform.showNativeAds({type:1,isMistakeClose:i,isMistakeClose_blank:a,container:cc.find("Canvas").parent.getChildByName("myPersistRootNode").getChildByName("nativeInsertNode")})}},t.prototype.showInterstitialFeed_result=function(){var t=n.BMS.getKey("isCheck");if(console.log("[isCheck-\u539f\u751f\u63d2\u5c4f\u7ed3\u7b97]",t),t);else{var e=n.BMS.getKey("fullCloseChance"),o=n.BMS.getKey("fullAdChance");if(console.log("fullSettleChance",n.BMS.getKey("fullSettleChance")),this.getResByChance(n.BMS.getKey("fullSettleChance"))){var i=this.getResByChance(e),a=this.getResByChance(o);r.Platform.hideNativeAds(),r.Platform.showNativeAds({type:1,isMistakeClose:i,isMistakeClose_blank:a,container:cc.find("Canvas").parent.getChildByName("myPersistRootNode").getChildByName("nativeInsertNode")})}}},t.prototype.showRewardVideo=function(t){var e=this,o=n.BMS.getKey("isCheck");if(console.log("[isCheck-\u89c6\u9891]",o),o)r.Platform.showRewardAds_xiaomi(function(e){0==e&&t(0)});else if(r.Platform.getConfig(),r.Platform.is(i.EPlatform.OPPO)){if(n.BMS.getKey("videoEx"))return this.sucCB_video=t,new Promise(function(){cc.game.on("onInterstitialFeedShow",e.onInterstitialFeedShow,e),cc.game.on("onInterstitialFeedShowFailed",e.onInterstitialFeedShowFailed,e),e.removeLargePicFeed();var t=n.BMS.getKey("fullCloseChance"),o=n.BMS.getKey("fullAdChance"),i=e.getResByChance(t),a=e.getResByChance(o);r.Platform.hideNativeAds(),r.Platform.showNativeAds({type:1,isMistakeClose:i,isMistakeClose_blank:a,container:cc.find("Canvas").parent.getChildByName("myPersistRootNode").getChildByName("nativeInsertNode")}),console.log("\u89c6\u9891\u53d8\u6210\u63d2\u5c4f")});r.Platform.showRewardAds_xiaomi(function(e){0==e&&t(0)})}else r.Platform.showRewardAds_xiaomi(function(e){0==e&&t(0)})},t.prototype.onInterstitialFeedShow=function(){var t=this;setTimeout(function(){t.sucCB_video(0),cc.game.off("onInterstitialFeedShow",t.onInterstitialFeedShow,t),cc.game.off("onInterstitialFeedShowFailed",t.onInterstitialFeedShowFailed,t)},1)},t.prototype.onInterstitialFeedShowFailed=function(){var t=this;r.Platform.showRewardAds_xiaomi(function(e){0==e&&t.sucCB_video(0)}),cc.game.off("onInterstitialFeedShow",this.onInterstitialFeedShow,this),cc.game.off("onInterstitialFeedShowFailed",this.onInterstitialFeedShowFailed,this)},t.prototype.getResByChance=function(t){var e=100*Math.random(),o=!1;return console.log("\u968f\u673a\u6570",e),console.log("\u5f53\u524d\u914d\u7f6e\u6982\u7387:"+t),0==t?o:(t>=e&&(o=!0),o)},t}();o.OPPOMiniAD=new a,cc._RF.pop()},{"./BmsManager":"BmsManager","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager"}],OPPO:[function(t,e,o){"use strict";cc._RF.push(e,"74bf8qkG75Fcoh5F0KVCpIr","OPPO"),o.OPPO=void 0;var i=function(t){function e(){var e=t.call(this)||this;return e.sdk=window.qg,e._rewardAds=null,e._rewardAdsCb=null,e._rewardHasShow=!1,e._rewardHasLoad=!1,e._banner=null,e._nativeAds=[],e.ads=null,e.adId=null,console.log("oppo"),e}return __extends(e,t),e.prototype.getInstance=function(){return this.sdk},e.prototype.showRewardAds=function(t){var e=this;return this.sdk.createRewardedVideoAd?this._config.rewardID?(this._rewardAdsCb=t,this._rewardHasShow=!1,this._rewardAds||(this._rewardAds=this.sdk.createRewardedVideoAd({adUnitId:this._config.rewardID}),this._rewardAds.onLoad(function(){e._rewardHasLoad=!0,e._rewardHasShow||(e._rewardHasShow=!0,e._rewardAds.show())}),this._rewardAds.onClose(function(t){e._rewardHasLoad=!1,e._rewardAdsCb&&(e._rewardAdsCb(t.isEnded?0:1),e._rewardAdsCb=null)}),this._rewardAds.onError(function(t){e._rewardHasLoad=!1,console.log("[platform] [OPPOPlatform] showRewardAds",t),e._rewardAdsCb&&(e._rewardAdsCb(-1),e._rewardAdsCb=null)})),void(this._rewardHasLoad&&!this._rewardHasShow?(this._rewardHasShow=!0,this._rewardAds.show()):this._rewardAds.load())):t(-3):t(-2)},e.prototype.showBanner=function(t,e){void 0===t&&(t={id:""}),this.sdk.createBannerAd&&this._config.bannerID&&(this._banner||(this._banner=this.sdk.createBannerAd({adUnitId:t.id||this._config.bannerID}),console.log("[platform] [OPPOPlatform] create"),this._banner.show().then(function(){e&&e(0)}).catch(function(){e&&e(1)}),this._banner.onError(function(t){console.log("[platform] [OPPOPlatform] showBanner",t)})))},e.prototype.hideBanner=function(){this._banner&&(this._banner.destroy(),this._banner=null)},e.prototype.showNativeAds=function(t,e){var o=this;if(void 0===t&&(t={type:0,container:null}),this.sdk.createNativeAd&&this._config.nativeID){var i=this.sdk.createNativeAd({adUnitId:t.id||this._config.nativeID});t.container.opacity=255,this._nativeAds.push({ads:i,container:t.container}),i.onLoad(function(n){var r;r=n.adList?n.adList[0]:null,0!=t.container.opacity&&(i&&r&&(i.reportAdShow({adId:r.adId}),0==t.type?o.showNativeBanner(r,i,t):1==t.type?(o.showNativeInsert(r,i,t),console.log("[\u539f\u751f\u63d2\u5c4f\u5c55\u793a]"),cc.game.emit("onInterstitialFeedShow")):o.showNativeIcon(r,i,t)),i.offError(),i.offLoad()),e&&e(0)}),i.onError(function(n){if(console.log("[platform] [OPPOPlatform] showNativeAd",n),t.container){t.container.active=!1,t.container.opacity=0;var r=o._nativeAds.findIndex(function(e){return e.container.name==t.container.name});-1!=r&&o._nativeAds.splice(r,1)}1==t.type&&(console.log("[\u539f\u751f\u63d2\u5c4f\u5c55\u793a\u5931\u8d25]"),cc.game.emit("onInterstitialFeedShowFailed")),i.offError(),i.offLoad(),i.destory&&i.destory(),i=null,e&&e(1)}),i&&i.load()}},e.prototype.hideNativeAds=function(){if(this._nativeAds.length){var t=this._nativeAds.pop();if(cc.isValid(t.container,!0)){t.container.opacity=0,t.container.active=!1,t.container.off(cc.Node.EventType.TOUCH_START);var e=t.container.getChildByName("close");e&&e.off(cc.Node.EventType.TOUCH_START);var o=t.container.getChildByName("next");o&&o.off(cc.Node.EventType.TOUCH_START)}t.ads.destory&&t.ads.destory(),this.ads&&(this.ads=null,this.adId=null)}},e.prototype.clickAdJump=function(){console.log("\u6d4b\u8bd5\u89e6\u53d1",this.ads,this.adId),this.ads&&this.ads.reportAdClick({adId:this.adId})},e.prototype.showNativeBanner=function(t,e,o){var i=this;void 0===o&&(o={type:0,container:null});var n=o.container,r=n.getChildByName("img")||n.getChildByName("mask").getChildByName("img"),a=n.getChildByName("title"),s=n.getChildByName("desc"),c=n.getChildByName("btnText"),l=n.getChildByName("close");if(this.ads=e,this.adId=t.adId,n.active=!0,n.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),i.hideNativeAds(),o.hideCb&&o.hideCb()},this),l&&l.once(cc.Node.EventType.TOUCH_START,function(){o.isMistakeClose?(e.reportAdClick({adId:t.adId}),i.hideNativeAds()):i.hideNativeAds(),o.hideCb&&o.hideCb()}),a&&(a.getComponent(cc.Label).string=""+t.title),s&&(s.getComponent(cc.Label).string=""+t.desc),c&&(c.getComponent(cc.Label).string=""+(t.clickBtnTxt||"\u70b9\u51fb\u67e5\u770b")),r){var h=t.imgUrlList[Math.floor(Math.random()*t.imgUrlList.length)];cc.assetManager.loadRemote(h,{ext:".png"},function(t,e){!t&&r&&(r.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e))})}},e.prototype.showNativeInsert=function(t,e,o){var i=this;void 0===o&&(o={type:0,container:null});var n=o.container,r=n.getChildByName("img")||n.getChildByName("mask").getChildByName("img"),a=n.getChildByName("title"),s=n.getChildByName("desc"),c=n.getChildByName("btnText"),l=n.getChildByName("next"),h=n.getChildByName("close"),d=n.getChildByName("bg2");if(n.active=!0,n.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),i.hideNativeAds(),o.hideCb&&o.hideCb()},this),l&&l.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),i.hideNativeAds(),o.hideCb&&o.hideCb()},this),h&&h.once(cc.Node.EventType.TOUCH_START,function(){console.log(o.isMistakeClose),o.isMistakeClose?(console.log(1),e.reportAdClick({adId:t.adId}),i.hideNativeAds()):(console.log(2),i.hideNativeAds()),o.hideCb&&o.hideCb()}),console.log("blank",d,o.isMistakeClose_blank),d&&o.isMistakeClose_blank&&d.once(cc.Node.EventType.TOUCH_START,function(){console.log("\u70b9\u51fb\u7a7a\u767d\u5904 - \u4e0b\u8f7d"),e.reportAdClick({adId:t.adId}),i.hideNativeAds(),o.hideCb&&o.hideCb()}),a&&(a.getComponent(cc.Label).string=""+t.title),s&&(s.getComponent(cc.Label).string=""+t.desc),c&&(c.getComponent(cc.Label).string=""+(t.clickBtnTxt||"\u70b9\u51fb\u67e5\u770b")),r){var u=t.imgUrlList[Math.floor(Math.random()*t.imgUrlList.length)];cc.assetManager.loadRemote(u,{ext:".png"},function(t,e){!t&&r&&(r.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e))})}},e.prototype.showNativeIcon=function(t,e,o){var i=this;void 0===o&&(o={type:0,container:null});var n=o.container,r=n.getChildByName("img")||n.getChildByName("mask").getChildByName("img"),a=n.getChildByName("title"),s=n.getChildByName("close");n.active=!0,n.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),i.hideNativeAds(),o.hideCb&&o.hideCb()},this),s&&s.once(cc.Node.EventType.TOUCH_START,function(){o.isMistakeClose?(e.reportAdClick({adId:t.adId}),i.hideNativeAds()):i.hideNativeAds(),o.hideCb&&o.hideCb()}),a&&(a.getComponent(cc.Label).string=""+t.title),r&&cc.assetManager.loadRemote(t.icon,{ext:".png"},function(t,e){!t&&r&&(r.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e))})},e}(t("./BasePlatform").BasePlatform);o.OPPO=i,cc._RF.pop()},{"./BasePlatform":"BasePlatform"}],ObserverConst:[function(t,e,o){"use strict";var i;cc._RF.push(e,"f0ab2PlXuFO+LyqiyCPkrBM","ObserverConst"),i||(i={}),o.default=i,cc._RF.pop()},{}],ObserverManager:[function(t,e,o){"use strict";cc._RF.push(e,"3f65cN83ZtA4Larl4qubgll","ObserverManager"),o.Observer=void 0;var i=function(){function t(){this.prefix="event_"}return t.prototype.on=function(t,e,o){cc.game.on(""+this.prefix+t,e,o)},t.prototype.off=function(t,e,o){cc.game.off(""+this.prefix+t,e,o)},t.prototype.emit=function(t,e,o,i,n,r){cc.game.emit(""+this.prefix+t,e,o,i,n,r)},t}();o.Observer=new i,cc._RF.pop()},{}],Params:[function(t,e,o){"use strict";cc._RF.push(e,"4a6d1YPVA5N1p72U30IiXST","Params");var i=t("./LocalStorage"),n=function(){function t(){this._showParams={},this._gameParams={app_name:"",channel:"",version:""},this._userParams={openid:""},this._openidKey="sdk_openid",this._userParams.openid=i.default.getItem(this._openidKey)}return t.prototype.setShowParams=function(t){return this._showParams=t},t.prototype.getShowParams=function(t){return void 0===t&&(t=""),""===t?this._showParams:void 0===this._showParams[t]?"":this._showParams[t]},t.prototype.setGameParams=function(t){return t.channel="tt_minigame",this._gameParams=t},t.prototype.getGameParams=function(t){return void 0===t&&(t=""),""===t?this._gameParams:void 0===this._gameParams[t]?"":this._gameParams[t]},t.prototype.setUserParams=function(t){return i.default.setItem(this._openidKey,void 0===t.openid?"":t.openid),this._userParams=t},t.prototype.getUserParams=function(t){return void 0===t&&(t=""),""===t?this._userParams:void 0===this._userParams[t]?"":this._userParams[t]},t}();o.default=new n,cc._RF.pop()},{"./LocalStorage":"LocalStorage"}],PaymentSystem:[function(t,e,o){"use strict";cc._RF.push(e,"049c9q3OilJfo6n1bxcW2Ls","PaymentSystem");var i=t("./UserConst"),n=t("./BmsManager"),r=t("./PlatformManager"),a=t("./TipManager"),s=t("./UserManager"),c=t("./EventConst"),l=t("./LocalStorageConst"),h=t("./MemoryStorageConst"),d=t("./MemoryStorageManager"),u=t("./TimeManager"),p=t("./EventManager"),f=t("./AdjustEventSystem"),g=t("./LocalStorageManager"),m=t("./PopupManager"),v=t("./PopupConst"),y=new(function(){function t(){this.allGoodsName=["remove_ads","remove_ads_pack","special_pack","small_st","medium_st","big_st","huge_st","mega_st","brilliant_st","day_vip_3","day_vip_7","day_vip_30","master_pass","piggy_bank","starter_pack","value_pack"],this.price={remove_ads:4.99,remove_ads_pack:7.99,special_pack:2.49,small_st:2.99,medium_st:7.99,big_st:14.99,huge_st:32.99,mega_st:52.99,brilliant_st:99.99,day_vip_3:4.99,day_vip_7:10.99,day_vip_30:29.99,master_pass:6.99,piggy_bank:1.99,starter_pack:.99,value_pack:1.99},this.clickBuyID=null,this.canClick=!0,this.isSubscribe=!1,this.goodsEvent={remove_ads:1,remove_ads_pack:2,special_pack:3,small_st:4,medium_st:5,big_st:6,huge_st:7,mega_st:8,brilliant_st:9,master_pass:14,piggy_bank:13,day_vip_3:10,day_vip_7:11,day_vip_30:12,starter_pack:15,value_pack:16}}return t.prototype.init=function(){var t=g.default.get(l.default.master_pass)||!1,e=g.default.get(l.default.piggy_bank)||!1,o=g.default.get(l.default.starter_pack)||!1,i=g.default.get(l.default.value_pack)||!1;d.default.set(h.default.remove_ads,!1),d.default.set(h.default.remove_ads_pack,!1),d.default.set(h.default.special_pack,!1),g.default.set(l.default.master_pass,t),g.default.set(l.default.piggy_bank,e),g.default.set(l.default.starter_pack,o),g.default.set(l.default.value_pack,i)},t.prototype.clickBuy=function(t){this.canClick&&(this.canClick=!1,this.clickBuyID=t,console.log("id",t),cc.game.off(this.clickBuyID+"_suc",this.purchaseSuc,this),cc.game.off(this.clickBuyID+"_fail",this.purchaseFail,this),cc.game.on(this.clickBuyID+"_suc",this.purchaseSuc,this),cc.game.on(this.clickBuyID+"_fail",this.purchaseFail,this),cc.game.emit("gamelog_Thinking","Gift_tap",{id:{remove_ads:1,remove_ads_pack:2,special_pack:3,small_st:4,medium_st:5,big_st:6,huge_st:7,mega_st:8,brilliant_st:9,master_pass:14,piggy_bank:13,starter_pack:15,value_pack:16}[t]}),r.Platform.purchase(this.clickBuyID))},t.prototype.subscribeBuy=function(t){if(this.canClick){if(this.canClick=!1,s.User.getTempData("isSubscribeVIP"))return a.Tip.show("\u5df2\u7ecf\u8ba2\u9605VIP");this.clickBuyID=t,console.log("id",t),cc.game.off(this.clickBuyID+"_suc",this.subscribeSuc,this),cc.game.off(this.clickBuyID+"_fail",this.subscribeFail,this),cc.game.on(this.clickBuyID+"_suc",this.subscribeSuc,this),cc.game.on(this.clickBuyID+"_fail",this.subscribeFail,this),cc.game.emit("gamelog_Thinking","Gift_tap",{id:{day_vip_3:10,day_vip_7:11,day_vip_30:12}[t]}),r.Platform.subscribe({day_vip_3:"3_day_vip",day_vip_7:"7_day_vip",day_vip_30:"30_day_vip"}[t])}},t.prototype.getGoodsLocalPrice=function(t,e){if(window.getProductListJsonStr)for(var o=0;o<window.getProductListJsonStr.length;o++){var i=window.getProductListJsonStr[o];i.product==e&&(t.getComponent(cc.Label).string=i.oneTimePurchaseOfferDetails.zzc+i.oneTimePurchaseOfferDetails.zzb/1e6)}},t.prototype.purchaseSuc=function(){switch(this.canClick=!0,cc.game.off(this.clickBuyID+"_suc",this.purchaseSuc,this),cc.game.off(this.clickBuyID+"_fail",this.purchaseFail,this),console.log(this.clickBuyID+"_suc","\u8d2d\u4e70\u6210\u529f\uff01"),cc.game.emit("gamelog_Thinking","Gift_suc",{id:this.goodsEvent[this.clickBuyID]}),f.default.todayPay(this.price[this.clickBuyID]),this.clickBuyID){case"special_pack":this.cardReward(10),this.coinReward(100),this.skinReward(13),m.default.show(v.PopupConst.Get3),a.Tip.show("\u8d2d\u4e70\u6210\u529f\uff01"),g.default.set(l.default.hasSpecialBtn,1),cc.game.emit("special_pack");break;case"starter_pack":a.Tip.show("\u8d2d\u4e70\u6210\u529f\uff01"),this.cardReward(5),this.coinReward(100),this.skinReward(21),m.default.show(v.PopupConst.GetNewHand),g.default.set(l.default.starter_pack,!0),cc.game.emit("starter_pack");break;case"value_pack":a.Tip.show("\u8d2d\u4e70\u6210\u529f\uff01"),this.cardReward(8),this.coinReward(100),m.default.show(v.PopupConst.GetValuePack),g.default.set(l.default.value_pack,!0),cc.game.emit("value_pack");break;case"remove_ads":r.Platform.setIsBuyRemoveInsert(!0),g.default.set(l.default.isNoAD,1),d.default.set(h.default.remove_ads,!0),a.Tip.show("\u8d2d\u4e70\u6210\u529f\uff01"),cc.game.emit("remove_ads");break;case"remove_ads_pack":r.Platform.setIsBuyRemoveInsert(!0),r.Platform.hideBanner(),g.default.set(l.default.isNoAD,1),d.default.set(h.default.remove_ads_pack,!0),this.cardReward(15),this.skinReward(14),d.default.set(h.default.rewardType,"remove_ads_pack"),d.default.set(h.default.reward,[["card",15],["skin",15]]),m.default.show(v.PopupConst.Get),cc.game.emit("remove_ads"),a.Tip.show("\u8d2d\u4e70\u6210\u529f\uff01");break;case"small_st":this.cardReward(10),a.Tip.show("\u8d2d\u4e70\u6210\u529f\uff01");break;case"medium_st":this.cardReward(30),a.Tip.show("\u8d2d\u4e70\u6210\u529f\uff01");break;case"big_st":this.cardReward(60),a.Tip.show("\u8d2d\u4e70\u6210\u529f\uff01");break;case"huge_st":this.cardReward(150),a.Tip.show("\u8d2d\u4e70\u6210\u529f\uff01");break;case"mega_st":this.cardReward(300),a.Tip.show("\u8d2d\u4e70\u6210\u529f\uff01");break;case"brilliant_st":this.cardReward(600),a.Tip.show("\u8d2d\u4e70\u6210\u529f\uff01");break;case"master_pass":a.Tip.show("\u8d2d\u4e70\u6210\u529f\uff01"),g.default.set(l.default.master_pass,!0);break;case"piggy_bank":a.Tip.show("\u8d2d\u4e70\u6210\u529f\uff01"),g.default.set(l.default.piggy_bank,!0),cc.game.emit("piggy_bank"),this.coinReward(4e3)}},t.prototype.purchaseFail=function(){this.canClick=!0,cc.game.off(this.clickBuyID+"_suc",this.purchaseSuc,this),cc.game.off(this.clickBuyID+"_fail",this.purchaseFail,this),console.log(this.clickBuyID+"_suc","\u8d2d\u4e70\u5931\u8d25\uff01"),a.Tip.show("\u8d2d\u4e70\u5931\u8d25\uff01")},t.prototype.subscribeSuc=function(){this.canClick=!0,cc.game.off(this.clickBuyID+"_suc",this.subscribeSuc,this),cc.game.off(this.clickBuyID+"_fail",this.subscribeFail,this),console.log(""+this.clickBuyID,"\u8d2d\u4e70\u6210\u529f\uff01"),a.Tip.show("\u8ba2\u9605\u6210\u529f\uff01"),f.default.todayPay(this.price[this.clickBuyID]);var t=u.default.getCurrentTime();switch(g.default.set(l.default.vipStartTime,t),this.saveServerData(l.default.vipStartTime,t),r.Platform.setIsBuyRemoveInsert(!0),d.default.set(h.default.isVIP,!0),this.clickBuyID){case"day_vip_3":g.default.set(l.default.vipType,3),this.cardReward(10),g.default.set(l.default.isReceiveVIP,1);break;case"day_vip_7":g.default.set(l.default.vipType,7),g.default.set(l.default.isReceiveVIP,1),this.cardReward(25);break;case"day_vip_30":g.default.set(l.default.vipType,30),g.default.set(l.default.isReceiveVIP,1),this.cardReward(65)}cc.game.emit("updateVIP")},t.prototype.subscribeFail=function(){this.canClick=!0,console.log("yongjiuhezi_fail","\u8d2d\u4e70\u5931\u8d25\uff01"),a.Tip.show("\u8ba2\u9605\u5931\u8d25\uff01")},t.prototype.noAdReward=function(t){"noads"==t?s.User.setTempData("noads",!0):s.User.setTempData("noads_plus",!0),r.Platform.setIsBuyRemoveInsert(!0)},t.prototype.skinReward=function(t){var e=t,o=s.User.get(i.UserData.getLockSkinList);o[0].includes(e)||o[0].push(e),s.User.set(i.UserData.getLockSkinList,o),s.User.setTempData("chooseSkinPage",0),s.User.setTempData("chooseSkin",e+1)},t.prototype.cardReward=function(t){var e=(g.default.get(l.default.cardAmount)||0)+t;g.default.set(l.default.cardAmount,e)},t.prototype.coinReward=function(t){var e=(s.User.get("coin")||0)+t;s.User.set("coin",e),cc.game.emit("updateCoin"),this.saveServerData("coin",e),p.Event.emit(c.default.COIN_UPDATE)},t.prototype.saveServerData=function(t,e){e=e.toString(),n.BMS.saveServerData(r.Platform.getConfig().flag,s.User.get("googleID")||s.User.get("uuid"),t,e).then(function(){console.log("\u4fdd\u5b58"+t+"\u6210\u529f:"+e)})},t}());o.default=y,cc._RF.pop()},{"./AdjustEventSystem":"AdjustEventSystem","./BmsManager":"BmsManager","./EventConst":"EventConst","./EventManager":"EventManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./MemoryStorageConst":"MemoryStorageConst","./MemoryStorageManager":"MemoryStorageManager","./PlatformManager":"PlatformManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./TimeManager":"TimeManager","./TipManager":"TipManager","./UserConst":"UserConst","./UserManager":"UserManager"}],PigItem:[function(t,e,o){"use strict";cc._RF.push(e,"99335lOQzJOGq0Mx5PwkbFK","PigItem");var i=t("./PopupConst"),n=t("./UIBase"),r=t("./LocalStorageConst"),a=t("./LocalStorageManager"),s=t("./PopupManager"),c=cc._decorator,l=c.ccclass,h=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this);var e=a.default.get(r.default.tempCoin)||0;a.default.set(r.default.tempCoin,e),this.localStorageUIData[r.default.tempCoin]=this.updateTempCoin.bind(this),this.initView()},e.prototype.initView=function(){},e.prototype.updateTempCoin=function(t){t>=4e3&&(t=4e3),this.dict.pigProgress.getComponent(cc.Sprite).fillRange=t/4e3,this.dict.pigProgressText.getComponent(cc.Label).string=t/4e3*100+"%"},e.prototype.clickSelf=function(){s.default.show(i.PopupConst.Pig)},__decorate([l],e)}(n.default));o.default=h,cc._RF.pop()},{"./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./UIBase":"UIBase"}],PlanItem:[function(t,e,o){"use strict";var i;cc._RF.push(e,"04abfJBjUlDsIpsGNQMd18Q","PlanItem");var n,r=t("./EventConst"),a=t("./PopupConst"),s=t("./UIBase"),c=t("./LocalStorageConst"),l=t("./LocalStorageManager"),h=t("./MemoryStorageConst"),d=t("./MemoryStorageManager"),u=t("./BmsManager"),p=t("./EventManager"),f=t("./PlatformManager"),g=t("./PopupManager"),m=t("./UserManager"),v=t("./ShuShuConst"),y=cc._decorator,_=y.ccclass,C=y.property;(n=i||(i={}))[n.Normal=0]="Normal",n[n.Finish=1]="Finish",n[n.Lock=2]="Lock";var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.levelSpriteFrame=[],e.param=null,e.state=null,e.starAmount=0,e.skinNameArr=[],e.free=[],e.master=[],e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.setData=function(t){this.param=t,this.node.zIndex=this.param.index,this.free=JSON.parse(this.param.type.free),this.master=JSON.parse(this.param.type.master),this.refresh()},e.prototype.refresh=function(){this.dict.ordinaryContainer.color=cc.Color.GRAY,this.dict.container.color=cc.Color.GRAY,this.dict.ordinaryIcon.color=cc.Color.GRAY,this.dict.icon.color=cc.Color.GRAY,this.dict.ordinaryCard.color=cc.Color.GRAY,this.dict.card.color=cc.Color.GRAY,this.dict.ordinaryAmount.color=cc.Color.GRAY,this.dict.amount.color=cc.Color.GRAY,this.dict.fill.active=!1,this.dict.ordinaryYesBtn.active=!1,this.dict.yesBtn.active=!1,this.dict.ordinaryGou.active=!1,this.dict.gou.active=!1,this.dict.ordinaryLock.active=!0,this.dict.lock.active=!0,this.dict.ordinaryCard.active=!1,this.dict.card.active=!1,this.dict.levelSprite.getComponent(cc.Sprite).spriteFrame=this.levelSpriteFrame[1],this.dict.level.color=cc.Color.WHITE,this.dict.bg0.active=!1,0==this.param.index&&(this.dict.bg0.active=!0),this.param.index%2==0?this.dict.bg.color=(new cc.Color).fromHEX("#f3e0ac"):this.dict.bg.color=(new cc.Color).fromHEX("#FEEFC6"),this.dict.level.getComponent(cc.Label).string=""+(this.param.index+1);var t=d.default.get(h.default.planLevel)||1,e=l.default.get(c.default.planReceive)||[],o=l.default.get(c.default.planReceive2)||[],i=l.default.get(c.default.master_pass)||!1;t>this.param.index+1&&(this.dict.ordinaryContainer.color=cc.Color.WHITE,this.dict.ordinaryIcon.color=cc.Color.WHITE,this.dict.ordinaryCard.color=cc.Color.WHITE,this.dict.ordinaryAmount.color=cc.Color.WHITE,this.dict.fill.active=!0,this.dict.ordinaryLock.active=!1,this.dict.levelSprite.getComponent(cc.Sprite).spriteFrame=this.levelSpriteFrame[0],this.dict.level.color=cc.Color.WHITE,i&&(this.dict.icon.color=cc.Color.WHITE,this.dict.card.color=cc.Color.WHITE,this.dict.container.color=cc.Color.WHITE,this.dict.amount.color=cc.Color.WHITE,this.dict.lock.active=!1),e.includes(this.param.index+1)?this.dict.ordinaryGou.active=!0:this.dict.ordinaryYesBtn.active=!0,o.includes(this.param.index+1)?this.dict.gou.active=!0:i&&(this.dict.yesBtn.active=!0)),1==this.free[0]?(this.dict.ordinaryAmount.getComponent(cc.Label).string="x"+this.free[1],this.dict.ordinaryCard.active=!1):2==this.free[0]&&(this.dict.ordinaryAmount.getComponent(cc.Label).string="x"+this.free[1],this.dict.ordinaryCard.active=!0),1==this.master[0]?(this.dict.amount.getComponent(cc.Label).string="x"+this.master[1],this.dict.card.active=!1):2==this.master[0]&&(this.dict.amount.getComponent(cc.Label).string="x"+this.master[1],this.dict.card.active=!0)},e.prototype.clickEnter=function(){var t=l.default.get(c.default.planReceive)||[];t.push(this.param.index+1),l.default.set(c.default.planReceive,t),this.refresh(),2==this.free[0]?(this.cardReward(this.free[1]),d.default.set(h.default.reward,[["card",this.free[1]]])):(this.coinReward(this.free[1]),d.default.set(h.default.reward,[["coin",this.free[1]]])),cc.game.emit("gamelog_Thinking",v.ShuShuConst.Activity_get,{id:4}),g.default.show(a.PopupConst.Get)},e.prototype.clickEnter2=function(){var t=l.default.get(c.default.planReceive2)||[];t.push(this.param.index+1),l.default.set(c.default.planReceive2,t),this.refresh(),2==this.master[0]?(this.cardReward(this.master[1]),d.default.set(h.default.reward,[["card",this.master[1]]])):(this.coinReward(this.master[1]),d.default.set(h.default.reward,[["coin",this.master[1]]])),g.default.show(a.PopupConst.Get)},e.prototype.cardReward=function(t){var e=(l.default.get(c.default.cardAmount)||0)+t;l.default.set(c.default.cardAmount,e),this.saveServerData(c.default.cardAmount,e)},e.prototype.coinReward=function(t){var e=(m.User.get("coin")||0)+t;m.User.set("coin",e),p.Event.emit(r.default.COIN_UPDATE),cc.game.emit("updateCoin"),this.saveServerData("coin",e)},e.prototype.saveServerData=function(t,e){e=e.toString(),u.BMS.saveServerData(f.Platform.getConfig().flag,m.User.get("googleID")||m.User.get("uuid"),t,e).then(function(){console.log("\u4fdd\u5b58"+t+"\u6210\u529f:"+e)})},e.state=i,__decorate([C([cc.SpriteFrame])],e.prototype,"levelSpriteFrame",void 0),__decorate([_],e)}(s.default);o.default=b,cc._RF.pop()},{"./BmsManager":"BmsManager","./EventConst":"EventConst","./EventManager":"EventManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./MemoryStorageConst":"MemoryStorageConst","./MemoryStorageManager":"MemoryStorageManager","./PlatformManager":"PlatformManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./ShuShuConst":"ShuShuConst","./UIBase":"UIBase","./UserManager":"UserManager"}],PlatformConst:[function(t,e,o){"use strict";var i,n,r,a,s,c,l;cc._RF.push(e,"050ce4vS+hNCp1Mio3hNmrF","PlatformConst"),o.PlatformConfig=o.BaseConfig=o.LogoType=o.AgeTipType=o.LoginType=o.PrivacyPolicyType=o.FitUIType=o.EPlatform=void 0;var h,d=t("./BasePlatform"),u=t("./Android"),p=t("./AndroidOPPO"),f=t("./AndroidVIVO"),g=t("./AndroidXiaoMi"),m=t("./HW"),v=t("./IOS"),y=t("./KS"),_=t("./OPPO"),C=t("./QQ"),b=t("./TT"),S=t("./VIVO"),w=t("./WX"),A=t("./XM");(h=n=o.EPlatform||(o.EPlatform={}))[h.WEB=0]="WEB",h[h.TT=1]="TT",h[h.KS=2]="KS",h[h.WX=3]="WX",h[h.QQ=4]="QQ",h[h.BAIDU=5]="BAIDU",h[h.MEIZU=6]="MEIZU",h[h.OPPO=7]="OPPO",h[h.VIVO=8]="VIVO",h[h.HW=9]="HW",h[h.XIAOMI=10]="XIAOMI",h[h.ANDROID=11]="ANDROID",h[h.ANDROID_GOOGLE=12]="ANDROID_GOOGLE",h[h.IOS=13]="IOS",h[h.IOS_HAIWAI=14]="IOS_HAIWAI",h[h.OPPO_ANDROID=15]="OPPO_ANDROID",h[h.VIVO_ANDROID=16]="VIVO_ANDROID",h[h.XIAOMI_ANDROID=17]="XIAOMI_ANDROID",h[h.HUAWEI_ANDROID=18]="HUAWEI_ANDROID",h[h.KS_ANDROID=19]="KS_ANDROID",h[h.OHAYOO_ANDROID=20]="OHAYOO_ANDROID",function(t){t[t.Normal=0]="Normal",t[t.TT=1]="TT",t[t.KS=2]="KS"}(r=o.FitUIType||(o.FitUIType={})),function(t){t[t.NO=0]="NO",t[t.MINI_GAME=1]="MINI_GAME",t[t.MINI_GAME_VIVO=2]="MINI_GAME_VIVO",t[t.MINI_GAME_XM=3]="MINI_GAME_XM",t[t.NATIVE=4]="NATIVE"}(a=o.PrivacyPolicyType||(o.PrivacyPolicyType={})),function(t){t[t.NO=0]="NO",t[t.HW=1]="HW",t[t.HWAndriod=2]="HWAndriod"}(s=o.LoginType||(o.LoginType={})),function(t){t[t.NO=0]="NO",t[t.AGE_12=1]="AGE_12",t[t.AGE_16=2]="AGE_16"}(c=o.AgeTipType||(o.AgeTipType={})),function(t){t[t.DreamSetUp_TC=0]="DreamSetUp_TC",t[t.DreamSetUp_EN=1]="DreamSetUp_EN",t[t.DreamSetUp=2]="DreamSetUp"}(l=o.LogoType||(o.LogoType={}));var k=function(){this.platformClass=d.BasePlatform,this.flag="rrbdnios",this.version="1.0.1",this.appID="",this.bannerID="",this.insertID="",this.rewardID="",this.blockID="",this.boxID="",this.nativeID="",this.hasRecord=0,this.hasShare=0,this.fitUIType=r.Normal,this.hasHomeBtn=0,this.hasAgeTip=0,this.loadingDelay=0,this.privacyPolicyType=a.NO,this.hasMoreGame=0,this.hasCopyright=0,this.hasCustomerService=0,this.ageTipType=c.NO,this.logoType=l.DreamSetUp_TC,this.loginType=s.NO,this.company="\u5e7f\u5dde\u5c0f\u8d1d",this.email="xiaobei-kf@foxmail.com",this.address="\u5e7f\u5dde\u5e02\u5929\u6cb3\u533a\u73e0\u6c5f\u65b0\u57ce\u73e0\u6c5f\u4e1c\u8def30\u53f7\u5e7f\u5dde\u94f6\u884c\u5927\u53a6601A",this.configSuffix="",this.hasHealthy=1,this.registerNumber="2020SR0412256",this.registerPerson="\u5e7f\u5dde\u52c7\u5f80\u79d1\u6280\u6709\u9650\u516c\u53f8",this.customAd_topImg_bottomText="",this.customAd_leftImg_rightText="",this.serverUrl="https://game.zuiqiangyingyu.net/",this.rank="",this.hasPurchase=0,this.hasVIP=1,this.hasShip=1,this.recordNumber="",this.isBlockMan=0,this.thinkingID="bf81e42ae54a4a3da95a36d781dd1c21"};o.BaseConfig=k;var P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=u.Android,e.ageTipType=c.AGE_16,e.loadingDelay=2,e.fitUIType=r.TT,e.hasCopyright=1,e.flag="qygwlgczapk",e.version="1.0.0.0hykb",e.registerNumber="2019SR0904903",e.hasHealthy=1,e.hasAgeTip=1,e.privacyPolicyType=a.NATIVE,e.rank="android",e.hasPurchase=0,e}return __extends(e,t),e}(k),T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=u.Android,e.flag="lsjddwhwgg",e.version="1.0.0.4",e.ageTipType=c.NO,e.fitUIType=r.TT,e.hasCopyright=0,e.hasHealthy=0,e.rank="haiwai",e.hasVIP=0,e.hasPurchase=0,e.hasShip=0,e}return __extends(e,t),e}(k),B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=u.Android,e.flag="wdggapk",e.version="1.0.4.1hw",e.hasHomeBtn=1,e.ageTipType=c.AGE_16,e.loadingDelay=2,e.fitUIType=r.TT,e.hasCopyright=1,e.loginType=s.HWAndriod,e}return __extends(e,t),e}(k),M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=u.Android,e.flag="rrbdn",e.version="1.0.3ohayoo",e.hasHomeBtn=1,e.loadingDelay=2,e.ageTipType=c.AGE_12,e.fitUIType=r.TT,e.privacyPolicyType=a.NATIVE,e.hasAgeTip=1,e}return __extends(e,t),e}(k),I=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=g.default,e.flag="wlgczapk",e.version="1.0.0.1xm",e.hasHomeBtn=1,e.ageTipType=c.AGE_16,e.loadingDelay=1,e.hasCopyright=1,e.privacyPolicyType=a.NATIVE,e}return __extends(e,t),e}(k),R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=p.default,e.flag="wlgczapk",e.version="1.0.0.1oppo",e.hasHomeBtn=1,e.ageTipType=c.AGE_16,e.loadingDelay=2,e.hasMoreGame=1,e.privacyPolicyType=a.NATIVE,e.hasCopyright=1,e.hasCustomerService=1,e.fitUIType=r.TT,e}return __extends(e,t),e}(P),L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=f.default,e.flag="wlgczapk",e.version="1.0.0.1vivo",e.hasHomeBtn=1,e.ageTipType=c.AGE_16,e.loadingDelay=2,e.privacyPolicyType=a.NATIVE,e.hasCopyright=1,e.fitUIType=r.TT,e}return __extends(e,t),e}(P),D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=v.IOS,e.flag="zqdn2ios",e.version="3.0.3",e.ageTipType=c.AGE_16,e.fitUIType=r.TT,e}return __extends(e,t),e}(k),N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=v.IOS,e.flag="wlgczhwios",e.version="3.0.3",e.ageTipType=c.NO,e.fitUIType=r.TT,e.hasCopyright=0,e.hasHealthy=0,e.serverUrl="https://bms.yarkgame.com/",e.rank="haiwai",e}return __extends(e,t),e}(k),E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=b.TT,e.flag="yjnhtt",e.version="1.0.8",e.appID="tt467e30c3d95448c4",e.bannerID="a3e1i8ckl2b4lc5khf",e.rewardID="1hfao85dg8u3o1lf1g",e.insertID="1iddb482e6h6de411o",e.fitUIType=r.TT,e.hasRecord=1,e.hasShare=1,e.hasCopyright=1,e.logoType=l.DreamSetUp,e.recordNumber="\u7ca4ICP\u590719160116\u53f7-123X",e.isBlockMan=1,e}return __extends(e,t),e}(k),x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=y.KS,e.flag="whmscatt",e.version="1.1.1",e.appID="ks712131694668907314",e.bannerID="",e.rewardID="2300005272_01",e.insertID="2300005272_02",e.fitUIType=r.KS,e.hasRecord=1,e.hasCopyright=1,e.registerNumber="2024SR0097932",e.registerPerson="\u5e7f\u5dde\u5353\u8baf\u4e92\u52a8\u4fe1\u606f\u6280\u672f\u6709\u9650\u516c\u53f8",e.logoType=l.DreamSetUp,e.recordNumber="\u7ca4ICP\u59072023086686\u53f7-10X",e.hasShare=0,e}return __extends(e,t),e}(k),U=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=_.OPPO,e.flag="wdggoppo",e.version="1.1.5",e.appID="30841165",e.bannerID="565455",e.rewardID="565458",e.nativeID="565457",e.boxID="565459",e.fitUIType=r.TT,e.hasCopyright=1,e.privacyPolicyType=a.MINI_GAME,e.ageTipType=c.AGE_16,e}return __extends(e,t),e}(k),O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=A.XM,e.flag="wdggxm",e.version="1.1.5",e.appID="2882303761520177155",e.bannerID="a50b2ff21bbe25f1fc675ac7fd411e91",e.rewardID="188792c0e2bd130df5a692700c1894c7",e.insertID="097adfd4ff885bef023334f45f3c7fa1",e.nativeID="",e.ageTipType=c.AGE_16,e.boxID="",e.fitUIType=r.TT,e.hasCopyright=1,e.privacyPolicyType=a.MINI_GAME_XM,e.company="\u5e7f\u5dde\u5353\u8baf",e.email="zhuoxunhudong-kf@qq.com",e.address="\u5e7f\u5dde\u5e02\u5929\u6cb3\u533a\u73e0\u6c5f\u4e1c\u8def30\u53f7601\u5ba4(\u90e8\u4f4d:\u81ea\u7f16B\u5355\u5143)",e}return __extends(e,t),e}(k),F=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=S.VIVO,e.flag="wlgczvivo",e.version="1.0.1",e.appID="105660562",e.bannerID="21955b5d2b694b6fa553aaa605171d28",e.rewardID="a255dc2523f64706bb9eb09e0c16633f",e.nativeID="",e.insertID="051f9c2dfb8b4678bf8c75f828d2cf1d",e.boxID="",e.fitUIType=r.TT,e.hasCopyright=1,e.privacyPolicyType=a.MINI_GAME_VIVO,e.customAd_topImg_bottomText="018042ead8b049eaa3d0f6262d343c68",e.customAd_leftImg_rightText="71d0803f5a4e47f9b58974feaf660184",e}return __extends(e,t),e}(k),W=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=C.QQ,e.flag="wdggqq",e.version="1.1.0",e.appID="1112223440",e.bannerID="ff62f60a3d7b194a8c1a4fedfcfb25a8",e.rewardID="15631c3036ac6280fdb371f9bb6f0124",e.insertID="c3b4467306fa6ccd4b6b293c649e5cbd",e.fitUIType=r.TT,e.hasCopyright=1,e.privacyPolicyType=a.MINI_GAME,e}return __extends(e,t),e}(k),V=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=w.WX,e.flag="wlgczwx2",e.version="1.0.1",e.appID="wxb5f506d7c427c834",e.bannerID="",e.rewardID="",e.insertID="",e.blockID="",e.blockID2="",e.fitUIType=r.TT,e.hasShare=1,e.rank="wx2",e}return __extends(e,t),e}(k),H=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.platformClass=m.default,e.flag="wdgghw",e.version="1.1.0",e.appID="106706891",e.bannerID="x7z0llr5fc",e.rewardID="h3p62ppoik",e.insertID="f30g2ec9m7",e.fitUIType=r.TT,e.privacyPolicyType=a.MINI_GAME,e.loginType=s.HW,e.hasCopyright=1,e}return __extends(e,t),e}(k);o.PlatformConfig=((i={})[n.WEB]=k,i[n.TT]=E,i[n.OPPO]=U,i[n.XIAOMI]=O,i[n.VIVO]=F,i[n.KS]=x,i[n.WX]=V,i[n.HW]=H,i[n.QQ]=W,i[n.IOS]=D,i[n.IOS_HAIWAI]=N,i[n.ANDROID]=P,i[n.ANDROID_GOOGLE]=T,i[n.OPPO_ANDROID]=R,i[n.VIVO_ANDROID]=L,i[n.XIAOMI_ANDROID]=I,i[n.OHAYOO_ANDROID]=M,i[n.HUAWEI_ANDROID]=B,i),cc._RF.pop()},{"./Android":"Android","./AndroidOPPO":"AndroidOPPO","./AndroidVIVO":"AndroidVIVO","./AndroidXiaoMi":"AndroidXiaoMi","./BasePlatform":"BasePlatform","./HW":"HW","./IOS":"IOS","./KS":"KS","./OPPO":"OPPO","./QQ":"QQ","./TT":"TT","./VIVO":"VIVO","./WX":"WX","./XM":"XM"}],PlatformManager:[function(t,e,o){"use strict";cc._RF.push(e,"1ac0d4Os3hIDYaTrB4el0Fe","PlatformManager"),o.Platform=void 0;var i=t("./BasePlatform"),n=t("./PlatformConst"),r=t("./LocalStorageConst"),a=t("./OPPOADMediatorUtils"),s=t("./OPPOMiniADMediatorUtils"),c=t("./XMADMediatorUtils"),l=t("./BmsManager"),h=t("./LocalStorageManager"),d=function(){function t(){this.id=n.EPlatform.WEB,this.config=new n.PlatformConfig[n.EPlatform.WEB],this.instance=new i.BasePlatform,this.isNoAD=!1,this.bannerAdCounter=1e10,this.isBuyRemoveInsert=!1}return t.prototype.startInit=function(){var t=this;this.setPlatform(),this.setConfig(),this.judgePlatform(),this.init(),setInterval(function(){t.bannerAdCounter++},1e3)},t.prototype.setPlatform=function(){},t.prototype.setConfig=function(){this.config=new n.PlatformConfig[n.EPlatform.ANDROID_GOOGLE],this.config=new n.PlatformConfig[n.EPlatform.TT]},t.prototype.setNoAd=function(t){this.isNoAD=t},t.prototype.getNoADState=function(){return this.isNoAD},t.prototype.judgePlatform=function(){var t=cc.sys,e=t.platform;if(e==t.XIAOMI_GAME)return this.id=n.EPlatform.XIAOMI;if(window.tt)return this.id=n.EPlatform.TT;if(window.ks)return this.id=n.EPlatform.KS;if(window.qq)return this.id=n.EPlatform.QQ;if(window.wx)return this.id=n.EPlatform.WX;if(e==t.VIVO_GAME)return this.id=n.EPlatform.VIVO;if(e==t.OPPO_GAME)return this.id=n.EPlatform.OPPO;if(e==t.HUAWEI_GAME)return this.id=n.EPlatform.HW;if(e==t.IPHONE||e==t.IPAD)return window.haiwai?this.id=n.EPlatform.IOS_HAIWAI:this.id=n.EPlatform.IOS;if(e==t.ANDROID){var o=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getPlatform","()Ljava/lang/String;");return console.log("\u5b89\u5353\u6e20\u9053",o),null==o&&(o=""),-1!=o.indexOf("xiaomi")?this.id=n.EPlatform.XIAOMI_ANDROID:-1!=o.indexOf("vivo")?this.id=n.EPlatform.VIVO_ANDROID:-1!=o.indexOf("oppo")?this.id=n.EPlatform.OPPO_ANDROID:-1!=o.indexOf("huawei")?this.id=n.EPlatform.HUAWEI_ANDROID:-1!=o.indexOf("google")?this.id=n.EPlatform.ANDROID_GOOGLE:this.id=n.EPlatform.ANDROID}},t.prototype.init=function(){this.id!=n.EPlatform.WEB&&(this.config=new n.PlatformConfig[this.id],this.instance=new this.config.platformClass,this.instance.setConfig(this.config))},t.prototype.getPlatform=function(){return this.instance},t.prototype.getConfig=function(){return this.config},t.prototype.is=function(t){return this.id==t},t.prototype.showRewardAds=function(t){if(this.isNoAD)return t(0);this.id==n.EPlatform.XIAOMI_ANDROID?c.XMADMediator.showRewardVideo(t):this.id==n.EPlatform.OPPO_ANDROID?a.OPPOADMediator.showRewardVideo(t):this.id==n.EPlatform.OPPO?s.OPPOMiniADMediator.showRewardVideo(t):this.instance.showRewardAds(t)},t.prototype.showRewardAds_xiaomi=function(t){if(this.isNoAD)return t(0);this.instance.showRewardAds(t)},t.prototype.showAdDebugger=function(){this.instance.showAdDebugger()},t.prototype.showBanner=function(t,e){if(!this.isBuyRemoveInsert&&l.BMS.getKey("isbanner")){var o=l.BMS.getKey("bannerAdIntervals");if(console.log("== banner\u68c0\u6d4b cd\u95f4\u9694\u4e0d\u5c55\u793a\uff0ccd\u8ba1\u65f6: "+this.bannerAdCounter+"\uff0ccd\u95f4\u9694"+o),this.bannerAdCounter<o)return console.log("== banner cd\u4e2d\uff0c\u65e0\u6cd5\u89e6\u53d1");this.instance.showBanner(t,e)}},t.prototype.vibrate=function(t){void 0===t&&(t=30),window.zhenDongMute||this.instance.vibrate(t)},t.prototype.hideBanner=function(t){this.instance.hideBanner(t)},t.prototype.clickAdJump=function(){this.instance.clickAdJump()},t.prototype.showNativeAds=function(t,e){this.instance.showNativeAds(t,e)},t.prototype.hideNativeAds=function(){this.instance.hideNativeAds()},t.prototype.showInsert=function(){if(!this.isBuyRemoveInsert){var t=h.default.get(r.default.isNoAD);if(window.isResultInsert&&!window.isJudgeInsert&&!t)return window.isJudgeInsert=!0,void cc.game.emit("showNoAD");this.instance.showInsert()}},t.prototype.setIsBuyRemoveInsert=function(t){this.isBuyRemoveInsert=t},t.prototype.showOpenAd=function(){this.instance.showOpenAd()},t.prototype.destroyInsert=function(){this.instance.destroyInsert()},t.prototype.showBlockAds=function(t){void 0===t&&(t={id:"",left:null,top:null}),this.instance.showBlockAds(t)},t.prototype.hideBlockAds=function(){this.instance.hideBlockAds()},t.prototype.showAppBoxAds=function(){this.instance.showAppBoxAds()},t.prototype.hideAppBoxAds=function(){this.instance.hideAppBoxAds()},t.prototype.changeBlockAdsPos=function(t){this.instance.changeBlockAdsPos(t)},t.prototype.showNativeAdvanceBigBanner=function(t,e){void 0===e&&(e=!1),this.instance.showNativeAdvanceBigBanner(t,e)},t.prototype.hideNativeAdvanceBigBanner=function(){this.instance.hideNativeAdvanceBigBanner()},t.prototype.showInsertBannerImg=function(t,e){void 0===e&&(e=!1),this.instance.showInsertBannerImg(t,e)},t.prototype.hideInsertBannerImg=function(){this.instance.hideInsertBannerImg()},t.prototype.share=function(t){this.instance.share(t)},t.prototype.shareRecordCap=function(t){this.instance.shareRecordCap(t)},t.prototype.startRecordCap=function(t){this.instance.startRecordCap(t)},t.prototype.stopRecordCap=function(){this.instance.stopRecordCap()},t.prototype.getShareStatus=function(){return this.instance.getShareStatus()},t.prototype.showPrivacyPolicy=function(){return this.instance.showPrivacyPolicy()},t.prototype.report=function(t,e){this.instance.report(t,e)},t.prototype.adjustEvent=function(t){console.log("%c [adjustEvent] \u4e8b\u4ef6\u6253\u70b9: "+t+" ","color:#F500FF"),this.instance.adjustEvent(t)},t.prototype.showMoreGame=function(){this.instance.showMoreGame()},t.prototype.showLargeFeed=function(t,e){void 0===e&&(e=0),this.instance.showLargeFeed(t,e)},t.prototype.removeLargePicFeed=function(t){this.instance.removeLargePicFeed(t)},t.prototype.removeInterstitialFeed=function(t){this.instance.removeInterstitialFeed(t)},t.prototype.showInterstitialFeed=function(t,e,o,i){void 0===t&&(t=""),void 0===e&&(e=3),void 0===o&&(o=0),void 0===i&&(i=0),this.instance.showInterstitialFeed(t,e,o,i)},t.prototype.showBannerFeed=function(t){this.isBuyRemoveInsert||this.instance.showBannerFeed(t)},t.prototype.showBannerFeed2=function(t){this.isBuyRemoveInsert||this.instance.showBannerFeed2(t)},t.prototype.showSplash=function(){this.instance.showSplash()},t.prototype.removeBannerFeed=function(){this.instance.removeBannerFeed()},t.prototype.gameComment=function(){this.instance.gameComment()},t.prototype.purchase=function(t){this.instance.purchase(t)},t.prototype.subscribe=function(t){this.instance.subscribe(t)},t.prototype.login=function(){return this.instance.login()},t.prototype.signIn=function(){this.instance.signIn()},t.prototype.hideCustomAd1=function(){this.instance.hideCustomAd1()},t.prototype.hideCustomAd2=function(){this.instance.hideCustomAd2()},t.prototype.showCustomAd1=function(t){this.instance.showCustomAd1(t)},t.prototype.showCustomAd2=function(t){this.instance.showCustomAd2(t)},t.prototype.follow=function(t){this.instance.follow(t)},t.prototype.showCustomAd=function(t){this.instance.showCustomAd(t)},t.prototype.hideCustomAd=function(){this.instance.hideCustomAd()},t.prototype.showCustomAd_1=function(t,e){this.instance.showCustomAd_1(t,e)},t.prototype.hideCustomAd_1=function(){this.instance.hideCustomAd_1()},t.prototype.showCustomAd_2=function(t,e){this.instance.showCustomAd_2(t,e)},t.prototype.hideCustomAd_2=function(){this.instance.hideCustomAd_2()},t.prototype.taInit=function(t){this.instance.taInit(t)},t.prototype.sendRankData=function(){this.instance.sendRankData()},t.prototype.showRankList=function(){this.instance.showRankList()},t}();o.Platform=new d,cc._RF.pop()},{"./BasePlatform":"BasePlatform","./BmsManager":"BmsManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./OPPOADMediatorUtils":"OPPOADMediatorUtils","./OPPOMiniADMediatorUtils":"OPPOMiniADMediatorUtils","./PlatformConst":"PlatformConst","./XMADMediatorUtils":"XMADMediatorUtils"}],PlayItem:[function(t,e,o){"use strict";var i;cc._RF.push(e,"3ef114FnslCG4pO1ZECcCAf","PlayItem");var n,r=t("./SceneConst"),a=t("./UserConst"),s=t("./PlatformManager"),c=t("./SceneManager"),l=t("./UserManager"),h=t("./ConfigUtils"),d=t("./ShuShuConst"),u=t("./LocalStorageManager"),p=t("./LocalStorageConst"),f=cc._decorator,g=f.ccclass,m=f.property;(n=i||(i={}))[n.Normal=0]="Normal",n[n.Finish=1]="Finish",n[n.Lock=2]="Lock";var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.modeName=null,e.video=null,e.text=null,e.param=null,e.state=null,e.starAmount=0,e.videoTimes=2,e.isLoadingScene=!1,e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.setData=function(t){this.param=t,this.node.zIndex=this.param.index,this.refresh()},e.prototype.refresh=function(){var t=this,e=u.default.get(p.default.BranchVideo)||{};e[this.param.modeID]||(e[this.param.modeID]=0),e[this.param.modeID]>=this.videoTimes?(this.video.active=!1,this.text.active=!1,this.icon.node.color=cc.Color.WHITE):(this.icon.node.color=cc.color(110,110,110),this.video.active=!0,this.text.active=!0,this.text.getComponent(cc.Label).string="("+e[this.param.modeID]+"/"+this.videoTimes+")"),cc.resources.load("texture/mode/moshi"+this.param.modeID,function(e,o){if(e)return console.log(e);t.icon.spriteFrame=new cc.SpriteFrame(o)}),this.modeName.string=""+this.param.modeName},e.prototype.clickEnter=function(){var t=this,e=this.param.modeID;cc.game.emit("gamelog","modebtn_"+e),this.video.active?s.Platform.showRewardAds(function(o){if(0==o){cc.game.emit("gamelog_Thinking",d.ShuShuConst.Play,{mode:e});var i=u.default.get(p.default.BranchVideo)||{};i[t.param.modeID]||(i[t.param.modeID]=0),i[t.param.modeID]+=1,u.default.set(p.default.BranchVideo,i),t.refresh(),i[t.param.modeID]>=t.videoTimes&&t.enterByMode(e)}}):this.enterByMode(e)},e.prototype.enterByMode=function(t){var e=this;if(!this.isLoadingScene){this.isLoadingScene=!0,l.User.setTempData(a.TempData.CURRENT_MODE,t);var o=l.User.get(a.UserData.LEVEL_LIST);h.ConfigUtils.setNextModeID();var i=1;h.ConfigUtils.getDataByID(t,function(n){i=n.amount,o[t]>i?l.User.setTempData(a.TempData.CURRENT_LEVEL,1):l.User.setTempData(a.TempData.CURRENT_LEVEL,o[t]),e.param.modeID,c.default.loadScene(r.SceneConst.GAME)})}},e.state=i,__decorate([m(cc.Sprite)],e.prototype,"icon",void 0),__decorate([m(cc.Label)],e.prototype,"modeName",void 0),__decorate([m(cc.Node)],e.prototype,"video",void 0),__decorate([m(cc.Node)],e.prototype,"text",void 0),__decorate([g],e)}(cc.Component);o.default=v,cc._RF.pop()},{"./ConfigUtils":"ConfigUtils","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./PlatformManager":"PlatformManager","./SceneConst":"SceneConst","./SceneManager":"SceneManager","./ShuShuConst":"ShuShuConst","./UserConst":"UserConst","./UserManager":"UserManager"}],PlaySpineInEditor:[function(t,e){"use strict";cc._RF.push(e,"fc706znYphJpoi4ER6NxJR/","PlaySpineInEditor"),cc._RF.pop()},{}],Play:[function(t,e,o){"use strict";cc._RF.push(e,"7900dKVJGRLnJ2SxcwEP1sO","Play");var i=t("./BaseUI"),n=t("./RecycleScroll"),r=t("./PlatformConst"),a=t("./SceneConst"),s=t("./UserConst"),c=t("./PlatformManager"),l=t("./SceneManager"),h=t("./UserManager"),d=t("./ConfigUtils"),u=t("./XMADUtils"),p=t("./VIVOADUtils"),f=t("./ConfigManager"),g=t("./ConfigConst"),m=t("./PopupManager"),v=t("./ShuShuConst"),y=t("./PlayItem"),_=cc._decorator,C=_.ccclass,b=_.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scroll=null,e._data=null,e.itemsData=[],e.childrenLength=6,e.currentUnlockLevel=1,e.currentAlreadyPlay=[],e.currentAlreadyUnlock=[],e.playList=[],e.isLoadingScene=!1,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noBtn",this.noBtn,this),this.initView()},e.prototype.noBtn=function(){m.default.hide()},e.prototype.onItemRender=function(t,e){var o=e.getComponent(y.default),i=(y.default.state.Normal,{index:t,modeID:this.playList[t].theme,modeName:this.playList[t].themeName});o.setData(i)},e.prototype.onItemClicked=function(){},e.prototype.mode1Btn=function(){var t=this;cc.game.emit("gamelog","modebtn_1"),this.dict.mode1BtnIcon.active?c.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("gamelog_Thinking",v.ShuShuConst.reward_btn,{id:"012",lv:1,mode:1}),h.User.set("mode1Btn",1),t.enterByMode(1))}):this.enterByMode(1)},e.prototype.mode2Btn=function(){var t=this;cc.game.emit("gamelog","modebtn_2"),this.dict.mode2BtnIcon.active?c.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("gamelog_Thinking",v.ShuShuConst.reward_btn,{id:"013",lv:1,mode:2}),h.User.set("mode2Btn",1),t.enterByMode(2))}):this.enterByMode(2)},e.prototype.mode3Btn=function(){var t=this;this.dict.mode3BtnIcon.active?c.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("gamelog_Thinking",v.ShuShuConst.reward_btn,{id:"014",lv:1,mode:3}),h.User.set("mode3Btn",1),t.enterByMode(3))}):this.enterByMode(3)},e.prototype.enterByMode=function(t){if(!this.isLoadingScene){this.isLoadingScene=!0,h.User.setTempData(s.TempData.CURRENT_MODE,t);var e=h.User.get(s.UserData.LEVEL_LIST);d.ConfigUtils.setNextModeID();var o=1;d.ConfigUtils.getDataByID(t,function(i){o=i.amount,e[t]>o?h.User.setTempData(s.TempData.CURRENT_LEVEL,1):h.User.setTempData(s.TempData.CURRENT_LEVEL,e[t]),l.default.loadScene(a.SceneConst.GAME)})}},e.prototype.onEnable=function(){c.Platform.is(r.EPlatform.XIAOMI_ANDROID)?u.XMAD.showBannerFeed():c.Platform.is(r.EPlatform.VIVO)&&p.VIVOAD.showCustomAd_1()},e.prototype.onDisable=function(){c.Platform.is(r.EPlatform.XIAOMI_ANDROID)&&c.Platform.removeBannerFeed(),c.Platform.hideCustomAd(),c.Platform.hideCustomAd_1(),c.Platform.hideCustomAd_2()},e.prototype.initView=function(){var t=this;f.Config.get(g.ConfigConst.THEME).then(function(e){e.sort(function(t,e){return t.sort-e.sort}),e.forEach(function(e,o){0!=o&&t.playList.push(e)}),console.log("playList",t.playList),t.scroll.onItemRender=t.onItemRender.bind(t),t.scroll.onItemClicked=t.onItemClicked.bind(t),t.scroll.numItems=t.playList.length})},__decorate([b(n.default)],e.prototype,"scroll",void 0),__decorate([C],e)}(i.default);o.default=S,cc._RF.pop()},{"./BaseUI":"BaseUI","./ConfigConst":"ConfigConst","./ConfigManager":"ConfigManager","./ConfigUtils":"ConfigUtils","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PlayItem":"PlayItem","./PopupManager":"PopupManager","./RecycleScroll":"RecycleScroll","./SceneConst":"SceneConst","./SceneManager":"SceneManager","./ShuShuConst":"ShuShuConst","./UserConst":"UserConst","./UserManager":"UserManager","./VIVOADUtils":"VIVOADUtils","./XMADUtils":"XMADUtils"}],PoolMgr:[function(t,e,o){"use strict";cc._RF.push(e,"00d36KZrbVKH5QNXHUhn8k/","PoolMgr");var i=function(){function t(){this.poolMap={}}return t.prototype.get=function(t,e){var o=null,i=this.poolMap[e];return(o=i&&i.size()?i.get():cc.instantiate(t)).active=!0,o},t.prototype.put=function(t,e){t.active=!1;var o=this.poolMap[e];if(o)o.put(t);else{var i=new cc.NodePool;this.poolMap[e]=i,i.put(t)}},t.prototype.clear=function(t){this.poolMap[t].clear(),delete this.poolMap[t]},t}();o.default=i,cc._RF.pop()},{}],PoolUtils:[function(t,e,o){"use strict";cc._RF.push(e,"55b2bLzvNFHE4O0FFLKGhse","PoolUtils");var i=function(){function t(){}return t.createPool=function(t){var e=new cc.NodePool;this.dictPool[t.name]=e},t.get=function(t){var e=this.dictPool[""+t.name];return(null==e?void 0:e.size())?e.get():e?cc.instantiate(t):(this.createPool(t),cc.instantiate(t))},t.put=function(t){var e=this.dictPool[t.name];if(e)return e.put(t);this.createPool(t),this.dictPool[t.name].put(t)},t.clear=function(t){this.dictPool[t]&&(this.dictPool[t].clear(),delete this.dictPool[t])},t.dictPool={},t}();o.default=i,cc._RF.pop()},{}],PopupConst:[function(t,e,o){"use strict";var i;cc._RF.push(e,"5052c/73AtMCbwi19jFqabO","PopupConst"),o.PopupConst=void 0,(i=o.PopupConst||(o.PopupConst={})).SET="Set",i.INFINITE_POWER="InfinitePower",i.POWER_SHORTAGE="PowerShortage",i.SHOP="Shop",i.SHOP_NEW="ShopNew",i.Subscribe="Subscribe",i.ScrewBoxAnim="ScrewBoxAnim",i.SKIP="Skip",i.TIP="Tip",i.WIN="Win",i.WinOld="WinOld",i.CHEATS="Cheats",i.AGE_TIP="AgeTip",i.CRY_HELP="CryHelp",i.PRIVACY_POLICY="PrivacyPolicy",i.UNLOCK_UGC="UnlockUgc",i.MODE_UNLOCK="ModeUnlock",i.UnlockNewMode="UnlockNewMode",i.COMMENT="Comment",i.STOP="Stop",i.BEE="beeDogDataModifyPanel",i.UNLOCK_ALL_MODE="UnlockAllMode",i.TimeEnd="TimeEnd",i.Bore="Bore",i.Pause="Pause",i.Rank="Rank",i.Play="Play",i.Skin="Skin",i.SkinGetWay="SkinGetWay",i.GetSkin="GetSkin",i.SignIn="SignIn",i.SignInOld="SignInOld",i.LimitWelfare="LimitWelfare",i.ScrewTip="ScrewTip",i.MainVideoTip="MainVideoTip",i.ShareTip="ShareTip",i.UniversalCard="UniversalCard",i.Prop="Prop",i.Win2="Win2",i.VIP="VIP",i.Get="Get",i.GetCard="GetCard",i.SpecialGift="SpecialGift",i.NewHand="NewHand",i.Supervalue="Supervalue",i.NoAD="NoAD",i.Get3="Get3",i.GetNewHand="GetNewHand",i.GetValuePack="GetValuePack",i.NewVersion="NewVersion",i.ShipRace="ShipRace",i.ShipRace2="ShipRace2",i.LuckTurntable="LuckTurntable",i.Plan="Plan",i.Challenge="Challenge",i.Pig="Pig",i.Rule="Rule",i.Collect="Collect",i.DailyChallenge="DailyChallenge",i.Permanent="Permanent",i.CardShop="CardShop",i.GiveUp="GiveUp",i.LuckyPack="LuckyPack",i.BuildSuc="BuildSuc",i.ResultBuild="ResultBuild",i.SpecialPack="SpecialPack",i.WinStreak="WinStreak",i.NoADGift="NoADGift",i.Festival="Festival",i.Map="Map",i.Role="Role",cc._RF.pop()},{}],PopupManager:[function(t,e,o){"use strict";cc._RF.push(e,"b413aV+vr1HZYlHpCol5CA2","PopupManager");var i=t("./EventConst"),n=t("./EventManager"),r=t("./AssetManager"),a=new(function(){function t(){this.popupRoot=null,this.paths=[],this.nodes=[]}return t.prototype.init=function(){this.popupRoot=cc.find("Canvas").getChildByName("popupRoot")},t.prototype.show=function(t,e){return void 0===e&&(e=!0),__awaiter(this,void 0,void 0,function(){var o,a,s,c,l,h;return __generator(this,function(d){switch(d.label){case 0:return this.popupRoot||this.init(),this.paths.some(function(e){return e==t})?[2]:(this.paths.push(t),[4,r.default.getRes("gameBundle","prefab/popup/"+t,cc.Prefab)]);case 1:return o=d.sent(),a=cc.instantiate(o),this.popupRoot.addChild(a),this.nodes.push(a),n.Event.emit(i.default.StopTimer),game.dragonMoving=!1,e?(s=a.getChildByName("content"),c=a.getChildByName("mask"),l=s.scale,h=c.opacity,c.opacity=0,cc.tween(c).to(.3,{opacity:h}).start(),s.scale=0,cc.tween(s).to(.4,{scale:l},{easing:"backOut"}).start(),[2]):[2]}})})},t.prototype.hide=function(t){if(void 0===t&&(t=!0),this.nodes.length){var e=this.nodes.pop();if(this.paths.pop(),console.log("this.nodes",this.nodes.length),this.nodes.length||(n.Event.emit(i.default.restoreTime),game.dragonMoving=!0),!t)return e.destroy();var o=e.getChildByName("content"),r=e.getChildByName("mask");r.stopAllActions(),cc.tween(r).to(.3,{opacity:0}).start(),o.stopAllActions(),cc.tween(o).to(.3,{scale:0},{easing:"backIn"}).call(function(){e.destroy()}).start()}},t.prototype.hideAll=function(){this.nodes.length&&(this.nodes.forEach(function(t){t.destroy()}),this.nodes=[],this.paths=[],console.log("this.nodes1111",this.nodes.length),this.nodes.length||(n.Event.emit(i.default.restoreTime),game.dragonMoving=!0))},t}());o.default=a,cc._RF.pop()},{"./AssetManager":"AssetManager","./EventConst":"EventConst","./EventManager":"EventManager"}],Power:[function(t,e,o){"use strict";cc._RF.push(e,"a8643xXrDRAwoIz+TMrtkRv","Power");var i=t("./EventConst"),n=t("./PopupConst"),r=t("./UserConst"),a=t("./BmsManager"),s=t("./EffectManager"),c=t("./EventManager"),l=t("./PopupManager"),h=t("./UserManager"),d=t("./SceneConst"),u=t("./SceneManager"),p=cc._decorator,f=p.ccclass,g=p.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelTime=null,e.labelPower=null,e.icon=null,e.addImg=null,e.infinite=null,e.unitRecoverTime=60,e.maxPower=5,e.surplusTime=0,e.power=0,e.hasTimer=!1,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.powerEffect=function(){s.Effect.showEffect(5,this.icon)},e.prototype.onEnable=function(){this.initEvent(),this.initView()},e.prototype.onDisable=function(){this.clearEvent()},e.prototype.initEvent=function(){c.Event.on(i.default.POWER_UPDATE,this.changePower,this),c.Event.on(i.default.POWER_EFFECT,this.powerEffect,this),c.Event.on(i.default.UPDATE_INFINITE_POWER,this.updateInfinitePower,this)},e.prototype.clearEvent=function(){c.Event.off(i.default.POWER_UPDATE,this.changePower,this),c.Event.off(i.default.POWER_EFFECT,this.powerEffect,this),c.Event.off(i.default.UPDATE_INFINITE_POWER,this.updateInfinitePower,this)},e.prototype.updateInfinitePower=function(t){var e=this;console.log("\u6d4b\u8bd5status",t),t?(this.infinite.active=!0,this.labelTime.node.active=!1,this.labelPower.node.active=!1,this.scheduleOnce(function(){e.labelTime.node.active=!1},.2),this.addImg.active=!1):(this.infinite.active=!1,this.labelTime.node.active=!0,this.labelPower.node.active=!0,this.addImg.active=!0)},e.prototype.startInvalidTimer=function(){this.schedule(function(){},5)},e.prototype.initView=function(){var t=a.BMS.getKey("TiLi");if(console.log("bmsPower",t),0==t&&(this.node.active=!1),a.BMS.getKey("WuxianTiLi")){var e=h.User.get(r.UserData.INF_POWER_START_TIME),o=(new Date).getTime();if(e){if(!((o-e)/1e3>=86400)){console.log("[\u5f53\u524d\u5c5e\u4e8e\u65e0\u9650\u4f53\u529b\u72b6\u6001]"),h.User.setTempData(r.TempData.IS_INFINITE_POWER,!0),c.Event.emit(i.default.UPDATE_INFINITE_POWER,!0);var n=86400-(o-e)/1e3;return console.log("\u5269\u4f59\u65f6\u95f4\uff08\u5c0f\u65f6\uff09",n/60/60),this.scheduleOnce(function(){h.User.set(r.UserData.INF_POWER_START_TIME,0),h.User.set(r.UserData.INF_POWER_VIDEO_TIMES,0),h.User.setTempData(r.TempData.IS_INFINITE_POWER,!1),c.Event.emit(i.default.UPDATE_INFINITE_POWER,!1)},n),void(this.labelTime.node.active=!1)}h.User.set(r.UserData.INF_POWER_START_TIME,0),h.User.setTempData(r.TempData.IS_INFINITE_POWER,!1),h.User.set(r.UserData.INF_POWER_VIDEO_TIMES,0)}}this.maxPower=a.BMS.getKey("TiLi"),this.surplusTime=this.unitRecoverTime;var s=cc.sys.localStorage.getItem("walkFast_power");console.log("\u672c\u5730\u5b58\u50a8res",s),this.power=null==s||null==s||""==s?this.maxPower:h.User.get(r.UserData.POWER),h.User.set(r.UserData.POWER,this.power);var l,d=this.getTime();if(l=null==h.User.get(r.UserData.RECOVERY_TIME)?d:h.User.get(r.UserData.RECOVERY_TIME),this.power>=this.maxPower)this.updatePowerView();else{var u=Math.floor((d-l)/1e3),p=Math.floor(u/this.unitRecoverTime),f=u%this.unitRecoverTime;console.log("\u79bb\u7ebf\u79d2\u6570",u),console.log("\u79bb\u7ebf\u52a0\u4f53\u529b",p),console.log("\u5269\u4f59\u8ba1\u65f6\u65f6\u95f4",f),this.power+p>=this.maxPower?this.power=this.maxPower:this.power=this.power+p,h.User.set(r.UserData.POWER,this.power),this.updatePowerView(),this.power<this.maxPower&&(this.surplusTime=this.unitRecoverTime-f,h.User.set(r.UserData.RECOVERY_TIME,d-1e3*f),this.updateTimeView(),this.startTimer())}},e.prototype.getTime=function(){return(new Date).getTime()},e.prototype.changePower=function(){this.power=h.User.get(r.UserData.POWER),this.updatePowerView(),this.power>=this.maxPower&&this.hasTimer&&(this.hasTimer=!1,this.unscheduleAllCallbacks()),this.power<this.maxPower&&!this.hasTimer&&(this.surplusTime=this.unitRecoverTime,h.User.set(r.UserData.RECOVERY_TIME,this.getTime()),this.updateTimeView(),this.startTimer())},e.prototype.startTimer=function(){var t=this;this.hasTimer||(this.hasTimer=!0,this.schedule(function(){t.surplusTime-=1,t.updateTimeView(),0==t.surplusTime&&(t.power+=1,h.User.set(r.UserData.POWER,t.power),t.updatePowerView(),t.power>=t.maxPower?(t.hasTimer=!1,t.unscheduleAllCallbacks()):(t.surplusTime=t.unitRecoverTime+1,h.User.set(r.UserData.RECOVERY_TIME,t.getTime())))},1))},e.prototype.updateTimeView=function(){this.labelTime.string=""+this.secondFormat(this.surplusTime)},e.prototype.updatePowerView=function(){this.labelPower.string=""+this.power,this.labelTime.node.active=this.power<this.maxPower},e.prototype.clickSelf=function(){cc.game.emit("playClickAudio"),u.default.getCurrentScene()==d.SceneConst.MAIN?cc.game.emit("gamelog","btn006"):u.default.getCurrentScene()==d.SceneConst.GAME&&cc.game.emit("gamelog","btn021"),h.User.getTempData(r.TempData.IS_INFINITE_POWER)||(cc.game.emit("gamelog","page010"),l.default.show(n.PopupConst.POWER_SHORTAGE))},e.prototype.secondFormat=function(t,e,o){void 0===e&&(e=2),void 0===o&&(o=!1);var i,n,r,a=t/3600,s=(t%=3600)/60,c=t%=60;i=(a=Math.floor(a))>=10?a+"":"0"+a,n=(s=Math.floor(s))>=10?s+"":"0"+s,r=(c=Math.floor(c))>=10?c+"":"0"+c,o&&(c=100*c/60,r=(c=Math.floor(c))>=10?c+"":"0"+c);var l=i+":"+n+":"+r;switch(e){case 2:l=n+":"+r}return l},__decorate([g(cc.Label)],e.prototype,"labelTime",void 0),__decorate([g(cc.Label)],e.prototype,"labelPower",void 0),__decorate([g(cc.Node)],e.prototype,"icon",void 0),__decorate([g(cc.Node)],e.prototype,"addImg",void 0),__decorate([g(cc.Node)],e.prototype,"infinite",void 0),__decorate([f],e)}(cc.Component);o.default=m,cc._RF.pop()},{"./BmsManager":"BmsManager","./EffectManager":"EffectManager","./EventConst":"EventConst","./EventManager":"EventManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./SceneConst":"SceneConst","./SceneManager":"SceneManager","./UserConst":"UserConst","./UserManager":"UserManager"}],PreLoad:[function(t,e,o){"use strict";cc._RF.push(e,"13690YXE+hDDpUANOREyD3b","PreLoad");var i=cc._decorator,n=i.ccclass,r=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.carSpriteFrame=[],e}return __extends(e,t),e.prototype.start=function(){},__decorate([r([cc.SpriteFrame])],e.prototype,"carSpriteFrame",void 0),__decorate([n],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],PrivacyPolicy:[function(t,e,o){"use strict";cc._RF.push(e,"54796Q0mcBMPJgLsk+nONv0","PrivacyPolicy");var i=t("./PlatformManager"),n=cc._decorator,r=n.ccclass,a=n.property,s=window.qq,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeUserPanel=null,e.nodePrivacyPanel=null,e.nodeUserButton=null,e.nodeUserAnd=null,e.func=null,e}return __extends(e,t),e.prototype.onLoad=function(){for(var t=i.Platform.getConfig().company,e=i.Platform.getConfig().email,o=i.Platform.getConfig().address,n=0;n<this.nodeUserPanel.children[0].children[0].childrenCount;n++)a=(a=(a=(a=(a=(a=(a=(r=this.nodeUserPanel.children[0].children[0].children[n]).getComponent(cc.Label).string.replace(/\u6d77\u5357\u4e50\u679c\u4e92\u5a31/g,t)).replace(/\u4e50\u679c\u4e92\u5a31/g,t)).replace(/\u4e50\u679c\u6e38\u620f/g,t)).replace(/\u4e50\u679c/g,t)).replace(/\u4e50\u679c/g,t)).replace(/leguo-kf@foxmail.com/g,e)).replace(/\u5e7f\u5dde\u5e02\u5929\u6cb3\u533a\u73e0\u6c5f\u65b0\u57ce\u73e0\u6c5f\u4e1c\u8def30\u53f7\u5e7f\u5dde\u94f6\u884c\u5927\u53a6601A/g,o),r.getComponent(cc.Label).string=a;for(n=0;n<this.nodePrivacyPanel.children[0].children[0].childrenCount;n++){var r,a;(r=this.nodePrivacyPanel.children[0].children[0].children[n]).getComponent(cc.Label)&&(a=(a=(a=r.getComponent(cc.Label).string.replace(/\u5e7f\u5dde\u5c0f\u8d1d/g,t)).replace(/xiaobei-kf@foxmail.com/g,e)).replace(/\u5e7f\u5dde\u5e02\u5929\u6cb3\u533a\u73e0\u6c5f\u4e1c\u8def 30\u53f7601\u623f/g,o),r.getComponent(cc.Label).string=a)}void 0!==window.qq&&(this.nodeUserButton.active=!0,this.nodeUserAnd.active=!0)},e.prototype.open=function(t){this.func=t,this.func||this.openPrivacyPanelHandle()},e.prototype.acceptHandle=function(){this.func&&this.func(),this.func=null,cc.sys.localStorage.setItem("superBrain_privacypolicy",1),this.node.destroy()},e.prototype.refuseHandle=function(){window.qq?s?s.exitMiniProgram():cc.game.end():void 0!==window.qg?window.qg.exitApplication({}):cc.game.end()},e.prototype.openUserPanelHandle=function(){this.nodeUserPanel.active=!0,this.nodeUserPanel.getComponent(cc.ScrollView).scrollToTop(0)},e.prototype.openPrivacyPanelHandle=function(){this.nodePrivacyPanel.active=!0,this.nodePrivacyPanel.getComponent(cc.ScrollView).scrollToTop(0)},e.prototype.closeHandle=function(){this.func?(this.nodePrivacyPanel.active=!1,this.nodeUserPanel.active=!1):this.node.destroy()},__decorate([a(cc.Node)],e.prototype,"nodeUserPanel",void 0),__decorate([a(cc.Node)],e.prototype,"nodePrivacyPanel",void 0),__decorate([a(cc.Node)],e.prototype,"nodeUserButton",void 0),__decorate([a(cc.Node)],e.prototype,"nodeUserAnd",void 0),__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./PlatformManager":"PlatformManager"}],PropBtn:[function(t,e,o){"use strict";cc._RF.push(e,"84fd6irq5xOarKVZ0Nk1Gas","PropBtn");var i=t("./UserConst"),n=t("./UIBase"),r=t("./BmsManager"),a=t("./PlatformManager"),s=t("./UserManager"),c=t("./LocalStorageConst"),l=t("./LocalStorageManager"),h=t("./MemoryStorageConst"),d=t("./MemoryStorageManager"),u=t("./PopupConst"),p=t("./PopupManager"),f=t("./ToastManager"),g=t("./ShuShuConst"),m=cc._decorator,v=m.ccclass,y=m.property,_={sortAmount:2,slowDown:1,clear:7,fullScreenAttack:8},C={unlockPos:4,sortAmount:3,slowDown:2,clear:10,fullScreenAttack:11},b={unlockPos:12,sortAmount:14,slowDown:13,clear:15,fullScreenAttack:16},S={slowDown:"func_slowDown",sortAmount:"func_sort",clear:"func_remove",fullScreenAttack:"func_item5CB",unlockPos:"fun_unlockNewPos"},w={slowDown:"func_checkSlowDown",clear:"func_checkRemove"},A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propName="clear",e.propTime=0,e.needLimitNoHandle=!1,e.propIndex=null,e.oldTextStr="",e.time=0,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this);var e=l.default.get(""+this.propName)||0;l.default.set(""+this.propName,e),this.localStorageUIData[""+this.propName]=this.updateProp.bind(this),cc.game.on("sucProp",this.sucProp_popup,this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),cc.game.off("sucProp",this.sucProp_popup,this)},e.prototype.updateProp=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(){return this.dict.bg.opacity=255,this.dict.propRoot.active=!!t,this.dict.propAmount.getComponent(cc.Label).string=""+t,e=r.BMS.getKey("itemVideo"),this.dict.add.active=!t&&!!e,this.dict.video.active=!this.dict.add.active&&!this.dict.propRoot.active,[2]})})},e.prototype.clickSelf=function(){var t=this;if(!game.canUseProps)return console.log("\u5f53\u524d\u65e0\u6cd5\u4f7f\u7528\u9053\u5177");if(this.time)return console.log("\u6b63\u5728\u5012\u8ba1\u65f6");if(!window.levelContent||!window.levelContent._components[0].isFail){if(w[this.propName]&&!window.levelContent._components[0][w[this.propName]]())return f.default.show("\u5f53\u524d\u9053\u5177\u6682\u65f6\u65e0\u6cd5\u4f7f\u7528");if(this.dict.propRoot.active){var e=l.default.get(""+this.propName)||0;return e-=1,l.default.set(""+this.propName,e),void this.sucProp()}this.propIndex=_[this.propName],d.default.set(h.default.propIndex,this.propIndex),console.log("this.propIndex",this.propIndex),this.dict.video.active?a.Platform.showRewardAds(function(e){0==e&&(t.report(C[t.propName]),t.sucProp())}):p.default.show(u.PopupConst.Prop)}},e.prototype.sucProp=function(){this.needLimitNoHandle&&(game.canUseProps=!1,cc.game.emit("needLimitNoHandle",!0)),window.levelContent._components[0][S[this.propName]](),this.propTime&&(this.time=this.propTime,"slowDown"==this.propName?this.time=window.levelContent._components[0]._slowTime:"fullScreenAttack"==this.propName&&(this.time=window.levelContent._components[0]._item5Time),this.dict.video.active=!1,this.dict.add.active=!1,this.dict.propRoot.active=!1,this.dict.bg.opacity=150,this.oldTextStr=this.dict.text.getComponent(cc.Label).string,this.dict.text.getComponent(cc.Label).string=this.time+"s",this.unschedule(this.timer),this.schedule(this.timer,1))},e.prototype.sucProp_popup=function(t){t==_[this.propName]&&(this.report(b[this.propName]),this.sucProp())},e.prototype.timer=function(){if(this.time-=1,this.time<=0){this.time=0,this.unschedule(this.timer),this.dict.text.getComponent(cc.Label).string=this.oldTextStr;var t=l.default.get(""+this.propName)||0;this.updateProp(t)}else this.dict.text.getComponent(cc.Label).string=this.time+"s"},e.prototype.report=function(t){cc.game.emit("gamelog_Thinking",g.ShuShuConst.reward_btn,{lv:s.User.getTempData(i.TempData.CURRENT_LEVEL_ID),mode:s.User.getTempData(i.TempData.CURRENT_MODE),queue:s.User.getTempData(i.TempData.CURRENT_LEVEL),id:t,sort:l.default.get(c.default.ConfigSuffix)})},__decorate([y],e.prototype,"propName",void 0),__decorate([y],e.prototype,"propTime",void 0),__decorate([y],e.prototype,"needLimitNoHandle",void 0),__decorate([v],e)}(n.default);o.default=A,cc._RF.pop()},{"./BmsManager":"BmsManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./MemoryStorageConst":"MemoryStorageConst","./MemoryStorageManager":"MemoryStorageManager","./PlatformManager":"PlatformManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./ShuShuConst":"ShuShuConst","./ToastManager":"ToastManager","./UIBase":"UIBase","./UserConst":"UserConst","./UserManager":"UserManager"}],Prop:[function(t,e,o){"use strict";cc._RF.push(e,"67b889Ji+BDf7Hx0rISp4HQ","Prop");var i=t("./PopupConst"),n=t("./UserConst"),r=t("./UIBase"),a=t("./LocalStorageConst"),s=t("./LocalStorageManager"),c=t("./MemoryStorageConst"),l=t("./MemoryStorageManager"),h=t("./LanguageManager"),d=t("./PlatformManager"),u=t("./PopupManager"),p=t("./UserManager"),f=t("./ShuShuConst"),g=t("./LimitRepeat"),m=t("./AssetManager"),v=cc._decorator,y=v.ccclass,_=(v.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propIndex=0,e.titleData=["\u5237\u65b0","\u51cf\u901f","\u6392\u5e8f","\u7ee7\u7eed\u6311\u6218\uff1f","","\u51b0\u5c01","\u5c04\u7a0b\u589e\u52a0","\u6307\u5b9a\u6d88\u9664","\u5168\u5c4f\u653b\u51fb"],e.textData=["\u4f7f\u7528","\u4f7f\u7528","\u4f7f\u7528","\u786e\u5b9a",""],e.text=["\u5c06\u573a\u5730\u4e2d\u7684\u6c7d\u8f66\u989c\u8272\u5237\u65b0\u53d8\u5316","\u5de8\u9f99\u7684\u79fb\u52a8\u901f\u5ea6\u51cf\u6162\uff0c\u6301\u7eed\u4e00\u5b9a\u65f6\u95f4","\u5c06\u5de8\u9f99\u7684\u8eab\u4f53\u6309\u7167\u989c\u8272\u8fdb\u884c\u6392\u5e8f","\u590d\u6d3b\u5e76\u89e3\u9501\u4e00\u4e2a\u65b0\u70ae\u53f0","","\u5c06\u5de8\u9f99\u51bb\u4f4f\u82e5\u5e72\u79d2","\u70ae\u53f0\u7684\u5c04\u7a0b\u589e\u52a0\u6301\u7eed\u82e5\u5e72\u79d2","\u9009\u62e9\u4efb\u610f\u7bb1\u5b50\u5bf9\u5de8\u9f99\u8fdb\u884c\u653b\u51fb","\u70ae\u53f0\u8fdb\u884c\u5168\u5c4f\u653b\u51fb\uff0c\u6301\u7eed\u4e00\u5b9a\u65f6\u95f4"],e}return __extends(e,t),e.prototype.onLoad=function(){if(t.prototype.onLoad.call(this),this.node.setContentSize(cc.winSize),this.memoryStorageUIData[c.default.propIndex]=this.updatePropIndex.bind(this),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("cardBtn",this.cardBtn,this),this.addBtnOn("videoBtn",this.videoBtn,this),!s.default.get(a.default.IsNoFirstFail)){s.default.set(a.default.IsNoFirstFail,1);var e=window.levelContent._components[0].allPersonAmount,o=window.levelContent._components[0].allPersonAmount2;cc.game.emit("gamelog_Thinking",f.ShuShuConst.First_Progress,{lv:p.User.getTempData(n.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(n.TempData.CURRENT_MODE),queue:p.User.getTempData(n.TempData.CURRENT_LEVEL),type:2,progress:(o-e)/o,sort:s.default.get(a.default.ConfigSuffix)})}},e.prototype.onDisable=function(){cc.game.emit("isShowRevive")},e.prototype.updateCardAmount=function(t){this.dict.cardAmount.getComponent(cc.Label).string=""+t},e.prototype.noBtn=function(){console.log("\u6d4b\u8bd5"),u.default.hideAll(),3==this.propIndex&&(l.default.set(c.default.IsFail,1),u.default.show(i.PopupConst.WIN))},e.prototype.cardBtn=function(){var t,e=s.default.get(a.default.cardAmount)||0,o=l.default.get(c.default.propIndex);if(t=e<=0?0:1,cc.game.emit("gamelog_Thinking",f.ShuShuConst.Booster_use,{lv:p.User.getTempData(n.TempData.CURRENT_LEVEL_ID),queue:p.User.getTempData(n.TempData.CURRENT_LEVEL),mode:p.User.getTempData(n.TempData.CURRENT_MODE),id:{0:2,1:1,2:4,3:5,4:3}[o],or:t}),e<=0)return u.default.show(i.PopupConst.UniversalCard);e-=1,s.default.set(a.default.cardAmount,e),this.suc()},e.prototype.videoBtn=function(){var t=this;if(this.dict.videoIcon.active)d.Platform.showRewardAds(function(e){if(0==e){var o=p.User.get(n.UserData.todayShareOrVideoTimes)||0;if(p.User.set(n.UserData.todayShareOrVideoTimes,o+1),t.suc(),!s.default.get(a.default.IsNoFirstProp)){s.default.set(a.default.IsNoFirstProp,1);var i=window.levelContent._components[0].allPersonAmount,r=window.levelContent._components[0].allPersonAmount2;cc.game.emit("gamelog_Thinking",f.ShuShuConst.First_Progress,{lv:p.User.getTempData(n.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(n.TempData.CURRENT_MODE),queue:p.User.getTempData(n.TempData.CURRENT_LEVEL),type:3,progress:(r-i)/r,sort:s.default.get(a.default.ConfigSuffix)})}}});else{s.default.set(a.default.IsNoFirstRevive,1),this.suc();var e=window.levelContent._components[0].allPersonAmount,o=window.levelContent._components[0].allPersonAmount2;cc.game.emit("gamelog_Thinking",f.ShuShuConst.First_Progress,{lv:p.User.getTempData(n.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(n.TempData.CURRENT_MODE),queue:p.User.getTempData(n.TempData.CURRENT_LEVEL),type:1,progress:(o-e)/o,sort:s.default.get(a.default.ConfigSuffix)})}},e.prototype.suc=function(){cc.game.emit("sucProp",this.propIndex),u.default.hide()},e.prototype.updatePropIndex=function(t){var e=this;if(this.propIndex=t,this.dict.title.getComponent(cc.Label).string=""+this.titleData[t],this.dict.btnText.getComponent(cc.Label).string=""+(this.textData[t]||"\u4f7f\u7528"),this.dict.text.getComponent(cc.Label).string=h.default.formatStr(this.text[t]),3==this.propIndex){this.dict.iconRoot.getChildByName("0").active=!1,this.dict.iconRoot.getChildByName(""+t).active=!0;var o=l.default.get(c.default.hasLockParking);console.log("hasLockParking",o),o||(this.dict.text.getComponent(cc.Label).string=h.default.formatStr("\u590d\u6d3b\u5e76\u5c06\u5de8\u9f99\u51fb\u9000"),this.dict.iconRoot.children[t].getChildByName("newPos").active=!1,this.dict.iconRoot.children[t].getChildByName("sort").active=!1,this.dict.iconRoot.children[t].getChildByName("add").active=!1,this.dict.aixin.position=cc.v3(0,0),this.dict.aixin.scale=1.3);var i=l.default.get(c.default.LevelReliveCount)||0;i+=1,l.default.set(c.default.LevelReliveCount,i);var r=window.levelContent._components[0].allPersonAmount,u=window.levelContent._components[0].allPersonAmount2;if(u?cc.game.emit("gamelog_Thinking",f.ShuShuConst.Level_Progress,{lv:p.User.getTempData(n.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(n.TempData.CURRENT_MODE),queue:p.User.getTempData(n.TempData.CURRENT_LEVEL),time:i,progress:(u-r)/u,sort:s.default.get(a.default.ConfigSuffix)}):cc.game.emit("gamelog_Thinking",f.ShuShuConst.Level_Progress,{lv:p.User.getTempData(n.TempData.CURRENT_LEVEL_ID),mode:p.User.getTempData(n.TempData.CURRENT_MODE),queue:p.User.getTempData(n.TempData.CURRENT_LEVEL),time:i,progress:game.remainingAmount/game.totalAmount,sort:s.default.get(a.default.ConfigSuffix)}),d.Platform.getConfig().flag.includes("gg")){var g=s.default.get(a.default.IsNoFirstRevive)||0;this.dict.videoIcon.active=g}}else m.default.getRes("gameBundle","texture/prop/prop"+t,cc.Texture2D).then(function(t){e.dict.iconRoot.getChildByName("0").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),e.dict.iconRoot.getChildByName("0").active=!0});cc.game.emit("gamelog_Thinking",f.ShuShuConst.Booster_page,{lv:p.User.getTempData(n.TempData.CURRENT_LEVEL_ID),queue:p.User.getTempData(n.TempData.CURRENT_LEVEL),mode:p.User.getTempData(n.TempData.CURRENT_MODE),id:{0:2,1:1,2:4,3:5,4:3,5:6,6:7}[t]})},__decorate([g.LimitRepeat(2)],e.prototype,"videoBtn",null),__decorate([y],e)}(r.default));o.default=_,cc._RF.pop()},{"./AssetManager":"AssetManager","./LanguageManager":"LanguageManager","./LimitRepeat":"LimitRepeat","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./MemoryStorageConst":"MemoryStorageConst","./MemoryStorageManager":"MemoryStorageManager","./PlatformManager":"PlatformManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./ShuShuConst":"ShuShuConst","./UIBase":"UIBase","./UserConst":"UserConst","./UserManager":"UserManager"}],QQ:[function(t,e,o){"use strict";cc._RF.push(e,"33324Scx6xKx5B9iAiB6y2q","QQ"),o.QQ=void 0;var i=t("./BasePlatform"),n=t("./AudioManager"),r=t("./BmsManager"),a=function(t){function e(){var e=t.call(this)||this;return e.sdk=window.qq,e._rewardAds=null,e._rewardAdsCb=null,e._rewardHasShow=!1,e._rewardHasLoad=!1,e._banner=null,e._insert=null,e._block=null,e._appBox=null,e._toastTimer=null,e._isMute=!1,e.bgm=null,console.log("qq"),e.sdk.showShareMenu({withShareTicket:!0}),e.sdk.onShareAppMessage(function(){return e.getShareData()}),e}return __extends(e,t),e.prototype.getInstance=function(){return this.sdk},e.prototype.showRewardAds=function(t){var e=this;return this.sdk.createRewardedVideoAd?this._config.rewardID?(this.bgm=n.Audio.currentBgm,n.Audio.stopMusic(),this._rewardAdsCb=t,this._rewardHasShow=!1,this._rewardAds||(this._rewardAds=this.sdk.createRewardedVideoAd({adUnitId:this._config.rewardID}),this._rewardAds.onLoad(function(){e._rewardHasLoad=!0,e._rewardHasShow||(e._rewardHasShow=!0,e._rewardAds.show())}),this._rewardAds.onClose(function(t){e._rewardHasLoad=!1,e._rewardAdsCb(t.isEnded?0:1),clearTimeout(e._toastTimer),n.Audio.playMusic(e.bgm)}),this._rewardAds.onError(function(t){e._rewardHasLoad=!1,console.log("[platform] [QQPlatform] showRewardAds",t),e._rewardAdsCb(-1),clearTimeout(e._toastTimer),n.Audio.playMusic(e.bgm)})),void(this._rewardHasLoad&&!this._rewardHasShow?(this._rewardHasShow=!0,this._rewardAds.show()):this._rewardAds.load())):t(-3):t(-2)},e.prototype.preloadBanner=function(t){var e=this;void 0===t&&(t={id:""}),this.sdk.createBannerAd&&this._config.bannerID&&(this._banner||(this._banner=this.sdk.createBannerAd({adUnitId:t.id||this._config.bannerID,style:{left:9999,top:9999,width:300,height:300},adIntervals:30}),this._banner.onLoad(function(){console.log("[platform] [QQPlatform] showBanner","onLoad 1")}),this._banner.onError(function(t){console.log("[platform] [QQPlatform] preloadBanner",t)}),this._banner.onResize(function(t){console.log("[platform] [QQPlatform] showBanner","onResize 1");var o=e.sdk.getSystemInfoSync();e._banner.style.top=o.windowHeight-t.height,e._banner.style.left=(o.windowWidth-t.width)/2})))},e.prototype.showBanner=function(t,e){var o=this;if(void 0===t&&(t={id:""}),this.sdk.createBannerAd&&this._config.bannerID)if(this._banner){if(this._banner){var i=this._banner.show();i?i.then(function(){e&&e(0)}).catch(function(t){console.log("[platform] [QQPlatform] showBanner","show error 2",t),e&&e(1)}):e&&e(1)}}else this._banner=this.sdk.createBannerAd({adUnitId:t.id||this._config.bannerID,style:{left:9999,top:9999,width:300,height:300},adIntervals:30}),this._banner.onLoad(function(){if(o._banner){var t=o._banner.show();t?t.then(function(){e&&e(0)}).catch(function(t){console.log("[platform] [QQPlatform] showBanner","show error 2",t),e&&e(1)}):e&&e(1)}else e&&e(0)}),this._banner.onError(function(t){console.log("[platform] [QQPlatform] showBanner",t),e&&e(1)}),this._banner.onResize(function(t){var e=o.sdk.getSystemInfoSync();o._banner.style.top=e.windowHeight-t.height,o._banner.style.left=(e.windowWidth-t.width)/2})},e.prototype.hideBanner=function(){this._banner&&(this._banner.destroy(),this._banner=null)},e.prototype.showInsert=function(){var t=this;this.sdk.createInterstitialAd&&this._config.insertID&&(this._insert?this._insert.load().then(function(){t._insert.show().then(function(){}).catch(function(t){console.log("[platform] [QQPlatform] showInsert",t)})}):this._insert||(this._insert=this.sdk.createInterstitialAd({adUnitId:this._config.insertID}),this._insert.onLoad(function(){t._insert&&t._insert.show().then(function(){}).catch(function(t){console.log("[platform] [QQPlatform] showInsert",t)})}),this._insert.onClose(function(){t._insert&&(t._insert.destroy(),t._insert=null)}),this._insert.onError(function(e){console.log("[platform] [QQPlatform] showInsert",e),e&&1003==e.errCode&&t._insert&&(t._insert.destroy(),t._insert=null)})))},e.prototype.showBlockAds=function(t){var e=this;void 0===t&&(t={id:"",left:0,top:0}),this.sdk.createBlockAd&&this._config.blockID&&(this._block||(this._block=this.sdk.createBlockAd({adUnitId:t.id||this._config.blockID,style:{left:t.left,top:t.top},size:1,orientation:"landscape",adIntervals:60}),this._block.onError(function(t){console.log("[platform] [QQPlatform] showBlockAds",t)}),this._block.onLoad(function(){console.log("[platform] [QQPlatform] showBlockAds onLoad"),e._block.show()})))},e.prototype.hideBlockAds=function(){this._block&&(this._block.destroy(),this._block=null)},e.prototype.showAppBoxAds=function(){var t=this;this.sdk.createAppBox&&this._config.boxID&&(this._appBox||(this._appBox=this.sdk.createAppBox({adUnitId:this._config.boxID}),this._appBox.onClose(function(){console.log("[platform] [QQPlatform] showAppBox onClose"),t.hideAppBoxAds()}),this._appBox.load().then(function(){console.log("[platform] [QQPlatform] showAppBox onLoad"),t._appBox.show()}).catch(function(t){console.log("[platform] [QQPlatform] showAppBox onError",t)})))},e.prototype.hideAppBoxAds=function(){this._appBox&&(this._appBox.destroy(),this._appBox=null)},e.prototype.share=function(){this.sdk.shareAppMessage(this.getShareData())},e.prototype.getShareData=function(){var t=r.BMS.getShareList(),e={};if(t.length>0){var o=t[Math.floor(Math.random()*t.length)];e.title=o.title,e.imageUrl=o.image}return e},e}(i.BasePlatform);o.QQ=a,cc._RF.pop()},{"./AudioManager":"AudioManager","./BasePlatform":"BasePlatform","./BmsManager":"BmsManager"}],RankItem:[function(t,e,o){"use strict";var i;cc._RF.push(e,"4f18bmX0MhFQLtu3ggaf0z8","RankItem");var n,r=cc._decorator,a=r.ccclass,s=r.property;(n=i||(i={}))[n.Normal=0]="Normal",n[n.Finish=1]="Finish",n[n.Lock=2]="Lock";var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ranking=null,e.score=null,e.province=null,e.bgSpriteFrame=[],e.rankingBgSpriteFrame=[],e.param=null,e.state=null,e.starAmount=0,e.skinNameArr=[],e}return __extends(e,t),e.prototype.onLoad=function(){},e.prototype.setData=function(t){this.param=t,this.node.zIndex=this.param.index,this.refresh()},e.prototype.refresh=function(){var t=this.param.index+1;this.ranking.string=""+t,this.score.string=""+this.param.score,this.province.string=""+this.param.province,this.param.province.includes("UNKNOW")&&(this.province.string="\u5176\u4ed6"),"null"!=this.param.province&&null!=this.param.province||(this.province.string="\u5176\u4ed6"),this.param.index>2?(this.node.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=this.bgSpriteFrame[3],this.node.getChildByName("rankingBg").getComponent(cc.Sprite).spriteFrame=this.rankingBgSpriteFrame[3],this.ranking.node.active=!0,this.node.getChildByName("rankingBg").active=!1):(this.ranking.node.active=!1,this.node.getChildByName("rankingBg").active=!0,this.node.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=this.bgSpriteFrame[this.param.index],this.node.getChildByName("rankingBg").getComponent(cc.Sprite).spriteFrame=this.rankingBgSpriteFrame[this.param.index])},e.state=i,__decorate([s(cc.Label)],e.prototype,"ranking",void 0),__decorate([s(cc.Label)],e.prototype,"score",void 0),__decorate([s(cc.Label)],e.prototype,"province",void 0),__decorate([s([cc.SpriteFrame])],e.prototype,"bgSpriteFrame",void 0),__decorate([s([cc.SpriteFrame])],e.prototype,"rankingBgSpriteFrame",void 0),__decorate([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],Rank:[function(t,e,o){"use strict";cc._RF.push(e,"b576cSwpZlGRqSeayEL4iN4","Rank");var i=t("./BaseUI"),n=t("./RecycleScroll"),r=t("./EventConst"),a=t("./PlatformConst"),s=t("./SceneConst"),c=t("./EventManager"),l=t("./PlatformManager"),h=t("./SceneManager"),d=t("./UserManager"),u=t("./XMADUtils"),p=t("./VIVOADUtils"),f=t("./ChallengeHttp"),g=t("./ConfigManager"),m=t("./ConfigConst"),v=t("./RankItem"),y=t("./PopupManager"),_=cc._decorator,C=_.ccclass,b=_.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scroll=null,e.bgSpriteFrame=[],e.rankingBgSpriteFrame=[],e._data=null,e.itemsData=[],e.childrenLength=6,e.currentUnlockLevel=1,e.currentAlreadyPlay=[],e.currentAlreadyUnlock=[],e.rankList=[],e.myRank=1,e.myScore=1,e.isLoadingScene=!1,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noBtn",this.noBtn,this),this.initView()},e.prototype.noBtn=function(){y.default.hide()},e.prototype.onEnable=function(){c.Event.on(r.default.CLICK_BACK,this.clickBack,this),l.Platform.is(a.EPlatform.XIAOMI_ANDROID)?u.XMAD.showBannerFeed():l.Platform.is(a.EPlatform.VIVO)&&p.VIVOAD.showCustomAd_1()},e.prototype.getRank=function(){var t=this,e=new Date,o=this.showTime(e.getMonth()+1),i=this.showTime(e.getDate()),n="province_"+o+i+"_"+l.Platform.getConfig().rank;"haiwai"==l.Platform.getConfig().rank&&(n="country_"+o+i+"_"+l.Platform.getConfig().rank),l.Platform.getConfig().rank,f.challengeHttp.getRank(n,"1").then(function(e){if(console.log("\u6392\u884c\u699c\u6570\u636e",e),e.total){var o=[],i=0;for(var r in e.list)i+=1,o.push({id:i,province:r,score:e.list[r].score});console.log("list",o),t.rankList=o,t.sucGetRank()}else{var a=m.ConfigConst.Rank;"haiwai"==l.Platform.getConfig().rank&&(a=m.ConfigConst.RankHW),g.Config.get(a).then(function(e){console.log("\u5047\u6570\u636e",e);for(var o=0;o<e.length;o++){var i=e[o];f.challengeHttp.incrRank(n,i.province,i.score).then(function(){console.log("\u987a\u4fbf\u4e0a\u4f20")})}t.rankList=e,t.rankList.sort(function(t,e){return e.score-t.score}),t.sucGetRank()})}})},e.prototype.sucGetRank=function(){var t;this.scroll.onItemRender=this.onItemRender.bind(this),this.scroll.onItemClicked=this.onItemClicked.bind(this),this.scroll.numItems=this.rankList.length,this.rankList.forEach(function(t){t.score}),t=l.Platform.getConfig().rank.includes("haiwai")?"nation":"province";var e=this.rankList.findIndex(function(e){return e.province==d.User.get(t)});-1==e?(e=this.rankList.length,this.myScore=1):this.myScore=this.rankList.find(function(e){return e.province==d.User.get(t)}).score,this.myRank=e+1,this.dict.ranking.getComponent(cc.Label).string=""+this.myRank,this.dict.province.getComponent(cc.Label).string=""+d.User.get(t),this.dict.score.getComponent(cc.Label).string=""+this.myScore,this.myRank>3?(this.dict.rankingBg.getComponent(cc.Sprite).spriteFrame=this.rankingBgSpriteFrame[3],this.dict.rankingBg.active=!1,this.dict.ranking.active=!0):(this.dict.ranking.active=!1,this.dict.rankingBg.getComponent(cc.Sprite).spriteFrame=this.rankingBgSpriteFrame[this.myRank-1])},e.prototype.showTime=function(t){return t>10?t:"0"+t},e.prototype.onDisable=function(){c.Event.off(r.default.CLICK_BACK,this.clickBack,this),l.Platform.is(a.EPlatform.XIAOMI_ANDROID)&&l.Platform.removeBannerFeed(),l.Platform.hideCustomAd(),l.Platform.hideCustomAd_1(),l.Platform.hideCustomAd_2()},e.prototype.initView=function(){this.getRank()},e.prototype.onItemRender=function(t,e){var o=e.getComponent(v.default),i=(v.default.state.Normal,{index:t,province:this.rankList[t].province,score:this.rankList[t].score});o.setData(i)},e.prototype.onItemClicked=function(){},e.prototype.clickBack=function(){this.isLoadingScene||(this.isLoadingScene=!0,cc.game.emit("gamelog","btn008"),h.default.loadScene(s.SceneConst.MAIN))},__decorate([b(n.default)],e.prototype,"scroll",void 0),__decorate([b([cc.SpriteFrame])],e.prototype,"bgSpriteFrame",void 0),__decorate([b([cc.SpriteFrame])],e.prototype,"rankingBgSpriteFrame",void 0),__decorate([C],e)}(i.default);o.default=S,cc._RF.pop()},{"./BaseUI":"BaseUI","./ChallengeHttp":"ChallengeHttp","./ConfigConst":"ConfigConst","./ConfigManager":"ConfigManager","./EventConst":"EventConst","./EventManager":"EventManager","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager","./RankItem":"RankItem","./RecycleScroll":"RecycleScroll","./SceneConst":"SceneConst","./SceneManager":"SceneManager","./UserManager":"UserManager","./VIVOADUtils":"VIVOADUtils","./XMADUtils":"XMADUtils"}],RecycleScroll:[function(t,e,o){"use strict";cc._RF.push(e,"7abbb2Q77RBhaHoyyXUrZWM","RecycleScroll");var i=cc._decorator,n=i.ccclass,r=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemPrefab=null,e.spacingX=0,e.spacingY=0,e.canScroll=!0,e.borderTop=0,e.borderBot=0,e.isReverse=!1,e._numItems=0,e.onPosCallBack=function(){},e._content=null,e._items=[],e._itemsUidToIndex={},e._updateTimer=0,e._updateInterval=.016,e._lastContentPosY=0,e._lastContentPosX=0,e._col=0,e._row=0,e._spawnCount=0,e._isHorizon=!1,e._itemList={},e}return __extends(e,t),Object.defineProperty(e.prototype,"numItems",{get:function(){return this._numItems},set:function(t){this._numItems=t,this.updateAllItem()},enumerable:!1,configurable:!0}),e.prototype.onScrollingCallBack=function(){},e.prototype.onLoad=function(){var t=this.node.getComponent(cc.ScrollView);this._content=t.content,this._isHorizon=!t.vertical,this._initialize(),t.enabled=this.canScroll,this._regScrollEvent()},e.prototype.getItemList=function(){return this._itemList},e.prototype.getContent=function(){return this._content},e.prototype.scrollTo=function(t,e,o){this.node.getComponent(cc.ScrollView).scrollTo(t,e,o)},e.prototype.scrollToIndex=function(t,e,o){if(this.numItems){this.isReverse&&(t=this.numItems-t);var i=this.node.getComponent(cc.ScrollView),n=cc.v2();if(this._isHorizon){var r=t/(this.numItems-1);n=cc.v2(r,0)}else r=(Math.ceil(t/this._col)-1)/(this._row-1),n=cc.v2(0,1-r);console.log("pos================",this._content.height),i.scrollTo(n,e,o)}},e.prototype.scrollToPos=function(t){var e=this.node.getComponent(cc.ScrollView),o=cc.winSize.height,i=1-(t.y-o/2+o*(1-Math.abs(t.y/e.content.height)))/e.content.height*-1;e.scrollToPercentVertical(i,1)},e.prototype.getContentHeightByUnify=function(){var t=this.itemPrefab.data;return this._row*(t.height+this.spacingY)},e.prototype.getPosByUnify=function(t){var e=this.itemPrefab.data,o=0,i=0;return this._isHorizon?o=this.borderTop+e.width/2+t*(e.width+this.spacingX):(o=.5*(e.width+this.spacingX)-((this._col-t%this._col)*(e.width+this.spacingX)*.5+(.5-e.anchorX)*e.width)+t%this._col*(e.width+this.spacingX)*.5,i=-this.borderTop-e.height*(1-e.anchorY)-Math.floor(t/this._col)*(e.height+this.spacingY)),this.isReverse&&(i=-(this._content.height+i)),cc.v2(o,i)},e.prototype.stopAutoScroll=function(){this.node.getComponent(cc.ScrollView).stopAutoScroll()},e.prototype.updateItem=function(t,e){0!=this.numItems&&(e.active=t<this.numItems,e.active&&(this._itemList[t]=e,this.onItemRender&&this.onItemRender(t,e)))},e.prototype.updateAllItem=function(){if(0!=this.numItems){for(var t=0;t<this._items.length;++t){var e=this._items[t];if(e){var o=this._itemsUidToIndex[e.uuid];(o||0===o)&&this.updateItem(o,e)}}this._isHorizon?this._updateContentWidth():this._updateContentHeight()}},e.prototype.scrollComponent=function(){return this.node.getComponent(cc.ScrollView)},e.prototype._initialize=function(){this._isHorizon?(this._content.anchorX=0,this._content.anchorY=.5,this._content.position=cc.v3(-this.node.width/2,-this.node.height/2,0),this._updateContentWidth(),this._spawnCount=Math.ceil(this.node.width/this.itemPrefab.data.width)+2,console.log("\u521d\u59cb\u5316RecycleScroll item, \u5b9e\u4f8b\u5316\u6570\u91cf\uff1a"+this._spawnCount+" width: "+this._content.width)):(this._content.anchorX=.5,this._content.anchorY=1,this._content.position=cc.v3(),this._updateContentHeight(),this._spawnCount=this._col*Math.ceil(this.node.height/this.itemPrefab.data.height)+3*this._col,console.log("\u521d\u59cb\u5316RecycleScroll item, \u5b9e\u4f8b\u5316\u6570\u91cf\uff1a"+this._spawnCount)),this._createItem()},e.prototype._regScrollEvent=function(){this.scrollComponent().node.on("scrolling",this.onScrollingCallBack,this)},e.prototype._updateContentHeight=function(){if(this._content){var t=this.itemPrefab.data,e=this.numItems;this._col=Math.floor(this.node.width/(t.width+this.spacingX)),this._row=Math.ceil(e/this._col),this._content.height=this.getContentHeightByUnify()+this.borderTop+this.borderBot}},e.prototype._updateContentWidth=function(){if(this._content){var t=this.itemPrefab.data,e=this.numItems;this._row=1,this._content.width=t.width*e+this.spacingX*(e-1)+this.borderTop+this.borderBot}},e.prototype._createItem=function(){var t=this,e=0;s(this._spawnCount,function(o){if(cc.isValid(t.node)){var i=cc.instantiate(t.itemPrefab);t._content.addChild(i),i.setPosition(t.getPosByUnify(o)),i.active=o<t.numItems,t._items[o]=i,t._itemsUidToIndex[i.uuid]=o,i.on(cc.Node.EventType.TOUCH_END,function(){t.onItemClicked&&t.onItemClicked(t._itemsUidToIndex[i.uuid],i)},t),t.updateItem(o,i),++e==t._spawnCount&&t.onItemFinish()}})},e.prototype.onItemFinish=function(){},e.prototype._getPositionInView=function(t){var e=t.parent.convertToWorldSpaceAR(t.position);return this.node.convertToNodeSpaceAR(e)},e.prototype.update=function(t){if(this._items.length==this._spawnCount&&(this._updateTimer+=t,!(this._updateTimer<this._updateInterval))){this._updateTimer=0;var e=this._items,o=this.node.getComponent(cc.ScrollView);if(this._lastContentPosX==o.content.x&&this._lastContentPosY==o.content.y||this.onPosCallBack(),this._isHorizon){for(var i=Math.floor(o.content.x)<this._lastContentPosX,n=(this.itemPrefab.data.width+this.spacingX)*Math.ceil(this._items.length/this._row),r=0;r<e.length;++r){var a=e[r],s=this._getPositionInView(a);if(i){if(s.x<-a.width-(1-this.node.anchorX)*this.node.width&&a.x+n<=o.content.width){var c=this._itemsUidToIndex[a.uuid],l=1;this.isReverse&&(l=-1),(d=c+e.length*l)>=0&&(a.x=a.x+n,this._itemList[c]=null,this._itemList[d]=a,this._itemsUidToIndex[a.uuid]=d,this.updateItem(d,a))}}else s.x>a.width+(1-this.node.anchorX)*this.node.width&&a.x-n>=0&&(c=this._itemsUidToIndex[a.uuid],l=1,this.isReverse&&(l=-1),(d=c-e.length*l)>=0&&(a.x=a.x-n,this._itemList[c]=null,this._itemList[d]=a,this._itemsUidToIndex[a.uuid]=d,this.updateItem(d,a)))}this._lastContentPosX=o.content.x}else{var h=Math.floor(o.content.y)<=this._lastContentPosY;for(n=(this.itemPrefab.data.height+this.spacingY)*Math.ceil(this._items.length/this._col),r=0;r<e.length;++r)if(a=e[r],s=this._getPositionInView(a),h)s.y<-a.height-(1-this.node.anchorY)*this.node.height&&a.y+n<=0&&(c=this._itemsUidToIndex[a.uuid],l=1,this.isReverse&&(l=-1),(d=c-e.length*l)>=0&&(a.y=a.y+n,this._itemList[c]=null,this._itemList[d]=a,this._itemsUidToIndex[a.uuid]=d,this.updateItem(d,a)));else if(s.y>a.height+(1-this.node.anchorY)*this.node.height&&a.y-n>=-o.content.height){var d;c=this._itemsUidToIndex[a.uuid],l=1,this.isReverse&&(l=-1),(d=c+e.length*l)>=0&&(a.y=a.y-n,this._itemList[c]=null,this._itemList[d]=a,this._itemsUidToIndex[a.uuid]=d,this.updateItem(d,a))}this._lastContentPosY=o.content.y}}},__decorate([r({type:cc.Prefab,tooltip:"item\u9884\u5236\u4f53"})],e.prototype,"itemPrefab",void 0),__decorate([r({type:cc.Float,tooltip:"item\u4e4b\u95f4x\u95f4\u9694"})],e.prototype,"spacingX",void 0),__decorate([r({type:cc.Float,tooltip:"item\u4e4b\u95f4y\u95f4\u9694"})],e.prototype,"spacingY",void 0),__decorate([r({tooltip:"\u662f\u5426\u53ef\u6ed1\u52a8"})],e.prototype,"canScroll",void 0),__decorate([r({type:cc.Float,tooltip:"\u8fb9\u754c\u586b\u5145\u4e0a/\u5de6"})],e.prototype,"borderTop",void 0),__decorate([r({type:cc.Float,tooltip:"\u8fb9\u754c\u586b\u5145\u4e0b/\u53f3"})],e.prototype,"borderBot",void 0),__decorate([r({tooltip:"\u662f\u5426\u53cd\u5411\u6392\u5217"})],e.prototype,"isReverse",void 0),__decorate([n],e)}(cc.Component);function s(t,e,o,i){void 0===o&&(o=1),void 0===i&&(i=0);for(var r=t,a=(new Date).getTime(),c=0;c<r&&!(i>=r);++c){try{e&&e(i)}catch(n){cc.error(n)}if(i++,(new Date).getTime()-a>o)return void setTimeout(function(){s(t,e,o,i)},20)}}o.default=a,cc._RF.pop()},{}],ReportManager:[function(t,e,o){"use strict";cc._RF.push(e,"c6b5cgLGuBEyZrWnX9CGreH","ReportManager"),o.Report=void 0;var i=t("./PlatformManager"),n=function(){function t(){}return t.prototype.init=function(){console.log("\u521d\u59cb\u5316:GameLogMgr"),cc.game.on("gamelog",this.onGameLog,this),cc.game.on("gamelog_Thinking",this.onGameLog_Thinking,this),cc.game.on("gamelog_adjustEvent",this.onGameLog_adjustEvent,this),cc.game.on("gameTime-log",this.onGameTimeLog,this),cc.game.on("gameLevel-log",this.onGameLevelLog,this),cc.game.on("language-init",this.onLanguageInit,this)},t.prototype.onGameLog=function(t,e){void 0===e&&(e="count"),window.tt},t.prototype.onGameLog_Thinking=function(t,e){i.Platform.report(t,JSON.stringify(e)),console.log("%c [GameLog] \u4e8b\u4ef6\u6253\u70b9: "+t+"  \u5b50\u4e8b\u4ef6 "+JSON.stringify(e),"color:#F500FF")},t.prototype.onGameLog_adjustEvent=function(t){i.Platform.adjustEvent(t),console.log("%c [adjustEvent] \u4e8b\u4ef6\u6253\u70b9: "+t+" ","color:#F500FF")},t.prototype.onGameTimeLog=function(){},t.prototype.onGameLevelLog=function(t){console.log("%c [GameLog] **** \u5173\u5361\u6253\u70b9: "+t+" ****}","color:#F500FF")},t.prototype.onLanguageInit=function(){},t}();o.Report=new n,cc._RF.pop()},{"./PlatformManager":"PlatformManager"}],ReportQueue:[function(t,e,o){"use strict";cc._RF.push(e,"f0151tG12FDtIxnQTDkidOU","ReportQueue");var i=t("./LocalStorage"),n=new(function(){function t(){this._list=[],this._storageKey="sdk_report_list";var t=i.default.getItem(this._storageKey);this._list=t?JSON.parse(t):[]}return t.prototype.push=function(t){var e=this._list.push(t);return this.refeshStorage(),e},t.prototype.pop=function(){var t=this._list.shift();return this.refeshStorage(),t},t.prototype.range=function(t,e){var o=this._list.splice(t,e);return this.refeshStorage(),o},t.prototype.refeshStorage=function(){var t=JSON.stringify(this._list);return i.default.setItem(this._storageKey,t)},t.prototype.len=function(){return this._list.length},t.prototype.getList=function(){return this._list},t}());o.default=n,cc._RF.pop()},{"./LocalStorage":"LocalStorage"}],Report:[function(t,e,o){"use strict";cc._RF.push(e,"da3d8iaoJpDxpRzaZMmhQzO","Report");var i=t("./Api"),n=t("./function"),r=t("./TimeManage"),a=t("./config"),s=function(){function t(){}return t.prototype.click=function(){if(window.params.getShowParams("w_cid")||window.params.getShowParams("clickid")){var t={yw_track_channel:"tt_ttmn",yw_app_name:window.params.getGameParams("app_name"),yw_channel:window.params.getGameParams("channel"),yw_version:window.params.getGameParams("version"),yw_opi:window.params.getUserParams("openid")};t=Object.assign(t,window.params.getShowParams()),window.Logger.info("## \u4e0a\u62a5\u76d1\u6d4b\u6570\u636e",t),i.click(t,function(t){window.Logger.info("## \u4e0a\u62a5\u76d1\u6d4b\u6570\u636e\u5b8c\u6210",t)},function(t){window.Logger.error("## \u76d1\u6d4b\u6570\u636e\u4e0a\u62a5\u5931\u8d25;",t)},function(){})}},t.prototype.active=function(){n.getServerTime(function(t){var e=[{d_type:"u_op",t:n.getClientTime(),act:"active",wds:"\u6fc0\u6d3b",clickid:window.params.getShowParams("clickid")}],o={app_name:window.params.getGameParams("app_name"),channel:window.params.getGameParams("channel"),version:window.params.getGameParams("version"),uuid:window.params.getUserParams("openid"),m_data:JSON.stringify(e),b_t:t.data.data.time};o=n.getSign(o),window.Logger.info("## \u4e0a\u62a5\u6fc0\u6d3b",o),i.report(o,function(){},function(t){window.Logger.error("## \u6fc0\u6d3b\u4e0a\u62a5\u5931\u8d25;",t)},function(){})})},t.prototype.online=function(){var t=r.default.getEndClientTime(),e=r.default.getOnlineTime();r.default.removeStartClientTime(),r.default.removeEndClientTime(),n.getServerTime(function(o){var r=[{d_type:"u_op",t:t,act:"time",wds:"\u65f6\u957f",tab1:e,clickid:window.params.getShowParams("clickid")}],a={app_name:window.params.getGameParams("app_name"),channel:window.params.getGameParams("channel"),version:window.params.getGameParams("version"),uuid:window.params.getUserParams("openid"),m_data:JSON.stringify(r),b_t:o.data.data.time};a=n.getSign(a),window.Logger.info("## \u4e0a\u62a5\u5728\u7ebf\u65f6\u957f",a),i.report(a,function(){},function(t){window.Logger.error("## \u5728\u7ebf\u65f6\u957f\u4e0a\u62a5\u5931\u8d25;",t)},function(){})})},t.prototype.userInfo=function(){n.getServerTime(function(t){var e=[{d_type:"u",platform:"tt_minigame",t:n.getClientTime(),clickid:window.params.getShowParams("clickid"),requestid:window.params.getShowParams("requestid"),os:window.params.getShowParams("os"),imei:window.params.getShowParams("imei"),android_id:window.params.getShowParams("android_id"),mac:window.params.getShowParams("mac"),idfa:window.params.getShowParams("idfa"),idfa_md5:window.params.getShowParams("idfa_md5"),d_m:window.params.getShowParams("d_m"),idfv:window.params.getShowParams("idfv"),oaid:window.params.getShowParams("oaid")}],o={app_name:window.params.getGameParams("app_name"),channel:window.params.getGameParams("channel"),version:window.params.getGameParams("version"),uuid:window.params.getUserParams("openid"),m_data:JSON.stringify(e),b_t:t.data.data.time};o=n.getSign(o),window.Logger.info("## \u4e0a\u62a5\u7528\u6237\u4fe1\u606f",o),i.report(o,function(t){window.Logger.info("## \u4e0a\u62a5\u7528\u6237\u4fe1\u606f\u6210\u529f;",t)},function(t){window.Logger.error("## \u4e0a\u62a5\u7528\u6237\u4fe1\u606f\u5931\u8d25;",t)},function(){})})},t.prototype.adRequest=function(t){var e={d_type:"ad_ac",t:n.getClientTime(),clickid:window.params.getShowParams("clickid"),act:"ad_request",wds:"\u5e7f\u544a\u8bf7\u6c42",ad_t:t,tab1:"\u5b57\u8282"};window.reportQueue.push(e),this.checkReportQueue()},t.prototype.adFill=function(t){var e={d_type:"ad_ac",t:n.getClientTime(),clickid:window.params.getShowParams("clickid"),act:"ad_fill",wds:"\u5e7f\u544a\u586b\u5145",ad_t:t,tab1:"\u5b57\u8282"};window.reportQueue.push(e),this.checkReportQueue()},t.prototype.adClick=function(t){var e={d_type:"ad_ac",t:n.getClientTime(),clickid:window.params.getShowParams("clickid"),act:"ad_click",wds:"\u5e7f\u544a\u89e6\u53d1",ad_t:t,tab1:"\u5b57\u8282"};window.reportQueue.push(e),this.checkReportQueue()},t.prototype.adImpression=function(t){var e={d_type:"ad_ac",t:n.getClientTime(),clickid:window.params.getShowParams("clickid"),act:"ad_impression",wds:"\u5e7f\u544a\u5c55\u793a",ad_t:t,tab1:"\u5b57\u8282"};window.reportQueue.push(e),this.checkReportQueue()},t.prototype.adImpressionDone=function(t){var e={d_type:"ad_ac",t:n.getClientTime(),clickid:window.params.getShowParams("clickid"),act:"ad_impression_done",wds:"\u5e7f\u544a\u64ad\u653e\u5b8c\u6210",ad_t:t,tab1:"\u5b57\u8282"};window.reportQueue.push(e),this.checkReportQueue()},t.prototype.other=function(t,e){var o={d_type:"u_op",t:n.getClientTime(),clickid:window.params.getShowParams("clickid"),act:t,wds:e};window.reportQueue.push(o),this.checkReportQueue()},t.prototype.checkReportQueue=function(t){var e=this;void 0===t&&(t=!0),t&&!r.default.getFirstReportServerTime()&&(r.default.setFirstReportServerTime(),r.default.setFirstReportClientTime()),window.Logger.info("## \u5f53\u524d\u4e8b\u4ef6\u961f\u5217\u60c5\u51b5;","\u4e8b\u4ef6\u961f\u5217\u603b\u6570\uff08"+window.reportQueue.len()+"\uff09\uff08\u9650\u5236\u6570\u4e3a\uff1a"+a.LIMIT_REPORT_COUNT+"\uff09","\u8ddd\u79bb\u9996\u4e2a\u4e8b\u4ef6\u65f6\u957f\uff08"+(n.getClientTime()-r.default.getFirstReportClientTime())+"\uff09\uff08\u9650\u5236\u65f6\u957f\u4e3a\uff1a"+a.LIMIT_REPORT_INTERVAL+"\uff09",r.default.getFirstReportClientTime(),window.reportQueue.len()>=a.LIMIT_REPORT_COUNT||r.default.getFirstReportClientTime()&&n.getClientTime()-r.default.getFirstReportClientTime()>=a.LIMIT_REPORT_INTERVAL),window.reportQueue.len()>0&&(window.reportQueue.len()>=a.LIMIT_REPORT_COUNT||r.default.getFirstReportClientTime()&&n.getClientTime()-r.default.getFirstReportClientTime()>=a.LIMIT_REPORT_INTERVAL)&&setTimeout(function(){e.reportQueue()},500)},t.prototype.reportQueue=function(t){if(void 0===t&&(t=0),!(Object.keys(window.params.getGameParams()).length<=0)&&window.params.getUserParams("openid")){var e=window.reportQueue.range(0,0===t?window.reportQueue.len():t),o={app_name:window.params.getGameParams("app_name"),channel:window.params.getGameParams("channel"),version:window.params.getGameParams("version"),uuid:window.params.getUserParams("openid"),m_data:JSON.stringify(e),b_t:r.default.getFirstReportServerTime()};r.default.removeFirstReportServerTime(),r.default.removeFirstReportClientTime(),o=n.getSign(o),window.Logger.info("## \u4e0a\u62a5\u4e8b\u4ef6\u961f\u5217",o,e),i.report(o,function(){},function(t){window.Logger.error("## \u4e8b\u4ef6\u961f\u5217\u4e0a\u62a5\u5931\u8d25;",t)},function(){})}},t}();o.default=new s,cc._RF.pop()},{"./Api":"Api","./TimeManage":"TimeManage","./config":"config","./function":"function"}],Request:[function(t,e,o){"use strict";cc._RF.push(e,"6055cPYOiRJnZNWxmApD+U5","Request");var i=function(){function t(){}return t.get=function(t){if(window.tt)return t.method="GET",t.header={"content-type":"application/x-www-form-urlencoded"},window.wxapi.request(t)},t.post=function(t){if(window.tt)return t.method="POST",t.header={"content-type":"application/x-www-form-urlencoded"},window.wxapi.request(t)},t}();o.default=i,cc._RF.pop()},{}],ResManager:[function(t,e,o){"use strict";cc._RF.push(e,"f929cIDE0dJPIwOrBhsBkwC","ResManager"),o.Res=void 0;var i=function(){function t(){}return t.prototype.load=function(t){return new Promise(function(e,o){cc.resources.load(t,function(t,i){return t?(cc.warn(t),o(t)):e(i)})})},t.prototype.releaseResPackage=function(t){for(var e in t)for(var o=t[e].urls,i=0;i<o.length;i++)cc.assetManager.releaseAsset(o[i])},t}();o.Res=new i,cc._RF.pop()},{}],RewriteMask:[function(t,e){"use strict";cc._RF.push(e,"fce47sGueBLj5qbP+lhSMVs","RewriteMask"),(function(){}.prototype=cc.Mask.prototype).onDestroy=function(){this._super&&this._super(),this._removeGraphics&&this._removeGraphics(),this._spriteFrame=null},cc._RF.pop()},{}],Rewrite:[function(t,e){"use strict";cc._RF.push(e,"8add7WBV1VP/YNHb8pdLFFP","Rewrite"),(function(){}.prototype=cc.Button.prototype)._onTouchEnded=function(t){this.interactable&&this.enabledInHierarchy&&(this._pressed&&(cc.Component.EventHandler.emitEvents(this.clickEvents,t),this.node.emit("click",this)),this._pressed=!1,this._updateState(),t.stopPropagation())},cc._RF.pop()},{}],Role:[function(t,e,o){"use strict";cc._RF.push(e,"fe055KzT0JHrp0nDfnuVawg","Role");var i=t("./PlatformConst"),n=t("./LocalStorageConst"),r=t("./LocalStorageManager"),a=t("./PlatformManager"),s=t("./PopupManager"),c=t("./TipManager"),l=t("./VIVOADUtils"),h=t("./XMADUtils"),d=t("./UIBase"),u=t("./ConfigManager"),p=t("./ConfigConst"),f=t("./AssetManager"),g=cc._decorator,m=g.ccclass,v=g.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.unlockBg=null,e.lockBg=null,e.cost=0,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this);var e=r.default.get(n.default.DragonBall)||0;r.default.set(n.default.DragonBall,e);var o=r.default.get(n.default.HeroLevel)||1;r.default.set(n.default.HeroLevel,o),this.localStorageUIData[n.default.HeroLevel]=this.updateHeroLevel.bind(this),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("yesBtn",this.yesBtn,this)},e.prototype.updateHeroLevel=function(t){return __awaiter(this,void 0,void 0,function(){var e,o,i,a,s,c=this;return __generator(this,function(l){switch(l.label){case 0:return this.dict.heroLevel.getComponent(cc.Label).string="Lv"+t,this.dict.yesBtn.active=t<10,[4,u.Config.get(p.ConfigConst.Role)];case 1:return e=l.sent(),o=r.default.get(n.default.DragonBall)||0,(i=e.find(function(e){return e.id==t+1}))?(this.dict.dragonBall.getComponent(cc.Label).string=o+"/"+i.cost,this.cost=i.cost,o>=this.cost?this.dict.yesBtn.getComponent(cc.Animation).play():(this.dict.yesBtn.getComponent(cc.Animation).stop(),this.dict.yesBtn.scale=1)):this.dict.dragonBall.parent.active=!1,e.forEach(function(e,o){c.dict.scrollViewContent.children[o]||c.dict.scrollViewContent.addChild(cc.instantiate(c.dict.scrollViewContent.children[0])),c.dict.scrollViewContent.children[o].getChildByName("level").getComponent(cc.Label).string="Lv"+e.id,c.dict.scrollViewContent.children[o].getChildByName("text").getComponent(cc.Label).string=e.roleTxt,t>=e.id?c.dict.scrollViewContent.children[o].getComponent(cc.Sprite).spriteFrame=c.unlockBg:c.dict.scrollViewContent.children[o].getComponent(cc.Sprite).spriteFrame=c.lockBg}),a=t>=9?"texture/skin/role3":t>=6?"texture/skin/role2":t>=3?"texture/skin/role1":"texture/skin/role0",[4,f.default.getRes("gameBundle",a,cc.Texture2D)];case 2:return s=l.sent(),this.dict.roleIcon.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(s),[2]}})})},e.prototype.onEnable=function(){a.Platform.is(i.EPlatform.XIAOMI_ANDROID)?h.XMAD.showBannerFeed():a.Platform.is(i.EPlatform.VIVO)&&l.VIVOAD.showCustomAd_1()},e.prototype.onDisable=function(){a.Platform.is(i.EPlatform.XIAOMI_ANDROID)&&a.Platform.removeBannerFeed(),a.Platform.hideCustomAd(),a.Platform.hideCustomAd_1(),a.Platform.hideCustomAd_2()},e.prototype.yesBtn=function(){var t=r.default.get(n.default.DragonBall)||0;if(t<this.cost)return c.Tip.show("\u9f99\u73e0\u4e0d\u8db3\uff01");r.default.set(n.default.DragonBall,t-this.cost),c.Tip.show("\u5347\u7ea7\u6210\u529f");var e=r.default.get(n.default.HeroLevel)||1;if(e+=1,r.default.set(n.default.HeroLevel,e),this.dict.upgradeSpine.active=!0,this.dict.upgradeSpine.getComponent(sp.Skeleton).setAnimation(0,"animation",!1),console.log("\u89e3\u9501\u76ae\u80a40000"),3==e||6==e||9==e){var o=r.default.get(n.default.SkinList)||{};o[0]||(o[0]=[0]),o[1]||(o[1]=[0]);var i=r.default.get(n.default.UseSkin)||{};i[0]||(i[0]=0),i[1]||(i[1]=0);var a={3:1,6:2,9:3}[e];o[0].includes(a)||o[0].push(a),i[0]=a,console.log("\u89e3\u9501\u76ae\u80a4",a),r.default.set(n.default.SkinList,o),r.default.set(n.default.UseSkin,i)}},e.prototype.noBtn=function(){s.default.hide()},__decorate([v(cc.SpriteFrame)],e.prototype,"unlockBg",void 0),__decorate([v(cc.SpriteFrame)],e.prototype,"lockBg",void 0),__decorate([m],e)}(d.default);o.default=y,cc._RF.pop()},{"./AssetManager":"AssetManager","./ConfigConst":"ConfigConst","./ConfigManager":"ConfigManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager","./TipManager":"TipManager","./UIBase":"UIBase","./VIVOADUtils":"VIVOADUtils","./XMADUtils":"XMADUtils"}],Rule:[function(t,e,o){"use strict";cc._RF.push(e,"6a538oizwhHNa3klKT6C5AB","Rule");var i=t("./PopupConst"),n=t("./UserConst"),r=t("./UIBase"),a=t("./LocalStorageConst"),s=t("./LocalStorageManager"),c=t("./MemoryStorageConst"),l=t("./MemoryStorageManager"),h=t("./BmsManager"),d=t("./LanguageManager"),u=t("./PlatformManager"),p=t("./PopupManager"),f=t("./UserManager"),g=t("./ShuShuConst"),m=cc._decorator,v=m.ccclass,y=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.propIndex=0,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.node.setContentSize(cc.winSize),this.addBtnOn("noBtn",this.noBtn,this),this.initView()},e.prototype.initView=function(){"plan"!=(l.default.get(c.default.rule)||"plan")&&(this.dict.title.getComponent(cc.Label).string=d.default.formatStr("\u6781\u9650\u6311\u6218"),this.dict.text.getComponent(cc.Label).string=d.default.formatStr("\u5728\u65f6\u95f4\u5185\u6bcf\u901a\u8fc7\u4e00\u5173\u53ef\u9886\u53d6\u4e00\u6b21\u5956\u52b1\u3002\u5b8c\u6210\u5168\u90e8\u5173\u5361\u53ef\u9886\u53d6\u5927\u5956\u3002"))},e.prototype.updateCardAmount=function(t){this.dict.cardAmount.getComponent(cc.Label).string=""+t},e.prototype.noBtn=function(){p.default.hide()},e.prototype.cardBtn=function(){var t,e=s.default.get(a.default.cardAmount)||0,o=l.default.get(c.default.propIndex);if(t=e<=0?0:1,cc.game.emit("gamelog_Thinking",g.ShuShuConst.Booster_use,{lv:f.User.getTempData(n.TempData.CURRENT_LEVEL_ID),queue:f.User.getTempData(n.TempData.CURRENT_LEVEL),mode:f.User.getTempData(n.TempData.CURRENT_MODE),id:{0:2,1:1,2:4,3:5,4:3}[o],or:t}),e<=0)return p.default.show(i.PopupConst.UniversalCard);e-=1,s.default.set(a.default.cardAmount,e),this.suc()},e.prototype.videoBtn=function(){var t=this;u.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("gamelog_Thinking",g.ShuShuConst.reward_btn,{id:["074","073","076","077","075"][t.propIndex],lv:f.User.getTempData(n.TempData.CURRENT_LEVEL_ID),mode:f.User.getTempData(n.TempData.CURRENT_MODE)}),t.suc())})},e.prototype.suc=function(){cc.game.emit(["sucReset","sucTip","sucWithdraw","sucRemoveScrew","sucBore"][this.propIndex]),p.default.hide()},e.prototype.updatePropIndex=function(t){this.propIndex=t,this.dict.title.getComponent(cc.Label).string=""+["\u91cd\u7f6e","\u63d0\u793a","\u64a4\u56de","\u6d88\u87ba\u4e1d","\u6253\u5b54"][t],this.dict.text.getComponent(cc.Label).string=d.default.formatStr(["\u91cd\u7f6e\u672c\u5c0f\u5173","\u83b7\u5f97\u901a\u5173\u7684\u63d0\u793a","\u64a4\u56de\u5230\u4e0a\u4e00\u6b65","\u53ef\u6d88\u9664\u4efb\u610f\u4e00\u6839\u87ba\u4e1d","\u6253\u5f00\u4e00\u4e2a\u65b0\u5b54\u4f4d"][t]),this.dict.iconRoot.children[t].active=!0,cc.game.emit("gamelog_Thinking",g.ShuShuConst.Booster_page,{lv:f.User.getTempData(n.TempData.CURRENT_LEVEL_ID),queue:f.User.getTempData(n.TempData.CURRENT_LEVEL),mode:f.User.getTempData(n.TempData.CURRENT_MODE),id:{0:2,1:1,2:4,3:5,4:3}[t]}),u.Platform.getConfig().hasPurchase?(this.dict.universalCard.active=!0,this.dict.cardBtn.active=!0,this.dict.videoBtn.active=!0,3==t&&(1==h.BMS.getKey("UnscrewTicket")?(this.dict.cardBtn.active=!0,this.dict.videoBtn.active=!1):(this.dict.cardBtn.active=!0,this.dict.videoBtn.active=!0))):(this.dict.universalCard.active=!1,this.dict.cardBtn.active=!1,this.dict.videoBtn.active=!0)},__decorate([v],e)}(r.default));o.default=y,cc._RF.pop()},{"./BmsManager":"BmsManager","./LanguageManager":"LanguageManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./MemoryStorageConst":"MemoryStorageConst","./MemoryStorageManager":"MemoryStorageManager","./PlatformManager":"PlatformManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./ShuShuConst":"ShuShuConst","./UIBase":"UIBase","./UserConst":"UserConst","./UserManager":"UserManager"}],SceneConst:[function(t,e,o){"use strict";var i;cc._RF.push(e,"0b4b65fq45DeZ+aqfrn2y89","SceneConst"),o.SceneConst=void 0,(i=o.SceneConst||(o.SceneConst={})).LOADING="Loading",i.MAIN="Main",i.GAME="Game",i.MODE_SELECT="ModeSelect",i.LEVEL_SELECT="LevelSelect",i.UGC="Ugc",i.Home="Home",i.CardShop="CardShop",i.ShipRace2="ShipRace2",i.Challenge="Challenge",cc._RF.pop()},{}],SceneFit:[function(t,e,o){"use strict";cc._RF.push(e,"06125y+k6dJWYy3Eui9vWAf","SceneFit");var i=cc._decorator,n=i.ccclass,r=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){this.fit(),console.log("111")},e.prototype.fit=function(){var t=cc.Canvas.instance,e=cc.view.getFrameSize().width/cc.view.getFrameSize().height>=t.designResolution.width/t.designResolution.height;t.fitHeight=e,t.fitWidth=!e},__decorate([n],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],SceneManager:[function(t,e,o){"use strict";cc._RF.push(e,"c753b1QVVNLcYjkcaPN9El5","SceneManager");var i=t("./PlatformManager"),n=t("./AssetManager"),r=t("./PopupManager"),a=t("./SceneConst"),s=new(function(){function t(){this.currentScene=a.SceneConst.LOADING,this.isLoading=!1,this.hasAnim=!0,this.time=.1,this.sceneRoot=null,this.transition=null,this.timerID=null}return t.prototype.init=function(t){var e=cc.find("Canvas");this.sceneRoot=e.getChildByName("sceneRoot"),this.transition=e.getChildByName("transition"),this.transition.color=cc.Color.WHITE,this.transition.opacity=0;var o=cc.instantiate(t);this.sceneRoot.addChild(o)},t.prototype.suc=function(t,e){this.sceneRoot.destroyAllChildren(),this.sceneRoot.addChild(t),this.currentScene=e,this.isLoading=!1,console.log("\u8fdb\u5165\u65b0\u573a\u666f",this.currentScene)},t.prototype.getCurrentScene=function(){return this.currentScene},t.prototype.loadScene=function(t,e){return void 0===e&&(e=!0),__awaiter(this,void 0,void 0,function(){var o,s,c,l=this;return __generator(this,function(h){switch(h.label){case 0:return t!=a.SceneConst.GAME||window.levelSub?this.isLoading?[2,console.log("\u573a\u666f\u6b63\u5728\u52a0\u8f7d\u4e2d\u3002\u3002\u3002")]:(this.isLoading=!0,e&&r.default.hideAll(),o="gameBundle",i.Platform.getConfig().appID.includes("tt")&&t==a.SceneConst.Home&&(o="ttBundle"),[4,n.default.getRes(o,"prefab/scene/"+t,cc.Prefab)]):(this.timerID=setInterval(function(){console.log("\u8ba1\u65f6\u5668\u68c0\u67e5\u662f\u5426\u52a0\u8f7d\u5b8c"),window.levelSub&&(clearInterval(l.timerID),l.loadScene(t,e))},200),[2]);case 1:return s=h.sent(),c=cc.instantiate(s),this.hasAnim?(this.transition.opacity=0,this.transition.stopAllActions(),cc.tween(this.transition).to(this.time,{opacity:255}).call(function(){l.suc(c,t)}).to(this.time,{opacity:0}).start(),[2]):[2,this.suc(c,t)]}})})},t}());o.default=s,cc._RF.pop()},{"./AssetManager":"AssetManager","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager","./SceneConst":"SceneConst"}],ScreenshotUtils:[function(t,e,o){"use strict";cc._RF.push(e,"689d8ScQFlDWIZZjoaPqKwB","ScreenshotUtils"),o.Screenshot=void 0;var i=function(){function t(){this._camera=null,this._texture=null,this._sprite=null}return t.prototype.init=function(t){if(cc.sys.isBrowser){var e=new cc.Node;e.parent=cc.director.getScene().getChildByName("Canvas");var o=e.addComponent(cc.Camera);o.enabled=!1;var i=cc.winSize.width,n=cc.winSize.height,r=cc.size(1*i,1*n),a=cc.v2(0,0);o.zoomRatio=1;var s=new cc.RenderTexture;s.initWithSize(r.width,r.height),t.setPosition(a),o.targetTexture=s,this._camera=o,this._texture=s,this._sprite=t.getComponent(cc.Sprite)}},t.prototype.btn_image_knife=function(t){console.log("save"),this._camera.render(void 0);var e=this._texture,o=e.readPixels(),i=e.width,n=e.height,r=document.createElement("canvas"),a=r.getContext("2d");r.width=i,r.height=n;for(var s=4*i,c=0;c<n;c++){for(var l=n-1-c,h=a.createImageData(i,1),d=l*i*4,u=0;u<s;u++)h.data[u]=o[d+u];a.putImageData(h,0,c)}var p=r.toDataURL("image/jpeg").replace(/^data:image[^;]*/,"data:image/octet-stream"),f=document.createElement("a");f.href=p,f.download=t+".png",f.click(),f.remove()},t}();o.Screenshot=new i,cc._RF.pop()},{}],ScrewSkinItem:[function(t,e,o){"use strict";var i;cc._RF.push(e,"a2783JamE1DmbCt6vjJ8Ae+","ScrewSkinItem");var n,r=t("./EventConst"),a=t("./UserConst"),s=t("./EventManager"),c=t("./UserManager"),l=cc._decorator,h=l.ccclass,d=l.property;(n=i||(i={}))[n.lock=0]="lock",n[n.getNoUnlock=1]="getNoUnlock",n[n.unlockNoUse=2]="unlockNoUse",n[n.unlockUse=3]="unlockUse";var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lock=null,e.unlockNoUse=null,e.unlockUse=null,e.param=null,e.state=i.lock,e.starAmount=0,e.skinNameArr=[],e}return __extends(e,t),e.prototype.onLoad=function(){this.skinNameArr=new Array(6).fill("pifu").map(function(t,e){return t+(e+1)})},e.prototype.setData=function(t){this.param=t,this.node.zIndex=this.param.index,this.state=this.param.eState,this.refresh()},e.prototype.refresh=function(){var t=this,e=this.param.index+1;this.lock.active=!1,this.unlockNoUse.active=!1,this.unlockUse.active=!1,cc.resources.load("texture/skin/luosi_"+e,function(e,o){if(e)return console.log(e);switch(t.unlockNoUse.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o),t.state){case i.lock:t.unlockNoUse.active=!0,t.lock.active=!0;break;case i.unlockNoUse:t.unlockNoUse.active=!0;break;case i.unlockUse:t.unlockNoUse.active=!0,t.unlockUse.active=!0}})},e.prototype.clickEnter=function(){if(c.User.setTempData("chooseSkinPage",2),c.User.setTempData("chooseSkin",this.param.index+1),!this.unlockUse.active&&!this.lock.active){var t=c.User.get(a.UserData.useSkinIDList);t[2]=this.param.index,c.User.set(a.UserData.useSkinIDList,t),s.Event.emit(r.default.update_use_skin)}},e.state=i,__decorate([d(cc.Node)],e.prototype,"lock",void 0),__decorate([d(cc.Node)],e.prototype,"unlockNoUse",void 0),__decorate([d(cc.Node)],e.prototype,"unlockUse",void 0),__decorate([h],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./EventConst":"EventConst","./EventManager":"EventManager","./UserConst":"UserConst","./UserManager":"UserManager"}],Set:[function(t,e,o){"use strict";cc._RF.push(e,"e4cd4LM451KiKxw25hI2P/t","Set");var i=t("./BaseUI"),n=t("./SceneConst"),r=t("./PlatformManager"),a=t("./PopupManager"),s=t("./SceneManager"),c=t("./LocalStorageManager"),l=t("./LocalStorageConst"),h=t("./ShuShuConst"),d=t("./UserManager"),u=t("./UserConst"),p=cc._decorator,f=p.ccclass,g=(p.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("continueBtn",this.noBtn,this),this.addBtnOn("backHomeBtn",this.backHomeBtn,this),s.default.getCurrentScene()==n.SceneConst.GAME&&(this.dict.continueBtn.active=!0,this.dict.backHomeBtn.active=!0,this.dict.heroLevelBtn.active=!0),this.dict.recordNumber.getComponent(cc.Label).string=""+r.Platform.getConfig().recordNumber},e.prototype.noBtn=function(){a.default.hide()},e.prototype.onEnable=function(){game.dragonMoving&&(game.dragonMoving=!1)},e.prototype.onDisable=function(){game.dragonMoving||(game.dragonMoving=!0)},e.prototype.continueBtn=function(){s.default.loadScene(n.SceneConst.Home)},e.prototype.backHomeBtn=function(){if(!c.default.get(l.default.IsNoFirstBack)){c.default.set(l.default.IsNoFirstBack,1);var t=window.levelContent._components[0].allPersonAmount,e=window.levelContent._components[0].allPersonAmount2;cc.game.emit("gamelog_Thinking",h.ShuShuConst.First_Progress,{lv:d.User.getTempData(u.TempData.CURRENT_LEVEL_ID),mode:d.User.getTempData(u.TempData.CURRENT_MODE),queue:d.User.getTempData(u.TempData.CURRENT_LEVEL),type:3,progress:(e-t)/e,sort:c.default.get(l.default.ConfigSuffix)})}var o=d.User.getTempData("levelTime"),i=((new Date).getTime()-o)/1e3;cc.game.emit("gamelog_Thinking",h.ShuShuConst.Level_Return,{lv:d.User.getTempData(u.TempData.CURRENT_LEVEL_ID),mode:d.User.getTempData(u.TempData.CURRENT_MODE),queue:d.User.getTempData(u.TempData.CURRENT_LEVEL),times:i,sort:c.default.get(l.default.ConfigSuffix)}),s.default.loadScene(n.SceneConst.Home)},__decorate([f],e)}(i.default));o.default=g,cc._RF.pop()},{"./BaseUI":"BaseUI","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager","./SceneConst":"SceneConst","./SceneManager":"SceneManager","./ShuShuConst":"ShuShuConst","./UserConst":"UserConst","./UserManager":"UserManager"}],ShareTip:[function(t,e,o){"use strict";cc._RF.push(e,"aa586TAwwZCtof29abkfMS8","ShareTip");var i=t("./BaseUI"),n=t("./EventConst"),r=t("./PlatformConst"),a=t("./UserConst"),s=t("./EventManager"),c=t("./LanguageManager"),l=t("./PlatformManager"),h=t("./PopupManager"),d=t("./TipManager"),u=t("./UserManager"),p=t("./OPPOAndroidAdUtils"),f=t("./OPPOMiniADUtils"),g=t("./VIVOADUtils"),m=t("./XMADUtils"),v=t("./ShuShuConst"),y=cc._decorator,_=y.ccclass,C=y.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text=null,e.iconSp=[],e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("shareBtn",this.clickShare,this),this.addBtnOn("noBtn",this.noBtn,this),cc.game.on("shareSuc_",this.shareSuc_,this),cc.game.on("shareFail_",this.shareFail_,this),this.initView()},e.prototype.onDestroy=function(){cc.game.off("shareSuc_",this.shareSuc_,this),cc.game.off("shareFail_",this.shareFail_,this)},e.prototype.clickShare=function(){cc.game.emit("gamelog_Thinking",v.ShuShuConst.share,{}),l.Platform.share()},e.prototype.noBtn=function(){h.default.hide()},e.prototype.onEnable=function(){l.Platform.is(r.EPlatform.XIAOMI_ANDROID)?(m.XMAD.showLargeFeed(),m.XMAD.showInterstitialFeed_result()):l.Platform.is(r.EPlatform.OPPO_ANDROID)?(p.OPPOAndroidAd.showLargeFeed(),p.OPPOAndroidAd.showInterstitialFeed_result()):l.Platform.is(r.EPlatform.OPPO)?(f.OPPOMiniAD.showLargeFeed(),f.OPPOMiniAD.showInterstitialFeed_result()):l.Platform.is(r.EPlatform.VIVO)&&g.VIVOAD.showCustomAd_1(function(){g.VIVOAD.showCustomAd_2()})},e.prototype.onDisable=function(){l.Platform.is(r.EPlatform.XIAOMI_ANDROID)?m.XMAD.removeLargePicFeed():l.Platform.is(r.EPlatform.OPPO_ANDROID)&&p.OPPOAndroidAd.removeLargePicFeed(),l.Platform.hideNativeAds(),l.Platform.hideCustomAd1(),l.Platform.hideCustomAd2(),l.Platform.hideCustomAd_1(),l.Platform.hideCustomAd_2()},e.prototype.shareSuc_=function(){switch(d.Tip.show(c.default.formatStr("\u5206\u4eab\u6210\u529f")),u.User.getTempData("shareReward")){case"bore":s.Event.emit(n.default.boreBtn);break;case"restart":cc.game.emit("onRestartBtn");break;case"tip":cc.game.emit("tipSuc");break;case"chehui":window.levelContent._components[0].func_reBackOne()}var t=u.User.get(a.UserData.todayShareOrVideoTimes)||0;t+=1,u.User.set(a.UserData.todayShareOrVideoTimes,t),cc.game.emit("updateTodayShareOrVideoTimes"),cc.game.emit("gamelog_Thinking",v.ShuShuConst.shareSuc,{}),h.default.hide()},e.prototype.shareFail_=function(){d.Tip.show(c.default.formatStr("\u5206\u4eab\u5931\u8d25"));var t=u.User.get(a.UserData.todayShareOrVideoTimes)||0;t+=1,u.User.set(a.UserData.todayShareOrVideoTimes,t),cc.game.emit("updateTodayShareOrVideoTimes"),h.default.hide()},e.prototype.initView=function(){switch(u.User.getTempData("shareReward")){case"bore":this.dict.text.getComponent(cc.Label).string="\u6253\u5f00\u4e00\u4e2a\u65b0\u5b54\u4f4d",this.dict.title.getComponent(cc.Label).string="\u6253\u5b54",this.dict.icon.getComponent(cc.Sprite).spriteFrame=this.iconSp[2];break;case"restart":this.dict.text.getComponent(cc.Label).string="\u91cd\u7f6e\u672c\u5c0f\u5173",this.dict.title.getComponent(cc.Label).string="\u91cd\u7f6e",this.dict.icon.getComponent(cc.Sprite).spriteFrame=this.iconSp[0];break;case"tip":this.dict.text.getComponent(cc.Label).string="\u83b7\u5f97\u901a\u5173\u7684\u63d0\u793a",this.dict.title.getComponent(cc.Label).string="\u63d0\u793a",this.dict.icon.getComponent(cc.Sprite).spriteFrame=this.iconSp[1];break;case"chehui":this.dict.text.getComponent(cc.Label).string="\u64a4\u56de\u5230\u4e0a\u4e00\u6b65",this.dict.title.getComponent(cc.Label).string="\u64a4\u56de",this.dict.icon.getComponent(cc.Sprite).spriteFrame=this.iconSp[3]}},__decorate([C([cc.SpriteFrame])],e.prototype,"iconSp",void 0),__decorate([_],e)}(i.default);o.default=b,cc._RF.pop()},{"./BaseUI":"BaseUI","./EventConst":"EventConst","./EventManager":"EventManager","./LanguageManager":"LanguageManager","./OPPOAndroidAdUtils":"OPPOAndroidAdUtils","./OPPOMiniADUtils":"OPPOMiniADUtils","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager","./ShuShuConst":"ShuShuConst","./TipManager":"TipManager","./UserConst":"UserConst","./UserManager":"UserManager","./VIVOADUtils":"VIVOADUtils","./XMADUtils":"XMADUtils"}],ShipRaceSysetem:[function(t,e,o){"use strict";cc._RF.push(e,"18ac00oSwFMy4eJ6zRvl4Nt","ShipRaceSysetem");var i=t("./LocalStorageConst"),n=t("./LocalStorageManager"),r=t("./TimeManager"),a=t("./BmsManager"),s=t("./LanguageManager"),c=t("./PlatformManager"),l=new(function(){function t(){this.startDate=new Date,this.isOpenShip=!1,this.initStartTime=r.default.getCurrentTime(),this.shipLevelTimeArr=[8,12],this.surplusTime=0,this.surplusTimeID=null,this.second=0,this.secondTemp=0}return t.prototype.init=function(){var t=this,e=n.default.get(i.default.shipStartTime)||0,o=n.default.get(i.default.shipLevel)||0,s=this.shipLevelTimeArr[o];s||(s=this.shipLevelTimeArr[1]),e?a.BMS.getTime().then(function(o){o.time&&(console.log("\u670d\u52a1\u5668\u65f6\u95f4"),t.initStartTime=1e3*o.time),setInterval(function(){t.second+=3,t.secondTemp+=3,t.secondTemp>=60&&(t.secondTemp=0,cc.game.emit("updateShipTime"))},3e3),t.surplusTime=36e5*s-(t.initStartTime-e),t.surplusTime>0?(t.isOpenShip=!0,r.default.addEventListener(t.timerFun.bind(t))):(console.log("\u6d4b\u8bd5\u6e05\u6e56\u6751"),t.clear())}):n.default.set(i.default.shipStartTime,0)},t.prototype.timerFun=function(){this.surplusTime-=1e3,this.surplusTime<=0&&(console.log("\u6d4b\u8bd5\u6e05\u6e56\u6751222  timerFun"),this.clear(),console.log("\u5212\u8239\u9636\u6bb5\u7ed3\u675f"),cc.game.emit("shipExpire"),r.default.removeEventListener(this.timerFun.bind(this)))},t.prototype.clear=function(){console.log("clear-clear");var t=n.default.get(i.default.shipLevel)||0;t+=1,n.default.set(i.default.shipLevel,t),n.default.set(i.default.shipStartTime,0),n.default.set(i.default.todayShipExpire,1),n.default.set(i.default.allShipUIPos,null),n.default.set(i.default.forwardTimes,0),n.default.set(i.default.lastTimeHasForward,null),n.default.set(i.default.shipAICount,null),n.default.set(i.default.otherShipForwardTimes,null),n.default.set(i.default.shipAICount,null),n.default.set(i.default.allShipName,null),n.default.set(i.default.allShipRank,null)},t.prototype.countAIRanking=function(){c.Platform.getConfig().rank.includes("haiwai");var t=n.default.get(i.default.allShipRank)||[],e=n.default.get(i.default.allShipName)||[],o=n.default.get(i.default.otherShipForwardTimes)||[0,0,0,0],r=n.default.get(i.default.shipAICount)||0,a=n.default.get(i.default.lastTimeHasForward)||[0,0,0,0],s=n.default.get(i.default.shipStartTime),l=n.default.get(i.default.shipLevel)||0,h=this.shipLevelTimeArr[l];h||(h=this.shipLevelTimeArr[1]);var d=(this.initStartTime+1e3*this.second-s)/1e3,u=h/10*3600,p=Math.floor(d/u)-r;r+=p,console.log("\u8ba1\u7b97\u6b21\u6570",p);var f=4;if(l&&(f=8),p>0){for(var g=0;g<p;g++)for(var m=0;m<a.length;m++){var v=30;a[m]&&(v=0),this.getResByChance(v)?(o[m]+=1,o[m]>=f&&(o[m]=f),a[m]=1):a[m]=0}n.default.set(i.default.otherShipForwardTimes,o),n.default.set(i.default.lastTimeHasForward,a);var y=n.default.get(i.default.forwardTimes)||0,_=this.insertElement(JSON.parse(JSON.stringify(o)),2,y);console.log("\u4e94\u4e2a\u524d\u8fdb\u6b21\u6570",_);for(var C=[],b=0;b<5;b++){var S={};S.pos=b,S.nation=e[b],S.forward=2==b?y:_[b],C.push(S)}for(console.log(C),C.sort(function(t,e){return e.forward-t.forward}),b=0;b<C.length;b++)C[b].rank=b+1;var w=[];for(m=0;m<e.length;m++){var A=e[m];for(b=0;b<C.length;b++)if(A==C[b].nation){w.push(C[b].rank);break}}console.log("\u65e7\u6392\u540d",t),console.log("\u65b0\u6392\u540d",w),n.default.set(i.default.allShipRank,w)}},t.prototype.insertElement=function(t,e,o){return t.splice(e,0,o),t},t.prototype.calculateRank=function(t){t.sort(function(t,e){return e-t});for(var e=[],o=0;o<t.length;o++)0===o||t[o]!==t[o-1]?e.push({value:t[o],rank:o+1}):e[e.length-1].rank++;return e},t.prototype.getResByChance=function(t){var e=100*Math.random(),o=!1;return 0==t?o:(t>=e&&(o=!0),o)},t.prototype.getSurplusTimeStr=function(){var t=this.initStartTime+1e3*this.second,e=n.default.get(i.default.shipLevel)||0,o=this.shipLevelTimeArr[e];o||(o=this.shipLevelTimeArr[1]);var r=36e5*o-(t-(n.default.get(i.default.shipStartTime)||t));if(r>0){var a=Math.floor(r/1e3/3600),c=Math.floor(r/1e3%3600/60);return console.log("\u5212\u8239\u5269\u4f59\u65f6\u95f4:",r,Math.floor(a)+"\u65f6"+Math.floor(c)+"\u5206"),s.default.formatStr("%d\u65f6%d\u5206",Math.floor(a),Math.floor(c))}return""},t}());o.default=l,cc._RF.pop()},{"./BmsManager":"BmsManager","./LanguageManager":"LanguageManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./PlatformManager":"PlatformManager","./TimeManager":"TimeManager"}],ShipRank:[function(t,e,o){"use strict";cc._RF.push(e,"e73f3STQItH+KDy3rX14+57","ShipRank");var i=t("./PopupConst"),n=t("./UserConst"),r=t("./UIBase"),a=t("./LocalStorageConst"),s=t("./LocalStorageManager"),c=t("./MemoryStorageConst"),l=t("./MemoryStorageManager"),h=t("./TimeManager"),d=t("./LanguageManager"),u=t("./PlatformManager"),p=t("./PopupManager"),f=t("./UserManager"),g=t("./ShipRaceSysetem"),m=t("./Utils"),v=cc._decorator,y=v.ccclass,_=v.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rankSF=[],e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.initView()},e.prototype.openShip=function(){l.default.set(c.default.openShipWay,"win"),p.default.show(i.PopupConst.ShipRace2,null,!1)},e.prototype.initView=function(){var t=this,e=s.default.get(a.default.allShipName)||[],o=s.default.get(a.default.allShipRank)||[];u.Platform.getConfig().rank.includes("haiwai"),o.length?(g.default.countAIRanking(),o=s.default.get(a.default.allShipRank)||[]):((o=m.Utils.getRandomItemsFromArray([2,3,4,5],4)).splice(2,0,1),s.default.set(a.default.allShipRank,o));for(var i=0;i<this.dict.rank.children.length;i++)this.dict.rank.children[i].getChildByName("name").getComponent(cc.Label).string=""+e[i],this.dict.rank.children[i].getChildByName("ranking").getComponent(cc.Sprite).spriteFrame=this.rankSF[o[i]-1];var r=f.User.get(n.UserData.useSkinIDList)[0]+1;cc.resources.load("texture/skin/pifu"+r,function(e,o){if(e)return console.log(e);t.dict.mySkin.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o)}),this.dict.shipTime.getComponent(cc.Label).string=g.default.getSurplusTimeStr()},e.prototype.getSurplusTimeStr=function(){var t=h.default.getCurrentTime(),e=864e5*(s.default.get(a.default.vipType)||3)-(t-(s.default.get(a.default.vipStartTime)||t)),o=e/864e5,i=e/36e5%24;return console.log("VIP\u5269\u4f59\u65f6\u95f4:",e,Math.floor(o)+"\u5929"+Math.floor(i)+"\u65f6"),d.default.formatStr("%d\u5929%d\u65f6",Math.floor(o),Math.floor(i))},__decorate([_([cc.SpriteFrame])],e.prototype,"rankSF",void 0),__decorate([y],e)}(r.default);o.default=C,cc._RF.pop()},{"./LanguageManager":"LanguageManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./MemoryStorageConst":"MemoryStorageConst","./MemoryStorageManager":"MemoryStorageManager","./PlatformManager":"PlatformManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./ShipRaceSysetem":"ShipRaceSysetem","./TimeManager":"TimeManager","./UIBase":"UIBase","./UserConst":"UserConst","./UserManager":"UserManager","./Utils":"Utils"}],ShopBtn:[function(t,e,o){"use strict";cc._RF.push(e,"8c5773BAYhLqoF4FQVMdA1z","ShopBtn");var i=t("./PopupConst"),n=t("./PopupManager"),r=t("./UserManager"),a=t("./ShuShuConst"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){var t=r.User.getTempData("currentScene_");t&&cc.game.emit("gamelog_Thinking",a.ShuShuConst.Store_page,{id:t})},e.prototype.clickShop=function(){n.default.show(i.PopupConst.SHOP_NEW)},__decorate([c],e)}(cc.Component));o.default=l,cc._RF.pop()},{"./PopupConst":"PopupConst","./PopupManager":"PopupManager","./ShuShuConst":"ShuShuConst","./UserManager":"UserManager"}],ShopNew:[function(t,e,o){"use strict";cc._RF.push(e,"c25a7Cna3tNv6SCFzDBqpHF","ShopNew");var i=t("./BaseUI"),n=t("./EventConst"),r=t("./PlatformConst"),a=t("./UserConst"),s=t("./EventManager"),c=t("./PlatformManager"),l=t("./UserManager"),h=t("./XMADUtils"),d=t("./VIVOADUtils"),u=t("./PopupManager"),p=t("./PopupConst"),f=t("./ShuShuConst"),g=t("./TipManager"),m=t("./BmsManager"),v=cc._decorator,y=v.ccclass,_=(v.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickBuyID=null,e.canClick=!0,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("btn0",this.btn0.bind(this,"noads"),this),this.addBtnOn("btn1",this.btn0.bind(this,"dakong09"),this),this.addBtnOn("btn2",this.btn0.bind(this,"luosihezi"),this),this.addBtnOn("btn3",this.btn0.bind(this,"noads_plus"),this),this.addBtnOn("restoreBtn0",this.restoreBtn0,this),this.addBtnOn("restoreBtn3",this.restoreBtn3,this),this.addBtnOn("btn4",this.btn4,this),this.initView(),console.log("11111")},e.prototype.restoreBtn0=function(){var t=l.User.getTempData("noads");l.User.getTempData("noads_plus"),t?g.Tip.show("\u5df2\u6062\u590d"):g.Tip.show("\u672a\u8d2d\u4e70")},e.prototype.restoreBtn3=function(){l.User.getTempData("noads"),l.User.getTempData("noads_plus")?g.Tip.show("\u5df2\u6062\u590d"):g.Tip.show("\u672a\u8d2d\u4e70")},e.prototype.btn0=function(t){this.canClick&&(this.canClick=!1,this.clickBuyID=t,console.log("id",t),cc.game.off(this.clickBuyID+"_suc",this.purchaseSuc,this),cc.game.off(this.clickBuyID+"_fail",this.purchaseFail,this),cc.game.on(this.clickBuyID+"_suc",this.purchaseSuc,this),cc.game.on(this.clickBuyID+"_fail",this.purchaseFail,this),c.Platform.purchase(this.clickBuyID))},e.prototype.purchaseSuc=function(t){if(this.canClick=!0,cc.game.off(this.clickBuyID+"_suc",this.purchaseSuc,this),cc.game.off(this.clickBuyID+"_fail",this.purchaseFail,this),console.log(this.clickBuyID+"_suc","\u8d2d\u4e70\u6210\u529f\uff01"),"dakong09"==this.clickBuyID){var e=l.User.get(a.UserData.boreTimes)||0,o=9*Number(t)+e;l.User.set(a.UserData.boreTimes,o);var i=l.User.get(a.UserData.tipTimes)||0,n=2*Number(t)+i;l.User.set(a.UserData.tipTimes,n),g.Tip.show("\u8d2d\u4e70\u6210\u529f\uff01"),cc.game.emit("gamelog_Thinking",f.ShuShuConst.Store,{id:2,pageid:l.User.getTempData("currentScene_")}),m.BMS.saveServerData(c.Platform.getConfig().flag,l.User.get("googleID")||l.User.get("uuid"),a.UserData.boreTimes,String(o)).then(function(){console.log("\u4fdd\u5b58boreTimes\u6210\u529f")}),m.BMS.saveServerData(c.Platform.getConfig().flag,l.User.get("googleID")||l.User.get("uuid"),a.UserData.tipTimes,String(n)).then(function(){console.log("\u4fdd\u5b58tipTimes\u6210\u529f")}),cc.game.emit("updateBoreView"),cc.game.emit("updateTipTimesView")}else if("luosihezi"==this.clickBuyID){var r=l.User.get(a.UserData.screwBoxTimes)||0,s=5*Number(t)+r;l.User.set(a.UserData.screwBoxTimes,s),i=l.User.get(a.UserData.tipTimes)||0,n=2*Number(t)+i,l.User.set(a.UserData.tipTimes,n),g.Tip.show("\u8d2d\u4e70\u6210\u529f\uff01"),cc.game.emit("gamelog_Thinking",f.ShuShuConst.Store,{id:3,pageid:l.User.getTempData("currentScene_")}),m.BMS.saveServerData(c.Platform.getConfig().flag,l.User.get("googleID")||l.User.get("uuid"),a.UserData.screwBoxTimes,String(s)).then(function(){console.log("\u4fdd\u5b58boreTimes\u6210\u529f")}),m.BMS.saveServerData(c.Platform.getConfig().flag,l.User.get("googleID")||l.User.get("uuid"),a.UserData.tipTimes,String(n)).then(function(){console.log("\u4fdd\u5b58tipTimes\u6210\u529f")}),cc.game.emit("updateScrewBoxView"),cc.game.emit("updateTipTimesView")}else"noads"==this.clickBuyID?(c.Platform.setIsBuyRemoveInsert(!0),l.User.setTempData("noads",!0),this.initView(),g.Tip.show("\u8d2d\u4e70\u6210\u529f\uff01"),cc.game.emit("gamelog_Thinking",f.ShuShuConst.Store,{id:1,pageid:l.User.getTempData("currentScene_")})):"noads_plus"==this.clickBuyID&&(o=9+(e=l.User.get(a.UserData.boreTimes)||0),l.User.set(a.UserData.boreTimes,o),l.User.setTempData("noads_plus",!0),this.initView(),c.Platform.setIsBuyRemoveInsert(!0),g.Tip.show("\u8d2d\u4e70\u6210\u529f\uff01"),m.BMS.saveServerData(c.Platform.getConfig().flag,l.User.get("googleID")||l.User.get("uuid"),a.UserData.boreTimes,String(o)).then(function(){console.log("\u4fdd\u5b58boreTimes\u6210\u529f")}),cc.game.emit("gamelog_Thinking",f.ShuShuConst.Store,{id:4,pageid:l.User.getTempData("currentScene_")}),cc.game.emit("updateBoreView"));cc.game.emit("gameRestart")},e.prototype.purchaseFail=function(){this.canClick=!0,cc.game.off(this.clickBuyID+"_suc",this.purchaseSuc,this),cc.game.off(this.clickBuyID+"_fail",this.purchaseFail,this),console.log(this.clickBuyID+"_suc","\u8d2d\u4e70\u5931\u8d25\uff01"),g.Tip.show("\u8d2d\u4e70\u5931\u8d25\uff01")},e.prototype.btn4=function(){this.dict.hint.active=!1,l.User.setTempData("shopNewFirst",1),u.default.show(p.PopupConst.Subscribe)},e.prototype.noBtn=function(){u.default.hide()},e.prototype.onEnable=function(){c.Platform.is(r.EPlatform.XIAOMI_ANDROID)?h.XMAD.showBannerFeed():c.Platform.is(r.EPlatform.VIVO)&&d.VIVOAD.showCustomAd_1(),cc.game.on("yongjiuhezi",this.initView,this)},e.prototype.onDisable=function(){c.Platform.is(r.EPlatform.XIAOMI_ANDROID)&&c.Platform.removeBannerFeed(),c.Platform.hideCustomAd(),c.Platform.hideCustomAd_1(),c.Platform.hideCustomAd_2(),s.Event.emit(n.default.restoreTime),cc.game.off("yongjiuhezi",this.initView,this)},e.prototype.initView=function(){var t=m.BMS.getKey("PackagePrice");this.dict.btn0.children[0].children[0].getComponent(cc.Label).string="$"+t[0],this.dict.btn1.children[0].children[0].getComponent(cc.Label).string="$"+t[1],this.dict.btn2.children[0].children[0].getComponent(cc.Label).string="$"+t[2],this.dict.btn3.children[0].children[0].getComponent(cc.Label).string="$"+t[3],cc.view.getFrameSize().width/cc.view.getFrameSize().height<.5&&(this.dict.bg.height=cc.winSize.height);var e=l.User.getTempData("noads"),o=l.User.getTempData("noads_plus");l.User.getTempData("yongjiuhezi"),e&&(this.dict.btn0Mask.active=!0),o&&(this.dict.btn3Mask.active=!0),s.Event.emit(n.default.StopTimer),l.User.getTempData("shopNewFirst")||(this.dict.hint.active=!0,l.User.setTempData("shopNewFirst",1))},__decorate([y],e)}(i.default));o.default=_,cc._RF.pop()},{"./BaseUI":"BaseUI","./BmsManager":"BmsManager","./EventConst":"EventConst","./EventManager":"EventManager","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./ShuShuConst":"ShuShuConst","./TipManager":"TipManager","./UserConst":"UserConst","./UserManager":"UserManager","./VIVOADUtils":"VIVOADUtils","./XMADUtils":"XMADUtils"}],Shop:[function(t,e,o){"use strict";cc._RF.push(e,"aa832ug9a5DGZ7yfuyws9Iw","Shop");var i=t("./BaseUI"),n=t("./EventConst"),r=t("./PlatformConst"),a=t("./SceneConst"),s=t("./UserConst"),c=t("./EventManager"),l=t("./PlatformManager"),h=t("./PopupManager"),d=t("./SceneManager"),u=t("./UserManager"),p=t("./OPPOAndroidAdUtils"),f=t("./OPPOMiniADUtils"),g=t("./XMADUtils"),m=cc._decorator,v=m.ccclass,y=(m.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("giveUpBtn",this.clickGiveUp,this),this.addBtnOn("videoBtn",this.clickVideo,this),this.initView()},e.prototype.onEnable=function(){l.Platform.is(r.EPlatform.XIAOMI_ANDROID)?g.XMAD.showBannerFeed():l.Platform.is(r.EPlatform.OPPO_ANDROID)?p.OPPOAndroidAd.showLargeFeed():l.Platform.is(r.EPlatform.OPPO)&&f.OPPOMiniAD.showLargeFeed()},e.prototype.onDisable=function(){l.Platform.is(r.EPlatform.OPPO_ANDROID)&&p.OPPOAndroidAd.removeLargePicFeed(),l.Platform.hideNativeAds()},e.prototype.initView=function(){console.log("\u6d4b\u8bd5",d.default.getCurrentScene()),d.default.getCurrentScene()==a.SceneConst.MAIN?cc.game.emit("gamelog","page003"):d.default.getCurrentScene()==a.SceneConst.GAME&&cc.game.emit("gamelog","page004"),1==u.User.getTempData(s.TempData.current_key_type)&&(this.dict.amount.getComponent(cc.Label).string="x3")},e.prototype.clickGiveUp=function(){cc.game.emit("gamelog","btn011"),h.default.hide()},e.prototype.clickVideo=function(){cc.game.emit("gamelog","btn012"),u.User.getTempData(s.TempData.current_key_type)?l.Platform.showRewardAds(function(t){if(0==t){cc.game.emit("gamelog","rewarde_btn010");var e=u.User.get(s.UserData.KEY);u.User.set(s.UserData.KEY,e+3),c.Event.emit(n.default.KEY_EFFECT),u.User.set(s.UserData.hasUseKey,1)}}):l.Platform.showRewardAds(function(t){if(0==t){cc.game.emit("gamelog","rewarde_btn001");var e=u.User.get(s.UserData.KEY);u.User.set(s.UserData.KEY,e+1),c.Event.emit(n.default.KEY_EFFECT)}})},__decorate([v],e)}(i.default));o.default=y,cc._RF.pop()},{"./BaseUI":"BaseUI","./EventConst":"EventConst","./EventManager":"EventManager","./OPPOAndroidAdUtils":"OPPOAndroidAdUtils","./OPPOMiniADUtils":"OPPOMiniADUtils","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager","./SceneConst":"SceneConst","./SceneManager":"SceneManager","./UserConst":"UserConst","./UserManager":"UserManager","./XMADUtils":"XMADUtils"}],Show:[function(t,e,o){"use strict";cc._RF.push(e,"3a0194i7n1O17j63X2C07Ov","Show");var i=function(){function t(){}return t.prototype.show=function(t){window.tt&&window.wxapi.onShow(t)},t}();o.default=new i,cc._RF.pop()},{}],ShuShuConst:[function(t,e,o){"use strict";cc._RF.push(e,"6dae2uFGZhCx4yT8IC+inbr","ShuShuConst"),o.ShuShuConst=void 0,o.ShuShuConst={Level_Page:"Level_Page",Level_Tips:"Level_Tips",Level_Reset:"Level_Reset",Level_Win:"Level_Win",Level_Lose:"Level_Lose",reward_btn:"reward_btn",btn:"btn",page:"page",Level_End:"Level_End",Level_Course:"Level_Course",Level_Pause:"Level_Pause",Level_Return:"Level_Return",Skin_unlock:"Skin_unlock",Skin_get:"Skin_get",Level_queue:"Level_queue",Sign:"Sign",Play:"Play",Level_Unscrew:"Level_Unscrew",Store:"Store",Store_page:"Store_page",share:"share",shareSuc:"shareSuc",Booster_page:"Booster_page",Booster_use:"Booster_use",Gift_page:"Gift_page",Gift_tap:"Gift_tap",Activity_page:"Activity_page",Activity_get:"Activity_get",Level_Progress:"Level_Progress",First_Progress:"First_Progress",Unit:"Unit"},cc._RF.pop()},{}],SignInManager:[function(t,e,o){"use strict";cc._RF.push(e,"2098bxGltFP5IC+VY6fSSaX","SignInManager");var i=new(function(){function t(){this.key="signIn",this.todayIsSigned=!1}return t.prototype.init=function(){console.log("\u521d\u59cb\u5316\u7b7e\u5230\u7cfb\u7edf");var t=this.getItem()||[(new Date).getTime(),0];this.setItem(t),this.isSameDay((new Date).getTime(),t[0])?this.todayIsSigned=!0:this.todayIsSigned=!1},t.prototype.signIn=function(t){if(void 0===t&&(t=1),console.log("\u70b9\u51fb\u7b7e\u5230\u6309\u94ae"),this.todayIsSigned)return console.log("\u4eca\u5929\u5df2\u7ecf\u7b7e\u5230");var e=this.getItem();e[0]=(new Date).getTime(),e[1]+=1,this.setItem(e),console.log("\u7b7e\u5230\u5956\u52b1"),cc.game.emit("signInReward",t)},t.prototype.getItem=function(){var t=cc.sys.localStorage.getItem(this.key)||null;return JSON.parse(t)},t.prototype.setItem=function(t){return cc.sys.localStorage.setItem(this.key,JSON.stringify(t))},t.prototype.isSameDay=function(t,e){var o=new Date(t),i=new Date(e);return o.getDate()===i.getDate()&&o.getMonth()===i.getMonth()&&o.getFullYear()===i.getFullYear()},t}());o.default=i,cc._RF.pop()},{}],SignInOld:[function(t,e,o){"use strict";cc._RF.push(e,"da2f0Fgnu5DCp40L5X8PBc0","SignInOld");var i=t("./BaseUI"),n=t("./EventConst"),r=t("./PlatformConst"),a=t("./PopupConst"),s=t("./UserConst"),c=t("./LocalStorageConst"),l=t("./LocalStorageManager"),h=t("./EventManager"),d=t("./LanguageManager"),u=t("./PlatformManager"),p=t("./PopupManager"),f=t("./TipManager"),g=t("./UserManager"),m=t("./VIVOADUtils"),v=t("./XMADUtils"),y=t("./ShuShuConst"),_=cc._decorator,C=_.ccclass,b=(_.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.amountArr=[100,200,300,500,500,500,900],e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("videoBtn",this.videoBtn,this),this.addBtnOn("receiveBtn",this.receiveBtn,this),this.addBtnOn("cardBtn",this.cardBtn,this),this.initView()},e.prototype.onEnable=function(){u.Platform.is(r.EPlatform.XIAOMI_ANDROID)?v.XMAD.showBannerFeed():u.Platform.is(r.EPlatform.VIVO)?m.VIVOAD.showCustomAd_1():u.Platform.showBanner()},e.prototype.onDisable=function(){u.Platform.is(r.EPlatform.XIAOMI_ANDROID)&&u.Platform.removeBannerFeed(),u.Platform.hideCustomAd(),u.Platform.hideCustomAd_1(),u.Platform.hideCustomAd_2()},e.prototype.initView=function(){var t=this,e=g.User.get(s.UserData.signInDays)||0,o=g.User.get(s.UserData.todaySignIn)||0;g.User.set(s.UserData.signInDays,e),g.User.set(s.UserData.todaySignIn,o),this.dict.content2.children.forEach(function(e,o){e.getChildByName("day").getComponent(cc.Label).string=d.default.formatStr("\u7b2c%d\u5929",o+1),e.getChildByName("amount").getComponent(cc.Label).string=""+t.amountArr[o],e.getChildByName("mask").active=!1,e.getChildByName("gou").active=!1,e.name=""+o,e.on(cc.Node.EventType.TOUCH_START,t.clickSign,t)});for(var i=0;i<e;i++){var n=this.dict.content2.children[i];n.getChildByName("mask").active=!0,n.getChildByName("gou").active=!0}var r=l.default.get(c.default.todayReceiveCard)||0;this.dict.cardBtn.active=!r,u.Platform.getConfig().hasPurchase||(this.dict.cardBtn.active=!1)},e.prototype.clickSign=function(){},e.prototype.noBtn=function(){p.default.hide()},e.prototype.videoBtn=function(){var t=this,e=g.User.get(s.UserData.todaySignIn)||0,o=g.User.get(s.UserData.signInDays)||0;return e?f.Tip.show("\u4eca\u5929\u5df2\u7b7e\u5230"):o>=7?f.Tip.show("\u5df2\u7ecf\u5168\u90e8\u7b7e\u5230"):void u.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("gamelog_Thinking",y.ShuShuConst.reward_btn,{id:"015",lv:g.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:g.User.getTempData(s.TempData.CURRENT_MODE)}),t.receiveBtn(2))})},e.prototype.cardBtn=function(){var t=this;u.Platform.showRewardAds(function(e){0==e&&(t.cardReward(1),l.default.set(c.default.todayReceiveCard,1),t.dict.cardBtn.active=!1,cc.game.emit("gamelog_Thinking",y.ShuShuConst.reward_btn,{id:"078",lv:g.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:g.User.getTempData(s.TempData.CURRENT_MODE)}))})},e.prototype.cardReward=function(t){var e=(l.default.get(c.default.cardAmount)||0)+t;l.default.set(c.default.cardAmount,e),f.Tip.show(d.default.formatStr("\u4e07\u80fd\u5361x%d",t))},e.prototype.receiveBtn=function(t){void 0===t&&(t=1);var e=g.User.get(s.UserData.todaySignIn)||0,o=g.User.get(s.UserData.signInDays)||0;if(e)return f.Tip.show(d.default.formatStr("\u4eca\u5929\u5df2\u7b7e\u5230"));if(o>=7)return f.Tip.show("\u5df2\u7ecf\u5168\u90e8\u7b7e\u5230");g.User.setTempData(s.TempData.isFirstBack,!1),g.User.setTempData(s.TempData.isFirst,!1),f.Tip.show(d.default.formatStr("\u7b7e\u5230\u6210\u529f\uff01")),cc.game.emit("signInHint"),g.User.set(s.UserData.signInDays,o+1),g.User.set(s.UserData.todaySignIn,1);var i=g.User.get(s.UserData.getLockSkinList),r=i[0];if(cc.game.emit("gamelog_Thinking",y.ShuShuConst.Sign,{type:t-1,id:o+1}),o+1==2){var c=9;r.includes(c)||(i[0].push(c),cc.game.emit("gamelog_Thinking",y.ShuShuConst.Skin_unlock,{mode:0,id:c})),g.User.set(s.UserData.getLockSkinList,i),g.User.setTempData("chooseSkinPage",0),g.User.setTempData("chooseSkin",c+1),p.default.show(a.PopupConst.GetSkin)}else o+1==7&&(c=10,r.includes(c)||(i[0].push(c),cc.game.emit("gamelog_Thinking",y.ShuShuConst.Skin_unlock,{mode:0,id:c})),g.User.set(s.UserData.getLockSkinList,i),g.User.setTempData("chooseSkinPage",0),g.User.setTempData("chooseSkin",c+1),p.default.show(a.PopupConst.GetSkin));var l=g.User.get("coin"),u=this.amountArr[o]*t;g.User.set("coin",l+u),h.Event.emit(n.default.COIN_EFFECT),this.initView()},__decorate([C],e)}(i.default));o.default=b,cc._RF.pop()},{"./BaseUI":"BaseUI","./EventConst":"EventConst","./EventManager":"EventManager","./LanguageManager":"LanguageManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./ShuShuConst":"ShuShuConst","./TipManager":"TipManager","./UserConst":"UserConst","./UserManager":"UserManager","./VIVOADUtils":"VIVOADUtils","./XMADUtils":"XMADUtils"}],SignIn:[function(t,e,o){"use strict";cc._RF.push(e,"2b75dwCaeZBbL0ncc3JIOT8","SignIn");var i=t("./PlatformConst"),n=t("./UserConst"),r=t("./LocalStorageConst"),a=t("./LocalStorageManager"),s=t("./LanguageManager"),c=t("./PlatformManager"),l=t("./PopupManager"),h=t("./TipManager"),d=t("./UserManager"),u=t("./VIVOADUtils"),p=t("./XMADUtils"),f=t("./ShuShuConst"),g=t("./UIBase"),m=t("./ConfigManager"),v=t("./ConfigConst"),y=t("./Utils"),_=t("./AssetManager"),C=cc._decorator,b=C.ccclass,S=(C.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this);var e=a.default.get(r.default.todaySignIn)||0,o=a.default.get(r.default.todaySignInVideo)||0,i=a.default.get(r.default.signInDays)||0;a.default.set(r.default.todaySignIn,e),a.default.set(r.default.todaySignInVideo,o),a.default.set(r.default.signInDays,i),this.localStorageUIData[r.default.signInDays]=this.updateSignInDays.bind(this),this.localStorageUIData[r.default.todaySignIn]=this.updateTodaySignIn.bind(this),this.localStorageUIData[r.default.todaySignInVideo]=this.updateTodaySignInVideo.bind(this),this.localStorageUIData[r.default.todayReceiveCard]=this.updateTodayReceiveCard.bind(this),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("videoBtn",this.videoBtn,this),this.addBtnOn("receiveBtn",this.receiveBtn,this),this.addBtnOn("cardBtn",this.cardBtn,this)},e.prototype.onEnable=function(){c.Platform.is(i.EPlatform.XIAOMI_ANDROID)?p.XMAD.showBannerFeed():c.Platform.is(i.EPlatform.VIVO)&&u.VIVOAD.showCustomAd_1()},e.prototype.onDisable=function(){c.Platform.is(i.EPlatform.XIAOMI_ANDROID),c.Platform.hideCustomAd(),c.Platform.hideCustomAd_1(),c.Platform.hideCustomAd_2()},e.prototype.updateTodayReceiveCard=function(){this.dict.cardBtn.active=!1},e.prototype.cardBtn=function(){var t=this;if(a.default.get(r.default.todayReceiveCard))return h.Tip.show("\u4eca\u65e5\u5df2\u9886\u53d6");c.Platform.showRewardAds(function(e){0==e&&(t.cardReward(1),a.default.set(r.default.todayReceiveCard,1),cc.game.emit("gamelog_Thinking",f.ShuShuConst.reward_btn,{id:"078",lv:d.User.getTempData(n.TempData.CURRENT_LEVEL_ID),mode:d.User.getTempData(n.TempData.CURRENT_MODE)}))})},e.prototype.cardReward=function(t){var e=(a.default.get(r.default.cardAmount)||0)+t;a.default.set(r.default.cardAmount,e),h.Tip.show(s.default.formatStr("\u4e07\u80fd\u5361x%d",t))},e.prototype.updateTodaySignIn=function(){},e.prototype.updateTodaySignInVideo=function(){},e.prototype.updateSignInDays=function(t){return __awaiter(this,void 0,void 0,function(){var e,o,i;return __generator(this,function(n){switch(n.label){case 0:return[4,m.Config.get(v.ConfigConst.SignIn)];case 1:for(e=n.sent(),this.dict.content2.children.forEach(function(t,o){var i=y.Utils.paramObj(e[o].reward);t.getChildByName("day").getComponent(cc.Label).string=s.default.formatStr("\u7b2c%d\u5929",o+1),6==o?(t.getChildByName("coin").getComponent(cc.Label).string="x"+i.coin,t.getChildByName("dragonBall").getComponent(cc.Label).string="x"+i.dragonBall):(i.coin&&(t.getChildByName("amount").getComponent(cc.Label).string="x"+i.coin),i.slowDown&&(t.getChildByName("amount").getComponent(cc.Label).string="x"+i.slowDown),i.sortAmount&&(t.getChildByName("amount").getComponent(cc.Label).string="x"+i.sortAmount),i.unlockPos&&(t.getChildByName("amount").getComponent(cc.Label).string="x"+i.unlockPos),_.default.getRes("gameBundle","texture/signIn/"+e[o].icon,cc.Texture2D).then(function(i){t.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(i),"unlockPos"==e[o].icon&&(t.getChildByName("icon").scale=.4)})),t.getChildByName("mask").active=!1,t.getChildByName("gou").active=!1,t.name=""+o}),console.log("val",t),o=0;o<t;o++)console.log("index",o,t),(i=this.dict.content2.children[o]).getChildByName("mask").active=!0,i.getChildByName("gou").active=!0,console.log("mask",i.getChildByName("mask").active),console.log("gou",i.getChildByName("gou").active);return[2]}})})},e.prototype.noBtn=function(){l.default.hide()},e.prototype.videoBtn=function(){var t=this,e=a.default.get(r.default.todaySignIn)||0,o=a.default.get(r.default.signInDays)||0;return e?h.Tip.show(s.default.formatStr("\u4eca\u5929\u5df2\u7b7e\u5230")):o>=7?h.Tip.show(s.default.formatStr("\u5df2\u7ecf\u5168\u90e8\u7b7e\u5230")):void c.Platform.showRewardAds(function(e){0==e&&(cc.game.emit("gamelog_Thinking",f.ShuShuConst.reward_btn,{id:"015",lv:d.User.getTempData(n.TempData.CURRENT_LEVEL_ID),mode:d.User.getTempData(n.TempData.CURRENT_MODE)}),t.receiveBtn(2))})},e.prototype.receiveBtn=function(t){return void 0===t&&(t=1),__awaiter(this,void 0,void 0,function(){var e,o,i,c,l,u;return __generator(this,function(p){switch(p.label){case 0:return e=a.default.get(r.default.todaySignIn)||0,o=a.default.get(r.default.signInDays)||0,e?[2,h.Tip.show(s.default.formatStr("\u4eca\u5929\u5df2\u7b7e\u5230"))]:o>=7?[2,h.Tip.show("\u5df2\u7ecf\u5168\u90e8\u7b7e\u5230")]:(d.User.setTempData(n.TempData.isFirstBack,!1),d.User.setTempData(n.TempData.isFirst,!1),h.Tip.show(s.default.formatStr("\u7b7e\u5230\u6210\u529f\uff01")),cc.game.emit("signInHint"),a.default.set(r.default.signInDays,o+1),a.default.set(r.default.todaySignIn,1),cc.game.emit("gamelog_Thinking",f.ShuShuConst.Sign,{type:t-1,id:o+1}),[4,m.Config.get(v.ConfigConst.SignIn)]);case 1:for(l in i=p.sent(),c=y.Utils.paramObj(i[o].reward))u=a.default.get(""+l)||0,a.default.set(""+l,u+c[l]*t);return[2]}})})},__decorate([b],e)}(g.default));o.default=S,cc._RF.pop()},{"./AssetManager":"AssetManager","./ConfigConst":"ConfigConst","./ConfigManager":"ConfigManager","./LanguageManager":"LanguageManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager","./ShuShuConst":"ShuShuConst","./TipManager":"TipManager","./UIBase":"UIBase","./UserConst":"UserConst","./UserManager":"UserManager","./Utils":"Utils","./VIVOADUtils":"VIVOADUtils","./XMADUtils":"XMADUtils"}],SkinGetWay:[function(t,e,o){"use strict";cc._RF.push(e,"2009afHRkBODIsUGZI9F9aX","SkinGetWay");var i=t("./BaseUI"),n=t("./ConfigConst"),r=t("./EventConst"),a=t("./ConfigManager"),s=t("./EventManager"),c=t("./LanguageManager"),l=t("./PopupManager"),h=t("./UserManager"),d=cc._decorator,u=d.ccclass,p=(d.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("noBtn2",this.noBtn,this),this.updateView()},e.prototype.noBtn=function(){l.default.hide()},e.prototype.onEnable=function(){s.Event.on(r.default.update_use_skin,this.updateView,this)},e.prototype.onDisable=function(){s.Event.off(r.default.update_use_skin,this.updateView,this)},e.prototype.updateView=function(){var t=this,e=h.User.getTempData("chooseSkin")||0;cc.resources.load("texture/skin/pifu"+e,function(e,o){if(e)return console.log(e);t.dict.img.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o)}),a.Config.get(n.ConfigConst.Skin0).then(function(o){var i=o.find(function(t){return t.id==e}).unlock;if(i.includes("\u6253\u87ba\u4e1d\u6a21\u5f0f\u7d2f\u8ba1\u901a\u8fc7")){var n=i.replace(/\u6253\u87ba\u4e1d\u6a21\u5f0f\u7d2f\u8ba1\u901a\u8fc7/g,"");n=n.replace(/\u5173/g,""),t.dict.describe.getComponent(cc.Label).string=c.default.formatStr("\u6253\u87ba\u4e1d\u6a21\u5f0f\u7d2f\u8ba1\u901a\u8fc7%d\u5173",Number(n))}else t.dict.describe.getComponent(cc.Label).string=i})},__decorate([u],e)}(i.default));o.default=p,cc._RF.pop()},{"./BaseUI":"BaseUI","./ConfigConst":"ConfigConst","./ConfigManager":"ConfigManager","./EventConst":"EventConst","./EventManager":"EventManager","./LanguageManager":"LanguageManager","./PopupManager":"PopupManager","./UserManager":"UserManager"}],SkinItem:[function(t,e,o){"use strict";var i;cc._RF.push(e,"a6774MyXflH5IE8UU48BiFO","SkinItem");var n,r=t("./UserManager"),a=t("./UIBase"),s=t("./AssetManager"),c=t("./ConfigManager"),l=t("./ConfigConst"),h=t("./PlatformManager"),d=t("./LocalStorageManager"),u=t("./LocalStorageConst"),p=t("./TipManager"),f=cc._decorator,g=f.ccclass;f.property,(n=i||(i={}))[n.lockByRole=0]="lockByRole",n[n.lockByCoin=1]="lockByCoin",n[n.lockByVideo=2]="lockByVideo",n[n.unlockNoUse=3]="unlockNoUse",n[n.unlockUse=4]="unlockUse";var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.param=null,e.state=i.lockByRole,e.starAmount=0,e.skinType=0,e.cost=null,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this)},e.prototype.setData=function(t,e){void 0===e&&(e=0),this.param=t,this.node.zIndex=this.param.index,this.state=this.param.eState,this.skinType=e,this.refresh()},e.prototype.refresh=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,n,r;return __generator(this,function(a){switch(a.label){case 0:return t=this.param.skinID,this.dict.lockByRole.active=!1,this.dict.lockByCoin.active=!1,this.dict.lockByVideo.active=!1,this.dict.unlockNoUse.active=!1,this.dict.unlockUse.active=!1,e=0==this.skinType?"texture/skin/role"+t:"texture/skin/dragon"+t,[4,s.default.getRes("gameBundle",e,cc.Texture2D)];case 1:return o=a.sent(),this.dict.icon.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o),0!=this.skinType?[3,3]:[4,c.Config.get(l.ConfigConst.Skin)];case 2:return n=a.sent(),[3,5];case 3:return[4,c.Config.get(l.ConfigConst.Dragon)];case 4:n=a.sent(),a.label=5;case 5:switch(this.dict.name.getComponent(cc.Label).string=n.find(function(e){return e.id-1==t}).skinName,this.state){case i.lockByRole:this.dict.lockByRole.active=!0,this.cost=n.find(function(e){return e.id-1==t}).unlock,this.dict.roleLevel.getComponent(cc.Label).string="\u89d2\u8272"+this.cost+"\u7ea7\u89e3\u9501";break;case i.lockByCoin:this.dict.lockByCoin.active=!0,this.cost=n.find(function(e){return e.id-1==t}).unlock,this.dict.coinText.getComponent(cc.Label).string=this.cost+"";break;case i.lockByVideo:(r=d.default.get(u.default.SkinUnlockVideo)||{})[t]||(r[t]=0),this.dict.lockByVideo.active=!0,this.cost=n.find(function(e){return e.id-1==t}).unlock,this.dict.videoText.getComponent(cc.Label).string=r[t]+"/"+this.cost;break;case i.unlockNoUse:this.dict.unlockNoUse.active=!0;break;case i.unlockUse:this.dict.unlockUse.active=!0}return[2]}})})},e.prototype.clickEnter=function(){var t=this;r.User.setTempData("chooseSkinPage",0),r.User.setTempData("chooseSkin",this.param.skinID);var e=d.default.get(u.default.SkinList)||{};e[0]||(e[0]=[0]),e[1]||(e[1]=[0]);var o=d.default.get(u.default.UseSkin)||{};switch(o[0]||(o[0]=0),o[1]||(o[1]=0),this.state){case i.lockByRole:break;case i.lockByCoin:var n=d.default.get(u.default.Coin)||0;if(!(n>=this.cost))return p.Tip.show("\u91d1\u5e01\u4e0d\u8db3\uff01");n-=this.cost,e[this.skinType].push(this.param.skinID),d.default.set(u.default.Coin,n);break;case i.lockByVideo:h.Platform.showRewardAds(function(o){if(0==o){var i=d.default.get(u.default.SkinUnlockVideo)||{};i[t.param.skinID]||(i[t.param.skinID]=0),i[t.param.skinID]+=1,i[t.param.skinID]>=t.cost&&e[t.skinType].push(t.param.skinID),d.default.set(u.default.SkinUnlockVideo,i)}});break;case i.unlockNoUse:o[this.skinType]=this.param.skinID;break;case i.unlockUse:}d.default.set(u.default.SkinList,e),d.default.set(u.default.UseSkin,o),this.refresh()},e.state=i,__decorate([g],e)}(a.default);o.default=m,cc._RF.pop()},{"./AssetManager":"AssetManager","./ConfigConst":"ConfigConst","./ConfigManager":"ConfigManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./PlatformManager":"PlatformManager","./TipManager":"TipManager","./UIBase":"UIBase","./UserManager":"UserManager"}],Skin:[function(t,e,o){"use strict";cc._RF.push(e,"83d752RgrlAj7pcejqS8Gpp","Skin");var i=t("./RecycleScroll"),n=t("./ConfigConst"),r=t("./EventConst"),a=t("./ConfigManager"),s=t("./EventManager"),c=t("./PopupManager"),l=t("./SkinItem"),h=t("./UIBase"),d=t("./LocalStorageConst"),u=t("./LocalStorageManager"),p=cc._decorator,f=p.ccclass,g=p.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scroll=null,e.scroll1=null,e.scroll2=null,e.currentPage=0,e.currentChooseID=0,e.skinStateList=[],e.skin_sort=[],e.skinStateList1=[],e.skinStateList2=[],e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.node.setContentSize(cc.winSize);var e=u.default.get(d.default.SkinList)||{};e[0]||(e[0]=[0]),e[1]||(e[1]=[0]);var o=u.default.get(d.default.UseSkin)||{};o[0]||(o[0]=0),o[1]||(o[1]=0),u.default.set(d.default.SkinList,e),u.default.set(d.default.UseSkin,o),this.localStorageUIData[d.default.SkinList]=this.updateSkinList.bind(this),this.addBtnOn("noBtn",this.noBtn,this);for(var i=0;i<this.dict.list.children.length;i++){var n=this.dict.list.children[i];n.name=""+i,n.on(cc.Node.EventType.TOUCH_START,this.clickColorBtn,this)}this.initView()},e.prototype.updateSkinList=function(){this.updateView()},e.prototype.clickColorBtn=function(t){var e=t.target,o=Number(e.name);o!=this.currentPage&&(this.currentPage=o,this.initView())},e.prototype.initView=function(){var t=this;this.initBtnView(),this.initContentView(),this.scheduleOnce(function(){t.updateView()},0)},e.prototype.initBtnView=function(){for(var t=this,e=0;e<this.dict.list.children.length;e++){var o=this.dict.list.children[e];o.getComponent(cc.Sprite).enabled=!1,o.children[1].color=cc.Color.WHITE,o.getChildByName("mask").active=!0}this.scheduleOnce(function(){t.dict.list.children[t.currentPage].getComponent(cc.Sprite).enabled=!0,t.dict.list.children[t.currentPage].children[1].color=(new cc.Color).fromHEX("#ae6534"),t.dict.list.children[t.currentPage].getChildByName("mask").active=!1},0)},e.prototype.initContentView=function(){this.scroll.node.active=!1,this.scroll1.node.active=!1,this.scroll2.node.active=!1,0==this.currentPage?this.scroll.node.active=!0:1==this.currentPage?this.scroll1.node.active=!0:this.scroll2.node.active=!0},e.prototype.noBtn=function(){c.default.hide()},e.prototype.onEnable=function(){s.Event.on(r.default.update_use_skin,this.updateView,this)},e.prototype.onDisable=function(){s.Event.off(r.default.update_use_skin,this.updateView,this)},e.prototype.updateView=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,i=this;return __generator(this,function(r){switch(r.label){case 0:return t=u.default.get(d.default.SkinList)||{},e=u.default.get(d.default.UseSkin)||{},this.currentChooseID=e[this.currentPage],this.skin_sort=[],a.Config.get(n.ConfigConst.Skin).then(function(o){i.skinStateList=new Array(o.length).fill(0),i.skinStateList=i.skinStateList.map(function(n,r){if(t[i.currentPage].includes(o[r].id-1))return e[i.currentPage]==o[r].id-1?l.default.state.unlockUse:l.default.state.unlockNoUse;switch(o[r].type){case 1:return l.default.state.lockByRole;case 2:return l.default.state.lockByCoin;case 3:return l.default.state.lockByVideo}}),o.forEach(function(t,e){i.skin_sort.push({skinID:t.id-1,skinStateList:i.skinStateList[e]})}),i.scroll.onItemRender=i.onItemRender.bind(i),i.scroll.onItemClicked=i.onItemClicked.bind(i),i.scroll.numItems=i.skinStateList.length}),[4,a.Config.get(n.ConfigConst.Dragon)];case 1:return o=r.sent(),this.skinStateList1=new Array(o.length).fill(0),this.skinStateList1=this.skinStateList1.map(function(i,n){if(t[1].includes(o[n].id-1))return e[1]==o[n].id-1?l.default.state.unlockUse:l.default.state.unlockNoUse;switch(o[n].type){case 1:return l.default.state.lockByRole;case 2:return l.default.state.lockByCoin;case 3:return l.default.state.lockByVideo}}),this.scroll1.onItemRender=this.onItemRender1.bind(this),this.scroll1.onItemClicked=this.onItemClicked.bind(this),this.scroll1.numItems=this.skinStateList1.length,[2]}})})},e.prototype.onItemRender=function(t,e){var o=e.getComponent(l.default),i={index:t,eState:this.skin_sort[t].skinStateList,skinID:this.skin_sort[t].skinID};o.setData(i,0)},e.prototype.onItemRender1=function(t,e){var o=e.getComponent(l.default),i=(l.default.state,{index:t,skinID:t,eState:this.skinStateList1[t]});o.setData(i,1)},e.prototype.onItemRender2=function(){},e.prototype.onItemClicked=function(){},__decorate([g(i.default)],e.prototype,"scroll",void 0),__decorate([g(i.default)],e.prototype,"scroll1",void 0),__decorate([g(i.default)],e.prototype,"scroll2",void 0),__decorate([f],e)}(h.default);o.default=m,cc._RF.pop()},{"./ConfigConst":"ConfigConst","./ConfigManager":"ConfigManager","./EventConst":"EventConst","./EventManager":"EventManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./PopupManager":"PopupManager","./RecycleScroll":"RecycleScroll","./SkinItem":"SkinItem","./UIBase":"UIBase"}],Skip:[function(t,e,o){"use strict";cc._RF.push(e,"af7176qHlFCh4WEbidkqF35","Skip");var i=t("./BaseUI"),n=t("./EventConst"),r=t("./PlatformConst"),a=t("./UserConst"),s=t("./EventManager"),c=t("./PlatformManager"),l=t("./PopupManager"),h=t("./UserManager"),d=t("./OPPOAndroidAdUtils"),u=t("./OPPOMiniADUtils"),p=t("./XMADUtils"),f=cc._decorator,g=f.ccclass,m=(f.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("giveUpBtn",this.clickGiveUp,this),this.addBtnOn("defineBtn",this.clickDefine,this)},e.prototype.onEnable=function(){c.Platform.is(r.EPlatform.XIAOMI_ANDROID)?p.XMAD.showBannerFeed():c.Platform.is(r.EPlatform.OPPO_ANDROID)?d.OPPOAndroidAd.showLargeFeed():c.Platform.is(r.EPlatform.OPPO)&&u.OPPOMiniAD.showLargeFeed()},e.prototype.onDisable=function(){c.Platform.is(r.EPlatform.OPPO_ANDROID)&&d.OPPOAndroidAd.removeLargePicFeed(),c.Platform.hideNativeAds()},e.prototype.clickGiveUp=function(){l.default.hide()},e.prototype.clickDefine=function(){var t=h.User.get(a.UserData.KEY)-2;t<=0&&(t=0),h.User.set(a.UserData.KEY,t),s.Event.emit(n.default.KEY_UPDATE),h.User.setTempData("isNeedInsert",!1),h.User.getTempData("cheats")&&h.User.setTempData("isNeedInsert",!0),setTimeout(function(){cc.game.emit("game_success2")},300),l.default.hide()},__decorate([g],e)}(i.default));o.default=m,cc._RF.pop()},{"./BaseUI":"BaseUI","./EventConst":"EventConst","./EventManager":"EventManager","./OPPOAndroidAdUtils":"OPPOAndroidAdUtils","./OPPOMiniADUtils":"OPPOMiniADUtils","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager","./UserConst":"UserConst","./UserManager":"UserManager","./XMADUtils":"XMADUtils"}],SpecialGift:[function(t,e,o){"use strict";cc._RF.push(e,"1f846/9dqFJBLapQhgbWK26","SpecialGift");var i=t("./UIBase"),n=t("./PopupManager"),r=t("./PaymentSystem"),a=t("./ShuShuConst"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.node.setContentSize(cc.winSize),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("buyBtn",this.buyBtn,this),cc.game.emit("gamelog_Thinking",a.ShuShuConst.Gift_page,{id:2}),r.default.getGoodsLocalPrice(this.dict.price,"special_pack")},e.prototype.onEnable=function(){cc.game.on("special_pack",this.specialGift,this)},e.prototype.onDisable=function(){cc.game.off("special_pack",this.specialGift,this)},e.prototype.specialGift=function(){n.default.hide()},e.prototype.noBtn=function(){n.default.hide()},e.prototype.buyBtn=function(){r.default.clickBuy("special_pack")},__decorate([c],e)}(i.default));o.default=l,cc._RF.pop()},{"./PaymentSystem":"PaymentSystem","./PopupManager":"PopupManager","./ShuShuConst":"ShuShuConst","./UIBase":"UIBase"}],Stars:[function(t,e,o){"use strict";cc._RF.push(e,"70ea3YbDsJECIwwtARBmHxo","Stars");var i=cc._decorator,n=i.ccclass,r=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mask=null,e.starNum=0,e.canMark=!0,e.isTouch=!1,e}return __extends(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this)},e.prototype.onTouchStart=function(t){this.isTouch=!0,this.canMark&&this.checkStar(this.node.convertToNodeSpaceAR(t.getLocation()))},e.prototype.onTouchMove=function(t){this.canMark&&this.checkStar(this.node.convertToNodeSpaceAR(t.getLocation()))},e.prototype.setCanMark=function(t){this.canMark=t},e.prototype.checkStar=function(t){var e=t.x+this.node.width/2;this.mask.node.width=e;var o=this.node.width/5;this.starNum=e/o,this.starNum=Math.ceil(this.starNum),this.starNum<1?this.starNum=1:this.starNum=this.starNum},e.prototype.onDestroy=function(){this.node.targetOff(this)},__decorate([r(cc.Mask)],e.prototype,"mask",void 0),__decorate([n],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],StorageSync:[function(t,e,o){"use strict";cc._RF.push(e,"e8a40W5KeJDTL/az7nUfbxg","StorageSync");var i=function(){function t(){}return t.getItem=function(t){if(window.tt)return window.wxapi.getStorageSync(t)},t.setItem=function(t,e){if(window.tt)return window.wxapi.setStorageSync(t,e)},t.removeItem=function(t){if(window.tt)return window.wxapi.removeStorageSync(t)},t}();o.default=i,cc._RF.pop()},{}],SupervalueBtn:[function(t,e,o){"use strict";cc._RF.push(e,"14446SbIvVEhYdQ55icLW8O","SupervalueBtn");var i=t("./PopupConst"),n=t("./UIBase"),r=t("./LocalStorageConst"),a=t("./LocalStorageManager"),s=t("./PlatformManager"),c=t("./PopupManager"),l=t("./PaymentSystem"),h=cc._decorator,d=h.ccclass,u=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.localStorageUIData[r.default.value_pack]=this.value_pack.bind(this),this.node.on(cc.Node.EventType.TOUCH_END,this.newHandBtn,this),this.dict.btn_04.children[0].getComponent(cc.Label).string="$1.99",l.default.getGoodsLocalPrice(this.dict.btn_04.children[0],"value_pack")},e.prototype.value_pack=function(t){var e=a.default.get(r.default.starter_pack)||0;this.node.active=!(!e||t),s.Platform.getConfig().hasPurchase||(this.node.active=!1)},e.prototype.newHandBtn=function(){l.default.clickBuy("value_pack")},e.prototype.clickSelf=function(){c.default.show(i.PopupConst.UniversalCard)},__decorate([d],e)}(n.default));o.default=u,cc._RF.pop()},{"./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./PaymentSystem":"PaymentSystem","./PlatformManager":"PlatformManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./UIBase":"UIBase"}],Supervalue:[function(t,e,o){"use strict";cc._RF.push(e,"1d6e7A8nFRI2bGGhWqk4g9q","Supervalue");var i=t("./UIBase"),n=t("./PopupManager"),r=t("./PaymentSystem"),a=t("./ShuShuConst"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.node.setContentSize(cc.winSize),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("buyBtn",this.buyBtn,this),cc.game.emit("gamelog_Thinking",a.ShuShuConst.Gift_page,{id:2}),r.default.getGoodsLocalPrice(this.dict.price,"value_pack")},e.prototype.onEnable=function(){cc.game.on("special_pack",this.specialGift,this)},e.prototype.onDisable=function(){cc.game.off("special_pack",this.specialGift,this)},e.prototype.specialGift=function(){n.default.hide()},e.prototype.noBtn=function(){n.default.hide()},e.prototype.buyBtn=function(){r.default.clickBuy("value_pack")},__decorate([c],e)}(i.default));o.default=l,cc._RF.pop()},{"./PaymentSystem":"PaymentSystem","./PopupManager":"PopupManager","./ShuShuConst":"ShuShuConst","./UIBase":"UIBase"}],TTRecommendGameCard:[function(t,e,o){"use strict";cc._RF.push(e,"1007aNxFi5NRoUyNCt/YIsq","TTRecommendGameCard");var i=t("./PlatformManager"),n=t("./UserManager"),r=t("./MD5Type"),a=window.tt,s="https://game.zuiqiangyingyu.net/",c=new(function(){function t(){}return t.prototype.init=function(){},t.prototype.subscribe=function(){if(a&&["Douyin","douyin_lite"].some(function(t){return t==window.tt.getSystemInfoSync().appName})){if(console.log("\u662f\u6296\u97f3\uff0c\u53d1\u8d77\u8ba2\u9605",a.requestSubscribeMessage),!a.requestSubscribeMessage)return;var t="MSG1459780748257277550466177960250",e=this;a.requestSubscribeMessage({tmplIds:[t],success:function(o){console.log("## \u8ba2\u9605\u6210\u529f",JSON.stringify(o));var i={},r=n.User.get("ttOpenid");"accept"==o[t]?(console.log("## \u793c\u5305\u9886\u53d6-accept"),i={MSG1459780748257277550466177960250:"accept"},n.User.get(t)||e.subscMessage(r,JSON.stringify(i)).then(function(e){n.User.set(t,!0),console.log("## \u4e0a\u62a5\u5934\u6761\u8ba2\u9605",e)})):"reject"==o[t]?(console.log("## \u793c\u5305\u9886\u53d6-reject"),i={MSG1459780748257277550466177960250:"reject"},n.User.get(t)||e.subscMessage(r,JSON.stringify(i)).then(function(e){n.User.set(t,!0),console.log("## \u4e0a\u62a5\u5934\u6761\u8ba2\u9605",e)})):"ban"==o[t]?console.log("## \u793c\u5305\u9886\u53d6-ban"):"fail"==o[t]&&console.log("## \u793c\u5305\u9886\u53d6-fail")},complete:function(t){console.log("## \u8ba2\u9605\u5b8c\u6210",JSON.stringify(t))},fail:function(t){console.log("## \u8ba2\u9605\u5931\u8d25",JSON.stringify(t))}})}},t.prototype.subscMessage=function(t,e){var o=this;return new Promise(function(n){return __awaiter(o,void 0,void 0,function(){var o,r,c;return __generator(this,function(l){switch(l.label){case 0:return o={app_name:i.Platform.getConfig().flag,open_id:t,template_ids:e},[4,this.post(s+"common/toutiao/add-user-subsc-message",o)];case 1:r=l.sent();try{c=JSON.parse(r),n(c.data)}catch(a){n({})}return[2]}})})})},t.prototype.ttLogin=function(t){var e=this;a&&a.login({force:!0,success:function(o){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(){return console.log("\u767b\u5f55\u6210\u529f",JSON.stringify(o)),t(o),[2]})})},complete:function(t){console.log("\u767b\u5f55\u5b8c\u6210",JSON.stringify(t))},fail:function(t){console.log("\u767b\u5f55\u5931\u8d25",JSON.stringify(t))}})},t.prototype.getTTOpenID=function(t,e){var o=this;return new Promise(function(n){return __awaiter(o,void 0,void 0,function(){var o,r,c;return __generator(this,function(l){switch(l.label){case 0:return o={app_name:i.Platform.getConfig().flag,code:t,anonymous_code:e},[4,this.post(s+"common/tt/session/sign_in",o)];case 1:r=l.sent();try{c=JSON.parse(r),n(c.data)}catch(a){n({})}return[2]}})})})},t.prototype.get=function(t,e){return new Promise(function(o){for(var i in t+="?",e)t+=i+"="+e[i]+"&";var n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&(n.status>=200&&n.status<400?o(n.response):o(null))},n.open("GET",t),n.send(),n.onerror=function(){o(null)},n.ontimeout=function(){o(null)}})},t.prototype.post=function(t,e){var o=this;return new Promise(function(i){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&(n.status>=200&&n.status<400?i(n.response):i(null))},n.open("POST",t),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(o.formatPostData(e)),n.onerror=function(){i(null)},n.ontimeout=function(){i(null)}})},t.prototype.formatPostData=function(t){var e=[];for(var o in t)e.push(o);e=e.sort();var i="";return e.forEach(function(o,n){i+=o+"="+t[o]+(n==e.length-1?"":"&")}),i},t.prototype.getSign=function(t){var e=[];for(var o in t)e.push(o);e=e.sort();var i="";return e.forEach(function(o,n){i+=o+"="+t[o]+(n==e.length-1?"":"&")}),i+="VuFFap7NHJA70M9xWb9fSQcdVtivPY4E",(new r.Md5).md5(i)},t.prototype.saveSignInData=function(t,e){var o=this;return new Promise(function(n){return __awaiter(o,void 0,void 0,function(){var o,r,c,l,h;return __generator(this,function(d){switch(d.label){case 0:return"Douyin"==(o=a.getSystemInfoSync().appName)?r="user_sign_1":"douyin_lite"==o&&(r="user_sign_2"),c={app_name:i.Platform.getConfig().flag,uuid:t,d_key:r,d_data:e},[4,this.post(s+"common/game-data/save",c)];case 1:l=d.sent();try{h=JSON.parse(l),n(h.data)}catch(u){n({})}return[2]}})})})},t}());o.default=c,cc._RF.pop()},{"./MD5Type":"MD5Type","./PlatformManager":"PlatformManager","./UserManager":"UserManager"}],TT:[function(t,e,o){"use strict";cc._RF.push(e,"b32fekWcWlOpod1TZygzpDy","TT"),o.TT=void 0;var i=t("./Encrypt"),n=t("./BasePlatform"),r=t("./EventConst"),a=t("./UserConst"),s=t("./AudioManager"),c=t("./EventManager"),l=t("./TipManager"),h=t("./UserManager"),d=t("./ttPostbackCtl"),u=t("./Utils"),p=function(t){function e(){var e=t.call(this)||this;e.sdk=window.tt,e._rewardAds=null,e._rewardAdsCb=null,e._rewardHasShow=!1,e._rewardHasLoad=!1,e._banner=null,e._insert=null,e._recorder=null,e._recordStatus=-1,e._recordPath=null,e._inScene=null,e.networkType=null,e.ta=null,e.openid=null,e._authorization=null,e._isLog=!0,e.init=!1,e.bgm=null,e.rewardAdsID=["4kgicn0c138h50fe0b","32ehgd89milcgfen2t"],e.rewardAdsIDIndex=0,e.actionRecord=null,e.recordingSecond=0,console.log("\u5934\u6761");var o=window.tt.getLaunchOptionsSync();if(["Douyin","douyin_lite"].some(function(t){return t==window.tt.getSystemInfoSync().appName})){var i=window.tt.getLaunchOptionsSync();i.query&&i.query.card_id&&[436,556].includes(i.query.card_id)&&(window.TTRecommendGameCard=!0),i.query&&i.query.card_id&&[645].includes(i.query.card_id)&&(window.TTRecommendGameCard2=!0)}return o.scene&&(e._inScene=o.scene,console.log("## \u8fdb\u5165\u573a\u666f\u503c\uff1a",e._inScene),"021001"!=e._inScene&&"101001"!=e._inScene&&"021036"!=e._inScene&&"homepage"!=(null==o?void 0:o.launch_from)&&"sidebar_card"!=(null==o?void 0:o.location)||0!=(h.User.get(a.UserData.EnterSidebar)||0)||(cc.game.emit("gamelog_Thinking","Sidebar_Reward",{state:"complete"}),h.User.set(a.UserData.EnterSidebar,1),c.Event.emit(r.default.EnterSidebar)),"025001"!=e._inScene&&"105001"!=e._inScene||h.User.setTempData("isZt",1)),window.tt.onShow(function(t){console.log("\u542f\u52a8\u53c2\u6570\u5982\u4e0b\uff1a",t.query),o.scene&&(console.log("## 2 \u8fdb\u5165\u573a\u666f\u503c\uff1a",o.scene),"021001"!=o.scene&&"101001"!=o.scene&&"021036"!=o.scene&&"homepage"!=(null==o?void 0:o.launch_from)&&"sidebar_card"!=(null==o?void 0:o.location)||0!=(h.User.get(a.UserData.EnterSidebar)||0)||(cc.game.emit("gamelog_Thinking","Sidebar_Reward",{state:"complete"}),h.User.set(a.UserData.EnterSidebar,1),c.Event.emit(r.default.EnterSidebar)))}),["Douyin","douyin_lite","live_stream","aweme_hotsoon"].some(function(t){return t==window.tt.getSystemInfoSync().appName})&&(window.isDouyin=!0),e.getNetworkType(function(t){e.networkType=t.networkType}),e.sdk.onNetworkStatusChange(function(t){console.log(t.networkType),console.log(t.isConnected);var o=e.networkType;console.log("\u7f51\u7edc\u72b6\u6001\u53d8\u5316"),"none"==o&&"none"!=t.networkType&&(console.log("\u65e0\u7f51\u53d8\u6210\u6709\u7f51"),cc.game.emit("noneChangeHas")),e.networkType=t.networkType}),e}return __extends(e,t),e.prototype.setConfig=function(t){this._config=t,this.initThinking(),this.initTTPostbackCtl()},e.prototype.initTTPostbackCtl=function(){d.default.GetInstance().init(this._config.flag,this._config.version)},e.prototype.initThinking=function(){var t={appId:this._config.thinkingID,serverUrl:"https://ta-data.zuiqiangyingyu.net",autoTrack:{appShow:!0,appHide:!0}};this.ta=new ThinkingAnalyticsAPI(t),this.ta.login("TA")},e.prototype.showRankList=function(){window.game_loginDone&&tt.getImRankList({relationType:"default",dataType:0,rankType:"month",suffix:"\u5173",rankTitle:"\u901a\u5173\u6392\u884c\u699c",zoneId:"default",success:function(t){console.log("## getImRankData success res: ",JSON.stringify(t))},fail:function(t){console.log("## getImRankData fail res: ",JSON.stringify(t))}})},e.prototype.sendRankData=function(){tt.setImRankData({dataType:0,relationType:"default",value:(h.User.get("record")||0).toString(),priority:0,extra:"extra",zoneId:"default",success:function(t){console.log("## setImRankData success res: ",JSON.stringify(t))},fail:function(t){console.log("## setImRankData fail res: ",JSON.stringify(t))}})},e.prototype.taInit=function(t){this.ta.login(t),this.ta.init()},e.prototype.vibrate=function(t){void 0===t&&(t=30),tt.vibrateShort({success:function(t){console.log(""+t)},fail:function(){console.log("vibrateShort\u8c03\u7528\u5931\u8d25")}})},e.prototype.login1=function(){console.log("[ToutiaoLoginCtrler][login]"),tt.login({force:!1,success:function(t){console.log("login\u8c03\u7528\u6210\u529f"+t.code+" "+t.anonymousCode)},fail:function(){console.log("login\u8c03\u7528\u5931\u8d25")}})},e.prototype.post2=function(t){return new Promise(function(e){console.log("\u8bf7\u6c42");var o=cc.loader.getXMLHttpRequest();o.timeout=5e3;var i=t,n="?";for(var r in i){var a=r+"="+i[r];n+=""==n?a:"&"+a}console.log("\u8bf7\u6c4211"),o.open("POST","https://game.zuiqiangyingyu.net/common/tt/session/sign_in"+n,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.onreadystatechange=function(){if(4===o.readyState&&200==o.status){var t=o.responseText;console.log("\u54cd\u5e94\u53c2\u6570"),console.log(t),e(JSON.parse(t))}else console.log("xhr.readyState",o.readyState)}})},e.prototype.post=function(t,e,o,i,n){var r,a=cc.loader.getXMLHttpRequest(),s=this;a.onreadystatechange=function(){if(4===a.readyState)if(a.status>=200&&a.status<=400)s._isLog&&cc.log("[Http][Post][\u8bf7\u6c42\u6210\u529f] status : "+a.status+", url : "+t),o&&o(a.responseText,n);else{if(502==a.status&&(!n||n.reSendTimes<3))return(n=n||{reSendTimes:0}).reSendTimes++,console.warn("[Http][Post][502] reSendTimes : "+n.reSendTimes+", url : "+t),void s.post(t,e,o,i,n);s._isLog&&cc.log("[Http][Post][\u8bf7\u6c42\u5931\u8d25] status : "+a.status),i&&i(n)}},console.log("[Http][Post][\u53d1\u8d77\u8bf7\u6c42] url : "+t);var c=!n||0!=n.async;a.open("POST",t,c),this._authorization&&a.setRequestHeader("authorization",this._authorization),cc.sys.isNative&&a.setRequestHeader("Accept-Encoding","gzip,deflate"),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.ontimeout=function(){s._isLog&&console.warn("[Http][Post][\u8bf7\u6c42\u8d85\u65f6] [event] : "),s._isLog&&console.warn(t),s._isLog&&console.warn(arguments),i&&i(arguments)},a.onerror=function(){s._isLog&&console.error("[Http][Post][\u8bf7\u6c42\u5f02\u5e38] [event] : "),s._isLog&&console.error(t),s._isLog&&console.error(arguments),i&&i(arguments)},c&&(a.timeout=5e3),r=n&&1==n.isBodyTypeRequest?JSON.stringify(e):s._EncodeFormData(e),a.send(r)},e.prototype._EncodeFormData=function(t){var e=[],o=/%20/g;for(var i in t){var n=t[i],r=encodeURIComponent(i).replace(o,"+")+"="+encodeURIComponent(n).replace(o,"+");e.push(r)}return e.join("&")},e.prototype.report=function(t,e){var o=window.ad_id;o&&o.length<19?this.ta.setSuperProperties({version:this._config.version,video_id:window.video_id||"",projectid:window.projectid||"",promotionid:window.promotionid||"",mid1:window.mid1||"",mid2:window.mid2||"",mid3:window.mid3||"",mid4:window.mid4||"",mid5:window.mid5||"",mid6:window.mid6||""}):this.ta.setSuperProperties({version:this._config.version,ad_id:window.ad_id,video_id:window.video_id||"",projectid:window.projectid||"",promotionid:window.promotionid||"",mid1:window.mid1||"",mid2:window.mid2||"",mid3:window.mid3||"",mid4:window.mid4||"",mid5:window.mid5||"",mid6:window.mid6||""}),this.ta.track(t,JSON.parse(e)),window.openid&&!this.init&&(this.init=!0,window.ad_id.length<19?this.ta.userSet({openid:window.openid}):this.ta.userSet({openid:window.openid,ad_id:window.ad_id}),console.log("\u6d4b\u8bd5",window.openid))},e.prototype.getInstance=function(){return this.sdk},e.prototype.showRewardAds=function(t){var e=this;return this.sdk.createRewardedVideoAd?this._config.rewardID?(this._rewardAdsCb=t,this._rewardHasShow=!1,this.bgm=s.Audio.currentBgm,s.Audio.stopMusic(),c.Event.emit(r.default.StopTimer),game.dragonMoving=!1,this._rewardAds||(this._rewardAds=this.sdk.createRewardedVideoAd({adUnitId:this._config.rewardID}),d.default.GetInstance().adRequest("\u6fc0\u52b1\u89c6\u9891"),this._rewardAds.onLoad(function(){e._rewardHasLoad=!0,d.default.GetInstance().adFill("\u6fc0\u52b1\u89c6\u9891"),e._rewardHasShow||(e._rewardHasShow=!0,d.default.GetInstance().adClick("\u6fc0\u52b1\u89c6\u9891"),e._rewardAds.show().then(function(){d.default.GetInstance().adImpression("\u6fc0\u52b1\u89c6\u9891")}),e.playVideoShow())}),this._rewardAds.onClose(function(t){e._rewardHasLoad=!1,t.isEnded&&d.default.GetInstance().adImpressionDone("\u6fc0\u52b1\u89c6\u9891"),e._rewardAdsCb(t.isEnded?0:1),e.playVideoEnd(),s.Audio.playMusic(e.bgm),c.Event.emit(r.default.restoreTime),game.dragonMoving=!0,t.isEnded&&(window.lastVideoAdTime=(new Date).getTime()/1e3)}),this._rewardAds.onError(function(t){e._rewardHasLoad=!1,console.log("[platform] [ZJTDPlatform] showRewardAds",t),e._rewardAdsCb(-1),l.Tip.show("\u5e7f\u544a\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e\u3002"),e._rewardAds.destroy(),e._rewardAds=null,e.rewardAdsIDIndex?e.rewardAdsIDIndex=0:e.rewardAdsIDIndex=1,s.Audio.playMusic(e.bgm),c.Event.emit(r.default.restoreTime),game.dragonMoving=!0})),void(this._rewardHasLoad&&!this._rewardHasShow?(this._rewardHasShow=!0,d.default.GetInstance().adClick("\u6fc0\u52b1\u89c6\u9891"),this._rewardAds.show().then(function(){d.default.GetInstance().adImpression("\u6fc0\u52b1\u89c6\u9891")})):(d.default.GetInstance().adRequest("\u6fc0\u52b1\u89c6\u9891"),this._rewardAds.load()))):t(-3):t(-2)},e.prototype.showBanner=function(t,e){var o=this;void 0===t&&(t={id:""}),this._banner||(this._banner=this.sdk.createBannerAd({adUnitId:t.id||this._config.bannerID,style:{left:9999,top:9999},adIntervals:60}),this._banner.onLoad(function(){o._banner?o._banner.show().then(function(){e&&e(0)}).catch(function(){e&&e(1)}):e&&e(0)}),this._banner.onError(function(t){console.log("[platform] [ZJTDPlatform] showBanner",t)}),this._banner.onResize(function(t){var e=o.sdk.getSystemInfoSync();o._banner.style.top=e.windowHeight-t.height,o._banner.style.left=(e.windowWidth-t.width)/2}))},e.prototype.hideBanner=function(){this._banner&&(this._banner.destroy(),this._banner=null)},e.prototype.showInsert=function(){var t=this;this.sdk.createInterstitialAd&&this._config.insertID&&(this._insert?this._insert.load().then(function(){t._insert.show().then(function(){}).catch(function(t){console.log("## tt showInsert1 err:",t)})}):this._insert||(this._insert=this.sdk.createInterstitialAd({adUnitId:this._config.insertID}),this._insert.onLoad(function(){t._insert&&(t._insert.offLoad(),t._insert.show().then(function(){t.playInsertAdShow()}).catch(function(t){console.log("## tt showInsert2 err:",t)}))}),this._insert.onClose(function(){t._insert&&(t._insert.offClose(),t._insert.destroy(),t._insert=null,t.playInsertAdEnd(),window.lastInsertAdTime=(new Date).getTime()/1e3)}),this._insert.onError(function(e){console.log("## tt showInsert3",e),e&&1003==e.errCode&&t._insert&&(t._insert.destroy(),t._insert=null),window.lastInsertAdTime=(new Date).getTime()/1e3})))},e.prototype.destroyInsert=function(){this._insert&&(this._insert.destroy(),this._insert=null)},e.prototype.share=function(t){var e=u.Utils.randomNum(0,2);this.sdk.shareAppMessage({templateId:["5aq5j6olagof08j32d","35cfwvbcl5sclmmfao","1e7ccm02h0amf9b13a"][e],query:"",success:function(){console.log("\u5206\u4eab\u6210\u529f"),t(0)},fail:function(){console.log("\u5206\u4eab\u5931\u8d25")}})},e.prototype.shareRecordCap=function(t){var e=this;return this._recorder?this._recordPath?void this.sdk.shareAppMessage({channel:"video",extra:{videoPath:this._recordPath},success:function(){console.log("\u5206\u4eab\u89c6\u9891\u6210\u529f"),e._recordStatus=1,t(0)},fail:function(e){console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25",e),e&&-1!=e.errMsg.indexOf("short")?t(-1):t(1)}}):t(-3):t(-2)},e.prototype.startRecordCap=function(t){var e=this;if(void 0===t&&(t=300),this.sdk.getGameRecorderManager){this._recorder||(console.log("\u5f00\u59cb\u5f55\u5c4f"),this._recorder=this.sdk.getGameRecorderManager(),this._recorder.onStart(function(t){console.log("ttManager\u5f55\u5c4f\u5f00\u59cb\uff1a",t)}),this._recorder.onStop(function(t){e._recordPath=t.videoPath,console.log("\u5f55\u5c4f\u7ed3\u675f\uff1a",t)}),this._recorder.onError(function(t){e._recordStatus=-1,console.log("\u5f55\u5c4f\u9519\u8bef\u7684\u4fe1\u606f",JSON.stringify(t))})),this._recordPath=null,console.log("\u5f00\u59cb\u5f55\u5c4f"),this._recorder.start({duration:t}),this._recordStatus=1;var o=this;null!=this.actionRecord&&clearInterval(this.actionRecord),this.recordingSecond=0,this.actionRecord=setInterval(function(){e.recordingSecond++,e.recordingSecond>=299&&(o.stopRecordCap(),e.actionRecord=null,clearInterval(e.actionRecord))},1e3)}},e.prototype.pauseRecord=function(){this._recorder&&this._recorder.pause()},e.prototype.resumeRecord=function(){this._recorder&&this._recorder.resume()},e.prototype.stopRecordCap=function(){this._recorder&&1==this._recordStatus&&(console.log("\u7ed3\u675f\u5f55\u5c4f"),this._recorder.stop(),this._recordStatus=0)},e.prototype.getShareStatus=function(){return this._recordStatus},e.prototype.request=function(t,e,o,n,r){var a=this;return new Promise(function(s,c){a.sdk.request({url:t,method:e,data:n?{di:(new i.Encrypt).encrypt(JSON.stringify(Object.assign(o,{seq:a.randomString(16)})))}:o,header:r,success:function(t){console.log(t),s(t)},fail:function(t){console.log(t),c(t)}})})},e.prototype.darenLogin=function(){var t=this;this.launchOpt=this.sdk.getLaunchOptionsSync(),console.log("[platform] [ZJTDPlatform] darenLogin launchOpt: ",this.launchOpt),this.query=this.launchOpt.query,console.log("[platform] [ZJTDPlatform] darenLogin query: ",this.query),this.drPid=this.query.dr_pid,console.log("[platform] [ZJTDPlatform] darenLogin drPid: ",this.drPid),this.preVideoId=this.query.pre_video_id,console.log("[platform] [ZJTDPlatform] darenLogin preVideoId: ",this.preVideoId),this.drType=this.query.dr_type,console.log("[platform] [ZJTDPlatform] darenLogin drType: ",this.drType),this.query&&this.query.hasOwnProperty("dr_params")&&(this.query.dr_params instanceof Object?this.dr_params=this.query.dr_params:this.dr_params=JSON.parse(this.query.dr_params)),this.drPid&&this.drType&&"promote"==this.drType&&this.getPreVideoId(this.drPid),this.query&&this.drType&&this.drPid&&"promote"==this.drType?this.silentLogin(!0).then(function(e){t.query&&t.drType&&t.drPid&&"promote"==t.drType&&t.sdk.getUserInfo({withCredentials:!0,success:function(o){console.log("[platform] [ZJTDPlatform] darenLogin userInfo",o),t.uploadUserInfo({code:e.code?e.code:"",raw_data:o.rawData?o.rawData:"",dr_pid:t.drPid,bms_flag:t._config.flag})}})}):this.silentLogin(!1).then(function(e){t.getOpenid({anonymous_code:e.anonymousCode?e.anonymousCode:"",code:e.code?e.code:"",flag:t._config.flag})})},e.prototype.getPreVideoId=function(t){var e=this;console.log("[platform] [ZJTDPlatform] getPreVideoId",t),this.request("https://addata-api.zuiqiangyingyu.net/game/Video/getPreVideoId?dr_pid="+t,"GET").then(function(t){console.log("[platform] [ZJTDPlatform] getPreVideoId success",t),e.preVideoId=t.data.data}).catch(function(t){console.log("[platform] [ZJTDPlatform] getPreVideoId fail",t)})},e.prototype.uploadUserInfo=function(t){var e=this;console.log("[platform] [ZJTDPlatform] uploadUserInfo success",t),this.request("https://addata-api.zuiqiangyingyu.net/game/user/auth","POST",t,!1).then(function(t){console.log("[platform] [ZJTDPlatform] uploadUserInfo success",t),e.promoteOpenId=t.data.data.open_id}).catch(function(t){console.log("[platform] [ZJTDPlatform] uploadUserInfo fail",t)})},e.prototype.uploadVideoId=function(t){this.request("https://addata-api.zuiqiangyingyu.net/game/Video/saveVideo","POST",t,!1).then(function(t){console.warn("[platform] [ZJTDPlatform] uploadVideoId success",t)}).catch(function(t){console.warn("[platform] [ZJTDPlatform] uploadVideoId fail",t)})},e.prototype.silentLogin=function(t){var e=this;return void 0===t&&(t=!1),new Promise(function(o,i){e.sdk.login({force:t,success:function(t){console.log("[platform] [ZJTDPlatform] silentLogin success ",t),o(t),e.showShareMenu(),e.onShareAppMessage()},fail:function(t){console.log("[platform] [ZJTDPlatform] silentLogin fail ",t),i(null)}})})},e.prototype.getOpenid=function(t){var e=this;console.log("[platform] [ZJTDPlatform] getOpenid",t),this.request("https://game.zuiqiangyingyu.net/common/tt/session/sign_in","POST",t,!1,{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"}).then(function(t){console.log("[platform] [ZJTDPlatform] getOpenid success",t),e.userInfo={anonymous_openid:t.data.data.anonymous_openid,openid:t.data.data.openid}}).catch(function(t){console.log("[platform] [ZJTDPlatform] getOpenid fail",t)})},e.prototype.showShareMenu=function(){this.sdk.showShareMenu({withShareTicket:!0})},e.prototype.onShareAppMessage=function(){var t=this;this.sdk.onShareAppMessage(function(e){if(console.log("[platform] [ZJTDPlatform] onShareAppMessage",e),e&&"video"==e.channel)return{channel:"video",query:"promote"==t.drType?"dr_pid="+t.drPid+"&dr_type=share&pre_video_id="+t.preVideoId+(t.dr_params?"&dr_params="+JSON.stringify(t.dr_params):""):"",extra:{withVideoId:!0},success:function(e){console.warn("[platform] [ZJTDPlatform] onShareAppMessage success",e,t.drType),"promote"==t.drType&&(t.uploadVideoId({dr_pid:t.drPid,bms_flag:t._config.flag,video_id:e.videoId,pre_video_id:t.preVideoId,open_id:t.promoteOpenId?t.promoteOpenId:""}),t.getPreVideoId(t.drPid))},fail:function(t){console.warn("[platform] [ZJTDPlatform] onShareAppMessage fail",t)}}})},e.prototype.playVideoEnd=function(){var t;t="share"==this.drType?{dr_pid:this.drPid,pre_video_id:this.preVideoId,bms_flag:this._config.flag,user_info:this.userInfo,play_type:"daren",ad_type:5,event_type:"adp"}:{bms_flag:this._config.flag,user_info:this.userInfo,play_type:"normal",ad_type:5,event_type:"adp"},console.log("[platform] [ZJTDPlatform] playVideoEnd",t)},e.prototype.playInsertAdEnd=function(){var t;t="share"==this.drType?{dr_pid:this.drPid,pre_video_id:this.preVideoId,bms_flag:this._config.flag,user_info:this.userInfo,play_type:"daren",ad_type:6,event_type:"adp"}:{bms_flag:this._config.flag,user_info:this.userInfo,play_type:"normal",ad_type:6,event_type:"adp"},console.log("[platform] [ZJTDPlatform] playInsertAdEnd",t)},e.prototype.getNetworkType=function(t){this.sdk.getNetworkType({success:function(e){console.log(""+e.networkType),t(e)},fail:function(){console.log("getNetworkType\u8c03\u7528\u5931\u8d25"),t({networkType:"none"})}})},e.prototype.playVideoShow=function(){var t;t="share"==this.drType?{event_type:"eps",dr_pid:this.drPid,pre_video_id:this.preVideoId,bms_flag:this._config.flag,user_info:this.userInfo,play_type:"daren",ad_type:5}:{event_type:"eps",bms_flag:this._config.flag,user_info:this.userInfo,play_type:"normal",ad_type:5},console.log("[platform] [ZJTDPlatform] playVideoShow",t)},e.prototype.playInsertAdShow=function(){var t;t="share"==this.drType?{event_type:"eps",dr_pid:this.drPid,pre_video_id:this.preVideoId,bms_flag:this._config.flag,user_info:this.userInfo,play_type:"daren",ad_type:6}:{event_type:"eps",bms_flag:this._config.flag,user_info:this.userInfo,play_type:"normal",ad_type:6},console.log("[platform] [ZJTDPlatform] playInsertAdShow",t)},e.prototype.randomString=function(t){t=t||32;for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyzoOLl9gqVvUuI12345678",o=e.length,i="",n=0;n<t;n++)i+=e.charAt(Math.floor(Math.random()*o));return i},e.prototype.follow=function(t){console.log("[bytedance] \u70b9\u51fb\u5173\u6ce8",this.sdk.openAwemeUserProfile),this.sdk.openAwemeUserProfile&&this.sdk.openAwemeUserProfile({success:function(e){console.log("---- open success, res: ",e),t(0)},fail:function(e){console.log("---- open fail, err: ",e),t(-1)},complete:function(t){console.log("---- open complete, res: ",t)}})},e}(n.BasePlatform);o.TT=p,cc._RF.pop()},{"./AudioManager":"AudioManager","./BasePlatform":"BasePlatform","./Encrypt":"Encrypt","./EventConst":"EventConst","./EventManager":"EventManager","./TipManager":"TipManager","./UserConst":"UserConst","./UserManager":"UserManager","./Utils":"Utils","./ttPostbackCtl":"ttPostbackCtl"}],TaskManager:[function(t,e,o){"use strict";cc._RF.push(e,"5b3060X9qRJUaEHODJxek+/","TaskManager");var i=t("./UserConst"),n=t("./PlatformManager"),r=t("./UserManager"),a=t("./ShuShuConst"),s=new(function(){function t(){this.taskConfig=[]}return t.prototype.init=function(){},t.prototype.taskFinish=function(){if(!n.Platform.getConfig().hasPurchase){var t=r.User.getTempData(i.TempData.CURRENT_MODE),e=r.User.get("passLevel"+t)||0;e+=1,r.User.set("passLevel"+t,e);for(var o=0;o<this.taskConfig.length;o++){var s=this.taskConfig[o],c=this.paramObj(s.finishCondition);if(t==c.mode&&e==c.passLevel){var l=this.paramObj(s.reward);console.log("\u6d4b\u8bd5\u89e3\u9501\u76ae\u80a4",l.skinID);var h=r.User.get(i.UserData.skinList),d=Number(l.skinID);h[0].includes(d)||h[0].push(d),r.User.set(i.UserData.skinList,h);var u=r.User.get(i.UserData.useSkinIDList);u[0]=d,r.User.set(i.UserData.useSkinIDList,u),cc.game.emit("gamelog_Thinking",a.ShuShuConst.Skin_unlock,{mode:0,id:d});break}}}},t.prototype.paramObj=function(t){for(var e,o=/([^&=]+)=?([^&]*)/g,i=/\+/g,n=function(t){return decodeURIComponent(t.replace(i," "))},r={};e=o.exec(t);)r[n(e[1])]=n(e[2]);return r},t}());o.default=s,cc._RF.pop()},{"./PlatformManager":"PlatformManager","./ShuShuConst":"ShuShuConst","./UserConst":"UserConst","./UserManager":"UserManager"}],TimeEnd:[function(t,e,o){"use strict";cc._RF.push(e,"819ffYOySFNPqyuE3V67piq","TimeEnd");var i=t("./BaseUI"),n=t("./EventConst"),r=t("./PlatformConst"),a=t("./PopupConst"),s=t("./UserConst"),c=t("./LocalStorageConst"),l=t("./LocalStorageManager"),h=t("./BmsManager"),d=t("./EventManager"),u=t("./LanguageManager"),p=t("./PlatformManager"),f=t("./PopupManager"),g=t("./TipManager"),m=t("./UserManager"),v=t("./OPPOAndroidAdUtils"),y=t("./OPPOMiniADUtils"),_=t("./VIVOADUtils"),C=t("./XMADUtils"),b=t("./ShuShuConst"),S=cc._decorator,w=S.ccclass,A=(S.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text=null,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("noBtn",this.noBtn,this),this.addBtnOn("yesBtn",this.yesBtn,this),this.addBtnOn("answerBtn",this.answerBtn,this),this.addBtnOn("answerBtn2",this.answerBtn,this),this.addBtnOn("jumpBtn",this.jumpBtn,this),this.addBtnOn("resortBtn",this.resortBtn,this),this.addBtnOn("yesCardBtn",this.yesCardBtn,this),m.User.getTempData(s.TempData.CURRENT_LEVEL_ID),m.User.getTempData(s.TempData.CURRENT_MODE),this.initView()},e.prototype.onEnable=function(){p.Platform.is(r.EPlatform.XIAOMI_ANDROID)?(C.XMAD.showLargeFeed(),C.XMAD.showInterstitialFeed_result()):p.Platform.is(r.EPlatform.OPPO_ANDROID)?(v.OPPOAndroidAd.showLargeFeed(),v.OPPOAndroidAd.showInterstitialFeed_result()):p.Platform.is(r.EPlatform.OPPO)?(y.OPPOMiniAD.showLargeFeed(),y.OPPOMiniAD.showInterstitialFeed_result()):p.Platform.is(r.EPlatform.VIVO)&&_.VIVOAD.showCustomAd_1(function(){_.VIVOAD.showCustomAd_2()})},e.prototype.onDisable=function(){p.Platform.is(r.EPlatform.XIAOMI_ANDROID)?C.XMAD.removeLargePicFeed():p.Platform.is(r.EPlatform.OPPO_ANDROID)&&v.OPPOAndroidAd.removeLargePicFeed(),p.Platform.hideNativeAds(),p.Platform.hideCustomAd1(),p.Platform.hideCustomAd2(),p.Platform.hideCustomAd_1(),p.Platform.hideCustomAd_2(),cc.game.emit("isTimeEnd")},e.prototype.noBtn=function(){var t=m.User.getTempData("levelTime"),e=((new Date).getTime()-t)/1e3;cc.game.emit("gamelog_Thinking",b.ShuShuConst.Level_End,{EndType:1,Duration:e,lv:m.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:m.User.getTempData(s.TempData.CURRENT_MODE)}),cc.game.emit("onRestartReset"),f.default.hide()},e.prototype.yesCardBtn=function(){var t=l.default.get(c.default.cardAmount)||0;if(t<1)return g.Tip.show(u.default.formatStr("\u4e07\u80fd\u5361\u4e0d\u8db3\uff01")),void f.default.show(a.PopupConst.UniversalCard);l.default.set(c.default.cardAmount,t-1),d.Event.emit(n.default.extendTime),0==m.User.getTempData(s.TempData.CURRENT_MODE)?cc.game.emit("gamelog_Thinking",b.ShuShuConst.reward_btn,{id:"004",lv:m.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:m.User.getTempData(s.TempData.CURRENT_MODE)}):cc.game.emit("gamelog_Thinking",b.ShuShuConst.reward_btn,{id:"005",lv:m.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:m.User.getTempData(s.TempData.CURRENT_MODE)}),f.default.hide()},e.prototype.yesBtn=function(){this.dict.addTimeShareIcon.active?cc.game.emit("timeEnd_addTime"):p.Platform.showRewardAds(function(t){0==t&&(d.Event.emit(n.default.extendTime),m.User.getTempData(s.TempData.CURRENT_LEVEL_ID),0==m.User.getTempData(s.TempData.CURRENT_MODE)?cc.game.emit("gamelog_Thinking",b.ShuShuConst.reward_btn,{id:"004",lv:m.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:m.User.getTempData(s.TempData.CURRENT_MODE)}):cc.game.emit("gamelog_Thinking",b.ShuShuConst.reward_btn,{id:"005",lv:m.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:m.User.getTempData(s.TempData.CURRENT_MODE)}),f.default.hide())})},e.prototype.jumpBtn=function(){p.Platform.showRewardAds(function(t){0==t&&(m.User.setTempData("isNeedInsert",!1),cc.game.emit("gamelog_Thinking",b.ShuShuConst.reward_btn,{id:"011",lv:m.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:m.User.getTempData(s.TempData.CURRENT_MODE)}),cc.game.emit("game_success2"),f.default.hide())})},e.prototype.answerBtn=function(){this.dict.tipShareIcon.active?cc.game.emit("timeEnd_answerBtn"):p.Platform.showRewardAds(function(t){0==t&&(d.Event.emit(n.default.restartAnswer),m.User.getTempData(s.TempData.CURRENT_LEVEL_ID),0==m.User.getTempData(s.TempData.CURRENT_MODE)?cc.game.emit("gamelog_Thinking",b.ShuShuConst.reward_btn,{id:"014",lv:m.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:m.User.getTempData(s.TempData.CURRENT_MODE)}):cc.game.emit("gamelog_Thinking",b.ShuShuConst.reward_btn,{id:"015",lv:m.User.getTempData(s.TempData.CURRENT_LEVEL_ID),mode:m.User.getTempData(s.TempData.CURRENT_MODE)}),f.default.hide())})},e.prototype.initView=function(){m.User.getTempData(s.TempData.CURRENT_LEVEL);var t=m.User.getTempData(s.TempData.CURRENT_MODE),e=(m.User.getTempData(s.TempData.CURRENT_LEVEL_ID),h.BMS.getKey("changeStage"));if(0==t)if(e){var o=m.User.get(s.TempData.isUnlockTip)||!1;this.dict.jumpBtn.active=!0,this.dict.answerBtn.active=!1,this.dict.answerBtn2.active=!o,this.dict.answerBtn2.active=!1}else o=m.User.get(s.TempData.isUnlockTip)||!1,this.dict.answerBtn.active=!o,this.dict.answerBtn.active=!1;this.dict.answerBtn.active=!1,this.initShareView(),p.Platform.getConfig().hasShare&&(this.dict.resortBtn.active=!0),p.Platform.getConfig().hasPurchase&&(this.dict.yesCardBtn.active=!0),"all"!=h.BMS.getKey("share")&&(this.dict.resortBtn.active=!1)},e.prototype.resortBtn=function(){p.Platform.share()},e.prototype.initShareView=function(){m.User.get(s.UserData.getBoreByShareTimes);var t=m.User.get(s.UserData.getTipShareTimes),e=(m.User.get(s.UserData.getResetByShareTimes),m.User.get(s.UserData.getDelayedByShareTimes));p.Platform.getConfig().hasShare&&"all"==h.BMS.getKey("share")&&(t?(this.dict.tipVideoIcon.getComponent(cc.Sprite).enabled=!1,this.dict.tipShareIcon.active=!0):(this.dict.tipVideoIcon.getComponent(cc.Sprite).enabled=!0,this.dict.tipShareIcon.active=!1),e?(this.dict.addTimeVideoIcon.getComponent(cc.Sprite).enabled=!1,this.dict.addTimeShareIcon.active=!0):(this.dict.addTimeVideoIcon.getComponent(cc.Sprite).enabled=!0,this.dict.addTimeShareIcon.active=!1))},__decorate([w],e)}(i.default));o.default=A,cc._RF.pop()},{"./BaseUI":"BaseUI","./BmsManager":"BmsManager","./EventConst":"EventConst","./EventManager":"EventManager","./LanguageManager":"LanguageManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./OPPOAndroidAdUtils":"OPPOAndroidAdUtils","./OPPOMiniADUtils":"OPPOMiniADUtils","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./ShuShuConst":"ShuShuConst","./TipManager":"TipManager","./UserConst":"UserConst","./UserManager":"UserManager","./VIVOADUtils":"VIVOADUtils","./XMADUtils":"XMADUtils"}],TimeManager:[function(t,e,o){"use strict";cc._RF.push(e,"c3369Qy7fJDXrHBZFkp3LUG","TimeManager");var i=function(){function t(){this.timerController=null,this.events=[],this.serverStartTime=0,this.useTime=0}return t.prototype.init=function(t){var e=this;this.timerController=cc.find("Canvas").addComponent(r),this.serverStartTime=t,console.log("\u5f00\u59cb\u8ba1\u65f6"),this.schedule(function(){if(e.useTime+=1,e.events.length)for(var t=0;t<e.events.length;t++)e.events[t]()},1)},t.prototype.addEventListener=function(t){this.events.push(t)},t.prototype.removeEventListener=function(t){var e=this.events.indexOf(t);this.events.splice(e,1)},t.prototype.schedule=function(t,e,o,i){this.timerController.schedule(t,e,o,i)},t.prototype.scheduleOnce=function(t,e){this.timerController.scheduleOnce(t,e)},t.prototype.unschedule=function(t){this.timerController.unschedule(t)},t.prototype.unscheduleAllCallbacks=function(){this.timerController.unscheduleAllCallbacks()},t.prototype.getCurrentTime=function(){return 1e3*(this.serverStartTime+this.useTime)},t}(),n=cc._decorator.ccclass,r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),__decorate([n],e)}(cc.Component),a=new i;o.default=a,cc._RF.pop()},{}],TimeManage:[function(t,e,o){"use strict";cc._RF.push(e,"a7b862fi75MzJjLzmuokVkX","TimeManage");var i=t("./function"),n=t("./LocalStorage"),r=function(){function t(){this._startClientTime="sdk_s_c_t",this._endClientTime="sdk_e_c_t",this._firstReportServerTime="sdk_s_b_t",this._firstReportClientTime="sdk_c_b_t",this.lockGetFirstServerTime="sdk_lock_get_fst"}return t.prototype.setStartClientTime=function(){n.default.setItem(this._startClientTime,i.getClientTime())},t.prototype.getStartClientTime=function(){var t=n.default.getItem(this._startClientTime);return t>0?t:0},t.prototype.removeStartClientTime=function(){n.default.removeItem(this._startClientTime)},t.prototype.setEndClientTime=function(){n.default.setItem(this._endClientTime,i.getClientTime())},t.prototype.getEndClientTime=function(){var t=n.default.getItem(this._endClientTime);return t>0?t:0},t.prototype.removeEndClientTime=function(){n.default.removeItem(this._endClientTime)},t.prototype.getOnlineTime=function(){var t=this.getStartClientTime(),e=this.getEndClientTime();return t>0&&e>0?e-t:0},t.prototype.setFirstReportServerTime=function(){var t=this;n.default.getItem(this.lockGetFirstServerTime)||(n.default.setItem(this.lockGetFirstServerTime,i.getClientTime()),i.getServerTime(function(e){try{n.default.setItem(t._firstReportServerTime,e.data.data.time),n.default.removeItem(t.lockGetFirstServerTime)}catch(o){}}))},t.prototype.getFirstReportServerTime=function(){return n.default.getItem(this._firstReportServerTime)},t.prototype.removeFirstReportServerTime=function(){return n.default.removeItem(this._firstReportServerTime)},t.prototype.setFirstReportClientTime=function(){n.default.setItem(this._firstReportClientTime,i.getClientTime())},t.prototype.getFirstReportClientTime=function(){return n.default.getItem(this._firstReportClientTime)},t.prototype.removeFirstReportClientTime=function(){return n.default.removeItem(this._firstReportClientTime)},t}();o.default=new r,cc._RF.pop()},{"./LocalStorage":"LocalStorage","./function":"function"}],TipManager:[function(t,e,o){"use strict";cc._RF.push(e,"af1fbFfj9NOVZXQiN8aiZyJ","TipManager"),o.Tip=void 0;var i=t("./LanguageManager"),n=function(){function t(){}return t.prototype.show=function(t,e){return void 0===e&&(e=.8),__awaiter(this,void 0,Promise,function(){var o,n;return __generator(this,function(r){switch(r.label){case 0:return[4,this.getText()];case 1:return(o=r.sent())?(n=o.node.parent,o.string=i.default.formatStr(t),n.active=!0,n.stopAllActions(),n.setPosition(cc.v2(0,-60)),n.opacity=0,cc.tween(n).by(.3,{position:cc.v3(0,60,0),opacity:255}).delay(e).by(.3,{position:cc.v3(0,60,0),opacity:-255}).call(function(){n.destroy()}).start(),[2]):[2]}})})},t.prototype.getText=function(){return new Promise(function(t){var e=cc.find("Canvas");cc.resources.load("prefab/common/Tip",function(o,i){if(o)return t(null);var n=cc.instantiate(i);n.active=!1,e.addChild(n),t(n.getChildByName("Label Text").getComponent(cc.Label))})})},t}();o.Tip=new n,cc._RF.pop()},{"./LanguageManager":"LanguageManager"}],Tip:[function(t,e,o){"use strict";cc._RF.push(e,"29c90Bb3+lAM5xYQ661FwtQ","Tip");var i=t("./BaseUI"),n=t("./ConfigConst"),r=t("./EventConst"),a=t("./PlatformConst"),s=t("./UserConst"),c=t("./ConfigManager"),l=t("./EventManager"),h=t("./PlatformManager"),d=t("./PopupManager"),u=t("./ResManager"),p=t("./UserManager"),f=t("./OPPOAndroidAdUtils"),g=t("./OPPOMiniADUtils"),m=t("./XMADUtils"),v=cc._decorator,y=v.ccclass,_=(v.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("defineBtn",this.clickDefine,this),this.initView(),l.Event.emit(r.default.TIP_BTN_ANIM,!1,"test")},e.prototype.onEnable=function(){h.Platform.is(a.EPlatform.XIAOMI_ANDROID)?m.XMAD.showBannerFeed():h.Platform.is(a.EPlatform.OPPO_ANDROID)?f.OPPOAndroidAd.showLargeFeed():h.Platform.is(a.EPlatform.OPPO)&&g.OPPOMiniAD.showLargeFeed()},e.prototype.onDisable=function(){h.Platform.is(a.EPlatform.OPPO_ANDROID)&&f.OPPOAndroidAd.removeLargePicFeed(),h.Platform.hideNativeAds()},e.prototype.initView=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,i,r,a,l=this;return __generator(this,function(h){switch(h.label){case 0:return t=p.User.getTempData(s.TempData.CURRENT_LEVEL_ID),e="zqddn_zhb/prefab/tips/zqddn_zhb_tip"+t,this.dict.text.active=!1,this.dict.img.active=!1,[4,c.Config.get(n.ConfigConst.TIP)];case 1:for(o=h.sent(),i=0;i<o.length;i++)o[i].stageID==t&&(2==o[i].tipsType?(this.dict.img.active=!0,u.Res.load(e).then(function(t){var e=cc.instantiate(t);e.position=cc.v2(),l.dict.img.addChild(e)}).catch(function(){console.log("\u6ca1\u6709\u63d0\u793a"),cc.loader.loadRes("zqddn_zhb/prefab/tips/zqddn_zhb_tip-picture",function(e,o){if(e)return cc.error(e);if(o){var i=cc.instantiate(o);-1!=i.name.indexOf("zqddn_zhb_tip-picture")&&(i.assetName=t),l.dict.img.addChild(i),i.setPosition(0,0),i.scale=1}})})):(this.dict.text.active=!0,this.dict.text.getComponent(cc.Label).string=o[i].text));return r=p.User.getTempData(s.TempData.CURRENT_LEVEL),a=p.User.getTempData(s.TempData.CURRENT_MODE),cc.game.emit("gamelog","Level_Tips_"+a+"_"+r),[2]}})})},e.prototype.clickDefine=function(){d.default.hide()},__decorate([y],e)}(i.default));o.default=_,cc._RF.pop()},{"./BaseUI":"BaseUI","./ConfigConst":"ConfigConst","./ConfigManager":"ConfigManager","./EventConst":"EventConst","./EventManager":"EventManager","./OPPOAndroidAdUtils":"OPPOAndroidAdUtils","./OPPOMiniADUtils":"OPPOMiniADUtils","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager","./ResManager":"ResManager","./UserConst":"UserConst","./UserManager":"UserManager","./XMADUtils":"XMADUtils"}],ToastManager:[function(t,e,o){"use strict";cc._RF.push(e,"33b68u7R09F36epuHG+j3TN","ToastManager");var i=t("./AssetManager"),n=new(function(){function t(){this.prefab=null}return t.prototype.show=function(t,e){return void 0===e&&(e=.8),__awaiter(this,void 0,void 0,function(){var o,n;return __generator(this,function(r){switch(r.label){case 0:return this.prefab?[3,2]:(o=this,[4,i.default.getRes("bundle","prefab/Toast",cc.Prefab)]);case 1:o.prefab=r.sent(),r.label=2;case 2:return n=cc.instantiate(this.prefab),cc.find("Canvas").addChild(n),n.getChildByName("text").getComponent(cc.Label).string=t,n.active=!0,n.stopAllActions(),n.setPosition(cc.v2(0,-60)),n.opacity=0,cc.tween(n).by(.3,{position:cc.v3(0,60,0),opacity:255}).delay(e).by(.3,{position:cc.v3(0,60,0),opacity:-255}).call(function(){n.destroy()}).start(),[2]}})})},t}());o.default=n,cc._RF.pop()},{"./AssetManager":"AssetManager"}],Tools:[function(t,e,o){"use strict";cc._RF.push(e,"0e3522OE29LSJwPKn6/U/O/","Tools");var i=function(){function t(){}return t.deepClone=function(t){var e;for(var o in e=t instanceof Array?[]:{},t)e[o]="object"==typeof t[o]?this.deepClone(t[o]):t[o];return e},t.shuffleArray=function(t){for(var e,o=t.length-1;o>0;o--){var i=Math.floor(Math.random()*(o+1));e=[t[i],t[o]],t[o]=e[0],t[i]=e[1]}return t},t.isNationalDay=function(){var t=new Date,e=t.getMonth()+1,o=t.getDate();return 10==e&&o<=7},t.rockAction=function(t,e,o){var i=cc.rotateBy(t,e),n=cc.rotateBy(t,-2*e),r=cc.rotateBy(.8*t,1.6*e),a=cc.rotateBy(.6*t,-2*e*.6),s=cc.rotateBy(.4*t,.8*e),c=cc.rotateTo(.2*t,0);return cc.sequence(i,n,r,a,s,c,cc.callFunc(function(){console.log("\u52a8\u753b\u5e8f\u5217\u5b8c\u6210"),o()},this))},t}();o.default=i,cc._RF.pop()},{}],TopBar:[function(t,e,o){"use strict";cc._RF.push(e,"d961c44celOt79AcjzUSiXb","TopBar");var i=t("./BaseUI"),n=t("./EventConst"),r=t("./PlatformConst"),a=t("./EventManager"),s=t("./PlatformManager"),c=cc._decorator,l=c.ccclass,h=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.key=null,e.power=null,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("backBtn",this.clickBack,this),this.addBtnOn("backBtn_tt",this.clickBack,this),this.addBtnOn("backBtn_ks",this.clickBack,this),this.initPlatformUI()},e.prototype.initPlatformUI=function(){this.dict.normal.active=!1,this.dict.tt.active=!1,this.dict.ks.active=!1,s.Platform.getConfig().fitUIType==r.FitUIType.TT?this.dict.tt.active=!0:s.Platform.getConfig().fitUIType==r.FitUIType.KS?this.dict.ks.active=!0:this.dict.normal.active=!0},e.prototype.clickBack=function(){a.Event.emit(n.default.CLICK_BACK)},__decorate([l],e)}(i.default));o.default=h,cc._RF.pop()},{"./BaseUI":"BaseUI","./EventConst":"EventConst","./EventManager":"EventManager","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager"}],TouchSound:[function(t,e,o){"use strict";cc._RF.push(e,"b953e1zrb9M/qKTsTH7RYXQ","TouchSound");var i=cc._decorator,n=i.ccclass,r=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickSound=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchStart,this),this.node._touchListener&&this.node._touchListener.setSwallowTouches(!1)},e.prototype.onTouchStart=function(){cc.audioEngine.playEffect(this.clickSound,!1)},__decorate([r({type:cc.AudioClip})],e.prototype,"clickSound",void 0),__decorate([n],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],Turntable:[function(t,e,o){"use strict";cc._RF.push(e,"e944ei19ehFxo7LklRZkxQg","Turntable");var i=cc._decorator,n=i.ccclass,r=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.diskNode=null,e.startAngle=33,e.angleInterval=50,e.itemAmount=7,e._isRunning=!1,e}return __extends(e,t),e.prototype.startRun=function(t,e){if(!this._isRunning){for(var o=[],i=0;i<this.itemAmount;i++){var n=this.startAngle+this.angleInterval*i;o.push(n)}for(var r=-this.diskNode.angle;r<0;)r+=360;r-=360*Math.floor(r/360);var a=1800+o[t-1]-r,s=4+2*Math.random(),c=cc.rotateBy(s,a).easing(cc.easeCubicActionOut()),l=cc.callFunc(function(){this._isRunning=!1,console.log("\u8f6c\u52a8\u7ed3\u675f"),e&&e()}.bind(this)),h=cc.sequence(c,l);this.diskNode.runAction(h),this._isRunning=!0}},__decorate([r(cc.Node)],e.prototype,"diskNode",void 0),__decorate([r],e.prototype,"startAngle",void 0),__decorate([r],e.prototype,"angleInterval",void 0),__decorate([r],e.prototype,"itemAmount",void 0),__decorate([n],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],UIBase:[function(t,e,o){"use strict";var i;cc._RF.push(e,"3c3e2+0kq5ItpHlCU+eLtcW","UIBase");var n,r=t("./LocalStorageManager"),a=t("./MemoryStorageManager"),s=cc._decorator,c=s.ccclass;s.property,(n=i||(i={})).Local="local",n.Memory="memory";var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dict={},e.childNum=0,e.localStorageUIData={},e.memoryStorageUIData={},e}return __extends(e,t),e.prototype.onLoad=function(){this.loadNodeTree(this.node)},e.prototype.start=function(){this.onDataChange(i.Local),this.onDataChange(i.Memory),this._initView()},e.prototype.onDataChange=function(t){var e=this,o=function(o){cc.game.on(t+"Storage_"+o,function(){e.updateStorageView(t,o)},i)},i=this;for(var n in this[t+"StorageUIData"])o(n)},e.prototype.updateStorageView=function(t,e){switch(t){case i.Local:this[t+"StorageUIData"][e](r.default.get(e));break;case i.Memory:this[t+"StorageUIData"][e](a.default.get(e))}},e.prototype._initView=function(){for(var t in this.localStorageUIData)this.updateStorageView(i.Local,t);for(var t in this.memoryStorageUIData)this.updateStorageView(i.Memory,t)},e.prototype.onDestroy=function(){cc.game.targetOff(this)},e.prototype.loadNodeTree=function(t,e){if(void 0===e&&(e=""),"_"!=t.name[0]&&!t.name.includes("copy")){var o=e,i="";this.childNum&&(o=e+t.name,this.dict[t.name]?t.name:this.dict[t.name]=t,i=o+"/");for(var n=0;n<t.children.length;++n)this.childNum++,this.loadNodeTree(t.children[n],i)}},e.prototype.addBtnOn=function(t,e,o){var i=this.dict[t];if(!i)return cc.warn("\u6ca1\u6709"+t+"\u8be5\u8282\u70b9");i.getComponent(cc.Button)||i.addComponent(cc.Button);var n=i.getComponent(cc.Button);n.transition=cc.Button.Transition.SCALE,n.duration=.1,n.zoomScale=1.2,i.on(cc.Node.EventType.TOUCH_END,function(){cc.game.emit("playClickAudio"),e.call(o)},this)},__decorate([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./LocalStorageManager":"LocalStorageManager","./MemoryStorageManager":"MemoryStorageManager"}],UniversalCardItem:[function(t,e,o){"use strict";cc._RF.push(e,"2e891Su6qpKDKjYfQ87MvG7","UniversalCardItem");var i=t("./PopupConst"),n=t("./UIBase"),r=t("./LocalStorageConst"),a=t("./LocalStorageManager"),s=t("./PopupManager"),c=cc._decorator,l=c.ccclass,h=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this);var e=a.default.get(r.default.cardAmount)||0;a.default.set(r.default.cardAmount,e),this.localStorageUIData[r.default.cardAmount]=this.updateCardAmount.bind(this)},e.prototype.updateCardAmount=function(t){this.dict.cardAmount.getComponent(cc.Label).string=""+t},e.prototype.clickSelf=function(){s.default.show(i.PopupConst.UniversalCard)},__decorate([l],e)}(n.default));o.default=h,cc._RF.pop()},{"./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./UIBase":"UIBase"}],UniversalCard:[function(t,e,o){"use strict";cc._RF.push(e,"8ec22Jzh6RAn4URso/Tx6Qe","UniversalCard");var i=t("./UIBase"),n=t("./LocalStorageConst"),r=t("./PopupManager"),a=t("./PaymentSystem"),s=t("./ShuShuConst"),c=cc._decorator,l=c.ccclass,h=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.node.setContentSize(cc.winSize),this.localStorageUIData[n.default.cardAmount]=this.updateCardAmount.bind(this),this.localStorageUIData[n.default.starter_pack]=this.updatestarter_pack.bind(this),this.addBtnOn("cardBtn0",this.buyBtn.bind(this,"small_st"),this),this.addBtnOn("cardBtn1",this.buyBtn.bind(this,"medium_st"),this),this.addBtnOn("cardBtn2",this.buyBtn.bind(this,"big_st"),this),this.addBtnOn("cardBtn3",this.buyBtn.bind(this,"huge_st"),this),this.addBtnOn("cardBtn4",this.buyBtn.bind(this,"mega_st"),this),this.addBtnOn("cardBtn5",this.buyBtn.bind(this,"brilliant_st"),this),cc.game.emit("gamelog_Thinking",s.ShuShuConst.Gift_page,{id:3});for(var e=["small_st","medium_st","big_st","huge_st","mega_st","brilliant_st"],o=0;o<this.dict.layout.children.length;o++){var i=this.dict.layout.children[o].getChildByName("money"),r=e[o];a.default.getGoodsLocalPrice(i,r)}},e.prototype.buyBtn=function(t){a.default.clickBuy(t)},e.prototype.updateCardAmount=function(t){this.dict.cardAmount.getComponent(cc.Label).string=""+t},e.prototype.updatestarter_pack=function(t){t&&(this.dict.universalCard.y=534.669)},e.prototype.start=function(){t.prototype.start.call(this),this.addBtnOn("noBtn",this.noBtn,this)},e.prototype.noBtn=function(){console.log("\u6d4b\u8bd5"),r.default.hide()},__decorate([l],e)}(i.default));o.default=h,cc._RF.pop()},{"./LocalStorageConst":"LocalStorageConst","./PaymentSystem":"PaymentSystem","./PopupManager":"PopupManager","./ShuShuConst":"ShuShuConst","./UIBase":"UIBase"}],UnlockAllMode:[function(t,e,o){"use strict";cc._RF.push(e,"76aacn2K35FO6UrYuKVWKRn","UnlockAllMode");var i=t("./BaseUI"),n=t("./EventConst"),r=t("./PlatformConst"),a=t("./UserConst"),s=t("./EventManager"),c=t("./LanguageManager"),l=t("./PlatformManager"),h=t("./PopupManager"),d=t("./TipManager"),u=t("./UserManager"),p=t("./OPPOAndroidAdUtils"),f=t("./OPPOMiniADUtils"),g=t("./XMADUtils"),m=cc._decorator,v=m.ccclass,y=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isEnterUgc=!1,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("giveUpBtn",this.clickGiveUp,this),this.addBtnOn("videoBtn",this.clickVideo,this),this.initView()},e.prototype.onEnable=function(){l.Platform.is(r.EPlatform.XIAOMI_ANDROID)?g.XMAD.showBannerFeed():l.Platform.is(r.EPlatform.OPPO_ANDROID)?p.OPPOAndroidAd.showLargeFeed():l.Platform.is(r.EPlatform.OPPO)&&f.OPPOMiniAD.showLargeFeed()},e.prototype.onDisable=function(){l.Platform.is(r.EPlatform.OPPO_ANDROID)&&p.OPPOAndroidAd.removeLargePicFeed(),l.Platform.hideNativeAds()},e.prototype.initView=function(){var t=u.User.get(a.UserData.UNLOCK_ALL_MODE_VIDEO_TIMES)||0;u.User.set(a.UserData.UNLOCK_ALL_MODE_VIDEO_TIMES,t),this.dict.amount.getComponent(cc.Label).string=c.default.formatStr("\u9886\u53d6(%d/2)",t)},e.prototype.clickGiveUp=function(){h.default.hide()},e.prototype.clickVideo=function(){var t=this;console.log("\u70b9\u51fb\u770b\u89c6\u9891\u89e3\u9501"),l.Platform.showRewardAds(function(e){if(0==e){cc.game.emit("gamelog","rewarde_btn013");var o=u.User.get(a.UserData.UNLOCK_ALL_MODE_VIDEO_TIMES)+1;if(u.User.set(a.UserData.UNLOCK_ALL_MODE_VIDEO_TIMES,o),t.initView(),1==o)d.Tip.show(c.default.formatStr("\u8fd8\u9700\u518d\u770b1\u6b21\u6fc0\u52b1\u89c6\u9891\u89e3\u9501\u5168\u4e3b\u9898"));else{d.Tip.show(c.default.formatStr("\u5df2\u89e3\u9501\u6240\u6709\u4e3b\u9898"));var i=u.User.get(a.UserData.LEVEL_LIST),r=[];for(var l in i)r.push(Number(l));u.User.set(a.UserData.UNLOCK_MODE_LIST,r),s.Event.emit(n.default.updateUnlockAllMode,!0),h.default.hide()}}})},__decorate([v],e)}(i.default));o.default=y,cc._RF.pop()},{"./BaseUI":"BaseUI","./EventConst":"EventConst","./EventManager":"EventManager","./LanguageManager":"LanguageManager","./OPPOAndroidAdUtils":"OPPOAndroidAdUtils","./OPPOMiniADUtils":"OPPOMiniADUtils","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager","./TipManager":"TipManager","./UserConst":"UserConst","./UserManager":"UserManager","./XMADUtils":"XMADUtils"}],UnlockNewMode:[function(t,e,o){"use strict";cc._RF.push(e,"4ebeebNimtDN5EWQONLhanr","UnlockNewMode");var i=t("./BaseUI"),n=t("./EventConst"),r=t("./PlatformConst"),a=t("./UserConst"),s=t("./EventManager"),c=t("./LanguageManager"),l=t("./PlatformManager"),h=t("./PopupManager"),d=t("./UserManager"),u=t("./ConfigUtils"),p=t("./OPPOAndroidAdUtils"),f=t("./OPPOMiniADUtils"),g=t("./Utils"),m=t("./XMADUtils"),v=cc._decorator,y=v.ccclass,_=(v.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isEnterUgc=!1,e.isLoadingScene=!1,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("giveUpBtn",this.clickGiveUp,this),this.addBtnOn("videoBtn",this.clickVideo,this),this.initView()},e.prototype.onEnable=function(){l.Platform.is(r.EPlatform.XIAOMI_ANDROID)?m.XMAD.showBannerFeed():l.Platform.is(r.EPlatform.OPPO_ANDROID)?p.OPPOAndroidAd.showLargeFeed():l.Platform.is(r.EPlatform.OPPO)&&f.OPPOMiniAD.showLargeFeed()},e.prototype.onDisable=function(){l.Platform.is(r.EPlatform.OPPO_ANDROID)&&p.OPPOAndroidAd.removeLargePicFeed(),l.Platform.hideNativeAds()},e.prototype.initView=function(){var t=this,e=g.Utils.randomNum(80,92);this.dict.rate.getComponent(cc.Label).string=c.default.formatStr("\u8d85\u8fc7%d%\u7684\u73a9\u5bb6\u89e3\u9501\u8be5\u4e3b\u9898",e);var o=d.User.getTempData(a.TempData.CURRENT_MODE_UNLOCK_ID);cc.resources.load("texture/newBanner/"+o,function(e,o){if(e)return console.log(e);t.dict.img.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o)})},e.prototype.clickGiveUp=function(){h.default.hide()},e.prototype.clickVideo=function(){var t=this,e=d.User.getTempData(a.TempData.CURRENT_MODE_UNLOCK_ID);console.log("\u70b9\u51fb\u770b\u89c6\u9891\u89e3\u9501"),l.Platform.showRewardAds(function(o){if(0==o){if(t.isEnterUgc)return;cc.game.emit("gamelog","rewarde_btn011"),t.isEnterUgc=!0;var i=d.User.get(a.UserData.UNLOCK_MODE_LIST)||[];i.push(e),d.User.set(a.UserData.UNLOCK_MODE_LIST,i),t.sucEnterByMode(e),h.default.hideAll()}})},e.prototype.sucEnterByMode=function(t){if(!this.isLoadingScene){this.isLoadingScene=!0,d.User.setTempData(a.TempData.CURRENT_MODE,t);var e=d.User.get(a.UserData.LEVEL_LIST);u.ConfigUtils.setNextModeID();var o=1;u.ConfigUtils.getDataByID(t,function(i){o=i.amount,e[t]>o?d.User.setTempData(a.TempData.CURRENT_LEVEL,1):d.User.setTempData(a.TempData.CURRENT_LEVEL,e[t]),s.Event.emit(n.default.enterNewMode)})}},__decorate([y],e)}(i.default));o.default=_,cc._RF.pop()},{"./BaseUI":"BaseUI","./ConfigUtils":"ConfigUtils","./EventConst":"EventConst","./EventManager":"EventManager","./LanguageManager":"LanguageManager","./OPPOAndroidAdUtils":"OPPOAndroidAdUtils","./OPPOMiniADUtils":"OPPOMiniADUtils","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager","./UserConst":"UserConst","./UserManager":"UserManager","./Utils":"Utils","./XMADUtils":"XMADUtils"}],UnlockUgc:[function(t,e,o){"use strict";cc._RF.push(e,"b269aaeNGdJMbqtA+vZfflg","UnlockUgc");var i=t("./BaseUI"),n=t("./PlatformConst"),r=t("./SceneConst"),a=t("./UserConst"),s=t("./PlatformManager"),c=t("./PopupManager"),l=t("./SceneManager"),h=t("./UserManager"),d=t("./OPPOAndroidAdUtils"),u=t("./OPPOMiniADUtils"),p=t("./XMADUtils"),f=cc._decorator,g=f.ccclass,m=(f.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isEnterUgc=!1,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addBtnOn("giveUpBtn",this.clickGiveUp,this),this.addBtnOn("videoBtn",this.clickVideo,this),this.initView()},e.prototype.onEnable=function(){s.Platform.is(n.EPlatform.XIAOMI_ANDROID)?p.XMAD.showBannerFeed():s.Platform.is(n.EPlatform.OPPO_ANDROID)?d.OPPOAndroidAd.showLargeFeed():s.Platform.is(n.EPlatform.OPPO)&&u.OPPOMiniAD.showLargeFeed()},e.prototype.onDisable=function(){s.Platform.is(n.EPlatform.OPPO_ANDROID)&&d.OPPOAndroidAd.removeLargePicFeed(),s.Platform.hideNativeAds()},e.prototype.initView=function(){cc.game.emit("gamelog","page014")},e.prototype.clickGiveUp=function(){c.default.hide()},e.prototype.clickVideo=function(){var t=this;cc.game.emit("gamelog","btn030"),s.Platform.showRewardAds(function(e){if(0==e){if(t.isEnterUgc)return;cc.game.emit("gamelog","rewarde_btn008"),t.isEnterUgc=!0,h.User.set(a.UserData.isUnlockUgc,1),l.default.loadScene(r.SceneConst.UGC)}})},__decorate([g],e)}(i.default));o.default=m,cc._RF.pop()},{"./BaseUI":"BaseUI","./OPPOAndroidAdUtils":"OPPOAndroidAdUtils","./OPPOMiniADUtils":"OPPOMiniADUtils","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupManager":"PopupManager","./SceneConst":"SceneConst","./SceneManager":"SceneManager","./UserConst":"UserConst","./UserManager":"UserManager","./XMADUtils":"XMADUtils"}],UserConst:[function(t,e,o){"use strict";var i;cc._RF.push(e,"307dbBRzABCz7bNYWt0S5Su","UserConst"),o.UserData=o.TempData=void 0,(i=o.TempData||(o.TempData={})).CURRENT_MODE="current_mode",i.CURRENT_MODE_TOP_LEVEL="current_mode_top_level",i.CURRENT_LEVEL="current_level",i.CURRENT_LEVEL_ID="current_level_id",i.CURRENT_ALL_MODE="current_all_mode",i.NEXT_MODE_ID="next_mode_id",i.POWER_TYPE="power_type",i.IS_INFINITE_POWER="is_infinite_power",i.IS_NO_AD="is_no_ad",i.IS_WIN="is_win",i.CURRENT_MODE_UNLOCK_ID="current_mode_unlock_id",i.CURRENT_PLAY_TIMES="current_play_times",i.current_key_type="current_key_type",i.cryHelpList="cryHelpList",i.screenshotStr="screenshotStr",i.isUnlockTip="isUnlockTip",i.isFirst="isFirst",i.isFirstBack="isFirstBack",i.wxTestParameter="wxTestParameter",function(t){t.POWER="power",t.KEY="key",t.RECOVERY_TIME="recoveryTime",t.LEVEL_LIST="levelList",t.INF_POWER_VIDEO_TIMES="infPowerVideoTimes",t.UNLOCK_ALL_MODE_VIDEO_TIMES="unlockAllModeVideoTimes",t.INF_POWER_START_TIME="infPowerStartTime",t.FIRST_DAY_DATE="firstDayDate",t.isUnlockUgc="isUnlockUgc",t.UNLOCK_MODE_LIST="unlock_mode_list",t.IS_COMMENT="is_comment",t.LEVEL_COMMENT_MARK="levelCommentMark",t.hasUseKey="hasUseKey",t.cryHelpTimes="cryHelpTimes",t.offlineTime="offlineTime",t.isFollow="isFollow",t.IS_COMPATIBLE_233="isCompatible_233_tt_tt",t.ALREADY_PLAY="alreadyPlay",t.ALREADY_UNLOCK="alreadyUnlock",t.loginDaysTimes="loginDaysTimes",t.mode0LevelList_stage1ID="mode0LevelList_stage1ID",t.mode0LevelList_stage2ID="mode0LevelList_stage2ID",t.mode1LevelList_stage1ID="mode1LevelList_stage1ID",t.mode1LevelList_stage2ID="mode1LevelList_stage2ID",t.mode2LevelList_stage1ID="mode2LevelList_stage1ID",t.mode2LevelList_stage2ID="mode2LevelList_stage2ID",t.mode3LevelList_stage1ID="mode3LevelList_stage1ID",t.mode3LevelList_stage2ID="mode3LevelList_stage2ID",t.skinList="skinList",t.useSkinIDList="useSkinIDList",t.getLockSkinList="getLockSkinList",t.signInDays="signInDays",t.todaySignIn="todaySignIn",t.todayFirstPass="todayFirstPass",t.todayFirstPassChallenge="todayFirstPassChallenge",t.EnterSidebar="EnterSidebar",t.isFirstShared="isFirstShared",t.getBoreByShareTimes="getBoreByShareTimes",t.getTipShareTimes="getTipShareTimes",t.getResetByShareTimes="getResetByShareTimes",t.getDelayedByShareTimes="getDelayedByShareTimes",t.boreTimes="boreTimes",t.tipTimes="tipTimes",t.screwBoxTimes="screwBoxTimes",t.screwBoxInfinite="screwBoxInfinite",t.todayShareOrVideoTimes="todayShareOrVideoTimes",t.todayChallengeTimes="todayChallengeTimes",t.challengeSucTimes="challengeSucTimes",t.todayChallengeModeSuc="todayChallengeModeSuc",t.todayChallengeModeFail="todayChallengeModeFail",t.EnterDifficultyTimes="EnterDifficultyTimes",t.OpenNum="OpenNum",t.PlayDays="PlayDays"}(o.UserData||(o.UserData={})),cc._RF.pop()},{}],UserManager:[function(t,e,o){"use strict";cc._RF.push(e,"ccac2FwSaVHbrrHai/vHFRO","UserManager"),o.User=void 0;var i=t("./UserConst"),n=function(){function t(){this.prefix="walkFast",this.defaultData={},this.data={},this.tempData={};var t=this.get("offlineTime")||(new Date).getTime();this.set("offlineTime",t);var e=(new Date).getDate(),o=this.get(i.UserData.loginDaysTimes)||1;this.set(i.UserData.loginDaysTimes,o);var n=this.get("newUserTimes")||1;this.set("newUserTimes",n);var r=this.get("PlayDays")||1;this.set("PlayDays",r),new Date(this.data.offlineTime).getDate()!=e&&(console.log("\u65b0\u7684\u4e00\u5929"),this.set("cryHelpTimes",0),this.set("todaySignIn",0),this.set("todaySignInNationalDay",0),this.set("offlineTime",(new Date).getTime()),this.set("todayOpenSignIn",!1),this.set(i.UserData.loginDaysTimes,o+1),this.set("newUserTimes",n+1),this.set(i.UserData.todayFirstPass,0),this.set(i.UserData.isFirstShared,!1),this.set(i.UserData.getBoreByShareTimes,2),this.set(i.UserData.getTipShareTimes,2),this.set(i.UserData.getResetByShareTimes,2),this.set(i.UserData.getDelayedByShareTimes,2),this.set(i.UserData.todayShareOrVideoTimes,0),this.set(i.UserData.todayChallengeTimes,0),this.set("dailyShareFriendTimes",0),this.set("dailyShareRecordTimes",0),this.set(i.UserData.todayChallengeModeSuc,[]),this.set(i.UserData.todayChallengeModeFail,[]),this.set("tipWanTimes",0),this.set("isGetBore",0),this.set("PlayDays",r+1),this.set("EnterSidebar",0))}return t.prototype.get=function(t){return this.getData(t)},t.prototype.set=function(t,e){this.data[t]=e,this.save()},t.prototype.getTempData=function(t){return this.tempData[t]},t.prototype.setTempData=function(t,e){this.tempData[t]=e},t.prototype.save=function(){for(var t in this.data)cc.sys.localStorage.setItem(this.prefix+"_"+t,JSON.stringify(this.data[t]))},t.prototype.getData=function(t){var e=this.data[t];if(void 0!==e)return e;try{var o=JSON.parse(cc.sys.localStorage.getItem(this.prefix+"_"+t))||this.defaultData[t]||null;return this.data[t]=o,o}catch(i){return this.defaultData[t]||null}},t}();o.User=new n,cc._RF.pop()},{"./UserConst":"UserConst"}],Utils:[function(t,e,o){"use strict";cc._RF.push(e,"8a199m3gVFNkqGoD+x8CL9a","Utils"),o.Utils=void 0;var i=function(){function t(){}return t.randomNum=function(t,e){var o=e-t,i=Math.random();return t+Math.round(i*o)},t.secondFormat=function(t,e,o){void 0===e&&(e=2),void 0===o&&(o=!1);var i,n,r,a=t/3600,s=(t%=3600)/60,c=t%=60;i=(a=Math.floor(a))>=10?a+"":"0"+a,n=(s=Math.floor(s))>=10?s+"":"0"+s,r=(c=Math.floor(c))>=10?c+"":"0"+c,o&&(c=100*c/60,r=(c=Math.floor(c))>=10?c+"":"0"+c);var l=i+":"+n+":"+r;switch(e){case 2:l=n+":"+r}return l},t.getRandomItemsFromArray=function(t,e){if(!(e>t.length)){for(var o=[],i=t.slice(),n=0;n<e;n++){var r=Math.floor(Math.random()*i.length);o.push(i[r]),i.splice(r,1)}return o}},t.calculateDifferenceBetweenTimes=function(t,e){var o=Math.abs(t-e);return{days:o/864e5,hours:o/36e5%24}},t.randomByWeight=function(t){for(var e=[],o=[],i=0;i<t.length;i++)e.push(t[i][0]),o.push(t[i][1]);var n=0,r=0,a=Math.random();for(i=o.length-1;i>=0;i--)n+=o[i];for(a*=n,i=o.length-1;i>=0;i--)if(a<=(r+=o[i]))return e[i];return null},t.nodeShot=function(t){return __awaiter(this,void 0,Promise,function(){var e,o;return __generator(this,function(){return(e=new cc.Node).parent=cc.director.getScene().children[0],this.camera=e.addComponent(cc.Camera),this.camera.enabled=!0,this.camera.cullingMask=4294967295,this.initNode(t),this.camera.render(t),this.camera.enabled=!1,o=new cc.SpriteFrame(this.texture),this.camera.node.destroy(),[2,o]})})},t.initNode=function(t){var e=new cc.RenderTexture,o=cc.game._renderContext;e.initWithSize(t.width,t.height,o.STENCIL_INDEX8),this.camera.targetTexture=e,this.texture=e},t.paramObj=function(t){for(var e,o=/([^&=]+)=?([^&]*)/g,i=/\+/g,n=function(t){return decodeURIComponent(t.replace(i," "))},r={};e=o.exec(t);)r[n(e[1])]=n(e[2]);return r},t}();o.Utils=i,cc._RF.pop()},{}],VIPSystem:[function(t,e,o){"use strict";cc._RF.push(e,"62a3cUDSBpAx7vj0LlIgCaQ","VIPSystem");var i=t("./LocalStorageConst"),n=t("./LocalStorageManager"),r=t("./MemoryStorageConst"),a=t("./MemoryStorageManager"),s=t("./TimeManager"),c=t("./LanguageManager"),l=new(function(){function t(){this.vipIndexArr=[3,7,30],this.cardRewardArr=[5,20,60],this.surplusTime=0,this.surplusTimeID=null}return t.prototype.init=function(){var t=this,e=!1,o=s.default.getCurrentTime(),c=n.default.get(i.default.vipStartTime)||0,l=n.default.get(i.default.vipType)||3;c&&(864e5*l-(o-c)>0?e=!0:n.default.set(i.default.vipStartTime,0)),a.default.set(r.default.isVIP,e),e?(l=n.default.get(i.default.vipType)||3,c=n.default.get(i.default.vipStartTime)||o,this.surplusTime=864e5*l-(o-c),this.surplusTimeID=setInterval(function(){t.surplusTime-=1e4,t.surplusTime<=0&&(clearInterval(t.surplusTimeID),console.log("vip\u5230\u671f"),cc.game.emit("vipExpire"))},1e4)):n.default.set(i.default.vipType,3)},t.prototype.getSurplusTimeStr=function(){var t=s.default.getCurrentTime(),e=864e5*(n.default.get(i.default.vipType)||3)-(t-(n.default.get(i.default.vipStartTime)||t)),o=e/864e5,r=e/36e5%24;return console.log("VIP\u5269\u4f59\u65f6\u95f4:",e,Math.floor(o)+"\u5929"+Math.floor(r)+"\u65f6"),c.default.formatStr("%d\u5929%d\u65f6",Math.floor(o),Math.floor(r))},t}());o.default=l,cc._RF.pop()},{"./LanguageManager":"LanguageManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./MemoryStorageConst":"MemoryStorageConst","./MemoryStorageManager":"MemoryStorageManager","./TimeManager":"TimeManager"}],VIVOADUtils:[function(t,e,o){"use strict";cc._RF.push(e,"1fbf3r58jJOyZSzikUh0GPD","VIVOADUtils"),o.VIVOAD=void 0;var i=t("./BmsManager"),n=t("./PlatformManager"),r=function(){function t(){}return t.prototype.showCustomAd_1=function(t){var e=i.BMS.getKey("openads");console.log("openads",e),e&&n.Platform.showCustomAd_1(n.Platform.getConfig().customAd_topImg_bottomText,t)},t.prototype.showCustomAd_2=function(){var t=i.BMS.getKey("openads");console.log("openads",t),t&&n.Platform.showCustomAd_2(n.Platform.getConfig().customAd_leftImg_rightText)},t.prototype.showInsert=function(){var t=i.BMS.getKey("openvideo");console.log("openvideo",t),t&&n.Platform.showInsert()},t}();o.VIVOAD=new r,cc._RF.pop()},{"./BmsManager":"BmsManager","./PlatformManager":"PlatformManager"}],VIVO:[function(t,e,o){"use strict";cc._RF.push(e,"0ff4dChPMNJLqctj43hfCOZ","VIVO"),o.VIVO=void 0;var i=t("./BasePlatform"),n=t("./AudioManager"),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sdk=window.qg,e._rewardAds=null,e._rewardAdsCb=null,e._rewardHasShow=!1,e._rewardHasLoad=!1,e._banner=null,e._insert=null,e._isMute=!1,e._nativeAds=[],e.musicVolume=null,e.musicMute=null,e.bgm=null,e.customAd_1=null,e.customAd_2=null,e.hideCb=null,e}return __extends(e,t),e.prototype.getInstance=function(){return this.sdk},e.prototype.showRewardAds=function(t){var e=this;return this.sdk.createRewardedVideoAd?this._config.rewardID?void(this._rewardAdsCb||(this.bgm=n.Audio.currentBgm,n.Audio.stopMusic(),this._rewardAdsCb=t,this._rewardHasShow=!1,this._rewardAds||(this._rewardAds=this.sdk.createRewardedVideoAd({posId:this._config.rewardID}),this._rewardAds.onLoad(function(){e._rewardHasLoad=!0,e._rewardHasShow||(e._rewardHasShow=!0,e._rewardAds.show())}),this._rewardAds.onClose(function(t){e._rewardHasLoad=!1,e._rewardAdsCb&&(e._rewardAdsCb(t.isEnded?0:1),e._rewardAdsCb=null,n.Audio.playMusic(e.bgm))}),this._rewardAds.onError(function(t){e._rewardHasLoad=!1,console.log("[platform] [VIVOPlatform] showRewardAds",t),e._rewardAdsCb&&(e._rewardAdsCb(-1),e._rewardAdsCb=null,n.Audio.playMusic(e.bgm))})),this._rewardHasLoad&&!this._rewardHasShow?(this._rewardHasShow=!0,this._rewardAds.show()):this._rewardAds.load())):t(-3):t(-2)},e.prototype.showBanner=function(t,e){void 0===t&&(t={id:""}),this.sdk.createBannerAd&&this._config.bannerID&&(this._banner||(this._banner=this.sdk.createBannerAd({posId:t.id||this._config.bannerID,style:{}}),this._banner.show().then(function(){e&&e(0)}).catch(function(){e&&e(1)}),this._banner.onError(function(t){console.log("[platform] [VIVOPlatform] showBanner",t)})))},e.prototype.hideBanner=function(){this._banner&&(this._banner.destroy(),this._banner=null)},e.prototype.showInsert=function(){var t=this;this.sdk.createInterstitialAd&&this._config.insertID&&(this._insert?this._insert.load().then(function(){t._insert.show().then(function(){}).catch(function(t){console.log("[platform] [VIVOPlatform] showInsert",t)})}):this._insert||(this._insert=this.sdk.createInterstitialAd({posId:this._config.insertID}),this._insert.onLoad(function(){t._insert&&t._insert.show().then(function(){}).catch(function(t){console.log("[platform] [VIVOPlatform] showInsert",t)})}),this._insert.onClose(function(){t._insert&&(t._insert.destroy(),t._insert=null)}),this._insert.onError(function(e){console.log("[platform] [ZJTDPlatform] showInsert",e),e&&1003==e.errCode&&t._insert&&(t._insert.destroy(),t._insert=null)})))},e.prototype.showNativeAds=function(t,e){var o=this;if(void 0===t&&(t={type:0,container:null}),this.sdk.createNativeAd&&this._config.nativeID){var i=this.sdk.createNativeAd({posId:t.id||this._config.nativeID});t.container.opacity=255,this._nativeAds.push({ads:i,container:t.container}),i.onLoad(function(n){var r;r=n.adList?n.adList[0]:null,0!=t.container.opacity&&(i&&r&&(i.reportAdShow({adId:r.adId}),0==t.type?o.showNativeBanner(r,i,t):1==t.type?o.showNativeInsert(r,i,t):o.showNativeIcon(r,i,t)),i.offError(),i.offLoad()),e&&e(0)}),i.onError(function(n){if(console.log("[platform] [VIVOPlatform] showNativeAd",n),t&&t.container){t.container.active=!1,t.container.opacity=0;var r=o._nativeAds.findIndex(function(e){return e.container.name==t.container.name});-1!=r&&o._nativeAds.splice(r,1)}i.offError(),i.offLoad(),i=null,e&&e(1)}),i&&i.load()}},e.prototype.hideNativeAds=function(){if(this._nativeAds.length){var t=this._nativeAds.pop();if(cc.isValid(t.container,!0)){t.container.opacity=0,t.container.active=!1,t.container.off(cc.Node.EventType.TOUCH_START);var e=t.container.getChildByName("close");e&&e.off(cc.Node.EventType.TOUCH_START);var o=t.container.getChildByName("next");o&&o.off(cc.Node.EventType.TOUCH_START)}}},e.prototype.showNativeBanner=function(t,e,o){var i=this;void 0===o&&(o={type:0,container:null});var n=o.container,r=n.getChildByName("img")||n.getChildByName("mask").getChildByName("img"),a=n.getChildByName("title"),s=n.getChildByName("desc"),c=n.getChildByName("btnText"),l=n.getChildByName("close");if(n.active=!0,n.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),i.hideNativeAds(),o.hideCb&&o.hideCb()},this),l&&l.once(cc.Node.EventType.TOUCH_START,function(){o.isMistakeClose?(e.reportAdClick({adId:t.adId}),i.hideNativeAds()):i.hideNativeAds(),o.hideCb&&o.hideCb()}),a&&(a.getComponent(cc.Label).string=""+t.title),s&&(s.getComponent(cc.Label).string=""+t.desc),c&&(c.getComponent(cc.Label).string=""+(t.clickBtnTxt||"\u70b9\u51fb\u67e5\u770b")),r){var h=t.imgUrlList[Math.floor(Math.random()*t.imgUrlList.length)];cc.assetManager.loadRemote(h,{ext:".png"},function(t,e){!t&&r&&(r.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e))})}},e.prototype.showNativeInsert=function(t,e,o){var i=this;void 0===o&&(o={type:0,container:null});var n=o.container,r=n.getChildByName("img")||n.getChildByName("mask").getChildByName("img"),a=n.getChildByName("title"),s=n.getChildByName("desc"),c=n.getChildByName("btnText"),l=n.getChildByName("next"),h=n.getChildByName("close");if(n.active=!0,n.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),i.hideNativeAds(),o.hideCb&&o.hideCb()},this),l&&l.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),i.hideNativeAds(),o.hideCb&&o.hideCb()},this),h&&h.once(cc.Node.EventType.TOUCH_START,function(){o.isMistakeClose?(e.reportAdClick({adId:t.adId}),i.hideNativeAds()):i.hideNativeAds(),o.hideCb&&o.hideCb()}),a&&(a.getComponent(cc.Label).string=""+t.title),s&&(s.getComponent(cc.Label).string=""+t.desc),c&&(c.getComponent(cc.Label).string=""+(t.clickBtnTxt||"\u70b9\u51fb\u67e5\u770b")),r){var d=t.imgUrlList[Math.floor(Math.random()*t.imgUrlList.length)];cc.assetManager.loadRemote(d,{ext:".png"},function(t,e){!t&&r&&(r.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e))})}},e.prototype.showNativeIcon=function(t,e,o){var i=this;void 0===o&&(o={type:0,container:null});var n=o.container,r=n.getChildByName("img")||n.getChildByName("mask").getChildByName("img"),a=n.getChildByName("title"),s=n.getChildByName("close");n.active=!0,n.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),i.hideNativeAds(),o.hideCb&&o.hideCb()},this),s&&s.once(cc.Node.EventType.TOUCH_START,function(){o.isMistakeClose?(e.reportAdClick({adId:t.adId}),i.hideNativeAds()):i.hideNativeAds(),o.hideCb&&o.hideCb()}),a&&(a.getComponent(cc.Label).string=""+t.title),r&&cc.assetManager.loadRemote(t.icon,{ext:".png"},function(t,e){!t&&r&&(r.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e))})},e.prototype.showCustomAd_1=function(t,e){var o=this;if(this.sdk.createCustomAd){this.customAd_1&&this.customAd_1.destroy();var i=cc.winSize.height*(352/1334);console.log("showCustomAd id",t),this.hideCb=e,this.customAd_1=this.sdk.createCustomAd({posId:t,style:{top:i}}),this.customAd_1.onLoad(function(){console.log("showCustomAd onLoad 111 \u6210\u529f")}),this.customAd_1.onClose(function(){o.hideCb&&(console.log("\u5173\u95ed\u56de\u8c03"),o.hideCb())}),this.customAd_1.onError(function(t){console.log("[platform] [VIVOPlatform] onError1",JSON.stringify(t))}),console.log("showCustomAd id 1111",t),this.customAd_1.show().then(function(){console.log("[platform] [VIVOPlatform] showCustomAd \u6210\u529f\u663e\u793a")}).catch(function(t){console.log("[platform] [VIVOPlatform] showCustomAd",JSON.stringify(t))})}},e.prototype.hideCustomAd_1=function(){this.customAd_1&&(this.customAd_1.hide(),this.customAd_1.destroy())},e.prototype.showCustomAd_2=function(t){if(this.sdk.createCustomAd){this.customAd_2&&this.customAd_2.destroy();var e=cc.winSize.height-350;console.log("showCustomAd id",t),this.customAd_2=this.sdk.createCustomAd({posId:t,style:{top:e}}),this.customAd_2.onLoad(function(){console.log("showCustomAd onLoad 111 \u6210\u529f")}),this.customAd_2.onError(function(t){console.log("[platform] [VIVOPlatform] onError2",JSON.stringify(t))}),console.log("showCustomAd id 2222",t),this.customAd_2.show().then(function(){console.log("[platform] [VIVOPlatform] showCustomAd \u6210\u529f\u663e\u793a")}).catch(function(t){console.log("[platform] [VIVOPlatform] showCustomAd",JSON.stringify(t))})}},e.prototype.hideCustomAd_2=function(){this.customAd_2&&(this.customAd_2.hide(),this.customAd_2.destroy())},e}(i.BasePlatform);o.VIVO=r,cc._RF.pop()},{"./AudioManager":"AudioManager","./BasePlatform":"BasePlatform"}],WX:[function(t,e,o){"use strict";cc._RF.push(e,"d8551jOC9tJUbIJ/M2kC5Pw","WX"),o.WX=void 0;var i=t("./BasePlatform"),n=t("./EventConst"),r=t("./UserConst"),a=t("./AudioManager"),s=t("./BmsManager"),c=t("./EventManager"),l=t("./TipManager"),h=t("./UserManager"),d=function(t){function e(){var e=t.call(this)||this;e.sdk=window.wx,e._rewardAds=null,e._rewardAdsCb=null,e._rewardHasShow=!1,e._rewardHasLoad=!1,e._banner=null,e._insert=null,e._block=null,e._appBox=null,e._isMute=!1,e.time=null,e._inScene=null,e.ta=null,e.musicVolume=null,e.bgm=null,e._block2=null,e._block3=null,e._gridAd1=null,e._gridAd2=null,console.log("\u5fae\u4fe1"),e.sdk.showShareMenu({withShareTicket:!0}),e.sdk.onShareTimeline(function(){return e.getShareData()}),e.sdk.onShareAppMessage(function(){return e.getShareData()});var o=e.sdk.getLaunchOptionsSync();return console.log("\u5fae\u4fe1\u542f\u52a8\u53c2\u6570",o),window.scene=o.scene||0,[1045,1067,1095,1228,1232,1238,1200].includes(window.scene)?window.buyuser=!0:window.buyuser=!1,window.query=o.query||{},window.source_appid=o.source_appid||null,window.query?window.channel_id=window.query.channel_id||"":window.channel_id=null,window.wx.getDeviceInfo?(window.system=window.wx.getDeviceInfo().system||null,window.client=window.wx.getDeviceInfo().model||null):(window.system="",window.client=""),o.scene&&(e._inScene=o.scene,console.log("## \u8fdb\u5165\u573a\u666f\u503c\uff1a",e._inScene),1104!=e._inScene&&1103!=e._inScene||0!=(h.User.get(r.UserData.EnterSidebar)||0)||(cc.game.emit("gamelog_Thinking","Sidebar_Reward",{state:"complete"}),h.User.set(r.UserData.EnterSidebar,1),c.Event.emit(n.default.EnterSidebar))),e.sdk.onShow(function(t){c.Event.emit(n.default.restoreTime),console.log("\u542f\u52a8\u53c2\u6570\u5982\u4e0b\uff1a",t);var o=(new Date).getTime(),i=s.BMS.getKey("shareCD");if(h.User.getTempData("clickShareNew")){if(console.log("\u5206\u4eab\u65f6\u95f4\u5224\u65ad",o,e.time,o-e.time,i),(o-e.time)/1e3>=i){if(cc.game.emit("shareSuc"),window.rewardCB){window.rewardCB(0),window.rewardCB=null;var a=h.User.get(r.UserData.todayShareOrVideoTimes)||0;h.User.set(r.UserData.todayShareOrVideoTimes,a+1),e.checkNext()}}else cc.game.emit("shareFail"),l.Tip.show("\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u5230\u5927\u4e8e10\u4eba\u7684\u7fa4\u91cc");h.User.setTempData("clickShareNew",!1)}1104!=t.scene&&1103!=t.scene||0==(h.User.get(r.UserData.EnterSidebar)||0)&&(cc.game.emit("gamelog_Thinking","Sidebar_Reward",{state:"complete"}),h.User.set(r.UserData.EnterSidebar,1),c.Event.emit(n.default.EnterSidebar))}),e.sdk.onHide(function(){c.Event.emit(n.default.StopTimer),e.time=(new Date).getTime(),cc.game.emit("gamelog_Thinking","Leave_Game",{Duration:Math.floor((new Date).getTime()/1e3)-window.start_in_time})}),e}return __extends(e,t),e.prototype.checkNext=function(){if("all"==s.BMS.getKey("share")){var t=h.User.get(r.UserData.todayShareOrVideoTimes)||0;if(window.buyuser){var e=s.BMS.getKey("buyuser");if(console.log("\u4e70\u91cf\u7528\u6237",e),1==e.length&&0==e[0]);else if(0==e[e.length-1]){if(2==e[t%e.length]&&t<e.length)return window.rewardType="share",void cc.game.emit("updateVideoShare")}else if(2==e[t%e.length])return window.rewardType="share",void cc.game.emit("updateVideoShare")}else{var o=s.BMS.getKey("normaluser");if(console.log("\u81ea\u7136\u7528\u6237",o),1==o.length&&0==o[0]);else if(0==o[o.length-1]){if(2==o[t%o.length]&&t<o.length)return window.rewardType="share",void cc.game.emit("updateVideoShare")}else if(2==o[t%o.length])return window.rewardType="share",void cc.game.emit("updateVideoShare")}window.rewardType="video",cc.game.emit("updateVideoShare")}},e.prototype.initThinking=function(){this.ta=new ThinkingAnalyticsAPI({appId:"536288bb49c6415c9b6d971e0c7fe661",serverUrl:"https://ta-data.zuiqiangyingyu.net",autoTrack:{appShow:!0,appHide:!0}})},e.prototype.taInit=function(t){this.initThinking(),this.ta.login(t),this.ta.init()},e.prototype.report=function(t,e){this.ta.setSuperProperties({version:this._config.version}),this.ta.track(t,JSON.parse(e))},e.prototype.getInstance=function(){return this.sdk},e.prototype.showRewardAds=function(t){var e=this,o=h.User.get(r.UserData.todayShareOrVideoTimes)||0;if(console.log("\u663e\u793a\u6fc0\u52b1\u89c6\u9891 todayShareOrVideoTimes",o),"all"==s.BMS.getKey("share"))if(window.buyuser){var i=s.BMS.getKey("buyuser");if(1==i.length&&0==i[0]);else if(0==i[i.length-1]){if(2==i[o%i.length]&&o<i.length)return h.User.setTempData("clickShareNew",!0),window.rewardCB=t,void this.share()}else if(2==i[o%i.length])return h.User.setTempData("clickShareNew",!0),window.rewardCB=t,void this.share()}else{var d=s.BMS.getKey("normaluser");if(1==d.length&&0==d[0]);else if(0==d[d.length-1]){if(2==d[o%d.length]&&o<d.length)return h.User.setTempData("clickShareNew",!0),window.rewardCB=t,void this.share()}else if(2==d[o%d.length])return h.User.setTempData("clickShareNew",!0),window.rewardCB=t,void this.share()}return this.sdk.createRewardedVideoAd?this._config.rewardID?void(this._rewardAdsCb||(c.Event.emit(n.default.StopTimer),this.bgm=a.Audio.currentBgm,a.Audio.stopMusic(),this._rewardAdsCb=t,this._rewardHasShow=!1,this._rewardAds||(this._rewardAds=this.sdk.createRewardedVideoAd({adUnitId:this._config.rewardID}),this._rewardAds.onLoad(function(){e._rewardHasLoad=!0,e._rewardHasShow||(e._rewardHasShow=!0,cc.game.emit("ad_show"),e._rewardAds.show())}),this._rewardAds.onClose(function(t){if(e._rewardHasLoad=!1,t.isEnded){cc.game.emit("addVideoTimes");var o=h.User.get(r.UserData.todayShareOrVideoTimes)||0;h.User.set(r.UserData.todayShareOrVideoTimes,o+1),e.checkNext()}e._rewardAdsCb(t.isEnded?0:1),e._rewardAdsCb=null,a.Audio.playMusic(e.bgm),c.Event.emit(n.default.restoreTime)}),this._rewardAds.onError(function(t){e._rewardHasLoad=!1,console.log("[platform] [WeChatPlatform] showRewardAds",t),e._rewardAdsCb(-1),e._rewardAdsCb=null,c.Event.emit(n.default.restoreTime),a.Audio.playMusic(e.bgm)})),this._rewardHasLoad&&!this._rewardHasShow?(this._rewardHasShow=!0,cc.game.emit("ad_show"),this._rewardAds.show()):this._rewardAds.load())):(l.Tip.show("\u6682\u65e0\u5e7f\u544a\uff0c\u656c\u8bf7\u671f\u5f85"),t(-3)):t(-2)},e.prototype.preloadBanner=function(t){var e=this;void 0===t&&(t={id:""}),this.sdk.createBannerAd&&this._config.bannerID&&(this._banner||(this._banner=this.sdk.createBannerAd({adUnitId:t.id||this._config.bannerID,style:{left:9999,top:9999},adIntervals:30}),this._banner.onLoad(function(){}),this._banner.onError(function(t){console.log("[platform] [WeChatPlatform] preloadBanner",t)}),this._banner.onResize(function(t){var o=e.sdk.getSystemInfoSync();e._banner&&(e._banner.style.top=o.windowHeight-t.height),e._banner&&(e._banner.style.left=(o.windowWidth-t.width)/2)})))},e.prototype.showBanner=function(t,e){var o=this;void 0===t&&(t={id:"",left:null,top:null}),this.sdk.createBannerAd&&this._config.bannerID&&(this._banner?this._banner&&(this._banner.show().then(function(){e&&e(0)}).catch(function(){e&&e(1)}),t.top&&(this._banner.style.top=t.top),t.left&&(this._banner.style.left=t.left)):(this._banner=this.sdk.createBannerAd({adUnitId:t.id||this._config.bannerID,style:{left:9999,top:9999},adIntervals:30}),this._banner.onLoad(function(){o._banner?o._banner.show().then(function(){e&&e(0)}).catch(function(){e&&e(1)}):e&&e(0)}),this._banner.onError(function(t){console.log("[platform] [WeChatPlatform] showBanner",t),cc.game.emit("showBannerError"),e&&e(1)}),this._banner.onResize(function(e){var i=o.sdk.getSystemInfoSync(),n=i.windowHeight-e.height,r=(i.windowWidth-e.width)/2;t.top&&(n=t.top),t.left&&(r=t.left),o._banner.style.top=n,o._banner.style.left=r})))},e.prototype.hideBanner=function(t){this._banner&&(console.log("hideBanner() keepAlive:",t),t?this._banner.hide():(this._banner.destroy(),this._banner=null))},e.prototype.showInsert=function(){var t=this;this.sdk.createInterstitialAd&&this._config.insertID&&(this._insert?this._insert.load().then(function(){t._insert.show().then(function(){}).catch(function(t){console.log("[platform] [WeChatPlatform] showInsert",t)})}):this._insert||(this._insert=this.sdk.createInterstitialAd({adUnitId:this._config.insertID}),this._insert.onLoad(function(){t._insert&&t._insert.show().then(function(){}).catch(function(t){console.log("[platform] [WeChatPlatform] showInsert",t)})}),this._insert.onClose(function(){t._insert&&(t._insert.destroy(),t._insert=null)}),this._insert.onError(function(e){console.log("[platform] [WeChatPlatform] showInsert",e),e&&1003==e.errCode&&t._insert&&(t._insert.destroy(),t._insert=null)})))},e.prototype.showBlockAds=function(t,e){var o=this;void 0===t&&(t={id:"",left:0,top:0}),this.sdk.createCustomAd&&(this._block?(console.log("\u663e\u793a"),this._block&&this._block.show().then(function(){e&&e(0)}).catch(function(){e&&e(1)})):(this._block=this.sdk.createCustomAd({adUnitId:t.id,style:{left:t.left,top:t.top},adIntervals:60}),this._block.onError(function(t){console.log("[platform] [WeChatPlatform] showBlockAds",JSON.stringify(t))}),this._block.onLoad(function(){console.log("[platform] [WeChatPlatform] showBlockAds onLoad")}),this._block.onClose(function(){o._block&&(o._block.destroy(),o._block=null,t.hideCb&&t.hideCb())}),this._block.show().then(function(){e&&e(0)}).catch(function(){e&&e(1)})))},e.prototype.showBlockAds2=function(t,e){var o=this;void 0===t&&(t={id:"",left:0,top:0}),this.sdk.createCustomAd&&(this._block2?(console.log("\u663e\u793a"),this._block2&&this._block2.show().then(function(){e&&e(0)}).catch(function(){e&&e(1)})):(this._block2=this.sdk.createCustomAd({adUnitId:t.id,style:{left:t.left,top:t.top},adIntervals:60}),this._block2.onError(function(t){console.log("[platform] [WeChatPlatform] showBlockAds",JSON.stringify(t))}),this._block2.onLoad(function(){console.log("[platform] [WeChatPlatform] showBlockAds onLoad")}),this._block2.onClose(function(){o._block2&&(o._block2.destroy(),o._block2=null,t.hideCb&&t.hideCb())}),this._block2.show().then(function(){e&&e(0)}).catch(function(){e&&e(1)})))},e.prototype.hideBlockAds2=function(){this._block2&&(this._block2.destroy(),this._block2=null)},e.prototype.showBlockAds3=function(t,e){var o=this;void 0===t&&(t={id:"",left:0,top:0}),this._block3?(console.log("\u663e\u793a"),this._block3&&this._block3.show().then(function(){e&&e(0)}).catch(function(){e&&e(1)})):(this._block3=this.sdk.createCustomAd({adUnitId:t.id,style:{left:t.left,top:t.top},adIntervals:60}),this._block3.onError(function(t){console.log("[platform] [WeChatPlatform] showBlockAds",JSON.stringify(t))}),this._block3.onLoad(function(){console.log("[platform] [WeChatPlatform] showBlockAds onLoad")}),this._block3.onClose(function(){o._block3&&(o._block3.destroy(),o._block3=null,t.hideCb&&t.hideCb())}),this._block3.show().then(function(){e&&e(0)}).catch(function(){e&&e(1)}))},e.prototype.hideBlockAds3=function(){this._block3&&(this._block3.destroy(),this._block3=null)},e.prototype.hideBlockAds=function(){this._block&&(this._block.destroy(),this._block=null)},e.prototype.showAppBoxAds=function(t,e){var o=this;void 0===t&&(t={id:"",left:0,top:0}),this.sdk.createCustomAd&&this._config.boxID&&(this._appBox?this._appBox&&this._appBox.show().then(function(){e&&e(0)}).catch(function(){e&&e(1)}):(this._appBox=this.sdk.createCustomAd({adUnitId:t.id||this._config.boxID,style:{left:t.left,top:t.top},adIntervals:60}),this._appBox.onError(function(t){console.log("[platform] [WeChatPlatform] showAppBoxAds",t)}),this._appBox.onLoad(function(){console.log("[platform] [WeChatPlatform] showAppBoxAds onLoad")}),this._appBox.onClose(function(){o._appBox&&(o._appBox.destroy(),o._appBox=null,t.hideCb&&t.hideCb())}),this._appBox.show().then(function(){e&&e(0)}).catch(function(){e&&e(1)})))},e.prototype.hideAppBoxAds=function(){this._appBox&&(this._appBox.destroy(),this._appBox=null)},e.prototype.share=function(){this.sdk.shareAppMessage(this.getShareData())},e.prototype.getShareData=function(){var t=s.BMS.getShareList(),e={};if(t.length>0){var o=t[Math.floor(Math.random()*t.length)];e.title=o.title,e.imageUrl=o.image}return e},e.prototype.showCustomAd1=function(t){var e=this,o=(t.width,t.height,t.x,t.y,cc.winSize.width,cc.winSize.height,window.wx.getSystemInfoSync()),i=(o.screenWidth,o.screenHeight,cc.Canvas.instance.node.width,cc.Canvas.instance.node.height),n=o.screenHeight/i,r=t.convertToWorldSpaceAR(cc.Vec2.ZERO),a=(r.x-t.width*t.anchorX)*n,s=(i-r.y-t.height*(1-t.anchorY))*n;this._gridAd1?this._gridAd1.show().then(function(){}).catch(function(){}):(this._gridAd1=window.wx.createCustomAd({adUnitId:"adunit-135903ab906789f2",adIntervals:30,style:{left:a,top:s}}),this._gridAd1.onError(function(t){console.log("[platform] [WeChatPlatform] showBlockAds",t)}),this._gridAd1.onLoad(function(){console.log("[platform] [WeChatPlatform] showBlockAds onLoad")}),this._gridAd1.onClose(function(){e._gridAd1&&(e._gridAd1.destroy(),e._gridAd1=null)}),this._gridAd1.show().then(function(){}).catch(function(){}))},e.prototype.showCustomAd2=function(t){var e=this,o=(t.width,t.height,t.x,t.y,cc.winSize.width,cc.winSize.height,window.wx.getSystemInfoSync()),i=(o.screenWidth,o.screenHeight,cc.Canvas.instance.node.width,cc.Canvas.instance.node.height),n=o.screenHeight/i,r=t.convertToWorldSpaceAR(cc.Vec2.ZERO),a=(r.x-t.width*t.anchorX)*n,s=(i-r.y-t.height*(1-t.anchorY))*n;this._gridAd2?this._gridAd2.show().then(function(){}).catch(function(){}):(this._gridAd2=window.wx.createCustomAd({adUnitId:"adunit-135903ab906789f2",adIntervals:30,style:{left:a,top:s}}),this._gridAd2.onError(function(t){console.log("[platform] [WeChatPlatform] showBlockAds",t)}),this._gridAd2.onLoad(function(){console.log("[platform] [WeChatPlatform] showBlockAds onLoad")}),this._gridAd2.onClose(function(){e._gridAd2&&(e._gridAd2.destroy(),e._gridAd2=null)}),this._gridAd2.show().then(function(){}).catch(function(){}))},e.prototype.hideCustomAd1=function(){this._gridAd1&&(this._gridAd1.destroy(),this._gridAd1=null)},e.prototype.hideCustomAd2=function(){this._gridAd2&&(this._gridAd2.destroy(),this._gridAd2=null)},e}(i.BasePlatform);o.WX=d,cc._RF.pop()},{"./AudioManager":"AudioManager","./BasePlatform":"BasePlatform","./BmsManager":"BmsManager","./EventConst":"EventConst","./EventManager":"EventManager","./TipManager":"TipManager","./UserConst":"UserConst","./UserManager":"UserManager"}],Win:[function(t,e,o){"use strict";cc._RF.push(e,"98546R4ITpEbKkQSJwqSbee","Win");var i=t("./BaseUI"),n=t("./AudioConst"),r=t("./ConfigConst"),a=t("./EventConst"),s=t("./PlatformConst"),c=t("./PopupConst"),l=t("./SceneConst"),h=t("./UserConst"),d=t("./LocalStorageConst"),u=t("./LocalStorageManager"),p=t("./MemoryStorageConst"),f=t("./MemoryStorageManager"),g=t("./AudioManager"),m=t("./BmsManager"),v=t("./ConfigManager"),y=t("./EventManager"),_=t("./LanguageManager"),C=t("./PlatformManager"),b=t("./PopupManager"),S=t("./SceneManager"),w=t("./TipManager"),A=t("./UserManager"),k=t("./ChallengeHttp"),P=t("./OPPOAndroidAdUtils"),T=t("./OPPOMiniADUtils"),B=t("./Utils"),M=t("./VIVOADUtils"),I=t("./XMADUtils"),R=t("./ShuShuConst"),L=t("./AssetManager"),D=t("./EffectManager"),N=cc._decorator,E=N.ccclass,x=(N.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text=null,e.oldCurrentScene_=null,e.roleSpine={0:"nvwang",1:"gongzhu1",2:"gongzhu2",3:"gongzhu3",4:"guowang",5:"wangzi",6:"huakucha"},e.assetAssignmentType=1,e.isLoading=!1,e}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.text=this.dict.text.getComponent(cc.Label),this.addBtnOn("nextBtn",this.clickNext,this),this.addBtnOn("videoBtn",this.clickVideo,this),this.addBtnOn("shareBtn",this.clickShare,this),this.addBtnOn("shareBtn2",this.clickShare2,this),this.addBtnOn("homeBtn",this.clickHome,this),this.addBtnOn("restartBtn",this.clickRestart,this),this.addBtnOn("gouRoot",this.clickGou,this),this.addBtnOn("backBtn",this.clickHome,this),this.addBtnOn("mapBtn",this.mapBtn,this),this.oldCurrentScene_=A.User.getTempData("currentScene_"),A.User.setTempData("currentScene_",4),this.initView(),console.log("\u8c03\u7528\u5e7f\u544a"),C.Platform.showCustomAd1(this.dict.leftAd),C.Platform.showCustomAd2(this.dict.rightAd)},e.prototype.mapBtn=function(){b.default.show(c.PopupConst.Map)},e.prototype.heroLevelBtn=function(){b.default.show(c.PopupConst.Role)},e.prototype.onDestroy=function(){A.User.setTempData("currentScene_",this.oldCurrentScene_)},e.prototype.onEnable=function(){g.Audio.stopMusic(),A.User.setTempData("isWinShare",0),C.Platform.is(s.EPlatform.XIAOMI_ANDROID)?(I.XMAD.showLargeFeed(),I.XMAD.showInterstitialFeed_result()):C.Platform.is(s.EPlatform.OPPO_ANDROID)?(P.OPPOAndroidAd.showLargeFeed(),P.OPPOAndroidAd.showInterstitialFeed_result()):C.Platform.is(s.EPlatform.OPPO)?(T.OPPOMiniAD.showLargeFeed(),T.OPPOMiniAD.showInterstitialFeed_result()):C.Platform.is(s.EPlatform.VIVO)&&M.VIVOAD.showCustomAd_1(function(){M.VIVOAD.showCustomAd_2()}),cc.game.on("hideShipRank",this.hideShipRank,this)},e.prototype.onDisable=function(){g.Audio.playMusic(n.AudioConst.BGM_MAIN),C.Platform.is(s.EPlatform.XIAOMI_ANDROID)?I.XMAD.removeLargePicFeed():C.Platform.is(s.EPlatform.OPPO_ANDROID)&&P.OPPOAndroidAd.removeLargePicFeed(),C.Platform.hideNativeAds(),C.Platform.hideCustomAd1(),C.Platform.hideCustomAd2(),C.Platform.hideCustomAd_1(),C.Platform.hideCustomAd_2(),y.Event.emit(a.default.destroyInsert),cc.game.off("hideShipRank",this.hideShipRank,this)},e.prototype.hideShipRank=function(){this.dict.shipRank.active=!1},e.prototype.shareSuc=function(){},e.prototype.initView=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o,i,a,c,l,m,y,b,S,w,P,T,M,I,N,E,x,U,O,F,W,V,H,G,j,z,q,K,X=this;return __generator(this,function(J){switch(J.label){case 0:return t=f.default.get(p.default.IsFail),e=f.default.get(p.default.CollectGoodsID),o=f.default.get(p.default.CollectGoodsName),i=u.default.get(d.default.Collect)||{0:[]},t?(this.dict.resultState1.active=!0,this.dict.resultState0.active=!1,this.dict.restartBtn.active=!0,this.dict.nextBtn.active=!1,g.Audio.playEffect(n.AudioConst.lose),w=A.User.getTempData("levelTime"),P=((new Date).getTime()-w)/1e3,cc.game.emit("gamelog_Thinking",R.ShuShuConst.Level_Lose,{lv:A.User.getTempData(h.TempData.CURRENT_LEVEL_ID),mode:A.User.getTempData(h.TempData.CURRENT_MODE),queue:A.User.getTempData(h.TempData.CURRENT_LEVEL),times:P,sort:u.default.get(d.default.ConfigSuffix)}),this.dict.shareBtnText2.getComponent(cc.Label).string="\u558a\u4eba",this.dict.roleSpineFail&&((c=u.default.get(d.default.SkinList)||{})[0]||(c[0]=[0]),c[1]||(c[1]=[0]),(l=u.default.get(d.default.UseSkin)||{})[0]||(l[0]=0),l[1]||(l[1]=0),this.loadSpine(""+this.roleSpine[l[0]],this.dict.roleSpineFail.getComponent(sp.Skeleton),!0)),[3,5]):[3,1];case 1:return g.Audio.playEffect(n.AudioConst.win),this.dict.resultState1.active=!1,this.dict.resultState0.active=!0,!e||i[0].includes(e)||0!=A.User.getTempData(h.TempData.CURRENT_MODE)?[3,3]:(this.dict.getGoodsRoot.active=!0,this.dict.noGoodsRoot.active=!1,[4,L.default.getRes("gameBundle","texture/collect/"+e,cc.Texture2D)]);case 2:return a=J.sent(),this.dict.winText.getComponent(cc.Label).string=_.default.formatStr("\u606d\u559c\u83b7\u5f97%s",o),this.dict.collectIcon.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(a),i[0].push(e),u.default.set(d.default.Collect,i),[3,4];case 3:this.dict.getGoodsRoot.active=!1,this.dict.noGoodsRoot.active=!0,J.label=4;case 4:this.dict.roleSpineSuc&&((c=u.default.get(d.default.SkinList)||{})[0]||(c[0]=[0]),c[1]||(c[1]=[0]),(l=u.default.get(d.default.UseSkin)||{})[0]||(l[0]=0),l[1]||(l[1]=0),this.loadSpine(""+this.roleSpine[l[0]],this.dict.roleSpineSuc.getComponent(sp.Skeleton))),m=A.User.getTempData(h.TempData.CURRENT_LEVEL),y=A.User.getTempData(h.TempData.CURRENT_MODE),b=A.User.getTempData(h.TempData.CURRENT_LEVEL_ID),this.dict["title_"+_.default.instance.lan]&&(this.dict["title_"+_.default.instance.lan].active=!0),v.Config.get(r.ConfigConst.RESULT).then(function(t){for(var e=0;e<t.length;e++)t[e].stageID==b&&(X.text.string=t[e].resultText)}),S=C.Platform.getConfig(),this.dict.shareBtn.active=!1,S.hasRecord&&(this.dict.shareBtn.active=!0),S.hasShare?this.dict.shareBtn2.active=!0:this.dict.shareBtn2.active=!1,cc.game.emit("gamelog","page007"),cc.game.emit("gamelog","Level_Win_"+y+"_"+m),this.dict.screenshot.getComponent(cc.Sprite).spriteFrame=window.screenShotPicture,this.scheduleOnce(function(){X.judgeNewMode()},.3),this.dict.videoBtn.active=!1,console.log("\u6d4b\u8bd5\u76ae\u80a4"),w=A.User.getTempData("totalLevelTime"),P=((new Date).getTime()-w)/1e3,T=A.User.get(h.UserData.useSkinIDList),M=this.secondFormat(P),this.dict.time.getComponent(cc.Label).string=_.default.formatStr("\u7d2f\u8ba1\u7528\u65f6%d\u5206%d\u79d2",Number(M[0]),Number(M[1])),T[0],I="nation",C.Platform.is(s.EPlatform.ANDROID_GOOGLE)||(I="province"),N=new Date,E=this.showTime(N.getMonth()+1),x=this.showTime(N.getDate()),U="province_"+E+x+"_"+S.rank,k.challengeHttp.incrRank(U,A.User.get(I),1).then(function(t){console.log("\u4e0a\u4f20\u4e00\u6b21\u6570\u636e",t)}),A.User.get(h.UserData.todayFirstPass)||(A.User.set(h.UserData.todayFirstPass,1),O="people_"+E+x+C.Platform.getConfig().rank,"haiwai"==C.Platform.getConfig().rank&&(O="countryPeople_"+E+x+"_"+C.Platform.getConfig().rank),k.challengeHttp.incrRank(O,A.User.get(I),1).then(function(t){console.log("\u4e0a\u4f20\u4e00\u6b21\u6570\u636e",t)})),0==(F=A.User.getTempData(h.TempData.CURRENT_MODE))&&C.Platform.getConfig().flag.includes("wx")&&(W=A.User.get("passLevel"+F)||0,V={wxgame:{score:W,update_time:1513080573},cost_ms:36500},H={key:"score",value:JSON.stringify(V)},G=[H],window.wx&&window.wx.setUserCloudStorage({KVDataList:G,success:function(){console.log("[WxPlatform] \u4fdd\u5b58\u7528\u6237\u6570\u636e\u6210\u529f:",G)},fail:function(){console.log("[WxPlatform] \u4fdd\u5b58\u7528\u6237\u6570\u636e\u5931\u8d25:",G)}})),j=["\u67e5\u770b\u7b54\u6848\u6216\u63d0\u793a\u6709\u52a9\u4e8e\u5feb\u901f\u901a\u5173\u3002","\u7b7e\u5230\u53ef\u4ee5\u62ff\u5230\u76ae\u80a4\uff0c\u8bb0\u5f97\u53bb\u7b7e\u5230\u54e6\uff01","\u201c\u66f4\u591a\u73a9\u6cd5\u201d\u91cc\u6709\u8bb8\u591a\u975e\u5e38\u503c\u5f97\u6311\u6218\u7684\u73a9\u6cd5\u3002","\u5173\u5361\u6bd4\u8f83\u96be\u901a\u5173\u65f6\uff0c\u591a\u5c1d\u8bd5\u51e0\u6b21\u5c31\u4f1a\u53d8\u5f97\u5bb9\u6613\u3002"],z=B.Utils.randomNum(0,3),this.dict.tipText&&(this.dict.tipText.getComponent(cc.Label).string="\u6e29\u99a8\u63d0\u793a\uff1a"+j[z]),window.f29086_dragonBall&&(q=u.default.get(d.default.DragonBall)||0,u.default.set(d.default.DragonBall,q+window.f29086_dragonBall)),window.f29086_coin&&(K=u.default.get(d.default.Coin)||0,u.default.set(d.default.Coin,K+window.f29086_coin)),this.scheduleOnce(function(){D.Effect.showEffect(10,X.dict.coinIcon,2)},.3),this.scheduleOnce(function(){D.Effect.showEffect(1,X.dict.dragonBallIcon,3)},.3),J.label=5;case 5:return[2]}})})},e.prototype.updateMapBtn=function(t){return __awaiter(this,void 0,void 0,function(){var e,o,i,n,a;return __generator(this,function(s){switch(s.label){case 0:return e=A.User.getTempData(h.TempData.CURRENT_LEVEL),o=A.User.getTempData(h.TempData.CURRENT_MODE)||0,t||e<2||0!=o?[2,this.dict.mapBtn.active=!1]:[4,v.Config.get(r.ConfigConst.City)];case 1:return(i=s.sent()).sort(function(t,e){return t.sort-e.sort}),n=f.default.get(p.default.CurrentChallengeCity),this.dict.city.getComponent(cc.Label).string="\u6fc0\u6d3b\u57ce\u5e02\uff1a"+i.find(function(t){return t.id==n}).cityID,(a=u.default.get(d.default.CityList)||[]).push(n),u.default.set(d.default.CityList,a),[2]}})})},e.prototype.updateNewElement=function(t){return __awaiter(this,void 0,void 0,function(){var e,o,i,n,a,s,c,l,g,m;return __generator(this,function(y){switch(y.label){case 0:return t?(this.dict.newElementRoot.active=!1,this.dict.nextBtn.active=!1,[2]):0!=(A.User.getTempData(h.TempData.CURRENT_MODE)||0)?[2,this.dict.newElementRoot.active=!1]:(e=f.default.get(p.default.IsDailyChallenge)||0,this.dict.newElementRoot.active=!e,this.dict.nextBtn.active=!e,o=A.User.getTempData(h.TempData.CURRENT_LEVEL),i=u.default.get(d.default.ConfigSuffix)||0,e?[3,7]:[4,v.Config.get(r.ConfigConst.Feature)]);case 1:return n=y.sent(),a=n.filter(function(t){return t.sortID==i}),(s=a.find(function(t){return t.levelID>o}))?(c=a.find(function(t){return s.id-1==t.id}),console.log("\u8fc7\u6ee4\u540e",a),console.log("\u8fc7\u6ee4\u540edata",s,c),l=void 0,g=void 0,1!=s.featureID&&c?[3,3]:(l=o,g=s.levelID-1,this.dict.progressText.getComponent(cc.Label).string=l+"/"+g,this.dict.unlockProgress.getComponent(cc.Sprite).fillRange=l/g,[4,L.default.getRes("resources","texture/mode/icon_yuansu"+s.featureID,cc.Texture2D)])):[3,6];case 2:return m=y.sent(),this.dict.newElement.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(m),[3,5];case 3:return l=o-c.levelID+1,g=s.levelID-c.levelID,this.dict.progressText.getComponent(cc.Label).string=l+"/"+g,this.dict.unlockProgress.getComponent(cc.Sprite).fillRange=l/g,[4,L.default.getRes("resources","texture/mode/icon_yuansu"+s.featureID,cc.Texture2D)];case 4:m=y.sent(),this.dict.newElement.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(m),y.label=5;case 5:return l==g&&(this.dict.newElementText.getComponent(cc.Label).string="\u5373\u5c06\u5f00\u542f"),[3,7];case 6:this.dict.newElementRoot.active=!1,y.label=7;case 7:return[2]}})})},e.prototype.downloadSpine=function(t,e){return new Promise(function(t,o){cc.resources.load(e,sp.SkeletonData,function(e,i){if(e)return cc.warn(e),o(e);t([null,i,null])})})},e.prototype.loadSpine=function(t,e,o){return void 0===o&&(o=!1),__awaiter(this,void 0,void 0,function(){var i,n,r,a,s,c,l;return __generator(this,function(h){switch(h.label){case 0:i="spine/role/"+t,n="spine/role/"+t,r="spine/role/"+t,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this.downloadSpine(r,n,i,t)];case 2:return a=h.sent(),e&&cc.isValid(e.node)?(s=new sp.SkeletonData,a[0]?(s.skeletonJson=a[1],s.atlasText=a[0],s.textures=a[2],s.textureNames=a[3]):s=a[1],c="shengli",o&&(c="shibai"),console.log("isFail",o,c),1==this.assetAssignmentType&&(e.skeletonData=s,e.setSkin("default"),e.defaultSkin="default",s.getRuntimeData()&&(e.defaultAnimation=c||s.getRuntimeData().animations[0].name,e.setAnimation(0,c||s.getRuntimeData().animations[0].name,e.loop))),[3,4]):[2];case 3:return l=h.sent(),console.log(l),[2];case 4:return[2]}})})},e.prototype.showTime=function(t){return t>10?t:"0"+t},e.prototype.secondFormat=function(t,e,o){void 0===e&&(e=2),void 0===o&&(o=!1);var i,n=t/3600,r=(t%=3600)/60,a=t%=60,s=(n=Math.floor(n),(r=Math.floor(r))>=10?r+"":r);switch(i=(a=Math.floor(a))>=10?a+"":a,o&&(a=100*a/60,i=(a=Math.floor(a))>=10?a+"":"0"+a),e){case 2:this.min=Number(s),this.second=Number(i)}return[s,i]},e.prototype.judgeNewMode=function(){A.User.getTempData(h.TempData.CURRENT_LEVEL),A.User.getTempData(h.TempData.CURRENT_MODE);var t=m.BMS.getKey("UnlockThemeList");if(m.BMS.getKey("UnlockThemeMainLv"),m.BMS.getKey("UnlockThemeSubLv"),t.length){for(var e=A.User.get(h.UserData.UNLOCK_MODE_LIST)||[],o=-1,i=0;i<t.length;i++){var n=t[i];if(-1==e.indexOf(n)){o=n;break}}console.log("\u51c6\u5907\u89e3\u9501\u7684\u65b0\u6a21\u5f0fid",o)}},e.prototype.clickNext=function(){if(!this.isLoading){this.isLoading=!0,C.Platform.is(s.EPlatform.XIAOMI_ANDROID)&&I.XMAD.showInterstitialFeed(),C.Platform.is(s.EPlatform.OPPO_ANDROID)&&P.OPPOAndroidAd.showInterstitialFeed(),C.Platform.is(s.EPlatform.OPPO)&&(T.OPPOMiniAD.showInterstitialFeed(),T.OPPOMiniAD.clickAdJump());var t=A.User.getTempData(h.TempData.CURRENT_LEVEL),e=(A.User.getTempData(h.TempData.CURRENT_MODE),A.User.getTempData("newPass")||!1);if(console.log("newPass",e),t<=2)return cc.game.emit("gamelog","btn022"),void this.nextCb();A.User.get("levelListLoopTimes"),f.default.get(p.default.ThemeType),this.nextCb()}},e.prototype.nextCb=function(){A.User.getTempData("challenge")?S.default.loadScene(l.SceneConst.Home):(y.Event.emit(a.default.CLICK_NEXT),b.default.hide())},e.prototype.clickGou=function(){this.dict.gou.active=!this.dict.gou.active},e.prototype.clickVideo=function(){var t=this;cc.game.emit("gamelog","btn023"),C.Platform.showRewardAds(function(e){if(0==e){A.User.setTempData("isNeedInsert",!1),A.User.getTempData("cheats")&&A.User.setTempData("isNeedInsert",!0),cc.game.emit("gamelog","rewarde_btn005");var o=A.User.get(h.UserData.KEY);A.User.set(h.UserData.KEY,o+1),y.Event.emit(a.default.KEY_EFFECT),t.nextCb()}})},e.prototype.clickShare2=function(){C.Platform.share()},e.prototype.clickShare=function(){var t=this;C.Platform.getConfig().hasRecord?C.Platform.shareRecordCap(function(e){if(0==e){w.Tip.show("\u5206\u4eab\u5f55\u5c4f\u6210\u529f\uff01");var o=A.User.get("dailyShareRecordTimes")||0;o+=1,A.User.set("dailyShareRecordTimes",o),t.nextCb()}else-1==e&&w.Tip.show("\u5f55\u5c4f\u65f6\u95f4\u8fc7\u77ed\uff01")}):C.Platform.getConfig().hasShare&&(C.Platform.share(),this.scheduleOnce(function(){t.nextCb()},1))},e.prototype.clickHome=function(){cc.game.emit("gamelog_Thinking",R.ShuShuConst.Level_Return,{lv:A.User.getTempData(h.TempData.CURRENT_LEVEL_ID),mode:A.User.getTempData(h.TempData.CURRENT_MODE),queue:A.User.getTempData(h.TempData.CURRENT_LEVEL),sort:u.default.get(d.default.ConfigSuffix)}),S.default.loadScene(l.SceneConst.Home)},e.prototype.clickRestart=function(){b.default.hide(),cc.game.emit("onRestartBtn")},e.prototype.getIsMistakeByChance=function(t){var e=100*Math.random(),o=!1;return console.log("\u968f\u673a\u6570",e),console.log("\u5f53\u524d\u914d\u7f6e\u6982\u7387:"+t),0==t?o:(t>=e&&(o=!0),o)},__decorate([E],e)}(i.default));o.default=x,cc._RF.pop()},{"./AssetManager":"AssetManager","./AudioConst":"AudioConst","./AudioManager":"AudioManager","./BaseUI":"BaseUI","./BmsManager":"BmsManager","./ChallengeHttp":"ChallengeHttp","./ConfigConst":"ConfigConst","./ConfigManager":"ConfigManager","./EffectManager":"EffectManager","./EventConst":"EventConst","./EventManager":"EventManager","./LanguageManager":"LanguageManager","./LocalStorageConst":"LocalStorageConst","./LocalStorageManager":"LocalStorageManager","./MemoryStorageConst":"MemoryStorageConst","./MemoryStorageManager":"MemoryStorageManager","./OPPOAndroidAdUtils":"OPPOAndroidAdUtils","./OPPOMiniADUtils":"OPPOMiniADUtils","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager","./PopupConst":"PopupConst","./PopupManager":"PopupManager","./SceneConst":"SceneConst","./SceneManager":"SceneManager","./ShuShuConst":"ShuShuConst","./TipManager":"TipManager","./UserConst":"UserConst","./UserManager":"UserManager","./Utils":"Utils","./VIVOADUtils":"VIVOADUtils","./XMADUtils":"XMADUtils"}],XMADMediatorUtils:[function(t,e,o){"use strict";cc._RF.push(e,"825496NznVPh5WwTYJPjVRg","XMADMediatorUtils"),o.XMADMediator=void 0;var i=t("./XMADUtils"),n=function(){function t(){}return t.prototype.showRewardVideo=function(t){i.XMAD.showRewardVideo(t)},t.prototype.showLargeFeed=function(){i.XMAD.showLargeFeed()},t.prototype.removeLargePicFeed=function(){i.XMAD.removeLargePicFeed()},t.prototype.showInterstitialFeed=function(){i.XMAD.showInterstitialFeed()},t.prototype.showInterstitialFeed_must=function(){i.XMAD.showInterstitialFeed_must()},t.prototype.showInterstitialFeed_result=function(){i.XMAD.showInterstitialFeed_result()},t}();o.XMADMediator=new n,cc._RF.pop()},{"./XMADUtils":"XMADUtils"}],XMADUtils:[function(t,e,o){"use strict";cc._RF.push(e,"95e40GgWH5I+5FzaOf3vW8s","XMADUtils"),o.XMAD=void 0;var i=t("./PlatformConst"),n=t("./BmsManager"),r=t("./PlatformManager"),a=function(){function t(){}return t.prototype.showLargeFeed=function(){var t=n.BMS.getKey("isCheck");console.log("[isCheck-\u539f\u58f0\u5927\u56febanner]",t),t||(console.log("DownDT",n.BMS.getKey("DownDT")),this.getResByChance(n.BMS.getKey("DownDT")[0])&&r.Platform.showLargeFeed(this.getPosID(),n.BMS.getKey("DownDT")[1]))},t.prototype.showBannerFeed=function(){var t=n.BMS.getKey("isCheck");console.log("[isCheck-\u539f\u58f0banner]",t),t||1==t?console.log("\u5c0f\u7c73 banner"):(console.log("\u5c0f\u7c73 showBannerFeed"),n.BMS.getKey("isbanner"))},t.prototype.removeLargePicFeed=function(){null!=this.posID&&r.Platform.removeLargePicFeed(this.posID)},t.prototype.showInterstitialFeed=function(){var t=n.BMS.getKey("isCheck");if(console.log("[isCheck-\u539f\u751f\u63d2\u5c4f]",t),t);else{var e=n.BMS.getKey("fullCloseChance"),o=n.BMS.getKey("fullAdChance");console.log("fullChance",n.BMS.getKey("fullChance")),this.getResByChance(n.BMS.getKey("fullChance"))&&r.Platform.showInterstitialFeed(this.getPosID(),3,e,o)}},t.prototype.showInterstitialFeed_must=function(){var t=n.BMS.getKey("isCheck");if(console.log("[isCheck-\u539f\u751f\u63d2\u5c4f\u7ed3\u7b97]",t),t);else{var e=n.BMS.getKey("fullCloseChance"),o=n.BMS.getKey("fullAdChance");r.Platform.showInterstitialFeed(this.getPosID(),3,e,o)}},t.prototype.showInterstitialFeed_result=function(){var t=n.BMS.getKey("isCheck");if(console.log("[isCheck-\u539f\u751f\u63d2\u5c4f\u7ed3\u7b97]",t),t);else{var e=n.BMS.getKey("fullCloseChance"),o=n.BMS.getKey("fullAdChance");console.log("fullSettleChance",n.BMS.getKey("fullSettleChance")),this.getResByChance(n.BMS.getKey("fullSettleChance"))&&r.Platform.showInterstitialFeed(this.getPosID(),3,e,o)}},t.prototype.showRewardVideo=function(t){var e=this,o=n.BMS.getKey("isCheck");if(console.log("[isCheck-\u89c6\u9891]",o),o)r.Platform.showRewardAds_xiaomi(function(e){0==e&&t(0)});else if(r.Platform.getConfig(),r.Platform.is(i.EPlatform.XIAOMI_ANDROID)){if(n.BMS.getKey("videoEx"))return this.sucCB_video=t,new Promise(function(){cc.game.on("onInterstitialFeedShow",e.onInterstitialFeedShow,e),cc.game.on("onInterstitialFeedShowFailed",e.onInterstitialFeedShowFailed,e),e.removeLargePicFeed();var t=n.BMS.getKey("fullCloseChance"),o=n.BMS.getKey("fullAdChance");r.Platform.showInterstitialFeed(e.getPosID(),3,t,o),console.log("\u89c6\u9891\u53d8\u6210\u63d2\u5c4f")});r.Platform.showRewardAds_xiaomi(function(e){0==e&&t(0)})}else r.Platform.showRewardAds_xiaomi(function(e){0==e&&t(0)})},t.prototype.onInterstitialFeedShow=function(){this.sucCB_video(0),cc.game.off("onInterstitialFeedShow",this.onInterstitialFeedShow,this),cc.game.off("onInterstitialFeedShowFailed",this.onInterstitialFeedShowFailed,this)},t.prototype.onInterstitialFeedShowFailed=function(){var t=this;r.Platform.showRewardAds_xiaomi(function(e){0==e&&t.sucCB_video(0)}),cc.game.off("onInterstitialFeedShow",this.onInterstitialFeedShow,this),cc.game.off("onInterstitialFeedShowFailed",this.onInterstitialFeedShowFailed,this)},t.prototype.randomNum=function(t,e,o){var i=e-t,n=o||Math.random();return t+Math.round(n*i)},t.prototype.getPosID=function(){var t,e=this.randomNum(0,3);return t=0==e?n.BMS.getKey("natId"):1==e?n.BMS.getKey("natId1"):2==e?n.BMS.getKey("natId2"):n.BMS.getKey("natId3"),this.posID=t,console.log("\u3010\u5e7f\u544aid\u3011\uff1a",e,t),t},t.prototype.getResByChance=function(t){var e=100*Math.random(),o=!1;return console.log("\u968f\u673a\u6570",e),console.log("\u5f53\u524d\u914d\u7f6e\u6982\u7387:"+t),0==t?o:(t>=e&&(o=!0),o)},t.prototype.downloadBtn=function(){var t=n.BMS.getKey("isCheck");if(console.log("[downloadBtn-isCheck]",t),0==t){var e=n.BMS.getKey("fullCloseChance"),o=n.BMS.getKey("fullAdChance"),i=n.BMS.getKey("isfakeicon");jsb.reflection.callStaticMethod("org/cocos2dx/javascript/SdkBridge","showInterstitialFeed","(Ljava/lang/String;IIIIII)V",this.getPosID(),3,0,0,parseInt(e),parseInt(o),parseInt(i))}},t.prototype.showInsert_must=function(){var t=n.BMS.getKey("isCheck");if(console.log("[showInsert-isCheck]",t),0==t){var e=n.BMS.getKey("homechance"),o=n.BMS.getKey("fullCloseChance"),i=n.BMS.getKey("fullAdChance");this.getResByChance(e)&&r.Platform.showInterstitialFeed(this.getPosID(),3,o,i)}},t.prototype.onForeground=function(){var t=n.BMS.getKey("isCheck");if(console.log("[onForeground-isCheck]",t),0==t){console.log("onForeground");var e=n.BMS.getKey("appchance"),o=n.BMS.getKey("fullCloseChance"),i=n.BMS.getKey("fullAdChance");this.getResByChance(e)&&r.Platform.showInterstitialFeed(this.getPosID(),3,o,i)}},t}();o.XMAD=new a,cc._RF.pop()},{"./BmsManager":"BmsManager","./PlatformConst":"PlatformConst","./PlatformManager":"PlatformManager"}],XMLHttpRequestUtils:[function(t,e,o){"use strict";cc._RF.push(e,"9b088stBmREzLyp2d8sDdxH","XMLHttpRequestUtils");var i=t("./EHttp"),n=function(){function t(){}return t.get=function(t,e){return __awaiter(this,void 0,Promise,function(){var o,n;return __generator(this,function(r){switch(r.label){case 0:return o=new XMLHttpRequest,n=e?t+"?"+this.obj2String(e):""+t,[4,this.onResponse(n,o,i.HttpMethod.get)];case 1:return[2,r.sent()]}})})},t.post=function(t,e,o){return void 0===o&&(o=i.ContentType.json),__awaiter(this,void 0,Promise,function(){var n;return __generator(this,function(r){switch(r.label){case 0:return n=new XMLHttpRequest,[4,this.onResponse(t,n,i.HttpMethod.post,e,o)];case 1:return[2,r.sent()]}})})},t.obj2String=function(t){var e=[],o="";for(var i in t)e.push(i);return(e=e.sort()).forEach(function(i,n){o+=i+"="+t[i]+(n==e.length-1?"":"&")}),o},t.onResponse=function(t,e,o,n,r){var a=this;return new Promise(function(s){e.timeout=5e3,e.onreadystatechange=function(){if(4==e.readyState)if(e.status>=200&&e.status<400){if("text"===e.responseType||"json"===e.responseType)return s(JSON.parse(e.responseText));s("string"==typeof e.response?JSON.parse(e.response):e.response)}else s(null)},e.open(o,t,!0),o==i.HttpMethod.post&&(e.setRequestHeader("Content-Type",r),r==i.ContentType.json&&e.setRequestHeader("Accept",r)),e.onabort=function(){console.log("abort"),s(null)},e.onerror=function(t){console.log(t),s(null)},e.ontimeout=function(){console.log("timeout"),s(null)},o==i.HttpMethod.get&&e.send(),o==i.HttpMethod.post&&r==i.ContentType.form&&e.send(a.obj2String(n)),o==i.HttpMethod.post&&r==i.ContentType.json&&e.send(JSON.stringify(n))})},t}();o.default=n,cc._RF.pop()},{"./EHttp":"EHttp"}],XM:[function(t,e,o){"use strict";cc._RF.push(e,"575f162rbxMAZPM9g+6gYXL","XM"),o.XM=void 0;var i=t("./BasePlatform"),n=cc._decorator,r=(n.ccclass,n.property,function(t){function e(){var e=t.call(this)||this;return e.firstBannerDelayTime=90,e.sdk=window.qg,e._nativeAds=[],e.isInsert=!1,e.gamePortalAd=null,e.succFunc=null,e.failFunc=null,e.insertVideoInterval=60,e.inertVideoLimitCount=8,console.log("\u5c0f\u7c73\u5feb\u5e94\u7528"),e}return __extends(e,t),e.prototype.enabledDebug=function(){window.qg&&(console.log("window['qg'].setEnableDebug",!1),window.qg.setEnableDebug({enableDebug:!1,success:function(){},complete:function(){},fail:function(){}}))},e.prototype.silentLogin=function(){return new Promise(function(t,e){window.qg.login({success:function(o){o?t(o.uid):e("[XM] --\x3e data is null")},fail:function(t){e(t)}})})},e.prototype.showBanner=function(t,e){var o=this;if(void 0===t&&(t={id:""}),window.qg&&this.sdk.createBannerAd){var i=window.qg.getSystemInfoSync(),n=i.windowHeight-80,r=i.windowWidth;this._banner||(this._banner=this.sdk.createBannerAd({adUnitId:this._config.bannerID,style:{top:n,left:0,width:r},adIntervals:30}),this._banner.onResize(function(t){o._banner.style.top=i.windowHeight-t.height}),this._banner.show().then(function(){e&&e(0)}).catch(function(){e&&e(1)}),this._banner.onError(function(t){console.log("[platform] [VIVOPlatform] showBanner",JSON.stringify(t))}))}},e.prototype.destroyBannerAd=function(){console.log("\u9500\u6bc1banner000"),this._banner&&(console.log("\u9500\u6bc1banner111"),this._banner.destroy(),console.log("\u9500\u6bc1banner22"),this._banner=null,console.log("\u9500\u6bc1banne3333"))},e.prototype.showNativeAds=function(t,e){var o=this;void 0===t&&(t={type:0,container:null}),console.log("XM == >>","showNativeAds",t),console.log("XM == >>","showNativeAds11"),console.log("XM == >>","showNativeAds22");var i=this.sdk.createNativeAd({adUnitId:t.id||this._config.nativeID});t.container.opacity=255,this._nativeAds.push({ads:i,container:t.container}),console.log("XM == >>","showNativeAds33"),i.onLoad(function(n){var r;r=n.adList?n.adList[0]:null,0!=t.container.opacity&&(i&&r&&(i.reportAdShow({adId:r.adId}),0==t.type?(console.log("XM == >>","showNativeAds444"),o.showNativeBanner2(r,i,t)):1==t.type?o.showNativeInsert(r,i,t):o.showNativeIcon(r,i,t)),i.offError(),i.offLoad()),e&&e(0)}),i.onError(function(n){if(console.log("[platform] [XMPlatform] showNativeAd",n),t.container){t.container.active=!1,t.container.opacity=0;var r=o._nativeAds.findIndex(function(e){return e.container.name==t.container.name});-1!=r&&o._nativeAds.splice(r,1)}i.offError(),i.offLoad(),i.destory&&i.destory(),i=null,e&&e(1),1==t.type&&cc.game.emit("onInterstitialFeedShowFailed")}),i&&i.load()},e.prototype.showNativeBanner2=function(t,e,o){var i=this;void 0===o&&(o={type:0,container:null}),console.log("\u663e\u793a\u539f\u751fBanner=======");var n=o.container,r=n.getChildByName("img"),a=n.getChildByName("title"),s=n.getChildByName("desc"),c=n.getChildByName("btnText"),l=n.getChildByName("close");if(n.active=!0,n.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),i.hideNativeAds(),o.hideCb&&o.hideCb()},this),l&&l.once(cc.Node.EventType.TOUCH_START,function(){o.isMistakeClose?(e.reportAdClick({adId:t.adId}),i.hideNativeAds()):i.hideNativeAds(),o.hideCb&&o.hideCb()}),a&&(a.getComponent(cc.Label).string=""+t.title),s&&(s.getComponent(cc.Label).string=""+t.desc),c&&(c.getComponent(cc.Label).string=""+(t.clickBtnTxt||"\u70b9\u51fb\u67e5\u770b")),r){var h=t.imgUrlList[Math.floor(Math.random()*t.imgUrlList.length)];cc.loader.load({url:h,type:"png"},function(t,e){!t&&r&&(r.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e))})}},e.prototype.hideNativeAds=function(){if(console.log("\u9690\u85cf\u539f\u751f\u5e7f\u544a"),this._nativeAds.length){var t=this._nativeAds.pop();if(cc.isValid(t.container,!0)){t.container.opacity=0,t.container.active=!1,t.container.off(cc.Node.EventType.TOUCH_START);var e=t.container.getChildByName("close");e&&e.off(cc.Node.EventType.TOUCH_START);var o=t.container.getChildByName("next");o&&o.off(cc.Node.EventType.TOUCH_START)}t.ads.destory&&t.ads.destory(),this.isInsert&&cc.game.emit("onInterstitialFeedRemove"),this.isInsert=!1,console.log("\u629b\u4e8b\u4ef6\u5173\u95ed\u539f\u751fbanner"),cc.game.emit("hideNativeAds")}},e.prototype.showNativeInsert=function(t,e,o){var i=this;void 0===o&&(o={type:0,container:null});var n=o.container,r=n.getChildByName("img")||n.getChildByName("mask").getChildByName("img"),a=n.getChildByName("title"),s=n.getChildByName("desc"),c=n.getChildByName("btnText"),l=n.getChildByName("next"),h=n.getChildByName("close"),d=n.getChildByName("mask");if(n.active=!0,n.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),i.hideNativeAds(),o.hideCb&&o.hideCb()},this),l&&l.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),i.hideNativeAds(),o.hideCb&&o.hideCb()},this),h&&h.once(cc.Node.EventType.TOUCH_START,function(){o.isMistakeClose?(e.reportAdClick({adId:t.adId}),i.hideNativeAds()):i.hideNativeAds(),o.hideCb&&o.hideCb()}),d&&d.once(cc.Node.EventType.TOUCH_START,function(){o.isMistakeAll?(e.reportAdClick({adId:t.adId}),i.hideNativeAds()):i.hideNativeAds(),o.hideCb&&o.hideCb()}),a&&(a.getComponent(cc.Label).string=""+t.title),s&&(s.getComponent(cc.Label).string=""+t.desc),c&&(c.getComponent(cc.Label).string=""+(t.clickBtnTxt||"\u70b9\u51fb\u67e5\u770b")),r){var u=t.imgUrlList[Math.floor(Math.random()*t.imgUrlList.length)];cc.loader.load({url:u,type:"png"},function(t,e){!t&&r&&(r.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e))})}cc.game.emit("onInterstitialFeedShow"),this.isInsert=!0},e.prototype.showNativeIcon=function(t,e,o){var i=this;void 0===o&&(o={type:0,container:null});var n=o.container,r=n.getChildByName("img")||n.getChildByName("mask").getChildByName("img"),a=n.getChildByName("title"),s=n.getChildByName("close");n.active=!0,n.once(cc.Node.EventType.TOUCH_START,function(){e.reportAdClick({adId:t.adId}),i.hideNativeAds(),o.hideCb&&o.hideCb()},this),s&&s.once(cc.Node.EventType.TOUCH_START,function(){o.isMistakeClose?(e.reportAdClick({adId:t.adId}),i.hideNativeAds()):i.hideNativeAds(),o.hideCb&&o.hideCb()}),a&&(a.getComponent(cc.Label).string=""+t.title),r&&cc.loader.loadRes(t.icon,cc.SpriteFrame,function(t,e){!t&&r&&(r.getComponent(cc.Sprite).spriteFrame=e)})},e.prototype.showPortalAd=function(t){var e=this;window.qg.getSystemInfoSync().platformVersionCode>=1076?this.gamePortalAd?this.gamePortalAd.show().then(function(){console.log("show success"),t&&t(!0)}).catch(function(e){t&&t(!1),console.log("show fail with:"+e.errCode+","+e.errMsg)}):(this.gamePortalAd=window.qg.createGamePortalAd({adUnitId:"342428"}),this.gamePortalAd.onLoad(function(){console.log("\u4e92\u63a8\u76d2\u5b50\u4e5d\u5bab\u683c\u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),e.gamePortalAd.show().then(function(){console.log("show success"),t&&t(!0)}).catch(function(e){t&&t(!1),console.log("show fail with:"+e.errCode+","+e.errMsg)})}),this.gamePortalAd.onClose(function(){console.log("\u4e92\u63a8\u76d2\u5b50\u4e5d\u5bab\u683c\u5e7f\u544a\u5173\u95ed")}),this.gamePortalAd.load().then(function(){console.log("load success")}).catch(function(e){t&&t(!1),console.log("load fail with:"+e.errCode+","+e.errMsg)})):console.log("\u5feb\u5e94\u7528\u5e73\u53f0\u7248\u672c\u53f7\u4f4e\u4e8e1076\uff0c\u6682\u4e0d\u652f\u6301\u4e92\u63a8\u76d2\u5b50\u76f8\u5173 API")},e.prototype.hideBanner=function(){window.qg&&this._banner&&(console.log("hideBannerAd===="),this._banner.hide(),this._banner.destroy(),this._banner=null)},e.prototype.hideNativeBanner=function(){console.log("hideNativeAds===="),this.hideNativeAds()},e.prototype.loadRewardVideoAd=function(){},e.prototype.showRewardAds=function(t){var e=this;console.log("[XM][showRewardVideo]"),this.videoAd||(console.log("[XM][showRewardVideo1]"),this.videoAd=window.qg.createRewardedVideoAd({adUnitId:this._config.rewardID}),this.videoAd.onLoad(function(){console.log("[XM] load success")}),this.videoAd.onError(function(t,e){console.log("error: \u9519\u8bef\u4fe1\u606f: "+t+", \u9519\u8bef\u7801: "+e)})),this.videoAd.onClose(function o(i){i.isEnded?(console.log("XM \u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u5b8c\u6210\uff0c\u53d1\u653e\u5956\u52b1"),t(0)):(console.log("XM \u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u53d6\u6d88\u5173\u95ed\uff0c\u4e0d\u53d1\u653e\u5956\u52b1"),t(1)),e.videoAd.offClose(o)}),console.log("[XM][showRewardVideo2]"),this.videoAd.load().then(function(){e.videoAd.show().then(function(){console.log("xm \u89c6\u9891\u663e\u793a\u6210\u529f1")})}).catch(function(e){console.error("[XM][showVideoAD] error",JSON.stringify(e)),t(-1)}),console.log("[XM][showRewardVideo3]")},e.prototype.showInsert=function(){var t=this;console.log("[XM] --\x3e \u5c55\u793a\u63d2\u5c4f");var e=window.qg.createInterstitialAd({adUnitId:this._config.insertID});e.show(),e&&(e.onClose(function o(){e&&(e.offClose(o),e.destroy(),e=null,t.playInsertAdEnd())}),e.onError(function o(i,n){console.log("XM \u63d2\u5c4f\u9519\u8bef"),console.log("errCode",i),console.log("errMsg",n),e&&(e.offError(o),e.destroy(),e=null,t.playInsertAdEnd())}))},e.prototype.playInsertAdEnd=function(){},e.prototype.playInsertAdShow=function(){},e.prototype.hasShortcutInstalled=function(){return new Promise(function(t,e){window.qg.hasShortcutInstalled&&window.qg.hasShortcutInstalled({success:function(e){0==e&&t()},fail:function(t){e(t)},complete:function(){}})})},e.prototype.removeLargePicFeed=function(){this.hideNativeAds()},e.prototype.showInterstitialFeed=function(t,e,o,i){void 0===t&&(t=""),void 0===e&&(e=3),void 0===o&&(o=0),void 0===i&&(i=0)},e}(i.BasePlatform));o.XM=r,cc._RF.pop()},{"./BasePlatform":"BasePlatform"}],config:[function(t,e,o){"use strict";cc._RF.push(e,"0a26dew5WBGaIKy8zb3+Nzz","config"),o.DEFAULT_LOG_LEVEL=o.LIMIT_REPORT_INTERVAL=o.LIMIT_REPORT_COUNT=o.ONLINE_DEFAULT_INTERVAL=o.DOMAIN=o.API_SECRET=void 0,o.API_SECRET="A8VlJnyjXXdK3Csw6ZAN4KM9jFGHFk1G",o.DOMAIN="https://game.zuiqiangyingyu.net",o.ONLINE_DEFAULT_INTERVAL=1e4,o.LIMIT_REPORT_COUNT=10,o.LIMIT_REPORT_INTERVAL=10,o.DEFAULT_LOG_LEVEL="none",cc._RF.pop()},{}],"crypto-js":[function(t,e,o){(function(i){"use strict";cc._RF.push(e,"51145ovcJtPpp2TgV5sVdNt","crypto-js"),function(i){var n;n=function(){var e,o,n,r,a,s,c,l,h,d,u=u||function(e){var o;if("undefined"!=typeof window&&window.crypto&&(o=window.crypto),!o&&"undefined"!=typeof window&&window.msCrypto&&(o=window.msCrypto),!o&&void 0!==i&&i.crypto&&(o=i.crypto),!o&&"function"==typeof t)try{o=t("crypto")}catch(m){}var n=function(){if(o){if("function"==typeof o.getRandomValues)try{return o.getRandomValues(new Uint32Array(1))[0]}catch(m){}if("function"==typeof o.randomBytes)try{return o.randomBytes(4).readInt32LE()}catch(m){}}throw new Error("Native crypto module could not be used to get secure random number.")},r=Object.create||function(){function t(){}return function(e){var o;return t.prototype=e,o=new t,t.prototype=null,o}}(),a={},s=a.lib={},c=s.Base={extend:function(t){var e=r(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},l=s.WordArray=c.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||d).stringify(this)},concat:function(t){var e=this.words,o=t.words,i=this.sigBytes,n=t.sigBytes;if(this.clamp(),i%4)for(var r=0;r<n;r++){var a=o[r>>>2]>>>24-r%4*8&255;e[i+r>>>2]|=a<<24-(i+r)%4*8}else for(r=0;r<n;r+=4)e[i+r>>>2]=o[r>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,o=this.sigBytes;t[o>>>2]&=4294967295<<32-o%4*8,t.length=e.ceil(o/4)},clone:function(){var t=c.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],o=0;o<t;o+=4)e.push(n());return new l.init(e,t)}}),h=a.enc={},d=h.Hex={stringify:function(t){for(var e=t.words,o=t.sigBytes,i=[],n=0;n<o;n++){var r=e[n>>>2]>>>24-n%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,o=[],i=0;i<e;i+=2)o[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new l.init(o,e/2)}},u=h.Latin1={stringify:function(t){for(var e=t.words,o=t.sigBytes,i=[],n=0;n<o;n++){var r=e[n>>>2]>>>24-n%4*8&255;i.push(String.fromCharCode(r))}return i.join("")},parse:function(t){for(var e=t.length,o=[],i=0;i<e;i++)o[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new l.init(o,e)}},p=h.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},f=s.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=p.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var o,i=this._data,n=i.words,r=i.sigBytes,a=this.blockSize,s=r/(4*a),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,h=e.min(4*c,r);if(c){for(var d=0;d<c;d+=a)this._doProcessBlock(n,d);o=n.splice(0,c),i.sigBytes-=h}return new l.init(o,h)},clone:function(){var t=c.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),g=(s.Hasher=f.extend({cfg:c.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,o){return new t.init(o).finalize(e)}},_createHmacHelper:function(t){return function(e,o){return new g.HMAC.init(t,o).finalize(e)}}}),a.algo={});return a}(Math);return function(){var t=u,e=t.lib.WordArray;function o(t,o,i){for(var n=[],r=0,a=0;a<o;a++)if(a%4){var s=i[t.charCodeAt(a-1)]<<a%4*2|i[t.charCodeAt(a)]>>>6-a%4*2;n[r>>>2]|=s<<24-r%4*8,r++}return e.create(n,r)}t.enc.Base64={stringify:function(t){var e=t.words,o=t.sigBytes,i=this._map;t.clamp();for(var n=[],r=0;r<o;r+=3)for(var a=(e[r>>>2]>>>24-r%4*8&255)<<16|(e[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|e[r+2>>>2]>>>24-(r+2)%4*8&255,s=0;s<4&&r+.75*s<o;s++)n.push(i.charAt(a>>>6*(3-s)&63));var c=i.charAt(64);if(c)for(;n.length%4;)n.push(c);return n.join("")},parse:function(t){var e=t.length,i=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var r=0;r<i.length;r++)n[i.charCodeAt(r)]=r}var a=i.charAt(64);if(a){var s=t.indexOf(a);-1!==s&&(e=s)}return o(t,e,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){var e=u,o=e.lib,i=o.WordArray,n=o.Hasher,r=e.algo,a=[];(function(){for(var e=0;e<64;e++)a[e]=4294967296*t.abs(t.sin(e+1))|0})();var s=r.MD5=n.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var o=0;o<16;o++){var i=e+o,n=t[i];t[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var r=this._hash.words,s=t[e+0],u=t[e+1],p=t[e+2],f=t[e+3],g=t[e+4],m=t[e+5],v=t[e+6],y=t[e+7],_=t[e+8],C=t[e+9],b=t[e+10],S=t[e+11],w=t[e+12],A=t[e+13],k=t[e+14],P=t[e+15],T=r[0],B=r[1],M=r[2],I=r[3];T=c(T,B,M,I,s,7,a[0]),I=c(I,T,B,M,u,12,a[1]),M=c(M,I,T,B,p,17,a[2]),B=c(B,M,I,T,f,22,a[3]),T=c(T,B,M,I,g,7,a[4]),I=c(I,T,B,M,m,12,a[5]),M=c(M,I,T,B,v,17,a[6]),B=c(B,M,I,T,y,22,a[7]),T=c(T,B,M,I,_,7,a[8]),I=c(I,T,B,M,C,12,a[9]),M=c(M,I,T,B,b,17,a[10]),B=c(B,M,I,T,S,22,a[11]),T=c(T,B,M,I,w,7,a[12]),I=c(I,T,B,M,A,12,a[13]),M=c(M,I,T,B,k,17,a[14]),T=l(T,B=c(B,M,I,T,P,22,a[15]),M,I,u,5,a[16]),I=l(I,T,B,M,v,9,a[17]),M=l(M,I,T,B,S,14,a[18]),B=l(B,M,I,T,s,20,a[19]),T=l(T,B,M,I,m,5,a[20]),I=l(I,T,B,M,b,9,a[21]),M=l(M,I,T,B,P,14,a[22]),B=l(B,M,I,T,g,20,a[23]),T=l(T,B,M,I,C,5,a[24]),I=l(I,T,B,M,k,9,a[25]),M=l(M,I,T,B,f,14,a[26]),B=l(B,M,I,T,_,20,a[27]),T=l(T,B,M,I,A,5,a[28]),I=l(I,T,B,M,p,9,a[29]),M=l(M,I,T,B,y,14,a[30]),T=h(T,B=l(B,M,I,T,w,20,a[31]),M,I,m,4,a[32]),I=h(I,T,B,M,_,11,a[33]),M=h(M,I,T,B,S,16,a[34]),B=h(B,M,I,T,k,23,a[35]),T=h(T,B,M,I,u,4,a[36]),I=h(I,T,B,M,g,11,a[37]),M=h(M,I,T,B,y,16,a[38]),B=h(B,M,I,T,b,23,a[39]),T=h(T,B,M,I,A,4,a[40]),I=h(I,T,B,M,s,11,a[41]),M=h(M,I,T,B,f,16,a[42]),B=h(B,M,I,T,v,23,a[43]),T=h(T,B,M,I,C,4,a[44]),I=h(I,T,B,M,w,11,a[45]),M=h(M,I,T,B,P,16,a[46]),T=d(T,B=h(B,M,I,T,p,23,a[47]),M,I,s,6,a[48]),I=d(I,T,B,M,y,10,a[49]),M=d(M,I,T,B,k,15,a[50]),B=d(B,M,I,T,m,21,a[51]),T=d(T,B,M,I,w,6,a[52]),I=d(I,T,B,M,f,10,a[53]),M=d(M,I,T,B,b,15,a[54]),B=d(B,M,I,T,u,21,a[55]),T=d(T,B,M,I,_,6,a[56]),I=d(I,T,B,M,P,10,a[57]),M=d(M,I,T,B,v,15,a[58]),B=d(B,M,I,T,A,21,a[59]),T=d(T,B,M,I,g,6,a[60]),I=d(I,T,B,M,S,10,a[61]),M=d(M,I,T,B,p,15,a[62]),B=d(B,M,I,T,C,21,a[63]),r[0]=r[0]+T|0,r[1]=r[1]+B|0,r[2]=r[2]+M|0,r[3]=r[3]+I|0},_doFinalize:function(){var e=this._data,o=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;o[n>>>5]|=128<<24-n%32;var r=t.floor(i/4294967296),a=i;o[15+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),o[14+(n+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(o.length+1),this._process();for(var s=this._hash,c=s.words,l=0;l<4;l++){var h=c[l];c[l]=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8)}return s},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}});function c(t,e,o,i,n,r,a){var s=t+(e&o|~e&i)+n+a;return(s<<r|s>>>32-r)+e}function l(t,e,o,i,n,r,a){var s=t+(e&i|o&~i)+n+a;return(s<<r|s>>>32-r)+e}function h(t,e,o,i,n,r,a){var s=t+(e^o^i)+n+a;return(s<<r|s>>>32-r)+e}function d(t,e,o,i,n,r,a){var s=t+(o^(e|~i))+n+a;return(s<<r|s>>>32-r)+e}e.MD5=n._createHelper(s),e.HmacMD5=n._createHmacHelper(s)}(Math),o=(e=u).lib,n=o.WordArray,r=o.Hasher,a=e.algo,s=[],c=a.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var o=this._hash.words,i=o[0],n=o[1],r=o[2],a=o[3],c=o[4],l=0;l<80;l++){if(l<16)s[l]=0|t[e+l];else{var h=s[l-3]^s[l-8]^s[l-14]^s[l-16];s[l]=h<<1|h>>>31}var d=(i<<5|i>>>27)+c+s[l];d+=l<20?1518500249+(n&r|~n&a):l<40?1859775393+(n^r^a):l<60?(n&r|n&a|r&a)-1894007588:(n^r^a)-899497514,c=a,a=r,r=n<<30|n>>>2,n=i,i=d}o[0]=o[0]+i|0,o[1]=o[1]+n|0,o[2]=o[2]+r|0,o[3]=o[3]+a|0,o[4]=o[4]+c|0},_doFinalize:function(){var t=this._data,e=t.words,o=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=Math.floor(o/4294967296),e[15+(i+64>>>9<<4)]=o,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}}),e.SHA1=r._createHelper(c),e.HmacSHA1=r._createHmacHelper(c),function(t){var e=u,o=e.lib,i=o.WordArray,n=o.Hasher,r=e.algo,a=[],s=[];(function(){function e(e){for(var o=t.sqrt(e),i=2;i<=o;i++)if(!(e%i))return!1;return!0}function o(t){return 4294967296*(t-(0|t))|0}for(var i=2,n=0;n<64;)e(i)&&(n<8&&(a[n]=o(t.pow(i,.5))),s[n]=o(t.pow(i,1/3)),n++),i++})();var c=[],l=r.SHA256=n.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(t,e){for(var o=this._hash.words,i=o[0],n=o[1],r=o[2],a=o[3],l=o[4],h=o[5],d=o[6],u=o[7],p=0;p<64;p++){if(p<16)c[p]=0|t[e+p];else{var f=c[p-15],g=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,m=c[p-2],v=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;c[p]=g+c[p-7]+v+c[p-16]}var y=i&n^i&r^n&r,_=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),C=u+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&h^~l&d)+s[p]+c[p];u=d,d=h,h=l,l=a+C|0,a=r,r=n,n=i,i=C+(_+y)|0}o[0]=o[0]+i|0,o[1]=o[1]+n|0,o[2]=o[2]+r|0,o[3]=o[3]+a|0,o[4]=o[4]+l|0,o[5]=o[5]+h|0,o[6]=o[6]+d|0,o[7]=o[7]+u|0},_doFinalize:function(){var e=this._data,o=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return o[n>>>5]|=128<<24-n%32,o[14+(n+64>>>9<<4)]=t.floor(i/4294967296),o[15+(n+64>>>9<<4)]=i,e.sigBytes=4*o.length,this._process(),this._hash},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=n._createHelper(l),e.HmacSHA256=n._createHmacHelper(l)}(Math),function(){var t=u,e=t.lib.WordArray,o=t.enc;function i(t){return t<<8&4278255360|t>>>8&16711935}o.Utf16=o.Utf16BE={stringify:function(t){for(var e=t.words,o=t.sigBytes,i=[],n=0;n<o;n+=2){var r=e[n>>>2]>>>16-n%4*8&65535;i.push(String.fromCharCode(r))}return i.join("")},parse:function(t){for(var o=t.length,i=[],n=0;n<o;n++)i[n>>>1]|=t.charCodeAt(n)<<16-n%2*16;return e.create(i,2*o)}},o.Utf16LE={stringify:function(t){for(var e=t.words,o=t.sigBytes,n=[],r=0;r<o;r+=2){var a=i(e[r>>>2]>>>16-r%4*8&65535);n.push(String.fromCharCode(a))}return n.join("")},parse:function(t){for(var o=t.length,n=[],r=0;r<o;r++)n[r>>>1]|=i(t.charCodeAt(r)<<16-r%2*16);return e.create(n,2*o)}}}(),function(){if("function"==typeof ArrayBuffer){var t=u.lib.WordArray,e=t.init;(t.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var o=t.byteLength,i=[],n=0;n<o;n++)i[n>>>2]|=t[n]<<24-n%4*8;e.call(this,i,o)}else e.apply(this,arguments)}).prototype=t}}(),function(){var t=u,e=t.lib,o=e.WordArray,i=e.Hasher,n=t.algo,r=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),a=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),s=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),c=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),l=o.create([0,1518500249,1859775393,2400959708,2840853838]),h=o.create([1352829926,1548603684,1836072691,2053994217,0]),d=n.RIPEMD160=i.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var o=0;o<16;o++){var i=e+o,n=t[i];t[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var d,u,_,C,b,S,w,A,k,P,T,B=this._hash.words,M=l.words,I=h.words,R=r.words,L=a.words,D=s.words,N=c.words;for(S=d=B[0],w=u=B[1],A=_=B[2],k=C=B[3],P=b=B[4],o=0;o<80;o+=1)T=d+t[e+R[o]]|0,T+=o<16?p(u,_,C)+M[0]:o<32?f(u,_,C)+M[1]:o<48?g(u,_,C)+M[2]:o<64?m(u,_,C)+M[3]:v(u,_,C)+M[4],T=(T=y(T|=0,D[o]))+b|0,d=b,b=C,C=y(_,10),_=u,u=T,T=S+t[e+L[o]]|0,T+=o<16?v(w,A,k)+I[0]:o<32?m(w,A,k)+I[1]:o<48?g(w,A,k)+I[2]:o<64?f(w,A,k)+I[3]:p(w,A,k)+I[4],T=(T=y(T|=0,N[o]))+P|0,S=P,P=k,k=y(A,10),A=w,w=T;T=B[1]+_+k|0,B[1]=B[2]+C+P|0,B[2]=B[3]+b+S|0,B[3]=B[4]+d+w|0,B[4]=B[0]+u+A|0,B[0]=T},_doFinalize:function(){var t=this._data,e=t.words,o=8*this._nDataBytes,i=8*t.sigBytes;e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(e.length+1),this._process();for(var n=this._hash,r=n.words,a=0;a<5;a++){var s=r[a];r[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return n},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});function p(t,e,o){return t^e^o}function f(t,e,o){return t&e|~t&o}function g(t,e,o){return(t|~e)^o}function m(t,e,o){return t&o|e&~o}function v(t,e,o){return t^(e|~o)}function y(t,e){return t<<e|t>>>32-e}t.RIPEMD160=i._createHelper(d),t.HmacRIPEMD160=i._createHmacHelper(d)}(Math),function(){var t=u,e=t.lib.Base,o=t.enc.Utf8;t.algo.HMAC=e.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=o.parse(e));var i=t.blockSize,n=4*i;e.sigBytes>n&&(e=t.finalize(e)),e.clamp();for(var r=this._oKey=e.clone(),a=this._iKey=e.clone(),s=r.words,c=a.words,l=0;l<i;l++)s[l]^=1549556828,c[l]^=909522486;r.sigBytes=a.sigBytes=n,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,o=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(o))}})}(),function(){var t=u,e=t.lib,o=e.Base,i=e.WordArray,n=t.algo,r=n.SHA1,a=n.HMAC,s=n.PBKDF2=o.extend({cfg:o.extend({keySize:4,hasher:r,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var o=this.cfg,n=a.create(o.hasher,t),r=i.create(),s=i.create([1]),c=r.words,l=s.words,h=o.keySize,d=o.iterations;c.length<h;){var u=n.update(e).finalize(s);n.reset();for(var p=u.words,f=p.length,g=u,m=1;m<d;m++){g=n.finalize(g),n.reset();for(var v=g.words,y=0;y<f;y++)p[y]^=v[y]}r.concat(u),l[0]++}return r.sigBytes=4*h,r}});t.PBKDF2=function(t,e,o){return s.create(o).compute(t,e)}}(),function(){var t=u,e=t.lib,o=e.Base,i=e.WordArray,n=t.algo,r=n.MD5,a=n.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:r,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var o,n=this.cfg,r=n.hasher.create(),a=i.create(),s=a.words,c=n.keySize,l=n.iterations;s.length<c;){o&&r.update(o),o=r.update(t).finalize(e),r.reset();for(var h=1;h<l;h++)o=r.finalize(o),r.reset();a.concat(o)}return a.sigBytes=4*c,a}});t.EvpKDF=function(t,e,o){return a.create(o).compute(t,e)}}(),function(){var t=u,e=t.lib.WordArray,o=t.algo,i=o.SHA256,n=o.SHA224=i.extend({_doReset:function(){this._hash=new e.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=i._doFinalize.call(this);return t.sigBytes-=4,t}});t.SHA224=i._createHelper(n),t.HmacSHA224=i._createHmacHelper(n)}(),function(){var t=u,e=t.lib,o=e.Base,i=e.WordArray,n=t.x64={};n.Word=o.extend({init:function(t,e){this.high=t,this.low=e}}),n.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,o=[],n=0;n<e;n++){var r=t[n];o.push(r.high),o.push(r.low)}return i.create(o,this.sigBytes)},clone:function(){for(var t=o.clone.call(this),e=t.words=this.words.slice(0),i=e.length,n=0;n<i;n++)e[n]=e[n].clone();return t}})}(),function(t){var e=u,o=e.lib,i=o.WordArray,n=o.Hasher,r=e.x64.Word,a=e.algo,s=[],c=[],l=[];(function(){for(var t=1,e=0,o=0;o<24;o++){s[t+5*e]=(o+1)*(o+2)/2%64;var i=(2*t+3*e)%5;t=e%5,e=i}for(t=0;t<5;t++)for(e=0;e<5;e++)c[t+5*e]=e+(2*t+3*e)%5*5;for(var n=1,a=0;a<24;a++){for(var h=0,d=0,u=0;u<7;u++){if(1&n){var p=(1<<u)-1;p<32?d^=1<<p:h^=1<<p-32}128&n?n=n<<1^113:n<<=1}l[a]=r.create(h,d)}})();var h=[];(function(){for(var t=0;t<25;t++)h[t]=r.create()})();var d=a.SHA3=n.extend({cfg:n.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;e<25;e++)t[e]=new r.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var o=this._state,i=this.blockSize/2,n=0;n<i;n++){var r=t[e+2*n],a=t[e+2*n+1];r=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(B=o[n]).high^=a,B.low^=r}for(var d=0;d<24;d++){for(var u=0;u<5;u++){for(var p=0,f=0,g=0;g<5;g++)p^=(B=o[u+5*g]).high,f^=B.low;var m=h[u];m.high=p,m.low=f}for(u=0;u<5;u++){var v=h[(u+4)%5],y=h[(u+1)%5],_=y.high,C=y.low;for(p=v.high^(_<<1|C>>>31),f=v.low^(C<<1|_>>>31),g=0;g<5;g++)(B=o[u+5*g]).high^=p,B.low^=f}for(var b=1;b<25;b++){var S=(B=o[b]).high,w=B.low,A=s[b];A<32?(p=S<<A|w>>>32-A,f=w<<A|S>>>32-A):(p=w<<A-32|S>>>64-A,f=S<<A-32|w>>>64-A);var k=h[c[b]];k.high=p,k.low=f}var P=h[0],T=o[0];for(P.high=T.high,P.low=T.low,u=0;u<5;u++)for(g=0;g<5;g++){var B=o[b=u+5*g],M=h[b],I=h[(u+1)%5+5*g],R=h[(u+2)%5+5*g];B.high=M.high^~I.high&R.high,B.low=M.low^~I.low&R.low}B=o[0];var L=l[d];B.high^=L.high,B.low^=L.low}},_doFinalize:function(){var e=this._data,o=e.words,n=(this._nDataBytes,8*e.sigBytes),r=32*this.blockSize;o[n>>>5]|=1<<24-n%32,o[(t.ceil((n+1)/r)*r>>>5)-1]|=128,e.sigBytes=4*o.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,c=s/8,l=[],h=0;h<c;h++){var d=a[h],u=d.high,p=d.low;u=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),l.push(p),l.push(u)}return new i.init(l,s)},clone:function(){for(var t=n.clone.call(this),e=t._state=this._state.slice(0),o=0;o<25;o++)e[o]=e[o].clone();return t}});e.SHA3=n._createHelper(d),e.HmacSHA3=n._createHmacHelper(d)}(Math),function(){var t=u,e=t.lib.Hasher,o=t.x64,i=o.Word,n=o.WordArray,r=t.algo;function a(){return i.create.apply(i,arguments)}var s=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],c=[];(function(){for(var t=0;t<80;t++)c[t]=a()})();var l=r.SHA512=e.extend({_doReset:function(){this._hash=new n.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var o=this._hash.words,i=o[0],n=o[1],r=o[2],a=o[3],l=o[4],h=o[5],d=o[6],u=o[7],p=i.high,f=i.low,g=n.high,m=n.low,v=r.high,y=r.low,_=a.high,C=a.low,b=l.high,S=l.low,w=h.high,A=h.low,k=d.high,P=d.low,T=u.high,B=u.low,M=p,I=f,R=g,L=m,D=v,N=y,E=_,x=C,U=b,O=S,F=w,W=A,V=k,H=P,G=T,j=B,z=0;z<80;z++){var q,K,X,J=c[z];if(z<16)K=J.high=0|t[e+2*z],q=J.low=0|t[e+2*z+1];else{var Y=c[z-15],Q=Y.high,Z=Y.low,$=(Q>>>1|Z<<31)^(Q>>>8|Z<<24)^Q>>>7,tt=(Z>>>1|Q<<31)^(Z>>>8|Q<<24)^(Z>>>7|Q<<25),et=c[z-2],ot=et.high,it=et.low,nt=(ot>>>19|it<<13)^(ot<<3|it>>>29)^ot>>>6,rt=(it>>>19|ot<<13)^(it<<3|ot>>>29)^(it>>>6|ot<<26),at=c[z-7],st=at.high,ct=at.low,lt=c[z-16],ht=lt.high,dt=lt.low;K=(K=(K=$+st+((q=tt+ct)>>>0<tt>>>0?1:0))+nt+((q+=rt)>>>0<rt>>>0?1:0))+ht+((q+=dt)>>>0<dt>>>0?1:0),J.high=K,J.low=q}var ut=U&F^~U&V,pt=O&W^~O&H,ft=M&R^M&D^R&D,gt=I&L^I&N^L&N,mt=(M>>>28|I<<4)^(M<<30|I>>>2)^(M<<25|I>>>7),vt=(I>>>28|M<<4)^(I<<30|M>>>2)^(I<<25|M>>>7),yt=(U>>>14|O<<18)^(U>>>18|O<<14)^(U<<23|O>>>9),_t=(O>>>14|U<<18)^(O>>>18|U<<14)^(O<<23|U>>>9),Ct=s[z],bt=Ct.high,St=Ct.low,wt=G+yt+((X=j+_t)>>>0<j>>>0?1:0),At=vt+gt;G=V,j=H,V=F,H=W,F=U,W=O,U=E+(wt=(wt=(wt=wt+ut+((X+=pt)>>>0<pt>>>0?1:0))+bt+((X+=St)>>>0<St>>>0?1:0))+K+((X+=q)>>>0<q>>>0?1:0))+((O=x+X|0)>>>0<x>>>0?1:0)|0,E=D,x=N,D=R,N=L,R=M,L=I,M=wt+(mt+ft+(At>>>0<vt>>>0?1:0))+((I=X+At|0)>>>0<X>>>0?1:0)|0}f=i.low=f+I,i.high=p+M+(f>>>0<I>>>0?1:0),m=n.low=m+L,n.high=g+R+(m>>>0<L>>>0?1:0),y=r.low=y+N,r.high=v+D+(y>>>0<N>>>0?1:0),C=a.low=C+x,a.high=_+E+(C>>>0<x>>>0?1:0),S=l.low=S+O,l.high=b+U+(S>>>0<O>>>0?1:0),A=h.low=A+W,h.high=w+F+(A>>>0<W>>>0?1:0),P=d.low=P+H,d.high=k+V+(P>>>0<H>>>0?1:0),B=u.low=B+j,u.high=T+G+(B>>>0<j>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,o=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[30+(i+128>>>10<<5)]=Math.floor(o/4294967296),e[31+(i+128>>>10<<5)]=o,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=e.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});t.SHA512=e._createHelper(l),t.HmacSHA512=e._createHmacHelper(l)}(),function(){var t=u,e=t.x64,o=e.Word,i=e.WordArray,n=t.algo,r=n.SHA512,a=n.SHA384=r.extend({_doReset:function(){this._hash=new i.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var t=r._doFinalize.call(this);return t.sigBytes-=16,t}});t.SHA384=r._createHelper(a),t.HmacSHA384=r._createHmacHelper(a)}(),u.lib.Cipher||function(t){var e=u,o=e.lib,i=o.Base,n=o.WordArray,r=o.BufferedBlockAlgorithm,a=e.enc,s=(a.Utf8,a.Base64),c=e.algo.EvpKDF,l=o.Cipher=r.extend({cfg:i.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,o){this.cfg=this.cfg.extend(o),this._xformMode=t,this._key=e,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?_:v}return function(e){return{encrypt:function(o,i,n){return t(i).encrypt(e,o,i,n)},decrypt:function(o,i,n){return t(i).decrypt(e,o,i,n)}}}}()}),h=(o.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),e.mode={}),d=o.BlockCipherMode=i.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),p=h.CBC=function(){var e=d.extend();function o(e,o,i){var n,r=this._iv;r?(n=r,this._iv=t):n=this._prevBlock;for(var a=0;a<i;a++)e[o+a]^=n[a]}return e.Encryptor=e.extend({processBlock:function(t,e){var i=this._cipher,n=i.blockSize;o.call(this,t,e,n),i.encryptBlock(t,e),this._prevBlock=t.slice(e,e+n)}}),e.Decryptor=e.extend({processBlock:function(t,e){var i=this._cipher,n=i.blockSize,r=t.slice(e,e+n);i.decryptBlock(t,e),o.call(this,t,e,n),this._prevBlock=r}}),e}(),f=(e.pad={}).Pkcs7={pad:function(t,e){for(var o=4*e,i=o-t.sigBytes%o,r=i<<24|i<<16|i<<8|i,a=[],s=0;s<i;s+=4)a.push(r);var c=n.create(a,i);t.concat(c)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},g=(o.BlockCipher=l.extend({cfg:l.cfg.extend({mode:p,padding:f}),reset:function(){var t;l.reset.call(this);var e=this.cfg,o=e.iv,i=e.mode;this._xformMode==this._ENC_XFORM_MODE?t=i.createEncryptor:(t=i.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==t?this._mode.init(this,o&&o.words):(this._mode=t.call(i,this,o&&o.words),this._mode.__creator=t)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t,e=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t},blockSize:4}),o.CipherParams=i.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}})),m=(e.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,o=t.salt;return(o?n.create([1398893684,1701076831]).concat(o).concat(e):e).toString(s)},parse:function(t){var e,o=s.parse(t),i=o.words;return 1398893684==i[0]&&1701076831==i[1]&&(e=n.create(i.slice(2,4)),i.splice(0,4),o.sigBytes-=16),g.create({ciphertext:o,salt:e})}},v=o.SerializableCipher=i.extend({cfg:i.extend({format:m}),encrypt:function(t,e,o,i){i=this.cfg.extend(i);var n=t.createEncryptor(o,i),r=n.finalize(e),a=n.cfg;return g.create({ciphertext:r,key:o,iv:a.iv,algorithm:t,mode:a.mode,padding:a.padding,blockSize:t.blockSize,formatter:i.format})},decrypt:function(t,e,o,i){return i=this.cfg.extend(i),e=this._parse(e,i.format),t.createDecryptor(o,i).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),y=(e.kdf={}).OpenSSL={execute:function(t,e,o,i){i||(i=n.random(8));var r=c.create({keySize:e+o}).compute(t,i),a=n.create(r.words.slice(e),4*o);return r.sigBytes=4*e,g.create({key:r,iv:a,salt:i})}},_=o.PasswordBasedCipher=v.extend({cfg:v.cfg.extend({kdf:y}),encrypt:function(t,e,o,i){var n=(i=this.cfg.extend(i)).kdf.execute(o,t.keySize,t.ivSize);i.iv=n.iv;var r=v.encrypt.call(this,t,e,n.key,i);return r.mixIn(n),r},decrypt:function(t,e,o,i){i=this.cfg.extend(i),e=this._parse(e,i.format);var n=i.kdf.execute(o,t.keySize,t.ivSize,e.salt);return i.iv=n.iv,v.decrypt.call(this,t,e,n.key,i)}})}(),u.mode.CFB=function(){var t=u.lib.BlockCipherMode.extend();function e(t,e,o,i){var n,r=this._iv;r?(n=r.slice(0),this._iv=void 0):n=this._prevBlock,i.encryptBlock(n,0);for(var a=0;a<o;a++)t[e+a]^=n[a]}return t.Encryptor=t.extend({processBlock:function(t,o){var i=this._cipher,n=i.blockSize;e.call(this,t,o,n,i),this._prevBlock=t.slice(o,o+n)}}),t.Decryptor=t.extend({processBlock:function(t,o){var i=this._cipher,n=i.blockSize,r=t.slice(o,o+n);e.call(this,t,o,n,i),this._prevBlock=r}}),t}(),u.mode.ECB=((l=u.lib.BlockCipherMode.extend()).Encryptor=l.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),l.Decryptor=l.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),l),u.pad.AnsiX923={pad:function(t,e){var o=t.sigBytes,i=4*e,n=i-o%i,r=o+n-1;t.clamp(),t.words[r>>>2]|=n<<24-r%4*8,t.sigBytes+=n},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},u.pad.Iso10126={pad:function(t,e){var o=4*e,i=o-t.sigBytes%o;t.concat(u.lib.WordArray.random(i-1)).concat(u.lib.WordArray.create([i<<24],1))},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},u.pad.Iso97971={pad:function(t,e){t.concat(u.lib.WordArray.create([2147483648],1)),u.pad.ZeroPadding.pad(t,e)},unpad:function(t){u.pad.ZeroPadding.unpad(t),t.sigBytes--}},u.mode.OFB=(d=(h=u.lib.BlockCipherMode.extend()).Encryptor=h.extend({processBlock:function(t,e){var o=this._cipher,i=o.blockSize,n=this._iv,r=this._keystream;n&&(r=this._keystream=n.slice(0),this._iv=void 0),o.encryptBlock(r,0);for(var a=0;a<i;a++)t[e+a]^=r[a]}}),h.Decryptor=d,h),u.pad.NoPadding={pad:function(){},unpad:function(){}},function(){var t=u,e=t.lib.CipherParams,o=t.enc.Hex;t.format.Hex={stringify:function(t){return t.ciphertext.toString(o)},parse:function(t){var i=o.parse(t);return e.create({ciphertext:i})}}}(),function(){var t=u,e=t.lib.BlockCipher,o=t.algo,i=[],n=[],r=[],a=[],s=[],c=[],l=[],h=[],d=[],p=[];(function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var o=0,u=0;for(e=0;e<256;e++){var f=u^u<<1^u<<2^u<<3^u<<4;f=f>>>8^255&f^99,i[o]=f,n[f]=o;var g=t[o],m=t[g],v=t[m],y=257*t[f]^16843008*f;r[o]=y<<24|y>>>8,a[o]=y<<16|y>>>16,s[o]=y<<8|y>>>24,c[o]=y,y=16843009*v^65537*m^257*g^16843008*o,l[f]=y<<24|y>>>8,h[f]=y<<16|y>>>16,d[f]=y<<8|y>>>24,p[f]=y,o?(o=g^t[t[t[v^g]]],u^=t[t[u]]):o=u=1}})();var f=[0,1,2,4,8,16,32,64,128,27,54],g=o.AES=e.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,o=t.sigBytes/4,n=4*((this._nRounds=o+6)+1),r=this._keySchedule=[],a=0;a<n;a++)a<o?r[a]=e[a]:(u=r[a-1],a%o?o>6&&a%o==4&&(u=i[u>>>24]<<24|i[u>>>16&255]<<16|i[u>>>8&255]<<8|i[255&u]):(u=i[(u=u<<8|u>>>24)>>>24]<<24|i[u>>>16&255]<<16|i[u>>>8&255]<<8|i[255&u],u^=f[a/o|0]<<24),r[a]=r[a-o]^u);for(var s=this._invKeySchedule=[],c=0;c<n;c++){if(a=n-c,c%4)var u=r[a];else u=r[a-4];s[c]=c<4||a<=4?u:l[i[u>>>24]]^h[i[u>>>16&255]]^d[i[u>>>8&255]]^p[i[255&u]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,r,a,s,c,i)},decryptBlock:function(t,e){var o=t[e+1];t[e+1]=t[e+3],t[e+3]=o,this._doCryptBlock(t,e,this._invKeySchedule,l,h,d,p,n),o=t[e+1],t[e+1]=t[e+3],t[e+3]=o},_doCryptBlock:function(t,e,o,i,n,r,a,s){for(var c=this._nRounds,l=t[e]^o[0],h=t[e+1]^o[1],d=t[e+2]^o[2],u=t[e+3]^o[3],p=4,f=1;f<c;f++){var g=i[l>>>24]^n[h>>>16&255]^r[d>>>8&255]^a[255&u]^o[p++],m=i[h>>>24]^n[d>>>16&255]^r[u>>>8&255]^a[255&l]^o[p++],v=i[d>>>24]^n[u>>>16&255]^r[l>>>8&255]^a[255&h]^o[p++],y=i[u>>>24]^n[l>>>16&255]^r[h>>>8&255]^a[255&d]^o[p++];l=g,h=m,d=v,u=y}g=(s[l>>>24]<<24|s[h>>>16&255]<<16|s[d>>>8&255]<<8|s[255&u])^o[p++],m=(s[h>>>24]<<24|s[d>>>16&255]<<16|s[u>>>8&255]<<8|s[255&l])^o[p++],v=(s[d>>>24]<<24|s[u>>>16&255]<<16|s[l>>>8&255]<<8|s[255&h])^o[p++],y=(s[u>>>24]<<24|s[l>>>16&255]<<16|s[h>>>8&255]<<8|s[255&d])^o[p++],t[e]=g,t[e+1]=m,t[e+2]=v,t[e+3]=y},keySize:8});t.AES=e._createHelper(g)}(),function(){var t=u,e=t.lib,o=e.WordArray,i=e.BlockCipher,n=t.algo,r=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],s=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=n.DES=i.extend({_doReset:function(){for(var t=this._key.words,e=[],o=0;o<56;o++){var i=r[o]-1;e[o]=t[i>>>5]>>>31-i%32&1}for(var n=this._subKeys=[],c=0;c<16;c++){var l=n[c]=[],h=s[c];for(o=0;o<24;o++)l[o/6|0]|=e[(a[o]-1+h)%28]<<31-o%6,l[4+(o/6|0)]|=e[28+(a[o+24]-1+h)%28]<<31-o%6;for(l[0]=l[0]<<1|l[0]>>>31,o=1;o<7;o++)l[o]=l[o]>>>4*(o-1)+3;l[7]=l[7]<<5|l[7]>>>27}var d=this._invSubKeys=[];for(o=0;o<16;o++)d[o]=n[15-o]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,e,o){this._lBlock=t[e],this._rBlock=t[e+1],d.call(this,4,252645135),d.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),d.call(this,1,1431655765);for(var i=0;i<16;i++){for(var n=o[i],r=this._lBlock,a=this._rBlock,s=0,h=0;h<8;h++)s|=c[h][((a^n[h])&l[h])>>>0];this._lBlock=a,this._rBlock=r^s}var u=this._lBlock;this._lBlock=this._rBlock,this._rBlock=u,d.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),t[e]=this._lBlock,t[e+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(t,e){var o=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=o,this._lBlock^=o<<t}function p(t,e){var o=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=o,this._rBlock^=o<<t}t.DES=i._createHelper(h);var f=n.TripleDES=i.extend({_doReset:function(){var t=this._key.words;if(2!==t.length&&4!==t.length&&t.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var e,i,n=t.slice(0,2);e=t.length<4?t.slice(0,2):t.slice(2,4),i=t.length<6?t.slice(0,2):t.slice(4,6),this._des1=h.createEncryptor(o.create(n)),this._des2=h.createEncryptor(o.create(e)),this._des3=h.createEncryptor(o.create(i))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=i._createHelper(f)}(),function(){var t=u,e=t.lib.StreamCipher,o=t.algo,i=o.RC4=e.extend({_doReset:function(){for(var t=this._key,e=t.words,o=t.sigBytes,i=this._S=[],n=0;n<256;n++)i[n]=n;n=0;for(var r=0;n<256;n++){var a=n%o,s=e[a>>>2]>>>24-a%4*8&255;r=(r+i[n]+s)%256;var c=i[n];i[n]=i[r],i[r]=c}this._i=this._j=0},_doProcessBlock:function(t,e){t[e]^=n.call(this)},keySize:8,ivSize:0});function n(){for(var t=this._S,e=this._i,o=this._j,i=0,n=0;n<4;n++){o=(o+t[e=(e+1)%256])%256;var r=t[e];t[e]=t[o],t[o]=r,i|=t[(t[e]+t[o])%256]<<24-8*n}return this._i=e,this._j=o,i}t.RC4=e._createHelper(i);var r=o.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)n.call(this)}});t.RC4Drop=e._createHelper(r)}(),u.mode.CTRGladman=function(){var t=u.lib.BlockCipherMode.extend();function e(t){if(255==(t>>24&255)){var e=t>>16&255,o=t>>8&255,i=255&t;255===e?(e=0,255===o?(o=0,255===i?i=0:++i):++o):++e,t=0,t+=e<<16,t+=o<<8,t+=i}else t+=1<<24;return t}function o(t){return 0===(t[0]=e(t[0]))&&(t[1]=e(t[1])),t}var i=t.Encryptor=t.extend({processBlock:function(t,e){var i=this._cipher,n=i.blockSize,r=this._iv,a=this._counter;r&&(a=this._counter=r.slice(0),this._iv=void 0),o(a);var s=a.slice(0);i.encryptBlock(s,0);for(var c=0;c<n;c++)t[e+c]^=s[c]}});return t.Decryptor=i,t}(),function(){var t=u,e=t.lib.StreamCipher,o=t.algo,i=[],n=[],r=[],a=o.Rabbit=e.extend({_doReset:function(){for(var t=this._key.words,e=this.cfg.iv,o=0;o<4;o++)t[o]=16711935&(t[o]<<8|t[o]>>>24)|4278255360&(t[o]<<24|t[o]>>>8);var i=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],n=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];for(this._b=0,o=0;o<4;o++)s.call(this);for(o=0;o<8;o++)n[o]^=i[o+4&7];if(e){var r=e.words,a=r[0],c=r[1],l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),h=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),d=l>>>16|4294901760&h,u=h<<16|65535&l;for(n[0]^=l,n[1]^=d,n[2]^=h,n[3]^=u,n[4]^=l,n[5]^=d,n[6]^=h,n[7]^=u,o=0;o<4;o++)s.call(this)}},_doProcessBlock:function(t,e){var o=this._X;s.call(this),i[0]=o[0]^o[5]>>>16^o[3]<<16,i[1]=o[2]^o[7]>>>16^o[5]<<16,i[2]=o[4]^o[1]>>>16^o[7]<<16,i[3]=o[6]^o[3]>>>16^o[1]<<16;for(var n=0;n<4;n++)i[n]=16711935&(i[n]<<8|i[n]>>>24)|4278255360&(i[n]<<24|i[n]>>>8),t[e+n]^=i[n]},blockSize:4,ivSize:2});function s(){for(var t=this._X,e=this._C,o=0;o<8;o++)n[o]=e[o];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<n[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<n[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<n[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<n[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<n[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<n[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<n[6]>>>0?1:0)|0,e[7]>>>0<n[7]>>>0?this._b=1:this._b=0,o=0;o<8;o++){var i=t[o]+e[o],a=65535&i,s=i>>>16,c=((a*a>>>17)+a*s>>>15)+s*s,l=((4294901760&i)*i|0)+((65535&i)*i|0);r[o]=c^l}t[0]=r[0]+(r[7]<<16|r[7]>>>16)+(r[6]<<16|r[6]>>>16)|0,t[1]=r[1]+(r[0]<<8|r[0]>>>24)+r[7]|0,t[2]=r[2]+(r[1]<<16|r[1]>>>16)+(r[0]<<16|r[0]>>>16)|0,t[3]=r[3]+(r[2]<<8|r[2]>>>24)+r[1]|0,t[4]=r[4]+(r[3]<<16|r[3]>>>16)+(r[2]<<16|r[2]>>>16)|0,t[5]=r[5]+(r[4]<<8|r[4]>>>24)+r[3]|0,t[6]=r[6]+(r[5]<<16|r[5]>>>16)+(r[4]<<16|r[4]>>>16)|0,t[7]=r[7]+(r[6]<<8|r[6]>>>24)+r[5]|0}t.Rabbit=e._createHelper(a)}(),u.mode.CTR=function(){var t=u.lib.BlockCipherMode.extend(),e=t.Encryptor=t.extend({processBlock:function(t,e){var o=this._cipher,i=o.blockSize,n=this._iv,r=this._counter;n&&(r=this._counter=n.slice(0),this._iv=void 0);var a=r.slice(0);o.encryptBlock(a,0),r[i-1]=r[i-1]+1|0;for(var s=0;s<i;s++)t[e+s]^=a[s]}});return t.Decryptor=e,t}(),function(){var t=u,e=t.lib.StreamCipher,o=t.algo,i=[],n=[],r=[],a=o.RabbitLegacy=e.extend({_doReset:function(){var t=this._key.words,e=this.cfg.iv,o=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],i=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var n=0;n<4;n++)s.call(this);for(n=0;n<8;n++)i[n]^=o[n+4&7];if(e){var r=e.words,a=r[0],c=r[1],l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),h=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),d=l>>>16|4294901760&h,u=h<<16|65535&l;for(i[0]^=l,i[1]^=d,i[2]^=h,i[3]^=u,i[4]^=l,i[5]^=d,i[6]^=h,i[7]^=u,n=0;n<4;n++)s.call(this)}},_doProcessBlock:function(t,e){var o=this._X;s.call(this),i[0]=o[0]^o[5]>>>16^o[3]<<16,i[1]=o[2]^o[7]>>>16^o[5]<<16,i[2]=o[4]^o[1]>>>16^o[7]<<16,i[3]=o[6]^o[3]>>>16^o[1]<<16;for(var n=0;n<4;n++)i[n]=16711935&(i[n]<<8|i[n]>>>24)|4278255360&(i[n]<<24|i[n]>>>8),t[e+n]^=i[n]},blockSize:4,ivSize:2});function s(){for(var t=this._X,e=this._C,o=0;o<8;o++)n[o]=e[o];for(e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<n[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<n[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<n[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<n[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<n[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<n[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<n[6]>>>0?1:0)|0,e[7]>>>0<n[7]>>>0?this._b=1:this._b=0,o=0;o<8;o++){var i=t[o]+e[o],a=65535&i,s=i>>>16,c=((a*a>>>17)+a*s>>>15)+s*s,l=((4294901760&i)*i|0)+((65535&i)*i|0);r[o]=c^l}t[0]=r[0]+(r[7]<<16|r[7]>>>16)+(r[6]<<16|r[6]>>>16)|0,t[1]=r[1]+(r[0]<<8|r[0]>>>24)+r[7]|0,t[2]=r[2]+(r[1]<<16|r[1]>>>16)+(r[0]<<16|r[0]>>>16)|0,t[3]=r[3]+(r[2]<<8|r[2]>>>24)+r[1]|0,t[4]=r[4]+(r[3]<<16|r[3]>>>16)+(r[2]<<16|r[2]>>>16)|0,t[5]=r[5]+(r[4]<<8|r[4]>>>24)+r[3]|0,t[6]=r[6]+(r[5]<<16|r[5]>>>16)+(r[4]<<16|r[4]>>>16)|0,t[7]=r[7]+(r[6]<<8|r[6]>>>24)+r[5]|0}t.RabbitLegacy=e._createHelper(a)}(),u.pad.ZeroPadding={pad:function(t,e){var o=4*e;t.clamp(),t.sigBytes+=o-(t.sigBytes%o||o)},unpad:function(t){var e=t.words,o=t.sigBytes-1;for(o=t.sigBytes-1;o>=0;o--)if(e[o>>>2]>>>24-o%4*8&255){t.sigBytes=o+1;break}}},u},"object"==typeof o?e.exports=o=n():"function"==typeof define&&define.amd?define([],n):(void 0).CryptoJS=n()}.call(void 0,void 0!==i?i:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{crypto:74}],function:[function(t,e,o){"use strict";cc._RF.push(e,"19f12v0+VZFHoY6S5x6eIhn","function"),o.getServerTime=o.getClientTime=o.getNonce=o.arrSort=o.getSign=o.response=o.formatDate=o.versionFormat=void 0;var i=t("./Api"),n=t("./md5"),r=t("./config");function a(t){var e={};return Object.keys(t).sort().forEach(function(o){e[o]=t[o]}),e}function s(){return n.md5((c()+1e3*Math.random()).toString())}function c(){return Math.round(Date.now()/1e3)}o.versionFormat=function(t){return parseInt(t.replace(".",""))},o.formatDate=function(t,e){var o={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours()%12==0?12:t.getHours()%12,"H+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(e)&&(e=e.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"\u661f\u671f":"\u5468":"")+"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".charAt(t.getDay()))),o)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?o[i]:("00"+o[i]).substr((""+o[i]).length)));return e},o.response=function(t,e,o){return void 0===t&&(t=0),void 0===e&&(e=""),void 0===o&&(o={}),{code:t,msg:e,data:o}},o.getSign=function(t){t.timestamp=c(),t.nonce=s(),t=a(t);var e=[];for(var o in t)e.push(o+"="+t[o]);var i=e.join("&")+r.API_SECRET;return t.sign=n.md5(i),t},o.arrSort=a,o.getNonce=s,o.getClientTime=c,o.getServerTime=function(t){i.serverTime(t)},cc._RF.pop()},{"./Api":"Api","./config":"config","./md5":"md5"}],index:[function(t,e,o){"use strict";cc._RF.push(e,"5edcc/ARhBCbq396U5dWesz","index");var i=t("./Report"),n=t("./Show"),r=t("./Hide"),a=t("./Login"),s=t("./Api"),c=t("./TimeManage"),l=t("./config");window.wxapi=Object.assign({},window.tt);var h=t("./ReportQueue");window.reportQueue=h.default;var d=t("./Params");window.params=d.default;var u=t("./LocalStorage"),p=t("./Logger"),f=new(function(){function t(){this._initFlag=!1,this._showFlag=!1,u.default.removeItem(c.default.lockGetFirstServerTime),r.default.hide(function(){window.reportQueue.len()>0&&(window.Logger.info("## \u5904\u7406\u9000\u51fa\u672a\u4e0a\u62a5\u4e8b\u4ef6(\u5171\u8ba1"+window.reportQueue.len()+"\u6761)"),i.default.reportQueue()),window.Logger.info("## \u9000\u51fa\u4e0a\u62a5\u5728\u7ebf\u65f6\u957f\uff0c\u5f53\u524d\u5728\u7ebf\u65f6\u957f\u4e3a\uff1a",c.default.getOnlineTime()),i.default.online(),clearInterval(window.wonder_online),window.wonder_online=null})}return t.prototype.initParams=function(t){var e=this;if(window.Logger=new p.default(l.DEFAULT_LOG_LEVEL),window.Logger.setLogLevel(t.log_level),window.Logger.info("## \u521d\u59cb\u5316\u6e20\u9053\u53c2\u6570\uff1a",t,window.params),window.params.setGameParams(t),window.tt){var o=window.tt.getLaunchOptionsSync();window.Logger.info("## \u542f\u52a8\u53c2\u6570\uff1a",o.query),window.params.setShowParams(o.query),o&&o.group_id?window.video_id=o.group_id:window.video_id="",window.Logger.info("## \u89c6\u9891ID\uff1a",window.video_id),o.query&&(o.query.promotionid?window.ad_id=o.query.promotionid:o.query.adid?window.ad_id=o.query.adid:o.query.aid&&(window.ad_id=o.query.aid),o.query.creativeid&&(window.creative_id=o.query.creativeid),o.query.projectid&&(window.projectid=o.query.projectid),o.query.promotionid&&(window.promotionid=o.query.promotionid),o.query.mid1&&(window.mid1=o.query.mid1),o.query.mid2&&(window.mid2=o.query.mid2),o.query.mid3&&(window.mid3=o.query.mid3),o.query.mid4&&(window.mid4=o.query.mid4),o.query.mid5&&(window.mid5=o.query.mid5),o.query.mid6&&(window.mid6=o.query.mid6))}this.initReport(),this.setInterval(),n.default.show(function(){e.setInterval()})},t.prototype.setInterval=function(){window.wonder_online||(c.default.setStartClientTime(),window.wonder_online=setInterval(function(){c.default.setEndClientTime(),window.Logger.info("## \u5728\u7ebf\u65f6\u957f\u5fc3\u8df3:",c.default.getOnlineTime()),i.default.checkReportQueue(!1)},l.ONLINE_DEFAULT_INTERVAL))},t.prototype.report=function(t,e){window.tt&&i.default.other(t,e)},t.prototype.initReport=function(){window.tt&&(window.params.getUserParams("openid")?(a.default.login({success:function(){window.game_loginDone=!0}}),window.openid=window.params.getUserParams("openid"),window.Logger.info("## \u68c0\u67e5\u4e0a\u6b21\u662f\u5426\u6709\u5f02\u5e38\u9000\u51fa\u5bfc\u81f4\u5728\u7ebf\u65f6\u957f\u672a\u4e0a\u62a5",c.default.getOnlineTime()),c.default.getOnlineTime()>0&&i.default.online(),window.Logger.info("## \u68c0\u67e5\u4e0a\u6b21\u662f\u5426\u6709\u5f02\u5e38\u9000\u51fa\u5bfc\u81f4\u4e8b\u4ef6\u961f\u5217\u672a\u4e0a\u62a5",window.reportQueue.len()),window.reportQueue.len()>0&&i.default.reportQueue(),i.default.click(),i.default.active(),i.default.userInfo()):(window.Logger.info("## \u91cd\u65b0\u8c03\u7528\u767b\u5f55\u83b7\u53d6openid"),a.default.login({success:function(t){window.game_loginDone=!0,window.Logger.info("## login: ",t),window.Logger.info("## app_name: "+window.params.getGameParams("app_name")),s.getOpenid({code:t.code,app_name:window.params.getGameParams("app_name")},function(t){0==t.data.code?(window.Logger.info("## \u83b7\u53d6openid\u6210\u529f \uff1a",t.data.data.openid),window.openid=t.data.data.openid,window.params.setUserParams({openid:t.data.data.openid}),c.default.getOnlineTime()>0&&(window.Logger.info("## \u5904\u7406\u5f02\u5e38\u9000\u51fa\u5bfc\u81f4\u672a\u4e0a\u62a5\u7684\u5728\u7ebf\u65f6\u957f"),i.default.online()),window.reportQueue.len()>0&&(window.Logger.info("## \u5904\u7406\u5f02\u5e38\u9000\u51fa\u5bfc\u81f4\u672a\u4e0a\u62a5\u7684\u4e8b\u4ef6\u961f\u5217"),i.default.reportQueue()),i.default.click(),i.default.active(),i.default.userInfo()):window.Logger.warn("## \u83b7\u53d6openid\u5931\u8d25\uff0c\u8fd4\u56de\u53c2\u6570\u4e3a\uff1a",t.data)},function(t){window.Logger.warn("## \u8c03\u7528\u83b7\u53d6openid\u63a5\u53e3\u5931\u8d25\uff1a",t)})},fail:function(t){window.Logger.warn("\u8c03\u7528wx.login\u5931\u8d25\uff1a",t)}})))},t.prototype.getReportList=function(){return window.reportQueue.getList()},t.prototype.getFirstReportServerTime=function(){return c.default.getFirstReportServerTime()},t.prototype.getFirstReportClientTime=function(){return c.default.getFirstReportClientTime()},t.prototype.getOnlineTime=function(){return c.default.getOnlineTime()},t}());o.default=f,cc._RF.pop()},{"./Api":"Api","./Hide":"Hide","./LocalStorage":"LocalStorage","./Logger":"Logger","./Login":"Login","./Params":"Params","./Report":"Report","./ReportQueue":"ReportQueue","./Show":"Show","./TimeManage":"TimeManage","./config":"config"}],levelReviveHelper:[function(t,e,o){"use strict";cc._RF.push(e,"d22efj3Li1GHqJpE1WEVROa","levelReviveHelper");var i=function(){function t(){}return t.levelFailEvent=function(t,e){cc.game.emit("levelFailEvent",t,e)},t}();o.default=i,cc._RF.pop()},{}],md5:[function(t,e,o){"use strict";cc._RF.push(e,"fa926G0x9VAMaJ33dh402o3","md5"),o.md5=void 0,o.md5=function(t){function e(t,e){return t<<e|t>>>32-e}function o(t,e){var o,i,n,r,a;return n=2147483648&t,r=2147483648&e,a=(1073741823&t)+(1073741823&e),(o=1073741824&t)&(i=1073741824&e)?2147483648^a^n^r:o|i?1073741824&a?3221225472^a^n^r:1073741824^a^n^r:a^n^r}function i(t,e,o){return t&e|~t&o}function n(t,e,o){return t&o|e&~o}function r(t,e,o){return t^e^o}function a(t,e,o){return e^(t|~o)}function s(t,n,r,a,s,c,l){return t=o(t,o(o(i(n,r,a),s),l)),o(e(t,c),n)}function c(t,i,r,a,s,c,l){return t=o(t,o(o(n(i,r,a),s),l)),o(e(t,c),i)}function l(t,i,n,a,s,c,l){return t=o(t,o(o(r(i,n,a),s),l)),o(e(t,c),i)}function h(t,i,n,r,s,c,l){return t=o(t,o(o(a(i,n,r),s),l)),o(e(t,c),i)}function d(t){var e,o="",i="";for(e=0;3>=e;e++)o+=(i="0"+(t>>>8*e&255).toString(16)).substr(i.length-2,2);return o}var u,p,f,g,m,v,y,_,C,b;for(b=function(t){for(var e,o=t.length,i=o+8,n=16*((i-i%64)/64+1),r=new Array(n-1),a=0,s=0;o>s;)a=s%4*8,r[e=(s-s%4)/4]=r[e]|t.charCodeAt(s)<<a,s++;return a=s%4*8,r[e=(s-s%4)/4]=r[e]|128<<a,r[n-2]=o<<3,r[n-1]=o>>>29,r}(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",o=0;o<t.length;o++){var i=t.charCodeAt(o);128>i?e+=String.fromCharCode(i):i>127&&2048>i?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e}(t)),v=1732584193,y=4023233417,_=2562383102,C=271733878,u=0;u<b.length;u+=16)p=v,f=y,g=_,m=C,v=s(v,y,_,C,b[u+0],7,3614090360),C=s(C,v,y,_,b[u+1],12,3905402710),_=s(_,C,v,y,b[u+2],17,606105819),y=s(y,_,C,v,b[u+3],22,3250441966),v=s(v,y,_,C,b[u+4],7,4118548399),C=s(C,v,y,_,b[u+5],12,1200080426),_=s(_,C,v,y,b[u+6],17,2821735955),y=s(y,_,C,v,b[u+7],22,4249261313),v=s(v,y,_,C,b[u+8],7,1770035416),C=s(C,v,y,_,b[u+9],12,2336552879),_=s(_,C,v,y,b[u+10],17,4294925233),y=s(y,_,C,v,b[u+11],22,2304563134),v=s(v,y,_,C,b[u+12],7,1804603682),C=s(C,v,y,_,b[u+13],12,4254626195),_=s(_,C,v,y,b[u+14],17,2792965006),v=c(v,y=s(y,_,C,v,b[u+15],22,1236535329),_,C,b[u+1],5,4129170786),C=c(C,v,y,_,b[u+6],9,3225465664),_=c(_,C,v,y,b[u+11],14,643717713),y=c(y,_,C,v,b[u+0],20,3921069994),v=c(v,y,_,C,b[u+5],5,3593408605),C=c(C,v,y,_,b[u+10],9,38016083),_=c(_,C,v,y,b[u+15],14,3634488961),y=c(y,_,C,v,b[u+4],20,3889429448),v=c(v,y,_,C,b[u+9],5,568446438),C=c(C,v,y,_,b[u+14],9,3275163606),_=c(_,C,v,y,b[u+3],14,4107603335),y=c(y,_,C,v,b[u+8],20,1163531501),v=c(v,y,_,C,b[u+13],5,2850285829),C=c(C,v,y,_,b[u+2],9,4243563512),_=c(_,C,v,y,b[u+7],14,1735328473),v=l(v,y=c(y,_,C,v,b[u+12],20,2368359562),_,C,b[u+5],4,4294588738),C=l(C,v,y,_,b[u+8],11,2272392833),_=l(_,C,v,y,b[u+11],16,1839030562),y=l(y,_,C,v,b[u+14],23,4259657740),v=l(v,y,_,C,b[u+1],4,2763975236),C=l(C,v,y,_,b[u+4],11,1272893353),_=l(_,C,v,y,b[u+7],16,4139469664),y=l(y,_,C,v,b[u+10],23,3200236656),v=l(v,y,_,C,b[u+13],4,681279174),C=l(C,v,y,_,b[u+0],11,3936430074),_=l(_,C,v,y,b[u+3],16,3572445317),y=l(y,_,C,v,b[u+6],23,76029189),v=l(v,y,_,C,b[u+9],4,3654602809),C=l(C,v,y,_,b[u+12],11,3873151461),_=l(_,C,v,y,b[u+15],16,530742520),v=h(v,y=l(y,_,C,v,b[u+2],23,3299628645),_,C,b[u+0],6,4096336452),C=h(C,v,y,_,b[u+7],10,1126891415),_=h(_,C,v,y,b[u+14],15,2878612391),y=h(y,_,C,v,b[u+5],21,4237533241),v=h(v,y,_,C,b[u+12],6,1700485571),C=h(C,v,y,_,b[u+3],10,2399980690),_=h(_,C,v,y,b[u+10],15,4293915773),y=h(y,_,C,v,b[u+1],21,2240044497),v=h(v,y,_,C,b[u+8],6,1873313359),C=h(C,v,y,_,b[u+15],10,4264355552),_=h(_,C,v,y,b[u+6],15,2734768916),y=h(y,_,C,v,b[u+13],21,1309151649),v=h(v,y,_,C,b[u+4],6,4149444226),C=h(C,v,y,_,b[u+11],10,3174756917),_=h(_,C,v,y,b[u+2],15,718787259),y=h(y,_,C,v,b[u+9],21,3951481745),v=o(v,p),y=o(y,f),_=o(_,g),C=o(C,m);return(d(v)+d(y)+d(_)+d(C)).toLowerCase()},cc._RF.pop()},{}],myXxtea:[function(t,e,o){"use strict";cc._RF.push(e,"3e9f8Vkkv1Fcr1phqfpUtjg","myXxtea"),o.myXxtea=void 0;var i=function(){function t(){}return t.prototype.xxtea_encrypt=function(t,e){if(""==t)return"";var o,i,n=this.str2long(t,!0),r=this.str2long(e,!1);if("string"==typeof t&&(t=this.toBytes(t)),"string"==typeof e&&(e=this.toBytes(e)),null==t||0===t.length)return t;n=this.toUint32Array(t,!0),r=this.toUint32Array(e,!1);for(var a=n.length-1,s=n[a],c=n[0],l=Math.floor(6+52/(a+1)),h=0;l-- >0;){i=(h=h+2654435769&4294967295)>>>2&3;for(var d=0;d<a;d++)o=(s>>>5^(c=n[d+1])<<2)+(c>>>3^s<<4)^(h^c)+(r[3&d^i]^s),s=n[d]=n[d]+o&4294967295;o=(s>>>5^(c=n[0])<<2)+(c>>>3^s<<4)^(h^c)+(r[3&d^i]^s),s=n[a]=n[a]+o&4294967295}return this.str2Hex(this.long2str(n,!1))},t.prototype.xxtea_decrypt=function(t,e){if(""==t)return"";var o,i;t=this.hex2str(t);for(var n=this.str2long(t,!1),r=this.str2long(e,!1),a=n.length-1,s=n[a-1],c=n[0],l=2654435769*Math.floor(6+52/(a+1))&4294967295;0!=l;){i=l>>>2&3;for(var h=a;h>0;h--)o=((s=n[h-1])>>>5^c<<2)+(c>>>3^s<<4)^(l^c)+(r[3&h^i]^s),c=n[h]=n[h]-o&4294967295;o=((s=n[a])>>>5^c<<2)+(c>>>3^s<<4)^(l^c)+(r[3&h^i]^s),c=n[0]=n[0]-o&4294967295,l=l-2654435769&4294967295}var d=this.toUint8Array(n,!0);return this.toString(d)},t.prototype.long2str=function(t,e){for(var o=t.length,i=4294967295&t[o-1],n=0;n<o;n++)t[n]=String.fromCharCode(255&t[n],t[n]>>>8&255,t[n]>>>16&255,t[n]>>>24&255);return e?t.join("").substring(0,i):t.join("")},t.prototype.str2long=function(t,e){for(var o=t.length,i=[],n=0;n<o;n+=4)i[n>>2]=t.charCodeAt(n)|t.charCodeAt(n+1)<<8|t.charCodeAt(n+2)<<16|t.charCodeAt(n+3)<<24;return e&&(i[i.length]=o),i},t.prototype.str2Hex=function(t){var e="",o="",i=0;do{1==(o=t.charCodeAt(i++).toString(16)).length&&(o="0"+o),e+=o}while(i<t.length);return e},t.prototype.hex2str=function(t){for(var e="",o=0;o<t.length;){var i=parseInt(t.substr(o,1),16)<<4|parseInt(t.substr(++o,1),16);i&=255,e+=String.fromCharCode(i),++o}return e},t.prototype.toUint32Array=function(t,e){var o,i=t.length,n=i>>2;0!=(3&i)&&++n,e?(o=new Array(n+1))[n]=i:o=new Uint32Array(n);for(var r=0;r<i;++r)o[r>>2]|=t[r]<<((3&r)<<3);return o},t.prototype.toUint8Array=function(t,e){var o;o=e?t[t.length-1]:t.length<<2;for(var i=new Uint8Array(o),n=0;n<o;n++)i[n]=t[n>>2]>>((3&n)<<3);return i},t.prototype.toBytes=function(t){for(var e=t.length,o=new Uint8Array(3*e),i=0,n=0;n<e;n++){var r=t.charCodeAt(n);if(r<128)o[i++]=r;else if(r<2048)o[i++]=192|r>>6,o[i++]=128|63&r;else{if(!(r<55296||r>57343)){if(n+1<e){var a=t.charCodeAt(n+1);if(r<56320&&56320<=a&&a<=57343){var s=65536+((1023&r)<<10|1023&a);o[i++]=240|s>>18,o[i++]=128|s>>12&63,o[i++]=128|s>>6&63,o[i++]=128|63&s,n++;continue}}throw new Error("Malformed string")}o[i++]=224|r>>12,o[i++]=128|r>>6&63,o[i++]=128|63&r}}return o.subarray(0,i)},t.prototype.toShortString=function(t,e){for(var o=new Array(e),i=0,n=0,r=t.length;i<e&&n<r;i++){var a=t[n++];switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o[i]=a;break;case 12:case 13:if(!(n<r))throw new Error("Unfinished UTF-8 octet sequence");o[i]=(31&a)<<6|63&t[n++];break;case 14:if(!(n+1<r))throw new Error("Unfinished UTF-8 octet sequence");o[i]=(15&a)<<12|(63&t[n++])<<6|63&t[n++];break;case 15:if(!(n+2<r))throw new Error("Unfinished UTF-8 octet sequence");var s=((7&a)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;if(!(0<=s&&s<=1048575))throw new Error("Character outside valid Unicode range: 0x"+s.toString(16));o[i++]=s>>10&1023|55296,o[i]=1023&s|56320;break;default:throw new Error("Bad UTF-8 encoding 0x"+a.toString(16))}}return i<e&&(o=o.slice(0,i)),String.fromCharCode.apply(String,o)},t.prototype.toLongString=function(t,e){for(var o=[],i=new Array(65535),n=0,r=0,a=t.length;n<e&&r<a;n++){var s=t[r++];switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:i[n]=s;break;case 12:case 13:if(!(r<a))throw new Error("Unfinished UTF-8 octet sequence");i[n]=(31&s)<<6|63&t[r++];break;case 14:if(!(r+1<a))throw new Error("Unfinished UTF-8 octet sequence");i[n]=(15&s)<<12|(63&t[r++])<<6|63&t[r++];break;case 15:if(!(r+2<a))throw new Error("Unfinished UTF-8 octet sequence");var c=((7&s)<<18|(63&t[r++])<<12|(63&t[r++])<<6|63&t[r++])-65536;if(!(0<=c&&c<=1048575))throw new Error("Character outside valid Unicode range: 0x"+c.toString(16));i[n++]=c>>10&1023|55296,i[n]=1023&c|56320;break;default:throw new Error("Bad UTF-8 encoding 0x"+s.toString(16))}if(n>=65534){var l=n+1;o.push(String.fromCharCode.apply(String,i.subarray(0,l))),e-=l,n=-1}}return n>0&&o.push(String.fromCharCode.apply(String,i.slice(0,n))),o.join("")},t.prototype.toString=function(t){var e=t.length;return 0===e?"":e<1e5?this.toShortString(t,e):this.toLongString(t,e)},t}();o.myXxtea=i,cc._RF.pop()},{}],temp:[function(t,e){"use strict";cc._RF.push(e,"c8ca2IGQZVKXpqSBoMa/j0K","temp"),cc._RF.pop()},{}],ttPostbackCtl:[function(t,e,o){"use strict";cc._RF.push(e,"b733fCBKrtGGauvrMx54orD","ttPostbackCtl");var i=t("./index"),n=t("./Report"),r=function(){function t(){this._sdk=i.default}return t.GetInstance=function(){return t.instance||(t.instance=new t),this.instance},t.prototype.init=function(t,e){if(window.tt){var o=t,i=e;this._sdk.initParams({app_name:o,channel:"tt_minigame",version:i,log_level:"info"})}},t.prototype.adRequest=function(t){n.default.adRequest(t)},t.prototype.adClick=function(t){n.default.adClick(t)},t.prototype.adImpression=function(t){n.default.adImpression(t)},t.prototype.adFill=function(t){n.default.adFill(t)},t.prototype.adImpressionDone=function(t){n.default.adImpressionDone(t)},t.instance=null,t}();o.default=r,cc._RF.pop()},{"./Report":"Report","./index":"index"}],umaTT:[function(t,e){"use strict";cc._RF.push(e,"fbddf+O0clMOKM7wwtIR2r8","umaTT");var o="[UMENG] -- ",i=function(){var t=null,e=!1;function i(){this.setDebug=function(t){e=t},this.d=function(){if(e)try{"string"==typeof arguments[0]&&(arguments[0]=o+arguments[0]),console.debug.apply(console,arguments)}catch(o){}},this.i=function(){try{if(e)try{"string"==typeof arguments[0]&&(arguments[0]=o+arguments[0]),console.info.apply(console,arguments)}catch(o){}}catch(o){}},this.e=function(){if(e)try{"string"==typeof arguments[0]&&(arguments[0]=o+arguments[0]),console.error.apply(console,arguments)}catch(o){}},this.w=function(){if(e)try{"string"==typeof arguments[0]&&(arguments[0]=o+arguments[0]),console.warn.apply(console,arguments)}catch(o){}},this.v=function(){if(e)try{"string"==typeof arguments[0]&&(arguments[0]=o+arguments[0]),console.log.apply(console,arguments)}catch(o){}},this.t=function(){if(e)try{console.table.apply(console,arguments)}catch(o){}},this.tip=function(){try{"string"==typeof arguments[0]&&(arguments[0]=o+arguments[0]),console.log.apply(console,arguments)}catch(o){}},this.tip_w=function(t){try{console.log("%c [UMENG] -- "+t,"background:red; padding: 4px; padding-right: 8px; border-radius: 4px; color: #fff;")}catch(t){}},this.err=function(){try{"string"==typeof arguments[0]&&(arguments[0]=o+arguments[0]),console.error.apply(console,arguments)}catch(o){}},this.repeat=function(t){for(var e=t;e.length<86;)e+=t;return e}}return function(){return null===t&&(t=new i),t}}(),n=function(){var t=null;function e(){var t={};this.useOpenid=function(){return!!t.useOpenid},this.useSwanid=function(){return!!t.useSwanid},this.autoGetOpenid=function(){return!!t.autoGetOpenid},this.appKey=function(){return t.appKey},this.uploadUserInfo=function(){return t.uploadUserInfo},this.enableVerify=function(){return t.enableVerify},this.set=function(e){t=e},this.get=function(){return t},this.setItem=function(e,o){t[e]=o},this.getItem=function(e){return t[e]}}return function(){return t||(t=new e),t}}();function r(){}r.prototype={on:function(t,e,o){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:o}),this},once:function(t,e,o){var i=this;function n(){i.off(t,n),e.apply(o,arguments)}return n._=e,this.on(t,n,o)},emit:function(t){for(var e=[].slice.call(arguments,1),o=((this.e||(this.e={}))[t]||[]).slice(),i=0,n=o.length;i<n;i++)o[i].fn.apply(o[i].ctx,e);return this},off:function(t,e){var o=this.e||(this.e={}),i=o[t],n=[];if(i&&e)for(var r=0,a=i.length;r<a;r++)i[r].fn!==e&&i[r].fn._!==e&&n.push(i[r]);return n.length?o[t]=n:delete o[t],this}};var a=new r;a.messageType={CONFIG_LOADED:0,UMA_LIB_INITED:1};var s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)};function c(t,e){function o(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}var l,h=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.getSdkType=function(){return"ttgamemp"},e}(function(){function t(){}return t.prototype.setStorage=function(t,e,o){tt.setStorage({key:t,data:e,success:function(){"function"==typeof o&&o(!0)},fail:function(e){i().w(t+": "+e.errMsg),"function"==typeof o&&o(!1)}})},t.prototype.getStorage=function(t,e){tt.getStorage({key:t,success:function(t){"function"==typeof e&&e(t.data)},fail:function(o){i().w(t+": "+o.errMsg),"function"==typeof e&&e()}})},t.prototype.removeStorage=function(t,e){tt.removeStorage({key:t,success:function(){"function"==typeof e&&e(!0)},fail:function(){"function"==typeof e&&e(!1)}})},t.prototype.getSystemInfo=function(t){tt.getSystemInfo({success:function(e){e.safeArea=e.safeArea||{};var o={model:e.model,brand:e.brand,pixelRatio:e.pixelRatio,screenWidth:e.screenWidth,screenHeight:e.screenHeight,fontSizeSetting:e.fontSizeSetting,platform:e.platform,platformVersion:e.version,platformSDKVersion:e.SDKVersion,language:e.language,deviceName:e.model,safeArea:{width:e.safeArea.width,height:e.safeArea.height,top:e.safeArea.top,left:e.safeArea.left,bottom:e.safeArea.bottom,right:e.safeArea.right},statusBarHeight:e.statusBarHeight,host:e.appName},i=e.system.split(" ");Array.isArray(i)&&(o.OS=i[0],o.OSVersion=i[1]);var n=Math.round(e.screenWidth*e.pixelRatio),r=Math.round(e.screenHeight*e.pixelRatio);o.resolution=n>r?n+"*"+r:r+"*"+n,"function"==typeof t&&t(o)},fail:function(){"function"==typeof t&&t()}})},t.prototype.getDeviceInfo=function(t){"function"==typeof t&&t()},t.prototype.checkNetworkAvailable=function(t){tt.getNetworkType({success:function(e){"function"==typeof t&&t(e&&"none"!==e.networkType)},fail:function(){"function"==typeof t&&t()}})},t.prototype.getNetworkInfo=function(t){tt.getNetworkType({success:function(e){"function"==typeof t&&t(e)},fail:function(){"function"==typeof t&&t()}})},t.prototype.onNetworkStatusChange=function(t){tt.onNetworkStatusChange(function(e){"function"==typeof t&&t("none"!==e.networkType)})},t.prototype.request=function(t){var e=(t=t||{}).success,o=t.fail,i=!1,n=null;t.success=function(t){i||(n&&clearTimeout(n),"function"==typeof e&&e(t))},t.fail=function(){i||(n&&clearTimeout(n),"function"==typeof o&&o())},window.tt&&tt.request(t),n=setTimeout(function(){n&&clearTimeout(n),i=!0,"function"==typeof o&&o(i)},t.timeout||5e3)},t.prototype.getDeviceId=function(t){t("")},t.prototype.getAdvertisingId=function(t){"function"==typeof t&&t("")},t.prototype.getSdkType=function(){return"ttmp"},t.prototype.getPlatform=function(){return"tt"},t.prototype.getUserInfo=function(t){var e={fail:function(){t&&t()},success:function(e){try{var o=e.userInfo;o&&t&&t({avatar:o.avatarUrl,nickName:o.nickName,gender:o.gender,country:o.country,province:o.province,city:o.city,language:o.language})}catch(e){t&&t()}}};try{tt.getSetting({success:function(t){t.authSetting["scope.userInfo"]&&tt.getUserInfo(e)},fail:function(){t&&t()}})}catch(t){i.e("getUserInfo error",t)}},t.prototype.getAppInfoSync=function(){return{}},t.prototype.onShareAppMessage=function(t){tt.onShareAppMessage(t)},t.prototype.shareAppMessage=function(t){tt.shareAppMessage(t)},t.prototype.getLaunchOptionsSync=function(){var t=null;if(t)return t;if(!tt.getLaunchOptionsSync)return{};try{t=tt.getLaunchOptionsSync()}catch(i){t=null}return t||{}},t}())),d={SESSION_INTERVAL:3e4,LOG_URL:"/bytedancem_logs",GET_OPENID_URL:"/uminiprogram_logs/bytedance/getuut",USERINFO_URL:"/uminiprogram_logs/comm/uif",ENDPOINT:"https://umini.shujupie.com",ENDPOINTB:"https://ulogs.umeng.com",DEVICE_INFO_KEY:"device_info",ADVERTISING_ID:"mobile_ad_id",ANDROID_ID:"android_id",CURRENT_SESSION:"current_session",SESSION_PAUSE_TIME:"session_pause_time",EVENT_SEND_DEFAULT_INTERVAL:15e3,EVENT_LAST_SEND_TIME:"last_send_time",MAX_EVENTID_LENGTH:128,MAX_PROPERTY_KEY_LENGTH:256,MAX_PROPERTY_KEYS_COUNT:100,REPORT_POLICY:"report_policy",REPORT_INTERVAL_TIME:"report_interval_time",REPORT_POLICY_START_SEND:"1",REPORT_POLICY_INTERVAL:"6",IMPRINT:"imprint",SEED_VERSION:"1.0.0",IMPL_VERSION:"2.7.1",ALIPAY_AVAILABLE_VERSION:"10.1.52",SHARE_PATH:"um_share_path",SHARES:"shares",REQUESTS:"requests",UUID:"um_uuid",UUID_SUFFIX:"ud",OPENID:"um_od",UNIONID:"um_unid",ALIPAYID:"um_alipayid",USERID:"um_userid",PROVIDER:"um_provider",SWANID:"um_swanid",ANONYMOUSID:"um_anonymousid",LAUNCH_OPTIONS:"LAUNCH_OPTIONS",UM_SSRC:"_um_ssrc",USER_INFO:"user_info",IS_ALIYUN:!1},u={isNumber:function(t){return!Number.isNaN(parseInt(t,10))},compareVersion:function(t,e){for(var o=String(t).split("."),i=String(e).split("."),n=0;n<Math.max(o.length,i.length);n++){var r=parseInt(o[n]||0,10),a=parseInt(i[n]||0,10);if(r>a)return 1;if(r<a)return-1}return 0},getRandomStr:function(t){for(var e="",o=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],i=0;i<Number(t);i++)e+=o[Math.round(Math.random()*(o.length-1))];return e},clone:function(t){return JSON.parse(JSON.stringify(t))},startsWith:function(t,e){return!(!t||!e||0===e.length||e.length>t.length)&&t.substr(0,e.length)===e},endsWith:function(t,e){return!(!e||0===t.length||e.length>t.length)&&t.substring(t.length-e.length)===e},assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),o=1;o<arguments.length;o++){var i=arguments[o];if(i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},deepEqual:function t(e,o){if(e===o)return!0;if(e&&"object"==typeof e&&o&&"object"==typeof o){if(Object.keys(e).length!==Object.keys(o).length)return!1;for(var i in e){if(Object.prototype.hasOwnProperty.call(o,i))return!1;if(!t(e[i],o[i]))return!1}return!0}return!1},trimStart:function(t,e){if(!t)return"";if("string"==typeof e&&e.length){var o=new RegExp("^"+e+"*");t=t.replace(o,"")}else t=t.replace(/^s*/,"");return t},trimEnd:function(t,e){if(!t)return"";var o,i;if("string"==typeof e&&e.length){for(o=new RegExp(e),i=t.length;o.test(t.charAt(i));)i-=1;return t.slice(0,i+1)}for(o=/s/,i=t.length-1;o.test(t.charAt(i));)i-=1;return t.slice(0,i+1)},isFunction:function(t){return"function"==typeof t}},p=function(){function t(){this._uuid="",this._userid="",this._provider="",this._idType=""}return t.prototype.createUUID=function(){return u.getRandomStr(10)+Date.now()+u.getRandomStr(7)+d.UUID_SUFFIX},t.prototype.initUUID=function(t){var e=this;h.getStorage(d.UUID,function(o){o?e._uuid=o:(e._uuid=e.createUUID(),h.setStorage(d.UUID,e._uuid)),t&&t(o)})},t.prototype.initUserid=function(){var t=this;h.getStorage(d.USERID,function(e){!t._userid&&e&&(t._userid=e,i().v("userId is ",e))}),h.getStorage(d.PROVIDER,function(e){!t._provider&&e&&(t._provider=e,i().v("provider is ",e))})},t.prototype.init=function(t){var e=this;e.initUUID(function(){e.initUserid(),e.initID(t)})},t.prototype.setUserid=function(t,e){!this._userid&&t&&(this._userid=t,this._provider=e,h.setStorage(d.USERID,t),h.setStorage(d.PROVIDER,e))},t.prototype.getUserId=function(){return this._userid},t.prototype.getProvider=function(){return this._provider},t.prototype.getIdType=function(){return this._idType},t.prototype.getIdTracking=function(){var t={};return this._uuid&&(t.uuid=this._uuid),this._userid&&(t.userid=this._userid),t},t}();!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._openid="",e._unionid="",e._useOpenid=!1,e}c(e,t),e.prototype.initID=function(t){var e=this;e._useOpenid?e._idType="openid":e._idType="uuid",i().v("id type: ",e._idType),h.getStorage(d.UNIONID,function(t){e._unionid=t}),this._useOpenid?h.getStorage(d.OPENID,function(o){e._openid=o,t&&t()}):t&&t()},e.prototype.setUseOpenid=function(t){this._useOpenid=t},e.prototype.setOpenid=function(t){!this._openid&&t&&(this._openid=t,h.setStorage(d.OPENID,t))},e.prototype.setUnionid=function(t){!this._unionid&&t&&(this._unionid=t,h.setStorage(d.UNIONID,t))},e.prototype.getIdTracking=function(){var e=t.prototype.getIdTracking.call(this);return this._openid&&(e.openid=this._openid),this._unionid&&(e.unionid=this._unionid),this._userid&&(e.userid=this._userid),e},e.prototype.getId=function(){return this._useOpenid?this._openid:this._uuid}}(p);var f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._unionid="",e._openid="",e._anonymousid="",e._useOpenid=!1,e}return c(e,t),e.prototype.getOpenIdAsync=function(t,e){var o=this;tt.login({force:!1,success:function(n){n?h.request({url:d.ENDPOINT+d.GET_OPENID_URL,method:"GET",data:{key:t,code:n.code||"",anonymous_code:n.anonymousCode||""},success:function(t){if(i().v("tt request ss ",t,d.ENDPOINT+d.GET_OPENID_URL),t&&200===t.statusCode&&t.data&&t.data.data){var n=t.data.data;return o.setOpenid(n.oid),o.setAnonymousid(n.nid),e&&e(!0)}e&&e()},fail:function(t){i().v("tt request failed...",t),e&&e()}}):e&&e()},fail:function(t){i().v("tt login failed...",t),e&&e()}})},e.prototype.initID=function(t){var e=this;e._idType="anonymousid",i().v("id type: ",e._idType),h.getStorage(d.OPENID,function(t){e._openid=t}),h.getStorage(d.ANONYMOUSID,function(o){e._anonymousid=o,t&&t()})},e.prototype.setUseOpenid=function(t){this._useOpenid=t},e.prototype.setOpenid=function(t){!this._openid&&t&&(this._openid=t,h.setStorage(d.OPENID,t))},e.prototype.setAnonymousid=function(t){!this._anonymousid&&t&&(this._anonymousid=t,h.setStorage(d.ANONYMOUSID,t))},e.prototype.getIdTracking=function(){var e=t.prototype.getIdTracking.call(this);return this._openid&&(e.openid=this._openid),this._userid&&(e.userid=this._userid),this._anonymousid&&(e.anonymousid=this._anonymousid),e},e.prototype.getId=function(){if(this._anonymousid)return this._idType="anonymousid",this._anonymousid},e}(p),g=(l=null,function(){return l||(l=new f),l}),m=function(){var t=null;function e(){var t=!1,e=null,o=[];this.addPageStart=function(o){o&&!t&&(e={ts:Date.now(),path:o,page_name:o},t=!0)},this.addPageEnd=function(i){if(t&&i&&e&&i===e.page_name){var n=Date.now()-e.ts;e.duration=Math.abs(n),o.push(e),e=null,t=!1}},this.get=function(){return o},this.getCurrentPage=function(){return e},this.clear=function(){o.length=0}}return function(){return t||(t=new e),t}}(),v={},y=function(){var t=null,e=[],o="";function n(){return{add:function(t,n){i().v("share origin: %o",t);var r={title:t&&t.title,path:t&&t.path&&t.path.split("?")[0],_um_sts:Date.now()};r.path&&r.path.length>1&&u.startsWith(r.path,"/")&&(r.path=u.trimStart(r.path,"/"));var a=t.path||"",s=g().getId();if(s){var c=o.split(","),l=(c=c.filter(function(t){return t.length>0})).indexOf(s);l>=0&&(c=c.slice(0,l)),c.length<3&&c.push(s);var h=c.join(",");-1!==a.indexOf("?")?a+="&_um_ssrc="+h:a+="?_um_ssrc="+h;var d=Date.now();if(a+="&_um_sts="+d,n){var p,f=function(t){var e=[];for(var o in t)"_um_ssrc"!==o&&"_um_sts"!==o&&e.push(o+"="+t[o]);return e.join("&")}(v);p=f?f+"&_um_ssrc="+h+"&_um_sts="+d:"_um_ssrc="+h+"&_um_sts="+d,t.query?t.query=t.query+"&_um_ssrc="+h+"&_um_sts="+d:t.query=p}else t.path=a;r._um_ssrc=h,r._um_sts=d}return e.push(r),i().v("share: %o",t),t},setShareSource:function(t){o=t},clear:function(){e.length=0},get:function(){return e}}}return function(){return t||(t=new n),t}}(),_=function(t){if(t)try{return JSON.stringify(t)}catch(t){}return""},C=function(t){if(t)try{return JSON.parse(t)}catch(t){}return null},b=function(){var t=null,e="",o=null,i=!1;function r(){this.load=function(t){o?(h.removeStorage(e),t()):(e="um_cache_"+n().appKey(),h.getStorage(e,function(n){o=C(n)||{},i=!0,h.removeStorage(e),t()}))},this.save=function(){o&&h.setStorage(e,_(o))},this.set=function(t,e){o&&(o[t]=e)},this.get=function(t){return(o||{})[t]},this.remove=function(t){o&&o[t]&&delete o[t]},this.getAll=function(){return o},this.clear=function(){o=null},this.has=function(t){return!!this.get(t)},this.isLoaded=function(){return i}}return function(){return t||(t=new r),t}}(),S=function(){var t,e,o=[],n=[];function r(){if(o.length){var t=b().get("ekvs");(function(t){var e=0;for(var o in t)Array.isArray(t[o])&&(e+=t[o].length);return e})(t)+o.length<=1e4&&(t=a(t,o),b().set("ekvs",t))}}function a(t,o){var i=(t=t||{})[e];return Array.isArray(i)&&i.length?t[e]=i.concat(o):t[e]=[].concat(o),t}return function(){return t||(t={addEvent:function(t){e?(o.unshift(t),o.length>1&&(r(),o.length=0)):(i().w("session id is null: ",e),n.unshift(t))},setSessionId:function(t){if(e=t,i().v("setSessionId: ",e),Array.isArray(n)&&n.length&&e){for(var o=0;o<n.length;o++)this.addEvent(n[o]);n.length=0}},getEkvs:function(){var t=b().get("ekvs");return o&&o.length&&(t=a(t,o)),t},clear:function(){b().remove("ekvs"),o.length=0}}),t}}(),w="2g",A="3g",k="4g",P="half_session",T="close_session",B="ekv",M=["access","access_subtype"],I=function(){var t=null;function e(){var t=!1,e={};function o(t){var o=b().get(d.IMPRINT);o&&(e.imprint=o),e.device_type="Phone",e.sdk_version=d.IMPL_VERSION,e.appkey=n().appKey(),h.getDeviceInfo(function(t){e.device_info=t||""});var i=h.getAppInfoSync();e.appid=i.appId,e.app_env=i.appEnv,e.app_version=i.appVersion,h.getSystemInfo(function(o){h.getNetworkInfo(function(i){var n=function(t,e){var o={};(t=t||{}).safeArea=t.safeArea||{};var i=(e=e||{}).networkType;"none"===i&&(i="unknown");var n=t.model||"",r=t.platform||"",a=t.brand||"",s=a.toLowerCase();switch(o.sdk_type=h.getSdkType(),o.platform=h.getPlatform(),o.platform_sdk_version=t.platformSDKVersion,o.platform_version=t.platformVersion,o.resolution=t.resolution,o.pixel_ratio=t.pixelRatio,o.os=r,o.font_size_setting=t.fontSizeSetting,o.device_model=n,o.device_brand=a,o.device_manufacturer=s,o.device_manuid=n,o.device_name=n,o.os_version=t.OSVersion,o.language=t.language,o.theme=t.theme,o.benchmark_level=t.benchmarkLevel,o.status_bar_height=t.statusBarHeight,o.safe_area_top=t.safeArea.top,o.safe_area_left=t.safeArea.left,o.safe_area_right=t.safeArea.right,o.safe_area_bottom=t.safeArea.bottom,o.safe_area_height=t.safeArea.height,o.safe_area_width=t.safeArea.width,o.storage=t.storage,o.screen_width=t.screenWidth,o.screen_height=t.screenHeight,o.host=t.host,i=i?i.toLowerCase():""){case k:o.access_subtype="LTE",o.access="4G";break;case A:o.access_subtype="CDMA",o.access="3G";break;case w:o.access_subtype="GRPS",o.access="2G";break;default:o.access=i,delete o.access_subtype}return o}(o,i);u.assign(e,n),t&&t()})})}return{init:function(){o(function(){t=!0})},isLoaded:function(){return t},get:function(){return e},getRealtimeFields:function(){var t={};return M.forEach(function(o){t[o]=e[o]}),t},setIdTracking:function(t){this.setItem("id_tracking",t)},setIdType:function(t){this.setItem("id_type",t)},setAppVersion:function(t){this.setItem("app_version",t)},setSuperProperty:function(t){e.sp||(e.sp={}),e.sp.isv=t},getSuperProperty:function(){return e&&e.sp?e.sp.isv:""},setItem:function(t,o){e[t]=o},getItem:function(t){return e[t]}}}return{instance:function(){return t||(t=e()),t}}}(),R=function(){var t=null,e=null,o=null;return function(){return t||(t={resume:function(t){var n=!1;o||(o=b().get(d.CURRENT_SESSION));var r=new Date;return e=r.getTime(),!o||!o.end_time||e-o.end_time>d.SESSION_INTERVAL?(n=!0,function(t){try{var e=(o||{}).options||{},n=u.assign({},function(t){var e={};for(var o in t)0===o.indexOf("_um_")&&(e[o]=t[o]);return i().v("query: ",t),i().v("_um_params: ",e),e}(t.query));n.path=t.path||e.path,t.scene?n.scene=h.getPlatform()+"_"+t.scene:n.scene=e.scene;var r=t.referrerInfo;r&&(n.referrerAppId=r.appId),i().v("session options: ",n);var a=n[d.UM_SSRC];a&&y().setShareSource(a);var s=Date.now();o={id:u.getRandomStr(10)+s,start_time:s,options:n}}catch(t){i().e("\u751f\u6210\u65b0session\u5931\u8d25: ",t)}}(t),i().v("\u5f00\u59cb\u65b0\u7684session(%s): ",o.id,o)):i().v("\u5ef6\u7eed\u4e0a\u4e00\u6b21session(%s): %s ",o.id,r.toLocaleTimeString(),o),n},pause:function(){!function(){if(o){var t=new Date;o.end_time=t.getTime(),"number"!=typeof o.duration&&(o.duration=0),o.duration=o.end_time-e,b().set(d.CURRENT_SESSION,o),i().v("\u9000\u51fa\u4f1a\u8bdd(%s): %s ",o.id,t.toLocaleTimeString(),o)}}()},getCurrentSessionId:function(){return(o||{}).id},getCurrentSession:function(){return o},cloneCurrentSession:function(){return u.clone(o)}}),t}}();function L(t){var e=null;switch(t){case P:e=function(){var t=null,e=R().cloneCurrentSession();return e&&(t={header:{st:"1"},analytics:{sessions:[e]}}),t}();break;case T:e=function(){var t=null,e={},o=R().cloneCurrentSession();if(o){var i=m().get(),n=y().get();Array.isArray(i)&&i.length&&(o.pages=u.clone(i)),Array.isArray(n)&&n.length&&(o.shares=u.clone(n)),m().clear(),y().clear(),e.sessions=[o]}var r=S().getEkvs();return r&&(e.ekvs=u.clone(r),S().clear()),(e.sessions||e.ekvs)&&(t={analytics:e}),t}();break;case B:e=function(){var t=null,e=S().getEkvs();return e&&(t={analytics:{ekvs:u.clone(e)}},S().clear()),t}()}return e}var D={sessions:"sn",ekvs:"e",active_user:"active_user"},N={sdk_type:"sdt",access:"ac",access_subtype:"acs",device_model:"dm",language:"lang",device_type:"dt",device_manufacturer:"dmf",device_name:"dn",platform_version:"pv",id_type:"it",font_size_setting:"fss",os_version:"ov",device_manuid:"did",platform_sdk_version:"psv",device_brand:"db",appkey:"ak",_id:"id",id_tracking:"itr",imprint:"imp",sdk_version:"sv",resolution:"rl",testToken:"ttn",theme:"t5",benchmark_level:"bml",screen_width:"sw",screen_height:"sh",status_bar_height:"sbh",safe_area_top:"sat",safe_area_left:"sal",safe_area_right:"sar",safe_area_bottom:"sab",safe_area_height:"sah",safe_area_width:"saw",pixel_ratio:"pr",storage:"s7",host:"hs"},E={uuid:"ud",unionid:"und",openid:"od",anonymousid:"nd",alipay_id:"ad",device_id:"dd",userid:"puid"};function x(t,e){var o=U(t,e);return t&&t.id_tracking&&(o[e.id_tracking||"id_tracking"]=U(t.id_tracking,E)),o}function U(t,e){var o={};for(var i in t)e[i]?o[e[i]]=t[i]:o[i]=t[i];return o}function O(t,e){var o={};if(t)for(var i in t)t[i]&&(o[e[i]]=t[i]);return o}var F="";function W(){return F}var V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",H=function(t){for(var e={},o=0,i=t.length;o<i;o++)e[t.charAt(o)]=o;return e}(V),G=String.fromCharCode,j=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?G(192|e>>>6)+G(128|63&e):G(224|e>>>12&15)+G(128|e>>>6&63)+G(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return G(240|e>>>18&7)+G(128|e>>>12&63)+G(128|e>>>6&63)+G(128|63&e)},z=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,q=function(t){var e=[0,2,1][t.length%3],o=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[V.charAt(o>>>18),V.charAt(o>>>12&63),e>=2?"=":V.charAt(o>>>6&63),e>=1?"=":V.charAt(63&o)].join("")},K=function(t){return function(t){return t.replace(z,j)}(t).replace(/[\s\S]{1,3}/g,q)},X=new RegExp(["[\xc0-\xdf][\x80-\xbf]","[\xe0-\xef][\x80-\xbf]{2}","[\xf0-\xf7][\x80-\xbf]{3}"].join("|"),"g"),J=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return G(55296+(e>>>10))+G(56320+(1023&e));case 3:return G((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return G((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},Y=function(t){var e=t.length,o=e%4,i=(e>0?H[t.charAt(0)]<<18:0)|(e>1?H[t.charAt(1)]<<12:0)|(e>2?H[t.charAt(2)]<<6:0)|(e>3?H[t.charAt(3)]:0),n=[G(i>>>16),G(i>>>8&255),G(255&i)];return n.length-=[0,0,2,1][o],n.join("")},Q=function(t){return function(t){return t.replace(/[\s\S]{1,4}/g,Y)}(t).replace(X,J)},Z=function(t,e){return e?K(String(t)).replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,""):K(String(t))},$=function(t){return Q(String(t).replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},et=new function(){var t="",e=this;this.set=function(e){t=e},this.get=function(){return t},this.getImpObj=function(){return C($(t))},this.getItem=function(t){var o=e.getImpObj();return o&&o[t]||""},this.load=function(){t=b().get(d.IMPRINT)},this.save=function(){t&&b().set(d.IMPRINT,t)}};function ot(t,e,o,n){I.instance().setIdType(g().getIdType()),I.instance().setIdTracking(g().getIdTracking());var r=g().getUserId();r&&t.analytics&&(t.analytics.active_user={puid:r,provider:g().getProvider()});var a,s=u.clone(I.instance().get());t.header=u.assign(s,t.header,{ts:Date.now(),testToken:W(),traceId:u.getRandomStr(10)+Date.now()+u.getRandomStr(9)});var c=function(t){return{h:x(t.header,N),a:O(t.analytics,D)}}(t),l=_(c),p={url:d.ENDPOINT+d.LOG_URL,method:"POST",data:Z(l),success:function(n){var r=n.code||n.status||n.statusCode;200===r||413===r?(i().i("\u6570\u636e\u53d1\u9001\u6210\u529f: ",t,l),function(t){t&&(I.instance().setItem(d.IMPRINT,t),et.set(t),et.save(),i().v("imprint: ",et.getImpObj()),et.getItem("ttn_invalid")&&(F=""))}((n.data||{}).imprint),"function"==typeof e&&e(n)):(i().w("\u6570\u636e\u53d1\u9001\u5931\u8d25: ",l),"function"==typeof o&&o())},fail:function(){i().w("\u8d85\u65f6: ",l),"function"==typeof o&&o()},complete:function(){"function"==typeof n&&n()}};h.request(u.assign(p,{header:{"Content-Type":a=h.getSdkType()+"/json","Msg-Type":a}}))}function it(t){var e=t,o=[];this.enqueue=function(t){"number"==typeof e&&this.size()>=e&&this.dequeue(),o.push(t)},this.dequeue=function(){return o.shift()},this.front=function(){return o[0]},this.isEmpty=function(){return 0===o.length},this.clear=function(){o.length=0},this.size=function(){return o.length},this.items=function(){return o},this.print=function(){console.log(o.toString())}}var nt=function(){var t=null,e=!1,o=[],n=new it(50);function r(t,e,o){if(I.instance().isLoaded()){e=e||{};var i=L(t);if(i){var a=I.instance().getRealtimeFields();i.header=u.assign({},i.header,a),i.noCache=e.noCache,n.enqueue(i)}"function"==typeof o&&o()}else setTimeout(function(){r(t,e,o)},100)}function a(t){var e=n.front();e?ot(e,function(){n.dequeue(),a(t)},function(){var e=n.dequeue();e&&!e.noCache&&o.push(e),a(t)}):(o.forEach(function(t){n.enqueue(t)}),o.length=0,t())}function s(t){g().getId()?e?i().i("\u961f\u5217\u6b63\u5728\u53d1\u9001\u4e2d"):(e=!0,a(function(){e=!1,"function"==typeof t&&t()})):(i().i("\u83b7\u53d6id\u6807\u8bc6\u5931\u8d25\uff0c\u6682\u7f13\u53d1\u9001"),"function"==typeof t&&t())}function c(){this.send=function(t,e,o){t?this.add(t,e,function(){s(o)}):s(o)},this.add=function(t,e,o){r(t,e,o)},this.load=function(){var t=b().get(d.REQUESTS);t&&t.length&&t.forEach(function(t){n.enqueue(t)}),b().remove(d.REQUESTS)},this.save=function(){b().set(d.REQUESTS,u.clone(n.items())),n.clear()}}return function(){return t||(t=new c),t}}(),rt=function(){var t=null,e=null;function o(){function t(t){if(t&&"object"==typeof t){var e=b().get(d.USER_INFO);return e&&u.deepEqual(t,e)||function(t,e){var o=n().appKey(),r=h.getSdkType(),a=g().getId(),s=g().getIdType();if(o&&r&&a&&s){var c={ak:n().appKey(),sdt:h.getSdkType(),uin:t.nickName,uia:t.avatar||t.avatarUrl,uig:t.gender,uit:t.country,uip:t.province,uic:t.city,uil:t.language,id:g().getId(),it:g().getIdType(),age:t.age,cln:t.constellation},l=JSON.stringify(c);l=Z(l),h.request({url:d.ENDPOINT+d.USERINFO_URL,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:"ui="+l,success:function(o){i().v("\u7528\u6237\u4fe1\u606f\u4e0a\u4f20\u6210\u529f: ",t),e&&e(o&&o.data&&200===o.data.code)},fail:function(){i().e("\u7528\u6237\u4fe1\u606f\u4e0a\u4f20\u5931\u8d25: ",t),e&&e(!1)}})}}(t,function(e){e&&b().set(d.USER_INFO,t)}),!0}return!1}this.setUserInfo=function(t){e=t},this.update=function(){t(e)||h.getUserInfo(function(e){t(e)})}}return function(){return t||(t=new o),t}}();function at(t,e){this.id=t,this.ts=Date.now();var o=typeof e;if("string"===o&&e)this[t]=e;else if("object"===o)for(var i in e)({}).hasOwnProperty.call(e,i)&&(this[i]=e[i])}function st(){var t=!1,e=!1,o=0;this.init=function(e){i().v("sdk version: "+d.IMPL_VERSION),t?i().v("Lib\u91cd\u590d\u5b9e\u4f8b\u5316"):b().load(function(){i().v("cache\u521d\u59cb\u5316\u6210\u529f: ",b().getAll()),g().setUseOpenid&&g().setUseOpenid(n().useOpenid()),g().init(function(){I.instance().init(),i().v("Header\u521d\u59cb\u5316\u6210\u529f")}),t=!0,"function"==typeof e&&e(),i().tip("SDK\u96c6\u6210\u6210\u529f")})},this.resume=function(o){var r;t&&!e&&(i().v("showOptions: ",o),e=!0,n().enableVerify()&&o&&o.query&&(r=o.query._ttn,F=r||F),this._resume(o))},this._resume=function(t){nt().load();var e=R().resume(t),o=R().getCurrentSessionId();function r(t,e){g().getId()||t<=0||g().getOpenIdAsync(n().appKey(),function(o){o?(i().v("\u83b7\u53d6id\u6210\u529f"),nt().send()):(i().v("\u83b7\u53d6openid\u5931\u8d25,\u542f\u52a8\u91cd\u8bd5,\u5269\u4f59\u53ef\u7528\u6b21\u6570",t-1),setTimeout(function(){r(t-1,e)},e))})}S().setSessionId(o),e&&nt().add(P,{},function(){g().setUseOpenid&&g().setUseOpenid(n().useOpenid()),n().useOpenid()&&n().autoGetOpenid()&&!g().getId()?(i().v("get id async"),r(10,3e3)):(i().v("session auto send"),nt().send())})},this.pause=function(r){t&&(e=!1,o=0,R().pause(),n().uploadUserInfo()&&rt().update(),nt().send(T,{},function(){nt().save(),b().save(),i().v("cache save success"),"function"==typeof r&&r()}))},this.setOpenid=function(t){i().v("setOpenId: %s",t),g().setOpenid(t),nt().send()},this.setUnionid=function(t){i().v("setUnionid: %s",t),g().setUnionid(t)},this.setUserid=function(t,e){i().v("setUserid: %s",t,e),g().setUserid(t,e)},this.setUserInfo=function(t){i().v("setUserInfo: %s",t),rt().setUserInfo(t)},this.setAnonymousid=function(t){i().v("setAnonymousId: %s",t),g().setAnonymousid(t),nt().send()},this.setAppVersion=function(t){t&&"string"!=typeof t?i().w("setAppVersion\u65b9\u6cd5\u53ea\u63a5\u53d7\u5b57\u7b26\u4e32\u7c7b\u578b\u53c2\u6570"):I.instance().setAppVersion(t)},this.setAlipayUserid=function(t){t&&"string"!=typeof t?i().w("setAlipayUserid\u65b9\u6cd5\u53ea\u63a5\u53d7\u5b57\u7b26\u4e32\u7c7b\u578b\u53c2\u6570"):(i().v("setAlipayUserid: %s",t),g().setAlipayUserid(t))},this.setDeviceId=function(t){if("string"==typeof t)return g().setDeviceId(t),t},this.setSuperProperty=function(t){if(t&&"string"!=typeof t)i().w("\u8d85\u7ea7\u5c5e\u6027\u53ea\u652f\u6301\u5b57\u7b26\u4e32\u7c7b\u578b");else{var e=this;I.instance().getSuperProperty()!==t&&(I.instance().setSuperProperty(t),e.pause(function(){e.resume()}))}},this.trackEvent=function(e,n){if(t&&(i().v("event: ",e,n),function(t,e){if(!t||"string"!=typeof t)return i().e('please check trackEvent id. id should be "string" and not null'),!1;var o=["id","ts","du"],n={};if(o.forEach(function(t){n[t]=1}),n[t])return i().e("eventId\u4e0d\u80fd\u4e0e\u4ee5\u4e0b\u4fdd\u7559\u5b57\u51b2\u7a81: "+o.join(",")),!1;if(t.length>d.MAX_EVENTID_LENGTH)return i().e("The maximum length of event id shall not exceed "+d.MAX_EVENTID_LENGTH),!1;if(e&&("object"!=typeof e||Array.isArray(e))&&"string"!=typeof e)return i().e("please check trackEvent properties. properties should be string or object(not include Array)"),!1;if("object"==typeof e){var r=0;for(var a in e)if({}.hasOwnProperty.call(e,a)){if(a.length>d.MAX_PROPERTY_KEY_LENGTH)return i().e("The maximum length of property key shall not exceed "+d.MAX_PROPERTY_KEY_LENGTH),!1;if(r>=d.MAX_PROPERTY_KEYS_COUNT)return i().e("The maximum count of properties shall not exceed "+d.MAX_PROPERTY_KEYS_COUNT),!1;if(n[a])return i().e("\u5c5e\u6027\u4e2d\u7684key\u4e0d\u80fd\u4e0e\u4ee5\u4e0b\u4fdd\u7559\u5b57\u51b2\u7a81: "+o.join(",")),!1;r+=1}}return!0}(e,n))){var r=new at(e,n);S().addEvent(r);var a,s=!!W();a=s?0:d.EVENT_SEND_DEFAULT_INTERVAL;var c=Date.now();("number"!=typeof o||"number"!=typeof a||o<=0||c-o>a)&&(o=c,nt().send(B,{noCache:s},function(){}))}},this.trackShare=function(e){if(t)try{h.getSdkType().indexOf("game")>-1?(e=y().add(e,!0),i().v("shareQuery: ",e)):(e=y().add(e,!1),i().v("sharePath: ",e.path))}catch(t){i().v("shareAppMessage: ",t)}return e},this.trackPageStart=function(e){t&&m().addPageStart(e)},this.trackPageEnd=function(e){t&&m().addPageEnd(e)},this.onShareAppMessage=function(t){var e=this;h.onShareAppMessage(function(){return e.trackShare(t())})},this.shareAppMessage=function(t){this.trackShare(t),h.shareAppMessage(t)}}var ct=[];function lt(){}lt.prototype={createMethod:function(t,e,o){try{o&&o[e]?t[e]=function(){return o[e].apply(o,arguments)}:t[e]=function(){ct.push([e,[].slice.call(arguments)])}}catch(t){i().v("create method errror: ",t)}},installApi:function(t,e){try{var o,n,r="resume,pause,trackEvent,trackPageStart,trackPageEnd,trackShare,setUserid,setOpenid,setAnonymousid,onShareAppMessage,shareAppMessage".split(",");for(o=0,n=r.length;o<n;o++)this.createMethod(t,r[o],e);if(e)for(o=0,n=ct.length;o<n;o++){var a=ct[o];try{e[a[0]].apply(e,a[1])}catch(t){i().v("impl[v[0]].apply error: ",a[0],t)}}}catch(t){i().v("install api errror: ",t)}}};var ht=[d.ENDPOINT,d.ENDPOINTB];function dt(t,e){var o,n;if(0===t||1===t&&e?o=d.ENDPOINT:2===t&&e?o=d.ENDPOINTB:e&&(o=ht[t]),t>=ht.length||e)return e&&(n=o,d.ENDPOINT=n),e&&i().v("\u547d\u4e2d\u53ef\u7528\u670d\u52a1",o),e||i().tip_w("\u672a\u547d\u4e2d\u53ef\u7528\u670d\u52a1"),!1;h.request({url:d.ENDPOINT+"/uminiprogram_logs/ckdh",success:function(e){200===(e.code||e.status||e.statusCode)&&e.data&&200===e.data.code?dt(t+1,!0):dt(t+1,!1)},fail:function(){dt(t+1,!1)}})}d.ENDPOINTB&&setTimeout(function(){dt(0,!1)},3e3);var ut=new lt,pt={_inited:!1,_log:i(),preinit:function(t){if(t&&"object"==typeof t)for(var e in t)d[e]=t[e];return d},use:function(t,e){return t&&u.isFunction(t.install)?t.install(pt,e):u.isFunction(t)&&t(pt,e),pt},messager:a,init:function(t){if(this._inited)i().v("\u5df2\u7ecf\u5b9e\u4f8b\u8fc7\uff0c\u8bf7\u907f\u514d\u91cd\u590d\u521d\u59cb\u5316");else if(t)if(t.appKey){"boolean"!=typeof t.useOpenid&&(t.useOpenid=!0),n().set(t),i().setDebug(t.debug),this._inited=!0;var e=this;a.emit(a.messageType.CONFIG_LOADED,t);try{var o=new st;i().v("\u6210\u529f\u521b\u5efaLib\u5bf9\u8c61"),o.init(function(){i().v("Lib\u5bf9\u8c61\u521d\u59cb\u5316\u6210\u529f"),ut.installApi(e,o),i().v("\u5b89\u88c5Lib\u63a5\u53e3\u6210\u529f"),a.emit(a.messageType.UMA_LIB_INITED,t)})}catch(t){i().w("\u521b\u5efaLib\u5bf9\u8c61\u5f02\u5e38: "+t)}}else i().err("\u8bf7\u786e\u4fdd\u4f20\u5165\u6b63\u786e\u7684appkey");else i().err("\u8bf7\u6b63\u786e\u8bbe\u7f6e\u76f8\u5173\u4fe1\u606f\uff01")}};try{ut.installApi(pt,null)}catch(o){i().w("uma\u8d4b\u503c\u5f02\u5e38: ",o)}var ft="2.7.1",gt="none",mt={},vt=Array.isArray;mt.isArray=vt||function(t){return"[object Array]"===toString.call(t)},mt.isObject=function(t){return t===Object(t)&&!mt.isArray(t)},mt.isEmptyObject=function(t){if(mt.isObject(t)){for(var e in t)if(hasOwnProperty.call(t,e))return!1;return!0}return!1},mt.isUndefined=function(t){return void 0===t},mt.isString=function(t){return"[object String]"===toString.call(t)},mt.isDate=function(t){return"[object Date]"===toString.call(t)},mt.isNumber=function(t){return"[object Number]"===toString.call(t)},mt.each=function(t,e,o){if(null!=t){var i={},n=Array.prototype.forEach;if(n&&t.forEach===n)t.forEach(e,o);else if(t.length===+t.length){for(var r=0,a=t.length;r<a;r++)if(r in t&&e.call(o,t[r],r,t)===i)return}else for(var s in t)if(hasOwnProperty.call(t,s)&&e.call(o,t[s],s,t)===i)return}},mt.buildQuery=function(t,e){var o,i,n=[];return void 0===e&&(e="&"),mt.each(t,function(t,e){o=encodeURIComponent(t.toString()),i=encodeURIComponent(e),n[n.length]=i+"="+o}),n.join(e)},mt.JSONDecode=function(t){if(t){try{return JSON.parse(t)}catch(t){console.error("JSONDecode error",t)}return null}},mt.JSONEncode=function(t){try{return JSON.stringify(t)}catch(t){console.error("JSONEncode error",t)}};var yt=Object.create(null);function _t(t){i().v("\u5f00\u59cb\u6784\u5efa fetch body"),h.getSystemInfo(function(e){h.getNetworkInfo(function(o){var i=(o=o||{}).networkType;i=i===gt?"unknown":i.toUpperCase(),yt.access=i,function(t,e){var o=t.brand||"";if(yt.deviceType="Phone",yt.sdkVersion=ft,yt.appkey=n().appKey(),yt.sdkType=h.getSdkType(),yt.umid=g().getId(),t){yt.language=t.language||"",yt.os=t.OS,yt.osVersion=t.OSVersion,yt.deviceName=t.deviceName,yt.platformVersion=t.platformVersion,yt.platformSdkVersion=t.platformSDKVersion,yt.deviceBrand=o;var i=t.resolution.split("*");mt.isArray(i)&&(yt.resolutionHeight=Number(i[0]),yt.resolutionWidth=Number(i[1]))}!function(t){t&&(yt.installTime=t.install_datetime&&Date.parse(t.install_datetime),yt.scene=t.install_scene,yt.channel=t.install_channel,yt.campaign=t.install_campaign)}(et.getImpObj()),e&&e(yt)}(e,t)})})}var Ct=Object.create(null),bt=null,St=!1,wt={minFetchIntervalSeconds:43200};function At(t){t&&mt.each(t,function(t){Ct[t.k]=t})}function kt(){var t=this;this.STORAGE_NAME=null,a.once(a.messageType.CONFIG_LOADED,function(e){i().v("\u4e91\u914d\u521d\u59cb\u5316\u5f00\u59cb..."),t.init(e)})}kt.prototype={setDefaultValues:function(t){St&&mt.isObject(t)&&mt.each(t,function(t,e){Ct[e]&&Ct[e].v||(Ct[e]={v:t})})},getValue:function(t){i().v("\u4ece\u914d\u7f6e\u9879\u4e2d\u8bfb\u53d6 value, \u5f53\u524d\u914d\u7f6e\u4e3a: ",Ct),i().v("\u5f85\u8bfb\u53d6\u7684 key : ",t);try{if(!St)return;var e=Ct[t]||{};return i().v("\u8bfb\u53d6\u76f8\u5e94\u914d\u7f6eing..., \u7ed3\u679c\u4e3a: ",e),mt.isNumber(e.e)&&mt.isNumber(e.g)&&(i().v("\u8bfb\u53d6\u5230\u76f8\u5e94\u914d\u7f6e, \u5f00\u59cb\u6570\u636e\u4e0a\u62a5..."),function(t){var e={appkey:n().appKey(),sdkType:h.getSdkType(),expId:t&&t.e,groupId:t&&t.g,clientTs:Date.now(),key:t&&t.k,value:t&&t.v,umid:g().getId()};try{h.request({url:"https://pslog.umeng.com/mini_ablog",method:"POST",data:[e],success:function(t){t&&200===t.statusCode?i().v("\u4e0a\u4f20\u6570\u636e\u6210\u529f",e):i().w("ablog \u8bf7\u6c42\u6210\u529f, \u8fd4\u56de\u7ed3\u679c\u5f02\u5e38 ",t)},fail:function(t){i().w("ablog \u8bf7\u6c42\u6570\u636e\u9519\u8bef ",e,t)}})}catch(t){i().w("urequest \u8c03\u7528\u9519\u8bef",t)}}(e)),e.v}catch(n){i().w("getValue error, key: ",t)}},active:function(t){try{if(!St)return;var e,o;t&&t.params&&(e=t.params),t&&t.callback&&(o=t.callback),i().v("\u6fc0\u6d3b\u914d\u7f6e\u9879: ",e),e?(i().v("\u672c\u5730\u5df2\u7f13\u5b58\u7684\u914d\u7f6e\u9879: ",Ct),At(e),i().v("\u5408\u5e76\u540e\u7684\u914d\u7f6e\u9879: ",Ct),o&&o(Ct),i().v("active \u7ed3\u675f")):(i().v("\u914d\u7f6e\u9879\u4e3a\u7a7a!! \u8bfb\u53d6\u672c\u5730\u914d\u7f6e..."),h.getStorage(this.STORAGE_NAME,function(t){t?(At((t=mt.JSONDecode(t)||{}).params),i().v("\u5f53\u524d\u672c\u5730\u914d\u7f6e\u9879\u4e3a: ",Ct),o&&o(Ct),i().v("active \u7ed3\u675f")):i().v("\u5f53\u524d\u672c\u5730\u914d\u7f6e\u9879\u4e3a\u7a7a, \u9000\u51fa\u6fc0\u6d3b")}))}catch(t){i().w("SDK active \u9519\u8bef",t)}},init:function(t){t.appKey&&(bt=t.appKey,this.STORAGE_NAME="um_remote_config_{{"+bt+"}}"),bt?St?i().w("SDK \u5df2\u7ecf\u521d\u59cb\u5316, \u8bf7\u907f\u514d\u91cd\u590d\u521d\u59cb\u5316"):(St=!0,this.setOptions(t),this.active()):i().err("\u8bf7\u68c0\u67e5\u60a8\u7684\u5c0f\u7a0b\u5e8f appKey, appKey \u4e0d\u80fd\u4e3a\u7a7a")},setOptions:function(t){if(mt.isObject(t)){var e=t.minFetchIntervalSeconds;mt.isNumber(e)&&(wt.minFetchIntervalSeconds=Math.max(e,5))}},fetch:function(t){if(St&&this.STORAGE_NAME){var e,o;t&&t.active&&(e=t.active),t&&t.callback&&(o=t.callback);var n=this;h.getStorage(this.STORAGE_NAME,function(t){i().v("\u5f00\u59cb\u8bfb\u7f13\u5b58 data is ",t),(t=mt.JSONDecode(t)||{}).params&&t.ts&&Date.now()-t.ts<1e3*wt.minFetchIntervalSeconds?(i().v("\u7f13\u5b58\u6570\u636e\u5b58\u5728, \u5e76\u4e14\u672c\u6b21\u89e6\u53d1\u65f6\u95f4\u8ddd\u79bb\u4e0a\u6b21fetch\u89e6\u53d1\u65f6\u95f4\u672a\u8d85\u8fc7 fetch \u65f6\u95f4\u95f4\u9694, \u65e0\u9700 fetch"),o&&o(t.params)):_t(function(t){i().v("\u7f13\u5b58\u6570\u636e\u4e0d\u5b58\u5728, \u6784\u5efa fetch body :",t);try{h.request({url:"https://ucc.umeng.com/v1/mini/fetch",method:"POST",data:t,success:function(t){if(t&&200===t.statusCode&&t.data&&t.data.cc){i().v("fetch \u8bf7\u6c42\u6210\u529f, \u54cd\u5e94\u6570\u636e: ",t.data);var r=Object.create(null);mt.each(t.data.cc,function(t){r[t.k]=t});var a={ts:Date.now(),params:r};i().v("\u5f00\u59cb\u7f13\u5b58 fetch \u8bf7\u6c42\u7684\u4e91\u914d\u7f6e\u7ed3\u679c..."),h.setStorage(n.STORAGE_NAME,mt.JSONEncode(a),function(t){i().v("\u7f13\u5b58\u4e91\u914d\u7f6e\u6210\u529f, \u7f13\u5b58\u6570\u636e\u4e3a: ",a),i().v("\u7f13\u5b58\u4e91\u914d\u7f6e\u6210\u529f, \u6210\u529f\u6d88\u606f\u4e3a: ",t),i().v("\u4e91\u914d\u62c9\u53d6\u6570\u636e\u662f\u5426\u81ea\u52a8\u6fc0\u6d3b: ",e),t&&e&&(i().v("\u6fc0\u6d3b\u4e91\u914d\u7f6e..."),n.active({params:r,callback:o}))})}else i().w("fetch \u8bf7\u6c42\u6210\u529f,\u8fd4\u56de\u7ed3\u679c\u5f02\u5e38 ",t.data),o&&o()},fail:function(e){i().w("fetch\u8bf7\u6c42\u6570\u636e\u9519\u8bef ",t,e),o&&o()}})}catch(t){i().w("urequest\u8c03\u7528\u9519\u8bef",t)}})})}}};var Pt={install:function(t){return t.rc||(t.rc=new kt),t.messager.once(t.messager.messageType.CONFIG_LOADED,function(){t._log.v("plugin rc installed")}),t.rc}},Tt="_um",Bt="revenue",Mt="stage",It="level",Rt="running",Lt="end",Dt="init",Nt="set",Et=[Tt,Mt,"start"].join(".");function xt(t){var e={};for(var o in t){var i=t[o];if("object"==typeof i)for(var n in i)e[o+"."+n]=i[n];else e[o]=i}return e}var Ut={install:function(t){t.revenue=function(e){t.trackEvent([Tt,Bt,e.group].join("."),xt(e))};var e=0;return t.stage={onStart:function(o){e=Date.now(),t.trackEvent(Et,xt(o))},onEnd:function(o){"number"!=typeof o._um_sdu&&(o._um_sdu=0!==e?Date.now()-e:0),t.trackEvent([Tt,Mt,Lt,o.event].join("."),xt(o))},onRunning:function(e){t.trackEvent([Tt,Mt,Rt,e.event].join("."),xt(e))}},t.level={onInitLevel:function(e){t.trackEvent([Tt,It,Dt].join("."),xt(e))},onSetLevel:function(e){t.trackEvent([Tt,It,Nt].join("."),xt(e))}},t.messager.once(t.messager.messageType.CONFIG_LOADED,function(){t._log.v("plugin game-ext installed")}),t}};window.tt&&tt.onShow(function(t){var e;i().v("game onShow: ",t),e=t.query,v=e,pt.resume(t,!0)}),window.tt&&tt.onHide(function(){i().v("game onHide"),pt.pause()});var Ot=pt.init;pt.init=function(t){t&&t.useOpenid&&(i().tip_w(i().repeat("!")),i().tip_w("\u60a8\u9009\u62e9\u4e86\u4f7f\u7528openid\u8fdb\u884c\u7edf\u8ba1\uff0c\u8bf7\u786e\u4fdd\u4f7f\u7528setOpenid\u56de\u4f20openid\u6216\u901a\u8fc7\u8bbe\u7f6eautoGetOpenid\u4e3atrue\uff0c\u5e76\u5728\u53cb\u76df\u540e\u53f0\u8bbe\u7f6esecret\u7531\u53cb\u76df\u5e2e\u60a8\u83b7\u53d6"),i().tip_w(i().repeat("!"))),Ot.call(pt,t)},pt.use(Pt),pt.use(Ut),window.tt&&(tt.uma=pt),e.exports=pt,cc._RF.pop()},{}],zqddn_level_base:[function(t,e,o){"use strict";cc._RF.push(e,"50d4cOhZY5J9L910Mi/SzMv","zqddn_level_base");var i=cc._decorator,n=i.ccclass,r=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rightNode=null,e.wrongNode=null,e.rightSound=null,e.wrongSound=null,e.clickSound=null,e.rightStarSound=null,e.xiuSoundAudio=null,e.wrongFrams=[],e.needClickAudioNode=[],e.moveResetNode=null,e.bgNode=[],e.isGame=!0,e.shakeOriginPos={},e.goodsStartPos=[],e.clickSoundInterval=.1,e.clickSoundTimer=0,e.isWin=!1,e.isClick=!1,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;if(this.rightNode.active=!1,0!==this.needClickAudioNode.length)for(var e=0;e<this.needClickAudioNode.length;e++)this.needClickAudioNode[e].on(cc.Node.EventType.TOUCH_START,this.onClickSound,this);if(this.moveResetNode)for(e=0;e<this.moveResetNode.children.length;e++)this.goodsStartPos.push(this.moveResetNode.children[e].position),this.moveResetNode.children[e].on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.moveResetNode.children[e].on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.moveResetNode.children[e].on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.moveResetNode.children[e].on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this);if(0!==this.bgNode.length)for(e=0;e<this.bgNode.length;e++)this.bgNode[e].on(cc.Node.EventType.TOUCH_START,this.onTouchStart2,this);cc.game.on("play-sound",function(e){e&&"star"==e.name&&t.playRightStarSound()},this),cc.game.on("click-sound",function(){t.playClickSound()},this)},e.prototype.onDestroy=function(){cc.game.targetOff(this)},e.prototype.onTouchStart2=function(t){this.isGame&&this.showWrong(t)},e.prototype.onTouchStart=function(){this.onClickSound()},e.prototype.onTouchMove=function(t){if(!this.isWin){var e=t.target,o=t.touch.getDelta();e.x+=o.x,e.y+=o.y}},e.prototype.onTouchEnd=function(t){if(!this.isWin){var e=t.target;cc.tween(e).to(.3,{position:this.goodsStartPos[Number(e.name)]}).start(),this.wrongNode.position=this.node.convertToNodeSpaceAR(t.getLocation()),this.showWrong()}},e.prototype.gameRight=function(t,e){var o=this;if(void 0===t&&(t=.2),this.isGame){if(this.isGame=!1,e){var i=e.parent.convertToWorldSpaceAR(e.position),n=this.rightNode.parent.convertToNodeSpaceAR(i);this.rightNode.setPosition(n)}this.scheduleOnce(function(){o.rightNode.active=!0,o.rightNode.scale=0,cc.game.emit("game_success0"),cc.tween(o.rightNode).delay(.2).call(function(){cc.game.emit("game_success1"),cc.audioEngine.playEffect(o.rightSound,!1)}).to(.3,{scale:1},{easing:cc.easing.expoOut}).delay(1).call(function(){cc.game.emit("game_success2")}).start()},t)}},e.prototype.showWrong=function(t,e,o,i){if(void 0===e&&(e=0),void 0===o&&(o=!1),void 0===i&&(i=0),this.isGame){if(this.wrongNode.active=!0,this.wrongNode.scale=0,this.wrongNode.stopAllActions(),cc.audioEngine.playEffect(this.wrongSound,!1),cc.tween(this.wrongNode).to(.3,{scale:1}).delay(e).to(.3,{scale:0}).start(),t){var n=cc.v2();n=t instanceof cc.Event.EventTouch?t.getLocation():t.parent.convertToWorldSpaceAR(t.position);var r=this.wrongNode.parent.convertToNodeSpaceAR(n);this.wrongNode.setPosition(r)}o&&(this.isGame=!1,this.scheduleOnce(function(){cc.game.emit("onRestartBtn")},e));var a=this.wrongFrams[i];a&&(this.wrongNode.getComponent(cc.Sprite).spriteFrame=a)}},e.prototype.onClickSound=function(){cc.audioEngine.playEffect(this.clickSound,!1)},e.prototype.regTouchEvent=function(t,e,o,i){e&&t.on(cc.Node.EventType.TOUCH_START,e,this),o&&t.on(cc.Node.EventType.TOUCH_MOVE,o,this),i&&t.on(cc.Node.EventType.TOUCH_END,i,this),i&&t.on(cc.Node.EventType.TOUCH_CANCEL,i,this)},e.prototype.playLikeAnimSound=function(){var t=this;return new Promise(function(e){var o=0;t.schedule(function(){cc.audioEngine.playEffect(t.clickSound,!1),30==++o&&e()},.1,30)})},e.prototype.shakeNode=function(t,e){void 0===e&&(e=5);var o=this.shakeOriginPos[t.uuid];o||(o=t.position,this.shakeOriginPos[t.uuid]=o),t.setPosition(o),t.stopAllActions(),cc.tween(t).by(.05,{x:-e}).by(.05,{x:e}).by(.05,{x:e}).by(.05,{x:-e}).by(.05,{x:-e}).by(.05,{x:e}).by(.05,{x:e}).by(.05,{x:-e}).start()},e.prototype.getInstance=function(t,e){var o=t.parent.convertToWorldSpaceAR(t.position),i=e.parent.convertToWorldSpaceAR(e.position);return o.sub(i).mag()},e.prototype.isIntersects=function(t,e){return t.getBoundingBoxToWorld().intersects(e.getBoundingBoxToWorld())},e.prototype.playRightStarSound=function(){cc.audioEngine.playEffect(this.rightStarSound,!1)},e.prototype.playClickSoundInterval=function(){this.clickSoundTimer>this.clickSoundInterval&&(cc.audioEngine.playEffect(this.clickSound,!1),this.clickSoundTimer=0)},e.prototype.playClickSound=function(){cc.audioEngine.playEffect(this.clickSound,!1)},e.prototype.playXiuSound=function(){cc.audioEngine.playEffect(this.xiuSoundAudio,!1)},e.prototype.update=function(t){this.clickSoundTimer+=t},e.prototype.onLongClickSound=function(){var t=this;this.isClick||(this.isClick=!0,this.onClickSound(),this.scheduleOnce(function(){t.isClick=!1},.4))},e.prototype.fadeOut=function(t,e){cc.tween(t).to(.3,{opacity:0}).call(function(){e&&e()}).start()},e.prototype.restart=function(){cc.game.emit("onRestartBtn")},__decorate([r(cc.Node)],e.prototype,"rightNode",void 0),__decorate([r(cc.Node)],e.prototype,"wrongNode",void 0),__decorate([r({type:cc.AudioClip})],e.prototype,"rightSound",void 0),__decorate([r({type:cc.AudioClip})],e.prototype,"wrongSound",void 0),__decorate([r({type:cc.AudioClip})],e.prototype,"clickSound",void 0),__decorate([r({type:cc.AudioClip})],e.prototype,"rightStarSound",void 0),__decorate([r({type:cc.AudioClip})],e.prototype,"xiuSoundAudio",void 0),__decorate([r({type:[cc.SpriteFrame],tooltip:"\u9519\u8bef\u7cbe\u7075\u5e27\uff0c\u975e\u5fc5\u987b"})],e.prototype,"wrongFrams",void 0),__decorate([r([cc.Node])],e.prototype,"needClickAudioNode",void 0),__decorate([r(cc.Node)],e.prototype,"moveResetNode",void 0),__decorate([r([cc.Node])],e.prototype,"bgNode",void 0),__decorate([n],e)}(cc.Component);o.default=a,cc._RF.pop()},{}]},{},["BrainLevelBase","BrainLevelTips","Collision","Level-249667_bulldozer","Level-249667_bus","Level-249667_busConfig","Level-249667_carItem","Level-249667_carSquare","Level-249667_carpark","Level-249667_chain","Level-249667_key","Level-249667_oblique","Level-249667_personItem","Level-249667_turntable","Level-249667_uTransport","Level-28749","Level-287490_boxItem","Level-287490_config","Level-287490_containerControl","Level-287490_drinkItem","Level-287490_gameControl","Level-287490_waitItem","Level-28749_transport","Level-28955","Level-29071","Level-290760_Box","Level-290760_BoxItem","Level-290760_Controller","Level-290760_Drink","Level-290760_DrinkItem","Level-290760_Enum","Level-290760_Model","Level-290760_Wait","Level-290760_WaitItem","Level-29076_boxCarItem","Level-29076_config","Level-29076_control","Level-29086_boxCarItem","Level-29086_carPark","Level-29086_carParkItem","Level-29086_config","Level-29086_control","Level-29086_dragonItem","Level-29086_manager","Level-29086_transport","LevelConstant","LevelUtil","LevelUtils","MotionTrail","PoolMgr","levelReviveHelper","zqddn_level_base","AddHomeBtn","AdjustEventSystem","AgeTip","Android","AndroidOPPO","AndroidVIVO","AndroidXiaoMi","Api","App","AssetConst","AssetManager","AudioConst","AudioManager","AudioSwitch","BasePlatform","BaseUI","BaseUICtrl","BaseboardItem","Bilibili","BmsManager","Bore","BottomBar","CardShop","ChallengeHttp","ChallengeItem","ChallengeSystem","Cheats","Coin","Collect","CollectItem","Comment","CommentNew","ConfigConst","ConfigManager","ConfigUtils","CopyRightDialog","CryHelp","DebugManager","DragonBall","DynamicScroll","EHttp","EffectManager","Encrypt","EventConst","EventManager","First","FrameAnim","Game","GameNamespace","GenerateMapPath","Get","Get3","GetCard","HW","HeroLevel","Hide","Hint","HintSystem","Home","HomeItem","HttpConst","HttpUtils","IGame","IOS","IUser","KS","Key","LanguageManager","LevelSelect","LevelSelectItem","LimitRepeat","LimitWelfare","Loading","LoadingManager","LocalStorage","LocalStorageConst","LocalStorageManager","Logger","Login","Login2","LuckTurntable","MD5Type","Main","MainVideoTip","Map","MemoryStorageConst","MemoryStorageManager","ModeSelect","ModeSelectItem","ModeUnlcok","Navigation","NewHand","NewHandBtn","NewVersion","NoAD","NoADBtn","OPPO","OPPOADMediatorUtils","OPPOAndroidAdUtils","OPPOMiniADMediatorUtils","OPPOMiniADUtils","ObserverConst","ObserverManager","Params","PaymentSystem","PigItem","PlanItem","PlatformConst","PlatformManager","Play","PlayItem","PlaySpineInEditor","PoolUtils","PopupConst","PopupManager","Power","PreLoad","PrivacyPolicy","Prop","PropBtn","QQ","Rank","RankItem","RecycleScroll","Report","ReportManager","ReportQueue","Request","ResManager","Rewrite","RewriteMask","Role","Rule","SceneConst","SceneFit","SceneManager","ScreenshotUtils","ScrewSkinItem","Set","ShareTip","ShipRaceSysetem","ShipRank","Shop","ShopBtn","ShopNew","Show","ShuShuConst","SignIn","SignInManager","SignInOld","Skin","SkinGetWay","SkinItem","Skip","SpecialGift","Stars","StorageSync","Supervalue","SupervalueBtn","TT","TTRecommendGameCard","TaskManager","TimeEnd","TimeManage","TimeManager","Tip","TipManager","ToastManager","Tools","TopBar","TouchSound","Turntable","UIBase","UniversalCard","UniversalCardItem","UnlockAllMode","UnlockNewMode","UnlockUgc","UserConst","UserManager","Utils","VIPSystem","VIVO","VIVOADUtils","WX","Win","XM","XMADMediatorUtils","XMADUtils","XMLHttpRequestUtils","config","crypto-js","function","index","md5","myXxtea","ttPostbackCtl","umaTT","temp"]);